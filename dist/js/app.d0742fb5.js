(function(){var t={6700:function(t,e,r){var a={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":6649,"./is.js":6649,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":6956,"./oc-lnc.js":6956,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":9304,"./th.js":9304,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function s(t){var e=i(t);return r(e)}function i(t){if(!r.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}s.keys=function(){return Object.keys(a)},s.resolve=i,t.exports=s,s.id=6700},916:function(t,e,r){"use strict";var a=r(9242),s=r(3396),i=r(7718);function o(t,e,r,a,o,l){const n=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(i.q,{class:"my-application"},{default:(0,s.w5)((()=>[(0,s.Wm)(n)])),_:1})}var l=r(7139),n={name:"App",data:()=>({theme:"light"}),methods:{...(0,l.nv)("user",["setIsLoggedIn","setPermissions"])},mounted(){}},d=r(89);const w=(0,d.Z)(n,[["render",o],["__scopeId","data-v-e47c86e2"]]);var c=w,u=r(2483);let p={roles:localStorage.getItem("roles")?JSON.parse(localStorage.getItem("roles")):[],user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):[],isLoggedIn:"true"==localStorage.getItem("isLoggedIn"),permissions:localStorage.getItem("permissions")?JSON.parse(localStorage.getItem("permissions")):[],users:[],agents:[],deliveries:[],fetched:!1,fetchedRoles:!1};var m={name:"user",namespaced:!0,state:p,getters:{fetched:t=>t.fetched,fetchedRoles:t=>t.fetchedRoles,isLoggedIn:t=>t.isLoggedIn,permissions:t=>t.permissions,user:t=>t.user,users:t=>t.users,roles:t=>t.roles,agents:t=>t.agents,deliveries:t=>t.deliveries},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_FETCHED_ROLES:(t,e)=>{t.fetchedRoles=e},SET_IS_LOGGED_IN:(t,e)=>{localStorage.setItem("isLoggedIn",e),t.isLoggedIn=e},SET_USER:(t,e)=>{localStorage.setItem("user",JSON.stringify(e)),t.user=e},SET_USERS:(t,e)=>{t.users=e},SET_PERMISSIONS:(t,e)=>{localStorage.setItem("permissions",JSON.stringify(e)),t.permissions=e},SET_ROLES:(t,e)=>{localStorage.setItem("roles",JSON.stringify(e)),t.roles=e},SET_DELIVERIES:(t,e)=>{t.deliveries=e},SET_AGENTS:(t,e)=>{t.agents=e}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setFetchedRoles:({commit:t},e)=>{t("SET_FETCHED_ROLES",e)},setUser:({commit:t},e)=>{t("SET_USER",e)},setUsers:({commit:t},e)=>{t("SET_USERS",e)},setAgents:({commit:t},e)=>{t("SET_AGENTS",e)},setDeliveries:({commit:t},e)=>{t("SET_DELIVERIES",e)},setIsLoggedIn:({commit:t},e)=>{t("SET_IS_LOGGED_IN",e)},setPermissions:({commit:t},e)=>{t("SET_PERMISSIONS",e)},setRoles:({commit:t},e)=>{t("SET_ROLES",e)},logout:({commit:t})=>{t("SET_USER",{}),t("SET_IS_LOGGED_IN",!1),t("SET_PERMISSIONS",[]),t("SET_ROLES",[])}}},h={name:"alert",namespaced:!0,state:{active:!1,alert:{type:"success",title:"Toast",body:"Hello body"}},getters:{alert:t=>t},mutations:{TOGGLE_TOAST:(t,e)=>{t.alert=e,t.active=!0,setTimeout((()=>{t.active=!1}),4500)}},actions:{toggleAlert:({commit:t},e)=>{t("TOGGLE_TOAST",e)}}};r(7658);let g={products:[],fetched:!1};var f={name:"product",namespaced:!0,state:g,getters:{products:t=>t.products,fetched:t=>t.fetched},mutations:{SET_PRODUCTS:(t,e)=>{t.products=e},ADD_PRODUCT:(t,e)=>{t.products.push(e)},SET_FETCHED:(t,e)=>{t.fetched=e}},actions:{setProducts:({commit:t},e)=>{t("SET_PRODUCTS",e)},addProduct:({commit:t},e)=>{t("ADD_PRODUCT",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)}}};r(541);let v={fetched:!1,sales:[],count:0};var y={name:"sale",namespaced:!0,state:v,getters:{sales:t=>t.sales,count:t=>t.count,fetched:t=>t.fetched},mutations:{SET_SALES:(t,e)=>{t.sales=e},SET_COUNT:(t,e)=>{t.count=e},SET_FETCHED:(t,e)=>{t.fetched=e},UPDATE_SALE:(t,e)=>{t.sales=t.sales.map((t=>t.id===e.id?e.sale:t))},ADD_SALE:(t,e)=>{t.sales.unshift(e)},ADD_SALES:(t,e)=>{t.sales=[...e,...t.sales]},UPDATE_CONFIRMATION:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,console.log("sale updated")),t)))},UPDATE_UPSELL:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.upsell=e.upsell,console.log("sale updated")),t)))},UPDATE_AFFECTATION:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.affectation=e.affectation,null!=e.affectation?t.delivery="dispatch":t.delivery=null,console.log("sale updated")),t)))},UPDATE_NOTE:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.note=e.note,console.log("sale updated")),t)))},UPDATE_CONFIRMATION_WITH_NOTE:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,t.note=e.note,console.log("order updated")),t)))},UPDATE_DELIVERY:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.delivery=e.delivery,console.log("sale updated")),t)))},RESET_SALES:(t,e)=>{t.sales=t.sales.map((t=>(e.includes(t.id)&&(t.agente_id=null,t.upsell=null,t.confirmation=null,t.affectation=null,t.note=null,t.note_d=null,t.delivery=null,t.reported_agente_date=null,t.reported_agente_note=null,t.reported_delivery_date=null,t.reported_delivery_note=null),t)))}},actions:{setSales:({commit:t},e)=>{t("SET_SALES",e)},setCount:({commit:t},e)=>{t("SET_COUNT",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},update:({commit:t},e)=>{t("UPDATE_SALE",e)},add:({commit:t},e)=>{t("ADD_SALE",e)},addSales:({commit:t},e)=>{t("ADD_SALES",e)},updateConfirmation:({commit:t},e)=>{t("UPDATE_CONFIRMATION",e)},updateUpsell:({commit:t},e)=>{t("UPDATE_UPSELL",e)},updateAffectation:({commit:t},e)=>{t("UPDATE_AFFECTATION",e)},updateNote:({commit:t},e)=>{t("UPDATE_NOTE",e)},updateConfirmationWithNote:({commit:t},e)=>{t("UPDATE_CONFIRMATION_WITH_NOTE",e)},updateDelivery:({commit:t},e)=>{t("UPDATE_DELIVERY",e)},resetSales:({commit:t},e)=>{t("RESET_SALES",e)}}};let x={orders:[],order:null,all_orders:[],fetched:!1};var b={name:"order",namespaced:!0,state:x,getters:{fetched:t=>t.fetched,orders:t=>t.orders,order:t=>t.order,allOrders:t=>t.all_orders},mutations:{SET_ORDERS:(t,e)=>{t.orders=e},ADD_ORDER:(t,e)=>{t.orders.unshift(e),t.all_orders.unshift(e)},SET_FETCHED:(t,e)=>{t.fetched=e},SET_ALL_ORDERS:(t,e)=>{t.all_orders=e},SET_ORDER:(t,e)=>{t.order=e},UPDATE_ORDER:(t,e)=>{t.orders=t.orders.map((t=>t.id===e.id?e.order:t)),t.all_orders=t.all_orders.map((t=>t.id===e.id?e.order:t))},UPDATE_CONFIRMATION:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,"confirmer"==e.confirmation&&(t.delivery="dispatch"),console.log("order updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,"confirmer"==e.confirmation&&(t.delivery="dispatch"),console.log("order updated")),t)))},UPDATE_CONFIRMATION_WITH_NOTE:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,t.note=e.note,"confirmer"==e.confirmation&&(t.delivery="dispatch"),console.log("order updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,t.note=e.note,"confirmer"==e.confirmation&&(t.delivery="dispatch"),console.log("order updated")),t)))},UPDATE_UPSELL:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.upsell=e.upsell,console.log("sale updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.upsell=e.upsell,console.log("sale updated")),t)))},UPDATE_AFFECTATION:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.affectation=e.affectation,console.log("sale updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.affectation=e.affectation,console.log("sale updated")),t)))},UPDATE_NOTE:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.note=e.note,console.log("sale updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.note=e.note,console.log("sale updated")),t)))},UPDATE_DELIVERY:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.delivery=e.delivery,console.log("sale updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.delivery=e.delivery,console.log("sale updated")),t)))}},actions:{setOrders:({commit:t},e)=>{t("SET_ORDERS",e)},addOrder:({commit:t},e)=>{t("ADD_ORDER",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setAllOrders:({commit:t},e)=>{t("SET_ALL_ORDERS",e)},setOrder:({commit:t},e)=>{t("SET_ORDER",e)},update:({commit:t},e)=>{t("UPDATE_ORDER",e)},updateConfirmation:({commit:t},e)=>{t("UPDATE_CONFIRMATION",e)},updateConfirmationWithNote:({commit:t},e)=>{t("UPDATE_CONFIRMATION_WITH_NOTE",e)},updateUpsell:({commit:t},e)=>{t("UPDATE_UPSELL",e)},updateAffectation:({commit:t},e)=>{t("UPDATE_AFFECTATION",e)},updateNote:({commit:t},e)=>{t("UPDATE_NOTE",e)},updateDelivery:({commit:t},e)=>{t("UPDATE_DELIVERY",e)}}};let _={fetcehd:!1,inventoryList:[],inventoryState:[],inventoryMovements:[]};var k={name:"inventory",namespaced:!0,state:_,getters:{fetched:t=>t.fetched,inventoryList:t=>t.inventoryList,inventoryState:t=>t.inventoryState,inventoryMovements:t=>t.inventoryMovements},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_INVENTORY_LIST:(t,e)=>{t.inventoryList=e},SET_INVENTORY_STATE:(t,e)=>{t.inventoryState=e},SET_INVENTORY_MOVEMENTS:(t,e)=>{t.inventoryMovements=e}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setInventoryList:({commit:t},e)=>{t("SET_INVENTORY_LIST",e)},setInventoryState:({commit:t},e)=>{t("SET_INVENTORY_STATE",e)},setInventoryMovements:({commit:t},e)=>{t("SET_INVENTORY_MOVEMENTS",e)}}};const C=localStorage.getItem("cities");let D={fetched:!1,cities:C?JSON.parse(C):[]};var S={name:"city",namespaced:!0,state:D,getters:{cities:t=>t.cities,fetched:t=>t.fetched},mutations:{SET_CITIES:(t,e)=>{localStorage.setItem("cities",JSON.stringify(e)),t.cities=e},SET_FETCHED:(t,e)=>{t.fetched=e}},actions:{setCities:({commit:t},e)=>{t("SET_CITIES",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)}}};let z={shops:[]};var U={name:"shop",namespaced:!0,state:z,getters:{shops:t=>t.shops},mutations:{SET_SHOPS:(t,e)=>{t.shops=e}},actions:{setShops:({commit:t},e)=>{t("SET_SHOPS",e)}}};let L={fetched:!1,notifications:{productStockAlert:[],reportedSale:[],reportedOrderAgente:[],reportedOrderDelivery:[]}};var P={name:"notification",namespaced:!0,state:L,getters:{notifications:t=>t.notifications,fetched:t=>t.fetched},mutations:{SET_NOTIFICATIONS:(t,e)=>{t.notifications=e},SET_FETCHED:(t,e)=>{t.fetched=e}},actions:{setNotifications:({commit:t},e)=>{t("SET_NOTIFICATIONS",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)}}};let A={fetched:!1,warehouses:[]};var $={name:"warehouse",namespaced:!0,state:A,getters:{fetched:t=>t.fetched,warehouses:t=>t.warehouses},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_WAREHOUSES:(t,e)=>{t.warehouses=e},ADD_WAREHOUSE:(t,e)=>{t.warehouses.push(e)},DELETE_WAREHOUSE:(t,e)=>{t.warehouses=t.warehouses.filter((t=>t.id!=e))},UPDATE_WAREHOUSE:(t,e)=>{t.warehouses=t.warehouses.map((t=>t.id==e.id?{...e}:t))}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setWarehouses:({commit:t},e)=>{t("SET_WAREHOUSES",e)},addWarehouse:({commit:t},e)=>{t("ADD_WAREHOUSE",e)},update:({commit:t},e)=>{t("UPDATE_WAREHOUSE",e)},delete:({commit:t},e)=>{t("DELETE_WAREHOUSE",e)}}};let W={fetched:!1,factorisations:[]};var q={name:"factorisation",namespaced:!0,state:W,getters:{fetched:t=>t.fetched,factorisations:t=>t.factorisations},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_FACTORISATIONS:(t,e)=>{t.factorisations=e},ADD_FACTORISATION:(t,e)=>{t.factorisations.push(e)},DELETE_FACTORISATION:(t,e)=>{t.factorisations=t.factorisations.filter((t=>t.id!=e))},UPDATE_FACTORISATION:(t,e)=>{t.factorisations=t.factorisations.map((t=>t.id==e.id?{...e}:t))}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setFactorisations:({commit:t},e)=>{t("SET_FACTORISATIONS",e)},addFactorisation:({commit:t},e)=>{t("ADD_FACTORISATION",e)},update:({commit:t},e)=>{t("UPDATE_FACTORISATION",e)},delete:({commit:t},e)=>{t("DELETE_FACTORISATION",e)}}};let O={fetched:!1,sheets:[]};var E={name:"sheet",namespaced:!0,state:O,getters:{fetched:t=>t.fetched,sheets:t=>t.sheets},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_SHEETS:(t,e)=>{t.sheets=e},ADD_SHEET:(t,e)=>{t.sheets.push(e)},DELETE_SHEET:(t,e)=>{t.sheets=t.sheets.filter((t=>t.id!=e))},UPDATE_SHEET:(t,e)=>{t.sheets=t.sheets.map((t=>t.id==e.id?{...e}:t))}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setSheets:({commit:t},e)=>{t("SET_SHEETS",e)},addSheet:({commit:t},e)=>{t("ADD_SHEET",e)},update:({commit:t},e)=>{t("UPDATE_SHEET",e)},delete:({commit:t},e)=>{t("DELETE_SHEET",e)}}},T=(0,l.MT)({state:{},getters:{},mutations:{},actions:{},modules:{user:m,product:f,alert:h,sale:y,order:b,inventory:k,city:S,shop:U,notification:P,warehouse:$,factorisation:q,sheet:E}}),V=r(6943);const I="https://vldo.shop/",F="https://api.vldo.shop/",R="$",j=V.Z.create({baseURL:F}),N=V.Z.create({baseURL:F});N.defaults.withCredentials=!0,N.defaults.headers={"Content-Type":"multipart/form-data",Accept:"application/json"},j.defaults.withCredentials=!0,j.defaults.headers={"Content-Type":"application/json",Accept:"application/json"};var M=j,H=r(680),Y={getCookie(){let t=H.Z.get("XSRF-TOKEN");return t?new Promise((t=>{t()})):M.get("sanctum/csrf-cookie")}};class Z{async login(t){return await Y.getCookie(),M.post("api/auth/login",{email:t.email,password:t.password})}async register(t){return await Y.getCookie(),M.post("api/users/new",{email:t.email,password:t.password,phone:t.phone,status:t.status,role:t.role,firstname:t.firstname,lastname:t.lastname,product_id:t.product_id,city:t?.city,deliverycity:t?.deliveryCities,having_all:t.having_all})}async update(t,e){return await Y.getCookie(),M.post("api/users/update/"+t.id,{email:t.email,password:t.password,phone:t.phone,status:t.status,firstname:t.firstname,lastname:t.lastname,product_id:t.product_id,role:t.role,city:t?.city,deliverycity:t?.deliveryCities,updatePassword:e,having_all:t.having_all})}async updateProfile(t,e){return await Y.getCookie(),M.post("api/users/profile",{password:t.password,phone:t.phone,firstname:t.firstname,lastname:t.lastname,updatePassword:e})}async online(){return await Y.getCookie(),M.get("api/user")}async profile(){return await Y.getCookie(),M.get("api/users/profile")}async logout(){return await Y.getCookie(),M.get("api/auth/logout")}async clear(){return await Y.getCookie(),M.get("api/auth/clear")}async permession(){return await Y.getCookie(),M.get("api/auth/permission")}async roles(){return await Y.getCookie(),M.get("api/auth/roles")}async all(){return await Y.getCookie(),M.get("api/users")}async updateStatus({id:t,status:e}){return await Y.getCookie(),M.post("api/users/status/"+t,{status:e})}async delete(t){return await Y.getCookie(),M["delete"]("api/users/delete/"+t)}async getUser(t){return await Y.getCookie(),M.get("api/users/"+t)}async createRole({name:t,permissions:e}){return await Y.getCookie(),M.post("api/roles/new",{name:t,permissions:e})}async updateRole(t,{name:e,permissions:r}){return await Y.getCookie(),M.post("api/roles/update/"+t,{name:e,permissions:r})}async deleteRole(t){return await Y.getCookie(),M["delete"]("api/roles/delete/"+t)}async getRole(t){return await Y.getCookie(),M.get("api/roles/"+t)}async agents(){return await Y.getCookie(),M.get("api/agents")}async deliveries(){return await Y.getCookie(),M.get("api/delevries")}async allDeliveries(){return await Y.getCookie(),M.get("api/deliveries")}async cities(){return await Y.getCookie(),M.get("api/cities")}}var K=new Z;function B(t){if(document.title=t.meta?.title+" | Vldo Shop",console.log(t),!T.getters["user/isLoggedIn"])return"/login"==t.path||{name:"login"};if(K.online(),"/login"==t.path)return{name:"404"};const{gate:e}=t.meta,r=T.getters["user/permissions"];return"all"===e||((e||"/404"===t.path)&&!(!r.includes(e)&&"/404"!==t.path)||{name:"404"})}var Q=r(2268),G=r(7312),J=r(3369),X=r(3289),tt=r(165);const et={class:"tw-min-h-screen tw-overflow-auto tw-bg-slate-50"},rt={class:"tw-grid tw-h-fit tw-overflow-hidden md:tw-grid-cols-2 tw-grid-cols-1"},at={class:"py-md-5 py-10 pb-0 tw-flex tw-justify-center md:tw-items-center"},st={class:"px-md-10 tw-w-full"},it={class:"tw-w-[150px]"},ot=["src"],lt={class:"mt-md-10 mt-15 pt-5 px-md-5 px-lg-16 tw-w-full d-felx justify-center align-center"},nt={class:"pa-5 py-7 tw-border bg-white tw-rounded-lg tw-mx-auto tw-max-w-[450px]"},dt=(0,s._)("h1",{class:"text-h5 font-weight-medium !tw-text-gray-600"},"Login",-1),wt=(0,s._)("p",{class:"text-body-1 mt-2 !tw-text-gray-500"},"Please login to your account",-1),ct={key:0,class:"text-body-2 mt-2 !tw-text-red-500"},ut={class:"mt-5"},pt=(0,s._)("p",{class:"mb-1"},"Email",-1),mt=(0,s._)("p",{class:"mb-1"},"Password",-1),ht={class:"mt-5"},gt=(0,s._)("span",{class:"text-capitalize text-white"},"Login",-1),ft={class:"bg-primary-color tw-min-h-screen tw-hidden md:tw-flex tw-items-center tw-justify-center"},vt=["src"];function yt(t,e,r,i,o,l){const n=(0,s.up)("Alert");return(0,s.wg)(),(0,s.iD)("div",et,[(0,s.Wm)(n),(0,s._)("div",rt,[(0,s._)("div",at,[(0,s.Wm)(J.K,{class:"py-0"},{default:(0,s.w5)((()=>[(0,s._)("div",st,[(0,s._)("div",it,[(0,s._)("img",{class:"tw-w-full",src:o.localUrl+"assets/img/logo.png"},null,8,ot)]),(0,s._)("div",lt,[(0,s._)("div",nt,[dt,wt,o.error.active?((0,s.wg)(),(0,s.iD)("p",ct,(0,Q.zw)(o.error.message),1)):(0,s.kq)("",!0),(0,s._)("div",ut,[(0,s._)("div",null,[pt,(0,s.Wm)(tt.hw,{name:"email",onKeyup:e[0]||(e[0]=t=>l.resetError("email")),modelValue:o.email,"onUpdate:modelValue":e[1]||(e[1]=t=>o.email=t),error:!o.emailStatus.valid,"error-messages":o.emailStatus.valid?"":o.emailStatus.message,autofocus:"",onBlur:e[2]||(e[2]=t=>o.emailFocus=!1),onFocus:e[3]||(e[3]=t=>o.emailFocus=!0),color:"primary-color",variant:"outlined",class:"tw-w-full",density:"compact"},{"append-inner":(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:o.emailFocus?o.emailStatus.valid?"primary-color":"error":"grey-darken-3"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-email-outline")])),_:1},8,["color"])])),_:1},8,["modelValue","error","error-messages"])]),(0,s._)("div",null,[mt,(0,s.Wm)(tt.hw,{name:"password",onKeyup:(0,a.D2)(l.login,["enter"]),modelValue:o.password,"onUpdate:modelValue":e[5]||(e[5]=t=>o.password=t),error:!o.passwordStatus.valid,"error-messages":o.passwordStatus.valid?"":o.passwordStatus.message,type:o.showPassword?"text":"password",onBlur:e[6]||(e[6]=t=>o.passwordFocus=!1),onFocus:e[7]||(e[7]=t=>o.passwordFocus=!0),color:"primary-color",variant:"outlined",class:"tw-w-full",density:"compact"},{"append-inner":(0,s.w5)((()=>[(0,s.Wm)(X.t,{onClick:e[4]||(e[4]=t=>o.showPassword=!o.showPassword),class:"tw-relative tw-z-50 tw-cursor-pointer",color:o.passwordFocus?o.passwordStatus.valid?"primary-color":"error":"grey-darken-3"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(o.showPassword?"mdi-eye-off-outline":"mdi-eye-outline"),1)])),_:1},8,["color"])])),_:1},8,["onKeyup","modelValue","error","error-messages","type"])]),(0,s._)("div",ht,[(0,s.Wm)(G.T,{disabled:o.isLoading||!o.cookiesCleared,loading:o.isLoading||!o.cookiesCleared,onClick:l.login,block:"",size:"large",color:"primary-color",variant:"flat",class:"!tw-text-white disabled:!tw-bg-gray-200"},{default:(0,s.w5)((()=>[gt])),_:1},8,["disabled","loading","onClick"])])])])])])])),_:1})]),(0,s._)("div",ft,[(0,s._)("img",{src:o.localUrl+"assets/img/login.jpg",class:"tw-w-full tw-h-full tw-object-cover",alt:""},null,8,vt)])])])}function xt(t){var e=/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/;return t?new RegExp(e).test(t)?{valid:!0}:{valid:!1,message:"Email is not valid."}:{valid:!1,message:"Email is required."}}function bt(t){return t?t.length<=4||t.length>=16?{valid:!1,message:"Password length must be between 4 and 16."}:{valid:!0}:{valid:!1,message:"This field is required"}}function _t(t,e="This field"){return t?{valid:!0}:{valid:!1,message:`${e} is required`}}function kt(t,e="This field"){return t?isNaN(t)?{valid:!1,message:`${e} must be a valid number`}:{valid:!0}:{valid:!1,message:`${e} is required`}}function Ct(t,e){return t?t!==e?{valid:!1,message:"Passwords doesn't match"}:{valid:!0}:{valid:!1,message:"This field is required."}}function Dt(t){return t.length?{valid:!0}:{valid:!1,message:"You need at least one variant to create a product !"}}function St(t){return t.length?{valid:!0}:{valid:!1,message:"You need at least one permission to create a role !"}}var zt=r(7771),Ut=r(8952);const Lt={key:0,class:"pa-2 tw-absolute !tw-z-[510000]"},Pt={class:"tw-text-sm"};function At(t,e,r,a,i,o){return(0,s.wg)(),(0,s.j4)(s.lR,{to:"body"},[(0,s.Wm)(Ut.V,null,{default:(0,s.w5)((()=>[o.state.active?((0,s.wg)(),(0,s.iD)("div",Lt,[(0,s.Wm)(zt.w,{closable:"",density:"compact",variant:"flat",type:o.state.alert.type,position:"fixed",location:"bottom right",class:"ma-2"},{default:(0,s.w5)((()=>[(0,s._)("div",Pt,(0,Q.zw)(o.state.alert.title),1)])),_:1},8,["type"])])):(0,s.kq)("",!0)])),_:1})])}var $t={computed:{state(){return this.$store.getters["alert/alert"]}}};const Wt=(0,d.Z)($t,[["render",At]]);var qt=Wt,Ot={components:{Alert:qt},data(){return{localUrl:I,isLoading:!1,cookiesCleared:!1,error:{active:!1,message:""},email:"",password:"",emailStatus:{valid:!0,message:""},passwordStatus:{valid:!0,message:""},emailFocus:!1,passwordFocus:!1,showPassword:!1}},methods:{...(0,l.nv)("user",["setIsLoggedIn","setPermissions","setUser"]),validateForm(){return this.emailStatus=xt(this.email),this.passwordStatus=bt(this.password),this.passwordStatus.valid&&this.emailStatus.valid},login(){this.validateForm()&&(this.isLoading=!0,this.error={active:!1,message:""},K.login({email:this.email,password:this.password}).then((t=>{if("AUTHENTICATION_SUCCESSFUL"==t.data.code){this.setUser(t.data.data.user),this.setIsLoggedIn(!0);const e=t.data.data.user.permissions;this.setPermissions(e),this.$router.push("/")}})).catch((t=>{this.$handleApiError(t),"INVALID_CREDENTIALS"==t.response?.data.code&&(this.error={active:!0,message:t.response.data.message}),"NOT_ACTIVE_ERROR"==t.response?.data.code&&(this.error={active:!0,message:t.response.data.message}),"VALIDATION_ERROR"==t.response?.data.code&&(this.emailStatus={valid:!1,message:t.response.data.error["email"][0]},this.passwordStatus={valid:!1,message:t.response.data.error["password"][0]})})).finally((()=>{this.isLoading=!1})),console.log("login..."))},resetError(t){"email"==t&&(this.emailStatus={valid:!0,message:""}),"password"==t&&(this.passwordStatus={valid:!0,message:""})}},mounted(){K.clear().then((()=>{this.cookiesCleared=!0}))}};const Et=(0,d.Z)(Ot,[["render",yt]]);var Tt=Et,Vt={name:"login",path:"/login",component:Tt,meta:{title:"Login"}},It=r(4454),Ft=r(3140);function Rt(t,e,r,a,i,o){const l=(0,s.up)("AppSidebar"),n=(0,s.up)("AppHeader"),d=(0,s.up)("Alert"),w=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)("div",null,[o.isLoggedIn?((0,s.wg)(),(0,s.j4)(It.s,{key:0,"full-height":!0},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{active:i.drawer},null,8,["active"]),(0,s.Wm)(n,{onToggleSidebar:o.toggleSidebar},null,8,["onToggleSidebar"]),(0,s.Wm)(d),(0,s.Wm)(Ft.O,{class:"tw-bg-gray-50 tw-min-h-screen tw-overflow-y-auto"},{default:(0,s.w5)((()=>[(0,s.Wm)(J.K,{fluid:"",class:"py-6 px-6"},{default:(0,s.w5)((()=>[(0,s.Wm)(w)])),_:1})])),_:1}),i.showScrollUpButton?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:e[0]||(e[0]=(...t)=>o.scrollToTop&&o.scrollToTop(...t)),class:"tw-fixed tw-shadow tw-text-sm tw-bottom-5 tw-right-3 tw-w-10 tw-h-10 tw-z-10 tw-rounded-full tw-bg-orange-400 tw-text-white"},[(0,s.Wm)(X.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-transfer-up")])),_:1})])):(0,s.kq)("",!0)])),_:1})):(0,s.kq)("",!0)])}var jt=r(6439),Nt=r(9156);const Mt={class:"tw-flex tw-items-center tw-gap-2"};function Ht(t,e,r,i,o,l){const n=(0,s.up)("Notification"),d=(0,s.up)("HeaderMenu");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(jt.L,{color:"white",density:"default",elevation:"0",class:"tw-border-b-0 !tw-shadow-lg !tw-shadow-gray-400/10 tw-top-0 !tw-fixed tw-overflow-visible",absolute:!1},(0,s.Nv)({append:(0,s.w5)((()=>[(0,s._)("div",Mt,[(0,s.Wm)(n),(0,s.Wm)(d)])])),default:(0,s.w5)((()=>[(0,s.Wm)(Nt.g,{variant:"text",onClick:e[0]||(e[0]=(0,a.iM)((t=>l.handleClick()),["stop"]))})])),_:2},[void 0]),1024)])}var Yt=r(652),Zt=r(4075),Kt=r(8694),Bt=r(8793);const Qt={class:"tw-relative"},Gt=(0,s._)("div",{class:"tw-absolute tw-bottom-0 tw-border-2 tw-border-solid tw-border-white tw-right-0 tw-w-3 tw-h-3 tw-rounded-full tw-bg-green-500"},null,-1),Jt={key:0,class:"!tw-duration-100"},Xt={class:"tw-absolute tw-bg-white tw-border tw-border-solid tw-border-neutral-200 tw-rounded-md tw-bordesr !tw-shadow-lg !tw-shadow-gray-400/10 tw-top-14 tw-right-0 tw-w-[200px] tw-min-h-[50px]"},te={class:"pa-2 d-flex tw-items-center tw-gap-2 tw-border-b tw-border-b-neutral-100"},ee={class:"d-flex flex-column justify-center"},re={class:"tw-text-sm tw-text-neutral-800 text-capitalize"},ae={class:"tw-text-xs tw-rounded-lg tw-text-green-500 text-capitalize"},se=(0,s._)("span",{class:"text-capitalize tw-text-neutral-700 tw-text-xs"}," Profile ",-1),ie={class:"d-flex tw-items-center tw-gap-2"},oe=(0,s._)("span",{class:"text-capitalize tw-text-red-700 tw-text-xs"}," Logout ",-1);function le(t,e,r,a,i,o){return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",Qt,[(0,s.Wm)(G.T,{onClick:o.toggleMenu,icon:"","max-width":"35","max-height":"35"},{default:(0,s.w5)((()=>[(0,s.Wm)(Yt.V,{size:"32"},{default:(0,s.w5)((()=>[(0,s.Wm)(Kt.f,{src:i.localUrl+"assets/img/profiles/avatar.webp"},null,8,["src"])])),_:1}),Gt])),_:1},8,["onClick"]),(0,s.Wm)(Ut.Z5,null,{default:(0,s.w5)((()=>[i.isActive?((0,s.wg)(),(0,s.iD)("div",Jt,[(0,s._)("div",Xt,[(0,s._)("div",te,[(0,s.Wm)(Yt.V,{size:"35"},{default:(0,s.w5)((()=>[(0,s.Wm)(Kt.f,{eager:"",src:i.localUrl+"assets/img/profiles/avatar.webp"},null,8,["src"])])),_:1}),(0,s._)("div",ee,[(0,s._)("div",re,(0,Q.zw)(o.user.firstname)+" "+(0,Q.zw)(o.user.lastname),1),(0,s._)("div",ae,(0,Q.zw)(o.user.role),1)])]),(0,s.Wm)(Zt.J),(0,s._)("div",{onClick:e[0]||(e[0]=(...t)=>o.closeMenu&&o.closeMenu(...t)),class:"d-flex tw-items-center tw-gap-2"},[(0,s.Wm)(G.T,{block:"",class:"justify-start",variant:"text",color:"gray",ripple:!1},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{class:"mr-2 tw-text-neutral-700"},{default:(0,s.w5)((()=>[(0,s.Uk)(" mdi-account-outline ")])),_:1}),se])),_:1})]),(0,s.Wm)(Zt.J),(0,s._)("div",ie,[(0,s.Wm)(G.T,{onClick:o.logout,block:"",class:"justify-start",variant:"text",color:"gray",ripple:!1},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{class:(0,Q.C_)([{"tw-animate-pulse":i.loginOut},"mr-2 tw-text-red-700"])},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(i.loginOut?"mdi-power-settings":"mdi-power"),1)])),_:1},8,["class"]),oe])),_:1},8,["onClick"])])])])):(0,s.kq)("",!0)])),_:1})])),[[Bt.L,o.closeMenu]])}var ne={data(){return{localUrl:I,isActive:!1,loginOut:!1}},methods:{toggleMenu(){this.isActive=!this.isActive},closeMenu(){this.isActive=!1},logout(){this.loginOut=!0,K.logout().then((()=>{this.$store.dispatch("user/logout"),this.$router.push("/login")})).finally((()=>{this.loginOut=!1}))}},computed:{user(){return this.$store.getters["user/user"]}}};const de=(0,d.Z)(ne,[["render",le]]);var we=de;function ce(t,e,r,a,i,o){const l=(0,s.up)("AdminNotification"),n=(0,s.up)("UserNotification");return(0,s.wg)(),(0,s.iD)("div",null,["admin"==o.user.role?((0,s.wg)(),(0,s.j4)(l,{key:0})):(0,s.kq)("",!0),["agente","delivery"].includes(o.user.role)?((0,s.wg)(),(0,s.j4)(n,{key:1})):(0,s.kq)("",!0)])}const ue={class:"tw-relative"},pe={key:0,class:"tw-absolute tw-border-2 tw-border-solid tw-border-white tw-top-1 tw-right-1 tw-w-3 tw-h-3 tw-rounded-full tw-bg-red-500"},me={key:0,class:"!tw-duration-100"},he={class:"tw-absolute tw-text-sm tw-bg-white tw-border tw-border-solid tw-border-neutral-200 tw-rounded-md tw-bordesr !tw-shadow-lg !tw-shadow-gray-400/10 tw-top-14 tw-right-0 tw-w-[230px] tw-min-h-[50px]"},ge=(0,s._)("p",{class:"tw-p-2 tw-text-sm"},"Notifications",-1),fe={key:0},ve={class:"tw-py-10 tw-flex tw-items-center tw-justify-center"},ye={key:1},xe=(0,s._)("p",{class:""},"Stock Alert",-1),be=(0,s._)("p",{class:""},"Delivery Reported",-1),_e=(0,s._)("p",{class:""},"Confirmation Reported",-1);function ke(t,e,r,a,i,o){const l=(0,s.up)("router-link");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",ue,[(0,s.Wm)(G.T,{onClick:o.toggleMenu,icon:"",width:"35",height:"35",class:"tw-relative"},{default:(0,s.w5)((()=>[(0,s.Wm)(Kt.f,{width:"22",height:"22",src:i.localUrl+"assets/img/icons/notification-bing.svg"},null,8,["src"]),o.stockAlert.length||o.reportedDeliveries.length||o.reportedConfirmations.length?((0,s.wg)(),(0,s.iD)("div",pe)):(0,s.kq)("",!0)])),_:1},8,["onClick"]),(0,s.Wm)(Ut.Z5,null,{default:(0,s.w5)((()=>[i.isActive?((0,s.wg)(),(0,s.iD)("div",me,[(0,s._)("div",he,[ge,i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",fe,[(0,s._)("div",ve,[(0,s.Wm)(X.t,{size:"large",class:"tw-animate-spin",color:"primary-color"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})])])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",ye,[(0,s.Wm)(l,{to:"/notifications/stock",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-alert-outline")])),_:1}),(0,s._)("div",null,[xe,(0,s._)("p",{class:(0,Q.C_)([[o.stockAlert.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,Q.zw)(o.stockAlert.length)+" "+(0,Q.zw)(o.stockAlert.length>1?"products":"product"),3)])])),_:1}),(0,s.Wm)(l,{to:"/sales",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s._)("div",null,[be,(0,s._)("p",{class:(0,Q.C_)([[o.reportedDeliveries.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,Q.zw)(o.reportedDeliveries.length)+" today",3)])])),_:1}),(0,s.Wm)(l,{to:"/sales",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s._)("div",null,[_e,(0,s._)("p",{class:(0,Q.C_)([[o.reportedConfirmations.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,Q.zw)(o.reportedConfirmations.length)+" today",3)])])),_:1})])):(0,s.kq)("",!0)])])):(0,s.kq)("",!0)])),_:1})])),[[Bt.L,o.closeMenu]])}class Ce{async all(){return await Y.getCookie(),M.get("api/notifications")}async agente(){return await Y.getCookie(),M.get("api/notifications/agente")}async delivery(){return await Y.getCookie(),M.get("api/notifications/delivery")}}var De=new Ce,Se={data(){return{localUrl:I,isActive:!1,isLoaded:!1}},methods:{toggleMenu(){this.isActive=!this.isActive},closeMenu(){this.isActive=!1},getNotifications(){De.all().then((t=>{"SUCCESS"==t.data.code&&(console.log("success"),this.$store.dispatch("notification/setNotifications",t.data.data),this.$store.dispatch("notification/setFetched",!0))}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))}},computed:{user(){return this.$store.getters["user/user"]},notifications(){return this.$store.getters["notification/notifications"]},stockAlert(){return this.notifications["productStockAlert"]||[]},reportedConfirmations(){return this.notifications["reportedOrderAgente"]||[]},reportedDeliveries(){return this.notifications["reportedOrderDelivery"]||[]}},mounted(){this.getNotifications()}};const ze=(0,d.Z)(Se,[["render",ke]]);var Ue=ze;const Le={class:"tw-relative"},Pe={key:0,class:"tw-absolute tw-border-2 tw-border-solid tw-border-white tw-top-1 tw-right-1 tw-w-3 tw-h-3 tw-rounded-full tw-bg-red-500"},Ae={key:0,class:"!tw-duration-100"},$e={class:"tw-absolute tw-text-sm tw-bg-white tw-border tw-border-solid tw-border-neutral-200 tw-rounded-md tw-bordesr !tw-shadow-lg !tw-shadow-gray-400/10 tw-top-14 tw-right-0 tw-w-[230px] tw-min-h-[50px]"},We=(0,s._)("p",{class:"tw-p-2 tw-text-sm"},"Notifications",-1),qe={key:0},Oe={class:"tw-py-10 tw-flex tw-items-center tw-justify-center"},Ee={key:1},Te=(0,s._)("p",{class:""},"Confirmation Reported",-1),Ve=(0,s._)("p",{class:""},"Delivery Reported",-1);function Ie(t,e,r,a,i,o){const l=(0,s.up)("router-link");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",Le,[(0,s.Wm)(G.T,{onClick:o.toggleMenu,icon:"",width:"35",height:"35",class:"tw-relative"},{default:(0,s.w5)((()=>[(0,s.Wm)(Kt.f,{width:"22",height:"22",src:i.localUrl+"assets/img/icons/notification-bing.svg"},null,8,["src"]),o.reportedDeliveries.length||o.reportedConfirmations.length?((0,s.wg)(),(0,s.iD)("div",Pe)):(0,s.kq)("",!0)])),_:1},8,["onClick"]),(0,s.Wm)(Ut.Z5,null,{default:(0,s.w5)((()=>[i.isActive?((0,s.wg)(),(0,s.iD)("div",Ae,[(0,s._)("div",$e,[We,i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",qe,[(0,s._)("div",Oe,[(0,s.Wm)(X.t,{size:"large",class:"tw-animate-spin",color:"primary-color"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})])])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",Ee,["agente"==o.user.role?((0,s.wg)(),(0,s.j4)(l,{key:0,to:"/orders",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s._)("div",null,[Te,(0,s._)("p",{class:(0,Q.C_)([[o.reportedConfirmations.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,Q.zw)(o.reportedConfirmations.length)+" today",3)])])),_:1})):(0,s.kq)("",!0),"delivery"==o.user.role?((0,s.wg)(),(0,s.j4)(l,{key:1,to:"/deliveries",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s._)("div",null,[Ve,(0,s._)("p",{class:(0,Q.C_)([[o.reportedConfirmations.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,Q.zw)(o.reportedConfirmations.length)+" today",3)])])),_:1})):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])])):(0,s.kq)("",!0)])),_:1})])),[[Bt.L,o.closeMenu]])}var Fe={data(){return{localUrl:I,isActive:!1,isLoaded:!1}},methods:{toggleMenu(){this.isActive=!this.isActive},closeMenu(){this.isActive=!1},getAgenteNotifications(){De.agente().then((t=>{"SUCCESS"==t.data.code&&(console.log("success"),this.$store.dispatch("notification/setNotifications",t.data.data),this.$store.dispatch("notification/setFetched",!0))}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))},getDeliveryNotifications(){De.delivery().then((t=>{"SUCCESS"==t.data.code&&(console.log("success"),this.$store.dispatch("notification/setNotifications",t.data.data),this.$store.dispatch("notification/setFetched",!0))}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))}},computed:{user(){return this.$store.getters["user/user"]},notifications(){return this.$store.getters["notification/notifications"]},stockAlert(){return this.notifications["productStockAlert"]||[]},reportedConfirmations(){return this.notifications["reportedOrderAgente"]||[]},reportedDeliveries(){return this.notifications["reportedOrderDelivery"]||[]}},mounted(){"agente"==this.user.role&&this.getAgenteNotifications(),"delivery"==this.user.role&&this.getDeliveryNotifications()}};const Re=(0,d.Z)(Fe,[["render",Ie]]);var je=Re,Ne={components:{AdminNotification:Ue,UserNotification:je},computed:{user(){return this.$store.getters["user/user"]}}};const Me=(0,d.Z)(Ne,[["render",ce]]);var He=Me,Ye={emits:["toggleSidebar"],components:{HeaderMenu:we,Notification:He},data(){return{localUrl:I}},computed:{},methods:{handleClick(){this.$emit("toggleSidebar")}}};const Ze=(0,d.Z)(Ye,[["render",Ht]]);var Ke=Ze,Be=r(9457),Qe=r(2329),Ge=r(9657);function Je(t,e,r,a,i,o){const l=(0,s.up)("SidebarItem");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(Ge.V,{modelValue:i.drawer,"onUpdate:modelValue":e[0]||(e[0]=t=>i.drawer=t),location:"left",absolute:!1,class:"!tw-top-0 !tw-fixed"},{default:(0,s.w5)((()=>[(0,s.Wm)(Be.l,{class:"tw-py-3"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(Kt.f,{width:"140",src:i.localUrl+"assets/img/logo.png"},null,8,["src"])])])),_:1}),(0,s.Wm)(Qe.i,{class:"mt-2",nav:""},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.links,(t=>((0,s.wg)(),(0,s.j4)(l,{key:t.id,link:t},null,8,["link"])))),128))])),_:1})])),_:1},8,["modelValue"])])}const Xe=[4,6,7],tr=[{id:1,title:"Dashboard",module:"dashboard",to:"/",hasChildren:!1,gate:"all",icon:{type:"svg",value:"assets/img/icons/dashboard.svg"}},{id:2,module:"product",title:"Product",hasChildren:!0,gate:"access_to_products",icon:{type:"svg",value:"assets/img/icons/product.svg"},children:[{id:1,title:"Products List",subModule:"product/list",gate:"show_all_products",to:"/products"},{id:2,title:"Add Product",subModule:"product/add",gate:"create_product",to:"/products/add"}]},{id:3,module:"track",title:"Tracking",hasChildren:!0,gate:"none",icon:{type:"icon",value:"mdi-radar"},children:[{id:1,title:"Deliveries",subModule:"track/delivery",gate:"none",to:"/tracking/delivery"}]},{id:4,module:"sale",title:"Sales",hasChildren:!0,gate:"access_to_sales",icon:{type:"icon",value:"mdi-sale"},children:[{id:1,title:"Sales list",subModule:"sale/list",gate:"show_all_sales",to:"/sales"},{id:2,title:"Expidation",subModule:"sale/expidation",gate:"show_all_expidations",to:"/sales/expidation"},{id:3,title:"Shipping",subModule:"sale/shipping",gate:"show_all_expidations",to:"/sales/shipping"},{id:4,title:"Follow Up",subModule:"sale/followup",gate:"show_all_expidations",to:"/sales/followup"}]},{id:5,module:"factorisation",title:"Factorisation",hasChildren:!0,gate:"access_to_factorisations",icon:{type:"icon",value:"mdi-note-multiple"},children:[{id:1,title:"Factorisation list",subModule:"factorisation/list",gate:"show_all_factorisations",to:"/factorisations"}]},{id:6,module:"order",title:"Orders",hasChildren:!0,gate:"access_to_orders",icon:{type:"icon",value:"mdi-barcode-scan"},children:[{id:1,title:"Order",subModule:"order/show",gate:"show_all_orders",to:"/order"},{id:2,title:"My Orders",subModule:"order/list",gate:"show_all_orders",to:"/orders"},{id:3,title:"Confirmed Orders",subModule:"order/confirmed",gate:"show_all_orders",to:"/orders/confirmed"}]},{id:7,module:"delivery",title:"Orders",hasChildren:!0,gate:"access_to_delivery",icon:{type:"icon",value:"mdi-bike"},children:[{id:1,title:"Orders List",subModule:"delivery/list",gate:"show_all_deliveries",to:"/deliveries"},{id:2,title:"Orders Delivered",subModule:"delivery/delivered",gate:"show_all_deliveries",to:"/delivered"}]},{id:8,module:"inventory",title:"Inventory",hasChildren:!0,gate:"access_to_inventory",icon:{type:"icon",value:"mdi-warehouse"},children:[{id:1,title:"Inventory State",gate:"show_all_inventory_states",subModule:"inventory/state",to:"/inventories"},{id:2,title:"Inventory Movements",gate:"show_all_inventory_movements",subModule:"inventory/movements",to:"/inventories/movements"},{id:4,title:"Add Movement",gate:"create_inventory_movement",subModule:"inventory/add",to:"/inventories/add"}]},{id:9,module:"shop",title:"Shop",hasChildren:!0,gate:"access_to_shop",icon:{type:"icon",value:"mdi-store"},children:[{id:1,title:"Shop List",gate:"show_all_shops",subModule:"shop/list",to:"/shops"},{id:2,title:"Add Shop",gate:"create_shop",subModule:"shop/add",to:"/shops/add"}]},{id:10,module:"warehouse",title:"Warehouses",hasChildren:!0,gate:"access_to_warehouse",icon:{type:"icon",value:"mdi-home-group"},children:[{id:1,title:"Warehouses list",subModule:"warehouse/list",gate:"show_all_warehouses",to:"/warehouses"}]},{id:11,title:"Users",module:"user",gate:"access_to_users",hasChildren:!0,icon:{type:"svg",value:"assets/img/icons/users1.svg"},children:[{id:1,title:"Users List",subModule:"user/list",gate:"show_all_users",to:"/users"},{id:2,title:"Add User",subModule:"user/add",gate:"create_user",to:"/users/add"},{id:3,title:"Roles List",subModule:"user/roles",gate:"show_all_roles",to:"/users/roles"},{id:4,title:"Add Role",subModule:"user/addRole",gate:"create_role",to:"/users/addRole"}]},{id:15,title:"Sheets",module:"sheets",to:"/sheets",gate:"access_to_sheets",hasChildren:!1,icon:{type:"icon",value:"mdi-note-text-outline"}},{id:12,title:"Settings",module:"settings",to:"/settings",gate:"access_to_account",hasChildren:!1,icon:{type:"svg",value:"assets/img/icons/settings.svg"}},{id:13,title:"Orders",module:"followup",to:"/followup",hasChildren:!1,gate:"follow_up_orders",icon:{type:"icon",value:"mdi-package-variant-closed"}}];var er=r(9234),rr=r(2127);const ar={key:0},sr={class:"d-flex align-center"},ir={class:"tw-rounded-md tw-bg-gray-50"},or={class:"tw-h-full py-2"},lr={key:1},nr={key:2},dr={key:3};function wr(t,e,r,a,i,o){const l=(0,s.up)("SidebarSales"),n=(0,s.up)("SidebarDelivery"),d=(0,s.up)("SidebarAgente");return(0,s.wg)(),(0,s.iD)("div",null,[!t.$can(r.link.gate)&&"all"!=r.link.gate||i.disabled_links.includes(r.link.id)?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",ar,[(0,s.Wm)(Be.l,{class:(0,Q.C_)(["mx-3 mb-2",{"bg-secondary-color":i.isActive}]),onClick:e[0]||(e[0]=t=>o.handleClick()),density:"comfortable",active:!1,ripple:!1,to:r.link.hasChildren?"":r.link.to,link:""},{default:(0,s.w5)((()=>[(0,s._)("div",sr,["icon"==r.link.icon.type?((0,s.wg)(),(0,s.j4)(X.t,{key:0,icon:r.link.icon.value,color:i.isActive?"white":"grey-darken-2",class:"mr-2",size:"small"},null,8,["icon","color"])):(0,s.kq)("",!0),"svg"==r.link.icon.type?((0,s.wg)(),(0,s.j4)(Kt.f,{key:1,src:i.localUrl+r.link.icon.value,"max-width":"18",class:(0,Q.C_)([{active:i.isActive},"mr-2 tw-fill-white"]),size:"small"},null,8,["src","class"])):(0,s.kq)("",!0),(0,s.Wm)(rr.V,{class:(0,Q.C_)(["text-body-2 font-weight-regular",{"text-white":i.isActive}]),textContent:(0,Q.zw)(r.link.title)},null,8,["class","textContent"]),(0,s.Wm)(er.C),r.link.hasChildren?((0,s.wg)(),(0,s.j4)(X.t,{key:2,class:(0,Q.C_)(["item-icon",{activeRotate:i.isActive}]),icon:"mdi-chevron-right"},null,8,["class"])):(0,s.kq)("",!0)])])),_:1},8,["class","to"]),r.link.hasChildren?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([{"!tw-max-h-[1000px] mb-2 mt-n3":i.isActive},"tw-max-h-0 tw-w-auto mx-3 tw-overflow-hidden tw-duration-300"])},[(0,s._)("div",ir,[(0,s.Wm)(Qe.i,{density:"compact"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.allowedChildren,(t=>((0,s.wg)(),(0,s.j4)(Be.l,{key:t.id,link:"",exact:"",active:!1,to:t.to,height:"10",class:"!tw-h-fit !tw-py-0"},{default:(0,s.w5)((()=>[(0,s._)("div",or,[(0,s.Wm)(X.t,{size:"x-small",class:"mr-2",color:o.isSublinkActive(t)?"primary-color":"secondary-color",icon:o.isSublinkActive(t)?"mdi-chevron-double-right":"mdi-circle-medium"},null,8,["color","icon"]),(0,s._)("span",{class:(0,Q.C_)(["tw-text-sm",{"text-primary-color":o.isSublinkActive(t)}])},(0,Q.zw)(t.title),3)])])),_:2},1032,["to"])))),128))])),_:1})])],2)):(0,s.kq)("",!0)])),4==r.link.id?((0,s.wg)(),(0,s.iD)("div",lr,[(0,s.Wm)(l)])):(0,s.kq)("",!0),7==r.link.id?((0,s.wg)(),(0,s.iD)("div",nr,[(0,s.Wm)(n)])):(0,s.kq)("",!0),8==r.link.id?((0,s.wg)(),(0,s.iD)("div",dr,[(0,s.Wm)(d)])):(0,s.kq)("",!0)])}const cr={key:0},ur={class:"d-flex align-center"},pr={class:"tw-w-fit tw-h-[24px] tw-flex tw-items-center tw-justify-center tw-px-1 tw-bg-orange-500 tw-text-sm tw-text-white tw-rounded tw-ml-2"},mr={key:1,class:"tw-text-xs"},hr={class:"tw-rounded-md tw-bg-gray-50"},gr={class:"tw-h-full py-2"};function fr(t,e,r,a,i,o){return t.$can(i.link.gate)||"all"==i.link.gate?((0,s.wg)(),(0,s.iD)("div",cr,[(0,s.Wm)(Be.l,{class:(0,Q.C_)(["mx-3 mb-2",{"bg-secondary-color":i.isActive}]),onClick:e[0]||(e[0]=t=>o.handleClick()),density:"comfortable",active:!1,ripple:!1,to:i.link.hasChildren?"":i.link.to,link:""},{default:(0,s.w5)((()=>[(0,s._)("div",ur,["icon"==i.link.icon.type?((0,s.wg)(),(0,s.j4)(X.t,{key:0,icon:i.link.icon.value,color:i.isActive?"white":"grey-darken-2",class:"mr-2",size:"small"},null,8,["icon","color"])):(0,s.kq)("",!0),"svg"==i.link.icon.type?((0,s.wg)(),(0,s.j4)(Kt.f,{key:1,src:i.localUrl+i.link.icon.value,"max-width":"18",class:(0,Q.C_)([{active:i.isActive},"mr-2 tw-fill-white"]),size:"small"},null,8,["src","class"])):(0,s.kq)("",!0),(0,s.Wm)(rr.V,{class:(0,Q.C_)(["text-body-2 font-weight-regular",{"text-white":i.isActive}]),textContent:(0,Q.zw)(i.link.title)},null,8,["class","textContent"]),(0,s._)("div",pr,[(i.isLoaded,(0,s.kq)("",!0)),(i.isLoaded,(0,s.wg)(),(0,s.iD)("p",mr,(0,Q.zw)(o.count),1))]),(0,s.Wm)(er.C),i.link.hasChildren?((0,s.wg)(),(0,s.j4)(X.t,{key:2,class:(0,Q.C_)(["item-icon",{activeRotate:i.isActive}]),icon:"mdi-chevron-right"},null,8,["class"])):(0,s.kq)("",!0)])])),_:1},8,["class","to"]),i.link.hasChildren?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([{"!tw-max-h-[1000px] mb-2 mt-n3":i.isActive},"tw-max-h-0 tw-w-auto mx-3 tw-overflow-hidden tw-duration-300"])},[(0,s._)("div",hr,[(0,s.Wm)(Qe.i,{density:"compact"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.allowedChildren,(t=>((0,s.wg)(),(0,s.j4)(Be.l,{key:t.id,link:"",exact:"",active:!1,to:t.to,height:"10",class:"!tw-h-fit !tw-py-0"},{default:(0,s.w5)((()=>[(0,s._)("div",gr,[(0,s.Wm)(X.t,{size:"x-small",class:"mr-2",color:o.isSublinkActive(t)?"primary-color":"secondary-color",icon:o.isSublinkActive(t)?"mdi-chevron-double-right":"mdi-circle-medium"},null,8,["color","icon"]),(0,s._)("span",{class:(0,Q.C_)(["tw-text-sm",{"text-primary-color":o.isSublinkActive(t)}])},(0,Q.zw)(t.title),3)])])),_:2},1032,["to"])))),128))])),_:1})])],2)):(0,s.kq)("",!0)])):(0,s.kq)("",!0)}var vr={props:[],data(){return{localUrl:I,isActive:!1,isLoaded:!1,link:{id:4,module:"sale",title:"Sales",hasChildren:!0,gate:"access_to_sales",icon:{type:"icon",value:"mdi-sale"},children:[{id:4,title:"New Sales list",subModule:"sale/newlist",gate:"show_all_sales",to:"/sales/new"},{id:2,title:"Expidation",subModule:"sale/expidation",gate:"show_all_expidations",to:"/sales/expidation"},{id:3,title:"Shipping",subModule:"sale/shipping",gate:"show_all_expidations",to:"/sales/shipping"},{id:4,title:"Follow Up",subModule:"sale/followup",gate:"show_all_expidations",to:"/sales/followup"}]}}},methods:{handleClick(){this.$route.path!==this.link.to?this.isActive=!this.isActive:this.isActive=!0},isSublinkActive(t){return this.$route.path==t.to},isLinkActive(){return this.link.hasChildren?this.link.module==this.$route.meta.module:this.link.to===this.$route.path}},computed:{allowedChildren(){return this.link?.children.filter((t=>this.$can(t.gate)||"all"===t.gate))},sales(){return this.$store.getters["sale/sales"]},count(){return this.$store.getters["sale/count"]}},watch:{$route(){this.isActive=this.isLinkActive()}},mounted(){this.isActive=this.isLinkActive()}};const yr=(0,d.Z)(vr,[["render",fr],["__scopeId","data-v-419eeb7c"]]);var xr=yr;const br={key:0},_r={class:"d-flex align-center"},kr={class:"tw-w-fit tw-h-[24px] tw-flex tw-items-center tw-justify-center tw-px-1 tw-bg-orange-500 tw-text-sm tw-text-white tw-rounded tw-ml-2"},Cr={key:1,class:"tw-text-xs"};function Dr(t,e,r,a,i,o){return t.$can(i.link.gate)||"all"==i.link.gate?((0,s.wg)(),(0,s.iD)("div",br,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.link.children,(r=>((0,s.wg)(),(0,s.j4)(Be.l,{class:(0,Q.C_)(["mx-3 mb-2",{"bg-secondary-color":t.$route.path==r.to}]),onClick:e[0]||(e[0]=t=>o.handleClick()),density:"comfortable",active:!1,ripple:!1,to:r.to,link:"",key:r.id},{default:(0,s.w5)((()=>[(0,s._)("div",_r,[(0,s.Wm)(X.t,{icon:r.icon,color:t.$route.path==r.to?"white":"grey-darken-2",class:"mr-2",size:"small"},null,8,["icon","color"]),(0,s.Wm)(rr.V,{class:(0,Q.C_)(["text-body-2 font-weight-regular",{"text-white":t.$route.path==r.to}]),textContent:(0,Q.zw)(r.title)},null,8,["class","textContent"]),(0,s.Wm)(er.C),(0,s._)("div",kr,[o.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(X.t,{key:0,color:"white",class:"tw-animate-spin",size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})),o.fetched?((0,s.wg)(),(0,s.iD)("p",Cr,(0,Q.zw)(1==r.id?o.orders.length-o.deliveredOrders.length:o.deliveredOrders.length),1)):(0,s.kq)("",!0)])])])),_:2},1032,["class","to"])))),128))])):(0,s.kq)("",!0)}class Sr{async delivery(){return await Y.getCookie(),M.get("api/dashboard/delivery")}async agente(){return await Y.getCookie(),M.get("api/dashboard/agente")}}var zr=new Sr,Ur={props:[],data(){return{localUrl:I,isActive:!1,isLoaded:!1,link:{id:7,module:"delivery",title:"Orders",hasChildren:!1,gate:"access_to_delivery",icon:{type:"icon",value:"mdi-bike"},children:[{id:1,title:"Orders",subModule:"delivery/list",gate:"show_all_deliveries",to:"/deliveries",icon:"mdi-truck"},{id:2,title:"Delivered Orders",subModule:"delivery/delivered",gate:"show_all_deliveries",to:"/delivered",icon:"mdi-truck-check"}]}}},methods:{handleClick(){this.$route.path!==this.link.to?this.isActive=!this.isActive:this.isActive=!0},isSublinkActive(t){return this.$route.path==t.to},isLinkActive(){return this.link.hasChildren?this.link.module==this.$route.meta.module:this.link.to===this.$route.path},getOrders(){return this.isLoaded=!1,zr.delivery().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("order/setAllOrders",e),this.$store.dispatch("order/setFetched",!0),this.isLoaded=!0}console.log(t)})).catch(this.$handleApiError)}},computed:{allowedChildren(){return this.link?.children.filter((t=>this.$can(t.gate)||"all"===t.gate))},orders(){return this.$store.getters["order/allOrders"].filter((t=>"confirmer"==t.confirmation))},deliveredOrders(){return this.orders.filter((t=>"livrer"==t.delivery))},fetched(){return this.$store.getters["order/fetched"]}},watch:{$route(){this.isActive=this.isLinkActive()}},mounted(){this.isActive=this.isLinkActive(),this.$can(this.link.gate)&&this.getOrders()}};const Lr=(0,d.Z)(Ur,[["render",Dr],["__scopeId","data-v-69fa82e9"]]);var Pr=Lr;const Ar={key:0},$r={class:"d-flex align-center"},Wr={key:0,class:"tw-w-fit tw-h-[24px] tw-flex tw-items-center tw-justify-center tw-px-1 tw-bg-orange-500 tw-text-sm tw-text-white tw-rounded tw-ml-2"},qr={key:1,class:"tw-text-xs"},Or={key:1,class:"tw-w-fit tw-h-[24px] tw-flex tw-items-center tw-justify-center tw-px-1 tw-bg-orange-500 tw-text-sm tw-text-white tw-rounded tw-ml-2"},Er={key:1,class:"tw-text-xs"};function Tr(t,e,r,a,i,o){return t.$can(i.link.gate)||"all"==i.link.gate?((0,s.wg)(),(0,s.iD)("div",Ar,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.link.children,(r=>((0,s.wg)(),(0,s.j4)(Be.l,{class:(0,Q.C_)(["mx-3 mb-2",{"bg-secondary-color":t.$route.path==r.to}]),onClick:e[0]||(e[0]=t=>o.handleClick()),density:"comfortable",active:!1,ripple:!1,to:r.to,link:"",key:r.id},{default:(0,s.w5)((()=>[(0,s._)("div",$r,[(0,s.Wm)(X.t,{icon:r.icon,color:t.$route.path==r.to?"white":"grey-darken-2",class:"mr-2",size:"small"},null,8,["icon","color"]),(0,s.Wm)(rr.V,{class:(0,Q.C_)(["text-body-2 font-weight-regular",{"text-white":t.$route.path==r.to}]),textContent:(0,Q.zw)(r.title)},null,8,["class","textContent"]),(0,s.Wm)(er.C),1!=r.id?((0,s.wg)(),(0,s.iD)("div",Wr,[o.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(X.t,{key:0,color:"white",class:"tw-animate-spin",size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})),o.fetched?((0,s.wg)(),(0,s.iD)("p",qr,(0,Q.zw)(2==r.id?o.myOrders.length:o.confirmedOrders.length),1)):(0,s.kq)("",!0)])):(0,s.kq)("",!0),1==r.id?((0,s.wg)(),(0,s.iD)("div",Or,[i.isCountLoading?((0,s.wg)(),(0,s.j4)(X.t,{key:0,color:"white",class:"tw-animate-spin",size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0),i.isCountLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",Er,(0,Q.zw)(i.available),1))])):(0,s.kq)("",!0)])])),_:2},1032,["class","to"])))),128))])):(0,s.kq)("",!0)}class Vr{async all(){return await Y.getCookie(),M.get("api/sales")}async delete(t){return await Y.getCookie(),M.get("api/sales/delete/"+t)}async update(t,e){return await Y.getCookie(),M.post("api/orders/update/"+t,e)}async create(t){return await Y.getCookie(),M.post("api/sales/new",t)}async getNewOrders(t){return await Y.getCookie(),M.post("api/sales/fresh",{ids:t})}async agenteOrders(){return await Y.getCookie(),M.get("api/orders")}async agenteConfirmedOrders(){return await Y.getCookie(),M.get("api/orders/confirmer")}async agenteAddOrder(){return await Y.getCookie(),M.get("api/orders/add")}async agenteGetOrder(){return await Y.getCookie(),M.get("api/orders/toconfirmate")}async agenteUpdateConfirmation(t,e,r={}){return await Y.getCookie(),M.post("api/orders/update/confirmation/"+t,{confirmation:e,...r})}async agenteUpdateConfirmationWithNote(t,e,r){return await Y.getCookie(),M.post("api/orders/update/confirmationandnote/"+t,{confirmation:e,note:r})}async agenteUpdateUpsell(t,e){return await Y.getCookie(),M.post("api/orders/update/upsell/"+t,{upsell:e})}async agenteUpdateAffectaion(t,e){return await Y.getCookie(),M.post("api/orders/update/affectation/"+t,{affectation:e})}async agenteUpdateNote(t,e){return await Y.getCookie(),M.post("api/orders/update/note/"+t,{note:e})}async deliveryOrders(){return await Y.getCookie(),M.get("api/orders/todelivery")}async deliveryDeliveredOrders(){return await Y.getCookie(),M.get("api/orders/delivred")}async deliveryUpdateDelivery(t,e,r){return await Y.getCookie(),M.post("api/orders/update/delivery/"+t,{delivery:e,...r})}async history(t){return await Y.getCookie(),M.get("api/orders/history/show/"+t)}async resetSale(t){return await Y.getCookie(),M.post("api/sales/reset",{ids:t})}async scanSale(t){return await Y.getCookie(),M.post("api/sales/scan",t)}async availableOrders(){return await Y.getCookie(),M.get("api/orders/count")}}var Ir=new Vr,Fr={props:[],data(){return{localUrl:I,isActive:!1,isLoaded:!1,isCountLoading:!1,available:0,link:{id:6,module:"order",title:"Orders",hasChildren:!0,gate:"access_to_orders",icon:{type:"icon",value:"mdi-barcode-scan"},children:[{id:1,title:"Order",subModule:"order/show",gate:"show_all_orders",to:"/order",icon:"mdi-plus-box"},{id:2,title:"My Orders",subModule:"order/list",gate:"show_all_orders",to:"/orders",icon:"mdi-package-variant-closed"},{id:3,title:"Confirmed Orders",subModule:"order/confirmed",gate:"show_all_orders",to:"/orders/confirmed",icon:"mdi-checkbox-marked"}]}}},methods:{handleClick(){this.$route.path!==this.link.to?this.isActive=!this.isActive:this.isActive=!0},isSublinkActive(t){return this.$route.path==t.to},isLinkActive(){return this.link.hasChildren?this.link.module==this.$route.meta.module:this.link.to===this.$route.path},getOrders(){return this.isLoaded=!1,zr.agente().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("order/setAllOrders",e),this.$store.dispatch("order/setFetched",!0),this.isLoaded=!0}console.log(t)})).catch(this.$handleApiError)},getCountOrders(){this.isCountLoading=!0,Ir.availableOrders().then((t=>{console.log(t),"SUCCESS"==t.data.code&&(this.available=t.data.data.availble)}),this.$handleApiError).finally((()=>{this.isCountLoading=!1}))}},computed:{allowedChildren(){return this.link?.children.filter((t=>this.$can(t.gate)||"all"===t.gate))},orders(){return this.$store.getters["order/allOrders"]},myOrders(){return this.orders.filter((t=>"confirmer"!=t.confirmation))},confirmedOrders(){return this.orders.filter((t=>"confirmer"==t.confirmation))},fetched(){return this.$store.getters["order/fetched"]}},watch:{$route(){this.isActive=this.isLinkActive()},orders(){this.getCountOrders()}},mounted(){this.isActive=this.isLinkActive(),this.$can(this.link.gate)&&(this.getOrders(),this.getCountOrders())}};const Rr=(0,d.Z)(Fr,[["render",Tr],["__scopeId","data-v-0cd1b9c4"]]);var jr=Rr,Nr={props:["link"],components:{SidebarSales:xr,SidebarDelivery:Pr,SidebarAgente:jr},data(){return{localUrl:I,disabled_links:Xe,isActive:!1}},methods:{handleClick(){this.$route.path!==this.link.to?this.isActive=!this.isActive:this.isActive=!0},isSublinkActive(t){return this.$route.path==t.to},isLinkActive(){return this.link.hasChildren?this.link.module==this.$route.meta.module:this.link.to===this.$route.path}},computed:{allowedChildren(){return this.link?.children.filter((t=>this.$can(t.gate)||"all"===t.gate))}},watch:{$route(){this.isActive=this.isLinkActive()}},mounted(){this.isActive=this.isLinkActive()}};const Mr=(0,d.Z)(Nr,[["render",wr],["__scopeId","data-v-35ca0437"]]);var Hr=Mr,Yr={components:{SidebarItem:Hr},props:["active"],data(){return{localUrl:I,drawer:!0,links:tr}},computed:{},watch:{active(){this.drawer=!this.drawer}},methods:{},mounted(){this.$vuetify.display.mdAndDown&&(this.drawer=!1)}};const Zr=(0,d.Z)(Yr,[["render",Je]]);var Kr=Zr,Br=r(4410),Qr=r.n(Br),Gr=r(6027);class Jr{async all(){return await Y.getCookie(),M.get("api/sheets")}async create(t){await Y.getCookie();const e={name:t.name,sheet_id:t.sheet_id,sheet_name:t.sheet_name,auto_fetch:t.auto_fetch};return M.post("api/sheets",e)}async update(t,e){await Y.getCookie();const r={name:e.name,sheet_id:e.sheet_id,sheet_name:e.sheet_name,auto_fetch:e.auto_fetch};return M.post("api/sheets/"+t,r)}async delete(t){return await Y.getCookie(),M["delete"]("api/sheets/"+t)}async updateAutoFetch(t,e){return await Y.getCookie(),M.post("api/sheets/"+t+"/auto-fetch",{autoFetch:e})}async sync(t){return await Y.getCookie(),M.get("api/sync/"+t)}async sync_all(){return await Y.getCookie(),M.get("api/sync")}async auto(){return await Y.getCookie(),M.post("api/sync")}async saveOrders(t){return await Y.getCookie(),M.get("api/sync/"+t+"/save")}}var Xr=new Jr;class ta{async create(t){await Y.getCookie();const e=new FormData;return e.append("name",t.name),e.append("buying_price",t.buyingPrice),e.append("selling_price",t.sellingPrice),e.append("ref",t.reference),e.append("variations",JSON.stringify(t.variants)),e.append("offers",JSON.stringify(t.offers)),e.append("description",t.description),e.append("image",t.image),e.append("deliveries",JSON.stringify(t.selectedDeliveries)),e.append("status",1),N.post("api/products/new",e)}async update(t,e){await Y.getCookie();const r=new FormData;return r.append("name",e.name),r.append("buying_price",e.buyingPrice),r.append("selling_price",e.sellingPrice),r.append("ref",e.reference),r.append("variations",JSON.stringify(e.variants)),r.append("offers",JSON.stringify(e.offers)),r.append("description",e.description),r.append("image",e.image),r.append("deliveries",JSON.stringify(e.selectedDeliveries)),r.append("status",1),N.post("api/products/update/"+t,r)}async all(){return await Y.getCookie(),M.get("api/products")}async allForOrder(){return await Y.getCookie(),M.get("api/products/for-order")}async getProduct(t){return await Y.getCookie(),M.get("api/products/"+t)}async delete(t){return await Y.getCookie(),M["delete"]("api/products/delete/"+t)}async stockAlert(){return await Y.getCookie(),M.get("api/product/stockAlert")}}var ea=new ta,ra={components:{AppHeader:Ke,AppSidebar:Kr,Alert:qt},data(){return{drawer:!1,subscribed:!1,fetching:null,delay:6e4,showScrollUpButton:!1,firstFetch:!1}},computed:{isLoggedIn(){return this.$store.getters["user/isLoggedIn"]},cities(){return this.$store.getters["city/cities"]},user(){return this.$store.getters["user/user"]},sales(){return this.$store.getters["sale/sales"]},salesFetched(){return this.$store.getters["sale/fetched"]}},methods:{toggleSidebar(){this.drawer=!this.drawer},checkScroll(){this.showScrollUpButton=window.scrollY>100},scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})},async getCities(){if(0==this.cities.length||1!=localStorage.getItem("update_cities"))return K.cities().then((t=>{const e=t.data.data;this.$store.dispatch("city/setCities",e),localStorage.setItem("update_cities",1)}))},subscribe(){console.log(Qr());const t=new Gr.Z({broadcaster:"pusher",key:"ABCDEFG",wsHost:"127.0.0.1",wsPort:6001,forceTLS:!1,disableStats:!0,cluster:"mt1"});window.Echo=t,t.channel("notification").listenToAll((t=>{console.log(t)})),this.subscribed=!0},sync_sheets(){"admin"==this.user.role?Xr.sync_all().then((t=>{if("SUCCESS"==t.data.code){const e=[...t.data.data.orders,...this.sales];this.$store.dispatch("sale/setSales",e),t.data.data.orders.length>0&&this.$alert({type:"info",title:t.data.data.orders.length+" New orders has been added"})}})):Xr.auto()},getUsers(){K.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),this.$store.dispatch("user/setFetched",!0)}})).catch(this.$handleApiError)},getProducts(){return ea.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))},fetchNewOrders(){if(this.salesFetched||!this.firstFetch){const t=this.sales.map((t=>t.id));return Ir.getNewOrders(t).then((t=>{if("SUCCESS"==t.data.code){const e=t.data.data.orders,r=t.data.data.count;this.$store.dispatch("sale/setCount",r),e.length>0&&(this.$store.dispatch("sale/addSales",e),this.$alert({type:"info",title:e.length+" New orders has been added"})),this.firstFetch=!0}}))}},getSales(){return this.isLoaded=!1,Ir.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)}},mounted(){this.getCities(),"admin"==this.user.role&&this.fetchNewOrders(),this.$can("show_all_products")&&this.getProducts(),this.getUsers(),window.addEventListener("scroll",this.checkScroll)},unmounted(){window.removeEventListener("scroll",this.checkScroll)}};const aa=(0,d.Z)(ra,[["render",Rt]]);var sa=aa;const ia={key:0};function oa(t,e,r,a,i,o){return i.exists?((0,s.wg)(),(0,s.iD)("div",ia,[((0,s.wg)(),(0,s.j4)((0,s.LL)(o.dashboard)))])):(0,s.kq)("",!0)}var la=r(6824),na=r(8521);const da={key:0},wa={key:1},ca=(0,s._)("div",{class:"mb-2 mt-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h2",{class:"tw-text-gray-500 tw-text-lg"},"Online")])],-1),ua={class:"py-2 px-2 tw-border bg-white tw-w-full tw-rounded"},pa={class:"mb-2 mt-2 tw-flex tw-justify-between tw-items-center tw-w-full"},ma={class:"tw-flex tw-items-center tw-justify-between tw-w-full"},ha=(0,s._)("h2",{class:"tw-text-gray-500 tw-text-lg"},"Statistiques",-1),ga=["disabled"],fa={key:0,class:"tw-flex tw-items-center tw-gap-2"},va={key:1},ya=(0,s._)("svg",{"aria-hidden":"true",role:"status",class:"tw-inline tw-w-4 tw-h-4 tw-mr-3 tw-text-white tw-animate-spin",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s._)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"#E5E7EB"}),(0,s._)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentColor"})],-1),xa={class:"px-5 tw-border bg-white tw-w-full tw-rounded-md"};function ba(t,e,r,a,i,o){const l=(0,s.up)("LoadingAnimation"),n=(0,s.up)("UsersTable"),d=(0,s.up)("FilterTabs"),w=(0,s.up)("DashItem"),c=(0,s.up)("TabSwitcher");return(0,s.wg)(),(0,s.iD)("div",null,[o.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",da,[(0,s.Wm)(l)])),o.isLoaded?((0,s.wg)(),(0,s.iD)("div",wa,[ca,(0,s._)("div",ua,[(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(n)])),_:1})])),_:1})]),(0,s._)("div",pa,[(0,s._)("div",ma,[ha,(0,s._)("button",{disabled:i.updating,onClick:e[0]||(e[0]=(...t)=>o.updateSales&&o.updateSales(...t)),type:"button",class:"tw-text-white tw-w-fit tw-my-2 tw-bg-gradient-to-r tw-from-cyan-500 tw-to-blue-500 hover:tw-bg-gradient-to-bl focus:tw-ring-4 focus:tw-outline-none focus:tw-ring-cyan-300 dark:focus:tw-ring-cyan-800 tw-font-medium tw-rounded-lg tw-text-sm tw-px-5 tw-py-2.5 tw-text-center tw-mr-2 dark:tw-bg-blue-600 dark:hover:tw-bg-blue-700 tw-duration-200 tw-gap-2 tw-pointer-events-auto tw-inline-flex tw-items-center"},[i.updating?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",fa,[(0,s.Wm)(X.t,{class:"tw-text-sm",color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s.Uk)(" Refresh ")])),i.updating?((0,s.wg)(),(0,s.iD)("div",va,[ya,(0,s.Uk)(" loading... ")])):(0,s.kq)("",!0)],8,ga)])]),(0,s._)("div",xa,[(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{filters:i.filters,"onUpdate:filters":e[1]||(e[1]=t=>i.filters=t)},null,8,["filters"])])),_:1})])),_:1}),(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{cols:"12",sm:"6",md:"3"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{dash:o.dashChiffreAffaires},null,8,["dash"])])),_:1}),(0,s.Wm)(na.D,{cols:"12",sm:"6",md:"3"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{dash:o.dashChiffreAffairesVerse},null,8,["dash"])])),_:1}),(0,s.Wm)(na.D,{cols:"12",sm:"6",md:"3"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{dash:o.dashChiffreAffairesNonVerse},null,8,["dash"])])),_:1}),(0,s.Wm)(na.D,{cols:"12",sm:"6",md:"3"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{dash:o.dashChiffreAffairesEnCaisse},null,8,["dash"])])),_:1})])),_:1}),(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{"filtered-sales":o.filteredSales},null,8,["filtered-sales"])])),_:1})])),_:1})])])):(0,s.kq)("",!0)])}var _a=r(4286);const ka={class:"tw-flex tw-items-center"},Ca={class:"tw-flex tw-flex-col tw-h-full tw-text-neutral-600"},Da={class:"tw-text-lg tw-font-bold"},Sa={class:"tw-text-sm"};function za(t,e,r,a,i,o){return(0,s.wg)(),(0,s.j4)(_a.C,{class:"tw-rounded-lg tw-border pa-5 py-2",color:"white",height:"fit"},{default:(0,s.w5)((()=>[(0,s._)("div",ka,[(0,s._)("div",{class:(0,Q.C_)([o.bgColor,"pa-3 rounded-circle tw-w-fit tw-mr-3"])},[(0,s.Wm)(X.t,{color:r.dash.color,size:"large",icon:r.dash.icon},null,8,["color","icon"])],2),(0,s._)("div",Ca,[(0,s._)("p",Da,(0,Q.zw)(r.dash.value),1),(0,s.Wm)(er.C),(0,s._)("p",Sa,(0,Q.zw)(r.dash.title),1)])])])),_:1})}var Ua={props:["dash"],computed:{bgColor(){const t={orange:"tw-bg-orange-500/10",green:"tw-bg-green-500/10",blue:"tw-bg-blue-500/10",pink:"tw-bg-pink-500/10",red:"tw-bg-red-500/10",yellow:"tw-bg-yellow-500/10"};return t[this.dash.color]}}};const La=(0,d.Z)(Ua,[["render",za]]);var Pa=La;const Aa={key:0,class:""},$a={class:"tw-flex tw-items-center tw-flex-wrap tw-gap-2"},Wa=(0,s._)("div",{class:"tw-w-[120px] tw-h-[55px] tw-bg-neutral-300/10 tw-animate-pulse tw-rounded tw-border tw-grid tw-grid-cols-12"},null,-1),qa=[Wa],Oa={key:1,class:"tw-min-h-[50px]"},Ea={class:"tw-flex tw-items-center tw-flex-wrap tw-gap-2"},Ta={class:"py-2 px-3 tw-rounded tw-border tw-grid tw-grid-cols-12"},Va={class:"tw-col-span-12 tw-font-medium tw-capitalize tw-text-sm tw-text-neutral-600 tw-whitespace-nowrap"},Ia={class:"tw-col-span-12 tw-whitespace-nowrap tw-text-xs"},Fa={key:0,class:"tw-text-red-500 tw-flex tw-items-center tw-gap-2"},Ra=(0,s._)("div",{class:"tw-p-1 tw-rounded-full tw-bg-red-400"},null,-1),ja={key:1},Na={key:0,class:"tw-text-green-500 tw-flex tw-items-center tw-gap-2"},Ma=(0,s._)("div",{class:"tw-p-1 tw-rounded-full tw-bg-green-500"},null,-1),Ha={key:1,class:"tw-flex tw-items-center tw-gap-2"},Ya=(0,s._)("div",{class:"tw-p-1 tw-rounded-full tw-bg-yellow-400"},null,-1);function Za(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",null,[i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Aa,[(0,s._)("div",$a,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(4,(t=>(0,s._)("div",{key:t},qa))),64))])])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",Oa,[(0,s._)("div",Ea,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.users,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t.id},[(0,s._)("div",Ta,[(0,s._)("div",Va,(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),1),(0,s._)("div",Ia,[t.last_action?((0,s.wg)(),(0,s.iD)("div",ja,[1==o.isOnline(o.lastSeen(t.last_action))?((0,s.wg)(),(0,s.iD)("div",Na,[Ma,(0,s.Uk)(" Online ")])):((0,s.wg)(),(0,s.iD)("div",Ha,[Ya,(0,s.Uk)(" "+(0,Q.zw)(o.lastSeen(t.last_action)),1)]))])):((0,s.wg)(),(0,s.iD)("div",Fa,[Ra,(0,s.Uk)(" Never Connected ")]))])])])))),128))]),(0,s.kq)("",!0)])):(0,s.kq)("",!0)])}var Ka=r(8777),Ba={components:{},data(){return{isLoaded:!1}},computed:{users(){return this.$store.getters["user/users"].filter((t=>"admin"!=t.role_name))}},methods:{getUsers(){K.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),console.log(t),this.isLoaded=!0}})).catch(this.$handleApiError)},lastSeen(t){let e=Date.parse(t.replace("-","/"))/1e3;return(0,Ka.x)(e)},isOnline(t){let e=["Just Now","1 minute ago","2 minute ago"];return e.includes(t)}},mounted(){this.getUsers()}};const Qa=(0,d.Z)(Ba,[["render",Za]]);var Ga=Qa,Ja=r(1489),Xa=r(3144),ts=r(9870),es=r(6161),rs=r(4722);function as(t,e,r,a,i,o){return(0,s.wg)(),(0,s.j4)(Ja._,{flat:""},{default:(0,s.w5)((()=>[(0,s.Wm)(Xa.d,{modelValue:i.tab,"onUpdate:modelValue":e[0]||(e[0]=t=>i.tab=t),color:"primary-color","align-tabs":"start",density:"compact"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.tabs,(t=>((0,s.wg)(),(0,s.j4)(ts.L,{key:t.id,value:t.id},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(t.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"]),(0,s.Wm)(es.Oo,{class:"tw-mt-0",modelValue:i.tab,"onUpdate:modelValue":e[1]||(e[1]=t=>i.tab=t)},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.tabs,(t=>((0,s.wg)(),(0,s.j4)(rs.H,{key:t.id,value:t.id,transition:"fade-transition","reverse-transition":"fade-transition"},{default:(0,s.w5)((()=>[((0,s.wg)(),(0,s.j4)((0,s.LL)(t.component),{"filtered-sales":r.filteredSales},null,8,["filtered-sales"]))])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})}const ss={class:"tw-grid tw-mb-5 tw-grid-cols-4 md:tw-grid-cols-4 lg:tw-grid-cols-4 tw-gap-2 py-5"},is={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},os={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},ls={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},ns={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},ds={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},ws={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},cs={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"};function us(t,e,r,a,i,o){const l=(0,s.up)("DashItemTwo");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",ss,[(0,s._)("div",is,[(0,s.Wm)(l,{dash:o.totalSales},null,8,["dash"])]),(0,s._)("div",os,[(0,s.Wm)(l,{dash:o.deliveredSales},null,8,["dash"])]),(0,s._)("div",ls,[(0,s.Wm)(l,{dash:o.shippedSales},null,8,["dash"])]),(0,s._)("div",ns,[(0,s.Wm)(l,{dash:o.reportedSales},null,8,["dash"])]),(0,s._)("div",ds,[(0,s.Wm)(l,{dash:o.noanswerSales},null,8,["dash"])]),(0,s._)("div",ws,[(0,s.Wm)(l,{dash:o.canceledSales},null,8,["dash"])]),(0,s._)("div",cs,[(0,s.Wm)(l,{dash:o.transferSales},null,8,["dash"])])])])}const ps={class:"tw-flex tw-justify-between tw-items-center tw-w-full tw-h-full pa-3 px-4"},ms={class:"tw-flex tw-flex-col tw-justify-center tw-w-full tw-h-full tw-text-white"},hs={class:"tw-text-xl tw-font-bold"},gs={class:"tw-flex tw-items-center tw-gap-1 tw-w-full tw-h-full tw-text-white"},fs={class:"tw-text-sm"},vs={class:"rounded-circle tw-w-fit tw-mr-3"};function ys(t,e,r,a,i,o){const l=(0,s.up)("number");return(0,s.wg)(),(0,s.j4)(_a.C,{class:"tw-rounded-lg",color:r.dash.color,height:"70"},{default:(0,s.w5)((()=>[(0,s._)("div",ps,[(0,s._)("div",ms,[(0,s._)("p",hs,(0,Q.zw)(isNaN(r.dash.pourcentage)?"0.00%":r.dash.pourcentage)+" "+(0,Q.zw)(r.symbol),1),(0,s._)("span",gs,[r.numbers?((0,s.wg)(),(0,s.j4)(l,{key:0,class:"tw-font-bold",ref:"number1",from:0,to:r.dash.value,duration:1,delay:0,easing:"Power.easeOut"},null,8,["to"])):(0,s.kq)("",!0),(0,s._)("p",fs,(0,Q.zw)(r.dash.title),1)])]),(0,s._)("div",vs,[(0,s.Wm)(X.t,{color:"white",size:"large",class:"md:tw-scale-[1.8] tw-scale-[1.3]",icon:r.dash.icon},null,8,["icon"])])])])),_:1},8,["color"])}var xs={props:{dash:{required:!0},symbol:{required:!1,default:"%"},numbers:{required:!1,default:!0}}};const bs=(0,d.Z)(xs,[["render",ys]]);var _s=bs,ks={components:{DashItemTwo:_s},props:["filteredSales"],data(){return{isLoaded:!1}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},sales(){return this.filteredSales},totalSales(){return{id:1,title:"Total",value:this.sales.filter((t=>"confirmer"==t.confirmation)).length,pourcentage:100*this.sales.filter((t=>"confirmer"==t.confirmation)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length,color:"deep-purple-accent-2",icon:"mdi mdi-all-inclusive"}},deliveredSales(){return{id:2,title:"Delivered",value:this.sales.filter((t=>"livrer"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"livrer"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"primary-green",icon:"mdi-account-check-outline"}},toProcess(){return{id:3,title:"Process",value:this.sales.filter((t=>!!t.confirmation&&!["confirmer","livrer","expidier"].includes(t.delivery))).length,color:"primary-orange",icon:"mdi-reload"}},shippedSales(){return{id:4,title:"Shipped",value:this.sales.filter((t=>"expidier"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"expidier"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"primary-orange",icon:"mdi-truck"}},transferSales(){return{id:8,title:"Transferred",value:this.sales.filter((t=>"transfer"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"transfer"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"purple-darken-1",icon:"mdi-truck"}},reportedSales(){return{id:5,title:"Reported",value:this.sales.filter((t=>"reporter"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"reporter"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"primary-blue",icon:"mdi mdi-clock-outline"}},canceledSales(){return{id:6,title:"Canceled",value:this.sales.filter((t=>"annuler"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"annuler"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"red-accent-3",icon:"mdi mdi-cancel"}},noanswerSales(){return{id:6,title:"No Answer",value:this.sales.filter((t=>"pas-de-reponse"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"pas-de-reponse"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"yellow-darken-3",icon:"mdi mdi-headphones-off"}}},mounted(){Ir.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;console.log(t.data),this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)}};const Cs=(0,d.Z)(ks,[["render",us]]);var Ds=Cs;const Ss={class:"tw-grid tw-mb-5 tw-grid-cols-4 md:tw-grid-cols-4 lg:tw-grid-cols-4 tw-gap-2 py-5"},zs={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Us={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Ls={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Ps={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},As={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},$s={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Ws={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},qs={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"};function Os(t,e,r,a,i,o){const l=(0,s.up)("DashItemTwo");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",Ss,[(0,s._)("div",zs,[(0,s.Wm)(l,{dash:o.totalSales},null,8,["dash"])]),(0,s._)("div",Us,[(0,s.Wm)(l,{dash:o.confirmedSales},null,8,["dash"])]),(0,s._)("div",Ls,[(0,s.Wm)(l,{dash:o.newSales},null,8,["dash"])]),(0,s._)("div",Ps,[(0,s.Wm)(l,{dash:o.reportedSales},null,8,["dash"])]),(0,s._)("div",As,[(0,s.Wm)(l,{dash:o.noanswerSales},null,8,["dash"])]),(0,s._)("div",$s,[(0,s.Wm)(l,{dash:o.canceledSales},null,8,["dash"])]),(0,s._)("div",Ws,[(0,s.Wm)(l,{dash:o.doubledSales},null,8,["dash"])]),(0,s._)("div",qs,[(0,s.Wm)(l,{dash:o.wrongNumberSales},null,8,["dash"])])])])}var Es={components:{DashItemTwo:_s},props:["filteredSales"],data(){return{isLoaded:!1}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},sales(){return this.filteredSales},totalSales(){return{id:1,title:"Total",pourcentage:100,value:this.sales.length,color:"deep-purple-accent-2",icon:"mdi mdi-all-inclusive"}},newSales(){return{id:2,title:"New",value:this.sales.filter((t=>!t.confirmation)).length,pourcentage:(100*this.sales.filter((t=>!t.confirmation)).length/this.sales.length).toFixed(2),color:"grey",icon:"mdi mdi-new-box"}},toProcess(){return{id:3,title:"Process",value:this.sales.filter((t=>!!t.confirmation&&!["confirmer","livrer","expidier"].includes(t.confirmation))).length,pourcentage:(100*this.sales.filter((t=>!!t.confirmation&&!["confirmer","livrer","expidier"].includes(t.confirmation))).length/this.sales.length).toFixed(2),color:"primary-orange",icon:"mdi-reload"}},confirmedSales(){return{id:4,title:"Confirmed",value:this.sales.filter((t=>"confirmer"==t.confirmation)).length,pourcentage:(100*this.sales.filter((t=>"confirmer"==t.confirmation)).length/this.sales.length).toFixed(2),color:"primary-green",icon:"mdi-phone-check"}},reportedSales(){return{id:5,title:"Reported",value:this.sales.filter((t=>"reporter"==t.confirmation)).length,pourcentage:(100*this.sales.filter((t=>"reporter"==t.confirmation)).length/this.sales.length).toFixed(2),color:"primary-blue",icon:"mdi mdi-clock-outline"}},canceledSales(){return{id:6,title:"Canceled",value:this.sales.filter((t=>"annuler"==t.confirmation)).length,pourcentage:(100*this.sales.filter((t=>"annuler"==t.confirmation)).length/this.sales.length).toFixed(2),color:"red-accent-3",icon:"mdi mdi-cancel"}},noanswerSales(){return{id:6,title:"No Answer",value:this.sales.filter((t=>["day-one-call-one","day-one-call-two","day-one-call-three","day-two-call-one","day-two-call-two","day-two-call-three","day-three-call-one","day-three-call-two","day-three-call-three"].includes(t.confirmation))).length,pourcentage:(100*this.sales.filter((t=>["day-one-call-one","day-one-call-two","day-one-call-three","day-two-call-one","day-two-call-two","day-two-call-three","day-three-call-one","day-three-call-two","day-three-call-three"].includes(t.confirmation))).length/this.sales.length).toFixed(2),color:"yellow-darken-3",icon:"mdi mdi-headphones-off"}},doubledSales(){return{id:8,title:"Doubled",pourcentage:(100*this.sales.filter((t=>"double"==t.confirmation)).length/this.sales.length).toFixed(2),value:this.sales.filter((t=>"double"==t.confirmation)).length,color:"purple-accent-4",icon:"mdi mdi-selection-multiple"}},wrongNumberSales(){return{id:9,title:"Wrong Number",pourcentage:(100*this.sales.filter((t=>"wrong-number"==t.confirmation)).length/this.sales.length).toFixed(2),value:this.sales.filter((t=>"wrong-number"==t.confirmation)).length,color:"purple-lighten-1",icon:"mdi mdi-phone-remove"}}},mounted(){Ir.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;console.log(t.data),this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)}};const Ts=(0,d.Z)(Es,[["render",Os]]);var Vs=Ts,Is={components:{DeliveryTab:Ds,ConfirmationTab:Vs},props:["filteredSales"],data(){return{tab:1,tabs:[{id:1,name:"Confirmation",component:"ConfirmationTab"},{id:2,name:"Delivery",component:"DeliveryTab"}]}}};const Fs=(0,d.Z)(Is,[["render",as]]);var Rs=Fs;const js={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4 py-5"},Ns={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},Ms={class:"tw-relative"},Hs={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},Ys={class:"tw-relative"},Zs={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},Ks=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Agents",-1),Bs={class:"tw-relative"},Qs=(0,s._)("option",{value:"all"},"Select",-1),Gs=["value"],Js={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},Xs=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Deliveries",-1),ti={class:"tw-relative"},ei=(0,s._)("option",{value:"all"},"Select",-1),ri=["value"],ai={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},si=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Cities",-1),ii={class:"tw-relative"},oi=(0,s._)("option",{value:"all"},"Select",-1),li=["value"],ni={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},di=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Products",-1),wi={class:"tw-relative"},ci=(0,s._)("option",{value:"all"},"Select",-1),ui=["value"],pi={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},mi=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Shops",-1),hi={class:"tw-relative"},gi=(0,s._)("select",{class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[(0,s._)("option",{value:"all"},"Select")],-1),fi={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},vi=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Sources",-1),yi={class:"tw-relative"},xi=(0,s._)("select",{class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[(0,s._)("option",{value:"all"},"Select")],-1),bi={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},_i=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Upsell",-1),ki={class:"tw-relative"},Ci=(0,s._)("option",{value:"all"},"Select",-1),Di=(0,s._)("option",{value:"oui"},"Oui",-1),Si=(0,s._)("option",{value:"non"},"Non",-1),zi=[Ci,Di,Si];function Ui(t,e,r,i,o,l){const n=(0,s.up)("DateFilter");return(0,s.wg)(),(0,s.iD)("div",js,[(0,s._)("div",Ns,[(0,s._)("div",Ms,[(0,s.Wm)(n,{name:"Created Date",filter:o.dateFilter,"onUpdate:filter":e[0]||(e[0]=t=>o.dateFilter=t)},null,8,["filter"])])]),(0,s._)("div",Hs,[(0,s._)("div",Ys,[(0,s.Wm)(n,{name:"Dropped Date",filter:o.droppedAtFilter,"onUpdate:filter":e[1]||(e[1]=t=>o.droppedAtFilter=t)},null,8,["filter"])])]),(0,s._)("div",Zs,[Ks,(0,s._)("div",Bs,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.agentFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[Qs,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.agents,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,Gs)))),128))],512),[[a.bM,o.agentFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",Js,[Xs,(0,s._)("div",ti,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.deliveryFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[ei,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,ri)))),128))],512),[[a.bM,o.deliveryFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",ai,[si,(0,s._)("div",ii,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.cityFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[oi,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,li)))),128))],512),[[a.bM,o.cityFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",ni,[di,(0,s._)("div",wi,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>o.productFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[ci,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.products,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,ui)))),128))],512),[[a.bM,o.productFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",pi,[mi,(0,s._)("div",hi,[gi,(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",fi,[vi,(0,s._)("div",yi,[xi,(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",bi,[_i,(0,s._)("div",ki,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>o.upsellFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},zi,512),[[a.bM,o.upsellFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s.kq)("",!0)])}const Li={class:"tw-text-sm tw-text-neutral-600"},Pi=["onClick"];function Ai(t,e,r,a,i,o){const l=(0,s.up)("VueDatePicker");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("span",Li,(0,Q.zw)(r.name),1),(0,s.Wm)(l,{modelValue:i.date,"onUpdate:modelValue":[e[0]||(e[0]=t=>i.date=t),o.onDateRangePicked],onCleared:o.cleared,format:i.dateFilterFormat,range:"","preset-ranges":i.presetRanges},{yearly:(0,s.w5)((({label:t,range:e,presetDateRange:r})=>[(0,s._)("span",{onClick:t=>r(e)},(0,Q.zw)(t),9,Pi)])),_:1},8,["modelValue","onCleared","onUpdate:modelValue","format","preset-ranges"])])}var $i=r(1271),Wi=r(2292),qi=r(1745),Oi=r(4253),Ei=r(4819),Ti=r(2143),Vi={props:["name"],data(){return{date:["",""],dateFilterFormat:"yyyy-MM-dd",formattedStartDate:"",formattedEndDate:"",presetRanges:[{label:"Today",range:[new Date,new Date]},{label:"Yesterday",range:[(0,$i.Z)(new Date,1),(0,$i.Z)(new Date,1)]},{label:"This month",range:[(0,Wi.Z)(new Date),(0,qi.Z)(new Date)]},{label:"Last month",range:[(0,Wi.Z)((0,Oi.Z)(new Date,1)),(0,qi.Z)((0,Oi.Z)(new Date,1))]},{label:"This year",range:[(0,Ei.Z)(new Date),(0,Ti.Z)(new Date)]}]}},watch:{date(){this.$emit("update:filter",[this.formattedStartDate,this.formattedEndDate])}},methods:{onDateRangePicked(t){t?(this.formattedStartDate=t[0],this.formattedEndDate=t[1]):(this.formattedStartDate=null,this.formattedEndDate=null)},cleared(){this.date=["",""]}}};const Ii=(0,d.Z)(Vi,[["render",Ai]]);var Fi=Ii,Ri={components:{DateFilter:Fi},props:["filters"],data(){return{deliveryFilter:"all",agentFilter:"all",productFilter:"all",cityFilter:"all",upsellFilter:"all",dateFilter:["",""],droppedAtFilter:["",""],isLoaded:!1,dashItems:[{id:1,title:"Total Chiffres d'affaire",value:1200,icon:"mdi-currency-usd",color:"green"},{id:2,title:"Chiffres d'affaire vers",value:"35000 DH",icon:"mdi mdi-credit-card-check-outline",color:"orange"},{id:3,title:"Chiffres d'affaire non vers",value:600,icon:"mdi mdi-credit-card-remove-outline",color:"red"},{id:4,title:"Chiffres d'affaire en caisse",value:543,icon:"mdi mdi-bank",color:"pink"}],filledDashItems:[{id:1,title:"Customers",value:2300,color:"primary-orange",icon:"mdi-account-outline"},{id:2,title:"Suppliers",value:300,color:"primary-blue",icon:"mdi-account-check-outline"},{id:3,title:"Purchase Invoice",value:1100,color:"primary-indigo",icon:"mdi-file-document-outline"},{id:4,title:"Agents",value:10,color:"primary-green",icon:"mdi-moped-outline"}]}},watch:{agentFilter(t){this.$emit("update:filters",{...this.filters,agentFilter:t})},deliveryFilter(t){this.$emit("update:filters",{...this.filters,deliveryFilter:t})},productFilter(t){this.$emit("update:filters",{...this.filters,productFilter:t})},cityFilter(t){this.$emit("update:filters",{...this.filters,cityFilter:t})},upsellFilter(t){this.$emit("update:filters",{...this.filters,upsellFilter:t})},dateFilter:{deep:!0,handler(t){this.$emit("update:filters",{...this.filters,dateFilter:t})}},droppedAtFilter:{deep:!0,handler(t){this.$emit("update:filters",{...this.filters,droppedAtFilter:t})}}},computed:{agents(){return this.$store.getters["user/agents"]},deliveries(){return this.$store.getters["user/deliveries"]},products(){return this.$store.getters["product/products"]},cities(){return this.$store.getters["city/cities"]}},mounted(){K.deliveries().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data;console.log(t.data),this.$store.dispatch("user/setDeliveries",e),this.isLoaded=!0}})).catch(this.$handleApiError),ea.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.products;console.log(t.data),this.$store.dispatch("product/setProducts",e),this.isLoaded=!0}})).catch(this.$handleApiError),K.cities().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data;console.log(t.data),this.$store.dispatch("city/setCities",e),this.isLoaded=!0}})).catch(this.$handleApiError),K.agents().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data;console.log(t.data),this.$store.dispatch("user/setAgents",e),this.isLoaded=!0}})).catch(this.$handleApiError)}};const ji=(0,d.Z)(Ri,[["render",Ui]]);var Ni=ji;const Mi=t=>{if(!t)return 0;const e=t.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return(parseFloat(t.price?t.price:0)+parseFloat(e)).toFixed(2)},Hi=t=>t?t.split("api/")[1]:null;var Yi={components:{DashItem:Pa,UsersTable:Ga,TabSwitcher:Rs,FilterTabs:Ni},data(){return{updating:!1,filters:{deliveryFilter:"all",agentFilter:"all",productFilter:"all",cityFilter:"all",upsellFilter:"all",dateFilter:["",""],droppedAtFilter:["",""]}}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},sales(){return this.$store.getters["sale/sales"]},isLoaded(){return this.$store.getters["sale/fetched"]},filteredSales(){const t=this.filters.agentFilter,e=this.filters.deliveryFilter,r=this.filters.productFilter,a=this.filters.cityFilter,s=this.filters.upsellFilter,i=this.filters.dateFilter[0],o=this.filters.dateFilter[1],l=this.filters.droppedAtFilter[0],n=this.filters.droppedAtFilter[1];return this.sales.filter((d=>{if("all"!==t&&parseInt(d.agente_id)!=parseInt(t))return!1;if("all"!==e&&parseInt(d.affectation)!=parseInt(e))return!1;if("all"!==s&&d.upsell!=s)return!1;if("all"!==r&&!d.items.some((t=>parseInt(t.product_id)==parseInt(r))))return!1;if("all"!==a&&d.city?.toLocaleLowerCase()!=a?.toLocaleLowerCase())return!1;const w=new Date(d.created_at),c=w.getDate(),u=w.getMonth(),p=w.getFullYear();if(i){const t=i.getDate(),e=i.getMonth(),r=i.getFullYear();if(p<r||p===r&&u<e||p===r&&u===e&&c<t)return!1}if(o){const t=o.getDate(),e=o.getMonth(),r=o.getFullYear();if(p>r||p===r&&u>e||p===r&&u===e&&c>t)return!1}const m=new Date(d.dropped_at),h=m.getDate(),g=m.getMonth(),f=w.getFullYear();if(l){const t=l.getDate(),e=l.getMonth(),r=l.getFullYear();if(f<r||f===r&&g<e||f===r&&g===e&&h<t)return!1}if(n){const t=n.getDate(),e=n.getMonth(),r=n.getFullYear();if(f>r||f===r&&g>e||f===r&&g===e&&h>t)return!1}return!0}))},dashChiffreAffaires(){return{id:1,title:"Total Chiffres d'affaire",value:this.getChiffresDaffaire().toFixed(2),icon:"mdi-currency-usd",color:"green"}},dashChiffreAffairesVerse(){return{id:2,title:"Chiffres d'affaire vers",value:this.getChiffresDaffaireVerse().toFixed(2),icon:"mdi mdi-credit-card-check-outline",color:"orange"}},dashChiffreAffairesNonVerse(){return{id:3,title:"Chiffres d'affaire non vers",value:this.getChiffresDaffaireNonVerse().toFixed(2),icon:"mdi mdi-credit-card-remove-outline",color:"red"}},dashChiffreAffairesEnCaisse(){return{id:4,title:"Chiffres d'affaire en caisse",value:this.getChiffresDaffaireEnCaise().toFixed(2),icon:"mdi mdi-bank",color:"yellow"}},newSales(){return{id:1,title:"New",value:this.sales.filter((t=>!t.confirmation)).length,color:"primary-green",icon:"mdi mdi-new-box"}},toProcess(){return{id:2,title:"Process",value:this.sales.filter((t=>!!t.confirmation&&!["confirmer","livre","expidier"].includes(t.confirmation))).length,color:"primary-orange",icon:"mdi-reload"}},confirmedSales(){return{id:3,title:"Confirmed",value:this.sales.filter((t=>"confirmer"==t.confirmation)).length,color:"deep-purple-accent-2",icon:"mdi-phone-check"}},deliveredSales(){return{id:4,title:"Delivered",value:this.sales.filter((t=>"livre"==t.confirmation)).length,color:"primary-blue",icon:"mdi-account-check-outline"}},shippedSales(){return{id:5,title:"Shipped",value:this.sales.filter((t=>"expidier"==t.confirmation)).length,color:"red",icon:"mdi-truck"}}},methods:{getSales(){Ir.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0)}})).catch(this.$handleApiError)},updateSales(){this.updating=!0,Ir.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("sale/setSales",e),this.updating}})).catch(this.$handleApiError).finally((()=>{this.updating=!1}))},getChiffresDaffaire(){let t=0;return this.filteredSales.forEach((e=>{t+=Mi(e)})),t},getChiffresDaffaireVerse(){let t=0;return this.filteredSales.forEach((e=>{null!=e.factorisations&&e.factorisations.paid&&(t+=Mi(e))})),t},getChiffresDaffaireNonVerse(){let t=0;return this.filteredSales.forEach((e=>{null==e.factorisations||e.factorisations.paid||(t+=Mi(e))})),t},getChiffresDaffaireEnCaise(){return this.getChiffresDaffaire()-this.getChiffresDaffaireVerse()}},mounted(){}};const Zi=(0,d.Z)(Yi,[["render",ba]]);var Ki=Zi;const Bi=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Dashboard")])],-1),Qi={key:0},Gi={key:1},Ji={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Xi={class:"tw-grid tw-mb-5 tw-grid-cols-4 md:tw-grid-cols-4 lg:tw-grid-cols-5 tw-gap-2"},to={class:"lg:tw-col-span-1 md:tw-col-span-1 tw-col-span-4"},eo={class:"lg:tw-col-span-1 md:tw-col-span-1 tw-col-span-4"},ro={class:"lg:tw-col-span-1 md:tw-col-span-1 tw-col-span-4"},ao={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},so={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-5"},io={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"};function oo(t,e,r,a,i,o){const l=(0,s.up)("LoadingAnimation"),n=(0,s.up)("DashItemTwo");return(0,s.wg)(),(0,s.iD)("div",null,[Bi,i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Qi,[(0,s.Wm)(l)])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",Gi,[(0,s._)("div",Ji,[(0,s._)("div",Xi,[(0,s._)("div",to,[(0,s.Wm)(n,{dash:o.earningsDash,symbol:"DH",numbers:!1},null,8,["dash"])]),(0,s._)("div",eo,[(0,s.Wm)(n,{dash:o.totalSales},null,8,["dash"])]),(0,s._)("div",ro,[(0,s.Wm)(n,{dash:o.deliveredSales},null,8,["dash"])]),(0,s._)("div",ao,[(0,s.Wm)(n,{dash:o.reportedSales},null,8,["dash"])]),(0,s._)("div",so,[(0,s.Wm)(n,{dash:o.shippedSales},null,8,["dash"])]),(0,s._)("div",io,[(0,s.Wm)(n,{dash:o.canceledSales},null,8,["dash"])])])])])):(0,s.kq)("",!0)])}var lo={components:{DashItemTwo:_s},data(){return{isLoaded:!0,orders:[],cities:[]}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},sales(){return this.$store.getters["sale/sales"]},totalSales(){return{id:1,title:"Total Orders",value:this.orders.length,pourcentage:100,color:"deep-purple-accent-2",icon:"mdi mdi-all-inclusive"}},deliveredSales(){return{id:2,title:"Delivered",value:this.filterByStatus("livrer").length,pourcentage:100*this.filterByStatus("livrer").length/this.orders.length,color:"primary-green",icon:"mdi-account-check-outline"}},toProcess(){return{id:3,title:"Process",value:231,color:"primary-orange",icon:"mdi-reload"}},shippedSales(){return{id:4,title:"Shipped",value:this.filterByStatus("expidier").length,pourcentage:100*this.filterByStatus("expidier").length/this.orders.length,color:"primary-orange",icon:"mdi-truck"}},reportedSales(){return{id:5,title:"Reported",value:this.filterByStatus("reporter").length,pourcentage:100*this.filterByStatus("reporter").length/this.orders.length,color:"primary-blue",icon:"mdi mdi-clock-outline"}},canceledSales(){return{id:6,title:"Canceled",value:this.filterByStatus("annuler").length,pourcentage:100*this.filterByStatus("annuler").length/this.orders.length,color:"red-accent-3",icon:"mdi mdi-cancel"}},earningsDash(){return{id:2,title:"Earnings",pourcentage:this.earnings,color:"green-darken-4",icon:"mdi-currency-usd"}},earnings(){return this.orders.reduce(((t,e)=>null==e.factorisations||e.factorisations.paid||e.factorisations.close?t:t+e.factorisations.price),0)}},methods:{filterByStatus(t){return this.orders.filter((e=>e.delivery==t))},getOrders(){this.isLoaded=!1,zr.delivery().then((t=>{"SUCCESS"==t.data.code&&(this.orders=t.data.data.orders)})).finally((()=>{this.isLoaded=!0}))}},mounted(){this.getOrders()}};const no=(0,d.Z)(lo,[["render",oo]]);var wo=no;const co=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Dashboard ")])],-1),uo={key:0},po={key:1},mo={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},ho={class:"tw-grid tw-mb-5 tw-grid-cols-4 md:tw-grid-cols-4 lg:tw-grid-cols-5 tw-gap-2"},go={class:"lg:tw-col-span-1 md:tw-col-span-1 tw-col-span-4"},fo={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},vo={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},yo={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},xo={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},bo={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},_o={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"};function ko(t,e,r,a,i,o){const l=(0,s.up)("LoadingAnimation"),n=(0,s.up)("DashItemTwo");return(0,s.wg)(),(0,s.iD)("div",null,[co,i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",uo,[(0,s.Wm)(l)])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",po,[(0,s._)("div",mo,[(0,s._)("div",ho,[(0,s._)("div",go,[(0,s.Wm)(n,{dash:o.earningsDash,symbol:i.currency,numbers:!1},null,8,["dash","symbol"])]),(0,s._)("div",fo,[(0,s.Wm)(n,{dash:o.totalSales},null,8,["dash"])]),(0,s._)("div",vo,[(0,s.Wm)(n,{dash:o.confirmedSales},null,8,["dash"])]),(0,s._)("div",yo,[(0,s.Wm)(n,{dash:o.reportedSales},null,8,["dash"])]),(0,s._)("div",xo,[(0,s.Wm)(n,{dash:o.noanswerSales},null,8,["dash"])]),(0,s._)("div",bo,[(0,s.Wm)(n,{dash:o.canceledSales},null,8,["dash"])]),(0,s._)("div",_o,[(0,s.Wm)(n,{dash:o.upsellSales},null,8,["dash"])])])])])):(0,s.kq)("",!0)])}var Co={components:{DashItemTwo:_s},data(){return{currency:R,isLoaded:!0,orders:[]}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},totalSales(){return{id:1,title:"Total",pourcentage:0===this.orders.length?0:100,value:this.orders.filter((t=>"double"!=t.confirmation)).length,color:"deep-purple-accent-2",icon:"mdi mdi-all-inclusive"}},newSales(){return{id:2,title:"New",value:this.orders.filter((t=>!t.confirmation)).length,pourcentage:(100*this.orders.filter((t=>!t.confirmation)).length/this.orders.length).toFixed(2),color:"grey",icon:"mdi mdi-new-box"}},confirmedSales(){return{id:4,title:"Confirmed",value:this.orders.filter((t=>"confirmer"==t.confirmation)).length,pourcentage:(100*this.orders.filter((t=>"confirmer"==t.confirmation)).length/this.orders.length).toFixed(2),color:"primary-green",icon:"mdi-phone-check"}},reportedSales(){return{id:5,title:"Reported",value:this.orders.filter((t=>"reporter"==t.confirmation)).length,pourcentage:(100*this.orders.filter((t=>"reporter"==t.confirmation)).length/this.orders.length).toFixed(2),color:"primary-blue",icon:"mdi mdi-clock-outline"}},canceledSales(){return{id:6,title:"Canceled",value:this.orders.filter((t=>"annuler"==t.confirmation)).length,pourcentage:(100*this.orders.filter((t=>"annuler"==t.confirmation)).length/this.orders.length).toFixed(2),color:"red-accent-3",icon:"mdi mdi-cancel"}},upsellSales(){return{id:6,title:"Upsell",value:this.orders.filter((t=>"oui"==t.upsell)).length,pourcentage:(100*this.orders.filter((t=>"oui"==t.upsell)).length/this.orders.length).toFixed(2),color:"#2563eb",icon:"mdi mdi-transfer-up"}},earningsDash(){return{id:2,title:"Earnings",pourcentage:.7*this.orders.filter((t=>"oui"==t.upsell&&"livrer"==t.delivery)).length,color:"green-darken-4",icon:"mdi-currency-usd"}},noanswerSales(){return{id:6,title:"No Answer",value:this.orders.filter((t=>["day-one-call-one","day-one-call-two","day-one-call-three","day-two-call-one","day-two-call-two","day-two-call-three","day-three-call-one","day-three-call-two","day-three-call-three"].includes(t.confirmation))).length,pourcentage:(100*this.orders.filter((t=>["day-one-call-one","day-one-call-two","day-one-call-three","day-two-call-one","day-two-call-two","day-two-call-three","day-three-call-one","day-three-call-two","day-three-call-three"].includes(t.confirmation))).length/this.orders.length).toFixed(2),color:"yellow-darken-3",icon:"mdi mdi-headphones-off"}}},methods:{filterByStatus(t){return this.orders.filter((e=>e.confirmation==t))},getOrders(){this.isLoaded=!1,zr.agente().then((t=>{"SUCCESS"==t.data.code&&(this.orders=t.data.data.orders)})).finally((()=>{this.isLoaded=!0}))}},mounted(){this.getOrders()}};const Do=(0,d.Z)(Co,[["render",ko]]);var So=Do;const zo=(0,s._)("div",{class:"tw-w-full tw-rounded-lg tw-py-5 tw-px-5 tw-flex tw-flex-center tw-justify-center"},[(0,s._)("h1",{class:"tw-text-lg"},"Welcome to Dashboard !")],-1),Uo=[zo];function Lo(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",null,Uo)}var Po={components:{},data(){return{dashItems:[{id:1,title:"Orders",value:1200,icon:"mdi-package-variant-closed",color:"orange"},{id:2,title:"Total Sales",value:"35000 DH",icon:"mdi-currency-usd",color:"green"},{id:3,title:"Orders Confirmed",value:600,icon:"mdi-phone-check-outline",color:"blue"},{id:4,title:"Orders Delivered",value:543,icon:"mdi-truck-check-outline",color:"pink"}],filledDashItems:[{id:1,title:"Customers",value:2300,color:"primary-orange",icon:"mdi-account-outline"},{id:2,title:"Suppliers",value:300,color:"primary-blue",icon:"mdi-account-check-outline"},{id:3,title:"Purchase Invoice",value:1100,color:"primary-indigo",icon:"mdi-file-document-outline"},{id:4,title:"Agents",value:10,color:"primary-green",icon:"mdi-moped-outline"}]}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role}}};const Ao=(0,d.Z)(Po,[["render",Lo]]);var $o=Ao;const Wo={class:"tw-w-full tw-grid tw-gap-2 lg:tw-grid-cols-4 sm:tw-grid-cols-2 tw-grid-cols-1"},qo=(0,s.uE)('<div class="tw-flex tw-justify-between tw-w-full"><div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-2.5 tw-bg-gray-200 tw-rounded-full tw-w-[50px] tw-mb-4"></div></div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-4 tw-bg-gray-200 tw-rounded-full tw-w-[30px] tw-mb-4"></div></div></div><div class="tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-bg-gray-200 tw-text-white"><div class="tw-bg-white tw-w-[25px] tw-h-[25px] tw-rounded"></div></div></div>',1),Oo=[qo];function Eo(t,e,r,a,i,o){const l=(0,s.up)("DashCard");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",Wo,[i.fetching?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},(0,s.Ko)(4,(t=>(0,s._)("div",{key:t,class:"tw-bg-white tw-animate-pulse tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-[90px]"},Oo))),64)):((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(i.dashes,(t=>((0,s.wg)(),(0,s.j4)(l,{key:t.id,color:t.color,icon:t.icon,title:t.title,symbol:t.symbol,percentage:t.percentage,value:t.value},null,8,["color","icon","title","symbol","percentage","value"])))),128))])])}const To={class:"tw-bg-white tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-fit"},Vo={class:"tw-flex tw-justify-between"},Io={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},Fo={class:"tw-text-gray-400 tw-uppercase tw-text-xs tw-font-medium"},Ro={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},jo={class:"tw-text-gray-700 tw-text-xl tw-font-bold"};function No(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",To,[(0,s._)("div",Vo,[(0,s._)("div",null,[(0,s._)("div",Io,[(0,s._)("p",Fo,(0,Q.zw)(r.title),1),r.percentage?((0,s.wg)(),(0,s.iD)("span",{key:0,class:"tw-text-xs tw-font-medium tw-rounded tw-px-1 tw-text-white",style:(0,Q.j5)({background:r.color})},(0,Q.zw)(r.percentage.toFixed(2))+"%",5)):(0,s.kq)("",!0)]),(0,s._)("div",Ro,[(0,s._)("span",jo,(0,Q.zw)(r.value),1)])]),(0,s._)("div",{style:(0,Q.j5)({background:r.color}),class:"tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-text-white"},[(0,s.Wm)(X.t,{style:(0,Q.j5)(["Orders"==r.title&&{color:"#2ee1ff"}]),size:"x-large"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(r.icon),1)])),_:1},8,["style"])],4)])])])}var Mo={props:{icon:{required:!0},title:{required:!0},value:{required:!0},symbol:{default:"",required:!1},percentage:{required:!1},color:{required:!0,default:"#6b7280"}}};const Ho=(0,d.Z)(Mo,[["render",No]]);var Yo=Ho;class Zo{async statistics(){return await Y.getCookie(),M.post("api/v1/followup/statistics")}async paginate(t="/",e){return await Y.getCookie(),M.post("api/v1/followup/orders"+t,e)}async update(t,e){return await Y.getCookie(),M.post("api/v1/followup/orders/"+t+"/update",e)}async create(t){return await Y.getCookie(),M.post("api/v1/followup/orders/create",t)}}var Ko=new Zo,Bo={components:{DashCard:Yo},data(){return{fetching:!0,dashes:[]}},mounted(){Ko.statistics().then((t=>{console.log(t.data.data),this.dashes=t.data.data.statistics,this.fetching=!1}))}};const Qo=(0,d.Z)(Bo,[["render",Eo]]);var Go=Qo,Jo={components:{admin:Ki,delivery:wo,agente:So,default:$o,"follow-up":Go},data(){return{localUrl:I,exists:!1}},computed:{user(){return this.$store.getters["user/user"]},dashboard(){return["admin","delivery","agente","follow-up"].includes(this.user.role)?this.user.role:"default"}},methods:{check(){switch(this.user.role){case"admin":this.$router.push({name:"dashboards/admin"});break;default:this.exists=!0;break}}},mounted(){this.check()}};const Xo=(0,d.Z)(Jo,[["render",oa]]);var tl=Xo,el=r(3104);const rl=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Settings ")],-1),al={key:0},sl={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},il={class:"tw-w-full"},ol=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," First Name ",-1),ll={class:"tw-w-full"},nl=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Last Name",-1),dl={class:"tw-w-full"},wl=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Email",-1),cl={class:"tw-w-full"},ul=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Phone Number ",-1),pl={class:"tw-w-full tw-flex tw-gap-10 tw-items-center"},ml=(0,s._)("span",null,"Update Password: ",-1),hl={class:"tw-w-full"},gl=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Password",-1),fl={class:"tw-w-full"},vl=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Confirm Password ",-1),yl={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},xl=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),bl=(0,s._)("span",{class:"text-white text-capitalize"},"Update",-1);function _l(t,e,r,a,i,o){const l=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[rl,o.isFormReady?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",al,[(0,s.Wm)(l)])),o.isFormReady?((0,s.wg)(),(0,s.iD)("div",sl,[(0,s._)("div",null,[(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",il,[ol,(0,s.Wm)(tt.hw,{"error-messages":i.formStatus.firstname.message,modelValue:i.firstname,"onUpdate:modelValue":e[0]||(e[0]=t=>i.firstname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",ll,[nl,(0,s.Wm)(tt.hw,{"error-messages":i.formStatus.lastname.message,modelValue:i.lastname,"onUpdate:modelValue":e[1]||(e[1]=t=>i.lastname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",dl,[wl,(0,s.Wm)(tt.hw,{"error-messages":i.formStatus.email.message,modelValue:i.email,"onUpdate:modelValue":e[2]||(e[2]=t=>i.email=t),readonly:"",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",cl,[ul,(0,s.Wm)(tt.hw,{"error-messages":i.formStatus.phone.message,modelValue:i.phone,"onUpdate:modelValue":e[3]||(e[3]=t=>i.phone=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-0",cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",pl,[ml,(0,s.Wm)(el.G,{modelValue:i.updatePassword,"onUpdate:modelValue":e[4]||(e[4]=t=>i.updatePassword=t),color:"primary-color","hide-details":!0},null,8,["modelValue"])])])),_:1}),i.updatePassword?((0,s.wg)(),(0,s.j4)(na.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",hl,[gl,(0,s.Wm)(tt.hw,{"error-messages":i.formStatus.password.message,modelValue:i.password,"onUpdate:modelValue":e[5]||(e[5]=t=>i.password=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1})):(0,s.kq)("",!0),i.updatePassword?((0,s.wg)(),(0,s.j4)(na.D,{key:1,class:"!tw-py-2 tw-pt-0",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",fl,[vl,(0,s.Wm)(tt.hw,{"error-messages":i.formStatus.confirmPassword.message,modelValue:i.confirmPassword,"onUpdate:modelValue":e[6]||(e[6]=t=>i.confirmPassword=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1})])),_:1})]),(0,s._)("div",yl,[(0,s.Wm)(G.T,{link:"",to:{name:"user/list"},color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[xl])),_:1}),t.$can("update_account")?((0,s.wg)(),(0,s.j4)(G.T,{key:0,onClick:o.update,loading:i.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[bl])),_:1},8,["onClick","loading"])):(0,s.kq)("",!0)])])):(0,s.kq)("",!0)])}var kl={data(){return{serverUrl:F,isFetched:!1,isUserFetched:!1,isLoading:!1,updatePassword:!1,formStatus:{firstname:{valid:!0,message:""},lastname:{valid:!0,message:""},phone:{valid:!0,message:""},email:{valid:!0,message:""},password:{valid:!0,message:""},confirmPassword:{valid:!0,message:""}},id:null,firstname:"",lastname:"",phone:"",email:"",password:"",confirmPassword:""}},computed:{isFormReady(){return this.isFetched},user(){return{id:this.id,firstname:this.firstname,lastname:this.lastname,phone:this.phone,password:this.password}}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,K.updateProfile(this.user,this.updatePassword).then((t=>{"USER_UPDATED"==t.data.code&&this.$alert({type:"success",title:t.data.message})})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;switch(console.log(t),e?.code){case"VALIDATION_ERROR":for(let t in e.error)this.formStatus[t]={valid:!1,message:e.error[t][0]};break}return t})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1}))},validate(){this.formStatus["firstname"]=_t(this.firstname),this.formStatus["lastname"]=_t(this.lastname),this.formStatus["phone"]=_t(this.phone),this.formStatus["password"]=bt(this.password),this.formStatus["confirmPassword"]=Ct(this.password,this.confirmPassword);const t=this.formStatus["firstname"].valid,e=this.formStatus["lastname"].valid,r=this.formStatus["phone"].valid;if(this.updatePassword){const a=this.formStatus["password"].valid,s=this.formStatus["confirmPassword"].valid;return t&&e&&a&&s&&r}return t&&e&&r},async getUser(){return K.profile().then((t=>{if("USER_SUCCESS"==t?.data.code){const e=t.data.data.user;this.id=e.id,this.firstname=e.firstname,this.lastname=e.lastname,this.email=e.email,this.phone=e.phone,this.isUserFetched=!0}})).catch(this.$handleApiError)}},async mounted(){Promise.allSettled([this.getUser()]).then((()=>this.isFetched=!0),(t=>this.$handleApiError(t)))}};const Cl=(0,d.Z)(kl,[["render",_l]]);var Dl=Cl;const Sl=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Notifications")])],-1),zl={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Ul={class:"!tw-capitalize"};function Ll(t,e,r,a,i,o){(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[Sl,(0,s.kq)("",!0),((0,s.wg)(),(0,s.iD)("div",zl,[(0,s.Wm)(Ja._,{flat:""},{default:(0,s.w5)((()=>[(0,s.Wm)(Xa.d,{modelValue:i.tab,"onUpdate:modelValue":e[0]||(e[0]=t=>i.tab=t),color:"primary-color","align-tabs":"start",density:"compact"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.tabs,(t=>((0,s.wg)(),(0,s.j4)(ts.L,{class:"!tw-capitalize !tw-text-neutral-600",key:t.id,value:t.id},{default:(0,s.w5)((()=>[(0,s._)("span",Ul,(0,Q.zw)(t.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"]),(0,s.Wm)(es.Oo,{class:"tw-mt-5",modelValue:i.tab,"onUpdate:modelValue":e[1]||(e[1]=t=>i.tab=t)},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.tabs,(t=>((0,s.wg)(),(0,s.j4)(rs.H,{key:t.id,value:t.id},{default:(0,s.w5)((()=>[((0,s.wg)(),(0,s.j4)((0,s.LL)(t.component)))])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})]))])}const Pl={key:0};function Al(t,e,r,a,i,o){const l=(0,s.up)("SalesTable");return o.fetched?((0,s.wg)(),(0,s.iD)("div",Pl,[((0,s.wg)(),(0,s.j4)(l,{key:o.sales.length,columns:i.columns,sales:o.sales},null,8,["columns","sales"]))])):(0,s.kq)("",!0)}const $l={class:"tw-grid tw-grid-cols-12 tw-mb-5"},Wl={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-items-center"},ql=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"}," Show per page: ",-1),Ol=["value"],El={class:"tw-relative tw-pb-5 tw-overflow-x-auto tw-min-h-[400px] tw-overflow-y-visible sm:tw-rounded-lg"},Tl={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},Vl={scope:"col",class:"tw-p-4"},Il={class:"tw-flex tw-items-center"},Fl=(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox",-1),Rl={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},jl={class:"tw-w-4 tw-p-4 tw-relative"},Nl={class:"tw-flex tw-items-center"},Ml=["onChange","checked"],Hl=(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox",-1),Yl={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},Zl={class:"tw-px-6 tw-py-4 tw-relative"},Kl={key:0},Bl={class:"tw-px-6 tw-py-4"},Ql=["title"],Gl={class:"tw-px-6 tw-py-4 tw-relative"},Jl={class:"tw-pb-2"},Xl={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},tn={key:0},en={key:1},rn={class:"tw-absolute tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-text-xs"},an={key:0,class:"tw-bg-emerald-500/10 tw-text-emerald-500 tw-px-2 tw-rounded-t"},sn={key:1,class:"tw-bg-blue-500/10 tw-text-blue-500 tw-px-2 tw-rounded-t"},on={class:"tw-px-6 tw-py-4"},ln={class:"tw-px-6 tw-py-4 tw-relative"},nn={class:"tw-flex tw-items-center tw-justify-center"},dn={class:"tw-flex tw-gap-1"},wn={key:0},cn={class:"tw-px-6 tw-py-4"},un={class:"tw-px-6 tw-py-4 tw-relative"},pn={class:"tw-flex tw-items-center tw-justify-center"},mn={class:"tw-flex tw-gap-1"},hn={key:0},gn={class:"tw-px-6 tw-py-4"},fn={class:"tw-px-6 tw-py-4"},vn={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},yn={class:"tw-col-span-12 md:tw-col-span-12 d-flex tw-justify-end tw-flex-wrap align-center"},xn={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},bn={class:"tw-flex tw-flex-wrap tw-gap-2"},_n={class:"tw-text-white"};function kn(t,e,r,i,o,l){const n=(0,s.up)("SaleConfirmation"),d=(0,s.up)("SaleAffectation"),w=(0,s.up)("SaleDelivery"),c=(0,s.up)("SaleActions");return(0,s.wg)(),(0,s.iD)("div",{key:l.items.length},[(0,s._)("div",$l,[(0,s._)("div",Wl,[ql,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,Ol)))),128))],512),[[a.bM,o.paginationLimit]])])]),(0,s._)("div",El,[((0,s.wg)(),(0,s.iD)("table",{key:l.reportedForToday.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,s._)("thead",Tl,[(0,s._)("tr",null,[(0,s._)("th",Vl,[(0,s._)("div",Il,[(0,s.wy)((0,s._)("input",{onClick:e[1]||(e[1]=(...t)=>l.handleSelectAll&&l.handleSelectAll(...t)),"onUpdate:modelValue":e[2]||(e[2]=t=>o.isAllSelected=t),id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"},null,512),[[a.e8,o.isAllSelected]]),Fl])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t,class:(0,Q.C_)([["city"==t&&"!tw-max-w-[150px]"],"tw-px-6 tw-py-3 tw-truncate"]),scope:"col"},[(0,s._)("div",Rl,(0,Q.zw)(t),1)],2)))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.items,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:(0,Q.C_)([[[t.confirmation,t.delivery].includes("reporter")&&"tw-relative",l.isReportedToday(t)&&"!tw-border tw-border-red-400"],"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"])},[(0,s._)("td",jl,[(0,s._)("div",Nl,[(0,s._)("input",{onChange:e=>l.handleSelect(e,t.id),checked:l.isSelected(t.id),id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"},null,40,Ml),Hl])]),(0,s._)("td",Yl,(0,Q.zw)(t.id),1),(0,s._)("td",Zl,[(0,s.Uk)((0,Q.zw)(t?.created_at?.split("T")[0])+" ",1),"reporter"==t.confirmation||"reporter"==t.delivery?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([l.isReportedToday(t)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[l.isReportedToday(t)?((0,s.wg)(),(0,s.iD)("span",Kl," Reported for today ")):(0,s.kq)("",!0)],2)):(0,s.kq)("",!0)]),(0,s._)("td",Bl,[(0,s._)("div",{title:t.city,class:"!tw-max-w-[200px] tw-truncate"},(0,Q.zw)(t.city),9,Ql)]),(0,s._)("td",Gl,[(0,s._)("div",Jl,[(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.items,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,s.Uk)(" - "),(0,s._)("span",Xl,(0,Q.zw)(t.quantity)+" X ",1),(0,s.Uk)((0,Q.zw)(t.product.name)+" ",1),t.product_variation.size?((0,s.wg)(),(0,s.iD)("span",tn,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,s.kq)("",!0),t.product_variation.color?((0,s.wg)(),(0,s.iD)("span",en,"| "+(0,Q.zw)(t.product_variation.color),1)):(0,s.kq)("",!0)])))),128))]),(0,s._)("div",rn,[t.counts_from_warehouse?((0,s.wg)(),(0,s.iD)("p",an," warehouse ")):(0,s.kq)("",!0),t.counts_from_warehouse?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",sn," delivery "))])])]),(0,s._)("td",on,(0,Q.zw)(t.fullname),1),(0,s._)("td",ln,[(0,s._)("div",nn,[((0,s.wg)(),(0,s.j4)(n,{class:(0,Q.C_)("reporter"==t.confirmation&&"tw-mb-1"),sale:t,id:t.id,confirmation:t.confirmation,key:t.confirmation},null,8,["class","sale","id","confirmation"])),"reporter"==t.confirmation?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([l.isReportedToday(t)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[(0,s._)("span",dn,["reporter"==t.confirmation?((0,s.wg)(),(0,s.iD)("span",wn,[(0,s.Wm)(X.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s._)("span",null,(0,Q.zw)(t?.reported_agente_date?.split("T")[0]),1)])):(0,s.kq)("",!0)])],2)):(0,s.kq)("",!0)])]),(0,s._)("td",cn,["confirmer"==t.confirmation?((0,s.wg)(),(0,s.j4)(d,{sale:t,affectation:t.affectation,id:t.id,key:t.affectation},null,8,["sale","affectation","id"])):(0,s.kq)("",!0)]),(0,s._)("td",un,[(0,s._)("div",pn,[((0,s.wg)(),(0,s.j4)(w,{class:(0,Q.C_)("reporter"==t.delivery&&"tw-mb-1"),sale:t,id:t.id,key:t.delivery,delivery:t.delivery},null,8,["class","sale","id","delivery"])),"reporter"==t.delivery?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([l.isReportedToday(t)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[(0,s._)("span",mn,["reporter"==t.delivery?((0,s.wg)(),(0,s.iD)("span",hn,[(0,s.Wm)(X.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s._)("span",null,(0,Q.zw)(t.reported_delivery_date),1)])):(0,s.kq)("",!0)])],2)):(0,s.kq)("",!0)])]),(0,s._)("td",gn,(0,Q.zw)(l.getPrice(t)),1),(0,s._)("td",fn,[((0,s.wg)(),(0,s.j4)(c,{id:t.id,key:t.delivery,sale:t},null,8,["id","sale"]))])],2)))),128))])]))]),(0,s._)("div",vn,[(0,s._)("div",yn,[(0,s._)("div",xn,(0,Q.zw)(l.prevRange+1)+" - "+(0,Q.zw)(o.currentPage==l.pageCount?r.sales.length:l.nextRange)+" of "+(0,Q.zw)(r.sales.length)+" items ",1),(0,s._)("div",bn,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.pageCount,(t=>((0,s.wg)(),(0,s.j4)(G.T,{onClick:e=>o.currentPage=t,ripple:!1,variant:"flat",icon:"",rounded:"lg",color:t==o.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",_n,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const Cn={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},Dn=["onClick"],Sn={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},zn=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter note",-1),Un={class:"tw-flex tw-justify-end tw-mt-2"};function Ln(t,e,r,i,o,l){const n=(0,s.up)("popup-full"),d=(0,s.up)("SaleConfirmationReporting");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:r.confirmation,class:"tw-relative tw-min-w-[100px]"},[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>l.toggle&&l.toggle(...t)),class:(0,Q.C_)([[l.selected.text,l.selected.bg,l.selected.ring],"focus:tw-ring-4 tw-min-w-[100px] focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between"]),type:"button"},[(0,s.Uk)((0,Q.zw)(l.selected.name)+" ",1),o.isLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(X.t,{key:0,class:"tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(o.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),o.isLoading?((0,s.wg)(),(0,s.j4)(X.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)],2),(0,s._)("div",{class:(0,Q.C_)([{"tw-hidden":!o.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,s._)("ul",Cn,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.options,(t=>((0,s.wg)(),(0,s.iD)("li",{onClick:e=>l.handleChange(t),key:t.id},[(0,s._)("a",{class:(0,Q.C_)(["tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100",[t.text,t.bg]])},(0,Q.zw)(t.name),3)],8,Dn)))),128))])],2),(0,s.Wm)(n,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>o.showPopup=!1),visible:o.showPopup},{default:(0,s.w5)((()=>[(0,s._)("div",Sn,[zn,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.note=t),cols:"30",rows:"3",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[a.nr,o.note]]),(0,s._)("div",Un,[(0,s.Wm)(G.T,{class:"tw-capitalize",loading:o.isLoading,variant:"flat",color:"green",onClick:l.handleClick},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"]),(0,s.Wm)(d,{order:r.sale,visible:o.showPopupReporter,onCancel:e[3]||(e[3]=t=>o.showPopupReporter=!1)},null,8,["order","visible"])])),[[Bt.L,l.close]])}const Pn=[{id:0,value:null,name:"New",text:"tw-text-white",textLight:"tw-text-emerald-800",bg:"tw-bg-green-500",bgLight:"tw-bg-emerald-100",ring:"tw-ring-green-300"},{id:1,value:"day-one-call-one",name:"No reply 1 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-700",bg:"tw-bg-rose-200/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-200"},{id:2,value:"day-one-call-two",name:"No reply 2 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-800",bg:"tw-bg-rose-400/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-300"},{id:3,value:"day-one-call-three",name:"No reply 3 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-900",bg:"tw-bg-rose-600/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-400"},{id:4,value:"day-two-call-one",name:"No reply 1 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-700",bg:"tw-bg-indigo-200/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-200"},{id:5,value:"day-two-call-two",name:"No reply 2 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-800",bg:"tw-bg-indigo-400/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-300"},{id:6,value:"day-two-call-three",name:"No reply 3 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-900",bg:"tw-bg-indigo-600/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-400"},{id:7,value:"day-three-call-one",name:"No reply 1 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-700",bg:"tw-bg-blue-200/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-200"},{id:8,value:"day-three-call-two",name:"No reply 2 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-800",bg:"tw-bg-blue-400/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-300"},{id:9,value:"day-three-call-three",name:"No reply 3 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-900",bg:"tw-bg-blue-600/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-400"},{id:10,value:"reporter",name:"Reported",text:"tw-text-teal-500",textLight:"tw-text-teal-800",bg:"tw-bg-teal-500/10",bgLight:"tw-bg-teal-100",ring:"tw-ring-teal-300"},{id:11,value:"annuler",name:"Canceled",text:"tw-text-red-500",textLight:"tw-text-red-800",bg:"tw-bg-red-500/10",bgLight:"tw-bg-red-100",ring:"tw-ring-red-300"},{id:12,value:"wrong-number",name:"Wrong number",text:"tw-text-fuchsia-500",textLight:"tw-text-fuchsia-800",bg:"tw-bg-fuchsia-500/10",bgLight:"tw-bg-fuchsia-100",ring:"tw-ring-fuchsia-300"},{id:13,value:"confirmer",name:"Confirmed",text:"tw-text-green-500",textLight:"tw-text-green-800",bg:"tw-bg-green-500/10",bgLight:"tw-bg-green-100",ring:"tw-ring-green-300"},{id:14,value:"double",name:"Double",text:"tw-text-purple-500",textLight:"tw-text-purple-800",bg:"tw-bg-purple-500/10",bgLight:"tw-bg-purple-100",ring:"tw-ring-purple-300"}],An=[{id:0,value:null,name:"New",text:"tw-text-white",textLight:"tw-text-emerald-800",bg:"tw-bg-green-500",bgLight:"tw-bg-emerald-100",ring:"tw-ring-green-300"},{id:1,value:"day-one-call-one",name:"No reply 1 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-700",bg:"tw-bg-rose-200/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-200"},{id:2,value:"day-one-call-two",name:"No reply 2 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-800",bg:"tw-bg-rose-400/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-300"},{id:3,value:"day-one-call-three",name:"No reply 3 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-900",bg:"tw-bg-rose-600/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-400"},{id:4,value:"day-two-call-one",name:"No reply 1 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-700",bg:"tw-bg-indigo-200/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-200"},{id:5,value:"day-two-call-two",name:"No reply 2 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-800",bg:"tw-bg-indigo-400/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-300"},{id:6,value:"day-two-call-three",name:"No reply 3 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-900",bg:"tw-bg-indigo-600/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-400"},{id:7,value:"day-three-call-one",name:"No reply 1 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-700",bg:"tw-bg-blue-200/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-200"},{id:8,value:"day-three-call-two",name:"No reply 2 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-800",bg:"tw-bg-blue-400/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-300"},{id:9,value:"day-three-call-three",name:"No reply 3 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-900",bg:"tw-bg-blue-600/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-400"},{id:10,value:"reporter",name:"Reported",text:"tw-text-teal-500",textLight:"tw-text-teal-800",bg:"tw-bg-teal-500/10",bgLight:"tw-bg-teal-100",ring:"tw-ring-teal-300"},{id:11,value:"annuler",name:"Canceled",text:"tw-text-red-500",textLight:"tw-text-red-800",bg:"tw-bg-red-500/10",bgLight:"tw-bg-red-100",ring:"tw-ring-red-300"},{id:13,value:"reconfirmer",name:"Reconfirmed",text:"tw-text-cyan-500",textLight:"tw-text-cyan-800",bg:"tw-bg-cyan-500/10",bgLight:"tw-bg-cyan-100",ring:"tw-ring-cyan-300"}],$n=[{id:0,value:null,name:"Select",text:"tw-text-neutral-600",bg:"tw-bg-neutral-500/10",ring:"tw-ring-neutral-300"},{id:1,value:"oui",name:"Oui",text:"tw-text-green-500",bg:"tw-bg-green-500/10",ring:"tw-ring-green-300"},{id:2,value:"non",name:"Non",text:"tw-text-pink-500",bg:"tw-bg-pink-500/10",ring:"tw-ring-pink-300"}],Wn=[{id:0,value:null,name:"Select",text:"tw-text-gray-500",textLight:"tw-text-gray-800",bg:"tw-bg-gray-500/10",bgLight:"tw-bg-gray-100",ring:"tw-ring-gray-300"},{id:1,value:"dispatch",name:"Dispatched",text:"tw-text-yellow-500",textLight:"tw-text-yellow-800",bg:"tw-bg-yellow-500/10",bgLight:"tw-bg-yellow-100",ring:"tw-ring-yellow-300"},{id:2,value:"expidier",name:"Shipped",text:"tw-text-fuchsia-500",textLight:"tw-text-fuchsia-800",bg:"tw-bg-fuchsia-500/10",bgLight:"tw-bg-fuchsia-100",ring:"tw-ring-fuchsia-300"},{id:3,value:"livrer",name:"Delivered",text:"tw-text-green-500",bg:"tw-bg-green-500/10",textLight:"tw-text-green-800",bgLight:"tw-bg-green-100",ring:"tw-ring-green-300"},{id:4,value:"reporter",name:"Reported",text:"tw-text-orange-500",bg:"tw-bg-orange-500/10",textLight:"tw-text-orange-800",bgLight:"tw-bg-orange-100",ring:"tw-ring-orange-300"},{id:5,value:"refuser",name:"Refused",text:"tw-text-pink-500",bg:"tw-bg-pink-500/10",textLight:"tw-text-pink-800",bgLight:"tw-bg-pink-100",ring:"tw-ring-pink-300"},{id:6,value:"annuler",name:"Canceled",text:"tw-text-red-500",bg:"tw-bg-red-500/10",textLight:"tw-text-red-800",bgLight:"tw-bg-red-100",ring:"tw-ring-red-300"},{id:9,value:"pas-de-reponse",name:"No Answer",text:"tw-text-yellow-500",bg:"tw-bg-yellow-500/10",textLight:"tw-text-yellow-800",bgLight:"tw-bg-yellow-100",ring:"tw-ring-yellow-300"},{id:10,value:"retourner",name:"Retourned",text:"tw-text-purple-500",bg:"tw-bg-purple-500/10",textLight:"tw-text-purple-800",bgLight:"tw-bg-purple-100",ring:"tw-ring-purple-300"},{id:11,value:"reconfirmer",name:"Reconfirmed",text:"tw-text-indigo-500",bg:"tw-bg-indigo-500/10",textLight:"tw-text-indigo-800",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-300"},{id:12,value:"paid",name:"Paid",text:"tw-text-emerald-500",bg:"tw-bg-emerald-500/10",textLight:"tw-text-emerald-800",bgLight:"tw-bg-emerald-100",ring:"tw-ring-emerald-300"},{id:13,value:"transfer",name:"Transferd",text:"tw-text-violet-500",bg:"tw-bg-violet-500/10",textLight:"tw-text-violet-800",bgLight:"tw-bg-violet-100",ring:"tw-ring-violet-300"},{id:14,value:"livrer-et-retourner",name:"Delivered & Return",text:"tw-text-cyan-500",bg:"tw-bg-cyan-500/10",textLight:"tw-text-cyan-800",bgLight:"tw-bg-cyan-100",ring:"tw-ring-cyan-300"},{id:15,value:"reconfirmer",name:"Reconfirmed",text:"tw-text-emerald-500",bg:"tw-bg-emerald-500/10",textLight:"tw-text-emerald-800",bgLight:"tw-bg-emerald-100",ring:"tw-ring-emerald-300"}],qn=[null,"expidier","paid","transfer","dispatch"],On={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},En=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),Tn=(0,s._)("br",null,null,-1),Vn=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),In={class:"tw-flex tw-justify-end tw-mt-2"};function Fn(t,e,r,i,o,l){const n=(0,s.up)("VueDatePicker"),d=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",{key:r.order.id},[(0,s.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>l.cancel()),visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",On,[En,(0,s.Wm)(n,{modelValue:o.date,"onUpdate:modelValue":e[0]||(e[0]=t=>o.date=t),format:l.format},null,8,["modelValue","format"]),Tn,Vn,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[a.nr,o.note]]),(0,s._)("div",In,[(0,s.Wm)(G.T,{class:"tw-capitalize",loading:o.isLoading,variant:"flat",color:"green",onClick:l.handleConfirm},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var Rn={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_agente_date=this.realDate,t.reported_agente_note=this.note,t.confirmation="reporter",this.isLoading=!0,Ir.agenteUpdateConfirmation(t.id,"reporter",t).then((e=>{console.log(e.data),this.$alert({type:"success",title:"Order reported successfully"}),this.$store.dispatch("sale/update",{id:t.id,sale:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},format(t){const e=t.getDate(),r=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,s=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();return this.realDate=`${i}-${s}-${r}`,`${r}/${s}/${i}`},cancel(){this.$emit("cancel")}},mounted(){}};const jn=(0,d.Z)(Rn,[["render",Fn]]);var Nn=jn,Mn={props:["confirmation","id","sale"],components:{SaleConfirmationReporting:Nn},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",noteReporter:"",selectedId:0,allOptions:Pn,showPopupReporter:!1}},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleResolved(t){t?(this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))):this.showPopup=!1},handleClick(){this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))},handleClickReporter(){this.showPopupReporter=!1},async handleChange(t){if(t.id===this.selectedId)return!1;"confirmer"!==t.value&&"reporter"!==t.value?(this.selectedId=t.id,this.updateOrder()):"reporter"===t.value?this.showPopupReporter=!0:(this.nextOption=t.id,this.showPopup=!0),this.close()},async updateOrder(){return this.isLoading=!0,Ir.agenteUpdateConfirmation(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmation(this.id,this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},async updateOrderWithNote(){return this.isLoading=!0,Ir.agenteUpdateConfirmationWithNote(this.id,this.selected.value,this.note).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmationNote(this.id,this.selected.value,this.note),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateConfirmation(t,e){this.$store.dispatch("sale/updateConfirmation",{id:t,confirmation:e})},updateConfirmationNote(t,e,r){this.$store.dispatch("sale/updateConfirmationWithNote",{id:t,confirmation:e,note:r})}},mounted(){this.availableOptions.includes(this.confirmation)?this.selectedId=this.allOptions.find((t=>t.value==this.confirmation)).id:this.selectedId=0}};const Hn=(0,d.Z)(Mn,[["render",Ln]]);var Yn=Hn;const Zn={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},Kn=["onClick"],Bn={class:"tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100"},Qn={key:1,class:"tw-relative tw-min-w-[100px] tw-flex tw-items-center"};function Gn(t,e,r,a,i,o){return o.fetched?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:r.affectation,class:"tw-relative tw-min-w-[100px]"},[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>o.toggle&&o.toggle(...t)),class:"tw-whitespace-nowrap focus:tw-ring-4 tw-ring-neutral-200 tw-bg-neutral-600/10 tw-text-neutral-800 focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center",type:"button"},[(0,s.Uk)((0,Q.zw)(o.selected.firstname)+" "+(0,Q.zw)(o.selected.lastname)+" ",1),i.isLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(X.t,{key:0,class:"tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(i.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),i.isLoading?((0,s.wg)(),(0,s.j4)(X.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)]),(0,s._)("div",{class:(0,Q.C_)([{"tw-hidden":!i.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,s._)("ul",Zn,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.options,(t=>((0,s.wg)(),(0,s.iD)("li",{onClick:e=>o.handleChange(t),key:t.id},[(0,s._)("a",Bn,(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),1)],8,Kn)))),128))])],2)])),[[Bt.L,o.close]]):((0,s.wg)(),(0,s.iD)("div",Qn,[(0,s.Wm)(X.t,{class:"tw-animate-spin tw-ml-1 tw-text-orange-500"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})]))}var Jn={props:["affectation","id","sale"],data(){return{isOpen:!1,isLoading:!1,selectedId:null,old:null}},computed:{options(){return[{id:null,firstname:"select",lastname:""},...this.deliveries]},selected(){const t=[...this.deliveries.map((t=>parseInt(t.id)))];return null!=this.selectedId&&t.includes(parseInt(this.selectedId))?this.options.filter((t=>t.id==this.selectedId))[0]:{id:null,firstname:"select",lastname:""}},users(){return this.$store.getters["user/users"]},allDeliveries(){return this.users.filter((t=>"delivery"==t.role_name))},fetched(){return this.$store.getters["user/fetched"]},deliveries(){return this.allDeliveries.filter((t=>t.delivery_products.some((t=>this.sale.items.some((e=>e.product_id==t.product_id))))))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(this.old=this.affectation,t.id===this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()},updateOrder(){Ir.agenteUpdateAffectaion(this.id,this.selectedId).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateAffectation(this.id,this.selected.id),this.isLoading=!1)}),(t=>{this.$handleApiError(t),this.isLoading=!1,this.selectedId=this.old}))},updateAffectation(t,e){this.$store.dispatch("sale/updateAffectation",{id:t,affectation:e})}},mounted(){this.selectedId=this.affectation}};const Xn=(0,d.Z)(Jn,[["render",Gn]]);var td=Xn;const ed={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},rd=["onClick"];function ad(t,e,r,a,i,o){const l=(0,s.up)("SaleDeliveryReporting");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:r.delivery,class:"tw-relative tw-min-w-[100px]"},[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>o.toggle&&o.toggle(...t)),class:(0,Q.C_)([[o.selected.text,o.selected.bg,o.selected.ring],"focus:tw-ring-4 tw-min-w-[100px] focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between"]),type:"button"},[(0,s.Uk)((0,Q.zw)(o.selected.name)+" ",1),i.isLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(X.t,{key:0,class:"tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(i.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),i.isLoading?((0,s.wg)(),(0,s.j4)(X.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)],2),(0,s._)("div",{class:(0,Q.C_)([{"tw-hidden":!i.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,s._)("ul",ed,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.options,(t=>((0,s.wg)(),(0,s.iD)("li",{onClick:e=>o.handleChange(t),key:t.id},[(0,s._)("a",{class:(0,Q.C_)(["tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100",[t.text,t.bg]])},(0,Q.zw)(t.name),3)],8,rd)))),128))])],2),(0,s.Wm)(l,{order:r.sale,visible:i.showPopupReporter,onCancel:e[1]||(e[1]=t=>i.showPopupReporter=!1)},null,8,["order","visible"])])),[[Bt.L,o.close]])}const sd={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},id=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),od=(0,s._)("br",null,null,-1),ld=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),nd={class:"tw-flex tw-justify-end tw-mt-2"};function dd(t,e,r,i,o,l){const n=(0,s.up)("VueDatePicker"),d=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",{key:r.order.id},[(0,s.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>l.cancel()),visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",sd,[id,(0,s.Wm)(n,{modelValue:o.date,"onUpdate:modelValue":e[0]||(e[0]=t=>o.date=t),format:l.format},null,8,["modelValue","format"]),od,ld,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[a.nr,o.note]]),(0,s._)("div",nd,[(0,s.Wm)(G.T,{class:"tw-capitalize",loading:o.isLoading,variant:"flat",color:"green",onClick:l.handleConfirm},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var wd={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_delivery_date=this.realDate,t.reported_delivery_note=this.note,t.delivery="reporter",this.isLoading=!0,Ir.deliveryUpdateDelivery(t.id,"reporter",t).then((()=>{this.$alert({type:"success",title:"Order reported successfully"}),this.$store.dispatch("sale/update",{id:t.id,sale:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},format(t){const e=t.getDate(),r=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,s=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();return this.realDate=`${i}-${s}-${r}`,`${r}/${s}/${i}`},cancel(){this.$emit("cancel")}},mounted(){}};const cd=(0,d.Z)(wd,[["render",dd]]);var ud=cd,pd={props:["delivery","id","sale"],components:{SaleDeliveryReporting:ud},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",selectedId:0,allOptions:Wn,showPopupReporter:!1}},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){return t.id!==this.selectedId&&("reporter"!==t.value?(this.selectedId=t.id,this.updateOrder(),this.close(),!0):void("reporter"==t.value&&(this.showPopupReporter=!0,this.close())))},async updateOrder(){return this.isLoading=!0,Ir.deliveryUpdateDelivery(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateDelivery(this.id,this.selected.value),this.isLoading=!1),"QUANTITY_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.message})}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateDelivery(t,e){this.$store.dispatch("sale/updateDelivery",{id:t,delivery:e})}},mounted(){this.availableOptions.includes(this.delivery)?this.selectedId=this.allOptions.find((t=>t.value==this.delivery)).id:this.selectedId=0}};const md=(0,d.Z)(pd,[["render",ad]]);var hd=md;const gd={key:0};function fd(t,e,r,a,i,o){const l=(0,s.up)("SaleHistory"),n=(0,s.up)("popup-full"),d=(0,s.up)("UpdateSale");return r.sale?((0,s.wg)(),(0,s.iD)("div",gd,[(0,s.Wm)(G.T,{link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+r.sale.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"]),t.$can("update_sale")?((0,s.wg)(),(0,s.j4)(G.T,{key:0,onClick:e[0]||(e[0]=t=>i.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),(t.$can("view_sale"),(0,s.kq)("",!0)),(t.$can("delete_sale"),(0,s.kq)("",!0)),(0,s.Wm)(G.T,{onClick:e[2]||(e[2]=t=>i.showHistoryPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"teal",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-sort-clock-ascending-outline")])),_:1})])),_:1}),(0,s.Wm)(n,{visible:i.showHistoryPopup,onCancel:e[4]||(e[4]=t=>i.showHistoryPopup=!1)},{default:(0,s.w5)((()=>[i.showHistoryPopup?((0,s.wg)(),(0,s.j4)(l,{key:0,onCancel:e[3]||(e[3]=t=>i.showHistoryPopup=!1),sale:r.sale},null,8,["sale"])):(0,s.kq)("",!0)])),_:1},8,["visible"]),(0,s.Wm)(d,{visible:i.showUpdatePopup,"onUpdate:visible":e[5]||(e[5]=t=>i.showUpdatePopup=t),order:r.sale},null,8,["visible","order"])])):(0,s.kq)("",!0)}var vd=r(7103),yd=r(795),xd=r(2773);const bd={class:"md:tw-w-[50%] tw-max-h-full tw-relative tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},_d={key:0,class:"tw-w-full tw-h-full"},kd={key:1,class:"tw-p-5"},Cd={class:"d-flextw-flex-col justify-space-between flex-grow-1"},Dd={class:"tw-flex tw-items-center tw-gap-2 tw-my-2"},Sd={class:"tw-text-sm tw-capitalize tw-text-neutral-600"},zd={class:"flex-shrink-0 tw-text-neutral-500 tw-flex tw-items-center tw-gap-2 tw-text-sm"},Ud={class:"d-flextw-flex-col justify-space-between flex-grow-1"},Ld={class:"tw-flex tw-flex-col tw-my-2"},Pd=(0,s._)("div",null," New Order Created ",-1),Ad={class:"flex-shrink-0 tw-flex tw-items-center tw-gap-2 tw-text-sm"};function $d(t,e,r,a,i,o){const l=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",bd,[i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",_d,[(0,s.Wm)(l,{class:"text-primary-color"})])),(0,s.Wm)(G.T,{onClick:o.cancel,icon:"mdi-close",variant:"flat",size:"w-small",color:"red",class:"tw-absolute tw-top-3 tw-z-10 tw-right-3"},null,8,["onClick"]),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",kd,[(0,s.Wm)(yd.R,{density:"compact",side:"end"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.events,(t=>((0,s.wg)(),(0,s.j4)(xd.N,{key:t.id,class:"mb-4","dot-color":o.eventColor(t.type),size:"x-small"},{default:(0,s.w5)((()=>[(0,s._)("div",Cd,[(0,s._)("div",Dd,[(0,s.Wm)(vd.v,{class:"ms-0 tw-capitalize tw-w-fit",color:o.eventColor(t.type),label:"",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(t.type),1)])),_:2},1032,["color"]),"responsibility"!=t.type?((0,s.wg)(),(0,s.j4)(X.t,{key:0,size:"x-small",color:"grey"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-arrow-right")])),_:1})):(0,s.kq)("",!0),"responsibility"!=t.type?((0,s.wg)(),(0,s.j4)(vd.v,{key:1,class:"ms-0 tw-capitalize tw-w-fit",color:"green",label:"",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(t.historique),1)])),_:2},1024)):(0,s.kq)("",!0)]),(0,s._)("div",Sd,(0,Q.zw)(t.users.firstname)+" "+(0,Q.zw)(t.users.lastname),1),(0,s._)("div",zd,[(0,s._)("span",null,(0,Q.zw)(t.created_at?.split("T")[0]),1),(0,s._)("span",null,(0,Q.zw)(t.created_at?.split("T")[1].split(".")[0]),1)])])])),_:2},1032,["dot-color"])))),128)),(0,s.Wm)(xd.N,{class:"mb-4","dot-color":"green",size:"x-small"},{default:(0,s.w5)((()=>[(0,s._)("div",Ud,[(0,s._)("div",Ld,[(0,s.Wm)(vd.v,{class:"ms-0 tw-capitalize tw-w-fit",color:"green",label:"",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Order Created ")])),_:1}),Pd]),(0,s._)("div",Ad,[(0,s._)("span",null,(0,Q.zw)(r.sale.created_at?.split("T")[0]),1),(0,s._)("span",null,(0,Q.zw)(r.sale.created_at?.split("T")[1].split(".")[0]),1)])])])),_:1})])),_:1})])):(0,s.kq)("",!0)])}var Wd={props:["sale"],data(){return{isLoaded:!1,allEvents:[]}},computed:{events(){return[...this.allEvents].reverse()}},methods:{cancel(){this.$emit("cancel")},getHistory(){this.isLoaded=!1,Ir.history(this.sale.id).then((t=>{console.log(t.data),this.allEvents=t.data.data.orders}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))},eventColor(t){let e={confirmation:"primary-color",delivery:"blue",upsell:"purple",affectation:"cyan"};return["confirmation","delivery","upsell","affectation"].includes(t)?e[t]:"primary-color"}},mounted(){this.getHistory()}};const qd=(0,d.Z)(Wd,[["render",$d]]);var Od=qd;const Ed={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},Td={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[950px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},Vd=(0,s._)("h1",{class:"tw-text-lg"},"Update Order",-1),Id={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},Fd={class:"md:tw-col-span-6 tw-col-span-12"},Rd=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),jd={class:"md:tw-col-span-6 tw-col-span-12"},Nd=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),Md={class:"md:tw-col-span-6 tw-col-span-12"},Hd=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),Yd=["value"],Zd=["value"],Kd={class:"md:tw-col-span-6 tw-col-span-12"},Bd=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),Qd={class:"md:tw-col-span-12 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},Gd=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Confirmation",-1),Jd={class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},Xd={class:"tw-col-span-12"},tw=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note:",-1),ew={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},rw={class:"tw-col-span-12 md:tw-col-span-4"},aw=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Date:",-1),sw={class:"tw-col-span-12 md:tw-col-span-8"},iw=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Note:",-1),ow={class:"md:tw-col-span-6 tw-col-span-12"},lw=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Affectation",-1),nw={class:"md:tw-col-span-6 tw-col-span-12"},dw=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Upsell",-1),ww=["value"],cw={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-4"},uw={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},pw={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit -tw-rotate-90 tw-scale-75"},mw=(0,s._)("div",{class:"tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),hw={class:"tw-flex tw-flex-col tw-justify-center"},gw=(0,s._)("p",{class:"tw-col-span-12 tw-mt-5 tw-mb-2"},"Order Items",-1),fw={key:1,class:"tw-col-span-12 tw-rounded tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},vw={key:2,class:"md:tw-col-span-12 tw-col-span-12"},yw={class:"tw-max-w-full tw-overflow-auto"},xw={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},bw={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},_w={class:"tw-mx-auto tw-w-[50px] tw-h-[35px] tw-shadow tw-shadow-gray-200 tw-rounded tw-overflow-hidden tw-cursor-pointer"},kw=["src"],Cw={scope:"row",class:"tw-pr-6 tw-py-2 tw-font-medium tw-text-gray-900"},Dw=["onUpdate:modelValue"],Sw=(0,s._)("option",{value:0},"Select",-1),zw=["value"],Uw={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Lw=["disabled","onUpdate:modelValue"],Pw=(0,s._)("option",{value:0},"Select",-1),Aw=["value"],$w={key:0},Ww={key:1},qw={key:2},Ow={key:3},Ew=["value"],Tw={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Vw={class:"md:tw-col-span-6 tw-col-span-12"},Iw=["onUpdate:modelValue"],Fw={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Rw={key:0},jw={key:1,class:"md:tw-col-span-6 tw-col-span-12"},Nw=["onUpdate:modelValue"],Mw={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Hw={class:"tw-w-full tw-col-span-12 tw-flex tw-justify-end tw-mt-3"},Yw=(0,s._)("span",{class:"!tw-text-sm !tw-capitalize"},"Add",-1),Zw={class:"md:tw-col-span-12 tw-col-span-12"},Kw={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},Bw=(0,s._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),Qw={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},Gw=(0,s._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-mb-2 tw-whitespace-nowrap"},"Price: ",-1),Jw={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},Xw=(0,s._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),tc={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},ec=(0,s._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-whitespace-nowrap"},"Total Price: ",-1),rc={class:"tw-text-xl tw-text-green-500 tw-font-bold tw-px-2 tw-py-1 tw-rounded tw-bg-green-100"},ac={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},sc=(0,s._)("span",{class:"text-white"}," Cancel ",-1),ic=(0,s._)("span",{class:"text-white"}," Update ",-1);function oc(t,e,r,i,o,l){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("AddOrderConfirmation"),w=(0,s.up)("AddOrderAffectation"),c=(0,s.up)("ProductOffers"),u=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(u,{onCancel:e[14]||(e[14]=e=>t.$emit("update:visible",!1)),visible:r.visible},{default:(0,s.w5)((()=>[l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Ed,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",Td,[Vd,(0,s._)("div",Id,[(0,s._)("div",Fd,[Rd,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sale.fullname]])]),(0,s._)("div",jd,[Nd,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>o.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sale.phone]])]),(0,s._)("div",Md,[Hd,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[(0,s._)("option",{disabled:"",value:o.sale.city},(0,Q.zw)(o.sale.city),9,Yd),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,Zd)))),128))],512),[[a.bM,o.sale.city]])]),(0,s._)("div",Kd,[Bd,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>o.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sale.adresse]])]),(0,s._)("div",Qd,[Gd,(0,s.Wm)(d,{order:o.sale,id:o.sale.id,confirmation:o.sale.confirmation,"onUpdate:confirmation":e[4]||(e[4]=t=>o.sale.confirmation=t),onConfirmed:e[5]||(e[5]=t=>o.sale.note=t),onReported:l.handleReported,onChange:l.handleConfirmationChange},null,8,["order","id","confirmation","onReported","onChange"]),(0,s._)("div",Jd,[(0,s._)("div",Xd,[tw,(0,s.wy)((0,s._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[6]||(e[6]=t=>o.sale.note=t)},null,512),[[a.nr,o.sale.note]])])]),"reporter"==o.sale.confirmation&&o.sale.reported_agente_date?((0,s.wg)(),(0,s.iD)("div",ew,[(0,s._)("div",rw,[aw,(0,s._)("div",null,(0,Q.zw)(o.sale.reported_agente_date.split("T")[0]),1)]),(0,s._)("div",sw,[iw,(0,s.wy)((0,s._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[7]||(e[7]=t=>o.sale.reported_agente_note=t)},null,512),[[a.nr,o.sale.reported_agente_note]])])])):(0,s.kq)("",!0)]),(0,s._)("div",ow,[lw,(0,s.Wm)(w,{"product-ids":l.product_ids,items:o.items,"onUpdate:items":e[8]||(e[8]=t=>o.items=t),order:o.sale,confirmation:o.sale.confirmation,affectation:o.sale.affectation,"onUpdate:affectation":e[9]||(e[9]=t=>o.sale.affectation=t),id:o.sale.id},null,8,["product-ids","items","order","confirmation","affectation","id"])]),(0,s._)("div",nw,[dw,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>o.sale.upsell=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.upsells,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,key:t.id},(0,Q.zw)(t.name),9,ww)))),128))],512),[[a.bM,o.sale.upsell]])]),(0,s.kq)("",!0),(0,s._)("div",cw,[(0,s._)("div",uw,[(0,s._)("label",pw,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=t=>o.sale.counts_from_warehouse=t),class:"tw-sr-only tw-peer"},null,512),[[a.e8,o.sale.counts_from_warehouse]]),mw]),(0,s._)("label",hw,[(0,s._)("span",{class:(0,Q.C_)([[o.sale.counts_from_warehouse?"tw-text-orange-500":"tw-text-neutral-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Warehouse",2),(0,s._)("span",{class:(0,Q.C_)([[o.sale.counts_from_warehouse?"tw-text-neutral-500":"tw-text-orange-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Delivery",2)])])]),gw,o.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",fw," No Order items ")),o.items.length?((0,s.wg)(),(0,s.iD)("div",vw,[(0,s._)("div",yw,[((0,s.wg)(),(0,s.iD)("table",{key:o.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,s._)("thead",xw,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",bw,(0,Q.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.items,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:t.product.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[((0,s.wg)(),(0,s.iD)("th",{scope:"row",class:"tw-px-2 tw-py-2",key:t.product.id},[(0,s._)("div",_w,[l.product_images[e]?((0,s.wg)(),(0,s.iD)("img",{key:0,class:"tw-w-full tw-h-full tw-object-contain",src:o.serverUrl+"storage/"+l.product_images[e]},null,8,kw)):(0,s.kq)("",!0)])])),(0,s._)("th",Cw,[(0,s._)("div",null,[(0,s._)("div",null,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e=>t.product.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[Sw,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.filtredProducts,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,zw)))),128))],8,Dw),[[a.bM,t.product.id]])])])]),(0,s._)("th",Uw,[(0,s._)("div",null,[0!=t.product.id?(0,s.wy)(((0,s.wg)(),(0,s.iD)("select",{key:0,disabled:1==l.getVariations(t.product)?.variations?.length,"onUpdate:modelValue":e=>t.product_variation.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[Pw,l.getVariations(t.product)?.variations?.length>1?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(l.getVariations(t.product)?.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},[t.size||t.color?t.size&&"-"!=t.size&&t.color&&"-"!=t.color?((0,s.wg)(),(0,s.iD)("p",Ww,(0,Q.zw)(t.size)+" / "+(0,Q.zw)(t.color),1)):t.size&&"-"!=t.size?((0,s.wg)(),(0,s.iD)("p",qw,(0,Q.zw)(t.size),1)):t.color?((0,s.wg)(),(0,s.iD)("p",Ow,(0,Q.zw)(t.color),1)):(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",$w,"-"))],8,Aw)))),128)):((0,s.wg)(),(0,s.iD)("option",{key:1,value:l.getVariations(t.product)?.variations[0]?.id}," Default ",8,Ew))],8,Lw)),[[a.bM,t.product_variation.id]]):(0,s.kq)("",!0)])]),(0,s._)("th",Tw,[(0,s._)("div",Vw,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,Iw),[[a.nr,t.quantity]])])]),(0,s._)("th",Fw,[(0,s._)("div",null,[null==t.price?((0,s.wg)(),(0,s.iD)("div",Rw," - ")):((0,s.wg)(),(0,s.iD)("div",jw,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e=>t.price=e,placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,Nw),[[a.nr,t.price]])]))])]),(0,s._)("th",Mw,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:e=>l.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])]))])])):(0,s.kq)("",!0),(0,s._)("div",Hw,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:l.addNewRow,class:"mr-2 !tw-px-1 !tw-py-1 !tw-pr-2 tw-flex tw-items-center tw-gap-2","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1}),Yw])),_:1},8,["onClick"])])]),(0,s._)("div",Zw,[(0,s.Wm)(c,{"product-ids":l.product_ids},null,8,["product-ids"])]),(0,s._)("div",Kw,[Bw,(0,s._)("div",Qw,[Gw,(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e[13]||(e[13]=t=>o.sale.price=t),class:"tw-py-1 tw-max-w-[100px] tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sale.price]])])]),(0,s._)("div",Jw,[Xw,(0,s._)("div",tc,[ec,(0,s._)("div",rc,(0,Q.zw)(o.currency)+" "+(0,Q.zw)(l.total_price),1)])])]),(0,s._)("div",ac,[(0,s.Wm)(G.T,{onClick:l.handleCancel,color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[sc])),_:1},8,["onClick"]),(0,s.Wm)(G.T,{loading:o.isLoading,onClick:l.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[ic])),_:1},8,["loading","onClick"])])])):(0,s.kq)("",!0)])),_:1},8,["visible"])])}const lc={class:"tw-relative"},nc=["value"],dc={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},wc=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter note",-1),cc={class:"tw-flex tw-justify-end tw-mt-2"};function uc(t,e,r,i,o,l){const n=(0,s.up)("popup-full"),d=(0,s.up)("AddOrderReporting");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:r.confirmation,class:"tw-relative tw-min-w-[100px] tw-w-full"},[(0,s._)("div",null,[(0,s._)("div",lc,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.confirmationValue=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.allOptions,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([t.text,!t.value&&"!tw-text-gray-700"]),key:t.id,value:t.value},(0,Q.zw)(t.name),11,nc)))),128))],512),[[a.bM,l.confirmationValue]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s.Wm)(n,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>o.showPopup=!1),visible:o.showPopup},{default:(0,s.w5)((()=>[(0,s._)("div",dc,[wc,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.note=t),cols:"30",rows:"3",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[a.nr,o.note]]),(0,s._)("div",cc,[(0,s.Wm)(G.T,{class:"tw-capitalize",loading:o.isLoading,variant:"flat",color:"green",onClick:l.handleClick},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"]),(0,s.Wm)(d,{order:r.order,onConfirm:l.handleReportedDate,visible:o.showPopupReporter,onCancel:e[3]||(e[3]=t=>o.showPopupReporter=!1)},null,8,["order","onConfirm","visible"])])),[[Bt.L,l.close]])}const pc={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},mc=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),hc=(0,s._)("br",null,null,-1),gc=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),fc={class:"tw-flex tw-justify-end tw-mt-2"};function vc(t,e,r,i,o,l){const n=(0,s.up)("VueDatePicker"),d=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",{key:r.order.id},[(0,s.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>l.cancel()),visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",pc,[mc,(0,s.Wm)(n,{modelValue:o.date,"onUpdate:modelValue":e[0]||(e[0]=t=>o.date=t),format:l.format},null,8,["modelValue","format"]),hc,gc,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[a.nr,o.note]]),(0,s._)("div",fc,[(0,s.Wm)(G.T,{class:"tw-capitalize",loading:o.isLoading,variant:"flat",color:"green",onClick:l.handleConfirm},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var yc={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_agente_date=this.realDate,t.reported_agente_note=this.note,t.confirmation="reporter",this.$emit("confirm",{reported_agente_date:this.realDate,reported_agente_note:this.note}),this.isLoading=!0},format(t){const e=t.getDate(),r=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,s=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();return this.realDate=`${i}-${s}-${r}`,`${r}/${s}/${i}`},cancel(){this.$emit("cancel")}}};const xc=(0,d.Z)(yc,[["render",vc]]);var bc=xc,_c={props:["confirmation","id","order"],components:{AddOrderReporting:bc},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",selectedId:0,allOptions:Pn,reported_agente_date:null,reported_agente_note:"",showPopupReporter:!1}},watch:{},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},confirmationValue:{get(){return this.confirmation},set(t){switch(t){case"reporter":this.showPopupReporter=!0;break;case"confirmer":this.showPopup=!0;break;default:this.$emit("update:confirmation",t);break}}},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleResolved(t){t?(this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))):this.showPopup=!1},handleReportedDate(t){this.reported_agente_date=t.reported_agente_date,this.reported_agente_note=t.reported_agente_note,this.$emit("update:confirmation","reporter"),this.$emit("reported",t),this.showPopupReporter=!1},handleClick(){this.showPopup=!1,this.$emit("update:confirmation","confirmer"),this.$emit("confirmed",this.note)},async handleChange(t){if(t.id===this.selectedId)return!1;"confirmer"!==t.value&&"reporter"!==t.value?(this.selectedId=t.id,this.updateOrder()):"reporter"===t.value?this.showPopupReporter=!0:(this.nextOption=t.id,this.showPopup=!0),this.close()},async updateOrder(){return this.isLoading=!0,Ir.agenteUpdateConfirmation(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmation(this.id,this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t)))},async updateOrderWithNote(){return this.isLoading=!0,Ir.agenteUpdateConfirmationWithNote(this.id,this.selected.value,this.note).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmationWithNote(this.id,this.selected.value,this.note),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateConfirmation(t,e){this.$store.dispatch("order/updateConfirmation",{id:t,confirmation:e}),this.$emit("update",e)},updateConfirmationWithNote(t,e,r){this.$store.dispatch("order/updateConfirmationWithNote",{id:t,confirmation:e,note:r}),this.$emit("update",e)}},mounted(){this.availableOptions.includes(this.confirmation)?this.selectedId=this.allOptions.find((t=>t.value==this.confirmation)).id:this.selectedId=0}};const kc=(0,d.Z)(_c,[["render",uc]]);var Cc=kc;const Dc={class:"tw-relative"},Sc=["disabled"],zc=["value"],Uc={key:1,class:"tw-relative tw-min-w-[100px] tw-flex tw-items-center"};function Lc(t,e,r,i,o,l){return o.fetched?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:r.affectation,class:"tw-relative tw-min-w-[100px]"},[(0,s._)("div",null,[(0,s._)("div",Dc,[(0,s.wy)((0,s._)("select",{disabled:"confirmer"!=r.confirmation,"onUpdate:modelValue":e[0]||(e[0]=t=>l.affectationValue=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.options,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.id},(0,Q.zw)(t.firstname+" "+t.lastname),9,zc)))),128))],8,Sc),[[a.bM,l.affectationValue]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])),[[Bt.L,l.close]]):((0,s.wg)(),(0,s.iD)("div",Uc,[(0,s.Wm)(X.t,{class:"tw-animate-spin tw-ml-1 tw-text-orange-500"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})]))}var Pc={props:["affectation","id","order","confirmation","items","productIds"],data(){return{isOpen:!1,isLoading:!1,selectedId:null,fetched:!1}},computed:{options(){return[{id:null,firstname:"select",lastname:""},...this.deliveries]},order_items(){return this.items},affectationValue:{get(){return this.affectation},set(t){this.$emit("update:affectation",t)}},selected(){const t=[...this.deliveries.map((t=>parseInt(t.id)))];return null!=this.selectedId&&t.includes(parseInt(this.selectedId))?this.options.filter((t=>t.id==this.selectedId))[0]:{id:null,firstname:"select",lastname:""}},users(){return this.$store.getters["user/users"]},allDeliveries(){return this.users.filter((t=>"delivery"==t.role_name))},deliveries(){return this.allDeliveries.filter((t=>t.delivery_products.some((t=>this.productIds.includes(t.product_id)))))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(t.id===this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()},getUsers(){this.fetched=!1,K.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),this.$store.dispatch("user/setFetched",!0),this.fetched=!0}})).catch(this.$handleApiError)}},mounted(){this.selectedId=this.affectation,this.getUsers()}};const Ac=(0,d.Z)(Pc,[["render",Lc]]);var $c=Ac;const Wc=(0,s._)("h1",{class:"tw-mb-2 tw-font-medium"},"Offers",-1),qc={class:"tw-relative tw-overflow-x-auto tw-border-b sm:tw-rounded"},Oc={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Ec=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-bg-gray-50"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Product Name"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Quantity"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Price"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Note")])],-1),Tc={class:"tw-px-6 tw-py-4"},Vc={class:"tw-px-6 tw-py-4"},Ic={class:"tw-px-6 tw-py-4"},Fc={class:"tw-px-6 tw-py-4"},Rc={class:"tw-max-w-[250px] tw-text-sm"},jc={key:0},Nc=(0,s._)("td",{colspan:"5"},[(0,s._)("p",{class:"tw-text-center tw-p-5"}," No Offers ")],-1),Mc=[Nc];function Hc(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",null,[Wc,(0,s._)("div",null,[(0,s._)("div",qc,[(0,s._)("table",Oc,[Ec,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.offers,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.key,class:"odd:tw-bg-white even:tw-bg-gray-50 tw-border-b"},[(0,s._)("td",Tc,(0,Q.zw)(o.getProduct(t.product_id)?.name),1),(0,s._)("td",Vc,(0,Q.zw)(t.quantity),1),(0,s._)("td",Ic,(0,Q.zw)(t.price)+" "+(0,Q.zw)(i.currency),1),(0,s._)("td",Fc,[(0,s._)("p",Rc,(0,Q.zw)(t.note),1)])])))),128)),0==o.offers.length?((0,s.wg)(),(0,s.iD)("tr",jc,Mc)):(0,s.kq)("",!0)])])])])])}var Yc={props:["productIds"],data(){return{currency:R}},computed:{products(){return this.$store.getters["product/products"]},offers(){return this.products.filter((t=>this.productIds.includes(t.id))).flatMap((t=>t.offers))}},methods:{getProduct(t){return this.products.find((e=>e.id==t))}}};const Zc=(0,d.Z)(Yc,[["render",Hc]]);var Kc=Zc,Bc={components:{AddOrderConfirmation:Cc,AddOrderAffectation:$c,ProductOffers:Kc},props:["visible","order"],data(){return{upsells:$n,serverUrl:F,currency:R,isLoading:!1,isAddItem:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],reported_date:null,price:0,sale:{fullname:"",phone:"",city:"",adresse:"",price:0,upsell:null,confirmation:null,counts_from_warehouse:!1}}},watch:{product_id(){this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0},"sale.confirmation":{deep:!0,handler(t){"confirmer"!=t&&(this.sale.affectation=null,this.sale.delivery=null)}},product_ids:{deep:!0,handler(t,e){this.items.map(((r,a)=>{if(0==r.product.id)return r;const s=this.getVariations(r.product)?.variations;return e[a]==t[r]||s.some((t=>t.id==r.product_variation.id))||(r.product_variation={id:0},r.product_variation_id=0),1==s?.length&&(r.product_variation=s[0],r.product_variation_id=s[0].id),r}))}}},computed:{products(){return this.$store.getters["product/products"]},product_images(){return this.items.map((t=>0==t.product.id?null:this.products.find((e=>e.id==t.product.id))?.image))},product_ids(){return this.items.map((t=>t.product.id))},isLoaded(){return this.$store.getters["product/fetched"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,r)=>e.indexOf(t.id)===r))},filtredProducts(){return this.products},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},selectedProduct(){return this.products.find((t=>t.id==this.product_id))},total_price:{get(){const t=this.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(this.sale.price?this.sale.price:0)+parseFloat(t)}},isItemsValid(){if(0==this.items.length)return!1;const t=this.items.some((t=>0==t.product.id||0==t.product_variation_id||0==t.quantity));return!t},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city}},methods:{deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},handleConfirmationChange(){"confirmer"!=this.sale.confirmation&&(this.sale.affectation=null)},addNewRow(){const t={id:this.item_id,product_id:0,product_ref:null,product:{id:0},product_variation:{id:0},product_variation_id:0,order_id:this.order.id,quantity:0,price:0};this.items.push(t)},getVariations(t){return this.products.find((e=>e.id==t.id))},formatItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const r=e.variations.find((e=>e.id==t.product_variation.id));return r?{...t,product:e,product_id:e.id,product_variation:r,product_variation_id:r.id,product_ref:e.ref}:t}));return this.items=t,t},addItem(){if([this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),r={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:this.price};this.items.push(r),this.product_id=0,this.product_variation_id=0,this.price=0,this.item_id+=1},update(){if(this.formatItems(),!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;if("annuler"==this.sale.confirmation&&!this.sale.note)return this.$alert({type:"warning",title:"Add Cancellation note."}),!1;if(!this.isItemsValid)return this.$alert({type:"warning",title:"Order Items are not valid"}),!1;this.isLoading=!0;const t={id:this.sale.id,fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,upsell:this.sale.upsell,counts_from_warehouse:this.sale.counts_from_warehouse,orderItems:this.items,confirmation:this.sale.confirmation,note:this.sale.note,affectation:this.sale.affectation,reported_agente_note:this.sale.reported_agente_note,reported_agente_date:this.sale.reported_agente_date};"confirmer"!=t.confirmation&&(t.affectation=null,t.delivery=null),this.isLoading=!0,Ir.update(t.id,t).then((e=>{"SUCCESS"==e.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"Order updated"}),this.$store.dispatch("sale/update",{id:t.id,sale:e.data.data.sale}),this.$emit("update:visible",!1),this.$emit("updateOrder",e.data.data.sale))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},handleCancel(){this.sale={...this.order},this.items=[...this.order.items],this.$emit("update:visible",!1)},handleReported(t){this.sale.reported_agente_note=t.reported_agente_note,this.sale.reported_agente_date=t.reported_agente_date},checkVariant(t,e){const r=this.products.find((e=>e.id==t));if(!r)return{exists:!1};let a=r.variations.find((t=>t.id==e));return a||(a=r.variations.length>0?r.variations[0]:null),{exists:!0,variation:a}},getProducts(){return ea.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.sale={...this.order},this.items=[...this.order.items]}};const Qc=(0,d.Z)(Bc,[["render",oc]]);var Gc=Qc,Jc={props:["sale"],name:"saleActions",components:{SaleHistory:Od,UpdateSale:Gc},data(){return{showPopup:!1,showUpdatePopup:!1,showHistoryPopup:!1,isLoading:!1}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{}};const Xc=(0,d.Z)(Jc,[["render",fd]]);var tu=Xc,eu={props:{sales:{required:!0},selectedReset:{required:!1,default:[]}},components:{SaleConfirmation:Yn,SaleAffectation:td,SaleDelivery:hd,SaleActions:tu},data(){return{allowedLimit:[5,10,20,50,100,300,500],currentPage:1,paginationLimit:50,todayDate:null,selected:[],isAllSelected:!1,columns:["id","date","city","products","client","confirmation","affectation","delivery","price","actions"]}},watch:{selectedReset(t){this.selected=t,0==this.selected.length&&(this.isAllSelected=!1)},paginationLimit(){this.currentPage=1},selected(t){this.$emit("selected",t)}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.sales.length/this.paginationLimit)},items(){const t=[...this.reportedForToday,...this.sales.filter((t=>!this.isReportedToday(t)))];return t.slice(this.prevRange,this.nextRange)},reportedForToday(){return this.sales.filter(this.isReportedToday)}},methods:{getPrice(t){return Mi(t)},isReportedToday(t){return this.isConfirmationReportedToday(t)||this.isDeliveryReportedToday(t)},isDeliveryReportedToday(t){return"reporter"==t.delivery&&t.reported_delivery_date?.split("T")[0]==this.todayDate},isConfirmationReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date?.split("T")[0]==this.todayDate},handleSelect(t,e){t.target.checked?this.selected=[...this.selected,e]:this.selected=this.selected.filter((t=>t!=e))},isSelected(t){return this.selected.includes(t)},handleSelectAll(t){t.target.checked?this.selected=[...this.items.map((t=>t.id))]:this.selected=[]}},mounted(){const t=new Date,e=t.getDate(),r=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,s=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();this.todayDate=`${i}-${s}-${r}`}};const ru=(0,d.Z)(eu,[["render",kn]]);var au=ru,su={components:{SalesTable:au},data(){return{columns:[{prop:"id",name:"#"},{prop:"city",name:"City"},{prop:"date",name:"Date"},{prop:"client",name:"Client"},{prop:"product",name:"Product"},{prop:"upsell",name:"Upsell"},{prop:"confirmation",name:"Confirmation"},{prop:"affectation",name:"Affected"},{prop:"delivery",name:"Delivery"},{prop:"quantity",name:"Qty"},{prop:"price",name:"Price"},{prop:"actions",name:"Actions"}]}},computed:{sales(){return this.$store.getters["notification/notifications"]["reportedOrderAgente"]||[]},fetched(){return this.$store.getters["notification/fetched"]}}};const iu=(0,d.Z)(su,[["render",Al]]);var ou=iu;const lu={key:0};function nu(t,e,r,a,i,o){const l=(0,s.up)("SalesTable");return o.fetched?((0,s.wg)(),(0,s.iD)("div",lu,[((0,s.wg)(),(0,s.j4)(l,{key:o.sales.length,columns:i.columns,sales:o.sales},null,8,["columns","sales"]))])):(0,s.kq)("",!0)}var du={components:{SalesTable:au},data(){return{columns:[{prop:"id",name:"#"},{prop:"city",name:"City"},{prop:"date",name:"Date"},{prop:"client",name:"Client"},{prop:"product",name:"Product"},{prop:"upsell",name:"Upsell"},{prop:"confirmation",name:"Confirmation"},{prop:"affectation",name:"Affected"},{prop:"delivery",name:"Delivery"},{prop:"quantity",name:"Qty"},{prop:"price",name:"Price"},{prop:"actions",name:"Actions"}]}},computed:{sales(){return this.$store.getters["notification/notifications"]["reportedOrderDelivery"]||[]},fetched(){return this.$store.getters["notification/fetched"]}}};const wu=(0,d.Z)(du,[["render",nu]]);var cu=wu;function uu(t,e,r,a,i,o){const l=(0,s.up)("ProductsTable");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(l,{columns:i.columns,products:o.products},null,8,["columns","products"])])}const pu={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},mu={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},hu={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},gu=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),fu={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},vu=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),yu={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},xu={class:"tw-px-6 tw-py-4"},bu={class:"tw-px-6 tw-py-4"},_u={class:"tw-px-6 tw-py-4"},ku={class:"tw-px-6 tw-py-4"},Cu={class:"tw-px-6 tw-py-4"},Du={class:"tw-px-6 tw-py-4"},Su={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},zu={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},Uu={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},Lu=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),Pu=["value"],Au={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},$u={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},Wu={class:"tw-text-white"};function qu(t,e,r,i,o,l){const n=(0,s.up)("ProductActions");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",pu,[(0,s._)("table",mu,[(0,s._)("thead",hu,[(0,s._)("tr",null,[gu,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",fu,(0,Q.zw)(t.name),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.products,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[vu,(0,s._)("th",yu,(0,Q.zw)(t.id),1),(0,s._)("td",xu,(0,Q.zw)(t.ref),1),(0,s._)("td",bu,(0,Q.zw)(t.name),1),(0,s._)("td",_u,(0,Q.zw)(t.buying_price)+" "+(0,Q.zw)(o.currency),1),(0,s._)("td",ku,(0,Q.zw)(t.selling_price)+" "+(0,Q.zw)(o.currency),1),(0,s._)("td",Cu,(0,Q.zw)(l.calculQty(t.variations)),1),(0,s._)("td",Du,(0,Q.zw)(t.created_at.split("T")[0]),1),(0,s._)("td",Su,[(0,s.Wm)(n,{product:t},null,8,["product"])])])))),128))])])]),(0,s._)("div",zu,[(0,s._)("div",Uu,[Lu,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,Pu)))),128))],512),[[a.bM,o.paginationLimit]])]),(0,s._)("div",Au,[(0,s._)("div",$u,(0,Q.zw)(l.prevRange+1)+" - "+(0,Q.zw)(o.currentPage==l.pageCount?r.products.length:l.nextRange)+" of "+(0,Q.zw)(r.products.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.pageCount,(t=>((0,s.wg)(),(0,s.j4)(G.T,{onClick:e=>o.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==o.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",Wu,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const Ou={class:"tw-flex tw-items-center tw-gap-1"};function Eu(t,e,r,a,i,o){const l=(0,s.up)("popup");return(0,s.wg)(),(0,s.iD)("div",Ou,[t.$can("update_product")?((0,s.wg)(),(0,s.j4)(G.T,{key:0,to:"/products/update/"+r.product.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1},8,["to"])):(0,s.kq)("",!0),t.$can("view_product")?((0,s.wg)(),(0,s.j4)(G.T,{key:1,to:"/products/"+r.product.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-eye-outline")])),_:1})])),_:1},8,["to"])):(0,s.kq)("",!0),t.$can("delete_product")?((0,s.wg)(),(0,s.j4)(G.T,{key:2,onClick:e[0]||(e[0]=t=>i.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(l,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this product?</p> You won't be able to revert this!",loading:i.isLoading,visible:i.showPopup,onResolved:o.handleResolved},null,8,["loading","visible","onResolved"])])}var Tu={props:["rowIndex","product"],name:"productActions",data(){return{showPopup:!1,isLoading:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,ea["delete"](this.product.id).then((t=>{"PRODUCT_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Product Deleted Successfully"})),ea.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("product/setProducts",t.data.data.products)})).catch(this.$handleApiError)})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const Vu=(0,d.Z)(Tu,[["render",Eu]]);var Iu=Vu,Fu={props:["columns","products"],components:{ProductActions:Iu},data(){return{currency:R,allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.products.length/this.paginationLimit)},items(){return this.products.slice(this.prevRange,this.nextRange)}},methods:{calculQty(t){let e=0;return t.forEach((t=>{e+=t.quantity})),e}}};const Ru=(0,d.Z)(Fu,[["render",qu]]);var ju=Ru,Nu={components:{ProductsTable:ju},data(){return{columns:[{prop:"id",name:"#"},{prop:"ref",name:"Ref"},{prop:"name",name:"Name"},{prop:"buying_price",name:"Buying Price"},{prop:"selling_price",name:"Selling Price"},{prop:"quantity",name:"Qty"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{products(){return this.$store.getters["notification/notifications"]["productStockAlert"]||[]},fetched(){return this.$store.getters["notification/fetched"]}}};const Mu=(0,d.Z)(Nu,[["render",uu]]);var Hu=Mu,Yu={components:{StockAlertView:Hu,ReportedDelivery:cu,ReportedConfirmation:ou},data(){return{tab:1,fullTabs:[{id:1,name:"Stock Alert",component:"StockAlertView",permissions:["admin"]},{id:2,name:"Deliveries",component:"ReportedDelivery",permissions:["admin..","delivery"]},{id:3,name:"Confirmations",component:"ReportedConfirmation",permissions:["admin..","agente"]}]}},computed:{tabs(){return this.fullTabs.filter((t=>t.permissions.includes(this.user.role)))},tabName(){return this.$route.params.tab},user(){return this.$store.getters["user/user"]}},watch:{tabName(){this.handleChange()}},methods:{handleChange(){switch(this.tabName){case"stock":this.tab=1;break;case"delivery":this.tab=2;break;case"confirmation":this.tab=3;break;default:this.tab=this.tabs[0].id||1;break}}},mounted(){this.handleChange()}};const Zu=(0,d.Z)(Yu,[["render",Ll]]);var Ku=Zu,Bu={path:"/",name:"home",component:sa,meta:{module:"dashboard"},children:[{path:"",name:"dashboard",component:tl,meta:{module:"dashboard",title:"Dashboard",gate:"all"}},{path:"/notifications/:tab",name:"notifications",component:Ku,meta:{module:"notification",title:"Notifications",gate:"all"}},{path:"/settings",name:"settings",component:Dl,meta:{module:"settings",title:"Settings",gate:"all"}}]};const Qu={class:"mb-5 tw-flex tw-justify-between tw-items-center"},Gu=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Product List"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your products")],-1),Ju={key:0},Xu=(0,s._)("span",{class:"text-white"}," Add Product ",-1),tp={key:0},ep={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},rp={class:"mb-5 tw-flex"},ap={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},sp={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},ip={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},op=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),lp={class:"tw-relative"},np={class:""};function dp(t,e,r,i,o,l){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("ProductsTable");return(0,s.wg)(),(0,s.iD)("div",{key:l.products.length},[(0,s._)("div",Qu,[Gu,t.$can("create_product")?((0,s.wg)(),(0,s.iD)("div",Ju,[(0,s.Wm)(G.T,{color:"primary-color",link:"",to:{name:"product/add"},variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),Xu])),_:1})])):(0,s.kq)("",!0)]),l.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",tp,[(0,s.Wm)(n)])),l.fetched?((0,s.wg)(),(0,s.iD)("div",ep,[(0,s._)("div",rp,[(0,s.Wm)(G.T,{onClick:e[0]||(e[0]=t=>o.showFilters=!o.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",ap,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,o.search]])])]),(0,s._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":o.showFilters}])},[(0,s._)("div",sp,[(0,s._)("div",ip,[op,(0,s._)("div",lp,[(0,s.wy)((0,s._)("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=t=>o.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[a.nr,o.date]])])])])],2),(0,s._)("div",np,[(0,s.Wm)(d,{columns:o.columns,products:l.filteredProducts},null,8,["columns","products"])])])):(0,s.kq)("",!0)])}var wp={components:{ProductsTable:ju},data(){return{localUrl:I,confirmations:Pn,showFilters:!1,date:null,search:"",columns:[{prop:"id",name:"#"},{prop:"ref",name:"Ref"},{prop:"name",name:"Name"},{prop:"buying_price",name:"Buying Price"},{prop:"selling_price",name:"Selling Price"},{prop:"quantity",name:"Qty"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{products(){return this.$store.getters["product/products"]},fetched(){return this.$store.getters["product/fetched"]},filteredProducts(){const t=this.date;return this.products.filter((e=>(!t||e?.created_at.split("T")[0]===t)&&!!(e.ref.toLowerCase().includes(this.search.toLowerCase())||e.name.toLowerCase().includes(this.search.toLowerCase())||e.description.toLowerCase().includes(this.search.toLowerCase()))))}},methods:{getProducts(){ea.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.fetched||this.getProducts()}};const cp=(0,d.Z)(wp,[["render",dp]]);var up=cp,pp=r(240),mp=r(4842);const hp=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Add Product "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create new product")],-1),gp={key:0},fp={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},vp={class:"tw-w-full"},yp=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Product Name ",-1),xp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},bp={class:"tw-w-full"},_p=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reference",-1),kp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Cp={class:"tw-w-full"},Dp={class:"mb-1 text-body-2 tw-text-zinc-700"},Sp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},zp={class:"mb-1 text-body-2 tw-text-zinc-700"},Up={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Lp=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Description ",-1),Pp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Ap={class:"tw-w-full tw-flex tw-gap-10 tw-items-center"},$p=(0,s._)("span",null,"Add Variants: ",-1),Wp={class:"tw-h-fit tw-mb-"},qp=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Warehouse",-1),Op={class:"tw-relative"},Ep=(0,s._)("option",{value:0},"Select",-1),Tp=["value"],Vp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Ip={key:0},Fp={class:"md:tw-col-span-3 tw-col-span-12"},Rp=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),jp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Np={class:"md:tw-col-span-3 tw-col-span-12"},Mp=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Stock Alert",-1),Hp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Yp={key:1},Zp={class:"tw-grid tw-grid-cols-12 md:tw-gap-3"},Kp={class:"md:tw-col-span-3 tw-col-span-12"},Bp=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Size",-1),Qp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Gp={class:"md:tw-col-span-3 tw-col-span-12"},Jp=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Color",-1),Xp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},tm={class:"md:tw-col-span-3 tw-col-span-12"},em=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),rm=(0,s._)("div",{class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},null,-1),am={class:"md:tw-col-span-3 tw-col-span-12"},sm=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Stock Alert",-1),im={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},om={class:"tw-col-span-12 tw-flex tw-justify-end"},lm=["disabled"],nm=(0,s._)("span",{class:"tw-text-white"},"Add",-1),dm={class:""},wm={class:"tw-flex tw-justify-between tw-items-center tw-mt-5"},cm=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variants",-1),um={class:"mb-1 text-body-2 tw-text-zinc-700"},pm={key:1,class:"tw-max-w-full tw-overflow-x-auto"},mm={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},hm={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},gm={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},fm={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},vm={class:"tw-px-6 tw-py-2"},ym={class:"tw-px-6 tw-py-2"},xm={class:"tw-px-6 tw-py-2"},bm={class:"tw-flex tw-items-center tw-px-6 tw-py-2 tw-space-x-3"},_m=(0,s._)("h1",{class:"tw-font-medium"},"Deliveries",-1),km={class:"tw-mt-2"},Cm=(0,s._)("h1",{class:"tw-font-medium"},"Image",-1),Dm={class:"tw-grid tw-grid-cols-12 tw-gap-5 tw-mt-2"},Sm={class:"md:tw-col-span-6 tw-col-span-12 tw-relative tw-h-fit"},zm={title:"Click to upload",for:"button2",class:"tw-cursor-pointer tw-flex tw-items-center tw-gap-4 tw-px-6 tw-py-4 before:border-gray-400/60 hover:before:tw-border-gray-300 group dark:before:bg-darker dark:hover:before:tw-border-gray-500 before:tw-bg-gray-100 dark:before:tw-border-gray-600 before:tw-absolute before:tw-inset-0 before:tw-rounded-lg before:tw-border before:tw-border-dashed before:tw-transition-transform before:tw-duration-300 hover:before:tw-scale-100 active:tw-duration-75 active:before:tw-scale-95"},Um={class:"tw-w-max tw-relative"},Lm=(0,s._)("div",{class:"tw-relative"},[(0,s._)("span",{class:"tw-block tw-text-base tw-font-semibold tw-relative tw-text-orange-600"}," Upload a file "),(0,s._)("span",{class:"tw-mt-0.5 tw-block tw-text-sm tw-text-gray-500 dark:tw-text-gray-400"},"Max 2 MB")],-1),Pm={class:"md:tw-col-span-6 tw-col-span-12"},Am={class:"image-preview tw-w-full tw-flex tw-items-center tw-justify-center tw-h-full border rounded p-4"},$m=(0,s._)("span",null,"No image available",-1),Wm=[$m],qm={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Om=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),Em=(0,s._)("span",{class:"text-white text-capitalize"},"Create",-1);function Tm(t,e,r,i,o,l){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("VariantActions"),w=(0,s.up)("ProductOffers");return(0,s.wg)(),(0,s.iD)("div",null,[hp,o.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",gp,[(0,s.Wm)(n)])),o.isLoaded?((0,s.wg)(),(0,s.iD)("div",fp,[(0,s._)("div",null,[(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",vp,[yp,(0,s.Wm)(tt.hw,{error:!o.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("name")),"hide-details":!0,modelValue:o.product.name,"onUpdate:modelValue":e[1]||(e[1]=t=>o.product.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",xp,(0,Q.zw)(o.formStatus.name.message),1)])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",bp,[_p,(0,s.Wm)(tt.hw,{error:!o.formStatus.reference.valid,onKeyup:e[2]||(e[2]=t=>l.resetError("reference")),"hide-details":!0,modelValue:o.product.reference,"onUpdate:modelValue":e[3]||(e[3]=t=>o.product.reference=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",kp,(0,Q.zw)(o.formStatus.reference.message),1)])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",Cp,[(0,s._)("div",Dp," Buying Price ("+(0,Q.zw)(o.currency)+") ",1),(0,s.Wm)(tt.hw,{type:"number",onChange:l.handleBuyingPriceChange,error:!o.formStatus.buyingPrice.valid,onKeyup:e[4]||(e[4]=t=>l.resetError("buyingPrice")),"hide-details":!0,modelValue:o.product.buyingPrice,"onUpdate:modelValue":e[5]||(e[5]=t=>o.product.buyingPrice=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",Sp,(0,Q.zw)(o.formStatus.buyingPrice.message),1)])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",zp," Selling Price ("+(0,Q.zw)(o.currency)+") ",1),(0,s.Wm)(tt.hw,{type:"number",onChange:l.handleSellingPriceChange,error:!o.formStatus.sellingPrice.valid,onKeyup:e[6]||(e[6]=t=>l.resetError("sellingPrice")),"hide-details":!0,modelValue:o.product.sellingPrice,"onUpdate:modelValue":e[7]||(e[7]=t=>o.product.sellingPrice=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",Up,(0,Q.zw)(o.formStatus.sellingPrice.message),1)])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[Lp,(0,s.Wm)(mp.z,{error:!o.formStatus.description.valid,onKeyup:e[8]||(e[8]=t=>l.resetError("description")),"hide-details":!0,modelValue:o.product.description,"onUpdate:modelValue":e[9]||(e[9]=t=>o.product.description=t),variant:"outlined",density:"compact",color:"primary-color"},null,8,["error","modelValue"]),(0,s._)("div",Pp,(0,Q.zw)(o.formStatus.description.message),1)])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-0",cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",Ap,[$p,(0,s.Wm)(el.G,{modelValue:o.addVariants,"onUpdate:modelValue":e[10]||(e[10]=t=>o.addVariants=t),color:"primary-color","hide-details":!0},null,8,["modelValue"])])])),_:1})])),_:1})])),_:1}),(0,s.Wm)(na.D,{cols:"12",md:"6",class:"tw-border-l tw-border-r-neutral-700 tw-py-2"},{default:(0,s.w5)((()=>[(0,s._)("div",Wp,[qp,(0,s._)("div",Op,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[11]||(e[11]=t=>o.warehouse=t),onChange:e[12]||(e[12]=t=>l.resetError("warehouse")),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-400 tw-outline-0 tw-text-sm"},[Ep,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.warehouses,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.id},(0,Q.zw)(t.name),9,Tp)))),128))],544),[[a.bM,o.warehouse]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})]),(0,s._)("div",Vp,(0,Q.zw)(o.formStatus.warehouse.message),1)]),o.addVariants?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Ip,[(0,s._)("div",Fp,[Rp,(0,s.Wm)(tt.hw,{onChange:l.handleQuantityChange,type:"number",error:!o.formStatus.quantity.valid,onKeyup:e[13]||(e[13]=t=>l.resetError("quantity")),"hide-details":!0,modelValue:o.quantity,"onUpdate:modelValue":e[14]||(e[14]=t=>o.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",jp,(0,Q.zw)(o.formStatus.quantity.message),1)]),(0,s._)("div",Np,[Mp,(0,s.Wm)(tt.hw,{onChange:l.handleStockAlertChange,type:"number",error:!o.formStatus.stockAlert.valid,onKeyup:e[15]||(e[15]=t=>l.resetError("stockAlert")),"hide-details":!0,modelValue:o.stockAlert,"onUpdate:modelValue":e[16]||(e[16]=t=>o.stockAlert=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",Hp,(0,Q.zw)(o.formStatus.stockAlert.message),1)])])),o.addVariants?((0,s.wg)(),(0,s.iD)("div",Yp,[(0,s._)("div",Zp,[(0,s._)("div",Kp,[Bp,(0,s.Wm)(tt.hw,{error:!o.formStatus.size.valid,onKeyup:e[17]||(e[17]=t=>l.resetError("size")),"hide-details":!0,modelValue:o.size,"onUpdate:modelValue":e[18]||(e[18]=t=>o.size=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",Qp,(0,Q.zw)(o.formStatus.size.message),1)]),(0,s._)("div",Gp,[Jp,(0,s.Wm)(tt.hw,{error:!o.formStatus.color.valid,onKeyup:e[19]||(e[19]=t=>l.resetError("color")),"hide-details":!0,modelValue:o.color,"onUpdate:modelValue":e[20]||(e[20]=t=>o.color=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",Xp,(0,Q.zw)(o.formStatus.color.message),1)]),(0,s._)("div",tm,[em,(0,s.Wm)(tt.hw,{onChange:l.handleQuantityChange,type:"number",error:!o.formStatus.quantity.valid&&!1,onKeyup:e[21]||(e[21]=t=>l.resetError("quantity")),"hide-details":!0,modelValue:o.quantity,"onUpdate:modelValue":e[22]||(e[22]=t=>o.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),rm]),(0,s._)("div",am,[sm,(0,s.Wm)(tt.hw,{onChange:l.handleStockAlertChange,type:"number",error:!o.formStatus.stockAlert.valid,onKeyup:e[23]||(e[23]=t=>l.resetError("stockAlert")),"hide-details":!0,modelValue:o.stockAlert,"onUpdate:modelValue":e[24]||(e[24]=t=>o.stockAlert=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",im,(0,Q.zw)(o.formStatus.stockAlert.message),1)])]),(0,s._)("div",null,[(0,s._)("div",om,[(0,s._)("button",{disabled:!o.quantity,class:(0,Q.C_)([{"bg-primary-color":o.quantity},"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"]),onClick:e[25]||(e[25]=(...t)=>l.addVariant&&l.addVariant(...t))},[(0,s.Wm)(X.t,{size:"small",color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1}),nm],10,lm)])]),(0,s._)("div",dm,[(0,s._)("div",wm,[cm,(0,s._)("div",um," Quantity Total: "+(0,Q.zw)(l.qtyTotal),1)]),0==o.variants.length?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([{"tw-bg-neutral-100 tw-text-neutral-500":o.formStatus.variants.valid,"tw-bg-red-100 tw-text-red-500":!o.formStatus.variants.valid},"tw-text-center tw-mb-6 tw-w-full tw-py-3 tw-rounded-lg"])},(0,Q.zw)(o.formStatus.variants.valid?"No Variants yet":o.formStatus.variants.message),3)):((0,s.wg)(),(0,s.iD)("div",pm,[(0,s._)("table",mm,[(0,s._)("thead",hm,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["size","color","qty","stockAlert","actions"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",gm,(0,Q.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.variants,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,s._)("th",fm,(0,Q.zw)(t.size),1),(0,s._)("td",vm,(0,Q.zw)(t.color),1),(0,s._)("td",ym,(0,Q.zw)(t.quantity),1),(0,s._)("td",xm,(0,Q.zw)(t.stockAlert),1),(0,s._)("td",bm,[(0,s._)("div",null,[(0,s.Wm)(d,{onDelete:l.deleteVariant,variant:t},null,8,["onDelete","variant"])])])])))),128))])])]))])])):(0,s.kq)("",!0)])),_:1})])),_:1}),(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[_m,(0,s._)("div",km,[(0,s.Wm)(pp.r,{modelValue:o.selectedDeliveries,"onUpdate:modelValue":e[26]||(e[26]=t=>o.selectedDeliveries=t),items:l.deliveries,"item-title":"fullname","item-value":"id","hide-details":!0,chips:"",multiple:"",variant:"outlined"},null,8,["modelValue","items"])])])])),_:1}),(0,s.Wm)(na.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(w,{offers:o.offers,"onUpdate:offers":e[27]||(e[27]=t=>o.offers=t)},null,8,["offers"])])])),_:1}),(0,s.Wm)(na.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[Cm,(0,s._)("div",Dm,[(0,s._)("div",Sm,[(0,s._)("label",zm,[(0,s._)("div",Um,[(0,s.Wm)(X.t,{class:"tw-text-6xl tw-text-orange-500"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-progress-upload")])),_:1})]),Lm]),(0,s._)("input",{onChange:e[28]||(e[28]=(...t)=>l.handleImageChange&&l.handleImageChange(...t)),class:"tw-hidden",type:"file",name:"button2",id:"button2"},null,32)]),(0,s._)("div",Pm,[(0,s._)("div",Am,[(0,s._)("img",{class:(0,Q.C_)([{"tw-hidden":!o.image},"w-full h-full tw-object-contain"]),ref:"image",id:"image-preview",alt:"Image Preview"},null,2),(0,s._)("div",{class:(0,Q.C_)([{"tw-hidden":!!o.image},"bg-gray-300 h-48 flex items-center justify-center"])},Wm,2)])])])])])),_:1})])),_:1})]),(0,s._)("div",qm,[(0,s.Wm)(G.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[Om])),_:1}),(0,s.Wm)(G.T,{onClick:l.create,loading:o.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[Em])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}function Vm(t,e,r,a,i,o){const l=(0,s.up)("popup"),n=(0,s.up)("UpdateProductVariant"),d=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(G.T,{onClick:e[0]||(e[0]=t=>i.visible=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1}),(0,s.Wm)(G.T,{onClick:e[1]||(e[1]=t=>i.deletePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1}),(0,s.Wm)(l,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this product?</p> You won't be able to revert this!",visible:i.deletePopup,onResolved:o.handleDelete},null,8,["visible","onResolved"]),(0,s.Wm)(d,{visible:i.visible,onCancel:o.cancel},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{onUpdate:o.update,variant:r.variant,onCancel:o.cancel},null,8,["onUpdate","variant","onCancel"])])),_:1},8,["visible","onCancel"])])}const Im={class:"md:tw-w-[400px] tw-w-[95%] tw-bg-white tw-rounded-lg tw-p-5 tw-mx-auto"},Fm={class:"tw-grid tw-grid-cols-12 md:tw-gap-3"},Rm={class:"tw-col-span-12"},jm=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Size",-1),Nm={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Mm={class:"tw-col-span-12"},Hm=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Color",-1),Ym={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Zm={class:"tw-col-span-12"},Km=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),Bm={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Qm={class:"tw-col-span-12"},Gm=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Stock Alert",-1),Jm={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Xm={class:"tw-col-span-12 tw-flex tw-gap-2 tw-justify-end"},th=(0,s._)("span",{class:"tw-text-white"},"Cancel",-1),eh=[th],rh=["disabled"],ah=(0,s._)("span",{class:"tw-text-white"},"Save",-1),sh=[ah];function ih(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",Im,[(0,s._)("div",Fm,[(0,s._)("div",Rm,[jm,(0,s.Wm)(tt.hw,{error:!i.formStatus.size.valid,onKeyup:e[0]||(e[0]=t=>o.resetError("size")),"hide-details":!0,modelValue:i.size,"onUpdate:modelValue":e[1]||(e[1]=t=>i.size=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",Nm,(0,Q.zw)(i.formStatus.size.message),1)]),(0,s._)("div",Mm,[Hm,(0,s.Wm)(tt.hw,{error:!i.formStatus.color.valid,onKeyup:e[2]||(e[2]=t=>o.resetError("color")),"hide-details":!0,modelValue:i.color,"onUpdate:modelValue":e[3]||(e[3]=t=>i.color=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",Ym,(0,Q.zw)(i.formStatus.color.message),1)]),(0,s._)("div",Zm,[Km,(0,s.Wm)(tt.hw,{onChange:o.handleQuantityChange,type:"number",error:!i.formStatus.quantity.valid,onKeyup:e[4]||(e[4]=t=>o.resetError("quantity")),"hide-details":!0,modelValue:i.quantity,"onUpdate:modelValue":e[5]||(e[5]=t=>i.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",Bm,(0,Q.zw)(i.formStatus.quantity.message),1)]),(0,s._)("div",Qm,[Gm,(0,s.Wm)(tt.hw,{onChange:o.handleStockAlertChange,type:"number",error:!i.formStatus.stockAlert.valid,onKeyup:e[6]||(e[6]=t=>o.resetError("stockAlert")),"hide-details":!0,modelValue:i.stockAlert,"onUpdate:modelValue":e[7]||(e[7]=t=>i.stockAlert=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",Jm,(0,Q.zw)(i.formStatus.stockAlert.message),1)])]),(0,s._)("div",null,[(0,s._)("div",Xm,[(0,s._)("button",{onClick:e[8]||(e[8]=(...t)=>o.cancel&&o.cancel(...t)),class:"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"},eh),(0,s._)("button",{disabled:!i.quantity,class:(0,Q.C_)([{"tw-bg-orange-500":i.quantity},"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"]),onClick:e[9]||(e[9]=(...t)=>o.updateVariant&&o.updateVariant(...t))},sh,10,rh)])])])}var oh={props:["variant"],data(){return{size:"",color:"",quantity:0,stockAlert:0,newVariant:null,formStatus:{quantity:{valid:!0,message:""},size:{valid:!0,message:""},color:{valid:!0,message:""},stockAlert:{valid:!0,message:""}}}},methods:{updateVariant(){console.log("updated");const t=this.quantity-this.newVariant.quantity;this.newVariant.size=this.size?this.size.toLocaleUpperCase():"",this.newVariant.color=this.color?this.color.toLocaleUpperCase():"",this.newVariant.quantity=this.quantity,this.newVariant.stockAlert=this.stockAlert,this.newVariant.available_quantity=parseInt(this.newVariant.available_quantity)+parseInt(t),this.cancel()},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},handleStockAlertChange(){this.stockAlert<=0&&(this.stockAlert=0)},cancel(){this.$emit("cancel")},resetError(t){this.formStatus[t]={valid:!0,message:""}}},mounted(){this.size=this.variant.size,this.color=this.variant.color,this.quantity=this.variant.quantity,this.stockAlert=this.variant.stockAlert,this.newVariant=this.variant}};const lh=(0,d.Z)(oh,[["render",ih]]);var nh=lh,dh={components:{UpdateProductVariant:nh},props:["variant"],data(){return{visible:!1,deletePopup:!1}},methods:{cancel(){this.visible=!1},update(t){console.log("from actions: ",t)},handleDelete(t){t&&this.$emit("delete",this.variant.id),this.deletePopup=!1}}};const wh=(0,d.Z)(dh,[["render",Vm]]);var ch=wh;class uh{async create(t){return await Y.getCookie(),M.post("api/warehouses/new",{name:t.name})}async update(t,e){return await Y.getCookie(),M.post("api/warehouses/update/"+t,{name:e.name})}async all(){return await Y.getCookie(),M.get("api/warehouses")}async getWarehouse(t){return await Y.getCookie(),M.get("api/warehouses/"+t)}async delete(t){return await Y.getCookie(),M["delete"]("api/warehouses/delete/"+t)}}var ph=new uh;const mh=(0,s._)("h1",{class:"tw-font-medium"},"Offers",-1),hh={class:"tw-grid tw-grid-cols-12 tw-mb-5 tw-mt-3 tw-gap-3"},gh={class:"md:tw-col-span-3 tw-col-span-12"},fh=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),vh={class:"md:tw-col-span-3 tw-col-span-12"},yh=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Price",-1),xh={class:"md:tw-col-span-5 tw-col-span-12"},bh=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note",-1),_h={class:"md:tw-col-span-1 tw-col-span-12"},kh=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-transparent"},"Note",-1),Ch={class:"tw-mt-2"},Dh={class:"tw-relative tw-overflow-x-auto tw-shadow sm:tw-rounded"},Sh={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},zh=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Quantity"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Price"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Note"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-24"},"Action")])],-1),Uh={class:"tw-px-6 tw-py-4"},Lh={class:"tw-px-6 tw-py-4"},Ph={class:"tw-px-6 tw-py-4"},Ah={class:"tw-max-w-[250px] tw-text-sm"},$h={class:"tw-px-6 tw-py-4"},Wh={key:0},qh=(0,s._)("td",{colspan:"5"},[(0,s._)("p",{class:"tw-text-center tw-p-5"}," No Offers ")],-1),Oh=[qh];function Eh(t,e,r,a,i,o){const l=(0,s.up)("popup");return(0,s.wg)(),(0,s.iD)("div",null,[mh,(0,s._)("div",hh,[(0,s._)("div",gh,[fh,(0,s.Wm)(tt.hw,{type:"number","hide-details":!0,modelValue:i.quantity,"onUpdate:modelValue":e[0]||(e[0]=t=>i.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"])]),(0,s._)("div",vh,[yh,(0,s.Wm)(tt.hw,{type:"number","hide-details":!0,modelValue:i.price,"onUpdate:modelValue":e[1]||(e[1]=t=>i.price=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"])]),(0,s._)("div",xh,[bh,(0,s.Wm)(tt.hw,{type:"text","hide-details":!0,modelValue:i.note,"onUpdate:modelValue":e[2]||(e[2]=t=>i.note=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"])]),(0,s._)("div",_h,[kh,(0,s.Wm)(G.T,{onClick:o.handleAdd,class:"mx-auto !tw-px-0 !tw-py-0","min-height":"40px","min-width":"40",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1})])),_:1},8,["onClick"])])]),(0,s._)("div",Ch,[(0,s._)("div",Dh,[(0,s._)("table",Sh,[zh,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.offers,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.key,class:"odd:tw-bg-white even:tw-bg-gray-50 tw-border-b"},[(0,s._)("td",Uh,(0,Q.zw)(t.quantity),1),(0,s._)("td",Lh,(0,Q.zw)(t.price)+" "+(0,Q.zw)(i.currency),1),(0,s._)("td",Ph,[(0,s._)("p",Ah,(0,Q.zw)(t.note),1)]),(0,s._)("td",$h,[(0,s.Wm)(G.T,{onClick:e=>o.handleDeleteClicked(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])))),128)),0==r.offers.length?((0,s.wg)(),(0,s.iD)("tr",Wh,Oh)):(0,s.kq)("",!0)])])])]),(0,s.Wm)(l,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this offer?</p> You won't be able to revert this!",visible:i.deletePopup,onResolved:o.handleDelete},null,8,["visible","onResolved"])])}var Th={props:["offers"],data(){return{currency:R,deletePopup:!1,toDeleteID:null,quantity:1,price:0,note:""}},methods:{handleDeleteClicked(t){this.toDeleteID=t,this.deletePopup=!0},handleDelete(t){if(this.deletePopup=!1,!t)return!1;this.$emit("update:offers",this.offers.filter((t=>t.id!=this.toDeleteID)))},handleAdd(){const t=this.offers.length>0?this.offers[this.offers.length-1].id:0,e=t+1,r={id:e,quantity:this.quantity,price:this.price,note:this.note};this.$emit("update:offers",[...this.offers,r]),this.quantity=1,this.price=0,this.note=""}}};const Vh=(0,d.Z)(Th,[["render",Eh]]);var Ih=Vh,Fh={components:{VariantActions:ch,ProductOffers:Ih},data(){return{currency:R,isLoading:!1,isLoaded:!1,addVariants:!1,variantId:1,variants:[],image:"",imageFile:null,color:"",size:"",quantity:0,warehouse:0,stockAlert:0,offers:[],product:{name:"",reference:"",buyingPrice:0,sellingPrice:0,description:""},selectedDeliveries:[],formStatus:{name:{valid:!0,message:""},reference:{valid:!0,message:""},buyingPrice:{valid:!0,message:""},sellingPrice:{valid:!0,message:""},quantity:{valid:!0,message:""},size:{valid:!0,message:""},color:{valid:!0,message:""},stockAlert:{valid:!0,message:""},description:{valid:!0,message:""},warehouse:{valid:!0,message:""},variants:{valid:!0,message:""}}}},computed:{qtyTotal(){let t=0;return this.variants.forEach((e=>t+=parseInt(e.quantity))),t},warehouses(){return this.$store.getters["warehouse/warehouses"]},users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>"delivery"==t.role?.name)).map((t=>({...t,fullname:t.firstname+" "+t.lastname})))}},methods:{create(){if(!this.validate())return!1;this.isLoading=!0;let t=this.product;if(t.addVariants=this.addVariants,t.image=this.image,t.offers=this.offers,t.selectedDeliveries=this.selectedDeliveries.map((t=>({delivery_id:t}))),this.addVariants)t.variants=this.variants;else{const e=[{id:this.variantId,color:null,size:null,quantity:this.quantity,warehouse_id:this.warehouse,stockAlert:this.stockAlert}];t.variants=e}ea.create(t).then((t=>{"PRODUCT_CREATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.product={name:"",reference:"",buyingPrice:0,sellingPrice:0,description:""},this.offers=[],this.selectedDeliveries=[],this.variants=[],this.$store.dispatch("product/addProduct",t.data.data.product)),"VALIDATION_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.errors.ref})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},handleImageChange(t){const e=t.target.files[0];this.image=e;const r=this.$refs.image;if(e){const t=new FileReader;t.addEventListener("load",(function(){r.src=this.result})),t.readAsDataURL(e)}},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=_t(this.product.name,"Product name"),this.formStatus.reference=_t(this.product.reference,"Reference"),this.formStatus.buyingPrice=_t(this.product.buyingPrice,"Buying price"),this.formStatus.quantity=_t(this.quantity,"Quantity"),this.formStatus.sellingPrice=_t(this.product.sellingPrice,"Selling price"),this.formStatus.description=_t(this.product.description,"Description"),this.formStatus.variants=Dt(this.variants),this.addVariants||(this.formStatus.warehouse={valid:0!=this.warehouse,message:0!=this.warehouse?"":"Please select a warehouse"}),this.formStatus.name.valid&&this.formStatus.buyingPrice.valid&&this.formStatus.reference.valid&&this.formStatus.sellingPrice&&this.formStatus.description.valid&&(!this.addVariants||this.formStatus.variants.valid)&&(!!this.addVariants||this.formStatus.quantity.valid)&&(!!this.addVariants||this.formStatus.warehouse.valid)},addVariant(){if(this.formStatus.warehouse={valid:0!=this.warehouse,message:0!=this.warehouse?"":"Please select a warehouse"},!this.formStatus.warehouse.valid)return!1;const t={id:this.variantId,color:this.color.toUpperCase(),size:this.size.toUpperCase(),quantity:this.quantity,warehouse_id:this.warehouse,stockAlert:this.stockAlert};this.variants.push(t),this.variantId++,this.stockAlert=0,this.color="",this.size="",this.quantity=0},deleteVariant(t){this.variants=this.variants.filter((e=>e.id!==t))},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},handleStockAlertChange(){this.stockAlert<=0&&(this.stockAlert=0)},handleSellingPriceChange(){this.product.sellingPrice<=0&&(this.product.sellingPrice=0)},handleBuyingPriceChange(){this.product.buyingPrice<=0&&(this.product.buyingPrice=0)},getWarhouses(){return this.isLoaded=!1,ph.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("warehouse/setWarehouses",t.data.data.warehouses),this.isLoaded=!0)}),this.$handleApiError)}},mounted(){this.getWarhouses()}};const Rh=(0,d.Z)(Fh,[["render",Tm]]);var jh=Rh;const Nh=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Update Product "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Update product informations")],-1),Mh={key:0},Hh={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Yh={class:"tw-flex tw-gap-2 tw-text-neutral-800 tw-items-center tw-mb-5"},Zh={class:"tw-block tw-py-1 tw-px-2 tw-rounded-md text-primary-color"},Kh={class:"tw-w-full"},Bh=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Product Name ",-1),Qh={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Gh={class:"tw-w-full"},Jh=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reference",-1),Xh={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},tg={class:"tw-w-full"},eg={class:"mb-1 text-body-2 tw-text-zinc-700"},rg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},ag={class:"mb-1 text-body-2 tw-text-zinc-700"},sg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},ig=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Description ",-1),og={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},lg={class:"tw-h-fit tw-mb-"},ng=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Warehouse",-1),dg={class:"tw-relative"},wg=(0,s._)("option",{value:0},"Select",-1),cg=["value"],ug={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},pg={class:"tw-grid tw-grid-cols-12 md:tw-gap-3"},mg={class:"md:tw-col-span-3 tw-col-span-12"},hg=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Size",-1),gg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},fg={class:"md:tw-col-span-3 tw-col-span-12"},vg=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Color",-1),yg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},xg={class:"md:tw-col-span-3 tw-col-span-12"},bg=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),_g={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},kg={class:"md:tw-col-span-3 tw-col-span-12"},Cg=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Stock Alert ",-1),Dg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Sg={class:"tw-col-span-12 tw-flex tw-justify-end"},zg=["disabled"],Ug=(0,s._)("span",{class:"tw-text-white"},"Add",-1),Lg={class:""},Pg={class:"tw-flex tw-justify-between tw-items-center tw-mt-5"},Ag=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variants",-1),$g={class:"mb-1 text-body-2 tw-text-zinc-700"},Wg={key:1,class:"tw-max-w-full tw-overflow-x-auto"},qg={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Og={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},Eg={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},Tg={class:"tw-px-6 tw-py-2 tw-capitalize"},Vg={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Ig={class:"tw-px-6 tw-py-2"},Fg={class:"tw-px-6 tw-py-2"},Rg={class:"tw-flex tw-flex-col"},jg={key:0,class:"tw-text-xs tw-text-green-500"},Ng={class:"tw-px-6 tw-py-2"},Mg={class:"tw-flex tw-items-center tw-px-6 tw-py-2 tw-space-x-3"},Hg=(0,s._)("h1",null,"Deliveries",-1),Yg={class:"tw-mt-2"},Zg=(0,s._)("h1",null,"Image",-1),Kg={class:"tw-grid tw-grid-cols-12 tw-gap-5 tw-mt-2"},Bg={class:"md:tw-col-span-6 tw-col-span-12 tw-relative tw-h-fit"},Qg={title:"Click to upload",for:"button2",class:"tw-cursor-pointer tw-flex tw-items-center tw-gap-4 tw-px-6 tw-py-4 before:border-gray-400/60 hover:before:tw-border-gray-300 group dark:before:bg-darker dark:hover:before:tw-border-gray-500 before:tw-bg-gray-100 dark:before:tw-border-gray-600 before:tw-absolute before:tw-inset-0 before:tw-rounded-lg before:tw-border before:tw-border-dashed before:tw-transition-transform before:tw-duration-300 hover:before:tw-scale-100 active:tw-duration-75 active:before:tw-scale-95"},Gg={class:"tw-w-max tw-relative"},Jg=(0,s._)("div",{class:"tw-relative"},[(0,s._)("span",{class:"tw-block tw-text-base tw-font-semibold tw-relative tw-text-orange-600"}," Upload a file "),(0,s._)("span",{class:"tw-mt-0.5 tw-block tw-text-sm tw-text-gray-500 dark:tw-text-gray-400"},"Max 2 MB")],-1),Xg={class:"md:tw-col-span-6 tw-col-span-12"},tf={class:"image-preview tw-w-full tw-flex tw-items-center tw-justify-center tw-h-full border rounded p-4"},ef=["src"],rf=(0,s._)("span",null,"No image available",-1),af=[rf],sf={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},of=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),lf=(0,s._)("span",{class:"text-white text-capitalize"},"Update",-1);function nf(t,e,r,i,o,l){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("UpdateVariantActions"),w=(0,s.up)("ProductOffers");return(0,s.wg)(),(0,s.iD)("div",null,[Nh,o.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Mh,[(0,s.Wm)(n)])),o.isLoaded?((0,s.wg)(),(0,s.iD)("div",Hh,[(0,s._)("div",Yh,[(0,s.Uk)(" Product ID: "),(0,s._)("span",Zh,(0,Q.zw)(l.id),1)]),(0,s._)("div",null,[(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",Kh,[Bh,(0,s.Wm)(tt.hw,{error:!o.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("name")),"hide-details":!0,modelValue:o.product.name,"onUpdate:modelValue":e[1]||(e[1]=t=>o.product.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",Qh,(0,Q.zw)(o.formStatus.name.message),1)])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",Gh,[Jh,(0,s.Wm)(tt.hw,{error:!o.formStatus.quantity.valid,onKeyup:e[2]||(e[2]=t=>l.resetError("quantity")),"hide-details":!0,modelValue:o.product.reference,"onUpdate:modelValue":e[3]||(e[3]=t=>o.product.reference=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",Xh,(0,Q.zw)(o.formStatus.quantity.message),1)])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",tg,[(0,s._)("div",eg," Buying Price ("+(0,Q.zw)(o.currency)+") ",1),(0,s.Wm)(tt.hw,{type:"number",onChange:l.handleBuyingPriceChange,error:!o.formStatus.buyingPrice.valid,onKeyup:e[4]||(e[4]=t=>l.resetError("buyingPrice")),"hide-details":!0,modelValue:o.product.buyingPrice,"onUpdate:modelValue":e[5]||(e[5]=t=>o.product.buyingPrice=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",rg,(0,Q.zw)(o.formStatus.buyingPrice.message),1)])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",ag," Selling Price ("+(0,Q.zw)(o.currency)+") ",1),(0,s.Wm)(tt.hw,{type:"number",onChange:l.handleSellingPriceChange,error:!o.formStatus.sellingPrice.valid,onKeyup:e[6]||(e[6]=t=>l.resetError("sellingPrice")),"hide-details":!0,modelValue:o.product.sellingPrice,"onUpdate:modelValue":e[7]||(e[7]=t=>o.product.sellingPrice=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",sg,(0,Q.zw)(o.formStatus.sellingPrice.message),1)])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[ig,(0,s.Wm)(mp.z,{error:!o.formStatus.description.valid,onKeyup:e[8]||(e[8]=t=>l.resetError("description")),"hide-details":!0,modelValue:o.product.description,"onUpdate:modelValue":e[9]||(e[9]=t=>o.product.description=t),variant:"outlined",density:"compact",color:"primary-color"},null,8,["error","modelValue"]),(0,s._)("div",og,(0,Q.zw)(o.formStatus.description.message),1)])])),_:1})])),_:1})])),_:1}),(0,s.Wm)(na.D,{cols:"12",md:"12",class:"tw-border-t tw-border-t-neutral-300 tw-py-2"},{default:(0,s.w5)((()=>[(0,s._)("div",lg,[ng,(0,s._)("div",dg,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>o.warehouse=t),onChange:e[11]||(e[11]=t=>l.resetError("warehouse")),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-400 tw-outline-0 tw-text-sm"},[wg,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.warehouses,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.id},(0,Q.zw)(t.name),9,cg)))),128))],544),[[a.bM,o.warehouse]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})]),(0,s._)("div",ug,(0,Q.zw)(o.formStatus.warehouse.message),1)]),(0,s._)("div",null,[(0,s._)("div",pg,[(0,s._)("div",mg,[hg,(0,s.Wm)(tt.hw,{error:!o.formStatus.size.valid,onKeyup:e[12]||(e[12]=t=>l.resetError("size")),"hide-details":!0,modelValue:o.size,"onUpdate:modelValue":e[13]||(e[13]=t=>o.size=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",gg,(0,Q.zw)(o.formStatus.size.message),1)]),(0,s._)("div",fg,[vg,(0,s.Wm)(tt.hw,{error:!o.formStatus.color.valid,onKeyup:e[14]||(e[14]=t=>l.resetError("color")),"hide-details":!0,modelValue:o.color,"onUpdate:modelValue":e[15]||(e[15]=t=>o.color=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",yg,(0,Q.zw)(o.formStatus.color.message),1)]),(0,s._)("div",xg,[bg,(0,s.Wm)(tt.hw,{onChange:l.handleQuantityChange,type:"number",error:!o.formStatus.quantity.valid,onKeyup:e[16]||(e[16]=t=>l.resetError("quantity")),"hide-details":!0,modelValue:o.quantity,"onUpdate:modelValue":e[17]||(e[17]=t=>o.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",_g,(0,Q.zw)(o.formStatus.quantity.message),1)]),(0,s._)("div",kg,[Cg,(0,s.Wm)(tt.hw,{onChange:l.handleStockAlertChange,type:"number",error:!o.formStatus.stockAlert.valid,onKeyup:e[18]||(e[18]=t=>l.resetError("stockAlert")),"hide-details":!0,modelValue:o.stockAlert,"onUpdate:modelValue":e[19]||(e[19]=t=>o.stockAlert=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",Dg,(0,Q.zw)(o.formStatus.stockAlert.message),1)])]),(0,s._)("div",null,[(0,s._)("div",Sg,[(0,s._)("button",{disabled:!o.quantity,class:(0,Q.C_)([{"bg-primary-color":o.quantity},"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"]),onClick:e[20]||(e[20]=(...t)=>l.addVariant&&l.addVariant(...t))},[(0,s.Wm)(X.t,{size:"small",color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1}),Ug],10,zg)])]),(0,s._)("div",Lg,[(0,s._)("div",Pg,[Ag,(0,s._)("div",$g," Quantity Total: "+(0,Q.zw)(l.qtyTotal),1)]),0==o.variants.length?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([{"tw-bg-neutral-100 tw-text-neutral-500":o.formStatus.variants.valid,"tw-bg-red-100 tw-text-red-500":!o.formStatus.variants.valid},"tw-text-center tw-mb-6 tw-w-full tw-py-3 tw-rounded-lg"])},(0,Q.zw)(o.formStatus.variants.valid?"No Variants yet":o.formStatus.variants.message),3)):((0,s.wg)(),(0,s.iD)("div",Wg,[(0,s._)("table",qg,[(0,s._)("thead",Og,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["warehouse","size","color","qty","Stock Alert","actions"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",Eg,(0,Q.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.variants,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,s._)("td",Tg,(0,Q.zw)(t.warehouse.name),1),(0,s._)("td",Vg,(0,Q.zw)(t.size),1),(0,s._)("td",Ig,(0,Q.zw)(t.color),1),(0,s._)("td",Fg,[(0,s._)("div",Rg,[(0,s._)("span",null,(0,Q.zw)(t.quantity),1),t.created_at?((0,s.wg)(),(0,s.iD)("span",jg,(0,Q.zw)(t.available_quantity),1)):(0,s.kq)("",!0)])]),(0,s._)("td",Ng,(0,Q.zw)(t.stockAlert),1),(0,s._)("td",Mg,[(0,s._)("div",null,[(0,s.Wm)(d,{onDelete:l.deleteVariant,variant:t},null,8,["onDelete","variant"])])])])))),128))])])]))])])])),_:1})])),_:1}),(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[Hg,(0,s._)("div",Yg,[(0,s.Wm)(pp.r,{modelValue:o.selectedDeliveries,"onUpdate:modelValue":e[21]||(e[21]=t=>o.selectedDeliveries=t),items:l.deliveries,"item-title":"fullname","item-value":"id","hide-details":!0,chips:"",multiple:"",variant:"outlined"},null,8,["modelValue","items"])])])])),_:1}),(0,s.Wm)(na.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(w,{offers:o.offers,"onUpdate:offers":e[22]||(e[22]=t=>o.offers=t)},null,8,["offers"])])])),_:1}),(0,s.Wm)(na.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[Zg,(0,s._)("div",Kg,[(0,s._)("div",Bg,[(0,s._)("label",Qg,[(0,s._)("div",Gg,[(0,s.Wm)(X.t,{class:"tw-text-6xl tw-text-orange-500"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-progress-upload")])),_:1})]),Jg]),(0,s._)("input",{onChange:e[23]||(e[23]=(...t)=>l.handleImageChange&&l.handleImageChange(...t)),class:"tw-hidden",type:"file",name:"button2",id:"button2"},null,32)]),(0,s._)("div",Xg,[(0,s._)("div",tf,[(0,s._)("img",{class:(0,Q.C_)([{"tw-hidden":!o.image},"w-full h-full tw-object-contain"]),ref:"image",src:o.serverUrl+"storage/"+o.image,id:"image-preview",alt:"Image Preview"},null,10,ef),(0,s._)("div",{class:(0,Q.C_)([{"tw-hidden":!!o.image},"bg-gray-300 h-48 flex items-center justify-center"])},af,2)])])])])])),_:1})])),_:1})]),(0,s._)("div",sf,[(0,s.Wm)(G.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[of])),_:1}),(0,s.Wm)(G.T,{onClick:l.update,loading:o.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[lf])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}const df={class:"md:tw-w-[400px] tw-w-[95%] tw-bg-white tw-rounded-lg tw-p-5 tw-mx-auto"},wf={class:"tw-w-full"},cf=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Add quantity",-1),uf={class:"tw-col-span-12 tw-flex tw-gap-2 tw-justify-end tw-mt-3"},pf=(0,s._)("span",{class:"tw-text-white"},"Cancel",-1),mf=[pf],hf=["disabled"],gf=(0,s._)("span",{class:"tw-text-white"},"Add",-1),ff=[gf];function vf(t,e,r,a,i,o){const l=(0,s.up)("popup"),n=(0,s.up)("UpdateProductVariant"),d=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[r.variant.created_at?((0,s.wg)(),(0,s.j4)(G.T,{key:0,onClick:e[0]||(e[0]=t=>i.visibleAdd=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1})])),_:1})):(0,s.kq)("",!0),void 0===r.variant.on_hold||r.variant.available_quantity==r.variant.quantity?((0,s.wg)(),(0,s.j4)(G.T,{key:1,onClick:e[1]||(e[1]=t=>i.deletePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(G.T,{onClick:e[2]||(e[2]=t=>i.visible=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1}),(0,s.Wm)(l,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this product?</p> You won't be able to revert this!",visible:i.deletePopup,onResolved:o.handleDelete},null,8,["visible","onResolved"]),(0,s.Wm)(d,{visible:i.visible,onCancel:o.cancel},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{onUpdate:o.update,variant:r.variant,onCancel:o.cancel},null,8,["onUpdate","variant","onCancel"])])),_:1},8,["visible","onCancel"]),(0,s.Wm)(d,{visible:i.visibleAdd,onCancel:o.cancelAdd},{default:(0,s.w5)((()=>[(0,s._)("div",df,[(0,s._)("div",wf,[cf,(0,s.Wm)(tt.hw,{"hide-details":!0,modelValue:i.quantity,"onUpdate:modelValue":e[3]||(e[3]=t=>i.quantity=t),clearable:"",type:"number","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"])]),(0,s._)("div",uf,[(0,s._)("button",{onClick:e[4]||(e[4]=(...t)=>o.cancelAdd&&o.cancelAdd(...t)),class:"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"},mf),(0,s._)("button",{disabled:!i.quantity||0==i.quantity,class:(0,Q.C_)([{"!tw-bg-green-500":0!=i.quantity},"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"]),onClick:e[5]||(e[5]=(...t)=>o.addQuantity&&o.addQuantity(...t))},ff,10,hf)])])])),_:1},8,["visible","onCancel"])])}var yf={components:{UpdateProductVariant:nh},props:["variant"],data(){return{visible:!1,visibleAdd:!1,deletePopup:!1,quantity:1,newVariant:null}},methods:{cancel(){this.visible=!1},cancelAdd(){this.visibleAdd=!1},update(t){console.log("from actions: ",t)},addQuantity(){this.newVariant.quantity=parseInt(this.newVariant.quantity)+parseInt(this.quantity),this.newVariant.available_quantity=parseInt(this.newVariant.available_quantity)+parseInt(this.quantity),this.quantity=1,this.cancelAdd()},handleDelete(t){t&&this.$emit("delete",this.variant.id),this.deletePopup=!1}},mounted(){this.newVariant=this.variant}};const xf=(0,d.Z)(yf,[["render",vf]]);var bf=xf,_f={components:{UpdateVariantActions:bf,ProductOffers:Ih},data(){return{currency:R,serverUrl:F,isLoading:!1,isLoaded:!1,variantId:1,variants:[],color:"",size:"",quantity:0,stockAlert:0,image:"",imageFile:null,offers:[],warehouse:0,product:{name:"",reference:"",buyingPrice:0,sellingPrice:0,description:""},selectedDeliveries:[],formStatus:{name:{valid:!0,message:""},buyingPrice:{valid:!0,message:""},sellingPrice:{valid:!0,message:""},quantity:{valid:!0,message:""},size:{valid:!0,message:""},color:{valid:!0,message:""},stockAlert:{valid:!0,message:""},description:{valid:!0,message:""},variants:{valid:!0,message:""},warehouse:{valid:!0,message:""}}}},computed:{qtyTotal(){let t=0;return this.variants.forEach((e=>t+=parseInt(e.quantity))),t},id(){return this.$route.params.id},warehouses(){return this.$store.getters["warehouse/warehouses"]},users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>"delivery"==t.role?.name)).map((t=>({...t,fullname:t.firstname+" "+t.lastname})))}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0;let t=this.product;t.variants=this.variants,t.image=this.image,t.offers=this.offers,t.selectedDeliveries=this.selectedDeliveries.map((t=>({delivery_id:t,product_id:this.id}))),ea.update(this.$route.params.id,t).then((t=>{"PRODUCT_UPDATED"==t.data.code&&this.$alert({type:"success",title:t.data.message}),"PRODUCT_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message}),"QUANTITY_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},handleImageChange(t){const e=t.target.files[0];this.image=e;const r=this.$refs.image;if(e){const t=new FileReader;t.addEventListener("load",(function(){r.src=this.result})),t.readAsDataURL(e)}},resetError(t){this.formStatus[t]={valid:!0,message:""}},getLastVariantId(t){return Math.max(...t.map((t=>t.id)))+1},validate(){return this.formStatus.name=_t(this.product.name,"Product name"),this.formStatus.buyingPrice=_t(this.product.buyingPrice,"Buying price"),this.formStatus.sellingPrice=_t(this.product.sellingPrice,"Selling price"),this.formStatus.description=_t(this.product.description,"Description"),this.formStatus.variants=Dt(this.variants),this.formStatus.name.valid&&this.formStatus.buyingPrice.valid&&this.formStatus.sellingPrice&&this.formStatus.description.valid&&this.formStatus.variants.valid},addVariant(){if(0==this.warehouse)return this.$alert({type:"warning",title:"Select warehouse"}),!1;const t={id:this.variantId,color:this.color.toUpperCase(),size:this.size.toUpperCase(),quantity:this.quantity,warehouse_id:this.warehouse,warehouse:this.warehouses.find((t=>t.id==this.warehouse)),stockAlert:this.stockAlert};this.variants.push(t),this.variantId++,this.color="",this.size="",this.quantity=0,this.stockAlert=0},deleteVariant(t){this.variants=this.variants.filter((e=>e.id!==t))},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},handleStockAlertChange(){this.quantity<=0&&(this.quantity=0)},handleSellingPriceChange(){this.product.sellingPrice<=0&&(this.product.sellingPrice=0)},handleBuyingPriceChange(){this.product.buyingPrice<=0&&(this.product.buyingPrice=0)},getWarhouses(){return ph.all().then((t=>("SUCCESS"==t.data.code&&this.$store.dispatch("warehouse/setWarehouses",t.data.data.warehouses),t)),this.$handleApiError)},getProduct(){return ea.getProduct(this.$route.params.id).then((t=>{if("SUCCESS"==t.data.code){const{variations:e,buying_price:r,selling_price:a,ref:s,name:i,description:o,deliveries:l,image:n,offers:d}=t.data.data.products;return this.variants=e,this.product.buyingPrice=r,this.product.sellingPrice=a,this.product.name=i,this.product.reference=s,this.product.description=o,this.image=n,this.offers=d,this.variantId=this.getLastVariantId(e),this.selectedDeliveries=l.map((t=>t.delivery_id)),this.isLoaded=!0,t}}),this.$handleApiError)},getData(){this.isLoaded=!1,Promise.allSettled([this.getWarhouses(),this.getProduct()]).then((t=>{t.every((t=>"fulfilled"==t.status))&&(this.isLoaded=!0)}),this.$handleApiError)}},mounted(){this.getData()}};const kf=(0,d.Z)(_f,[["render",nf]]);var Cf=kf;const Df={class:"tw-pb-14"},Sf=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Product"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Show product informations")],-1),zf={key:0},Uf={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Lf={class:"tw-grid tw-grid-cols-12 tw-gap-2"},Pf={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},Af=(0,s._)("p",{class:"tw-font-light tw-text-neutral-500"},"Name:",-1),$f={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},Wf={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},qf=(0,s._)("p",{class:"tw-font-light tw-text-neutral-500"},"Reference:",-1),Of={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},Ef={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},Tf=(0,s._)("p",{class:"tw-font-light tw-text-neutral-500"},"Buying Price:",-1),Vf={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},If={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},Ff=(0,s._)("p",{class:"tw-font-light tw-text-neutral-500"},"Selling Price:",-1),Rf={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},jf={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},Nf=(0,s._)("p",{class:"tw-font-light tw-text-neutral-500"},"Total Delivered:",-1),Mf={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},Hf={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},Yf=(0,s._)("p",{class:"tw-font-light tw-text-neutral-500"},"Total Sent:",-1),Zf={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},Kf={class:"tw-col-span-12 md:tw-col-span-12 tw-flex tw-gap-2 tw-flex-col tw-flex-wrap"},Bf=(0,s._)("p",{class:"tw-font-light tw-text-neutral-500"},"Description:",-1),Qf={class:"tw-text-neutral-800 tw-font-medium"},Gf={key:2,class:"tw-text-neutral-700 tw-font-bold tw-mb-1 tw-mt-5"},Jf={key:3,class:"tw-border bg-white tw-w-full tw-rounded-md"},Xf={key:4,class:"tw-text-neutral-700 tw-font-bold tw-mt-5 tw-mb-1"},tv={key:5,class:"tw-overflow-hidden tw-border bg-white tw-w-full tw-rounded-md"},ev={class:"tw-max-w-full tw-overflow-auto"},rv={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},av={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},sv={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},iv={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},ov={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},lv={class:"tw-px-6 tw-py-2"},nv={class:"tw-px-6 tw-py-2"},dv={class:"tw-flex tw-flex-col"},wv={class:"tw-px-6 tw-py-2"},cv={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},uv=(0,s._)("th",{scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},null,-1),pv=(0,s._)("th",{scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},null,-1),mv=(0,s._)("td",{class:"tw-px-6 tw-py-2"},null,-1),hv={class:"tw-px-6 tw-py-2"},gv={class:"tw-flex tw-flex-col tw-font-medium"},fv=(0,s._)("td",{class:"tw-px-6 tw-py-2"},null,-1);function vv(t,e,r,a,i,o){const l=(0,s.up)("LoadingAnimation"),n=(0,s.up)("ProductTracking");return(0,s.wg)(),(0,s.iD)("div",Df,[Sf,i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",zf,[(0,s.Wm)(l)])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",Uf,[(0,s._)("div",null,[(0,s._)("div",null,[(0,s._)("div",Lf,[(0,s._)("div",Pf,[Af,(0,s._)("p",$f,(0,Q.zw)(i.product.name),1)]),(0,s._)("div",Wf,[qf,(0,s._)("p",Of,(0,Q.zw)(i.product.ref),1)]),(0,s._)("div",Ef,[Tf,(0,s._)("p",Vf,(0,Q.zw)(i.product.buying_price)+" "+(0,Q.zw)(i.currency),1)]),(0,s._)("div",If,[Ff,(0,s._)("p",Rf,(0,Q.zw)(i.product.selling_price)+" "+(0,Q.zw)(i.currency),1)]),(0,s._)("div",jf,[Nf,(0,s._)("p",Mf,(0,Q.zw)(o.qtyTotalDelivered),1)]),(0,s._)("div",Hf,[Yf,(0,s._)("p",Zf,(0,Q.zw)(o.qtyTotalSent),1)]),(0,s._)("div",Kf,[Bf,(0,s._)("p",Qf,(0,Q.zw)(i.product.description),1)])])])])])):(0,s.kq)("",!0),i.isLoaded?((0,s.wg)(),(0,s.iD)("h1",Gf,"Tracking")):(0,s.kq)("",!0),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",Jf,[(0,s.Wm)(n,{product:i.product},null,8,["product"])])):(0,s.kq)("",!0),i.isLoaded?((0,s.wg)(),(0,s.iD)("h1",Xf,"Variations")):(0,s.kq)("",!0),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",tv,[(0,s._)("div",null,[(0,s._)("div",null,[(0,s._)("div",ev,[(0,s._)("table",rv,[(0,s._)("thead",av,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["id","size","color","qty","Stock Alert"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",sv,(0,Q.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.product.variations,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,s._)("th",iv,(0,Q.zw)(t.id),1),(0,s._)("th",ov,(0,Q.zw)(t.size),1),(0,s._)("td",lv,(0,Q.zw)(t.color),1),(0,s._)("td",nv,[(0,s._)("div",dv,[(0,s._)("span",null,"Initial: "+(0,Q.zw)(t.quantity),1)])]),(0,s._)("td",wv,(0,Q.zw)(t.stockAlert),1)])))),128)),(0,s._)("tr",cv,[uv,pv,mv,(0,s._)("td",hv,[(0,s._)("div",gv,[(0,s._)("span",null,"Total: "+(0,Q.zw)(o.qtyTotal),1)])]),fv])])])])])])])):(0,s.kq)("",!0)])}const yv={class:"tw-flex tw-items-ce tw-gap-1 tw-border-b tw-border-solid tw-border-neutral-200"},xv=["onClick"];function bv(t,e,r,a,i,o){const l=(0,s.up)("ProductTrackingTable");return(0,s.wg)(),(0,s.j4)(Ja._,{flat:"",class:"tw-p-1"},{default:(0,s.w5)((()=>[(0,s._)("div",yv,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.tabs,(t=>((0,s.wg)(),(0,s.iD)("button",{key:t.id,onClick:e=>i.tab=t.id,class:(0,Q.C_)(["tw-px-4 tw-py-2 tw-rounded-t hover:tw-border-orange-500/50 tw-duration-300 tw-border tw-border-solid tw-border-neutral-200 tw-text-neutral-500 tw-border-b-0",{"tw-bg-orange-500 !tw-text-white tw-border-transparent":t.id==i.tab}])},(0,Q.zw)(t.name),11,xv)))),128))]),(0,s.kq)("",!0),(0,s.Wm)(es.Oo,{class:"tw-mt-0",modelValue:i.tab,"onUpdate:modelValue":e[1]||(e[1]=t=>i.tab=t)},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.tabs,(t=>((0,s.wg)(),(0,s.j4)(rs.H,{key:t.id,value:t.id},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{product:r.product,source:t.source},null,8,["product","source"])])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})}const _v={class:"tw-mt-5"},kv={class:"tw-max-w-full tw-overflow-auto"},Cv={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Dv={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},Sv={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"};function zv(t,e,r,a,i,o){const l=(0,s.up)("ProductTrackingRow");return(0,s.wg)(),(0,s.iD)("div",_v,[(0,s._)("div",kv,[(0,s._)("table",Cv,[(0,s._)("thead",Dv,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["id","name","quantity","actions"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",Sv,(0,Q.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.items,(t=>((0,s.wg)(),(0,s.j4)(l,{item:t,key:t.id,source:r.source},null,8,["item","source"])))),128))])])])])}const Uv={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},Lv={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Pv={class:"tw-flex tw-items-start tw-h-full"},Av={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},$v={class:"tw-px-6 tw-py-2"},Wv={key:0},qv={class:"tw-w-fit tw-min-w-[200px] tw-flex tw-items-center"},Ov={key:0,class:"tw-h-fit tw-py-2"},Ev=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-emerald-100 tw-border tw-text-emerald-500"}," Received: ",-1),Tv={class:"tw-px-3 tw-py-1 tw-border tw-text-emerald-500"},Vv=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-red-100 tw-text-red-500 tw-border"}," Not Received: ",-1),Iv={class:"tw-px-3 tw-py-1 tw-border tw-text-red-500"},Fv=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-purple-100 tw-border tw-text-purple-500"}," Shipped: ",-1),Rv={class:"tw-px-3 tw-py-1 tw-border tw-text-purple-500"},jv=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-blue-100 tw-border tw-text-blue-500"}," Delivered: ",-1),Nv={class:"tw-px-3 tw-py-1 tw-border tw-text-blue-500"},Mv={key:1},Hv={class:"tw-w-fit tw-min-w-[200px] tw-flex tw-items-center"},Yv={key:0,class:"tw-h-fit tw-py-2"},Zv=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-emerald-100 tw-border tw-text-emerald-500"}," Received: ",-1),Kv={class:"tw-px-3 tw-py-1 tw-border tw-text-emerald-500"},Bv=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-red-100 tw-text-red-500 tw-border"}," Not Received: ",-1),Qv={class:"tw-px-3 tw-py-1 tw-border tw-text-red-500"},Gv=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-purple-100 tw-border tw-text-purple-500"}," Shipped: ",-1),Jv={class:"tw-px-3 tw-py-1 tw-border tw-text-purple-500"},Xv=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-blue-100 tw-border tw-text-blue-500"}," Delivered: ",-1),ty={class:"tw-px-3 tw-py-1 tw-border tw-text-blue-500"},ey={class:"tw-px-6 tw-py-2 tw-space-x-3"};function ry(t,e,r,a,i,o){const l=(0,s.up)("ShowProductVariantActions");return(0,s.wg)(),(0,s.iD)("tr",Uv,[(0,s._)("th",Lv,[(0,s._)("div",Pv,(0,Q.zw)(r.item.id),1)]),(0,s._)("th",Av,(0,Q.zw)(r.item.name),1),(0,s._)("td",$v,["warehouses"==r.source?((0,s.wg)(),(0,s.iD)("div",Wv,[(0,s._)("div",qv,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.showDetails=!i.showDetails),class:"tw-bg-blue-400/10 tw-py-1 tw-px-4 tw-rounded tw-text-blue-400 tw-flex tw-gap-2 tw-items-center tw-justify-between"},[(0,s._)("p",null,"Total: "+(0,Q.zw)(o.get_total_quantity(r.item.product_variations)),1),(0,s.Wm)(X.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(i.showDetails?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})])]),(0,s.Wm)(Ut.Fx,null,{default:(0,s.w5)((()=>[i.showDetails?((0,s.wg)(),(0,s.iD)("div",Ov,[(0,s._)("table",null,[(0,s._)("tbody",null,[(0,s._)("tr",null,[Ev,(0,s._)("td",Tv,(0,Q.zw)(o.get_total_quantity(r.item.product_variations,"movements_total_confirmed_quantity")),1)]),(0,s._)("tr",null,[Vv,(0,s._)("td",Iv,(0,Q.zw)(o.get_total_quantity(r.item.product_variations,"movements_total_not_confirmed_quantity")),1)]),(0,s._)("tr",null,[Fv,(0,s._)("td",Rv,(0,Q.zw)(o.get_total_quantity(r.item.product_variations,"total_shipped_quantity")),1)]),(0,s._)("tr",null,[jv,(0,s._)("td",Nv,(0,Q.zw)(o.get_total_quantity(r.item.product_variations,"total_delivered_quantity")),1)])])])])):(0,s.kq)("",!0)])),_:1})])):(0,s.kq)("",!0),"deliveries"==r.source?((0,s.wg)(),(0,s.iD)("div",Mv,[(0,s._)("div",Hv,[(0,s._)("button",{onClick:e[1]||(e[1]=t=>i.showDetails=!i.showDetails),class:"tw-bg-blue-400/10 tw-py-1 tw-px-4 tw-rounded tw-text-blue-400 tw-flex tw-gap-2 tw-items-center tw-justify-between"},[(0,s._)("p",null,"Total: "+(0,Q.zw)(o.get_total_quantity(r.item.product_variations)),1),(0,s.Wm)(X.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(i.showDetails?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})])]),(0,s.Wm)(Ut.Fx,null,{default:(0,s.w5)((()=>[i.showDetails?((0,s.wg)(),(0,s.iD)("div",Yv,[(0,s._)("table",null,[(0,s._)("tbody",null,[(0,s._)("tr",null,[Zv,(0,s._)("td",Kv,(0,Q.zw)(o.get_total_quantity(r.item.product_variations,"movements_total_confirmed_quantity")),1)]),(0,s._)("tr",null,[Bv,(0,s._)("td",Qv,(0,Q.zw)(o.get_total_quantity(r.item.product_variations,"movements_total_not_confirmed_quantity")),1)]),(0,s._)("tr",null,[Gv,(0,s._)("td",Jv,(0,Q.zw)(o.get_total_quantity(r.item.product_variations,"total_shipped_quantity")),1)]),(0,s._)("tr",null,[Xv,(0,s._)("td",ty,(0,Q.zw)(o.get_total_quantity(r.item.product_variations,"total_delivered_quantity")),1)])])])])):(0,s.kq)("",!0)])),_:1})])):(0,s.kq)("",!0)]),(0,s._)("td",ey,[(0,s._)("div",null,[(0,s.Wm)(l,{type:r.source,source:r.item},null,8,["type","source"])])])])}function ay(t,e,r,a,i,o){const l=(0,s.up)("ProductVariantDetails");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(G.T,{onClick:e[0]||(e[0]=t=>i.visible=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue-lighten-2",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-eye")])),_:1})])),_:1}),(0,s.Wm)(l,{visible:i.visible,onCancel:o.cancel,type:r.type,source:r.source},null,8,["visible","onCancel","type","source"])])}const sy={class:"md:tw-w-[50%] tw-relative tw-max-h-full tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},iy={class:"tw-p-5"},oy={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500 tw-rounded-md tw-overflow-hidden"},ly=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},"SIZE"),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"},"COLOR"),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY ")])],-1);function ny(t,e,r,a,i,o){const l=(0,s.up)("ProductVariantDetailsRow"),n=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(n,{visible:r.visible,onCancel:o.cancel},{default:(0,s.w5)((()=>[(0,s._)("div",sy,[(0,s.Wm)(G.T,{onClick:o.cancel,icon:"mdi-close",variant:"flat",size:"w-small",color:"red",class:"tw-absolute tw-top-3 tw-z-10 tw-right-3"},null,8,["onClick"]),(0,s._)("div",iy,[(0,s._)("table",oy,[ly,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.source.product_variations,(t=>((0,s.wg)(),(0,s.j4)(l,{key:t.id,item:t,type:r.type},null,8,["item","type"])))),128))])]),(0,s.kq)("",!0)])])])),_:1},8,["visible","onCancel"])])}const dy={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},wy={class:"tw-w-4 tw-px-2 tw-py-1"},cy={class:"tw-w-4 tw-px-2 tw-py-1"},uy={class:"tw-w-4 tw-px-2 tw-py-1"},py={class:"tw-w-4 tw-px-2 tw-py-1"},my={class:"tw-w-fit tw-min-w-[200px] tw-flex tw-items-center"},hy={key:0,class:"tw-h-fit tw-py-2"},gy=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-emerald-100 tw-border tw-text-emerald-500"}," Received: ",-1),fy={class:"tw-px-3 tw-py-1 tw-border tw-text-emerald-500"},vy=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-red-100 tw-text-red-500 tw-border"}," Not Received: ",-1),yy={class:"tw-px-3 tw-py-1 tw-border tw-text-red-500"},xy=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-purple-100 tw-border tw-text-purple-500"}," Shipped: ",-1),by={class:"tw-px-3 tw-py-1 tw-border tw-text-purple-500"},_y=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-blue-100 tw-border tw-text-blue-500"}," Delivered: ",-1),ky={class:"tw-px-3 tw-py-1 tw-border tw-text-blue-500"};function Cy(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("tr",dy,[(0,s._)("td",wy,(0,Q.zw)(r.item.id),1),(0,s._)("td",cy,(0,Q.zw)(r.item.size),1),(0,s._)("td",uy,(0,Q.zw)(r.item.color),1),(0,s._)("td",py,[(0,s._)("div",null,[(0,s._)("div",my,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.showDetails=!i.showDetails),class:"tw-bg-blue-400/10 tw-py-1 tw-px-4 tw-rounded tw-text-blue-400 tw-flex tw-gap-2 tw-items-center tw-justify-between"},[(0,s._)("p",null," Total: "+(0,Q.zw)(r.item.on_hand_quantity),1),(0,s.Wm)(X.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(i.showDetails?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})])]),(0,s.Wm)(Ut.Fx,null,{default:(0,s.w5)((()=>[i.showDetails?((0,s.wg)(),(0,s.iD)("div",hy,[(0,s._)("table",null,[(0,s._)("tbody",null,[(0,s._)("tr",null,[gy,(0,s._)("td",fy,(0,Q.zw)(r.item.movements_total_confirmed_quantity),1)]),(0,s._)("tr",null,[vy,(0,s._)("td",yy,(0,Q.zw)(r.item.movements_total_not_confirmed_quantity),1)]),(0,s._)("tr",null,[xy,(0,s._)("td",by,(0,Q.zw)(r.item.total_shipped_quantity),1)]),(0,s._)("tr",null,[_y,(0,s._)("td",ky,(0,Q.zw)(r.item.total_delivered_quantity),1)])])])])):(0,s.kq)("",!0)])),_:1})])])])}var Dy={props:["type","item"],data(){return{showDetails:!1}}};const Sy=(0,d.Z)(Dy,[["render",Cy]]);var zy=Sy,Uy={props:["visible","source","type"],components:{ProductVariantDetailsRow:zy},methods:{cancel(){this.$emit("cancel")}},mounted(){}};const Ly=(0,d.Z)(Uy,[["render",ny]]);var Py=Ly,Ay={props:["product","source","type"],components:{ProductVariantDetails:Py},data(){return{visible:!1,quantity:1,newVariant:null}},methods:{cancel(){this.visible=!1}},mounted(){console.log(this.source)}};const $y=(0,d.Z)(Ay,[["render",ay]]);var Wy=$y,qy={components:{ShowProductVariantActions:Wy},props:["source","item"],data(){return{showDetails:!1}},methods:{get_total_quantity(t,e="on_hand_quantity"){let r=0;return t.forEach((t=>{r+=t[e]})),r}}};const Oy=(0,d.Z)(qy,[["render",ry]]);var Ey=Oy,Ty={props:["product","source"],components:{ProductTrackingRow:Ey},computed:{items(){return this.product.tracking[this.source]}},methods:{},mounted(){}};const Vy=(0,d.Z)(Ty,[["render",zv]]);var Iy=Vy,Fy={components:{ProductTrackingTable:Iy},props:["product"],data(){return{tab:1,tabs:[{id:1,name:"Deliveries",source:"deliveries"},{id:2,name:"Warehouses",source:"warehouses"}]}}};const Ry=(0,d.Z)(Fy,[["render",bv]]);var jy=Ry,Ny={components:{ProductTracking:jy},data(){return{currency:R,isLoading:!1,isLoaded:!1,variantId:1,variants:[],product:{name:"",reference:"",buyingPrice:0,sellingPrice:0,description:""}}},computed:{qtyTotalDelivered(){let t=0;return this.product.tracking.deliveries.forEach((e=>{e.product_variations.forEach((e=>{t+=e.total_delivered_quantity}))})),this.product.tracking.warehouses.forEach((e=>{e.product_variations.forEach((e=>{t+=e.total_delivered_quantity}))})),t},qtyTotalSent(){let t=0;return this.product.tracking.warehouses.forEach((e=>{e.product_variations.forEach((e=>{t+=e.movements_total_confirmed_quantity,t+=e.movements_total_not_confirmed_quantity}))})),t},qtyTotal(){if(this.isLoaded){let t=0;return this.product.variations.forEach((e=>{t+=e.quantity})),t}return 0}},methods:{getProduct(){const t=this.$route.params.id;ea.getProduct(t).then((t=>{"SUCCESS"==t.data.code&&(this.product=t.data.data.products,this.isLoaded=!0)}),this.$handleApiError)}},mounted(){this.getProduct()}};const My=(0,d.Z)(Ny,[["render",vv]]);var Hy=My,Yy={name:"products",path:"/products",component:sa,meta:{module:"product"},children:[{name:"product/list",path:"",component:up,meta:{module:"product",subModule:"product/list",title:"Products List",gate:"show_all_products"}},{name:"product/add",path:"add",component:jh,meta:{module:"product",subModule:"product/add",title:"Add Product",gate:"create_product"}},{name:"product/update",path:"update/:id",component:Cf,meta:{module:"product",subModule:"product/update",title:"Update Product",gate:"update_product"}},{name:"product/show",path:":id",component:Hy,meta:{module:"product",subModule:"product/show",title:"Product Informations",gate:"view_product"}}]};const Zy={class:"mb-5 tw-flex tw-justify-between tw-items-center"},Ky=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Users List"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage all users")],-1),By={key:0},Qy=(0,s._)("span",{class:"text-white"}," Add User ",-1),Gy={key:0},Jy={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Xy={class:"mb-5 tw-flex"},tx={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},ex={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},rx={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},ax=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Role",-1),sx={class:"tw-relative"},ix=["value"],ox={class:""};function lx(t,e,r,i,o,l){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("UsersTable");return(0,s.wg)(),(0,s.iD)("div",{key:l.users.length},[(0,s._)("div",Zy,[Ky,t.$can("create_user")?((0,s.wg)(),(0,s.iD)("div",By,[(0,s.Wm)(G.T,{color:"primary-color",link:"",to:{name:"user/add"},variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),Qy])),_:1})])):(0,s.kq)("",!0)]),l.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Gy,[(0,s.Wm)(n)])),l.fetched?((0,s.wg)(),(0,s.iD)("div",Jy,[(0,s._)("div",Xy,[(0,s.Wm)(G.T,{onClick:e[0]||(e[0]=t=>o.showFilters=!o.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",tx,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,o.search]])])]),(0,s._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":o.showFilters}])},[(0,s._)("div",ex,[(0,s._)("div",rx,[ax,(0,s._)("div",sx,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.role=t),class:"tw-w-full focus:tw-border-orange-400 tw-capitalize tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.roles,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t,value:t},(0,Q.zw)(t),9,ix)))),128))],512),[[a.bM,o.role]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])],2),(0,s._)("div",ox,[(0,s.Wm)(d,{users:l.filteredUsers,columns:o.columns},null,8,["users","columns"])])])):(0,s.kq)("",!0)])}const nx={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},dx={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},wx={class:"tw-text-xs tw-text-gray-700 tw- tw-bg-gray-50"},cx=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),ux={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},px=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),mx={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},hx={class:"tw-px-6 tw-py-4"},gx={class:"tw-px-6 tw-py-4"},fx={class:"tw-px-6 tw-py-4"},vx={class:"tw-px-6 tw-py-4"},yx={class:"tw-px-6 tw-py-4"},xx={key:0,class:"tw-text-red-500"},bx={key:1},_x={key:0,class:"tw-text-green-500 tw-flex tw-items-center tw-gap-2"},kx=(0,s._)("div",{class:"tw-p-1 tw-rounded-full tw-bg-green-500"},null,-1),Cx={key:1,class:"tw-text-neutral-700"},Dx={class:"tw-px-6 tw-py-4"},Sx={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},zx={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},Ux={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},Lx=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),Px=["value"],Ax={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},$x={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},Wx={class:"tw-text-white"};function qx(t,e,r,i,o,l){const n=(0,s.up)("RoleName"),d=(0,s.up)("UserStatus"),w=(0,s.up)("UserActions");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",nx,[(0,s._)("table",dx,[(0,s._)("thead",wx,[(0,s._)("tr",null,[cx,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",ux,(0,Q.zw)(t.name),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.items,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[px,(0,s._)("th",mx,(0,Q.zw)(e.id),1),(0,s._)("td",hx,(0,Q.zw)(e.firstname)+" "+(0,Q.zw)(e.lastname),1),(0,s._)("td",gx,[(0,s.Wm)(n,{role:e.role_name},null,8,["role"])]),(0,s._)("td",fx,(0,Q.zw)(e.email),1),(0,s._)("td",vx,(0,Q.zw)(e.phone),1),(0,s._)("td",yx,[e.last_action?((0,s.wg)(),(0,s.iD)("div",bx,[1==l.isOnline(l.lastSeen(e.last_action))?((0,s.wg)(),(0,s.iD)("div",_x,[kx,(0,s.Uk)(" Online ")])):((0,s.wg)(),(0,s.iD)("div",Cx,(0,Q.zw)(l.lastSeen(e.last_action)),1))])):((0,s.wg)(),(0,s.iD)("div",xx," Never Connected "))]),(0,s._)("td",Dx,[t.$can("update_user_status")?((0,s.wg)(),(0,s.j4)(d,{key:0,user:e},null,8,["user"])):(0,s.kq)("",!0)]),(0,s._)("td",Sx,[(0,s.Wm)(w,{user:e},null,8,["user"])])])))),128))])])]),(0,s._)("div",zx,[(0,s._)("div",Ux,[Lx,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,Px)))),128))],512),[[a.bM,o.paginationLimit]])]),(0,s._)("div",Ax,[(0,s._)("div",$x,(0,Q.zw)(l.prevRange+1)+" - "+(0,Q.zw)(o.currentPage==l.pageCount?r.users.length:l.nextRange)+" of "+(0,Q.zw)(r.users.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.pageCount,(t=>((0,s.wg)(),(0,s.j4)(G.T,{onClick:e=>o.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==o.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",Wx,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}function Ox(t,e,r,a,i,o){const l=(0,s.up)("popup");return(0,s.wg)(),(0,s.iD)("div",null,[t.$can("update_user")?((0,s.wg)(),(0,s.j4)(G.T,{key:0,to:"/users/update/"+r.user.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1},8,["to"])):(0,s.kq)("",!0),t.$can("view_user")?((0,s.wg)(),(0,s.j4)(G.T,{key:1,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-eye-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),t.$can("delete_user")&&"admin"!==r.user.role_name?((0,s.wg)(),(0,s.j4)(G.T,{key:2,onClick:e[0]||(e[0]=t=>i.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(l,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this user?</p> You won't be able to revert this!",loading:i.isLoading,visible:i.showPopup,onResolved:o.handleResolved},null,8,["loading","visible","onResolved"])])}var Ex={props:["rowIndex","user"],name:"userActions",data(){return{showPopup:!1,isLoading:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,K["delete"](this.user.id).then((t=>{"USER_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"User Deleted Successfully"})),K.all().then((t=>{"SHOW_ALL_USERS"==t.data.code&&this.$store.dispatch("user/setUsers",t.data.data.users)})).catch(this.$handleApiError)})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const Tx=(0,d.Z)(Ex,[["render",Ox]]);var Vx=Tx;const Ix={key:0,class:"tw-flex tw-items-center"};function Fx(t,e,r,a,i,o){return"admin"!==r.user.role_name?((0,s.wg)(),(0,s.iD)("div",Ix,[(0,s.Wm)(el.G,{disabled:i.isLoading,loading:i.isLoading,onChange:o.handleChange,color:"primary-color",flat:!0,modelValue:i.checked,"onUpdate:modelValue":e[0]||(e[0]=t=>i.checked=t),density:"compact","hide-details":!0},null,8,["disabled","loading","onChange","modelValue"])])):(0,s.kq)("",!0)}var Rx={props:["rowIndex","prop","user"],data(){return{isLoading:!1,checked:!1}},watch:{},methods:{handleChange(){const t={id:this.user.id,status:this.checked?"true":"false"};this.isLoading=!0,K.updateStatus(t).then((t=>{"STATUS_USER_UPDATED"==t.data.code&&(this.$alert({type:"success",title:"Status updated"}),this.setUpdatedUser(this.user.id,this.checked))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},setUpdatedUser(t,e){let r=localStorage.getItem("updatedUsers"),a={};r?(a=JSON.parse(r),a[t]=e):a[t]=e,localStorage.setItem("updatedUsers",JSON.stringify(a))},getUpdatedUsers(){let t=localStorage.getItem("updatedUsers");if(!t)return{};let e=JSON.parse(t);return e}},mounted(){const t=this.getUpdatedUsers();Object.keys(t).includes(`${this.user.id}`)?this.checked=1==t[this.model.id]:this.checked=1==this.user.status}};const jx=(0,d.Z)(Rx,[["render",Fx]]);var Nx=jx;const Mx={class:"tw-flex tw-items-center tw-h-full"};function Hx(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",Mx,[(0,s._)("div",{class:(0,Q.C_)([o.current.bg,"tw-px-2 tw-py-1 tw-rounded-lg"])},[(0,s._)("div",{class:(0,Q.C_)([o.current.text,"tw-text-sm tw-uppercase"])},(0,Q.zw)(r.role),3)],2)])}var Yx={props:["role"],data(){return{variants:{default:{bg:"tw-bg-neutral-500/10",text:"tw-text-neutral-500"},admin:{bg:"tw-bg-pink-500/10",text:"tw-text-pink-500"},agente:{bg:"tw-bg-green-500/10",text:"tw-text-green-500"},delivery:{bg:"tw-bg-blue-500/10",text:"tw-text-blue-500"}}}},computed:{current(){return["admin","delivery","agente"].includes(this.role)?this.variants[this.role]:this.variants["default"]}}};const Zx=(0,d.Z)(Yx,[["render",Hx]]);var Kx=Zx,Bx={props:["columns","users"],components:{UserActions:Vx,UserStatus:Nx,RoleName:Kx},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.users.length/this.paginationLimit)},items(){return this.users.slice(this.prevRange,this.nextRange)}},methods:{lastSeen(t){let e=Date.parse(t.replace("-","/"))/1e3;return(0,Ka.x)(e)},isOnline(t){let e=["Just Now","one minute ago","2 minutes ago","3 minutes ago"];return e.includes(t)}}};const Qx=(0,d.Z)(Bx,[["render",qx]]);var Gx=Qx,Jx={components:{UsersTable:Gx},data(){return{localUrl:I,isLoaded:!1,showFilters:!1,role:"All",search:"",columns:[{prop:"id",name:"#"},{prop:"fullname",name:"Name"},{prop:"role_name",name:"Role"},{prop:"email",name:"Email"},{prop:"phone",name:"Phone Number"},{prop:"last_seen",name:"Last Seen"},{prop:"status",name:"Active"},{name:"Acions",prop:"users"}]}},computed:{fetched(){return this.$store.getters["user/fetched"]},users(){return this.$store.getters["user/users"]},roles(){let t=new Set(["All",...this.users.map((t=>t.role_name))]);return t},filteredUsers(){const t=this.role,e=this.search;return this.users.filter((r=>("all"===t.toLocaleLowerCase()||t.toLocaleLowerCase()===r.role_name)&&!!(r.firstname.toLowerCase().includes(e.toLowerCase())||r.lastname.toLowerCase().includes(e.toLowerCase())||r.role_name.toLowerCase().includes(e.toLowerCase())||r.email.toLowerCase().includes(e.toLowerCase())||r.phone.toLowerCase().includes(e.toLowerCase()))))}},methods:{getRoles(){K.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.isFormReady=!0}})).catch(this.$handleApiError)},getUsers(){K.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),this.$store.dispatch("user/setFetched",!0)}})).catch(this.$handleApiError)}},mounted(){localStorage.removeItem("updatedUsers"),this.fetched||this.getUsers()}};const Xx=(0,d.Z)(Jx,[["render",lx]]);var tb=Xx,eb=r(988);const rb=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Add User "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create new user")],-1),ab={key:0},sb={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},ib={class:"tw-w-full"},ob=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," First Name ",-1),lb={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},nb={class:"tw-w-full"},db=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Last Name",-1),wb={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},cb={class:"tw-w-full"},ub=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Email",-1),pb={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},mb={class:"tw-w-full"},hb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Phone Number ",-1),gb={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},fb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Product",-1),vb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),yb=["value"],xb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery cities",-1),bb=["value"],_b=(0,s._)("div",{class:"mb-1 my-2 text-body-2 tw-text-zinc-700"},"Fee",-1),kb=(0,s._)("span",{class:"text-white"},"Add",-1),Cb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Role",-1),Db={class:"tw-flex tw-gap-10 tw-h-full tw-items-center"},Sb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Status:",-1),zb={class:"tw-w-full"},Ub=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Password",-1),Lb={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Pb={class:"tw-w-full"},Ab=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Confirm Password ",-1),$b={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Wb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery cities",-1),qb={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Ob=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),Eb=(0,s._)("span",{class:"text-white text-capitalize"},"Create",-1);function Tb(t,e,r,i,o,l){const n=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[rb,o.isFormReady?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",ab,[(0,s.Wm)(n)])),o.isFormReady?((0,s.wg)(),(0,s.iD)("div",sb,[(0,s._)("div",null,[(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",ib,[ob,(0,s.Wm)(tt.hw,{error:!o.formStatus.firstname.valid,"hide-details":!0,onKeyup:e[0]||(e[0]=t=>l.resetError("firstname")),modelValue:o.user.firstname,"onUpdate:modelValue":e[1]||(e[1]=t=>o.user.firstname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",lb,(0,Q.zw)(o.formStatus.firstname.message),1)])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",nb,[db,(0,s.Wm)(tt.hw,{error:!o.formStatus.lastname.valid,"hide-details":!0,onKeyup:e[2]||(e[2]=t=>l.resetError("lastname")),modelValue:o.user.lastname,"onUpdate:modelValue":e[3]||(e[3]=t=>o.user.lastname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",wb,(0,Q.zw)(o.formStatus.lastname.message),1)])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",cb,[ub,(0,s.Wm)(tt.hw,{error:!o.formStatus.email.valid,"hide-details":!0,onKeyup:e[4]||(e[4]=t=>l.resetError("email")),modelValue:o.user.email,"onUpdate:modelValue":e[5]||(e[5]=t=>o.user.email=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",pb,(0,Q.zw)(o.formStatus.email.message),1)])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",mb,[hb,(0,s.Wm)(tt.hw,{error:!o.formStatus.phone.valid,"hide-details":!0,onKeyup:e[6]||(e[6]=t=>l.resetError("phone")),modelValue:o.user.phone,"onUpdate:modelValue":e[7]||(e[7]=t=>o.user.phone=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",gb,(0,Q.zw)(o.formStatus.phone.message),1)])])),_:1}),l.isAgente?((0,s.wg)(),(0,s.j4)(na.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",null,[(0,s.Wm)(el.G,{modelValue:o.isHavingAllProducts,"onUpdate:modelValue":e[8]||(e[8]=t=>o.isHavingAllProducts=t),color:"primary-color",label:"All Products"},null,8,["modelValue"])]),fb,(0,s._)("div",null,[(0,s.Wm)(eb.f,{disabled:o.isHavingAllProducts,modelValue:o.selectedProducts,"onUpdate:modelValue":e[9]||(e[9]=t=>o.selectedProducts=t),"filter-keys":"name",density:"compact","item-value":"id","item-title":"name",variant:"outlined",color:"primary-color",chips:"",items:l.selectProducts,multiple:""},null,8,["disabled","modelValue","items"])])])])),_:1})):(0,s.kq)("",!0),l.isDelivery?((0,s.wg)(),(0,s.j4)(na.D,{key:1,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[vb,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>o.city=t),class:"tw-w-full tw-py-[7px] focus:tw-border-orange-500 tw-px-4 tw-border tw-outline-orange-500 tw-border-neutral-400 tw-border-solid tw-rounded-md"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,yb)))),128))],512),[[a.bM,o.city]])])])),_:1})):(0,s.kq)("",!0),l.isDelivery?((0,s.wg)(),(0,s.j4)(na.D,{key:2,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[xb,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[11]||(e[11]=t=>o.deliveryCity=t),class:"tw-w-full tw-py-[7px] focus:tw-border-orange-500 tw-px-4 tw-border tw-outline-orange-500 tw-border-neutral-400 tw-border-solid tw-rounded-md"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,bb)))),128))],512),[[a.bM,o.deliveryCity]]),_b,(0,s.Wm)(tt.hw,{"hide-details":!0,modelValue:o.deliveryCityFee,"onUpdate:modelValue":e[12]||(e[12]=t=>o.deliveryCityFee=t),clearable:"",type:"number","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"]),(0,s.Wm)(G.T,{onClick:l.handleAddCity,class:"tw-text-white tw-my-3",variant:"flat",color:"primary-color",block:""},{default:(0,s.w5)((()=>[kb])),_:1},8,["onClick"])])])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1}),(0,s.Wm)(na.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[Cb,(0,s.Wm)(pp.r,{class:"text-capitalize",items:l.roles,"item-title":"name","item-value":"id",modelValue:o.role,"onUpdate:modelValue":e[13]||(e[13]=t=>o.role=t),variant:"outlined",color:"primary-color",density:"compact"},null,8,["items","modelValue"])])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",Db,[Sb,(0,s.Wm)(el.G,{modelValue:o.user.status,"onUpdate:modelValue":e[14]||(e[14]=t=>o.user.status=t),color:"primary-color","hide-details":!0,flat:""},null,8,["modelValue"])])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",zb,[Ub,(0,s.Wm)(tt.hw,{error:!o.formStatus.password.valid,"hide-details":!0,onKeyup:e[15]||(e[15]=t=>l.resetError("password")),modelValue:o.user.password,"onUpdate:modelValue":e[16]||(e[16]=t=>o.user.password=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",Lb,(0,Q.zw)(o.formStatus.password.message),1)])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",Pb,[Ab,(0,s.Wm)(tt.hw,{error:!o.formStatus.confirmPassword.valid,"hide-details":!0,onKeyup:e[17]||(e[17]=t=>l.resetError("confirmPassword")),modelValue:o.user.confirmPassword,"onUpdate:modelValue":e[18]||(e[18]=t=>o.user.confirmPassword=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",$b,(0,Q.zw)(o.formStatus.confirmPassword.message),1)])])),_:1}),l.isDelivery?((0,s.wg)(),(0,s.j4)(na.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[Wb,(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.deliveryCities,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"tw-flex tw-items-center tw-gap-2",key:t},[(0,s._)("div",null,(0,Q.zw)(l.cities.filter((e=>e.id==t.city_id))[0]?.name),1),(0,s._)("div",null,(0,Q.zw)(t.fee)+" "+(0,Q.zw)(o.currency),1),(0,s._)("div",null,[(0,s.Wm)(X.t,{color:"red",onClick:e=>l.removeCity(t.id),size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete")])),_:2},1032,["onClick"])])])))),128))])])])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1})])),_:1})]),(0,s._)("div",qb,[(0,s.Wm)(G.T,{link:"",to:"/",color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[Ob])),_:1}),(0,s.Wm)(G.T,{onClick:l.create,loading:o.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[Eb])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}var Vb={data(){return{localUrl:I,currency:R,isFormReady:!1,isLoading:!1,city:1,isMultipleProducts:!1,isHavingAllProducts:!1,id:1,deliveryCity:1,deliveryCityFee:0,deliveryCities:[],product:0,selectedProducts:[],formStatus:{firstname:{valid:!0,message:""},lastname:{valid:!0,message:""},phone:{valid:!0,message:""},email:{valid:!0,message:""},password:{valid:!0,message:""},confirmPassword:{valid:!0,message:""}},user:{firstname:"",lastname:"",phone:"",email:"",password:"",confirmPassword:"",status:!0},role:3}},computed:{roles(){return this.$store.getters["user/roles"]},rolesFetched(){return this.$store.getters["user/fetchedRoles"]},cities(){return this.$store.getters["city/cities"]},citiesFetched(){return this.$store.getters["city/fetched"]},products(){return this.$store.getters["product/products"]},productsFethched(){return this.$store.getters["product/fetched"]},isAgente(){return 2===this.role},isDelivery(){return 3===this.role},selectProducts(){return this.isMultipleProducts,[...this.products]},userProducts(){return this.selectedProducts}},watch:{},methods:{removeCity(t){this.deliveryCities=this.deliveryCities.filter((e=>e.id!==t))},handleAddCity(){if(this.deliveryCityFee<=0)return!1;this.deliveryCities.push({id:this.id,city_id:this.deliveryCity,fee:this.deliveryCityFee}),this.id+=1,this.deliveryCity=1,this.deliveryCityFee=0},create(){if(!this.validate())return!1;this.isLoading=!0;const t={...this.user,role:this.role,product_id:this.userProducts,city:this.city,deliveryCities:this.deliveryCities,having_all:this.isHavingAllProducts};K.register(t).then((t=>{"USER_CREATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.user={firstname:"",lastname:"",phone:"",email:"",password:"",confirmPassword:"",status:!0},this.role=3,this.product_id=null,this.deliveryCities=[],this.id=1)})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;if("VALIDATION_ERROR"==e?.code)for(let r in e.error)this.formStatus[r]={valid:!1,message:e.error[r][0]}})).finally((()=>{this.isLoading=!1}))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){this.formStatus.email=xt(this.user.email),this.formStatus.firstname=_t(this.user.firstname),this.formStatus.lastname=_t(this.user.lastname),this.formStatus.phone=_t(this.user.phone),this.formStatus.password=bt(this.user.password),this.formStatus.confirmPassword=Ct(this.user.password,this.user.confirmPassword);const t=this.formStatus.email.valid,e=this.formStatus.firstname.valid,r=this.formStatus.lastname.valid,a=this.formStatus.phone.valid,s=this.formStatus.password.valid,i=this.formStatus.confirmPassword.valid;return t&&e&&r&&s&&i&&a},getRoles(){return this.rolesFetched?new Promise((t=>t())):K.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.$store.dispatch("user/setFetchedRoles",!0)}})).catch(this.$handleApiError)},async getCities(){return this.citiesFetched?new Promise((t=>t())):K.cities().then((t=>{this.$store.dispatch("city/cities",t.data.data),this.$store.dispatch("city/setFetched",!0)}))},async getProducts(){return this.productsFethched?new Promise((t=>t())):ea.all().then((t=>{this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0)}),(t=>this.$handleApiError(t)))}},mounted(){Promise.allSettled([this.getRoles(),this.getCities(),this.getProducts()]).then((t=>{console.log(t),this.isFormReady=!0}),(t=>this.$handleApiError(t)))}};const Ib=(0,d.Z)(Vb,[["render",Tb]]);var Fb=Ib;const Rb=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Update User "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Update user informations")],-1),jb={key:0},Nb={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Mb={class:"tw-flex tw-gap-2 tw-text-neutral-800 tw-items-center tw-mb-5"},Hb={class:"tw-block tw-py-1 tw-px-2 tw-rounded-md text-primary-color"},Yb={class:"tw-w-full"},Zb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," First Name ",-1),Kb={class:"tw-w-full"},Bb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Last Name",-1),Qb={class:"tw-w-full"},Gb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Email",-1),Jb={class:"tw-w-full"},Xb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Phone Number ",-1),t_={class:"tw-w-full tw-flex tw-gap-10 tw-items-center"},e_=(0,s._)("span",null,"Update Password: ",-1),r_={class:"tw-w-full"},a_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Password",-1),s_={class:"tw-w-full"},i_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Confirm Password ",-1),o_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Role",-1),l_={class:"tw-flex tw-gap-10 tw-h-full tw-items-center"},n_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Status:",-1),d_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Product",-1),w_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),c_=["value"],u_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery cities",-1),p_=["value"],m_=(0,s._)("div",{class:"mb-1 my-2 text-body-2 tw-text-zinc-700"},"Fee",-1),h_=(0,s._)("span",{class:"text-white"},"Add",-1),g_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery cities",-1),f_={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},v_=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),y_=(0,s._)("span",{class:"text-white text-capitalize"},"Update",-1);function x_(t,e,r,i,o,l){const n=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[Rb,l.isFormReady?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",jb,[(0,s.Wm)(n)])),l.isFormReady?((0,s.wg)(),(0,s.iD)("div",Nb,[(0,s._)("div",Mb,[(0,s.Uk)(" User ID: "),(0,s._)("span",Hb,(0,Q.zw)(o.id),1)]),(0,s._)("div",null,[(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",Yb,[Zb,(0,s.Wm)(tt.hw,{"error-messages":o.formStatus.firstname.message,modelValue:o.firstname,"onUpdate:modelValue":e[0]||(e[0]=t=>o.firstname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",Kb,[Bb,(0,s.Wm)(tt.hw,{"error-messages":o.formStatus.lastname.message,modelValue:o.lastname,"onUpdate:modelValue":e[1]||(e[1]=t=>o.lastname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",Qb,[Gb,(0,s.Wm)(tt.hw,{"error-messages":o.formStatus.email.message,modelValue:o.email,"onUpdate:modelValue":e[2]||(e[2]=t=>o.email=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",Jb,[Xb,(0,s.Wm)(tt.hw,{"error-messages":o.formStatus.phone.message,modelValue:o.phone,"onUpdate:modelValue":e[3]||(e[3]=t=>o.phone=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-0",cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",t_,[e_,(0,s.Wm)(el.G,{modelValue:o.updatePassword,"onUpdate:modelValue":e[4]||(e[4]=t=>o.updatePassword=t),color:"primary-color","hide-details":!0},null,8,["modelValue"])])])),_:1}),o.updatePassword?((0,s.wg)(),(0,s.j4)(na.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",r_,[a_,(0,s.Wm)(tt.hw,{"error-messages":o.formStatus.password.message,modelValue:o.password,"onUpdate:modelValue":e[5]||(e[5]=t=>o.password=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1})):(0,s.kq)("",!0),o.updatePassword?((0,s.wg)(),(0,s.j4)(na.D,{key:1,class:"!tw-py-2 tw-pt-0",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",s_,[i_,(0,s.Wm)(tt.hw,{"error-messages":o.formStatus.confirmPassword.message,modelValue:o.confirmPassword,"onUpdate:modelValue":e[6]||(e[6]=t=>o.confirmPassword=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1}),(0,s.Wm)(na.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[o_,(0,s.Wm)(pp.r,{class:"text-capitalize","error-messages":o.formStatus.role,items:l.roles,"item-title":"name","item-value":"id",modelValue:o.role,"onUpdate:modelValue":e[7]||(e[7]=t=>o.role=t),variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","items","modelValue"])])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",l_,[n_,(0,s.Wm)(el.G,{modelValue:o.status,"onUpdate:modelValue":e[8]||(e[8]=t=>o.status=t),color:"primary-color","hide-details":!0,flat:""},null,8,["modelValue"])])])),_:1}),l.isAgente?((0,s.wg)(),(0,s.j4)(na.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",null,[(0,s.Wm)(el.G,{modelValue:o.isHavingAllProducts,"onUpdate:modelValue":e[9]||(e[9]=t=>o.isHavingAllProducts=t),color:"primary-color",label:"All Products"},null,8,["modelValue"])]),d_,(0,s._)("div",null,[(0,s.Wm)(eb.f,{disabled:o.isHavingAllProducts,modelValue:o.selectedProducts,"onUpdate:modelValue":e[10]||(e[10]=t=>o.selectedProducts=t),"filter-keys":"name",density:"compact","item-value":"id","item-title":"name",variant:"outlined",color:"primary-color",chips:"",items:l.selectProducts,multiple:""},null,8,["disabled","modelValue","items"])])])])),_:1})):(0,s.kq)("",!0),l.isDelivery?((0,s.wg)(),(0,s.j4)(na.D,{key:1,class:"!tw-py-2",cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[w_,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[11]||(e[11]=t=>o.city=t),class:"tw-w-full tw-py-[7px] focus:tw-border-orange-500 tw-px-4 tw-border tw-outline-orange-500 tw-border-neutral-400 tw-border-solid tw-rounded-md"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,c_)))),128))],512),[[a.bM,o.city]])])])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1}),l.isDelivery?((0,s.wg)(),(0,s.j4)(na.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[u_,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[12]||(e[12]=t=>o.deliveryCity=t),class:"tw-w-full tw-py-[7px] focus:tw-border-orange-500 tw-px-4 tw-border tw-outline-orange-500 tw-border-neutral-400 tw-border-solid tw-rounded-md"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,p_)))),128))],512),[[a.bM,o.deliveryCity]]),m_,(0,s.Wm)(tt.hw,{"hide-details":!0,modelValue:o.deliveryCityFee,"onUpdate:modelValue":e[13]||(e[13]=t=>o.deliveryCityFee=t),clearable:"",type:"number","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"]),(0,s.Wm)(G.T,{onClick:l.handleAddCity,class:"tw-text-white tw-my-3",variant:"flat",color:"primary-color",block:""},{default:(0,s.w5)((()=>[h_])),_:1},8,["onClick"])])])),_:1})):(0,s.kq)("",!0),l.isDelivery?((0,s.wg)(),(0,s.j4)(na.D,{key:1,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[g_,(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.deliveryCities,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"tw-flex tw-items-center tw-gap-2",key:t},[(0,s._)("div",null,(0,Q.zw)(o.cities.filter((e=>e.id==t.city_id))[0]?.name),1),(0,s._)("div",null,(0,Q.zw)(t.fee)+" DH ",1),(0,s._)("div",null,[(0,s.Wm)(X.t,{color:"red",onClick:e=>l.removeCity(t.id),size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete")])),_:2},1032,["onClick"])])])))),128))])])])),_:1})):(0,s.kq)("",!0)])),_:1})]),(0,s._)("div",f_,[(0,s.Wm)(G.T,{link:"",to:{name:"user/list"},color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[v_])),_:1}),(0,s.Wm)(G.T,{onClick:l.update,loading:o.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[y_])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}var b_={data(){return{serverUrl:F,isFetched:!1,isRolesFetched:!1,isUserFetched:!1,isProductsFetched:!1,isLoading:!1,updatePassword:!1,autoId:1,cities:[],deliveryCity:1,deliveryCityFee:0,city:1,deliveryCities:[],formStatus:{firstname:{valid:!0,message:""},lastname:{valid:!0,message:""},phone:{valid:!0,message:""},email:{valid:!0,message:""},password:{valid:!0,message:""},confirmPassword:{valid:!0,message:""}},id:null,firstname:"",lastname:"",phone:"",email:"",password:"",confirmPassword:"",role:"",user_image:null,status:!1,product:null,products:[],selectedProducts:[],isMultipleProducts:!1,isHavingAllProducts:!1}},computed:{roles(){return this.$store.getters["user/roles"]},isFormReady(){return this.isFetched},isAgente(){return 2===this.role},isDelivery(){return 3===this.role},user(){return{id:this.id,firstname:this.firstname,lastname:this.lastname,phone:this.phone,email:this.email,password:this.password,product_id:this.product,deliveryCities:this.deliveryCities,city:this.city,role:this.role,status:this.status?1:0}},selectProducts(){return this.isMultipleProducts,[...this.products]},userProducts(){return this.selectedProducts}},watch:{role(t){console.log("changed"),2===t&&0===this.products.length&&(this.isProductsFetched=!1)}},methods:{update(){if(!this.validate())return!1;const t={...this.user,role:this.role,product_id:this.userProducts,city:this.city,deliveryCities:this.deliveryCities,having_all:this.isHavingAllProducts};this.isLoading=!0,K.update(t,this.updatePassword).then((t=>{"USER_UPDATED"==t.data.code&&this.$alert({type:"success",title:t.data.message})})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;switch(console.log(t),e?.code){case"VALIDATION_ERROR":for(let t in e.error)this.formStatus[t]={valid:!1,message:e.error[t][0]};break}return t})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1}))},validate(){this.formStatus["email"]=xt(this.email),this.formStatus["firstname"]=_t(this.firstname),this.formStatus["lastname"]=_t(this.lastname),this.formStatus["phone"]=_t(this.phone),this.formStatus["password"]=bt(this.password),this.formStatus["confirmPassword"]=Ct(this.password,this.confirmPassword);const t=this.formStatus["email"].valid,e=this.formStatus["firstname"].valid,r=this.formStatus["lastname"].valid,a=this.formStatus["phone"].valid;if(this.updatePassword){const s=this.formStatus["password"].valid,i=this.formStatus["confirmPassword"].valid;return t&&e&&r&&s&&i&&a}return t&&e&&r&&a},removeCity(t){this.deliveryCities=this.deliveryCities.filter((e=>e.id!==t))},handleAddCity(){if(this.deliveryCityFee<=0)return!1;this.deliveryCities.push({id:this.autoId,city_id:this.deliveryCity,fee:this.deliveryCityFee}),this.autoId+=1,this.deliveryCity=1,this.deliveryCityFee=0},async getRoles(){await K.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.isRolesFetched=!0}})).catch(this.$handleApiError)},async getUser(){return K.getUser(this.$route.params.id).then((t=>{if("USER_SUCCESS"==t?.data.code){const e=t.data.data.user;if(this.id=e.id,this.firstname=e.firstname,this.lastname=e.lastname,this.email=e.email,this.phone=e.phone,this.role=e.role,2==e.role&&(this.isHavingAllProducts=1==e.having_all,this.selectedProducts=e?.product),this.user_image=e.photo,this.status=1==e.status,this.isUserFetched=!0,3==e.role){console.log("this is delivery"),this.city=e?.city?.id;let t=0;this.deliveryCities=e.deliveryPlaces.map((e=>(parseInt(e.id)>=t&&(t=parseInt(e.id)+1),{id:e.id,city_id:e.city_id,fee:parseInt(e.fee)}))),this.autoId=t}}})).catch(this.$handleApiError)},async getProducts(){return ea.all().then((t=>{this.products=t.data.data.products,this.products.length>0?this.product=this.user.product_id:this.product=null,this.isProductsFetched=!0}),(t=>this.$handleApiError(t)))},async getCities(){return K.cities().then((t=>{console.log(t.data),this.cities=t.data.data}))}},async mounted(){0==this.roles.length?await this.getRoles():this.isRolesFetched=!0,Promise.allSettled([this.getRoles(),this.getProducts(),this.getCities(),this.getUser()]).then((()=>{this.selectedProducts.length==this.products.length&&(this.product=0,this.isMultipleProducts=!1),this.isFetched=!0}),(t=>this.$handleApiError(t)))}};const __=(0,d.Z)(b_,[["render",x_]]);var k_=__;const C_=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Add New Role "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create new Role")],-1),D_={key:0},S_={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},z_={class:"md:tw-w-1/2 tw-w-full"},U_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Role Name",-1),L_={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},P_={class:"mb-3 text-body-2 tw-text-zinc-700"},A_={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-text-xs"},$_={class:"tw-flex tw-flex-wrap tw-gap-2 tw-mt-5"},W_=["onClick"],q_={key:0},O_={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},E_=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),T_=(0,s._)("span",{class:"text-white text-capitalize"},"Create",-1);function V_(t,e,r,a,i,o){const l=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[C_,i.isFormReady?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",D_,[(0,s.Wm)(l)])),i.isFormReady?((0,s.wg)(),(0,s.iD)("div",S_,[(0,s._)("div",null,[(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",z_,[U_,(0,s.Wm)(tt.hw,{error:!i.formStatus.name.valid,"hide-details":!0,onKeyup:e[0]||(e[0]=t=>o.resetError("firstname")),modelValue:i.name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",L_,(0,Q.zw)(i.formStatus.name.message),1)])])),_:1}),(0,s.Wm)(na.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",P_,[(0,s.Uk)(" Select Permissions: "),(0,s._)("div",A_,(0,Q.zw)(i.formStatus.permissions.message),1)]),(0,s._)("div",$_,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.permissions,(t=>((0,s.wg)(),(0,s.iD)("div",{onClick:e=>o.handleClick(t),class:(0,Q.C_)([{"!tw-bg-orange-500 !tw-text-white":i.selectedPermissions.includes(t)},"tw-py-1 tw-px-2 tw-bg-gray-900/10 tw-text-gray-900 tw-rounded-lg tw-cursor-pointer"]),key:t},[(0,s._)("span",null,(0,Q.zw)(t),1)],10,W_)))),128))])])])),_:1})])),_:1})])),_:1}),(0,s.Wm)(na.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[i.show?((0,s.wg)(),(0,s.iD)("div",q_,(0,Q.zw)(i.selectedPermissions),1)):(0,s.kq)("",!0)])),_:1})])),_:1})]),(0,s._)("div",O_,[(0,s.Wm)(G.T,{link:"",to:"/",color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[E_])),_:1}),(0,s.Wm)(G.T,{onClick:o.create,loading:i.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[T_])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}var I_={data(){return{localUrl:I,isFormReady:!1,isLoading:!1,show:!1,formStatus:{name:{valid:!0,message:""},permissions:{valid:!0,message:""}},name:"",permissions:[],selectedPermissions:[]}},computed:{roles(){return this.$store.getters["user/roles"]}},methods:{create(){if(!this.validate())return!1;this.isLoading=!0,K.createRole({name:this.name,permissions:this.selectedPermissions}).then((t=>{"ROLE_ADDED"===t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.getRoles(),this.name="",this.selectedPermissions=[])})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;if("VALIDATION_ERROR"==e?.code)for(let r in e.error)this.formStatus[r]={valid:!1,message:e.error[r][0]}})).finally((()=>{this.isLoading=!1}))},handleClick(t){this.selectedPermissions.includes(t)?this.selectedPermissions=this.selectedPermissions.filter((e=>e!==t)):this.selectedPermissions.push(t)},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=_t(this.name,"Name"),this.formStatus.permissions=St(this.selectedPermissions),this.formStatus.name.valid&&this.formStatus.permissions.valid},getRoles(){K.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.isFormReady=!0}})).catch(this.$handleApiError)}},async mounted(){0==this.roles.length?await this.getRoles():this.isFormReady=!0,this.permissions=this.$store.getters["user/permissions"]}};const F_=(0,d.Z)(I_,[["render",V_]]);var R_=F_;const j_={class:"mb-5 tw-flex tw-justify-between tw-items-center"},N_=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Roles List"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage all Roles")],-1),M_={key:0},H_=(0,s._)("span",{class:"text-white"}," Add Role ",-1),Y_={key:0},Z_={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},K_={class:"mb-5 tw-flex"},B_={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},Q_={class:""};function G_(t,e,r,i,o,l){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("RolesTable");return(0,s.wg)(),(0,s.iD)("div",{key:l.roles.length},[(0,s._)("div",j_,[N_,t.$can("create_role")?((0,s.wg)(),(0,s.iD)("div",M_,[(0,s.Wm)(G.T,{color:"primary-color",link:"",to:{name:"user/addRole"},variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),H_])),_:1})])):(0,s.kq)("",!0)]),l.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Y_,[(0,s.Wm)(n)])),l.fetched?((0,s.wg)(),(0,s.iD)("div",Z_,[(0,s._)("div",K_,[(0,s.Wm)(G.T,{icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white !tw-w-0 !tw-overflow-hidden"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",B_,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,o.search]])])]),(0,s._)("div",Q_,[(0,s.Wm)(d,{roles:l.filteredRoles,columns:o.columns},null,8,["roles","columns"])])])):(0,s.kq)("",!0)])}const J_={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},X_={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},tk={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},ek=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),rk={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},ak=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),sk={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},ik={class:"tw-px-6 tw-py-4 tw-uppercase"},ok={class:"tw-px-6 tw-py-4"},lk={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},nk={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},dk={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},wk=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),ck=["value"],uk={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},pk={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},mk={class:"tw-text-white"};function hk(t,e,r,i,o,l){const n=(0,s.up)("RolePermissions"),d=(0,s.up)("RoleActions");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",J_,[(0,s._)("table",X_,[(0,s._)("thead",tk,[(0,s._)("tr",null,[ek,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",rk,(0,Q.zw)(t.name),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.items,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[ak,(0,s._)("th",sk,(0,Q.zw)(t.id),1),(0,s._)("td",ik,(0,Q.zw)(t.name),1),(0,s._)("td",ok,[(0,s.Wm)(n,{role:t},null,8,["role"])]),(0,s._)("td",lk,[(0,s.Wm)(d,{role:t},null,8,["role"])])])))),128))])])]),(0,s._)("div",nk,[(0,s._)("div",dk,[wk,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,ck)))),128))],512),[[a.bM,o.paginationLimit]])]),(0,s._)("div",uk,[(0,s._)("div",pk,(0,Q.zw)(l.prevRange+1)+" - "+(0,Q.zw)(o.currentPage==l.pageCount?r.roles.length:l.nextRange)+" of "+(0,Q.zw)(r.roles.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.pageCount,(t=>((0,s.wg)(),(0,s.j4)(G.T,{onClick:e=>o.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==o.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",mk,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const gk={key:0},fk={class:"tw-flex tw-flex-wrap tw-gap-2"};function vk(t,e,r,a,i,o){const l=(0,s.up)("popup");return["admin","agente","delivery"].includes(r.role.name)?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",gk,[t.$can("update_role")?((0,s.wg)(),(0,s.j4)(G.T,{key:0,to:"/users/roles/update/"+r.role.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1},8,["to"])):(0,s.kq)("",!0),t.$can("delete_role")&&"admin"!==r.role.name?((0,s.wg)(),(0,s.j4)(G.T,{key:1,onClick:e[0]||(e[0]=t=>i.showPopupDelete=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(l,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this Role?</p> You won't be able to revert this!",loading:i.isLoadingDelete,visible:i.showPopupDelete,onResolved:o.handleResolvedDelete},null,8,["loading","visible","onResolved"]),(0,s.Wm)(l,{noConfirm:!0,type:"info",title:"Permissions",loading:i.isLoadingShow,visible:i.showPopupShow,onResolved:o.handleResolvedShow},{default:(0,s.w5)((()=>[(0,s._)("div",fk,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.permissions,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"tw-py-1 tw-px-2 tw-bg-gray-900/10 tw-text-gray-900 tw-rounded-lg tw-cursor-pointer",key:t},(0,Q.zw)(t),1)))),128))])])),_:1},8,["loading","visible","onResolved"])]))}var yk={props:["rowIndex","prop","role"],name:"roleActions",data(){return{showPopupDelete:!1,showPopupShow:!1,isLoadingDelete:!1,isLoadingShow:!1,permissions:["create_user","delete_user","update_user","show_user"]}},methods:{handleResolvedDelete(t){t?(this.isLoadingDelete=!0,K.deleteRole(this.role.id).then((t=>{"ROLE_DELETED"==t.data.code&&(this.isLoadingDelete=!1,this.$alert({type:"success",title:"Role Deleted Successfully"})),K.roles().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("user/setRoles",t.data.data.roles)})).catch(this.$handleApiError)})).catch(this.$handleApiError).finally((()=>{this.isLoadingDelete=!1,this.showPopupDelete=!1}))):this.showPopupDelete=!1},handleResolvedShow(t){t?console.log(t):this.showPopupShow=!1}}};const xk=(0,d.Z)(yk,[["render",vk]]);var bk=xk;const _k={class:"tw-h-100 tw-flex tw-items-center tw-max-w-[750px] tw-flex-wrap tw-gap-2"},kk=["title"];function Ck(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",_k,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.permissions,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"tw-py-0 tw-px-2 tw-text-xs tw-h-5 tw-bg-gray-900/10 tw-text-gray-900 tw-rounded-lg",title:t.description,key:t.name},(0,Q.zw)(t.name),9,kk)))),128))])}var Dk={props:["role"],name:"rolePermissions",data(){return{}},computed:{permissions(){return this.role.permissions.map((t=>t))}}};const Sk=(0,d.Z)(Dk,[["render",Ck]]);var zk=Sk,Uk={props:["columns","roles"],components:{RoleActions:bk,RolePermissions:zk},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.roles.length/this.paginationLimit)},items(){return this.roles.slice(this.prevRange,this.nextRange)}},methods:{}};const Lk=(0,d.Z)(Uk,[["render",hk]]);var Pk=Lk,Ak={components:{RolesTable:Pk},data(){return{localUrl:I,search:"",columns:[{prop:"id",name:"#"},{prop:"name",name:"Role Name"},{prop:"permissions",name:"Permissions"},{name:"Acions",prop:"roles"}]}},computed:{roles(){return this.$store.getters["user/roles"]},fetched(){return this.$store.getters["user/fetchedRoles"]},filteredRoles(){return this.roles.filter((t=>{const e=t.permissions.map((t=>t.name));return!!(""===this.search||t.name.toLocaleLowerCase().includes(this.search.toLocaleLowerCase())||e.includes(this.search.toLocaleLowerCase())||e.some((t=>t.toLowerCase().includes(this.search.toLocaleLowerCase()))))}))}},methods:{getRoles(){return K.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.$store.dispatch("user/setFetchedRoles",!0)}})).catch(this.$handleApiError)}},mounted(){this.rolesFetched||this.getRoles()}};const $k=(0,d.Z)(Ak,[["render",G_]]);var Wk=$k;const qk=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Update Role "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Update existing role")],-1),Ok={key:0},Ek={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Tk={class:"md:tw-w-1/2 tw-w-full"},Vk=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Role Name ",-1),Ik={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Fk={class:"mb-3 text-body-2 tw-text-zinc-700"},Rk={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-text-xs"},jk={class:"tw-flex tw-flex-wrap tw-gap-2 tw-mt-5"},Nk=["onClick"],Mk={key:0},Hk={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Yk=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),Zk=(0,s._)("span",{class:"text-white text-capitalize"},"Update",-1);function Kk(t,e,r,a,i,o){const l=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[qk,i.isFormReady?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Ok,[(0,s.Wm)(l)])),i.isFormReady?((0,s.wg)(),(0,s.iD)("div",Ek,[(0,s._)("div",null,[(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",Tk,[Vk,(0,s.Wm)(tt.hw,{error:!i.formStatus.name.valid,"hide-details":!0,onKeyup:e[0]||(e[0]=t=>o.resetError("firstname")),modelValue:i.name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",Ik,(0,Q.zw)(i.formStatus.name.message),1)])])),_:1}),(0,s.Wm)(na.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",Fk,[(0,s.Uk)(" Select Permissions: "),(0,s._)("div",Rk,(0,Q.zw)(i.formStatus.permissions.message),1)]),(0,s._)("div",jk,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.permissions,(t=>((0,s.wg)(),(0,s.iD)("div",{onClick:e=>o.handleClick(t),class:(0,Q.C_)([{"!tw-bg-orange-500 !tw-text-white":i.selectedPermissions.includes(t)},"tw-py-1 tw-px-2 tw-bg-gray-900/10 tw-text-gray-900 tw-rounded-lg tw-cursor-pointer"]),key:t},(0,Q.zw)(t),11,Nk)))),128))])])])),_:1})])),_:1})])),_:1}),(0,s.Wm)(na.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[i.show?((0,s.wg)(),(0,s.iD)("div",Mk,(0,Q.zw)(i.selectedPermissions),1)):(0,s.kq)("",!0)])),_:1})])),_:1})]),(0,s._)("div",Hk,[(0,s.Wm)(G.T,{link:"",to:"/users/roles",color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[Yk])),_:1}),(0,s.Wm)(G.T,{onClick:o.update,loading:i.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[Zk])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}var Bk={data(){return{localUrl:I,isFormReady:!1,isLoading:!1,show:!1,formStatus:{name:{valid:!0,message:""},permissions:{valid:!0,message:""}},name:"",permissions:[],selectedPermissions:[]}},computed:{roles(){return this.$store.getters["user/roles"]}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,K.updateRole(this.$route.params.id,{name:this.name,permissions:this.selectedPermissions}).then((t=>{"ROLE_UPDATED"===t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.getRoles())})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;if("VALIDATION_ERROR"==e?.code)for(let r in e.error)this.formStatus[r]={valid:!1,message:e.error[r][0]}})).finally((()=>{this.isLoading=!1}))},handleClick(t){this.selectedPermissions.includes(t)?this.selectedPermissions=this.selectedPermissions.filter((e=>e!==t)):this.selectedPermissions.push(t)},addPermissions(t){return t},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=_t(this.name,"Name"),this.formStatus.permissions=St(this.selectedPermissions),this.formStatus.name.valid&&this.formStatus.permissions.valid},getRole(){K.getRole(this.$route.params.id).then((t=>{this.name=t.data.data.role,this.selectedPermissions=[...t.data.data.permission],this.isFormReady=!0}))},getRoles(){K.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.isFormReady=!0}})).catch(this.$handleApiError)}},async mounted(){await this.getRole(),this.permissions=this.$store.getters["user/permissions"]}};const Qk=(0,d.Z)(Bk,[["render",Kk]]);var Gk=Qk,Jk={name:"users",path:"/users",component:sa,meta:{module:"user"},children:[{name:"user/list",path:"",component:tb,meta:{module:"user",subModule:"user/list",title:"Users List",gate:"show_all_users"}},{name:"user/add",path:"add",component:Fb,meta:{module:"user",subModule:"user/add",title:"Add User",gate:"create_user"}},{name:"user/update",path:"update/:id",component:k_,meta:{module:"user",subModule:"user/update",title:"Update User",gate:"update_user"}},{name:"user/addRole",path:"addRole",component:R_,meta:{module:"user",subModule:"user/addRole",title:"Add Role",gate:"create_role"}},{name:"user/roles",path:"roles",component:Wk,meta:{module:"user",subModule:"user/roles",title:"Roles List",gate:"show_all_roles"}},{name:"user/updateRole",path:"roles/update/:id",component:Gk,meta:{module:"user",subModule:"user/updateRole",title:"Update Role",gate:"view_role"}}]};const Xk={class:"mb-5 tw-flex tw-justify-between tw-items-center"},tC=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Sales List "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your sales")],-1),eC={key:0},rC=(0,s._)("span",{class:"text-white"}," Add Sale ",-1),aC={key:0},sC={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},iC={class:"mb-5 tw-flex"},oC={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},lC={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},nC={class:""};function dC(t,e,r,i,o,l){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("SalesAnalytics"),w=(0,s.up)("IndexFilter"),c=(0,s.up)("SalesTable"),u=(0,s.up)("AddSale"),p=(0,s.up)("NewAddSale");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",Xk,[tC,t.$can("create_sale")&&l.fetched?((0,s.wg)(),(0,s.iD)("div",eC,[(0,s.Wm)(G.T,{color:"primary-color",onClick:e[0]||(e[0]=t=>o.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),rC])),_:1})])):(0,s.kq)("",!0)]),l.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",aC,[(0,s.Wm)(n)])),l.fetched?((0,s.wg)(),(0,s.iD)("div",sC,[(0,s.Wm)(d,{sales:l.sales},null,8,["sales"]),(0,s._)("div",iC,[(0,s.Wm)(G.T,{onClick:e[1]||(e[1]=t=>o.showFilters=!o.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",oC,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by client, phone..."},null,512),[[a.nr,o.search]])]),(0,s._)("div",lC,[(0,s.Wm)(X.t,{class:"tw-text-gray-500",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pound")])),_:1}),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.searchId=t),type:"number",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search By ID"},null,512),[[a.nr,o.searchId]])]),(0,s.Wm)(er.C),(0,s.Wm)(G.T,{onClick:l.handleReset,icon:"",rounded:"lg",variant:"flat",size:"small",disabled:o.isButtonDisabled,loading:o.isLoadingReset,color:"red",class:"text-white tw-mr-2"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",icon:"mdi-restart-alert",size:"xx-large"})])),_:1},8,["onClick","disabled","loading"]),(0,s.Wm)(G.T,{onClick:l.getSales,icon:"",rounded:"lg",variant:"flat",size:"small",color:"blue",class:"text-white tw-mr-2"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",icon:"mdi-autorenew",size:"xx-large"})])),_:1},8,["onClick"])]),(0,s._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[1000px] !tw-overflow-visible":o.showFilters}])},[(0,s.Wm)(w,{sales:l.sales,search:o.search,"search-id":o.searchId,filtered:o.filteredSales,"onUpdate:filtered":e[4]||(e[4]=t=>o.filteredSales=t),selected:l.selectedSales},null,8,["sales","search","search-id","filtered","selected"])],2),(0,s._)("div",nC,[((0,s.wg)(),(0,s.j4)(c,{onSelected:l.handleSelected,"selected-reset":o.selected,key:o.filteredSales.length,sales:o.filteredSales},null,8,["onSelected","selected-reset","sales"]))]),(0,s.Wm)(u,{onCancel:e[5]||(e[5]=t=>o.showPopup=!1),visible:!1}),(0,s.Wm)(p,{onCancel:e[6]||(e[6]=t=>o.showPopup=!1),visible:o.showPopup,"onUpdate:visible":e[7]||(e[7]=t=>o.showPopup=t)},null,8,["visible"])])):(0,s.kq)("",!0)])}const wC={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},cC={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},uC=(0,s._)("h1",{class:"tw-text-lg"},"Create Order",-1),pC={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},mC={class:"md:tw-col-span-6 tw-col-span-12"},hC=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),gC={class:"md:tw-col-span-6 tw-col-span-12"},fC=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),vC={class:"md:tw-col-span-6 tw-col-span-12"},yC=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),xC=["value"],bC={class:"md:tw-col-span-6 tw-col-span-12"},_C=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),kC={class:"md:tw-col-span-12 tw-col-span-12"},CC=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Price",-1),DC={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},SC=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Warehouse",-1),zC=(0,s._)("option",{value:0}," Select ",-1),UC=["value"],LC={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},PC=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Product",-1),AC=(0,s._)("option",{value:0}," Select ",-1),$C=["value"],WC={class:"md:tw-col-span-6 tw-col-span-12"},qC=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variations",-1),OC=(0,s._)("option",{value:0}," Select ",-1),EC=["value"],TC={class:"md:tw-col-span-6 tw-col-span-12"},VC=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),IC={class:"md:tw-col-span-6 tw-col-span-12"},FC={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},RC={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit -tw-rotate-90 tw-scale-75"},jC=(0,s._)("div",{class:"tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),NC={class:"tw-flex tw-flex-col tw-justify-center"},MC={class:"md:tw-col-span-6 tw-col-span-12"},HC={key:0,class:"md:tw-col-span-12 tw-col-span-12"},YC={class:"tw-max-w-full tw-overflow-auto"},ZC={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},KC={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},BC={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},QC={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},GC={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},JC={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},XC={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},tD={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},eD={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},rD=(0,s._)("span",{class:"text-white"}," Cancel ",-1),aD=(0,s._)("span",{class:"text-white"}," Save ",-1);function sD(t,e,r,i,o,l){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(d,{onCancel:e[12]||(e[12]=e=>t.$emit("cancel")),visible:r.visible},{default:(0,s.w5)((()=>[o.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",wC,[(0,s.Wm)(n)])),o.isLoaded?((0,s.wg)(),(0,s.iD)("div",cC,[uC,(0,s._)("div",pC,[(0,s._)("div",mC,[hC,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sale.fullname]])]),(0,s._)("div",gC,[fC,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>o.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sale.phone]])]),(0,s._)("div",vC,[yC,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,xC)))),128))],512),[[a.bM,o.sale.city]])]),(0,s._)("div",bC,[_C,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>o.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sale.adresse]])]),(0,s._)("div",kC,[CC,(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=t=>o.sale.price=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sale.price]])]),(0,s._)("div",DC,[SC,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>o.warehouse_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[zC,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.warehouses,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,UC)))),128))],512),[[a.bM,o.warehouse_id]])]),(0,s._)("div",LC,[PC,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>o.product_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[AC,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.filtredProducts,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,$C)))),128))],512),[[a.bM,o.product_id]])]),(0,s._)("div",WC,[qC,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>o.product_variation_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[OC,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.size)+" / "+(0,Q.zw)(t.color),9,EC)))),128))],512),[[a.bM,o.product_variation_id]])]),(0,s._)("div",TC,[VC,(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e[8]||(e[8]=t=>o.quantity=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.quantity]])]),(0,s._)("div",IC,[(0,s._)("div",FC,[(0,s._)("label",RC,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=t=>o.sale.counts_from_warehouse=t),class:"tw-sr-only tw-peer"},null,512),[[a.e8,o.sale.counts_from_warehouse]]),jC]),(0,s._)("label",NC,[(0,s._)("span",{class:(0,Q.C_)([[o.sale.counts_from_warehouse?"tw-text-orange-500":"tw-text-neutral-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Warehouse",2),(0,s._)("span",{class:(0,Q.C_)([[o.sale.counts_from_warehouse?"tw-text-neutral-500":"tw-text-orange-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Delivery",2)])])]),(0,s._)("div",MC,[(0,s._)("button",{onClick:e[10]||(e[10]=(...t)=>l.addItem&&l.addItem(...t)),class:"tw-block tw-ml-auto tw-py-1 tw-px-4 tw-rounded tw-bg-emerald-500 tw-text-white"}," Add ")]),o.items.length?((0,s.wg)(),(0,s.iD)("div",HC,[(0,s._)("div",YC,[(0,s._)("table",ZC,[(0,s._)("thead",KC,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["product","variation","quantity","warehouse","actions"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",BC,(0,Q.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.items,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,s._)("th",QC,(0,Q.zw)(t.product.name),1),(0,s._)("th",GC,(0,Q.zw)(t.product_variation.size)+" / "+(0,Q.zw)(t.product_variation.color),1),(0,s._)("th",JC,(0,Q.zw)(t.quantity),1),(0,s._)("th",XC,(0,Q.zw)(t.product_variation.warehouse.name),1),(0,s._)("th",tD,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:e=>l.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])])])])):(0,s.kq)("",!0)]),(0,s._)("div",eD,[(0,s.Wm)(G.T,{onClick:e[11]||(e[11]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[rD])),_:1}),(0,s.Wm)(G.T,{loading:o.isLoading,onClick:l.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[aD])),_:1},8,["loading","onClick"])])])):(0,s.kq)("",!0)])),_:1},8,["visible"])])}var iD={props:["visible"],data(){return{isLoading:!1,isLoaded:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],sale:{fullname:"",phone:"",city:"",adresse:"",price:0,counts_from_warehouse:!0}}},watch:{product_id(){this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0}},computed:{products(){return this.$store.getters["product/products"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,r)=>e.indexOf(t.id)===r))},filtredProducts(){return 0==this.warehouse_id?[]:this.products.filter((t=>t.variations.some((t=>t.warehouse_id==this.warehouse_id))))},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city}},methods:{create(){if(!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;this.isLoading=!0;const t={fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,orderItems:this.items,counts_from_warehouse:!0};Ir.create(t).then((t=>{"SALE_ADDED"==t.data.code&&(this.$emit("cancel"),this.$alert({type:"success",title:"Sale created successfully"}),this.$store.dispatch("sale/add",t.data.data.sale))}),this.$handleApiError).finally((()=>this.isLoading=!1))},deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},addItem(){if([this.warehouse_id,this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),r={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:0};this.items.push(r),this.product_id=0,this.product_variation_id=0,this.item_id+=1},getProducts(){ea.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("product/setProducts",t.data.data.products)}),(t=>{this.$handleApiError(t)})).finally((()=>this.isLoaded=!0))}},mounted(){this.getProducts(),this.sale.city=this.cities[0].name||1}};const oD=(0,d.Z)(iD,[["render",sD]]);var lD=oD;const nD={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},dD={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[950px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},wD=(0,s._)("h1",{class:"tw-text-lg"},"Update Order",-1),cD={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},uD={class:"md:tw-col-span-6 tw-col-span-12"},pD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),mD={class:"md:tw-col-span-6 tw-col-span-12"},hD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),gD={class:"md:tw-col-span-6 tw-col-span-12"},fD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),vD=["value"],yD=["value"],xD={class:"md:tw-col-span-6 tw-col-span-12"},bD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),_D={class:"md:tw-col-span-12 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},kD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Confirmation",-1),CD={class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},DD={class:"tw-col-span-12"},SD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note:",-1),zD={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},UD={class:"tw-col-span-12 md:tw-col-span-4"},LD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Date:",-1),PD={class:"tw-col-span-12 md:tw-col-span-8"},AD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Note:",-1),$D={class:"md:tw-col-span-6 tw-col-span-12"},WD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Affectation",-1),qD={class:"md:tw-col-span-6 tw-col-span-12"},OD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Upsell",-1),ED=["value"],TD={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-4"},VD={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},ID={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit -tw-rotate-90 tw-scale-75"},FD=(0,s._)("div",{class:"tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),RD={class:"tw-flex tw-flex-col tw-justify-center"},jD=(0,s._)("p",{class:"tw-col-span-12 tw-mt-5 tw-mb-2"},"Order Items",-1),ND={key:1,class:"tw-col-span-12 tw-rounded tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},MD={key:2,class:"md:tw-col-span-12 tw-col-span-12"},HD={class:"tw-max-w-full tw-overflow-auto"},YD={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},ZD={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},KD={class:"tw-mx-auto tw-w-[50px] tw-h-[35px] tw-shadow tw-shadow-gray-200 tw-rounded tw-overflow-hidden tw-cursor-pointer"},BD=["src"],QD={scope:"row",class:"tw-pr-6 tw-py-2 tw-font-medium tw-text-gray-900"},GD=["onUpdate:modelValue"],JD=(0,s._)("option",{value:0},"Select",-1),XD=["value"],tS={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},eS=["disabled","onUpdate:modelValue"],rS=(0,s._)("option",{value:0},"Select",-1),aS=["value"],sS={key:0},iS={key:1},oS={key:2},lS={key:3},nS=["value"],dS={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},wS={class:"md:tw-col-span-6 tw-col-span-12"},cS=["onUpdate:modelValue"],uS={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},pS={key:0},mS={key:1,class:"md:tw-col-span-6 tw-col-span-12"},hS=["onUpdate:modelValue"],gS={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},fS={class:"tw-w-full tw-col-span-12 tw-flex tw-justify-end tw-mt-3"},vS=(0,s._)("span",{class:"!tw-text-sm !tw-capitalize"},"Add",-1),yS={class:"md:tw-col-span-12 tw-col-span-12"},xS={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},bS=(0,s._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),_S={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},kS=(0,s._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-mb-2 tw-whitespace-nowrap"},"Price: ",-1),CS={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},DS=(0,s._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),SS={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},zS=(0,s._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-whitespace-nowrap"},"Total Price: ",-1),US={class:"tw-text-xl tw-text-green-500 tw-font-bold tw-px-2 tw-py-1 tw-rounded tw-bg-green-100"},LS={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},PS=(0,s._)("span",{class:"text-white"}," Cancel ",-1),AS=(0,s._)("span",{class:"text-white"}," Create ",-1);function $S(t,e,r,i,o,l){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("AddOrderConfirmation"),w=(0,s.up)("AddOrderAffectation"),c=(0,s.up)("ProductOffers"),u=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(u,{onCancel:e[14]||(e[14]=e=>t.$emit("update:visible",!1)),visible:r.visible},{default:(0,s.w5)((()=>[l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",nD,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",dD,[wD,(0,s._)("div",cD,[(0,s._)("div",uD,[pD,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sale.fullname]])]),(0,s._)("div",mD,[hD,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>o.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sale.phone]])]),(0,s._)("div",gD,[fD,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[(0,s._)("option",{disabled:"",value:o.sale.city},(0,Q.zw)(o.sale.city),9,vD),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,yD)))),128))],512),[[a.bM,o.sale.city]])]),(0,s._)("div",xD,[bD,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>o.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sale.adresse]])]),(0,s._)("div",_D,[kD,(0,s.Wm)(d,{order:o.sale,id:o.sale.id,confirmation:o.sale.confirmation,"onUpdate:confirmation":e[4]||(e[4]=t=>o.sale.confirmation=t),onConfirmed:e[5]||(e[5]=t=>o.sale.note=t),onReported:l.handleReported,onChange:l.handleConfirmationChange},null,8,["order","id","confirmation","onReported","onChange"]),(0,s._)("div",CD,[(0,s._)("div",DD,[SD,(0,s.wy)((0,s._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[6]||(e[6]=t=>o.sale.note=t)},null,512),[[a.nr,o.sale.note]])])]),"reporter"==o.sale.confirmation&&o.sale.reported_agente_date?((0,s.wg)(),(0,s.iD)("div",zD,[(0,s._)("div",UD,[LD,(0,s._)("div",null,(0,Q.zw)(o.sale.reported_agente_date.split("T")[0]),1)]),(0,s._)("div",PD,[AD,(0,s.wy)((0,s._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[7]||(e[7]=t=>o.sale.reported_agente_note=t)},null,512),[[a.nr,o.sale.reported_agente_note]])])])):(0,s.kq)("",!0)]),(0,s._)("div",$D,[WD,(0,s.Wm)(w,{"product-ids":l.product_ids,items:o.items,"onUpdate:items":e[8]||(e[8]=t=>o.items=t),order:o.sale,confirmation:o.sale.confirmation,affectation:o.sale.affectation,"onUpdate:affectation":e[9]||(e[9]=t=>o.sale.affectation=t),id:o.sale.id},null,8,["product-ids","items","order","confirmation","affectation","id"])]),(0,s._)("div",qD,[OD,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>o.sale.upsell=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.upsells,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,key:t.id},(0,Q.zw)(t.name),9,ED)))),128))],512),[[a.bM,o.sale.upsell]])]),(0,s.kq)("",!0),(0,s._)("div",TD,[(0,s._)("div",VD,[(0,s._)("label",ID,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=t=>o.sale.counts_from_warehouse=t),class:"tw-sr-only tw-peer"},null,512),[[a.e8,o.sale.counts_from_warehouse]]),FD]),(0,s._)("label",RD,[(0,s._)("span",{class:(0,Q.C_)([[o.sale.counts_from_warehouse?"tw-text-orange-500":"tw-text-neutral-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Warehouse",2),(0,s._)("span",{class:(0,Q.C_)([[o.sale.counts_from_warehouse?"tw-text-neutral-500":"tw-text-orange-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Delivery",2)])])]),jD,o.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",ND," No Order items ")),o.items.length?((0,s.wg)(),(0,s.iD)("div",MD,[(0,s._)("div",HD,[((0,s.wg)(),(0,s.iD)("table",{key:o.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,s._)("thead",YD,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",ZD,(0,Q.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.items,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:t.product.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[((0,s.wg)(),(0,s.iD)("th",{scope:"row",class:"tw-px-2 tw-py-2",key:t.product.id},[(0,s._)("div",KD,[l.product_images[e]?((0,s.wg)(),(0,s.iD)("img",{key:0,class:"tw-w-full tw-h-full tw-object-contain",src:o.serverUrl+"storage/"+l.product_images[e]},null,8,BD)):(0,s.kq)("",!0)])])),(0,s._)("th",QD,[(0,s._)("div",null,[(0,s._)("div",null,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e=>t.product.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[JD,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.filtredProducts,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,XD)))),128))],8,GD),[[a.bM,t.product.id]])])])]),(0,s._)("th",tS,[(0,s._)("div",null,[0!=t.product.id?(0,s.wy)(((0,s.wg)(),(0,s.iD)("select",{key:0,disabled:1==l.getVariations(t.product)?.variations?.length,"onUpdate:modelValue":e=>t.product_variation.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[rS,l.getVariations(t.product)?.variations?.length>1?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(l.getVariations(t.product)?.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},[t.size||t.color?t.size&&"-"!=t.size&&t.color&&"-"!=t.color?((0,s.wg)(),(0,s.iD)("p",iS,(0,Q.zw)(t.size)+" / "+(0,Q.zw)(t.color),1)):t.size&&"-"!=t.size?((0,s.wg)(),(0,s.iD)("p",oS,(0,Q.zw)(t.size),1)):t.color?((0,s.wg)(),(0,s.iD)("p",lS,(0,Q.zw)(t.color),1)):(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",sS,"-"))],8,aS)))),128)):((0,s.wg)(),(0,s.iD)("option",{key:1,value:l.getVariations(t.product)?.variations[0]?.id}," Default ",8,nS))],8,eS)),[[a.bM,t.product_variation.id]]):(0,s.kq)("",!0)])]),(0,s._)("th",dS,[(0,s._)("div",wS,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,cS),[[a.nr,t.quantity]])])]),(0,s._)("th",uS,[(0,s._)("div",null,[null==t.price?((0,s.wg)(),(0,s.iD)("div",pS," - ")):((0,s.wg)(),(0,s.iD)("div",mS,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e=>t.price=e,placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,hS),[[a.nr,t.price]])]))])]),(0,s._)("th",gS,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:e=>l.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])]))])])):(0,s.kq)("",!0),(0,s._)("div",fS,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:l.addNewRow,class:"mr-2 !tw-px-1 !tw-py-1 !tw-pr-2 tw-flex tw-items-center tw-gap-2","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1}),vS])),_:1},8,["onClick"])])]),(0,s._)("div",yS,[(0,s.Wm)(c,{"product-ids":l.product_ids},null,8,["product-ids"])]),(0,s._)("div",xS,[bS,(0,s._)("div",_S,[kS,(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e[13]||(e[13]=t=>o.sale.price=t),class:"tw-py-1 tw-max-w-[100px] tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sale.price]])])]),(0,s._)("div",CS,[DS,(0,s._)("div",SS,[zS,(0,s._)("div",US,(0,Q.zw)(o.currency)+" "+(0,Q.zw)(l.total_price),1)])])]),(0,s._)("div",LS,[(0,s.Wm)(G.T,{onClick:l.handleCancel,color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[PS])),_:1},8,["onClick"]),(0,s.Wm)(G.T,{loading:o.isLoading,onClick:l.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[AS])),_:1},8,["loading","onClick"])])])):(0,s.kq)("",!0)])),_:1},8,["visible"])])}var WS={components:{AddOrderConfirmation:Cc,AddOrderAffectation:$c,ProductOffers:Kc},props:["visible","order"],data(){return{upsells:$n,serverUrl:F,currency:R,isLoading:!1,isAddItem:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],reported_date:null,price:0,sale:{fullname:"",phone:"",city:"",adresse:"",price:0,upsell:null,confirmation:null,counts_from_warehouse:!0}}},watch:{product_id(){this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0},"sale.confirmation":{deep:!0,handler(t){"confirmer"!=t&&(this.sale.affectation=null,this.sale.delivery=null)}},product_ids:{deep:!0,handler(t,e){this.items.map(((r,a)=>{if(0==r.product.id)return r;const s=this.getVariations(r.product)?.variations;return e[a]==t[r]||s.some((t=>t.id==r.product_variation.id))||(r.product_variation={id:0},r.product_variation_id=0),1==s?.length&&(r.product_variation=s[0],r.product_variation_id=s[0].id),r}))}}},computed:{products(){return this.$store.getters["product/products"]},product_images(){return this.items.map((t=>0==t.product.id?null:this.products.find((e=>e.id==t.product.id))?.image))},product_ids(){return this.items.map((t=>t.product.id))},isLoaded(){return this.$store.getters["product/fetched"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,r)=>e.indexOf(t.id)===r))},filtredProducts(){return this.products},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},selectedProduct(){return this.products.find((t=>t.id==this.product_id))},total_price:{get(){const t=this.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(this.sale.price?this.sale.price:0)+parseFloat(t)}},isItemsValid(){if(0==this.items.length)return!1;const t=this.items.some((t=>0==t.product.id||0==t.product_variation_id||0==t.quantity));return!t},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city}},methods:{deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},handleConfirmationChange(){"confirmer"!=this.sale.confirmation&&(this.sale.affectation=null)},addNewRow(){const t={id:this.item_id,product_id:0,product_ref:null,product:{id:0},product_variation:{id:0},product_variation_id:0,quantity:0,price:0};this.items.push(t)},getVariations(t){return this.products.find((e=>e.id==t.id))},formatItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const r=e.variations.find((e=>e.id==t.product_variation.id));return r?{...t,product:e,product_id:e.id,product_variation:r,product_variation_id:r.id,product_ref:e.ref}:t}));return this.items=t,t},addItem(){if([this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),r={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:this.price};this.items.push(r),this.product_id=0,this.product_variation_id=0,this.price=0,this.item_id+=1},create(){if(this.formatItems(),!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;if("annuler"==this.sale.confirmation&&!this.sale.note)return this.$alert({type:"warning",title:"Add Cancellation note."}),!1;if(!this.isItemsValid)return this.$alert({type:"warning",title:"Order Items are not valid"}),!1;this.isLoading=!0;const t={fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,upsell:this.sale.upsell,counts_from_warehouse:this.sale.counts_from_warehouse,orderItems:this.items,confirmation:this.sale.confirmation,note:this.sale.note,affectation:this.sale.affectation,reported_agente_note:this.sale.reported_agente_note,reported_agente_date:this.sale.reported_agente_date};this.isLoading=!0,Ir.create(t).then((t=>{"SALE_ADDED"==t.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"New Order Added"}),this.$store.dispatch("sale/add",t.data.data.sale),this.$emit("update:visible",!1))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},handleCancel(){this.$emit("update:visible",!1)},handleReported(t){this.sale.reported_agente_note=t.reported_agente_note,this.sale.reported_agente_date=t.reported_agente_date},checkVariant(t,e){const r=this.products.find((e=>e.id==t));if(!r)return{exists:!1};let a=r.variations.find((t=>t.id==e));return a||(a=r.variations.length>0?r.variations[0]:null),{exists:!0,variation:a}},getProducts(){return ea.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){}};const qS=(0,d.Z)(WS,[["render",$S]]);var OS=qS;const ES={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},TS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},VS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},IS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},FS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},RS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},jS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},NS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},MS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"};function HS(t,e,r,a,i,o){const l=(0,s.up)("DateFilter"),n=(0,s.up)("UpsellFilter"),d=(0,s.up)("ConfirmationFilter"),w=(0,s.up)("AffectationFilter"),c=(0,s.up)("AgenteFilter"),u=(0,s.up)("DeliveryFilter"),p=(0,s.up)("ProductFilter"),m=(0,s.up)("ExcelExport");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",ES,[(0,s._)("div",TS,[(0,s.Wm)(l,{filter:i.config.dateFilter,"onUpdate:filter":e[0]||(e[0]=t=>i.config.dateFilter=t)},null,8,["filter"])]),(0,s._)("div",VS,[(0,s.Wm)(n,{filter:i.config.upsellFilter,"onUpdate:filter":e[1]||(e[1]=t=>i.config.upsellFilter=t)},null,8,["filter"])]),(0,s._)("div",IS,[(0,s.Wm)(d,{filter:i.config.confirmationFilter,"onUpdate:filter":e[2]||(e[2]=t=>i.config.confirmationFilter=t)},null,8,["filter"])]),(0,s._)("div",FS,[(0,s.Wm)(w,{filter:i.config.affectationFilter,"onUpdate:filter":e[3]||(e[3]=t=>i.config.affectationFilter=t)},null,8,["filter"])]),(0,s._)("div",RS,[(0,s.Wm)(c,{filter:i.config.agenteFilter,"onUpdate:filter":e[4]||(e[4]=t=>i.config.agenteFilter=t)},null,8,["filter"])]),(0,s._)("div",jS,[(0,s.Wm)(u,{filter:i.config.deliveryFilter,"onUpdate:filter":e[5]||(e[5]=t=>i.config.deliveryFilter=t)},null,8,["filter"])]),(0,s._)("div",NS,[(0,s.Wm)(p,{filter:i.config.productFilter,"onUpdate:filter":e[6]||(e[6]=t=>i.config.productFilter=t)},null,8,["filter"])]),(0,s._)("div",MS,[(0,s.Wm)(m,{selected:r.selected,filtered:r.filtered,sales:r.sales},null,8,["selected","filtered","sales"])])])])}const YS=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),ZS=["onClick"];function KS(t,e,r,a,i,o){const l=(0,s.up)("VueDatePicker");return(0,s.wg)(),(0,s.iD)("div",null,[YS,(0,s.Wm)(l,{modelValue:i.date,"onUpdate:modelValue":[e[0]||(e[0]=t=>i.date=t),o.onDateRangePicked],onCleared:o.cleared,format:i.dateFilterFormat,range:"","preset-ranges":i.presetRanges},{yearly:(0,s.w5)((({label:t,range:e,presetDateRange:r})=>[(0,s._)("span",{onClick:t=>r(e)},(0,Q.zw)(t),9,ZS)])),_:1},8,["modelValue","onCleared","onUpdate:modelValue","format","preset-ranges"])])}var BS={data(){return{date:["",""],dateFilterFormat:"yyyy-MM-dd",formattedStartDate:"",formattedEndDate:"",presetRanges:[{label:"Today",range:[new Date,new Date]},{label:"Yesterday",range:[(0,$i.Z)(new Date,1),(0,$i.Z)(new Date,1)]},{label:"This month",range:[(0,Wi.Z)(new Date),(0,qi.Z)(new Date)]},{label:"Last month",range:[(0,Wi.Z)((0,Oi.Z)(new Date,1)),(0,qi.Z)((0,Oi.Z)(new Date,1))]},{label:"This year",range:[(0,Ei.Z)(new Date),(0,Ti.Z)(new Date)]}]}},watch:{date(){this.$emit("update:filter",[this.formattedStartDate,this.formattedEndDate])}},methods:{onDateRangePicked(t){t?(this.formattedStartDate=t[0],this.formattedEndDate=t[1]):(this.formattedStartDate=null,this.formattedEndDate=null)},cleared(){this.date=["",""]}}};const QS=(0,d.Z)(BS,[["render",KS]]);var GS=QS;const JS=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Upsell",-1),XS={class:"tw-relative"},tz=(0,s._)("option",{value:"all"},"Select",-1),ez=(0,s._)("option",{value:"oui"},"Oui",-1),rz=(0,s._)("option",{value:"non"},"Non",-1),az=[tz,ez,rz];function sz(t,e,r,i,o,l){return(0,s.wg)(),(0,s.iD)("div",null,[JS,(0,s._)("div",XS,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.value=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},az,512),[[a.bM,o.value]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])}var iz={data(){return{value:"all"}},watch:{value(t){this.$emit("update:filter",t)}}};const oz=(0,d.Z)(iz,[["render",sz]]);var lz=oz;const nz=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Delivery",-1),dz={class:"tw-relative"},wz=["value"];function cz(t,e,r,i,o,l){return(0,s.wg)(),(0,s.iD)("div",null,[nz,(0,s._)("div",dz,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.deliveryFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.deliveryStatus,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value?t.value:"all",key:t.id},(0,Q.zw)(t.value?t.name:"Select"),9,wz)))),128))],512),[[a.bM,o.deliveryFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])}var uz={props:["filter"],data(){return{deliveryFilter:"all",deliveryStatus:Wn}},watch:{deliveryFilter(t){this.$emit("update:filter",t)}}};const pz=(0,d.Z)(uz,[["render",cz]]);var mz=pz;const hz=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Confirmation",-1),gz={class:"tw-relative"},fz=(0,s._)("option",{value:"all"}," Select ",-1),vz=["value"];function yz(t,e,r,i,o,l){return(0,s.wg)(),(0,s.iD)("div",null,[hz,(0,s._)("div",gz,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.confirmationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[fz,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.value},(0,Q.zw)(t.name),9,vz)))),128))],512),[[a.bM,o.confirmationFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])}var xz={props:["filter"],data(){return{confirmationFilter:"all",confirmations:Pn}},watch:{confirmationFilter(t){this.$emit("update:filter",t)}}};const bz=(0,d.Z)(xz,[["render",yz]]);var _z=bz;const kz=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Affect",-1),Cz={class:"tw-relative"},Dz=(0,s._)("option",{value:"all"},"Select",-1),Sz=(0,s._)("option",{value:null},"Without delivery",-1),zz=["value"];function Uz(t,e,r,i,o,l){return(0,s.wg)(),(0,s.iD)("div",null,[kz,(0,s._)("div",Cz,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.affectationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[Dz,Sz,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,zz)))),128))],512),[[a.bM,o.affectationFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])}var Lz={props:["filter"],data(){return{affectationFilter:"all"}},computed:{users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>3==t.role.id))}},watch:{affectationFilter(t){this.$emit("update:filter",t)}}};const Pz=(0,d.Z)(Lz,[["render",Uz]]);var Az=Pz;const $z=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Agente",-1),Wz={class:"tw-relative"},qz=(0,s._)("option",{value:"all"},"Select",-1),Oz=(0,s._)("option",{value:null},"Without agente",-1),Ez=["value"];function Tz(t,e,r,i,o,l){return(0,s.wg)(),(0,s.iD)("div",null,[$z,(0,s._)("div",Wz,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.agenteFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[qz,Oz,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.agentes,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,Ez)))),128))],512),[[a.bM,o.agenteFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])}var Vz={props:["filter"],data(){return{agenteFilter:"all"}},computed:{users(){return this.$store.getters["user/users"]},agentes(){return this.users.filter((t=>2==t.role.id))}},watch:{agenteFilter(t){this.$emit("update:filter",t)}}};const Iz=(0,d.Z)(Vz,[["render",Tz]]);var Fz=Iz;const Rz=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Product",-1),jz={key:0},Nz={key:1,class:"tw-relative"},Mz=(0,s._)("option",{value:"all"},"Select",-1),Hz=["value"];function Yz(t,e,r,i,o,l){return(0,s.wg)(),(0,s.iD)("div",null,[Rz,l.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",jz,[(0,s._)("div",null,[(0,s.Wm)(X.t,{class:"tw-text-orange-500 tw-animate-spin tw-text-lg tw-"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})])])),l.fetched?((0,s.wg)(),(0,s.iD)("div",Nz,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.productFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[Mz,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.products,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,Hz)))),128))],512),[[a.bM,o.productFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])):(0,s.kq)("",!0)])}var Zz={props:["filter"],data(){return{productFilter:"all"}},computed:{products(){return this.$store.getters["product/products"]},fetched(){return this.$store.getters["product/fetched"]}},watch:{productFilter(t){this.$emit("update:filter",t)}},methods:{getProducts(){ea.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.fetched||this.getProducts(),console.log(this.products)}};const Kz=(0,d.Z)(Zz,[["render",Yz]]);var Bz=Kz;function Qz(t,e,r,{confirmationFilter:a,affectationFilter:s,upsellFilter:i,deliveryFilter:o,agenteFilter:l,dateFilter:n,productFilter:d}){const w=n[0],c=n[1];return t.filter((t=>{const n=new Date(t.created_at);if(""!=r&&r!=t.id)return!1;if("all"!==a&&t.confirmation!==a)return!1;if("all"!==s&&t.affectation!=s)return!1;if("all"!==i&&t.upsell!=i)return!1;if("all"!==o&&t.delivery!=o)return!1;if("all"!==l&&t.agente_id!=l)return!1;const u=((t,e)=>{for(const r in t)if(!["created_at","updated_at","sheets_id","reported_agente_note","reported_agente_note","reported_agente_date","reported_delivery_note","reported_delivery_date"].includes(r)&&String(t[r]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(t,e);if(!u)return!1;if("all"!==d&&!t.items.some((t=>t.product_id==d)))return!1;const p=n.getDate(),m=n.getMonth(),h=n.getFullYear();if(w){const t=w.getDate(),e=w.getMonth(),r=w.getFullYear();if(h<r||h===r&&m<e||h===r&&m===e&&p<t)return!1}if(c){const t=c.getDate(),e=c.getMonth(),r=c.getFullYear();if(h>r||h===r&&m>e||h===r&&m===e&&p>t)return!1}return!0}))}function Gz(t){return{id:1,title:"New",value:t.filter((t=>!t.confirmation||"new"==t.confirmation)).length,pourcentage:(100*t.filter((t=>!t.confirmation||"new"==t.confirmation)).length/t.length).toFixed(2),color:"primary-green",icon:"mdi mdi-new-box"}}function Jz(t){return{id:3,title:"Confirmed",value:t.filter((t=>"confirmer"==t.confirmation)).length,pourcentage:(100*t.filter((t=>"confirmer"==t.confirmation)).length/t.length).toFixed(2),color:"deep-purple-accent-2",icon:"mdi-phone-check"}}function Xz(t){return{id:4,title:"Delivered",value:t.filter((t=>"livrer"==t.delivery)).length,pourcentage:(100*t.filter((t=>"livrer"==t.delivery)).length/t.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"primary-blue",icon:"mdi-account-check-outline"}}function tU(t){return{id:5,title:"Shipped",value:t.filter((t=>"expidier"==t.delivery)).length,pourcentage:(100*t.filter((t=>"expidier"==t.delivery)).length/t.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"red",icon:"mdi-truck"}}const eU=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Export",-1),rU={class:"tw-relative tw-flex tw-items-center tw-gap-2 tw-justify-between"},aU={class:"tw-relative tw-w-full"},sU=(0,s._)("option",{value:"all"},"All Sales",-1),iU=(0,s._)("option",{value:"selected"},"Selected Sales",-1),oU=(0,s._)("option",{value:"filtered"},"Filtered Sales",-1),lU=[sU,iU,oU];function nU(t,e,r,i,o,l){const n=(0,s.up)("download-csv");return(0,s.wg)(),(0,s.iD)("div",null,[eU,(0,s._)("div",rU,[(0,s._)("div",aU,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.selection=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},lU,512),[[a.bM,o.selection]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})]),(0,s.Wm)(n,{delimiter:";",data:l.toImport},{default:(0,s.w5)((()=>[(0,s.Wm)(G.T,{onClick:l.handleImport,icon:"",rounded:"lg",variant:"flat",size:"x-small",color:"green",class:"text-white tw-mr-2"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",icon:"mdi-download",size:"x-large"})])),_:1},8,["onClick"])])),_:1},8,["data"])])])}var dU={props:["selected","filtered","sales"],data(){return{selection:"all"}},computed:{toImport(){const t=this.data.map((t=>({...t}))),e=t.map((t=>{const e=Object.keys(t);return e.forEach((e=>{t[e]=t[e]?t[e]:"NONE"})),t})),r=",",a=e.map((t=>(delete t["factorisation_id"],delete t["note_d"],delete t["cmd"],delete t["product_name"],delete t["is_done"],delete t["factorisation"],delete t["doubles"],delete t["is_double"],delete t["has_doubles"],delete t["double"],{...t,products:t.items.map((t=>`id=${t.id}${r}price=${t.price?t.price:0}${r}name=${t.product?.name}${r}ref=${t.product?.ref}${r}variation_id=${t.product_variation_id}${r}size=${t.product_variation.size?t.product_variation.size:"DEFAULT"}${r}color=${t.product_variation.color?t.product_variation.color:"DEFAULT"}${r}`))})));return a.map((t=>(delete t["items"],t)))},data(){switch(this.selection){case"selected":return this.selected;case"filtered":return this.filtered;default:return this.sales}}},methods:{handleImport(){0==this.data.length&&this.$alert({title:"No Data To Export",type:"warning"})}}};const wU=(0,d.Z)(dU,[["render",nU]]);var cU=wU,uU={components:{DateFilter:GS,UpsellFilter:lz,DeliveryFilter:mz,ConfirmationFilter:_z,AffectationFilter:Az,AgenteFilter:Fz,ProductFilter:Bz,ExcelExport:cU},props:["sales","filtered","search","searchId","selected"],data(){return{config:{confirmationFilter:"all",affectationFilter:"all",upsellFilter:"all",deliveryFilter:"all",agenteFilter:"all",productFilter:"all",dateFilter:[null,null]}}},computed:{results(){return Qz(this.sales,this.search,this.searchId,this.config)}},watch:{results(t){this.$emit("update:filtered",t)}},mounted(){this.$emit("update:filtered",this.sales)}};const pU=(0,d.Z)(uU,[["render",HS]]);var mU=pU;const hU={class:"mb-5 tw-border-b tw-border-solid tw-pb-5 tw-border-neutral-200"},gU={class:"tw-grid tw-grid-cols-4 lg:tw-grid-cols-4 tw-gap-2"},fU={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-2"},vU={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-2"},yU={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-2"},xU={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-4"};function bU(t,e,r,a,i,o){const l=(0,s.up)("DashItem");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",hU,[(0,s._)("div",gU,[(0,s._)("div",fU,[(0,s.Wm)(l,{dash:o.newSales},null,8,["dash"])]),(0,s._)("div",vU,[(0,s.Wm)(l,{dash:o.confirmedSales},null,8,["dash"])]),(0,s._)("div",yU,[(0,s.Wm)(l,{dash:o.deliveredSales},null,8,["dash"])]),(0,s._)("div",xU,[(0,s.Wm)(l,{dash:o.shippedSales},null,8,["dash"])])])])])}const _U={class:"tw-flex tw-justify-between tw-items-center tw-w-full tw-h-full pa-3 px-4"},kU={class:"tw-flex tw-flex-col tw-justify-center tw-w-full tw-h-full tw-text-white"},CU={class:"tw-text-xl tw-font-bold"},DU={class:"tw-flex tw-items-center tw-gap-1 tw-w-full tw-h-full tw-text-white"},SU={class:"tw-text-sm"},zU={class:"rounded-circle tw-w-fit tw-mr-3"};function UU(t,e,r,a,i,o){const l=(0,s.up)("number");return(0,s.wg)(),(0,s.j4)(_a.C,{class:"tw-rounded-lg",color:r.dash.color,height:"70"},{default:(0,s.w5)((()=>[(0,s._)("div",_U,[(0,s._)("div",kU,[(0,s._)("p",CU,(0,Q.zw)(isNaN(r.dash.pourcentage)?"0.00":r.dash.pourcentage)+" "+(0,Q.zw)(r.symbol),1),(0,s._)("span",DU,[r.numbers?((0,s.wg)(),(0,s.j4)(l,{key:0,class:"tw-font-bold",ref:"number1",from:0,to:r.dash.value,duration:1,delay:0,easing:"Power.easeOut"},null,8,["to"])):(0,s.kq)("",!0),(0,s._)("p",SU,(0,Q.zw)(r.dash.title),1)])]),(0,s._)("div",zU,[(0,s.Wm)(X.t,{color:"white",size:"large",class:"md:tw-scale-[1.8] tw-scale-[1.3]",icon:r.dash.icon},null,8,["icon"])])])])),_:1},8,["color"])}var LU={props:{dash:{required:!0},symbol:{required:!1,default:"%"},numbers:{required:!1,default:!0}}};const PU=(0,d.Z)(LU,[["render",UU]]);var AU=PU,$U={components:{DashItem:AU},props:["sales"],computed:{newSales(){return Gz(this.sales)},confirmedSales(){return Jz(this.sales)},deliveredSales(){return Xz(this.sales)},shippedSales(){return tU(this.sales)}}};const WU=(0,d.Z)($U,[["render",bU]]);var qU=WU,OU={components:{SalesTable:au,AddSale:lD,SalesAnalytics:qU,IndexFilter:mU,NewAddSale:OS},data(){return{localUrl:I,isLoaded:!1,isLoadingReset:!1,showFilters:!1,isButtonDisabled:!0,filteredSales:[],search:"",searchId:"",selected:[],showPopup:!1}},computed:{fetched(){return this.$store.getters["sale/fetched"]},users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>3==t.role.id))},agentes(){return this.users.filter((t=>2==t.role.id))},sales(){return this.$store.getters["sale/sales"]},cities(){return this.$store.getters["city/cities"]},selectedSales(){return this.sales.filter((t=>this.selected.includes(t.id)))}},methods:{handleSelected(t){this.selected=t,this.selected.length>0?this.isButtonDisabled=!1:this.isButtonDisabled=!0},async getDeliveries(){await K.deliveries().then((t=>{this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)},async getUsers(){await K.all().then((t=>{this.$store.dispatch("user/setUsers",t.data.data.users)}),this.$handleApiError)},getSales(){return Ir.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0)}})).catch(this.$handleApiError)},getProducts(){return ea.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))},getCities(){if(0==this.cities.length)return K.cities().then((t=>{const e=t.data.data;this.$store.dispatch("city/setCities",e)}))},handleReset(){this.isLoadingReset=!0,0!=this.selected.length&&Ir.resetSale(this.selected).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.$store.dispatch("sale/resetSales",this.selected),this.selected=[])})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoadingReset=!1))}},async mounted(){0==this.deliveries.length&&(await this.getDeliveries(),this.getUsers()),this.fetched&&(this.isLoaded=!0),this.fetched&&(this.getProducts(),this.getCities())}};const EU=(0,d.Z)(OU,[["render",dC]]);var TU=EU;const VU={class:"py-5 px-2 tw-border tw-bg-white tw-w-full tw-rounded-md tw-mb-5"},IU={class:"tw-px-3"},FU={class:"tw-flex tw-items-center tw-justify-between tw-flex-wrap"},RU={class:"tw-flex tw-items-center tw-gap-x-3"},jU=(0,s._)("h2",{class:"tw-text-lg tw-font-medium tw-text-gray-800 darkx:tw-text-white"}," Orders ",-1),NU={class:"tw-px-3 tw-py-1 tw-text-xs tw-text-emerald-600 tw-bg-emerald-100 tw-rounded-full darkx:tw-bg-gray-800 darkx:tw-text-orange-400"},MU=(0,s._)("p",{class:"tw-mt-1 tw-text-sm tw-text-gray-500 darkx:tw-text-gray-300"}," These orders have needs to reconfirmed. ",-1),HU={class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-3"},YU=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",width:"16",height:"16",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),ZU=(0,s._)("span",null,"Create",-1),KU=[YU,ZU],BU={class:"tw-overflow-hidden tw-col-span-1"},QU={key:0};function GU(t,e,r,a,i,o){const l=(0,s.up)("IndexFilters"),n=(0,s.up)("BulkActions"),d=(0,s.up)("IndexTable"),w=(0,s.up)("CreatePopup");return(0,s.wg)(),(0,s.iD)("div",VU,[(0,s._)("section",IU,[(0,s._)("div",FU,[(0,s._)("div",null,[(0,s._)("div",RU,[jU,(0,s._)("span",NU,(0,Q.zw)(i.totalOrders)+" order",1)]),MU]),(0,s._)("div",HU,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.create_popup=!0),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},KU)])]),(0,s.Wm)(l,{search:i.search,"onUpdate:search":e[1]||(e[1]=t=>i.search=t),filters:i.filters,"onUpdate:filters":e[2]||(e[2]=t=>i.filters=t),onFilter:e[3]||(e[3]=t=>o.handlePerPageChange(i.per_page)),onClear:o.handleClearFilters,onPerPageChange:o.handlePerPageChange,onFresh:o.paginateOrders,loading:i.fetching,statistics:i.statistics,"per-page":i.per_page,"active-statistics":""},null,8,["search","filters","onClear","onPerPageChange","onFresh","loading","statistics","per-page"]),(0,s._)("div",{class:(0,Q.C_)([[i.selected.length>0?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",BU,[(0,s.Wm)(n,{onUpdate:o.handleBulkUpdate,selected:i.selected,"onUpdate:selected":e[4]||(e[4]=t=>i.selected=t)},null,8,["onUpdate","selected"])])],2),(0,s._)("div",null,[(0,s.Wm)(d,{selected:i.selected,"onUpdate:selected":e[5]||(e[5]=t=>i.selected=t),onUpdate:o.handleItemUpdate,onPageChange:o.handlePageChange,onSortOrder:o.handleSortOrderChange,loading:i.fetching,from:i.from,to:i.to,"last-page":i.last_page,"per-page":i.per_page,total:i.total,"current-page":i.current_page,items:i.items,deliveries:i.deliveries},null,8,["selected","onUpdate","onPageChange","onSortOrder","loading","from","to","last-page","per-page","total","current-page","items","deliveries"])]),i.create_popup?((0,s.wg)(),(0,s.iD)("div",QU,[(0,s.Wm)(w,{visible:i.create_popup,"onUpdate:visible":e[6]||(e[6]=t=>i.create_popup=t)},null,8,["visible"])])):(0,s.kq)("",!0)])])}class JU{async statistics(t){return await Y.getCookie(),M.post("api/v1/admin/statistics",t)}async paginate(t="/",e){return await Y.getCookie(),M.post("api/v1/admin/orders"+t,e)}async update(t,e){return await Y.getCookie(),M.post("api/v1/admin/orders/"+t+"/update",e)}async create(t){return await Y.getCookie(),M.post("api/v1/admin/orders/create",t)}async export(t={}){return await Y.getCookie(),M.post("api/v1/admin/orders/export",t)}}var XU=new JU;const tL={class:"tw-flex tw-flex-col"},eL={class:"tw-overflow-x-auto"},rL={class:"tw-inline-block tw-min-w-full tw-align-middle"},aL={class:"tw-border tw-overflow-auto tw-border-gray-200 darkx:tw-border-gray-700 md:tw-rounded-lg"},sL={class:"tw-min-w-full tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700"},iL={class:"tw-bg-gray-50 darkx:tw-bg-gray-800"},oL={scope:"col",class:"rtl:tw-text-right tw-px-2 tw-text-sm tw-font-medium tw-whitespace-nowrap tw-text-gray-500 darkx:tw-text-gray-400"},lL={class:"tw-max-w-[25px]"},nL={class:"tw-inline-flex tw-items-center"},dL={class:"tw-relative tw-flex tw-cursor-pointer tw-items-center tw-rounded-full tw-p-3",for:"checkbox","data-ripple-dark":"true"},wL=["checked"],cL=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-top-2/4 tw-left-2/4 -tw-translate-y-2/4 -tw-translate-x-2/4 tw-text-white tw-opacity-0 tw-transition-opacity peer-checked:tw-opacity-100"},[(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"tw-h-3.5 tw-w-3.5",viewBox:"0 0 20 20",fill:"currentColor",stroke:"currentColor","stroke-width":"1"},[(0,s._)("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])],-1),uL=(0,s._)("th",{scope:"col",class:"tw-py-3.5 tw-px-4 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"},[(0,s._)("span",null,"ID")],-1),pL={scope:"col",class:"tw-py-3.5 tw-px-4 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"},mL=(0,s._)("span",null,"Created",-1),hL=(0,s._)("svg",{class:"tw-h-3",viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s._)("path",{d:"M2.13347 0.0999756H2.98516L5.01902 4.79058H3.86226L3.45549 3.79907H1.63772L1.24366 4.79058H0.0996094L2.13347 0.0999756ZM2.54025 1.46012L1.96822 2.92196H3.11227L2.54025 1.46012Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,s._)("path",{d:"M0.722656 9.60832L3.09974 6.78633H0.811638V5.87109H4.35819V6.78633L2.01925 9.60832H4.43446V10.5617H0.722656V9.60832Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,s._)("path",{d:"M8.45558 7.25664V7.40664H8.60558H9.66065C9.72481 7.40664 9.74667 7.42274 9.75141 7.42691C9.75148 7.42808 9.75146 7.42993 9.75116 7.43262C9.75001 7.44265 9.74458 7.46304 9.72525 7.49314C9.72522 7.4932 9.72518 7.49326 9.72514 7.49332L7.86959 10.3529L7.86924 10.3534C7.83227 10.4109 7.79863 10.418 7.78568 10.418C7.77272 10.418 7.73908 10.4109 7.70211 10.3534L7.70177 10.3529L5.84621 7.49332C5.84617 7.49325 5.84612 7.49318 5.84608 7.49311C5.82677 7.46302 5.82135 7.44264 5.8202 7.43262C5.81989 7.42993 5.81987 7.42808 5.81994 7.42691C5.82469 7.42274 5.84655 7.40664 5.91071 7.40664H6.96578H7.11578V7.25664V0.633865C7.11578 0.42434 7.29014 0.249976 7.49967 0.249976H8.07169C8.28121 0.249976 8.45558 0.42434 8.45558 0.633865V7.25664Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.3"})],-1),gL=[mL,hL],fL=(0,s._)("th",{scope:"col",class:"tw-px-3 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Client ",-1),vL=(0,s._)("th",{scope:"col",class:"tw-px-3 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," City ",-1),yL=(0,s._)("th",{scope:"col",class:"tw-px-3 !tw-w-5 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Phone ",-1),xL=(0,s._)("th",{scope:"col",class:"tw-px-3 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Product ",-1),bL=(0,s._)("th",{scope:"col",class:"tw-w-10 tw-px-3 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Confirmation ",-1),_L=(0,s._)("th",{scope:"col",class:"tw-px-3 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Affected ",-1),kL=(0,s._)("th",{scope:"col",class:"tw-w-10 tw-px-3 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Delivery ",-1),CL=(0,s._)("th",{scope:"col",class:"tw-relative tw-py-3.5 tw-px-4"},[(0,s._)("span",{class:"tw-sr-only"},"Actions")],-1),DL={key:0,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},SL={key:1,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},zL=(0,s._)("tr",null,[(0,s._)("td",{colspan:"8"},[(0,s._)("div",{class:"tw-p-5 tw-text-center tw-text-gray-600 tw-font-medium"}," No Order was found ! ")])],-1),UL=[zL],LL={key:2,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},PL={colspan:"11"},AL={role:"status",class:"tw-w-full tw-p-4 tw-space-y-4 tw-border-gray-200 tw-divide-y tw-divide-gray-200 tw-rounded tw-shadow tw-animate-pulse dark:tw-divide-gray-300 md:tw-p-6 dark:tw-border-gray-300"},$L=(0,s._)("div",{class:"tw-flex tw-items-center tw-justify-between"},[(0,s._)("div",null,[(0,s._)("div",{class:"tw-w-32 tw-h-2 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-200"})]),(0,s._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-200 tw-w-12"})],-1),WL=(0,s._)("div",null,[(0,s._)("div",{class:"tw-w-32 tw-h-2 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-200"})],-1),qL=(0,s._)("div",{class:"tw-h-2.5 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-200 tw-w-12"},null,-1),OL=[WL,qL],EL={class:"tw-mt-6"};function TL(t,e,r,a,i,o){const l=(0,s.up)("TableRow"),n=((0,s.up)("loading"),(0,s.up)("TablePaginationNoNums"));return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",tL,[(0,s._)("div",eL,[(0,s._)("div",rL,[(0,s._)("div",aL,[(0,s._)("table",sL,[(0,s._)("thead",iL,[(0,s._)("tr",null,[(0,s._)("th",oL,[(0,s._)("div",lL,[(0,s._)("div",nL,[(0,s._)("label",dL,[(0,s._)("input",{type:"checkbox",checked:i.isAllSelected,onChange:e[0]||(e[0]=(...t)=>o.handleSelectedAllChange&&o.handleSelectedAllChange(...t)),class:"before:tw-content[''] tw-border-solid tw-bg-white tw-peer tw-relative tw-h-5 tw-w-5 tw-cursor-pointer tw-appearance-none tw-rounded-md tw-border tw-border-blue-gray-200 tw-transition-all before:tw-absolute before:tw-top-2/4 before:tw-left-2/4 before:tw-block before:tw-h-12 before:tw-w-12 before:-tw-translate-y-2/4 before:-tw-translate-x-2/4 before:tw-rounded-full before:bg-blue-gray-500 before:tw-opacity-0 before:tw-transition-opacity checked:tw-border-orange-500 checked:tw-bg-orange-500 checked:before:tw-bg-orange-500 hover:before:tw-opacity-10",id:"checkbox-all"},null,40,wL),cL])])])]),uL,(0,s._)("th",pL,[(0,s._)("button",{onClick:e[1]||(e[1]=e=>t.$emit("sortOrder",{name:"created_at"})),class:"tw-flex tw-items-center tw-gap-x-3 focus:tw-outline-none"},gL)]),fL,vL,yL,xL,bL,_L,kL,CL])]),!r.loading&&r.items.length>0?((0,s.wg)(),(0,s.iD)("tbody",DL,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.items,((a,i,n)=>((0,s.wg)(),(0,s.j4)(l,{selected:o.selectedOrders,"onUpdate:selected":e[2]||(e[2]=t=>o.selectedOrders=t),deliveries:r.deliveries,onUpdate:e[3]||(e[3]=e=>t.$emit("update",e)),all:n,index:i,key:a.id,item:a},null,8,["selected","deliveries","all","index","item"])))),128))])):(0,s.kq)("",!0),r.loading||0!=r.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("tbody",SL,UL)),r.loading?((0,s.wg)(),(0,s.iD)("tbody",LL,[(0,s._)("tr",null,[(0,s.kq)("",!0),(0,s._)("td",PL,[(0,s._)("div",AL,[$L,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.perPage-1,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"tw-flex tw-items-center tw-justify-between tw-pt-4"},OL)))),128))])])])])):(0,s.kq)("",!0)])])])])]),(0,s._)("div",EL,[(0,s.Wm)(n,{from:r.from,to:r.to,"last-page":r.lastPage,"per-page":r.perPage,total:r.total,"current-page":r.currentPage,onPageChange:e[4]||(e[4]=e=>t.$emit("pageChange",e))},null,8,["from","to","last-page","per-page","total","current-page"])])])}const VL={class:"sm:tw-flex sm:tw-items-center sm:tw-justify-between"},IL={class:"tw-text-sm tw-text-gray-500 darkx:tw-text-gray-400"},FL={class:"tw-font-medium tw-text-gray-700 darkx:tw-text-gray-100"},RL={class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-4 sm:tw-mt-0"},jL=["disabled"],NL=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5 rtl:tw--scale-x-100"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18"})],-1),ML=(0,s._)("span",null," previous ",-1),HL=[NL,ML],YL=["disabled"],ZL=(0,s._)("span",null," Next ",-1),KL=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5 rtl:tw--scale-x-100"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"})],-1),BL=[ZL,KL];function QL(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",VL,[(0,s._)("div",IL,[(0,s.Uk)(" Page "),(0,s._)("span",FL,(0,Q.zw)(r.currentPage)+" of "+(0,Q.zw)(r.lastPage),1)]),(0,s._)("div",RL,[(0,s._)("button",{disabled:r.currentPage<=1,onClick:e[0]||(e[0]=t=>o.changePage(r.currentPage-1)),class:(0,Q.C_)([[r.currentPage<=1&&"tw-cursor-not-allowed"],"tw-flex tw-items-center tw-justify-center tw-w-1/2 tw-px-5 tw-py-2 tw-text-sm tw-text-gray-700 tw-capitalize tw-transition-colors tw-duration-200 tw-bg-white tw-border tw-border-solid tw-rounded-md sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-100 darkx:tw-bg-gray-900 darkx:tw-text-gray-200 darkx:tw-border-gray-700 darkx:hover:tw-bg-gray-800"])},HL,10,jL),(0,s._)("button",{disabled:r.currentPage>=o.totalPages,onClick:e[1]||(e[1]=t=>o.changePage(r.currentPage+1)),class:(0,Q.C_)([[r.currentPage>=o.totalPages&&"tw-cursor-not-allowed"],"tw-flex tw-items-center tw-justify-center tw-w-1/2 tw-px-5 tw-py-2 tw-text-sm tw-text-gray-700 tw-capitalize tw-transition-colors tw-duration-200 tw-bg-white tw-border tw-border-solid tw-rounded-md sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-100 darkx:tw-bg-gray-900 darkx:tw-text-gray-200 darkx:tw-border-gray-700 darkx:hover:tw-bg-gray-800"])},BL,10,YL)])])])}var GL={props:{from:{type:Number,default:1},to:{type:Number,default:1},perPage:{type:Number,default:1},total:{type:Number,default:1},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1}},data(){return{totalItems:100,itemsPerPage:5}},computed:{totalPages(){return this.lastPage},showEllipsisStart(){return this.currentPage>3},showEllipsisEnd(){return this.currentPage<this.totalPages-2},visiblePages(){let t=Math.max(1,this.currentPage-1),e=Math.min(this.totalPages,this.currentPage+1);const r=[];for(let a=t;a<=e;a++)r.push(a);return r}},methods:{changePage(t){this.$emit("pageChange",t)}}};const JL=(0,d.Z)(GL,[["render",QL]]);var XL=JL;const tP={class:"tw-p-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},eP={class:"tw-max-w-[25px]"},rP={class:"tw-inline-flex tw-items-center"},aP={class:"tw-relative tw-flex tw-cursor-pointer tw-items-center tw-rounded-full tw-p-3",for:"checkbox","data-ripple-dark":"true"},sP=["checked","id"],iP=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-top-2/4 tw-left-2/4 -tw-translate-y-2/4 -tw-translate-x-2/4 tw-text-white tw-opacity-0 tw-transition-opacity peer-checked:tw-opacity-100"},[(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"tw-h-3.5 tw-w-3.5",viewBox:"0 0 20 20",fill:"currentColor",stroke:"currentColor","stroke-width":"1"},[(0,s._)("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])],-1),oP={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},lP={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white"},nP={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},dP={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-flex tw-items-center tw-gap-2"},wP={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},cP={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-font-[cairo] tw-max-w-[150px] tw-truncate"},uP={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},pP={class:"tw-font-medium tw-max-w-[100px] tw-truncate tw-text-gray-800 darkx:tw-text-white tw-font-[cairo]"},mP={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},hP={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-font-[cairo] tw-max-w-[120px] tw-truncate"},gP={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},fP={class:"tw-space-y-1"},vP={class:"tw-font-bold tw-text-green-500"},yP={class:"tw-block tw-max-w-[150px] tw-truncate"},xP={key:0,class:"tw-font-bold tw-text-orange-500 tw-bg-orange-100 tw-rounded-lg tw-px-2 tw-text-sm"},bP={key:1,class:"tw-font-bold tw-text-orange-500 tw-bg-orange-100 tw-rounded-lg tw-px-2 tw-text-sm"},_P={class:"tw-px-2 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},kP={class:"tw-px-2 tw-py-2 tw-text-sm tw-whitespace-nowrap"},CP={class:"tw-px-2 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},DP={class:"tw-px-4 tw-py-2 tw-text-sm tw-whitespace-nowrap"};function SP(t,e,r,a,i,o){const l=(0,s.up)("TableRowAffectation"),n=(0,s.up)("TableActions");return(0,s.wg)(),(0,s.iD)("tr",{class:(0,Q.C_)(["hover:tw-bg-gray-50",[null!=r.item.reported_diff&&"reporter"==r.item.confirmation&&r.item.reported_diff<=0&&" !tw-shadow-sm !tw-border !tw-border-emerald-300"]])},[(0,s._)("td",tP,[(0,s._)("div",eP,[(0,s._)("div",rP,[(0,s._)("label",aP,[(0,s._)("input",{type:"checkbox",checked:o.isSelected,onChange:e[0]||(e[0]=(...t)=>o.handleSelected&&o.handleSelected(...t)),class:"before:tw-content[''] tw-border-solid tw-bg-white tw-peer tw-relative tw-h-5 tw-w-5 tw-cursor-pointer tw-appearance-none tw-rounded-md tw-border tw-border-blue-gray-200 tw-transition-all before:tw-absolute before:tw-top-2/4 before:tw-left-2/4 before:tw-block before:tw-h-12 before:tw-w-12 before:-tw-translate-y-2/4 before:-tw-translate-x-2/4 before:tw-rounded-full before:bg-blue-gray-500 before:tw-opacity-0 before:tw-transition-opacity checked:tw-border-orange-500 checked:tw-bg-orange-500 checked:before:tw-bg-orange-500 hover:before:tw-opacity-10",id:"checkbox-"+r.item.id},null,40,sP),iP])])])]),(0,s._)("td",oP,[(0,s._)("div",null,[(0,s._)("h2",lP,(0,Q.zw)(r.item.id),1)])]),(0,s._)("td",nP,[(0,s._)("div",null,[(0,s._)("h2",dP,[(0,s._)("p",null,(0,Q.zw)(i.moment(r.item.created_at).format("DD[/]MM[/]YY")),1),(0,s.kq)("",!0)])])]),(0,s._)("td",wP,[(0,s._)("div",null,[(0,s._)("h2",cP,(0,Q.zw)(r.item.fullname),1)])]),(0,s._)("td",uP,[(0,s._)("div",null,[(0,s._)("h2",pP,(0,Q.zw)(r.item.city),1)])]),(0,s._)("td",mP,[(0,s._)("div",null,[(0,s._)("h2",hP,(0,Q.zw)(r.item.phone),1)])]),(0,s._)("td",gP,[(0,s._)("div",null,[(0,s._)("ul",fP,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.item.items,(t=>((0,s.wg)(),(0,s.iD)("li",{dir:"rtl",class:"tw-font-[cairo] tw-flex tw-items-center tw-gap-1",key:t.id},[(0,s._)("span",vP,(0,Q.zw)(t.quantity)+" x ",1),(0,s._)("span",yP,(0,Q.zw)(t.product.name),1),t.product_variation.color&&!["/","-"].includes(t.product_variation.color)?((0,s.wg)(),(0,s.iD)("span",xP,(0,Q.zw)(t.product_variation.color),1)):(0,s.kq)("",!0),t.product_variation.size&&!["/","-"].includes(t.product_variation.size)?((0,s.wg)(),(0,s.iD)("span",bP,(0,Q.zw)(t.product_variation.size),1)):(0,s.kq)("",!0)])))),128))])])]),(0,s._)("td",_P,[(0,s._)("div",null,[(0,s._)("span",{class:(0,Q.C_)([[o.confirmation.bgLight,o.confirmation.textLight],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},(0,Q.zw)(o.confirmation.name),3)])]),(0,s._)("td",kP,[(0,s._)("div",null,[(0,s.Wm)(l,{onUpdate:e[1]||(e[1]=e=>t.$emit("update",e)),deliveries:r.deliveries,item:r.item},null,8,["deliveries","item"])]),(0,s.kq)("",!0)]),(0,s._)("td",CP,[(0,s._)("div",null,[(0,s._)("span",{class:(0,Q.C_)([[o.deliveryState.bgLight,o.deliveryState.textLight],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},(0,Q.zw)(o.deliveryState.value?o.deliveryState.name:"Not Selected"),3)])]),(0,s._)("td",DP,[(0,s._)("div",null,[(0,s.Wm)(n,{onUpdate:e[2]||(e[2]=e=>t.$emit("update",e)),item:r.item},null,8,["item"])])])],2)}var zP=r(6797),UP=r.n(zP);const LP={class:"tw-h-full"},PP={class:"tw-flex tw-items-center tw-gap-2"},AP=["href"],$P={key:0},WP={key:1};function qP(t,e,r,a,i,o){const l=(0,s.up)("UpdatePopup"),n=(0,s.up)("HistoryPopup");return(0,s.wg)(),(0,s.iD)("div",LP,[(0,s._)("div",PP,[(0,s._)("a",{target:"_blank",href:"https://api.whatsapp.com/send?phone="+r.item.phone.replace("+","").replace("-","").replace(" ",""),class:"tw-bg-whites tw-shadow-sm tw-px-2 tw-py-1 tw-w-[30px] tw-h-[30px] tw-border tw-border-solid tw-border-green-500/20 hover:tw-bg-green-500/10 hover:tw-border-green-500/70 tw-duration-300 tw-text-green-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(X.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-whatsapp")])),_:1})],8,AP),(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.update=!0),class:"tw-bg-whites tw-shadow-sm tw-px-2 tw-py-1 tw-w-[30px] tw-h-[30px] tw-border tw-border-solid tw-border-orange-500/20 hover:tw-bg-orange-500/10 hover:tw-border-orange-500/70 tw-duration-300 tw-text-orange-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(X.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})]),(0,s._)("button",{onClick:e[1]||(e[1]=t=>i.history=!0),class:"tw-bg-whites tw-shadow-sm tw-px-2 tw-py-1 tw-w-[30px] tw-h-[30px] tw-border tw-border-solid tw-border-purple-500/20 hover:tw-bg-purple-500/10 hover:tw-border-purple-500/70 tw-duration-300 tw-text-purple-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(X.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-sort-clock-descending")])),_:1})])]),i.update?((0,s.wg)(),(0,s.iD)("div",$P,[(0,s.Wm)(l,{onUpdate:e[2]||(e[2]=e=>t.$emit("update",e)),visible:i.update,"onUpdate:visible":e[3]||(e[3]=t=>i.update=t),item:r.item},null,8,["visible","item"])])):(0,s.kq)("",!0),i.history?((0,s.wg)(),(0,s.iD)("div",WP,[(0,s.Wm)(n,{visible:i.history,"onUpdate:visible":e[4]||(e[4]=t=>i.history=t),item:r.item},null,8,["visible","item"])])):(0,s.kq)("",!0)])}const OP={class:"tw-mx-auto tw-w-[95%] md:tw-max-w-[800px] tw-overflow-hidden tw-h-fit dark:tw-bg-neutral-900 tw-bg-white tw-border tw-border-solid dark:tw-border-neutral-700 tw-border-neutral-300 tw-shadow-md tw-my-5 tw-rounded-lg"},EP=(0,s._)("div",{class:"tw-p-4 tw-text-lg tw-border-b tw-border-solid tw-font-medium tw-flex dark:tw-text-neutral-400 tw-text-neutral-500 tw-items-center tw-gap-4 dark:tw-bg-neutral-800 tw-bg-gray-50"}," Order Informations ",-1),TP={class:"tw-bg-white tw-p-4"},VP={class:"tw-grid tw-gap-6 tw-gap-y-5 tw-grid-cols-1 md:tw-grid-cols-2"},IP={class:"tw-col-span-2 md:tw-col-span-1"},FP=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Client Name",-1),RP={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},jP={class:"tw-col-span-2 md:tw-col-span-1"},NP=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Phone Number",-1),MP={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},HP={class:"tw-col-span-2 md:tw-col-span-1"},YP=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"City",-1),ZP={class:"tw-relative"},KP=(0,s._)("option",{value:null,disabled:""},"Choose a City",-1),BP=["value"],QP=["value"],GP=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),JP={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},XP={class:"tw-col-span-2 md:tw-col-span-1"},tA=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Address",-1),eA={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},rA={class:"tw-col-span-2"},aA=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),sA={class:"tw-relative"},iA=["value"],oA=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),lA={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},nA={key:0,class:"md:tw-col-span-1 tw-col-span-2"},dA=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Date",-1),wA={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},cA={key:1,class:"md:tw-col-span-1 tw-col-span-2"},uA=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Note",-1),pA={class:"tw-col-span-2"},mA=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Note",-1),hA={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},gA={class:"md:tw-col-span-1 tw-col-span-2"},fA={class:"tw-col-span-1"},vA=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Delivery",-1),yA={class:"tw-relative"},xA=["value"],bA=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),_A={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},kA={class:"md:tw-col-span-1 tw-col-span-2"},CA=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Upsell",-1),DA={class:"tw-relative"},SA=["value"],zA=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),UA={class:"tw-col-span-2"},LA={class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},PA={key:0,class:"tw-text-red-400 tw-text-xs"},AA={key:2,class:"tw-col-span-2"},$A={class:"tw-flex tw-justify-end tw-items-center tw-p-4 tw-gap-3 dark:tw-bg-neutral-900 tw-bg-gray-50 tw-border-t tw-border-solid"},WA=["disabled"],qA=(0,s._)("span",null,"Update",-1);function OA(t,e,r,i,o,l){const n=(0,s.up)("OrderAffectation"),d=(0,s.up)("OrderItems"),w=(0,s.up)("ProductOffersTable"),c=(0,s.up)("popup-new");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(c,{visible:r.visible,closeable:!1,onCancel:l.cancel},{default:(0,s.w5)((()=>[(0,s._)("div",OP,[EP,(0,s._)("div",TP,[(0,s._)("div",VP,[(0,s._)("div",IP,[FP,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.itemCopy.fullname=t),onInput:e[1]||(e[1]=t=>o.errors.fullname=null),type:"text",class:(0,Q.C_)([[o.errors.fullname&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),placeholder:"John",required:""},null,34),[[a.nr,o.itemCopy.fullname]]),o.errors.fullname?((0,s.wg)(),(0,s.iD)("label",RP,(0,Q.zw)(o.errors.fullname),1)):(0,s.kq)("",!0)]),(0,s._)("div",jP,[NP,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.itemCopy.phone=t),onInput:e[3]||(e[3]=t=>o.errors.phone=null),class:(0,Q.C_)([[o.errors.phone&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"123-45-678",required:""},null,34),[[a.nr,o.itemCopy.phone]]),o.errors.phone?((0,s.wg)(),(0,s.iD)("label",MP,(0,Q.zw)(o.errors.phone),1)):(0,s.kq)("",!0)]),(0,s._)("div",HP,[YP,(0,s._)("div",ZP,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.itemCopy.city=t),onChange:e[5]||(e[5]=t=>o.errors.city=null),class:(0,Q.C_)([[o.errors.city&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 tw-pr-7"])},[KP,(0,s._)("option",{value:o.itemCopy.city,disabled:""},(0,Q.zw)(o.itemCopy.city),9,BP),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,QP)))),128))],34),[[a.bM,o.itemCopy.city]]),GP]),o.errors.city?((0,s.wg)(),(0,s.iD)("label",JP,(0,Q.zw)(o.errors.city),1)):(0,s.kq)("",!0)]),(0,s._)("div",XP,[tA,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>o.itemCopy.adresse=t),onInput:e[7]||(e[7]=t=>o.errors.adresse=null),class:(0,Q.C_)([[o.errors.adresse&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"Address",required:""},null,34),[[a.nr,o.itemCopy.adresse]]),o.errors.adresse?((0,s.wg)(),(0,s.iD)("label",eA,(0,Q.zw)(o.errors.adresse),1)):(0,s.kq)("",!0)]),(0,s._)("div",rA,[aA,(0,s._)("div",sA,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>o.itemCopy.confirmation=t),onChange:e[9]||(e[9]=t=>o.errors.confirmation=null),class:(0,Q.C_)([[o.errors.confirmation&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,class:(0,Q.C_)([t.text,!t.value&&"!tw-text-green-500"]),key:t.id},(0,Q.zw)(t.name),11,iA)))),128))],34),[[a.bM,o.itemCopy.confirmation]]),oA]),o.errors.confirmation?((0,s.wg)(),(0,s.iD)("label",lA,(0,Q.zw)(o.errors.confirmation),1)):(0,s.kq)("",!0)]),"reporter"==o.itemCopy.confirmation?((0,s.wg)(),(0,s.iD)("div",nA,[dA,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>o.itemCopy.reported_agente_date=t),onInput:e[11]||(e[11]=t=>o.errors.reported_agente_date=null),class:(0,Q.C_)([[o.errors.reported_agente_date&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"date",required:""},null,34),[[a.nr,o.itemCopy.reported_agente_date]]),o.errors.reported_agente_date?((0,s.wg)(),(0,s.iD)("label",wA,(0,Q.zw)(o.errors.reported_agente_date),1)):(0,s.kq)("",!0)])):(0,s.kq)("",!0),"reporter"==o.itemCopy.confirmation?((0,s.wg)(),(0,s.iD)("div",cA,[uA,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[12]||(e[12]=t=>o.itemCopy.reported_agente_note=t),rows:"1",class:"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500",placeholder:"Enter a note"},null,512),[[a.nr,o.itemCopy.reported_agente_note]])])):(0,s.kq)("",!0),(0,s._)("div",pA,[mA,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[13]||(e[13]=t=>o.itemCopy.note=t),onInput:e[14]||(e[14]=t=>o.errors.note=null),class:(0,Q.C_)([[o.errors.note&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),rows:"3",placeholder:"Enter a note"},null,34),[[a.nr,o.itemCopy.note]]),o.errors.note?((0,s.wg)(),(0,s.iD)("label",hA,(0,Q.zw)(o.errors.note),1)):(0,s.kq)("",!0)]),(0,s._)("div",gA,[(0,s.Wm)(n,{item:o.itemCopy,error:o.errors.affectation,"onUpdate:error":e[15]||(e[15]=t=>o.errors.affectation=t),affectation:o.itemCopy.affectation,"onUpdate:affectation":e[16]||(e[16]=t=>o.itemCopy.affectation=t)},null,8,["item","error","affectation"])]),(0,s._)("div",fA,[vA,(0,s._)("div",yA,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[17]||(e[17]=t=>o.itemCopy.delivery=t),onChange:e[18]||(e[18]=t=>o.errors.delivery=null),class:(0,Q.C_)([[o.errors.delivery&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.deliveryStatus,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,class:(0,Q.C_)([t.text,!t.value&&"!tw-text-green-500"]),key:t.id},(0,Q.zw)(t.name),11,xA)))),128))],34),[[a.bM,o.itemCopy.delivery]]),bA]),o.errors.delivery?((0,s.wg)(),(0,s.iD)("label",_A,(0,Q.zw)(o.errors.delivery),1)):(0,s.kq)("",!0)]),(0,s._)("div",kA,[CA,(0,s._)("div",DA,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[19]||(e[19]=t=>o.itemCopy.upsell=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.upsells,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([t.text]),value:t.value,key:t.id},(0,Q.zw)(t.name),11,SA)))),128))],512),[[a.bM,o.itemCopy.upsell]]),zA])]),(0,s._)("div",UA,[(0,s._)("label",LA,[(0,s.Uk)("Order Items "),o.errors.items?((0,s.wg)(),(0,s.iD)("span",PA," # "+(0,Q.zw)(o.errors.items),1)):(0,s.kq)("",!0)]),(0,s._)("div",null,[(0,s.Wm)(d,{order:o.itemCopy,error:o.errors.items,products:o.products,"products-fetched":o.products_fetched,items:o.itemCopy.items,"onUpdate:items":e[20]||(e[20]=t=>o.itemCopy.items=t)},null,8,["order","error","products","products-fetched","items"])])]),o.products_fetched?((0,s.wg)(),(0,s.iD)("div",AA,[(0,s.Wm)(w,{products:o.products,item:o.itemCopy},null,8,["products","item"])])):(0,s.kq)("",!0)])]),(0,s._)("div",$A,[(0,s._)("button",{onClick:e[21]||(e[21]=(...t)=>l.cancel&&l.cancel(...t)),class:"tw-py-2 tw-px-7 tw-rounded tw-text-sm tw-border tw-border-solid tw-border-tansparent dark:tw-border-neutral-900 hover:tw-border-neutral-400 dark:hover:tw-border-neutral-500 hover:tw-bg-gray-300 tw-bg-gray-200 dark:tw-bg-neutral-600 tw-duration-300 tw-text-neutral-900 dark:tw-text-neutral-300"}," Cancel "),(0,s._)("button",{onClick:e[22]||(e[22]=(...t)=>l.handleUpdate&&l.handleUpdate(...t)),disabled:o.isLoading,class:"tw-py-2 tw-px-7 tw-flex tw-items-center tw-rounded tw-text-sm tw-bg-orange-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-orange-600 dark:tw-border-neutral-900 dark:hover:tw-border-orange-500 hover:tw-bg-orange-500/80 dark:hover:tw-bg-orange-400 tw-duration-300 tw-text-white"},[(0,s.Wm)(X.t,{size:"small",class:(0,Q.C_)(["tw-duration-300 tw-animate-spin tw-overflow-hidden tw-max-w-0 tw-mr-0",[o.isLoading&&"!tw-max-w-[50px] !tw-mr-3"]])},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1},8,["class"]),qA],8,WA)])])])),_:1},8,["visible","onCancel"])])}const EA=(t,e)=>e.fullname?e.phone?e.adresse?e.note||"annuler"!=e.confirmation?e.affectation&&"confirmer"!=e.confirmation?(t.errors.affectation="Cannot update affectation: Order not confirmed.",!1):!!TA(t,e.items):(t.errors.note="Add Cancelation note !",!1):(t.errors.adresse="Address is required",!1):(t.errors.phone="Phone Number is required",!1):(t.errors.fullname="Client Name is required",!1),TA=(t,e)=>{if(!e.length)return t.errors.items="You should add one order item at least.",!1;let r=!0;return e.forEach((e=>0==e.product_id?(t.errors.items="Product is required for order item",r=!1,!1):0==e.product_variation_id?(t.errors.items="Select a product variation",r=!1,!1):0==e.quantity?(t.errors.items="Items quantity cannot be 0",r=!1,!1):void 0)),r},VA=(t,e)=>{t.$alert({title:"Updated Successfully",type:"success"});const r=e.data.order;t.$emit("update",r),t.isLoading=!1,t.cancel(),t.errors={}},IA=(t,e)=>{t.$alert({title:e.message,type:"error"}),"VALIDATION_ERROR"==e.code&&(t.errors=e.errors),t.isLoading=!1},FA=(t,e)=>{t.isLoading=!0,t.errors={},XU.update(e.id,e).then((e=>VA(t,e.data))).catch((e=>IA(t,e.response.data))).finally((()=>t.isLoading=!1))},RA={key:0},jA=(0,s._)("p",{class:"tw-col-span-12 tw-rounded-lg tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"}," No Order items ",-1),NA={class:"tw-flex tw-justify-end tw-items-center tw-py-3"},MA=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),HA=(0,s._)("span",null,"Add Item",-1),YA=[MA,HA],ZA={key:1,class:"md:tw-col-span-12 tw-col-span-12"},KA={class:"tw-max-w-full tw-overflow-auto"},BA={class:"tw-text-xs tw-text-gray-700 tw-uppercase !tw-rounded-t-lg tw-border tw-border-solid"},QA={class:"tw-bg-gray-50"},GA={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},JA={key:0},XA={colspan:"6"},t$={class:"tw-flex tw-justify-end tw-items-center tw-py-3"},e$=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),r$=(0,s._)("span",null,"Add Item",-1),a$=[e$,r$],s$=(0,s._)("td",{colspan:"4"},null,-1),i$=(0,s._)("td",null,null,-1),o$={colspan:"1",class:"tw-p-2"},l$={class:"tw-p-2 tw-py-1 tw-text-lg tw-font-['cairo'] tw-text-green-500 tw-w-24 tw-font-bold tw-tracking-wide tw-block focus:tw-outline-none tw-shadow-sm tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},n$={key:1},d$={colspan:"6"},w$={class:"tw-scale-75 tw-p-5"};function c$(t,e,r,a,i,o){const l=(0,s.up)("ItemRow"),n=(0,s.up)("loading");return(0,s.wg)(),(0,s.iD)("div",null,[r.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",RA,[jA,(0,s._)("div",NA,[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>o.addItem&&o.addItem(...t)),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-400 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},YA)])])),r.items.length?((0,s.wg)(),(0,s.iD)("div",ZA,[(0,s._)("div",KA,[((0,s.wg)(),(0,s.iD)("table",{key:r.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,s._)("thead",BA,[(0,s._)("tr",QA,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",GA,(0,Q.zw)(t),1)],2))),64))])]),r.productsFetched?((0,s.wg)(),(0,s.iD)("tbody",JA,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.items,(t=>((0,s.wg)(),(0,s.j4)(l,{key:t.id,item:t,products:r.products,onDelete:o.deleteItem,onUpdate:o.updateItem},null,8,["item","products","onDelete","onUpdate"])))),128)),(0,s._)("tr",null,[(0,s._)("td",XA,[(0,s._)("div",t$,[(0,s._)("button",{onClick:e[1]||(e[1]=(...t)=>o.addItem&&o.addItem(...t)),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-400 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},a$)])])]),(0,s._)("tr",null,[s$,i$,(0,s._)("td",o$,[(0,s._)("div",l$,[(0,s._)("p",null,(0,Q.zw)(i.currency)+" "+(0,Q.zw)(o.price),1)])])])])):((0,s.wg)(),(0,s.iD)("tbody",n$,[(0,s._)("tr",null,[(0,s._)("td",d$,[(0,s._)("div",w$,[(0,s.Wm)(n)])])])]))]))])])):(0,s.kq)("",!0)])}const u$=(0,s._)("td",null,null,-1),p$={class:"tw-p-2"},m$={class:"tw-relative"},h$=["value"],g$=(0,s._)("option",{value:0,selected:""},"Choose Product",-1),f$=["value"],v$=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),y$={class:"tw-p-2"},x$={key:0,class:"tw-relative"},b$=["value"],_$=(0,s._)("option",{value:"",disabled:""},"Choose Variation",-1),k$=["value"],C$={key:1,class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},D$=(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})],-1),S$=[D$],z$={class:"tw-p-2"},U$=["value"],L$={class:"tw-p-2"},P$=["value"],A$={class:"tw-flex tw-justify-center"};function $$(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("tr",null,[u$,(0,s._)("td",null,[(0,s._)("div",p$,[(0,s._)("div",m$,[(0,s._)("select",{onChange:e[0]||(e[0]=(...t)=>o.handleProductChange&&o.handleProductChange(...t)),value:r.item.product_id,class:"tw-block tw-border-solid focus:tw-outline-none tw-w-full tw-p-2 tw-pr-6 tw-text-xs tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},[g$,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.products,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.id},(0,Q.zw)(t.name),9,f$)))),128))],40,h$),v$])])]),(0,s._)("td",null,[(0,s._)("div",y$,[r.item.product_id?((0,s.wg)(),(0,s.iD)("div",x$,[o.product.variations.length>1?((0,s.wg)(),(0,s.iD)("select",{key:0,onChange:e[1]||(e[1]=(...t)=>o.handleVariationChange&&o.handleVariationChange(...t)),value:r.item.product_variation_id,class:"tw-block tw-border-solid focus:tw-outline-none tw-w-full tw-p-2 tw-pr-6 tw-text-xs tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},[_$,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.product.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.id},(0,Q.zw)(t.color)+" "+(0,Q.zw)(t.size),9,k$)))),128))],40,b$)):(0,s.kq)("",!0),o.product.variations.length>1?((0,s.wg)(),(0,s.iD)("div",C$,S$)):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])]),(0,s._)("td",null,[(0,s._)("div",z$,[(0,s._)("input",{onInput:e[2]||(e[2]=e=>t.$emit("update",{...r.item,quantity:parseInt(e.target.value)>=0?parseInt(e.target.value):0})),value:r.item.quantity,min:"0",type:"number",class:"focus:tw-outline-none tw-border-solid tw-block tw-w-24 tw-p-2 tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded-lg tw-bg-gray-50 sm:tw-text-xs focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},null,40,U$)])]),(0,s._)("td",null,[(0,s._)("div",L$,[(0,s._)("input",{onInput:e[3]||(e[3]=e=>t.$emit("update",{...r.item,price:parseFloat(e.target.value)})),value:r.item.price,min:"0",type:"number",class:"focus:tw-outline-none tw-border-solid tw-block tw-w-24 tw-p-2 tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded-lg tw-bg-gray-50 sm:tw-text-xs focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},null,40,P$)])]),(0,s._)("td",null,[(0,s._)("div",A$,[(0,s._)("button",{onClick:e[4]||(e[4]=(...t)=>o.handleDelete&&o.handleDelete(...t)),class:"tw-px-2 tw-py-1 tw-w-[25px] tw-h-[25px] tw-border tw-border-solid tw-border-red-500/20 hover:tw-bg-red-500/10 hover:tw-border-red-500/70 tw-duration-300 tw-text-red-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(X.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])])])])}var W$={props:{item:{required:!0},products:{required:!0}},computed:{product(){return 0==this.item.product_id?null:this.products.find((t=>t.id==this.item.product_id))}},methods:{handleProductChange(t){const e=parseInt(t.target.value);if(!e)return!1;const r=this.products.find((t=>t.id==e));console.log(r.variations.length>0?r.variations[0].id:null);const a={...this.item,product_id:e,product:r,product_ref:r.ref,product_variation_id:r.variations.length>0?r.variations[0].id:null,product_variation:r.variations.length>0?r.variations[0]:null};this.$emit("update",a)},handleVariationChange(t){this.$emit("update",{...this.item,product_variation:this.product.variations.find((e=>e.id==parseInt(t.target.value))),product_variation_id:parseInt(t.target.value)})},handleDelete(){this.$emit("delete",this.item.id)}},mounted(){}};const q$=(0,d.Z)(W$,[["render",$$]]);var O$=q$,E$={components:{ItemRow:O$},props:{items:{required:!0,default:[]},error:{required:!1,default:null},products:{required:!0},productsFetched:{required:!0},order:{required:!0}},data(){return{currency:R}},computed:{price(){return Mi(this.order)}},methods:{updateItem(t){const e=this.items.map((e=>e.id==t.id?t:e));this.$emit("update:items",e)},deleteItem(t){const e=this.items.filter((e=>e.id!=t));this.$emit("update:items",e)},addItem(){const t=this.items.length>0?this.items[this.items.length-1].id:1,e=t?t+1:1,r={id:e,quantity:0,price:0,product_variation_id:0,product_id:0},a=[...this.items,r];this.$emit("update:items",a)}},mounted(){}};const T$=(0,d.Z)(E$,[["render",c$]]);var V$=T$;const I$=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Affectation",-1),F$={key:0,class:"tw-relative"},R$=["value","disabled"],j$=(0,s._)("option",{value:""},"Choose a Delivery",-1),N$=["value"],M$=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),H$={key:1,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},Y$={key:2,class:"tw-relative"},Z$={class:"tw-absolute tw-scale-75 tw-left-1/2 tw-top-1/2 -tw-translate-x-1/2 -tw-translate-y-1/2 tw-z-10"},K$=(0,s._)("select",{disabled:"",class:"tw-opacity-30 tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[(0,s._)("option",{value:null,selected:""},"Loading...")],-1),B$=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},null,-1);function Q$(t,e,r,a,i,o){const l=(0,s.up)("loading");return(0,s.wg)(),(0,s.iD)("div",null,[I$,i.fetched?((0,s.wg)(),(0,s.iD)("div",F$,[(0,s._)("select",{value:r.affectation,onChange:e[0]||(e[0]=(...t)=>o.handleChange&&o.handleChange(...t)),disabled:"confirmer"!=r.item.confirmation,class:(0,Q.C_)([[r.error&&"!tw-border-red-400","confirmer"!=r.item.confirmation&&"tw-cursor-not-allowed"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[j$,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.availableDeliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,N$)))),128))],42,R$),M$])):(0,s.kq)("",!0),i.fetched&&r.error?((0,s.wg)(),(0,s.iD)("label",H$,(0,Q.zw)(r.error),1)):(0,s.kq)("",!0),i.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Y$,[(0,s._)("div",Z$,[(0,s.Wm)(l)]),K$,B$]))])}var G$={props:{affectation:{required:!0},error:{required:!1,default:null},item:{required:!0}},data(){return{deliveries:[],fetched:!1}},computed:{availableDeliveries(){return this.deliveries.filter((t=>t.has.some((t=>this.item.items.some((e=>e.product_id==t))))))},delivery(){return this.deliveries.find((t=>t.id==this.affectation))}},watch:{"item.confirmation":{deep:!0,handler(){this.$emit("update:affectation",null)}},"item.items":{deep:!0,handler(){if(!this.affectation)return!1;this.delivery.has.some((t=>this.item.items.some((e=>e.product_id==t))))||this.$emit("update:affectation",null)}}},methods:{getDeliveries(){this.fetched=!1,K.allDeliveries().then((t=>{"SUCCESS"==t?.data.code&&(this.deliveries=t.data.data.deliveries,this.fetched=!0)})).catch(this.$handleApiError)},handleChange(t){this.$emit("update:affectation",t.target.value),this.$emit("update:error",null)}},mounted(){this.getDeliveries()}};const J$=(0,d.Z)(G$,[["render",Q$]]);var X$=J$;const tW={key:0},eW=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Offers",-1),rW={class:"md:tw-col-span-12 tw-col-span-12"},aW={class:"tw-max-w-full tw-overflow-auto"},sW={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},iW=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 !tw-rounded-t-lg tw-border tw-border-solid"},[(0,s._)("tr",{class:"tw-bg-gray-50"},[(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Product Name"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Quantity"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Price"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Note")])],-1),oW={class:"tw-px-3 tw-py-2"},lW={class:"tw-px-3 tw-py-2"},nW={class:"tw-px-3 tw-py-2"},dW={class:"tw-px-3 tw-py-2"},wW={class:"tw-max-w-[250px] tw-text-sm"};function cW(t,e,r,a,i,o){return o.offers.length?((0,s.wg)(),(0,s.iD)("div",tW,[eW,(0,s._)("div",rW,[(0,s._)("div",aW,[(0,s._)("table",sW,[iW,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.offers,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"odd:tw-bg-white even:tw-bg-gray-50 tw-border-b"},[(0,s._)("td",oW,(0,Q.zw)(o.getProduct(t.product_id)?.name),1),(0,s._)("td",lW,(0,Q.zw)(t.quantity),1),(0,s._)("td",nW,(0,Q.zw)(t.price)+" "+(0,Q.zw)(i.currency),1),(0,s._)("td",dW,[(0,s._)("p",wW,(0,Q.zw)(t.note),1)])])))),128))])])])])])):(0,s.kq)("",!0)}var uW={props:{products:{required:!0},item:{required:!0}},data(){return{currency:R}},computed:{offers(){return this.products.filter((t=>this.item.items.map((t=>t.product_id)).includes(t.id))).flatMap((t=>t.offers))}},methods:{getProduct(t){return this.products.find((e=>e.id==t))}},mounted(){}};const pW=(0,d.Z)(uW,[["render",cW]]);var mW=pW,hW={components:{OrderItems:V$,OrderAffectation:X$,ProductOffersTable:mW},props:{visible:{required:!0},item:{required:!0}},data(){return{confirmations:Pn,deliveryStatus:Wn,upsells:$n,isLoading:!1,products_fetched:null,products:null,itemCopy:null,errors:{fullname:null,phone:null,city:null,adresse:null,note:null,reported_agente_date:null,affectation:null,items:null}}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{handleUpdate(){const t=EA(this,this.itemCopy);if(!t)return!1;FA(this,this.itemCopy)},cancel(){if(this.isLoading)return!1;this.$emit("update:visible",!1)},getProducts(){this.products_fetched=!1,ea.allForOrder().then((t=>{"SUCCESS"==t.data.code?this.products=t.data.data.products:this.products=[],this.products_fetched=!0})).catch(this.$handleApiError)}},mounted(){this.itemCopy=JSON.parse(JSON.stringify(this.item)),this.getProducts()}};const gW=(0,d.Z)(hW,[["render",OA]]);var fW=gW;const vW={class:"tw-mx-auto tw-w-[95%] md:tw-max-w-[800px] tw-overflow-hidden tw-h-fit dark:tw-bg-neutral-900 tw-bg-white tw-border tw-border-solid dark:tw-border-neutral-700 tw-border-neutral-300 tw-shadow-md tw-my-5 tw-rounded-lg"},yW=(0,s._)("div",{class:"tw-p-4 tw-text-lg tw-border-b tw-border-solid tw-font-medium tw-flex dark:tw-text-neutral-400 tw-text-neutral-500 tw-items-center tw-gap-4 dark:tw-bg-neutral-800 tw-bg-gray-50"}," Order History ",-1),xW={class:"tw-bg-white tw-p-4"},bW={key:0},_W={key:1,class:"tw-p-5"},kW={class:"d-flextw-flex-col justify-space-between flex-grow-1"},CW={class:"tw-flex tw-items-center tw-gap-2 tw-my-2"},DW={class:"tw-text-sm tw-capitalize tw-text-gray-500 tw-flex tw-items-center tw-mt-2 tw-gap-2 tw-font-bold tw-font-['cairo']"},SW={class:"flex-shrink-0 tw-text-neutral-500 tw-flex tw-items-center tw-gap-2 tw-text-sm"},zW={class:"d-flextw-flex-col justify-space-between flex-grow-1"},UW={class:"tw-flex tw-flex-col tw-my-2"},LW=(0,s._)("div",null,"New Order Created",-1),PW={class:"flex-shrink-0 tw-flex tw-items-center tw-gap-2 tw-text-sm"},AW={class:"tw-flex tw-justify-end tw-items-center tw-p-4 tw-gap-3 dark:tw-bg-neutral-900 tw-bg-gray-50 tw-border-t tw-border-solid"};function $W(t,e,r,a,i,o){const l=(0,s.up)("loading"),n=(0,s.up)("popup-new");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(n,{visible:r.visible,closeable:!0,onCancel:o.cancel},{default:(0,s.w5)((()=>[(0,s._)("div",vW,[yW,(0,s._)("div",xW,[i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",bW,[(0,s.Wm)(l)])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",_W,[(0,s.Wm)(yd.R,{density:"compact",side:"end"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.events,(t=>((0,s.wg)(),(0,s.j4)(xd.N,{key:t.id,class:"mb-4","dot-color":o.eventColor(t.type),size:"x-small"},{default:(0,s.w5)((()=>[(0,s._)("div",kW,[(0,s._)("div",CW,[(0,s.Wm)(vd.v,{class:"ms-0 tw-capitalize tw-w-fit",color:o.eventColor(t.type),label:"",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(t.type),1)])),_:2},1032,["color"]),"responsibility"!=t.type?((0,s.wg)(),(0,s.j4)(X.t,{key:0,size:"x-small",color:"grey"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-arrow-right")])),_:1})):(0,s.kq)("",!0),"responsibility"!=t.type?((0,s.wg)(),(0,s.j4)(vd.v,{key:1,class:"ms-0 tw-capitalize tw-w-fit",color:"green",label:"",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(!t.historique&&["affectation","delivery","confirmation"].includes(t.type)?"confirmation"==t.type?"New":"Select":t.historique),1)])),_:2},1024)):(0,s.kq)("",!0)]),(0,s._)("div",DW,[(0,s.Wm)(X.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-account")])),_:1}),(0,s._)("span",null,(0,Q.zw)(t.users.firstname)+" "+(0,Q.zw)(t.users.lastname),1)]),(0,s._)("div",SW,[(0,s._)("span",null,(0,Q.zw)(t.created_at?.split("T")[0]),1),(0,s._)("span",null,(0,Q.zw)(t.created_at?.split("T")[1].split(".")[0]),1)])])])),_:2},1032,["dot-color"])))),128)),(0,s.Wm)(xd.N,{class:"mb-4","dot-color":"green",size:"x-small"},{default:(0,s.w5)((()=>[(0,s._)("div",zW,[(0,s._)("div",UW,[(0,s.Wm)(vd.v,{class:"ms-0 tw-capitalize tw-w-fit",color:"green",label:"",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Order Created ")])),_:1}),LW]),(0,s._)("div",PW,[(0,s._)("span",null,(0,Q.zw)(r.item.created_at?.split("T")[0]),1),(0,s._)("span",null,(0,Q.zw)(r.item.created_at?.split("T")[1].split(".")[0]),1)])])])),_:1})])),_:1})])):(0,s.kq)("",!0)]),(0,s._)("div",AW,[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>o.cancel&&o.cancel(...t)),class:"tw-py-2 tw-px-7 tw-rounded tw-text-sm tw-border tw-border-solid tw-border-tansparent dark:tw-border-neutral-900 hover:tw-border-neutral-400 dark:hover:tw-border-neutral-500 hover:tw-bg-gray-300 tw-bg-gray-200 dark:tw-bg-neutral-600 tw-duration-300 tw-text-neutral-900 dark:tw-text-neutral-300"}," Cancel ")])])])),_:1},8,["visible","onCancel"])])}var WW={components:{},props:{visible:{required:!0},item:{required:!0}},data(){return{allEvents:[],isLoaded:!1}},computed:{events(){return[...this.allEvents].reverse()}},methods:{cancel(){this.$emit("update:visible",!1)},getHistory(){this.isLoaded=!1,Ir.history(this.item.id).then((t=>{this.allEvents=t.data.data.orders}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))},eventColor(t){let e={confirmation:"primary-color",delivery:"blue",upsell:"purple",affectation:"cyan"};return["confirmation","delivery","upsell","affectation"].includes(t)?e[t]:"primary-color"}},mounted(){this.getHistory()}};const qW=(0,d.Z)(WW,[["render",$W]]);var OW=qW,EW={components:{UpdatePopup:fW,HistoryPopup:OW},props:{item:{required:!0}},data(){return{update:!1,history:!1,isLoading:!1}},methods:{handle(){}}};const TW=(0,d.Z)(EW,[["render",qP]]);var VW=TW;const IW={key:0},FW={key:0,class:"tw-relative tw-inline-block tw-text-left"},RW={key:0},jW=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"#4ade80",d:"M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41L9 16.17z"})],-1),NW=[jW],MW={class:"tw-w-full tw-truncate tw-text-start tw-text-gray-500"},HW={key:0,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},YW=(0,s.uE)('<g fill="none" stroke="#4ade80" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" stroke-opacity=".3" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="1.3s" values="60;0"></animate></path><path stroke-dasharray="15" stroke-dashoffset="15" d="M12 3C16.9706 3 21 7.02944 21 12"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="15;0"></animate><animateTransform attributeName="transform" dur="1.5s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"></animateTransform></path></g>',1),ZW=[YW],KW={key:0,class:"tw-text-xs tw-mt-2 tw-max-w-[150px] tw-text-red-400 tw-whitespace-normal"},BW={key:0,class:"tw-absolute tw-right-0 tw-z-10 tw-mt-2 tw-w-56 tw-origin-top-right tw-rounded-md tw-bg-white tw-shadow-lg tw-ring-1 tw-ring-black tw-ring-opacity-5 focus:tw-outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",tabindex:"-1"},QW={class:"tw-py-1",role:"none"},GW=["onClick"],JW={key:1},XW={class:"tw-p-2 tw-scale-75"};function tq(t,e,r,a,i,o){const l=(0,s.up)("loading");return"confirmer"==r.item.confirmation?((0,s.wg)(),(0,s.iD)("div",IW,[r.deliveries.fetched?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",FW,[(0,s._)("div",null,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.visible=!i.visible),type:"button",class:"tw-inline-flex tw-w-[150px] tw-truncate tw-relative tw-items-center tw-gap-x-1.5 tw-rounded-md tw-bg-white tw-px-3 tw-py-1 tw-text-sm tw-font-semibold tw-text-gray-900 tw-shadow-none hover:tw-shadow-sm tw-ring-1 tw-ring-inset tw-ring-gray-200",id:"menu-button","aria-expanded":"true","aria-haspopup":"true"},[o.selected.id?((0,s.wg)(),(0,s.iD)("div",RW,NW)):(0,s.kq)("",!0),(0,s._)("p",MW,(0,Q.zw)(o.selected.name),1),(0,s._)("div",null,[i.isLoading?((0,s.wg)(),(0,s.iD)("svg",HW,ZW)):(0,s.kq)("",!0)])]),i.errors.affectation?((0,s.wg)(),(0,s.iD)("p",KW,(0,Q.zw)(i.errors.affectation),1)):(0,s.kq)("",!0)]),(0,s.Wm)(Ut.cu,null,{default:(0,s.w5)((()=>[i.visible?((0,s.wg)(),(0,s.iD)("div",BW,[(0,s._)("div",QW,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.availableDeliveries,(t=>((0,s.wg)(),(0,s.iD)("button",{onClick:e=>o.handleChange(t.id),key:t.id,class:"hover:tw-bg-gray-100 tw-items-center tw-w-full tw-text-start hover:tw-text-gray-700 tw-text-gray-700 tw-flex tw-gap-2 tw-px-4 tw-py-2 tw-text-sm",role:"menuitem"},[(0,s._)("span",null,(0,Q.zw)(t.name),1)],8,GW)))),128))])])):(0,s.kq)("",!0)])),_:1})])),[[Bt.L,o.handleClickOutside]]):((0,s.wg)(),(0,s.iD)("div",JW,[(0,s._)("div",XW,[(0,s.Wm)(l)])]))])):(0,s.kq)("",!0)}var eq={props:{deliveries:{required:!0},item:{required:!0}},data(){return{visible:!1,isLoading:!1,errors:{}}},computed:{availableDeliveries(){return[{id:null,name:"Select"},...this.deliveries.items.filter((t=>t.has.some((t=>this.item.items.some((e=>e.product_id==t))))))]},selected(){return this.availableDeliveries.find((t=>t.id==this.item.affectation))}},methods:{handleClickOutside(){this.visible&&(this.visible=!1)},handleChange(t){this.visible=!1,this.errors={};const e={...this.item,affectation:t};FA(this,e,!1)}}};const rq=(0,d.Z)(eq,[["render",tq]]);var aq=rq,sq={components:{TableActions:VW,TableRowAffectation:aq},props:{item:{required:!0},selected:{required:!0},deliveries:{required:!0},all:{required:!0},index:{required:!0}},data(){return{moment:UP()}},computed:{confirmation(){return Pn.find((t=>t.value==this.item.confirmation))},deliveryState(){return Wn.find((t=>t.value==this.item.delivery))},isSelected(){return this.selected.includes(this.item.id)}},methods:{handleSelected(t){if(t.target.checked){const t=[...this.selected];return t.push(this.item.id),this.$emit("update:selected",t),!1}const e=this.selected.filter((t=>t!=this.item.id));this.$emit("update:selected",e)}},mounted(){}};const iq=(0,d.Z)(sq,[["render",SP]]);var oq=iq,lq={components:{TablePaginationNoNums:XL,TableRow:oq},props:{items:{default:[]},loading:{type:Boolean,default:!0},from:{type:Number,default:1},to:{type:Number,default:1},perPage:{type:Number,default:10},total:{type:Number,default:0},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1},selected:{required:!0},deliveries:{required:!0}},data(){return{isAllSelected:!1}},computed:{selectedOrders:{get(){return this.selected},set(t){this.$emit("update:selected",t)}}},watch:{selected(t){0==t.length&&(this.isAllSelected=!1)}},methods:{handleSelectedAllChange(t){t.target.checked?(this.$emit("update:selected",[...this.items.map((t=>t.id))]),this.isAllSelected=!0):(this.$emit("update:selected",[]),this.isAllSelected=!1)}}};const nq=(0,d.Z)(lq,[["render",TL]]);var dq=nq;const wq={class:"tw-mt-6 tw-mb-4 md:tw-flex md:tw-items-center md:tw-justify-between"},cq={class:"tw-inline-flex tw-overflow-hidden tw-bg-white tw-border tw-divide-x tw-rounded-lg darkx:tw-bg-gray-900 rtl:tw-flex-row-reverse darkx:tw-border-gray-700 darkx:tw-divide-gray-700"},uq=["disabled"],pq=["disabled"],mq=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M9 5a1 1 0 1 0 0 2a1 1 0 0 0 0-2zM6.17 5a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 0 1 0-2h1.17zM15 11a1 1 0 1 0 0 2a1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-1.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h7.17zM9 17a1 1 0 1 0 0 2a1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h1.17z"})],-1),hq=[mq],gq=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M10 2c-.6 0-1 .4-1 1v18c0 .6.4 1 1 1s1-.4 1-1V3c0-.6-.4-1-1-1zM5 12c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1s1-.4 1-1v-8c0-.6-.4-1-1-1zm10-4c-.6 0-1 .4-1 1v12c0 .6.4 1 1 1s1-.4 1-1V9c0-.6-.4-1-1-1zm5 8c-.6 0-1 .4-1 1v4c0 .6.4 1 1 1s1-.4 1-1v-4c0-.6-.4-1-1-1z"})],-1),fq=[gq],vq=["disabled"],yq=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M15.9 1C12.1 1.1 9 4.2 9 8c0 3.9 3.1 7 7 7s7-3.1 7-7s-3.1-7-7.1-7c.1 0 0 0 0 0m.1 2c2.8 0 5 2.2 5 5s-2.2 5-5 5s-5-2.2-5-5s2.2-5 5-5m-1 1v5l3.6 2.2l.8-1.2l-2.9-1.7V4H15M4.6 12.8c1.4 2.8 3.8 5.2 6.6 6.6l2.2-2.2c.3-.3.7-.4 1-.2c1.1.4 2.3.6 3.6.6c.5 0 1 .5 1 1V22c0 .5-.5 1-1 1C8.6 23 1 15.4 1 6c0-.6.5-1 1-1h3.5c.6 0 1 .4 1 1c0 1.2.2 2.4.6 3.6c.1.4 0 .7-.2 1l-2.3 2.2"})],-1),xq=[yq],bq=["disabled"],_q=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 16 16"},[(0,s._)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4.75 10.75h-3m12.5-2c0 3-2.798 5.5-6.25 5.5c-3.75 0-6.25-3.5-6.25-3.5v3.5m9.5-9h3m-12.5 2c0-3 2.798-5.5 6.25-5.5c3.75 0 6.25 3.5 6.25 3.5v-3.5"})],-1),kq=[_q],Cq=["disabled"],Dq=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"m16.2 20.5l2.8-2.8V20h1v-4h-4v1h2.3l-2.8 2.8l.7.7ZM5 21q-.825 0-1.413-.588T3 19V5q0-.825.588-1.413T5 3h14q.825 0 1.413.588T21 5v6.7q-.475-.225-.975-.388T19 11.075V5H5v14h6.05q.075.55.238 1.05t.387.95H5Zm0-3v1V5v6.075V11v7Zm2-1h4.075q.075-.525.238-1.025t.362-.975H7v2Zm0-4h6.1q.8-.75 1.787-1.25T17 11.075V11H7v2Zm0-4h10V7H7v2Zm11 14q-2.075 0-3.538-1.463T13 18q0-2.075 1.463-3.538T18 13q2.075 0 3.538 1.463T23 18q0 2.075-1.463 3.538T18 23Z"})],-1),Sq=[Dq],zq={class:"tw-relative"},Uq=["value"],Lq=(0,s.uE)('<option value="5">5</option><option value="10">10</option><option value="20">20</option><option value="50">50</option><option value="100">100</option><option value="250">250</option><option value="500">500</option>',7),Pq=[Lq],Aq=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),$q={class:"tw-relative tw-flex tw-items-center tw-mt-4 md:tw-mt-0"},Wq=["value"],qq={class:"tw-overflow-hidden tw-col-span-1"},Oq={class:"tw-overflow-hidden tw-col-span-1"},Eq={class:"tw-overflow-hidden tw-col-span-1"};function Tq(t,e,r,i,o,l){const n=(0,s.up)("FiltersWrapper"),d=(0,s.up)("IndexExport"),w=(0,s.up)("IndexStatistics");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",wq,[(0,s._)("div",cq,[(0,s._)("button",{class:(0,Q.C_)([[o.showAll&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 hover:tw-bg-gray-100 sm:tw-text-sm darkx:tw-bg-gray-800 darkx:tw-text-gray-300"]),disabled:o.showAll,onClick:e[0]||(e[0]=t=>l.filterToday(!1))}," View all ",10,uq),(0,s._)("button",{title:"Orders Created Today",class:(0,Q.C_)([[o.showToday&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"]),disabled:o.showToday,onClick:e[1]||(e[1]=t=>l.filterToday(!0))}," Today ",10,pq),(0,s._)("button",{title:"Show Filters Tab",onClick:e[2]||(e[2]=t=>o.showFilters=!o.showFilters),class:(0,Q.C_)([[o.showFilters&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"])},hq,2),r.activeStatistics&&r.statistics?((0,s.wg)(),(0,s.iD)("button",{key:0,title:"Show Statistics Tab",onClick:e[3]||(e[3]=t=>o.showStatistics=!o.showStatistics),class:(0,Q.C_)([[o.showStatistics&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"])},fq,2)):(0,s.kq)("",!0),(0,s._)("button",{title:"Show Reported Orders First",onClick:e[4]||(e[4]=(...t)=>l.showReportedFirst&&l.showReportedFirst(...t)),disabled:r.loading,class:(0,Q.C_)([[r.filters.reported_first&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"])},xq,10,vq),(0,s._)("button",{title:"Refresh",onClick:e[5]||(e[5]=e=>t.$emit("fresh")),disabled:r.loading,class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},kq,8,bq),(0,s._)("button",{title:"Show Export Options",onClick:e[6]||(e[6]=t=>o.showExport=!o.showExport),class:(0,Q.C_)([[o.showExport&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"]),disabled:r.loading},Sq,10,Cq),(0,s._)("div",zq,[(0,s._)("select",{onChange:e[7]||(e[7]=(...t)=>l.handlePerPageChange&&l.handlePerPageChange(...t)),value:r.perPage,class:"tw-h-full tw-px-5 tw-py-2 tw-w-20 focus:tw-outline-none tw-text-xs tw-font-medium tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},Pq,40,Uq),Aq])]),(0,s._)("div",$q,[(0,s._)("input",{type:"text",placeholder:"Search",value:r.search,onInput:e[8]||(e[8]=e=>t.$emit("update:search",e.target.value)),onKeyup:e[9]||(e[9]=(0,a.D2)((e=>t.$emit("filter")),["enter"])),class:"tw-block tw-w-full tw-py-1.5 tw-pl-5 tw-text-gray-700 tw-bg-white tw-border tw-border-solid tw-border-gray-200 tw-rounded-lg md:tw-w-80 placeholder-gray-400/70 tw-pr-11 rtl:tw-pr-11 rtl:tw-pl-5 darkx:tw-bg-gray-900 darkx:tw-text-gray-300 darkx:tw-border-gray-600 focus:tw-border-orange-400 darkx:focus:tw-border-orange-300 focus:tw-ring-orange-300 focus:tw-outline-none focus:tw-ring focus:tw-ring-opacity-40"},null,40,Wq),(0,s._)("button",{onClick:e[10]||(e[10]=e=>t.$emit("filter")),class:"tw-absolute tw-right-0 tw-px-2 tw-py-1 tw-w-[38px] tw-h-[36px] tw-border-solid tw-rounded-r-lg tw-border-l tw-text-orange-500/80 tw-border-orange-500/20 hover:tw-bg-orange-500/10 hover:tw-border-orange-500/70 tw-duration-300 tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(X.t,{size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-magnify")])),_:1})])])]),(0,s._)("div",{class:(0,Q.C_)([[o.showFilters?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",qq,[(0,s.Wm)(n,{onClear:e[11]||(e[11]=e=>t.$emit("clear")),onFilter:e[12]||(e[12]=e=>t.$emit("filter")),filters:r.filters,onUpdate:e[13]||(e[13]=e=>t.$emit("update:filters",e))},null,8,["filters"])])],2),(0,s._)("div",{class:(0,Q.C_)([[o.showExport?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",Oq,[(0,s.Wm)(d,{filters:r.filters},null,8,["filters"])])],2),r.statistics?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([[o.showStatistics?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",Eq,[(0,s.Wm)(w,{statistics:r.statistics},null,8,["statistics"])])],2)):(0,s.kq)("",!0)])}const Vq={class:"tw-mb-4"},Iq={class:"tw-grid tw-grid-cols-12 tw-gap-4"},Fq={class:"tw-h-full tw-w-full tw-p-3 tw-rounded tw-space-y-2 tw-border tw-border-solid"},Rq={class:"tw-flex tw-items-center tw-justify-between"},jq={class:"tw-text-xl tw-font-bold tw-text-gray-900"},Nq={class:"tw-px-2 tw-py-1 tw-font-medium tw-text-sm tw-rounded tw-bg-white tw-text-gray-900"};function Mq(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",Vq,[(0,s._)("div",Iq,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.visible,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"md:tw-col-span-3 tw-col-span-12"},[(0,s._)("div",Fq,[(0,s._)("p",{class:(0,Q.C_)(["tw-text-sm tw-font-bold tw-w-fit tw-h-fit tw-px-2 tw-rounded",[o.getConfirmation(t.confirmation).textLight,o.getConfirmation(t.confirmation).bgLight]])},(0,Q.zw)(t.name),3),(0,s._)("div",Rq,[(0,s._)("span",jq,(0,Q.zw)(t.total),1),(0,s._)("span",Nq,(0,Q.zw)(t.percent)+"%",1)])])])))),128))])])}var Hq={props:{statistics:{required:!0}},computed:{visible(){return this.statistics.show.includes("*")?this.statistics.data:this.statistics.data.filter((t=>this.statistics.show.includes(t.followup_confirmation)))}},methods:{getConfirmation(t){return Pn.find((e=>e.value==t))}}};const Yq=(0,d.Z)(Hq,[["render",Mq]]);var Zq=Yq;const Kq={class:"tw-mb-4"},Bq={class:"tw-flex tw-items-center tw-gap-2"},Qq=["disabled"],Gq=(0,s._)("span",null,"Select Filtered",-1),Jq={class:"tw-flex tw-justify-end"},Xq=["disabled"];function tO(t,e,r,a,i,o){const l=(0,s.up)("download-csv");return(0,s.wg)(),(0,s.iD)("div",Kq,[(0,s._)("div",Bq,[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>o.handleExportFiltered&&o.handleExportFiltered(...t)),disabled:i.isLoadingFiltered,class:"tw-py-2 tw-px-7 tw-flex tw-items-center tw-rounded tw-text-sm tw-bg-orange-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-orange-600 dark:tw-border-neutral-900 dark:hover:tw-border-orange-500 hover:tw-bg-orange-500/80 dark:hover:tw-bg-orange-400 tw-duration-300 tw-text-white"},[(0,s.Wm)(X.t,{size:"small",class:(0,Q.C_)(["tw-duration-300 tw-animate-spin tw-overflow-hidden tw-max-w-0 tw-mr-0",[i.isLoadingFiltered&&"!tw-max-w-[50px] !tw-mr-3"]])},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1},8,["class"]),Gq],8,Qq)]),(0,s._)("div",Jq,[(0,s._)("button",{disabled:i.readyToDownload,class:(0,Q.C_)([[!i.readyToDownload&&"!tw-bg-gray-200 !tw-cursor-not-allowed hover:tw-bg-gray-200 !tw-text-gray-600"],"tw-py-2 tw-px-7 tw-flex tw-items-center tw-cursor-pointer tw-rounded tw-text-sm tw-bg-emerald-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-emerald-600 dark:tw-border-neutral-900 dark:hover:tw-border-emerald-500 hover:tw-bg-emerald-500/80 dark:hover:tw-bg-emerald-400 tw-duration-300 tw-text-white"])},[(0,s.Wm)(l,{delimiter:";",data:i.toImport},{default:(0,s.w5)((()=>[(0,s.Uk)(" Download ")])),_:1},8,["data"])],10,Xq)])])}var eO={props:{filters:{required:!0}},data(){return{isLoadingFiltered:!1,isLoading:!1,toImport:[],readyToDownload:!1}},watch:{filters:{deep:!0,handler(){this.readyToDownload=!1}}},methods:{handleExportFiltered(){this.isLoadingFiltered=!0,this.readyToDownload=!1,XU["export"]({filters:this.filters}).then((t=>{if("SUCCESS"==t.data.code){const e=t.data.data.orders;this.importOrders(e),this.readyToDownload=!0}})).catch(this.$handleApiError).finally((()=>{this.isLoadingFiltered=!1}))},importOrders(t){const e=t.map((t=>{const e=Object.keys(t);return e.forEach((e=>{t[e]=t[e]?t[e]:"NONE"})),t})),r=",",a=e.map((t=>(delete t["factorisation_id"],delete t["note_d"],delete t["cmd"],delete t["product_name"],delete t["is_done"],delete t["factorisation"],delete t["doubles"],delete t["is_double"],delete t["has_doubles"],delete t["double"],{...t,products:t.items.map((t=>`id=${t.id}${r}price=${t.price?t.price:0}${r}name=${t.product?.name}${r}ref=${t.product?.ref}${r}variation_id=${t.product_variation_id}${r}size=${t.product_variation.size?t.product_variation.size:"DEFAULT"}${r}color=${t.product_variation.color?t.product_variation.color:"DEFAULT"}${r}`))})));this.toImport=a.map((t=>(delete t["items"],t)))}}};const rO=(0,d.Z)(eO,[["render",tO]]);var aO=rO;const sO={class:"tw-mb-4"},iO={class:"tw-grid tw-grid-cols-12 tw-gap-4 tw-p-1"},oO={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},lO=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Created From",-1),nO=["value"],dO={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},wO=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Created To",-1),cO=["value"],uO={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},pO=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Dropped From",-1),mO=["value"],hO={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},gO=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Dropped To",-1),fO=["value"],vO={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},yO=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),xO=["value"],bO=(0,s._)("option",{value:"all",selected:""},"All",-1),_O=["value"],kO={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},CO=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Delivery",-1),DO=["value"],SO=(0,s._)("option",{value:"all",selected:""},"All",-1),zO=["value"],UO={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},LO=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Upsell",-1),PO=["value"],AO=(0,s._)("option",{value:"all",selected:""},"All",-1),$O=(0,s._)("option",{value:"oui",class:"tw-capitalize"},"Yes",-1),WO=(0,s._)("option",{value:"non",class:"tw-capitalize"},"Non",-1),qO=[AO,$O,WO],OO={class:"tw-col-span-12 tw-flex tw-justify-end tw-gap-2"},EO=(0,s._)("svg",{class:"tw-stroke-gray-500",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59L7.11 5.7A.996.996 0 1 0 5.7 7.11L10.59 12L5.7 16.89a.996.996 0 1 0 1.41 1.41L12 13.41l4.89 4.89a.996.996 0 1 0 1.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"})],-1),TO=(0,s._)("span",null,"Clear",-1),VO=[EO,TO],IO=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[(0,s._)("path",{fill:"#fff",d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})],-1),FO=(0,s._)("span",null,"Filter",-1),RO=[IO,FO];function jO(t,e,r,a,i,o){(0,s.up)("DateFilter");const l=(0,s.up)("ProductFilter"),n=(0,s.up)("AgentFilter"),d=(0,s.up)("AffectationFilter");return(0,s.wg)(),(0,s.iD)("div",sO,[(0,s._)("div",iO,[(0,s.kq)("",!0),(0,s._)("div",oO,[lO,(0,s._)("input",{value:r.filters.created_from,type:"date",onChange:e[1]||(e[1]=e=>t.$emit("update",{...r.filters,created_from:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,nO)]),(0,s._)("div",dO,[wO,(0,s._)("input",{value:r.filters.created_to,type:"date",onChange:e[2]||(e[2]=e=>t.$emit("update",{...r.filters,created_to:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,cO)]),(0,s._)("div",uO,[pO,(0,s._)("input",{value:r.filters.dropped_from,type:"date",onChange:e[3]||(e[3]=e=>t.$emit("update",{...r.filters,dropped_from:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,mO)]),(0,s._)("div",hO,[gO,(0,s._)("input",{value:r.filters.dropped_to,type:"date",onChange:e[4]||(e[4]=e=>t.$emit("update",{...r.filters,dropped_to:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,fO)]),(0,s.Wm)(l,{filters:r.filters,onUpdate:e[5]||(e[5]=e=>t.$emit("update",e))},null,8,["filters"]),(0,s.Wm)(n,{filters:r.filters,onUpdate:e[6]||(e[6]=e=>t.$emit("update",e))},null,8,["filters"]),(0,s._)("div",vO,[yO,(0,s._)("select",{value:r.filters.confirmation,onChange:e[7]||(e[7]=e=>t.$emit("update",{...r.filters,confirmation:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[bO,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([[t.text,null==t.value&&"!tw-text-green-500"],"tw-capitalize"]),value:t.value?t.value:"",key:t.value},(0,Q.zw)(t.name),11,_O)))),128))],40,xO)]),(0,s.Wm)(d,{filters:r.filters,onUpdate:e[8]||(e[8]=e=>t.$emit("update",e))},null,8,["filters"]),(0,s._)("div",kO,[CO,(0,s._)("select",{onChange:e[9]||(e[9]=e=>t.$emit("update",{...r.filters,delivery:e.target.value})),value:r.filters.delivery,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[SO,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([[t.text,null==t.value&&"!tw-text-gray-500"],"tw-capitalize"]),value:t.value?t.value:"",key:t.id},(0,Q.zw)(t.name),11,zO)))),128))],40,DO)]),(0,s._)("div",UO,[LO,(0,s._)("select",{value:r.filters.upsell,onChange:e[10]||(e[10]=e=>t.$emit("update",{...r.filters,upsell:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},qO,40,PO)]),(0,s._)("div",OO,[(0,s._)("button",{onClick:e[11]||(e[11]=e=>t.$emit("clear")),class:"tw-flex tw-items-center tw-text-gray-500 tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-transition-colors tw-duration-200 tw-bg-gray-200 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-300 darkx:hover:tw-bg-gray-500 darkx:tw-bg-gray-600"},VO),(0,s._)("button",{onClick:e[12]||(e[12]=e=>t.$emit("filter")),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},RO)])])])}const NO={class:"tw-text-sm tw-text-neutral-600"},MO=["onClick"];function HO(t,e,r,a,i,o){const l=(0,s.up)("VueDatePicker");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("span",NO,(0,Q.zw)(r.name),1),(0,s.Wm)(l,{modelValue:i.date,"onUpdate:modelValue":[e[0]||(e[0]=t=>i.date=t),o.onDateRangePicked],onCleared:o.cleared,format:i.dateFilterFormat,range:"","preset-ranges":i.presetRanges},{yearly:(0,s.w5)((({label:t,range:e,presetDateRange:r})=>[(0,s._)("span",{onClick:t=>r(e)},(0,Q.zw)(t),9,MO)])),_:1},8,["modelValue","onCleared","onUpdate:modelValue","format","preset-ranges"])])}var YO={props:["name"],data(){return{date:["",""],dateFilterFormat:"yyyy-MM-dd",formattedStartDate:"",formattedEndDate:"",presetRanges:[{label:"Today",range:[new Date,new Date]},{label:"Yesterday",range:[(0,$i.Z)(new Date,1),(0,$i.Z)(new Date,1)]},{label:"This month",range:[(0,Wi.Z)(new Date),(0,qi.Z)(new Date)]},{label:"Last month",range:[(0,Wi.Z)((0,Oi.Z)(new Date,1)),(0,qi.Z)((0,Oi.Z)(new Date,1))]},{label:"This year",range:[(0,Ei.Z)(new Date),(0,Ti.Z)(new Date)]}]}},watch:{date(){this.$emit("update:filter",[this.formattedStartDate,this.formattedEndDate])}},methods:{onDateRangePicked(t){t?(this.formattedStartDate=t[0],this.formattedEndDate=t[1]):(this.formattedStartDate=null,this.formattedEndDate=null)},cleared(){this.date=["",""]}}};const ZO=(0,d.Z)(YO,[["render",HO]]);var KO=ZO;const BO={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},QO=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Affectation",-1),GO=["value"],JO=(0,s._)("option",{value:"all"},"All",-1),XO=(0,s._)("option",{value:""},"No Delivery",-1),tE=["value"];function eE(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",BO,[QO,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...r.filters,affectation:e.target.value})),value:r.filters.affectation,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[JO,XO,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,tE)))),128))],40,GO)])}var rE={props:{filters:{required:!0}},data(){return{}},computed:{users(){return this.$store.getters["user/users"]},deliveries(){return this.fetched?this.users.filter((t=>"delivery"==t.role.name)):[]},fetched(){return this.$store.getters["user/fetched"]}}};const aE=(0,d.Z)(rE,[["render",eE]]);var sE=aE;const iE={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},oE=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Agent",-1),lE=["value"],nE=(0,s._)("option",{value:"all"},"All",-1),dE=(0,s._)("option",{value:""},"No Agent",-1),wE=["value"];function cE(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",iE,[oE,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...r.filters,agente_id:e.target.value})),value:r.filters.agente_id,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[nE,dE,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.agents,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,wE)))),128))],40,lE)])}var uE={props:{filters:{required:!0}},data(){return{}},computed:{users(){return this.$store.getters["user/users"]},agents(){return this.fetched?this.users.filter((t=>"agente"==t.role.name)):[]},fetched(){return this.$store.getters["user/fetched"]}}};const pE=(0,d.Z)(uE,[["render",cE]]);var mE=pE;const hE={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},gE=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Product",-1),fE=["value"],vE=(0,s._)("option",{value:"all"},"All",-1),yE=["value"];function xE(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",hE,[gE,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...r.filters,product_id:e.target.value})),value:r.filters.product_id,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[vE,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.products,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,Q.zw)(t.name),9,yE)))),128))],40,fE)])}var bE={props:{filters:{required:!0}},data(){return{}},computed:{products(){return this.$store.getters["product/products"]},fetched(){return this.$store.getters["product/fetched"]}},methods:{getProducts(){return ea.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}}};const _E=(0,d.Z)(bE,[["render",xE]]);var kE=_E,CE={components:{DateFilter:KO,AffectationFilter:sE,AgentFilter:mE,ProductFilter:kE},props:{filters:{required:!0,default:{}}},data(){return{confirmations:Pn,deliveries:Wn,dateFilter:["",""]}}};const DE=(0,d.Z)(CE,[["render",jO]]);var SE=DE,zE={components:{IndexStatistics:Zq,FiltersWrapper:SE,IndexExport:aO},props:{perPage:{type:Number},statistics:{default:null},activeStatistics:{type:Boolean,default:!1},loading:{default:!0},search:{default:""},filters:{required:!0}},data(){return{showFilters:!1,showStatistics:!1,showExport:!1,showAll:!0,showToday:!1}},methods:{handlePerPageChange(t){this.$emit("perPageChange",t.target.value)},showReportedFirst(){this.$emit("update:filters",{...this.filters,reported_first:!this.filters.reported_first}),this.$emit("filter")},filterToday(t){var e=null;t?(this.showAll=!1,this.showToday=!0,e=UP()(),e=e.format("YYYY-MM-DD")):(this.showAll=!0,this.showToday=!1),this.$emit("update:filters",{...this.filters,created_from:e,created_to:e}),this.$emit("filter")}},mounted(){}};const UE=(0,d.Z)(zE,[["render",Tq]]);var LE=UE;const PE={class:"tw-mx-auto tw-w-[95%] md:tw-max-w-[800px] tw-overflow-hidden tw-h-fit dark:tw-bg-neutral-900 tw-bg-white tw-border tw-border-solid dark:tw-border-neutral-700 tw-border-neutral-300 tw-shadow-md tw-my-5 tw-rounded-lg"},AE=(0,s._)("div",{class:"tw-p-4 tw-text-lg tw-border-b tw-border-solid tw-font-medium tw-flex dark:tw-text-neutral-400 tw-text-neutral-500 tw-items-center tw-gap-4 dark:tw-bg-neutral-800 tw-bg-gray-50"}," Order Informations ",-1),$E={class:"tw-bg-white tw-p-4"},WE={class:"tw-grid tw-gap-6 tw-gap-y-5 tw-grid-cols-1 md:tw-grid-cols-2"},qE={class:"tw-col-span-2 md:tw-col-span-1"},OE=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Client Name",-1),EE={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},TE={class:"tw-col-span-2 md:tw-col-span-1"},VE=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Phone Number",-1),IE={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},FE={class:"tw-col-span-2 md:tw-col-span-1"},RE=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"City",-1),jE={class:"tw-relative"},NE=(0,s._)("option",{value:null,disabled:""},"Choose a City",-1),ME=["value"],HE=["value"],YE=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),ZE={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},KE={class:"tw-col-span-2 md:tw-col-span-1"},BE=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Address",-1),QE={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},GE={class:"tw-col-span-2"},JE=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),XE={class:"tw-relative"},tT=["value"],eT=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),rT={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},aT={key:0,class:"md:tw-col-span-1 tw-col-span-2"},sT=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Date",-1),iT={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},oT={key:1,class:"md:tw-col-span-1 tw-col-span-2"},lT=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Note",-1),nT={class:"tw-col-span-2"},dT=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Note",-1),wT={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},cT={class:"md:tw-col-span-1 tw-col-span-2"},uT={class:"md:tw-col-span-1 tw-col-span-2"},pT=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Upsell",-1),mT={class:"tw-relative"},hT=["value"],gT=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),fT={class:"tw-col-span-2"},vT={class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},yT={key:0,class:"tw-text-red-400 tw-text-xs"},xT={class:"tw-flex tw-justify-end tw-items-center tw-p-4 tw-gap-3 dark:tw-bg-neutral-900 tw-bg-gray-50 tw-border-t tw-border-solid"},bT=["disabled"],_T=(0,s._)("span",null,"Create",-1);function kT(t,e,r,i,o,l){const n=(0,s.up)("OrderAffectation"),d=(0,s.up)("OrderItems"),w=(0,s.up)("popup-new");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(w,{visible:r.visible,closeable:!1,onCancel:l.cancel},{default:(0,s.w5)((()=>[(0,s._)("div",PE,[AE,(0,s._)("div",$E,[(0,s._)("div",WE,[(0,s._)("div",qE,[OE,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.itemCopy.fullname=t),onInput:e[1]||(e[1]=t=>o.errors.fullname=null),type:"text",class:(0,Q.C_)([[o.errors.fullname&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),placeholder:"John",required:""},null,34),[[a.nr,o.itemCopy.fullname]]),o.errors.fullname?((0,s.wg)(),(0,s.iD)("label",EE,(0,Q.zw)(o.errors.fullname),1)):(0,s.kq)("",!0)]),(0,s._)("div",TE,[VE,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.itemCopy.phone=t),onInput:e[3]||(e[3]=t=>o.errors.phone=null),class:(0,Q.C_)([[o.errors.phone&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"123-45-678",required:""},null,34),[[a.nr,o.itemCopy.phone]]),o.errors.phone?((0,s.wg)(),(0,s.iD)("label",IE,(0,Q.zw)(o.errors.phone),1)):(0,s.kq)("",!0)]),(0,s._)("div",FE,[RE,(0,s._)("div",jE,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.itemCopy.city=t),onChange:e[5]||(e[5]=t=>o.errors.city=null),class:(0,Q.C_)([[o.errors.city&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 tw-pr-7"])},[NE,(0,s._)("option",{value:o.itemCopy.city,disabled:""},(0,Q.zw)(o.itemCopy.city),9,ME),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,HE)))),128))],34),[[a.bM,o.itemCopy.city]]),YE]),o.errors.city?((0,s.wg)(),(0,s.iD)("label",ZE,(0,Q.zw)(o.errors.city),1)):(0,s.kq)("",!0)]),(0,s._)("div",KE,[BE,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>o.itemCopy.adresse=t),onInput:e[7]||(e[7]=t=>o.errors.adresse=null),class:(0,Q.C_)([[o.errors.adresse&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"Address",required:""},null,34),[[a.nr,o.itemCopy.adresse]]),o.errors.adresse?((0,s.wg)(),(0,s.iD)("label",QE,(0,Q.zw)(o.errors.adresse),1)):(0,s.kq)("",!0)]),(0,s._)("div",GE,[JE,(0,s._)("div",XE,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>o.itemCopy.confirmation=t),onChange:e[9]||(e[9]=t=>o.errors.confirmation=null),class:(0,Q.C_)([[o.errors.confirmation&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,class:(0,Q.C_)([t.text,!t.value&&"!tw-text-green-500"]),key:t.id},(0,Q.zw)(t.name),11,tT)))),128))],34),[[a.bM,o.itemCopy.confirmation]]),eT]),o.errors.confirmation?((0,s.wg)(),(0,s.iD)("label",rT,(0,Q.zw)(o.errors.confirmation),1)):(0,s.kq)("",!0)]),"reporter"==o.itemCopy.confirmation?((0,s.wg)(),(0,s.iD)("div",aT,[sT,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>o.itemCopy.reported_agente_date=t),onInput:e[11]||(e[11]=t=>o.errors.reported_agente_date=null),class:(0,Q.C_)([[o.errors.reported_agente_date&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"date",required:""},null,34),[[a.nr,o.itemCopy.reported_agente_date]]),o.errors.reported_agente_date?((0,s.wg)(),(0,s.iD)("label",iT,(0,Q.zw)(o.errors.reported_agente_date),1)):(0,s.kq)("",!0)])):(0,s.kq)("",!0),"reporter"==o.itemCopy.confirmation?((0,s.wg)(),(0,s.iD)("div",oT,[lT,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[12]||(e[12]=t=>o.itemCopy.reported_agente_note=t),rows:"1",class:"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500",placeholder:"Enter a note"},null,512),[[a.nr,o.itemCopy.reported_agente_note]])])):(0,s.kq)("",!0),(0,s._)("div",nT,[dT,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[13]||(e[13]=t=>o.itemCopy.note=t),onInput:e[14]||(e[14]=t=>o.errors.note=null),class:(0,Q.C_)([[o.errors.note&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),rows:"3",placeholder:"Enter a note"},null,34),[[a.nr,o.itemCopy.note]]),o.errors.note?((0,s.wg)(),(0,s.iD)("label",wT,(0,Q.zw)(o.errors.note),1)):(0,s.kq)("",!0)]),(0,s._)("div",cT,[(0,s.Wm)(n,{item:o.itemCopy,error:o.errors.affectation,"onUpdate:error":e[15]||(e[15]=t=>o.errors.affectation=t),affectation:o.itemCopy.affectation,"onUpdate:affectation":e[16]||(e[16]=t=>o.itemCopy.affectation=t)},null,8,["item","error","affectation"])]),(0,s._)("div",uT,[pT,(0,s._)("div",mT,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[17]||(e[17]=t=>o.itemCopy.upsell=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.upsells,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([t.text]),value:t.value,key:t.id},(0,Q.zw)(t.name),11,hT)))),128))],512),[[a.bM,o.itemCopy.upsell]]),gT])]),(0,s._)("div",fT,[(0,s._)("label",vT,[(0,s.Uk)("Order Items "),o.errors.items?((0,s.wg)(),(0,s.iD)("span",yT," # "+(0,Q.zw)(o.errors.items),1)):(0,s.kq)("",!0)]),(0,s._)("div",null,[(0,s.Wm)(d,{order:o.itemCopy,error:o.errors.items,products:o.products,"products-fetched":o.products_fetched,items:o.itemCopy.items,"onUpdate:items":e[18]||(e[18]=t=>o.itemCopy.items=t)},null,8,["order","error","products","products-fetched","items"])])])])]),(0,s._)("div",xT,[(0,s._)("button",{onClick:e[19]||(e[19]=(...t)=>l.cancel&&l.cancel(...t)),class:"tw-py-2 tw-px-7 tw-rounded tw-text-sm tw-border tw-border-solid tw-border-tansparent dark:tw-border-neutral-900 hover:tw-border-neutral-400 dark:hover:tw-border-neutral-500 hover:tw-bg-gray-300 tw-bg-gray-200 dark:tw-bg-neutral-600 tw-duration-300 tw-text-neutral-900 dark:tw-text-neutral-300"}," Cancel "),(0,s._)("button",{onClick:e[20]||(e[20]=(...t)=>l.handleCreate&&l.handleCreate(...t)),disabled:o.isLoading,class:"tw-py-2 tw-px-7 tw-flex tw-items-center tw-rounded tw-text-sm tw-bg-orange-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-orange-600 dark:tw-border-neutral-900 dark:hover:tw-border-orange-500 hover:tw-bg-orange-500/80 dark:hover:tw-bg-orange-400 tw-duration-300 tw-text-white"},[(0,s.Wm)(X.t,{size:"small",class:(0,Q.C_)(["tw-duration-300 tw-animate-spin tw-overflow-hidden tw-max-w-0 tw-mr-0",[o.isLoading&&"!tw-max-w-[50px] !tw-mr-3"]])},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1},8,["class"]),_T],8,bT)])])])),_:1},8,["visible","onCancel"])])}const CT=(t,e)=>{t.$alert({title:"Created Successfully",type:"success"}),console.log(e),t.isLoading=!1,t.cancel(),t.errors={}},DT=(t,e)=>{t.$alert({title:e.message,type:"error"}),"VALIDATION_ERROR"==e.code&&(t.errors=e.errors),t.isLoading=!1},ST=(t,e)=>{t.isLoading=!0,t.errors={},XU.create(e).then((e=>CT(t,e.data))).catch((e=>DT(t,e.response.data))).finally((()=>t.isLoading=!1))};var zT={components:{OrderItems:V$,OrderAffectation:X$},props:{visible:{required:!0}},data(){return{confirmations:Pn,upsells:$n,isLoading:!1,products_fetched:null,products:null,itemCopy:null,errors:{fullname:null,phone:null,city:null,adresse:null,note:null,reported_agente_date:null,affectation:null,items:null}}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{handleCreate(){const t=EA(this,this.itemCopy);if(!t)return!1;ST(this,this.itemCopy)},cancel(){if(this.isLoading)return!1;this.$emit("update:visible",!1)},getProducts(){this.products_fetched=!1,ea.allForOrder().then((t=>{"SUCCESS"==t.data.code?this.products=t.data.data.products:this.products=[],this.products_fetched=!0})).catch(this.$handleApiError)}},mounted(){this.itemCopy={confirmation:null,upsell:null,items:[]},this.getProducts()}};const UT=(0,d.Z)(zT,[["render",kT]]);var LT=UT;const PT={class:"tw-mb-4"},AT={class:"tw-w-full tw-p-3 tw-py-2 tw-rounded-lg tw-bg-gray-50 tw-border tw-border-solid"},$T={class:"tw-flex tw-items-center tw-gap-2 tw-justify-between"},WT={class:"tw-flex tw-items-center tw-gap-2"},qT={class:"tw-text-sm tw-px-2 tw-w-fit tw-bg-orange-500 tw-aspect-auto tw-text-white tw-rounded"},OT=(0,s._)("p",{class:"tw-font-bold tw-text-sm"}," Selected",-1),ET={class:"tw-flex tw-items-center tw-gap-2"},TT=(0,s._)("svg",{class:"tw-stroke-gray-400",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59L7.11 5.7A.996.996 0 1 0 5.7 7.11L10.59 12L5.7 16.89a.996.996 0 1 0 1.41 1.41L12 13.41l4.89 4.89a.996.996 0 1 0 1.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"})],-1),VT=(0,s._)("span",null," Clear Selection ",-1),IT=[TT,VT],FT=(0,s._)("svg",{class:"tw-stroke-gray-400",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 20 20"},[(0,s._)("g",{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"},[(0,s._)("path",{d:"M8.232 11.768A2.493 2.493 0 0 0 10 12.5c.672 0 1.302-.267 1.768-.732A2.493 2.493 0 0 0 12.5 10c0-.672-.267-1.302-.732-1.768A2.493 2.493 0 0 0 10 7.5c-.672 0-1.302.267-1.768.732A2.493 2.493 0 0 0 7.5 10c0 .672.267 1.302.732 1.768Zm2.829-.707c-.28.28-.657.439-1.061.439c-.404 0-.78-.16-1.06-.44S8.5 10.405 8.5 10s.16-.78.44-1.06s.656-.44 1.06-.44s.78.16 1.06.44s.44.656.44 1.06s-.16.78-.44 1.06Z"}),(0,s._)("path",{d:"m14.216 3.773l-1.27.714a6.213 6.213 0 0 0-1.166-.48l-.47-1.414a.5.5 0 0 0-.474-.343H9.06a.5.5 0 0 0-.481.365l-.392 1.403a6.214 6.214 0 0 0-1.164.486L5.69 3.835a.5.5 0 0 0-.578.094L3.855 5.185a.5.5 0 0 0-.082.599l.714 1.27c-.199.37-.36.76-.48 1.166l-1.414.47a.5.5 0 0 0-.343.474v1.777a.5.5 0 0 0 .365.481l1.403.392c.122.405.285.794.486 1.164l-.669 1.333a.5.5 0 0 0 .094.578l1.256 1.256a.5.5 0 0 0 .599.082l1.27-.714c.37.199.76.36 1.166.48l.47 1.414a.5.5 0 0 0 .474.343h1.777a.5.5 0 0 0 .481-.365l.392-1.403a6.21 6.21 0 0 0 1.164-.486l1.333.669a.5.5 0 0 0 .578-.093l1.256-1.257a.5.5 0 0 0 .082-.599l-.714-1.27c.199-.37.36-.76.48-1.166l1.414-.47a.5.5 0 0 0 .343-.474V9.06a.5.5 0 0 0-.365-.481l-1.403-.392a6.208 6.208 0 0 0-.486-1.164l.669-1.333a.5.5 0 0 0-.093-.578l-1.257-1.256a.5.5 0 0 0-.599-.082Zm-1.024 1.724l1.184-.667l.733.733l-.627 1.25a.5.5 0 0 0 .019.482c.265.44.464.918.59 1.418a.5.5 0 0 0 .35.36l1.309.366v1.037l-1.327.44a.5.5 0 0 0-.328.354a5.216 5.216 0 0 1-.585 1.42a.5.5 0 0 0-.007.502l.667 1.184l-.733.733l-1.25-.627a.5.5 0 0 0-.482.019c-.44.265-.918.464-1.418.59a.5.5 0 0 0-.36.35l-.366 1.309H9.525l-.44-1.327a.5.5 0 0 0-.355-.328a5.217 5.217 0 0 1-1.42-.585a.5.5 0 0 0-.502-.007l-1.184.667l-.733-.733l.627-1.25a.5.5 0 0 0-.019-.482a5.216 5.216 0 0 1-.59-1.418a.5.5 0 0 0-.35-.36l-1.309-.366V9.525l1.327-.44a.5.5 0 0 0 .327-.355c.125-.5.323-.979.586-1.42a.5.5 0 0 0 .007-.502L4.83 5.624l.733-.733l1.25.627a.5.5 0 0 0 .482-.019c.44-.265.918-.464 1.418-.59a.5.5 0 0 0 .36-.35l.366-1.309h1.037l.44 1.327a.5.5 0 0 0 .354.327c.5.125.979.323 1.42.586a.5.5 0 0 0 .502.007Z"})])],-1),RT=(0,s._)("span",null," Actions ",-1),jT=[FT,RT],NT={key:0};function MT(t,e,r,a,i,o){const l=(0,s.up)("BulkPopup");return(0,s.wg)(),(0,s.iD)("div",PT,[(0,s._)("div",AT,[(0,s._)("div",$T,[(0,s._)("div",WT,[(0,s._)("div",qT,(0,Q.zw)(r.selected.length),1),OT]),(0,s._)("div",ET,[(0,s._)("button",{onClick:e[0]||(e[0]=e=>t.$emit("update:selected",[])),class:"tw-bg-white tw-flex tw-items-center tw-gap-1 tw-py-1.5 hover:tw-shadow-none tw-duration-200 tw-px-3 tw-text-sm tw-rounded tw-border tw-border-solid tw-border-gray-300 tw-shadow-sm"},IT),(0,s._)("button",{onClick:e[1]||(e[1]=t=>i.popup=!0),class:"tw-bg-white tw-flex tw-items-center tw-gap-1 tw-py-1.5 hover:tw-shadow-none tw-duration-200 tw-px-3 tw-text-sm tw-rounded tw-border tw-border-solid tw-border-gray-300 tw-shadow-sm"},jT)])])]),i.popup?((0,s.wg)(),(0,s.iD)("div",NT,[(0,s.Wm)(l,{selected:r.selected,onUpdate:o.handleUpdate,visible:i.popup,"onUpdate:visible":e[2]||(e[2]=t=>i.popup=t)},null,8,["selected","onUpdate","visible"])])):(0,s.kq)("",!0)])}const HT={class:"tw-mx-auto tw-w-[95%] md:tw-max-w-[800px] tw-overflow-hidden tw-h-fit dark:tw-bg-neutral-900 tw-bg-white tw-border tw-border-solid dark:tw-border-neutral-700 tw-border-neutral-300 tw-shadow-md tw-my-5 tw-rounded-lg"},YT={class:"tw-p-4 tw-text-lg tw-border-b tw-border-solid tw-font-medium tw-flex dark:tw-text-neutral-400 tw-text-neutral-500 tw-items-center tw-gap-4 dark:tw-bg-neutral-800 tw-bg-gray-50"},ZT=(0,s._)("span",null,"Quick Actions",-1),KT={class:"tw-px-2 tw-w-fit tw-bg-orange-500 tw-aspect-auto tw-text-white tw-rounded"},BT={class:"tw-bg-white tw-p-4"},QT={class:"tw-grid tw-gap-6 tw-gap-y-5 tw-grid-cols-1 md:tw-grid-cols-2"},GT={class:"tw-col-span-2 md:tw-col-span-1"},JT={key:0,class:"tw-col-span-2 md:tw-col-span-1"},XT={class:"tw-flex tw-justify-end tw-items-center tw-p-4 tw-gap-3 dark:tw-bg-neutral-900 tw-bg-gray-50 tw-border-t tw-border-solid"},tV=(0,s._)("span",null,"Apply",-1);function eV(t,e,r,a,i,o){const l=(0,s.up)("BulkSelectAction"),n=(0,s.up)("BulkDeliveryAction"),d=(0,s.up)("popup-new");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(d,{visible:r.visible,closeable:!i.isLoading,onCancel:o.cancel},{default:(0,s.w5)((()=>[(0,s._)("div",HT,[(0,s._)("div",YT,[ZT,(0,s._)("span",KT,(0,Q.zw)(r.selected.length),1)]),(0,s._)("div",BT,[(0,s._)("div",QT,[(0,s._)("div",GT,[(0,s.Wm)(l,{action:i.action,"onUpdate:action":e[0]||(e[0]=t=>i.action=t)},null,8,["action"])]),2==i.action?((0,s.wg)(),(0,s.iD)("div",JT,[(0,s.Wm)(n,{value:i.value,"onUpdate:value":e[1]||(e[1]=t=>i.value=t)},null,8,["value"])])):(0,s.kq)("",!0)])]),(0,s._)("div",XT,[(0,s._)("button",{onClick:e[2]||(e[2]=(...t)=>o.cancel&&o.cancel(...t)),class:"tw-py-2 tw-px-7 tw-rounded tw-text-sm tw-border tw-border-solid tw-border-tansparent dark:tw-border-neutral-900 hover:tw-border-neutral-400 dark:hover:tw-border-neutral-500 hover:tw-bg-gray-300 tw-bg-gray-200 dark:tw-bg-neutral-600 tw-duration-300 tw-text-neutral-900 dark:tw-text-neutral-300"}," Cancel "),(0,s._)("button",{onClick:e[3]||(e[3]=(...t)=>o.execute&&o.execute(...t)),class:"tw-py-2 tw-px-7 tw-flex tw-items-center tw-rounded tw-text-sm tw-bg-orange-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-orange-600 dark:tw-border-neutral-900 dark:hover:tw-border-orange-500 hover:tw-bg-orange-500/80 dark:hover:tw-bg-orange-400 tw-duration-300 tw-text-white"},[(0,s.Wm)(X.t,{size:"small",class:(0,Q.C_)(["tw-duration-300 tw-animate-spin tw-overflow-hidden tw-max-w-0 tw-mr-0",[i.isLoading&&"!tw-max-w-[50px] !tw-mr-3"]])},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1},8,["class"]),tV])])])])),_:1},8,["visible","closeable","onCancel"])])}const rV=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Action",-1),aV={class:"tw-relative"},sV=["value"],iV=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1);function oV(t,e,r,i,o,l){return(0,s.wg)(),(0,s.iD)("div",null,[rV,(0,s._)("div",aV,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.vaction=t),class:(0,Q.C_)([[!1],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 tw-pr-7"])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.actions,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,sV)))),128))],512),[[a.bM,l.vaction]]),iV]),(0,s.kq)("",!0)])}var lV={props:{action:{required:!0}},data(){return{actions:[{id:1,name:"Select Action"},{id:2,name:"Delivery Status"}]}},computed:{vaction:{get(){return this.action},set(t){this.$emit("update:action",t)}}}};const nV=(0,d.Z)(lV,[["render",oV]]);var dV=nV;const wV=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Value",-1),cV={class:"tw-relative"},uV=(0,s._)("option",{disabled:"",value:"not-selected"},"Select a value",-1),pV=["value"],mV=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1);function hV(t,e,r,i,o,l){return(0,s.wg)(),(0,s.iD)("div",null,[wV,(0,s._)("div",cV,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.vvalue=t),class:(0,Q.C_)([[!1],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 tw-pr-7"])},[uV,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.statuses,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([t.text]),value:t.value,key:t.id},(0,Q.zw)(t.name),11,pV)))),128))],512),[[a.bM,l.vvalue]]),mV]),(0,s.kq)("",!0)])}var gV={props:{value:{required:!0}},data(){return{statuses:Wn}},computed:{vvalue:{get(){return this.value},set(t){this.$emit("update:value",t)}}}};const fV=(0,d.Z)(gV,[["render",hV]]);var vV=fV;class yV{async execute(t){return await Y.getCookie(),M.post("api/v1/bulk/execute",t)}}var xV=new yV,bV=(t,e)=>{t.isLoading=!0,xV.execute(e).then((e=>_V(t,e.data))).catch(t.$handleApiError).finally((()=>{t.isLoading=!1}))};const _V=(t,e)=>{"SUCCESS"==e.code&&(t.$alert({title:"Updated Successfully",type:"success"}),t.$emit("update:visible",!1),t.$emit("update"))};var kV={components:{BulkSelectAction:dV,BulkDeliveryAction:vV},props:{visible:{required:!0},selected:{required:!0}},data(){return{isLoading:!1,action:1,value:"not-selected"}},watch:{action(){this.value="not-selected"}},methods:{cancel(){this.$emit("update:visible",!1)},execute(){if(1==this.action)return this.$alert({title:"Select action",type:"info"}),!1;if("not-selected"==this.value)return this.$alert({title:"Select value",type:"info"}),!1;const t={action:this.action,value:this.value,selected:this.selected};bV(this,t)}}};const CV=(0,d.Z)(kV,[["render",eV]]);var DV=CV,SV={components:{BulkPopup:DV},props:{selected:{required:!0}},data(){return{popup:!1}},methods:{handleUpdate(){this.$emit("update")}}};const zV=(0,d.Z)(SV,[["render",MT]]);var UV=zV,LV={components:{IndexTable:dq,IndexFilters:LE,CreatePopup:LT,BulkActions:UV},data(){return{fetching:!0,create_popup:!1,items:[],selected:[],deliveries:{fetched:!1,items:[]},statistics:null,first_page_url:null,lase_page_url:null,next_page_url:null,prev_page_url:null,last_page:1,from:1,to:1,total:0,totalOrders:0,links:null,search:"",sort_by:"created_at",sort_order:"desc",per_page:10,current_page:1,filters:{created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"all",product_id:"all",delivery:"all",reported_first:!1}}},methods:{paginateOrders(){const t="?page="+this.current_page,e={sort_by:this.sort_by,sort_order:this.sort_order,per_page:this.per_page,current_page:this.current_page,search:this.search,filters:this.filters};return this.fetching=!0,XU.paginate(t,e).then((({data:t})=>{const e=t.data.orders;this.setOptions(e),this.statistics=this.search?this.statistics:t.data.statistics})).then((()=>{this.fetching=!1}))},setOptions(t){this.items=t.data,this.first_page_url=Hi(t.first_page_url),this.lase_page_url=Hi(t.last_page_url),this.next_page_url=Hi(t.next_page_url),this.prev_page_url=Hi(t.prev_page_url),this.last_page=parseInt(t.last_page),this.from=parseInt(t.from),this.to=parseInt(t.to),this.per_page=parseInt(t.per_page),this.total=parseInt(t.total),this.totalOrders=this.search?this.totalOrders:parseInt(t.total),this.links=t.links},handleClearFilters(){this.filters={created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"all",product_id:"all",delivery:"all",reported_first:!1},this.handlePageChange(1)},handleBulkUpdate(){this.selected=[],this.paginateOrders()},handleItemUpdate(t){this.items=this.items.map((e=>e.id==t.id?t:e))},handlePageChange(t){this.current_page=t,this.paginateOrders()},handlePerPageChange(t){this.per_page=parseInt(t),this.handlePageChange(1)},handleSortOrderChange(){this.sort_order="asc"==this.sort_order?"desc":"asc",this.paginateOrders()},getDeliveries(){this.deliveries.fetched=!1,K.allDeliveries().then((t=>{"SUCCESS"==t?.data.code&&(this.deliveries.items=t.data.data.deliveries,this.deliveries.fetched=!0)})).catch(this.$handleApiError)}},mounted(){this.paginateOrders(),this.getDeliveries()}};const PV=(0,d.Z)(LV,[["render",GU]]);var AV=PV;const $V={class:"py-5 px-2 tw-border tw-bg-white tw-w-full tw-rounded-md tw-mb-5"},WV={class:"tw-px-3"},qV={class:"tw-flex tw-items-center tw-justify-between tw-flex-wrap"},OV={class:"tw-flex tw-items-center tw-gap-x-3"},EV=(0,s._)("h2",{class:"tw-text-lg tw-font-medium tw-text-gray-800 darkx:tw-text-white"}," Orders ",-1),TV={class:"tw-px-3 tw-py-1 tw-text-xs tw-text-emerald-600 tw-bg-emerald-100 tw-rounded-full darkx:tw-bg-gray-800 darkx:tw-text-orange-400"},VV=(0,s._)("p",{class:"tw-mt-1 tw-text-sm tw-text-gray-500 darkx:tw-text-gray-300"}," These orders have needs to reconfirmed. ",-1),IV={class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-3"},FV=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",width:"16",height:"16",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),RV=(0,s._)("span",null,"Create",-1),jV=[FV,RV],NV={class:"tw-overflow-hidden tw-col-span-1"},MV={key:0};function HV(t,e,r,a,i,o){const l=(0,s.up)("IndexFilters"),n=(0,s.up)("BulkActions"),d=(0,s.up)("IndexTable"),w=(0,s.up)("CreatePopup");return(0,s.wg)(),(0,s.iD)("div",$V,[(0,s._)("section",WV,[(0,s._)("div",qV,[(0,s._)("div",null,[(0,s._)("div",OV,[EV,(0,s._)("span",TV,(0,Q.zw)(i.totalOrders)+" order",1)]),VV]),(0,s._)("div",IV,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.create_popup=!0),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},jV)])]),(0,s.Wm)(l,{search:i.search,"onUpdate:search":e[1]||(e[1]=t=>i.search=t),filters:i.filters,"onUpdate:filters":e[2]||(e[2]=t=>i.filters=t),onFilter:e[3]||(e[3]=t=>o.handlePerPageChange(i.per_page)),onClear:o.handleClearFilters,onPerPageChange:o.handlePerPageChange,onFresh:o.paginateOrders,loading:i.fetching,statistics:i.statistics,"per-page":i.per_page,"active-statistics":""},null,8,["search","filters","onClear","onPerPageChange","onFresh","loading","statistics","per-page"]),(0,s._)("div",{class:(0,Q.C_)([[i.selected.length>0?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",NV,[(0,s.Wm)(n,{onUpdate:o.handleBulkUpdate,selected:i.selected,"onUpdate:selected":e[4]||(e[4]=t=>i.selected=t)},null,8,["onUpdate","selected"])])],2),(0,s._)("div",null,[(0,s.Wm)(d,{selected:i.selected,"onUpdate:selected":e[5]||(e[5]=t=>i.selected=t),onUpdate:o.handleItemUpdate,onPageChange:o.handlePageChange,onSortOrder:o.handleSortOrderChange,loading:i.fetching,from:i.from,to:i.to,"last-page":i.last_page,"per-page":i.per_page,total:i.total,"current-page":i.current_page,items:i.items,deliveries:i.deliveries},null,8,["selected","onUpdate","onPageChange","onSortOrder","loading","from","to","last-page","per-page","total","current-page","items","deliveries"])]),i.create_popup?((0,s.wg)(),(0,s.iD)("div",MV,[(0,s.Wm)(w,{visible:i.create_popup,"onUpdate:visible":e[6]||(e[6]=t=>i.create_popup=t)},null,8,["visible"])])):(0,s.kq)("",!0)])])}var YV={components:{IndexTable:dq,IndexFilters:LE,CreatePopup:LT,BulkActions:UV},data(){return{fetching:!0,create_popup:!1,items:[],selected:[],deliveries:{fetched:!1,items:[]},statistics:null,first_page_url:null,lase_page_url:null,next_page_url:null,prev_page_url:null,last_page:1,from:1,to:1,total:0,totalOrders:0,links:null,search:"",sort_by:"created_at",sort_order:"desc",per_page:10,current_page:1,filters:{created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"confirmer",product_id:"all",delivery:"dispatch",reported_first:!1}}},methods:{paginateOrders(){const t="?page="+this.current_page,e={sort_by:this.sort_by,sort_order:this.sort_order,per_page:this.per_page,current_page:this.current_page,search:this.search,filters:this.filters};return this.fetching=!0,XU.paginate(t,e).then((({data:t})=>{const e=t.data.orders;this.setOptions(e),this.statistics=this.search?this.statistics:t.data.statistics})).then((()=>{this.fetching=!1}))},setOptions(t){this.items=t.data,this.first_page_url=Hi(t.first_page_url),this.lase_page_url=Hi(t.last_page_url),this.next_page_url=Hi(t.next_page_url),this.prev_page_url=Hi(t.prev_page_url),this.last_page=parseInt(t.last_page),this.from=parseInt(t.from),this.to=parseInt(t.to),this.per_page=parseInt(t.per_page),this.total=parseInt(t.total),this.totalOrders=this.search?this.totalOrders:parseInt(t.total),this.links=t.links},handleClearFilters(){this.filters={created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"confirmer",product_id:"all",delivery:"dispatch",reported_first:!1},this.handlePageChange(1)},handleBulkUpdate(){this.selected=[],this.paginateOrders()},handleItemUpdate(t){this.items=this.items.map((e=>e.id==t.id?t:e))},handlePageChange(t){this.current_page=t,this.paginateOrders()},handlePerPageChange(t){this.per_page=parseInt(t),this.handlePageChange(1)},handleSortOrderChange(){this.sort_order="asc"==this.sort_order?"desc":"asc",this.paginateOrders()},getDeliveries(){this.deliveries.fetched=!1,K.allDeliveries().then((t=>{"SUCCESS"==t?.data.code&&(this.deliveries.items=t.data.data.deliveries,this.deliveries.fetched=!0)})).catch(this.$handleApiError)}},mounted(){this.paginateOrders(),this.getDeliveries()}};const ZV=(0,d.Z)(YV,[["render",HV]]);var KV=ZV;const BV={class:"py-5 px-2 tw-border tw-bg-white tw-w-full tw-rounded-md tw-mb-5"},QV={class:"tw-px-3"},GV={class:"tw-flex tw-items-center tw-justify-between tw-flex-wrap"},JV={class:"tw-flex tw-items-center tw-gap-x-3"},XV=(0,s._)("h2",{class:"tw-text-lg tw-font-medium tw-text-gray-800 darkx:tw-text-white"}," Orders ",-1),tI={class:"tw-px-3 tw-py-1 tw-text-xs tw-text-emerald-600 tw-bg-emerald-100 tw-rounded-full darkx:tw-bg-gray-800 darkx:tw-text-orange-400"},eI=(0,s._)("p",{class:"tw-mt-1 tw-text-sm tw-text-gray-500 darkx:tw-text-gray-300"}," These orders have needs to reconfirmed. ",-1),rI={class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-3"},aI=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",width:"16",height:"16",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),sI=(0,s._)("span",null,"Create",-1),iI=[aI,sI],oI={class:"tw-overflow-hidden tw-col-span-1"},lI={key:0};function nI(t,e,r,a,i,o){const l=(0,s.up)("IndexFilters"),n=(0,s.up)("BulkActions"),d=(0,s.up)("IndexTable"),w=(0,s.up)("CreatePopup");return(0,s.wg)(),(0,s.iD)("div",BV,[(0,s._)("section",QV,[(0,s._)("div",GV,[(0,s._)("div",null,[(0,s._)("div",JV,[XV,(0,s._)("span",tI,(0,Q.zw)(i.totalOrders)+" order",1)]),eI]),(0,s._)("div",rI,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.create_popup=!0),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},iI)])]),(0,s.Wm)(l,{search:i.search,"onUpdate:search":e[1]||(e[1]=t=>i.search=t),filters:i.filters,"onUpdate:filters":e[2]||(e[2]=t=>i.filters=t),onFilter:e[3]||(e[3]=t=>o.handlePerPageChange(i.per_page)),onClear:o.handleClearFilters,onPerPageChange:o.handlePerPageChange,onFresh:o.paginateOrders,loading:i.fetching,statistics:i.statistics,"per-page":i.per_page,"active-statistics":""},null,8,["search","filters","onClear","onPerPageChange","onFresh","loading","statistics","per-page"]),(0,s._)("div",{class:(0,Q.C_)([[i.selected.length>0?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",oI,[(0,s.Wm)(n,{onUpdate:o.handleBulkUpdate,selected:i.selected,"onUpdate:selected":e[4]||(e[4]=t=>i.selected=t)},null,8,["onUpdate","selected"])])],2),(0,s._)("div",null,[(0,s.Wm)(d,{selected:i.selected,"onUpdate:selected":e[5]||(e[5]=t=>i.selected=t),onUpdate:o.handleItemUpdate,onPageChange:o.handlePageChange,onSortOrder:o.handleSortOrderChange,loading:i.fetching,from:i.from,to:i.to,"last-page":i.last_page,"per-page":i.per_page,total:i.total,"current-page":i.current_page,items:i.items,deliveries:i.deliveries},null,8,["selected","onUpdate","onPageChange","onSortOrder","loading","from","to","last-page","per-page","total","current-page","items","deliveries"])]),i.create_popup?((0,s.wg)(),(0,s.iD)("div",lI,[(0,s.Wm)(w,{visible:i.create_popup,"onUpdate:visible":e[6]||(e[6]=t=>i.create_popup=t)},null,8,["visible"])])):(0,s.kq)("",!0)])])}var dI={components:{IndexTable:dq,IndexFilters:LE,CreatePopup:LT,BulkActions:UV},data(){return{fetching:!0,create_popup:!1,items:[],selected:[],deliveries:{fetched:!1,items:[]},statistics:null,first_page_url:null,lase_page_url:null,next_page_url:null,prev_page_url:null,last_page:1,from:1,to:1,total:0,totalOrders:0,links:null,search:"",sort_by:"created_at",sort_order:"desc",per_page:10,current_page:1,filters:{created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"confirmer",product_id:"all",delivery:"expidier",reported_first:!1}}},methods:{paginateOrders(){const t="?page="+this.current_page,e={sort_by:this.sort_by,sort_order:this.sort_order,per_page:this.per_page,current_page:this.current_page,search:this.search,filters:this.filters};return this.fetching=!0,XU.paginate(t,e).then((({data:t})=>{const e=t.data.orders;this.setOptions(e),this.statistics=this.search?this.statistics:t.data.statistics})).then((()=>{this.fetching=!1}))},setOptions(t){this.items=t.data,this.first_page_url=Hi(t.first_page_url),this.lase_page_url=Hi(t.last_page_url),this.next_page_url=Hi(t.next_page_url),this.prev_page_url=Hi(t.prev_page_url),this.last_page=parseInt(t.last_page),this.from=parseInt(t.from),this.to=parseInt(t.to),this.per_page=parseInt(t.per_page),this.total=parseInt(t.total),this.totalOrders=this.search?this.totalOrders:parseInt(t.total),this.links=t.links},handleClearFilters(){this.filters={created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"confirmer",product_id:"all",delivery:"expidier",reported_first:!1},this.handlePageChange(1)},handleBulkUpdate(){this.selected=[],this.paginateOrders()},handleItemUpdate(t){this.items=this.items.map((e=>e.id==t.id?t:e))},handlePageChange(t){this.current_page=t,this.paginateOrders()},handlePerPageChange(t){this.per_page=parseInt(t),this.handlePageChange(1)},handleSortOrderChange(){this.sort_order="asc"==this.sort_order?"desc":"asc",this.paginateOrders()},getDeliveries(){this.deliveries.fetched=!1,K.allDeliveries().then((t=>{"SUCCESS"==t?.data.code&&(this.deliveries.items=t.data.data.deliveries,this.deliveries.fetched=!0)})).catch(this.$handleApiError)}},mounted(){this.paginateOrders(),this.getDeliveries()}};const wI=(0,d.Z)(dI,[["render",nI]]);var cI=wI;const uI={class:"py-5 px-2 tw-border tw-bg-white tw-w-full tw-rounded-md tw-mb-5"},pI={class:"tw-px-3"},mI={class:"tw-flex tw-items-center tw-justify-between tw-flex-wrap"},hI={class:"tw-flex tw-items-center tw-gap-x-3"},gI=(0,s._)("h2",{class:"tw-text-lg tw-font-medium tw-text-gray-800 darkx:tw-text-white"},"Orders",-1),fI={class:"tw-px-3 tw-py-1 tw-text-xs tw-text-emerald-600 tw-bg-emerald-100 tw-rounded-full darkx:tw-bg-gray-800 darkx:tw-text-orange-400"},vI=(0,s._)("p",{class:"tw-mt-1 tw-text-sm tw-text-gray-500 darkx:tw-text-gray-300"},"These orders have needs to reconfirmed.",-1),yI=(0,s._)("button",{class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},[(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})]),(0,s._)("span",null,"Create")],-1),xI=[yI],bI={key:0};function _I(t,e,r,a,i,o){const l=(0,s.up)("IndexFilters"),n=(0,s.up)("IndexTable"),d=(0,s.up)("CreatePopup");return(0,s.wg)(),(0,s.iD)("div",uI,[(0,s._)("section",pI,[(0,s._)("div",mI,[(0,s._)("div",null,[(0,s._)("div",hI,[gI,(0,s._)("span",fI,(0,Q.zw)(i.totalOrders)+" order",1)]),vI]),(0,s._)("div",{onClick:e[0]||(e[0]=t=>i.create_popup=!0),class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-3"},xI)]),(0,s.Wm)(l,{search:i.search,"onUpdate:search":e[1]||(e[1]=t=>i.search=t),filters:i.filters,"onUpdate:filters":e[2]||(e[2]=t=>i.filters=t),onFilter:e[3]||(e[3]=t=>o.handlePerPageChange(i.per_page)),onPerPageChange:o.handlePerPageChange,onFresh:o.paginateOrders,loading:i.fetching,statistics:i.statistics,"active-statistics":""},null,8,["search","filters","onPerPageChange","onFresh","loading","statistics"]),(0,s._)("div",null,[(0,s.Wm)(n,{onUpdate:o.handleItemUpdate,onPageChange:o.handlePageChange,onSortOrder:o.handleSortOrderChange,loading:i.fetching,from:i.from,to:i.to,"last-page":i.last_page,"per-page":i.per_page,total:i.total,"current-page":i.current_page,items:i.items},null,8,["onUpdate","onPageChange","onSortOrder","loading","from","to","last-page","per-page","total","current-page","items"])])]),i.create_popup?((0,s.wg)(),(0,s.iD)("div",bI,[(0,s.Wm)(d,{visible:i.create_popup,"onUpdate:visible":e[4]||(e[4]=t=>i.create_popup=t)},null,8,["visible"])])):(0,s.kq)("",!0)])}const kI={class:"tw-flex tw-flex-col"},CI={class:"tw-overflow-x-auto"},DI={class:"tw-inline-block tw-min-w-full tw-align-middle"},SI={class:"tw-overflow-hidden tw-border tw-border-gray-200 darkx:tw-border-gray-700 md:tw-rounded-lg"},zI={class:"tw-min-w-full tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700"},UI={class:"tw-bg-gray-50 darkx:tw-bg-gray-800"},LI=(0,s._)("th",{scope:"col",class:"tw-py-3.5 tw-px-4 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"},[(0,s._)("span",null,"ID")],-1),PI={scope:"col",class:"tw-py-3.5 tw-px-4 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"},AI=(0,s._)("span",null,"Created",-1),$I=(0,s._)("svg",{class:"tw-h-3",viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s._)("path",{d:"M2.13347 0.0999756H2.98516L5.01902 4.79058H3.86226L3.45549 3.79907H1.63772L1.24366 4.79058H0.0996094L2.13347 0.0999756ZM2.54025 1.46012L1.96822 2.92196H3.11227L2.54025 1.46012Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,s._)("path",{d:"M0.722656 9.60832L3.09974 6.78633H0.811638V5.87109H4.35819V6.78633L2.01925 9.60832H4.43446V10.5617H0.722656V9.60832Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,s._)("path",{d:"M8.45558 7.25664V7.40664H8.60558H9.66065C9.72481 7.40664 9.74667 7.42274 9.75141 7.42691C9.75148 7.42808 9.75146 7.42993 9.75116 7.43262C9.75001 7.44265 9.74458 7.46304 9.72525 7.49314C9.72522 7.4932 9.72518 7.49326 9.72514 7.49332L7.86959 10.3529L7.86924 10.3534C7.83227 10.4109 7.79863 10.418 7.78568 10.418C7.77272 10.418 7.73908 10.4109 7.70211 10.3534L7.70177 10.3529L5.84621 7.49332C5.84617 7.49325 5.84612 7.49318 5.84608 7.49311C5.82677 7.46302 5.82135 7.44264 5.8202 7.43262C5.81989 7.42993 5.81987 7.42808 5.81994 7.42691C5.82469 7.42274 5.84655 7.40664 5.91071 7.40664H6.96578H7.11578V7.25664V0.633865C7.11578 0.42434 7.29014 0.249976 7.49967 0.249976H8.07169C8.28121 0.249976 8.45558 0.42434 8.45558 0.633865V7.25664Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.3"})],-1),WI=[AI,$I],qI=(0,s._)("th",{scope:"col",class:"tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Client ",-1),OI=(0,s._)("th",{scope:"col",class:"tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Phone ",-1),EI=(0,s._)("th",{scope:"col",class:"tw-w-10 tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Confirmation ",-1),TI=(0,s._)("th",{scope:"col",class:"tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Affected ",-1),VI=(0,s._)("th",{scope:"col",class:"tw-w-10 tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Delivery ",-1),II=(0,s._)("th",{scope:"col",class:"tw-relative tw-py-3.5 tw-px-4"},[(0,s._)("span",{class:"tw-sr-only"},"Actions")],-1),FI={key:0,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},RI={key:1,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},jI=(0,s._)("tr",null,[(0,s._)("td",{colspan:"8"},[(0,s._)("div",{class:"tw-p-5 tw-text-center tw-text-gray-600 tw-font-medium"}," No Order was found ! ")])],-1),NI=[jI],MI={key:2,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},HI={colspan:"8"},YI={role:"status",class:"tw-w-full tw-p-4 tw-space-y-4 tw-border-gray-200 tw-divide-y tw-divide-gray-200 tw-rounded tw-shadow tw-animate-pulse dark:tw-divide-gray-700 md:tw-p-6 dark:tw-border-gray-700"},ZI=(0,s._)("div",{class:"tw-flex tw-items-center tw-justify-between"},[(0,s._)("div",null,[(0,s._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-600 tw-w-24 tw-mb-2.5"}),(0,s._)("div",{class:"tw-w-32 tw-h-2 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-700"})]),(0,s._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-700 tw-w-12"})],-1),KI=(0,s._)("div",null,[(0,s._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-600 tw-w-24 tw-mb-2.5"}),(0,s._)("div",{class:"tw-w-32 tw-h-2 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-700"})],-1),BI=(0,s._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-700 tw-w-12"},null,-1),QI=[KI,BI],GI={class:"tw-mt-6"};function JI(t,e,r,a,i,o){const l=(0,s.up)("TableRow"),n=((0,s.up)("loading"),(0,s.up)("TablePaginationNoNums"));return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",kI,[(0,s._)("div",CI,[(0,s._)("div",DI,[(0,s._)("div",SI,[(0,s._)("table",zI,[(0,s._)("thead",UI,[(0,s._)("tr",null,[LI,(0,s._)("th",PI,[(0,s._)("button",{onClick:e[0]||(e[0]=e=>t.$emit("sortOrder",{name:"created_at"})),class:"tw-flex tw-items-center tw-gap-x-3 focus:tw-outline-none"},WI)]),qI,OI,EI,TI,VI,II])]),!r.loading&&r.items.length>0?((0,s.wg)(),(0,s.iD)("tbody",FI,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.items,(r=>((0,s.wg)(),(0,s.j4)(l,{onUpdate:e[1]||(e[1]=e=>t.$emit("update",e)),key:r.id,item:r},null,8,["item"])))),128))])):(0,s.kq)("",!0),r.loading||0!=r.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("tbody",RI,NI)),r.loading?((0,s.wg)(),(0,s.iD)("tbody",MI,[(0,s._)("tr",null,[(0,s.kq)("",!0),(0,s._)("td",HI,[(0,s._)("div",YI,[ZI,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.perPage-1,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"tw-flex tw-items-center tw-justify-between tw-pt-4"},QI)))),128))])])])])):(0,s.kq)("",!0)])])])])]),(0,s._)("div",GI,[(0,s.Wm)(n,{from:r.from,to:r.to,"last-page":r.lastPage,"per-page":r.perPage,total:r.total,"current-page":r.currentPage,onPageChange:e[2]||(e[2]=e=>t.$emit("pageChange",e))},null,8,["from","to","last-page","per-page","total","current-page"])])])}const XI={class:"sm:tw-flex sm:tw-items-center sm:tw-justify-between"},tF={class:"tw-text-sm tw-text-gray-500 darkx:tw-text-gray-400"},eF={class:"tw-font-medium tw-text-gray-700 darkx:tw-text-gray-100"},rF={class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-4 sm:tw-mt-0"},aF=["disabled"],sF=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5 rtl:tw--scale-x-100"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18"})],-1),iF=(0,s._)("span",null," previous ",-1),oF=[sF,iF],lF=["disabled"],nF=(0,s._)("span",null," Next ",-1),dF=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5 rtl:tw--scale-x-100"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"})],-1),wF=[nF,dF];function cF(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",XI,[(0,s._)("div",tF,[(0,s.Uk)(" Page "),(0,s._)("span",eF,(0,Q.zw)(r.currentPage)+" of "+(0,Q.zw)(r.lastPage),1)]),(0,s._)("div",rF,[(0,s._)("button",{disabled:r.currentPage<=1,onClick:e[0]||(e[0]=t=>o.changePage(r.currentPage-1)),class:(0,Q.C_)([[r.currentPage<=1&&"tw-cursor-not-allowed"],"tw-flex tw-items-center tw-justify-center tw-w-1/2 tw-px-5 tw-py-2 tw-text-sm tw-text-gray-700 tw-capitalize tw-transition-colors tw-duration-200 tw-bg-white tw-border tw-border-solid tw-rounded-md sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-100 darkx:tw-bg-gray-900 darkx:tw-text-gray-200 darkx:tw-border-gray-700 darkx:hover:tw-bg-gray-800"])},oF,10,aF),(0,s._)("button",{disabled:r.currentPage>=o.totalPages,onClick:e[1]||(e[1]=t=>o.changePage(r.currentPage+1)),class:(0,Q.C_)([[r.currentPage>=o.totalPages&&"tw-cursor-not-allowed"],"tw-flex tw-items-center tw-justify-center tw-w-1/2 tw-px-5 tw-py-2 tw-text-sm tw-text-gray-700 tw-capitalize tw-transition-colors tw-duration-200 tw-bg-white tw-border tw-border-solid tw-rounded-md sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-100 darkx:tw-bg-gray-900 darkx:tw-text-gray-200 darkx:tw-border-gray-700 darkx:hover:tw-bg-gray-800"])},wF,10,lF)])])])}var uF={props:{from:{type:Number,default:1},to:{type:Number,default:1},perPage:{type:Number,default:1},total:{type:Number,default:1},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1}},data(){return{totalItems:100,itemsPerPage:5}},computed:{totalPages(){return this.lastPage},showEllipsisStart(){return this.currentPage>3},showEllipsisEnd(){return this.currentPage<this.totalPages-2},visiblePages(){let t=Math.max(1,this.currentPage-1),e=Math.min(this.totalPages,this.currentPage+1);const r=[];for(let a=t;a<=e;a++)r.push(a);return r}},methods:{changePage(t){this.$emit("pageChange",t)}}};const pF=(0,d.Z)(uF,[["render",cF]]);var mF=pF;const hF={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},gF={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white"},fF={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},vF={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-flex tw-items-center tw-gap-2"},yF={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},xF={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-font-[cairo]"},bF={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},_F={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-font-[cairo]"},kF={class:"tw-px-12 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},CF={class:"tw-px-12 tw-py-2 tw-text-sm tw-whitespace-nowrap"},DF=(0,s._)("div",{class:"tw-w-1.5 tw-h-1.5 tw-rounded-full tw-bg-emerald-500"},null,-1),SF={key:1},zF={class:"tw-px-12 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},UF={class:"tw-px-4 tw-py-2 tw-text-sm tw-whitespace-nowrap"};function LF(t,e,r,a,i,o){const l=(0,s.up)("TableActions");return(0,s.wg)(),(0,s.iD)("tr",null,[(0,s._)("td",hF,[(0,s._)("div",null,[(0,s._)("h2",gF,(0,Q.zw)(r.item.id),1)])]),(0,s._)("td",fF,[(0,s._)("div",null,[(0,s._)("h2",vF,[(0,s._)("p",null,(0,Q.zw)(i.moment(r.item.created_at).format("DD[/]MM[/]YY")),1),(0,s.kq)("",!0)])])]),(0,s._)("td",yF,[(0,s._)("div",null,[(0,s._)("h2",xF,(0,Q.zw)(r.item.fullname),1)])]),(0,s._)("td",bF,[(0,s._)("div",null,[(0,s._)("h2",_F,(0,Q.zw)(r.item.phone),1)])]),(0,s._)("td",kF,[(0,s._)("span",{class:(0,Q.C_)([[o.confirmation.bgLight,o.confirmation.textLight],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},(0,Q.zw)(o.confirmation.name),3)]),(0,s._)("td",CF,[r.item.delivery_fullname?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([["tw-text-emerald-800","tw-bg-emerald-100"],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-pl-1.5 tw-py-0.5 tw-rounded tw-w-fit tw-flex tw-items-center tw-gap-2"])},[DF,(0,s._)("span",null,(0,Q.zw)(r.item.delivery_fullname),1)])):((0,s.wg)(),(0,s.iD)("div",SF,[(0,s._)("span",{class:(0,Q.C_)([["tw-text-gray-800","tw-bg-gray-100"],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},"No Delivery")]))]),(0,s._)("td",zF,[(0,s._)("span",{class:(0,Q.C_)([[o.deliveryState.bgLight,o.deliveryState.textLight],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},(0,Q.zw)(o.deliveryState.value?o.deliveryState.name:"Not Selected"),3)]),(0,s._)("td",UF,[(0,s._)("div",null,[(0,s.Wm)(l,{onUpdate:e[0]||(e[0]=e=>t.$emit("update",e)),item:r.item},null,8,["item"])])])])}const PF={class:"tw-h-full"},AF={class:"tw-flex tw-items-center tw-gap-2"},$F=["href"],WF={key:0};function qF(t,e,r,a,i,o){const l=(0,s.up)("UpdatePopup");return(0,s.wg)(),(0,s.iD)("div",PF,[(0,s._)("div",AF,[(0,s._)("a",{target:"_blank",href:"https://api.whatsapp.com/send?phone="+r.item.phone.replace("+","").replace("-","").replace(" ",""),class:"tw-px-2 tw-py-1 tw-w-[25px] tw-h-[25px] tw-border tw-border-solid tw-border-green-500/20 hover:tw-bg-green-500/10 hover:tw-border-green-500/70 tw-duration-300 tw-text-green-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(X.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-whatsapp")])),_:1})],8,$F),(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.popup=!0),class:"tw-px-2 tw-py-1 tw-w-[25px] tw-h-[25px] tw-border tw-border-solid tw-border-orange-500/20 hover:tw-bg-orange-500/10 hover:tw-border-orange-500/70 tw-duration-300 tw-text-orange-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(X.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])]),i.popup?((0,s.wg)(),(0,s.iD)("div",WF,[(0,s.Wm)(l,{onUpdate:e[1]||(e[1]=e=>t.$emit("update",e)),visible:i.popup,"onUpdate:visible":e[2]||(e[2]=t=>i.popup=t),item:r.item},null,8,["visible","item"])])):(0,s.kq)("",!0)])}const OF={class:"tw-mx-auto tw-w-[95%] md:tw-max-w-[800px] tw-overflow-hidden tw-h-fit dark:tw-bg-neutral-900 tw-bg-white tw-border tw-border-solid dark:tw-border-neutral-700 tw-border-neutral-300 tw-shadow-md tw-my-5 tw-rounded-lg"},EF=(0,s._)("div",{class:"tw-p-4 tw-text-lg tw-border-b tw-border-solid tw-font-medium tw-flex dark:tw-text-neutral-400 tw-text-neutral-500 tw-items-center tw-gap-4 dark:tw-bg-neutral-800 tw-bg-gray-50"}," Order Informations ",-1),TF={class:"tw-bg-white tw-p-4"},VF={class:"tw-grid tw-gap-6 tw-gap-y-5 tw-grid-cols-1 md:tw-grid-cols-2"},IF={class:"tw-col-span-2 md:tw-col-span-1"},FF=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Client Name",-1),RF={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},jF={class:"tw-col-span-2 md:tw-col-span-1"},NF=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Phone Number",-1),MF={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},HF={class:"tw-col-span-2 md:tw-col-span-1"},YF=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"City",-1),ZF={class:"tw-relative"},KF=(0,s._)("option",{value:null,disabled:""},"Choose a City",-1),BF=["value"],QF=["value"],GF=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),JF={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},XF={class:"tw-col-span-2 md:tw-col-span-1"},tR=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Address",-1),eR={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},rR={class:"tw-col-span-2"},aR=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),sR={class:"tw-relative"},iR=["value"],oR=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),lR={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},nR={key:0,class:"md:tw-col-span-1 tw-col-span-2"},dR=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Date",-1),wR={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},cR={key:1,class:"md:tw-col-span-1 tw-col-span-2"},uR=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Note",-1),pR={class:"tw-col-span-2"},mR=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Note",-1),hR={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},gR={class:"md:tw-col-span-1 tw-col-span-2"},fR={class:"md:tw-col-span-1 tw-col-span-2"},vR=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Upsell",-1),yR={class:"tw-relative"},xR=["value"],bR=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),_R={class:"tw-col-span-2"},kR={class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},CR={key:0,class:"tw-text-red-400 tw-text-xs"},DR={class:"tw-flex tw-justify-end tw-items-center tw-p-4 tw-gap-3 dark:tw-bg-neutral-900 tw-bg-gray-50 tw-border-t tw-border-solid"},SR=["disabled"],zR=(0,s._)("span",null,"Update",-1);function UR(t,e,r,i,o,l){const n=(0,s.up)("OrderAffectation"),d=(0,s.up)("OrderItems"),w=(0,s.up)("popup-new");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(w,{visible:r.visible,closeable:!1,onCancel:l.cancel},{default:(0,s.w5)((()=>[(0,s._)("div",OF,[EF,(0,s._)("div",TF,[(0,s._)("div",VF,[(0,s._)("div",IF,[FF,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.itemCopy.fullname=t),onInput:e[1]||(e[1]=t=>o.errors.fullname=null),type:"text",class:(0,Q.C_)([[o.errors.fullname&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),placeholder:"John",required:""},null,34),[[a.nr,o.itemCopy.fullname]]),o.errors.fullname?((0,s.wg)(),(0,s.iD)("label",RF,(0,Q.zw)(o.errors.fullname),1)):(0,s.kq)("",!0)]),(0,s._)("div",jF,[NF,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.itemCopy.phone=t),onInput:e[3]||(e[3]=t=>o.errors.phone=null),class:(0,Q.C_)([[o.errors.phone&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"123-45-678",required:""},null,34),[[a.nr,o.itemCopy.phone]]),o.errors.phone?((0,s.wg)(),(0,s.iD)("label",MF,(0,Q.zw)(o.errors.phone),1)):(0,s.kq)("",!0)]),(0,s._)("div",HF,[YF,(0,s._)("div",ZF,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.itemCopy.city=t),onChange:e[5]||(e[5]=t=>o.errors.city=null),class:(0,Q.C_)([[o.errors.city&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 tw-pr-7"])},[KF,(0,s._)("option",{value:o.itemCopy.city,disabled:""},(0,Q.zw)(o.itemCopy.city),9,BF),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,QF)))),128))],34),[[a.bM,o.itemCopy.city]]),GF]),o.errors.city?((0,s.wg)(),(0,s.iD)("label",JF,(0,Q.zw)(o.errors.city),1)):(0,s.kq)("",!0)]),(0,s._)("div",XF,[tR,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>o.itemCopy.adresse=t),onInput:e[7]||(e[7]=t=>o.errors.adresse=null),class:(0,Q.C_)([[o.errors.adresse&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"Address",required:""},null,34),[[a.nr,o.itemCopy.adresse]]),o.errors.adresse?((0,s.wg)(),(0,s.iD)("label",eR,(0,Q.zw)(o.errors.adresse),1)):(0,s.kq)("",!0)]),(0,s._)("div",rR,[aR,(0,s._)("div",sR,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>o.itemCopy.followup_confirmation=t),onChange:e[9]||(e[9]=t=>o.errors.followup_confirmation=null),class:(0,Q.C_)([[o.errors.followup_confirmation&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.confirmationsFollowup,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,class:(0,Q.C_)([t.text,!t.value&&"!tw-text-green-500"]),key:t.id},(0,Q.zw)(t.name),11,iR)))),128))],34),[[a.bM,o.itemCopy.followup_confirmation]]),oR]),o.errors.followup_confirmation?((0,s.wg)(),(0,s.iD)("label",lR,(0,Q.zw)(o.errors.followup_confirmation),1)):(0,s.kq)("",!0)]),"reporter"==o.itemCopy.followup_confirmation?((0,s.wg)(),(0,s.iD)("div",nR,[dR,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>o.itemCopy.reported_agente_date=t),onInput:e[11]||(e[11]=t=>o.errors.reported_agente_date=null),class:(0,Q.C_)([[o.errors.reported_agente_date&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"date",required:""},null,34),[[a.nr,o.itemCopy.reported_agente_date]]),o.errors.reported_agente_date?((0,s.wg)(),(0,s.iD)("label",wR,(0,Q.zw)(o.errors.reported_agente_date),1)):(0,s.kq)("",!0)])):(0,s.kq)("",!0),"reporter"==o.itemCopy.followup_confirmation?((0,s.wg)(),(0,s.iD)("div",cR,[uR,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[12]||(e[12]=t=>o.itemCopy.reported_agente_note=t),rows:"1",class:"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500",placeholder:"Enter a note"},null,512),[[a.nr,o.itemCopy.reported_agente_note]])])):(0,s.kq)("",!0),(0,s._)("div",pR,[mR,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[13]||(e[13]=t=>o.itemCopy.note=t),onInput:e[14]||(e[14]=t=>o.errors.note=null),class:(0,Q.C_)([[o.errors.note&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),rows:"3",placeholder:"Enter a note"},null,34),[[a.nr,o.itemCopy.note]]),o.errors.note?((0,s.wg)(),(0,s.iD)("label",hR,(0,Q.zw)(o.errors.note),1)):(0,s.kq)("",!0)]),(0,s._)("div",gR,[(0,s.Wm)(n,{item:o.itemCopy,error:o.errors.affectation,"onUpdate:error":e[15]||(e[15]=t=>o.errors.affectation=t),affectation:o.itemCopy.affectation,"onUpdate:affectation":e[16]||(e[16]=t=>o.itemCopy.affectation=t)},null,8,["item","error","affectation"])]),(0,s._)("div",fR,[vR,(0,s._)("div",yR,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[17]||(e[17]=t=>o.itemCopy.upsell=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.upsells,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([t.text]),value:t.value,key:t.id},(0,Q.zw)(t.name),11,xR)))),128))],512),[[a.bM,o.itemCopy.upsell]]),bR])]),(0,s._)("div",_R,[(0,s._)("label",kR,[(0,s.Uk)("Order Items "),o.errors.items?((0,s.wg)(),(0,s.iD)("span",CR," # "+(0,Q.zw)(o.errors.items),1)):(0,s.kq)("",!0)]),(0,s._)("div",null,[(0,s.Wm)(d,{order:o.itemCopy,error:o.errors.items,products:o.products,"products-fetched":o.products_fetched,items:o.itemCopy.items,"onUpdate:items":e[18]||(e[18]=t=>o.itemCopy.items=t)},null,8,["order","error","products","products-fetched","items"])])])])]),(0,s._)("div",DR,[(0,s._)("button",{onClick:e[19]||(e[19]=(...t)=>l.cancel&&l.cancel(...t)),class:"tw-py-2 tw-px-7 tw-rounded tw-text-sm tw-border tw-border-solid tw-border-tansparent dark:tw-border-neutral-900 hover:tw-border-neutral-400 dark:hover:tw-border-neutral-500 hover:tw-bg-gray-300 tw-bg-gray-200 dark:tw-bg-neutral-600 tw-duration-300 tw-text-neutral-900 dark:tw-text-neutral-300"}," Cancel "),(0,s._)("button",{onClick:e[20]||(e[20]=(...t)=>l.handleUpdate&&l.handleUpdate(...t)),disabled:o.isLoading,class:"tw-py-2 tw-px-7 tw-flex tw-items-center tw-rounded tw-text-sm tw-bg-orange-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-orange-600 dark:tw-border-neutral-900 dark:hover:tw-border-orange-500 hover:tw-bg-orange-500/80 dark:hover:tw-bg-orange-400 tw-duration-300 tw-text-white"},[(0,s.Wm)(X.t,{size:"small",class:(0,Q.C_)(["tw-duration-300 tw-animate-spin tw-overflow-hidden tw-max-w-0 tw-mr-0",[o.isLoading&&"!tw-max-w-[50px] !tw-mr-3"]])},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1},8,["class"]),zR],8,SR)])])])),_:1},8,["visible","onCancel"])])}const LR=(t,e)=>e.fullname?e.phone?e.adresse?e.note||"annuler"!=e.followup_confirmation?!!PR(t,e.items):(t.errors.note="Add Cancelation note !",!1):(t.errors.adresse="Address is required",!1):(t.errors.phone="Phone Number is required",!1):(t.errors.fullname="Client Name is required",!1),PR=(t,e)=>{if(!e.length)return t.errors.items="You should add one order item at least.",!1;let r=!0;return e.forEach((e=>0==e.product_id?(t.errors.items="Product is required for order item",r=!1,!1):0==e.product_variation_id?(t.errors.items="Select a product variation",r=!1,!1):0==e.quantity?(t.errors.items="Items quantity cannot be 0",r=!1,!1):void 0)),r},AR=(t,e)=>{t.$alert({title:"Updated Successfully",type:"success"});const r=e.data.order;t.$emit("update",r),t.isLoading=!1,t.cancel(),t.errors={}},$R=(t,e)=>{t.$alert({title:e.message,type:"error"}),"VALIDATION_ERROR"==e.code&&(t.errors=e.errors),t.isLoading=!1},WR=(t,e)=>{t.isLoading=!0,t.errors={},Ko.update(e.id,e).then((e=>AR(t,e.data))).catch((e=>$R(t,e.response.data))).finally((()=>t.isLoading=!1))},qR={key:0,class:"tw-col-span-12 tw-rounded-lg tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},OR={key:1,class:"md:tw-col-span-12 tw-col-span-12"},ER={class:"tw-max-w-full tw-overflow-auto"},TR={class:"tw-text-xs tw-text-gray-700 tw-uppercase !tw-rounded-t-lg tw-border tw-border-solid"},VR={class:"tw-bg-gray-50"},IR={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},FR={key:0},RR=(0,s._)("td",{colspan:"3"},null,-1),jR=(0,s._)("td",null,[(0,s._)("div",{class:"tw-p-2"},[(0,s._)("p",null,"Total: ")])],-1),NR={colspan:"2",class:"tw-p-2"},MR={class:"tw-p-2 tw-py-1 tw-text-sm tw-text-green-500 tw-w-24 tw-font-medium tw-block focus:tw-outline-none tw-shadow-sm tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},HR={colspan:"6"},YR={class:"tw-flex tw-justify-end tw-items-center tw-py-3"},ZR=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),KR=(0,s._)("span",null,"Add Item",-1),BR=[ZR,KR],QR={key:1},GR={colspan:"6"},JR={class:"tw-scale-75 tw-p-5"};function XR(t,e,r,a,i,o){const l=(0,s.up)("ItemRow"),n=(0,s.up)("loading");return(0,s.wg)(),(0,s.iD)("div",null,[r.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",qR," No Order items ")),r.items.length?((0,s.wg)(),(0,s.iD)("div",OR,[(0,s._)("div",ER,[((0,s.wg)(),(0,s.iD)("table",{key:r.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,s._)("thead",TR,[(0,s._)("tr",VR,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",IR,(0,Q.zw)(t),1)],2))),64))])]),r.productsFetched?((0,s.wg)(),(0,s.iD)("tbody",FR,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.items,(t=>((0,s.wg)(),(0,s.j4)(l,{key:t.id,item:t,products:r.products,onDelete:o.deleteItem,onUpdate:o.updateItem},null,8,["item","products","onDelete","onUpdate"])))),128)),(0,s._)("tr",null,[RR,jR,(0,s._)("td",NR,[(0,s._)("div",MR,[(0,s._)("p",null,(0,Q.zw)(i.currency)+" "+(0,Q.zw)(o.price),1)])])]),(0,s._)("tr",null,[(0,s._)("td",HR,[(0,s._)("div",YR,[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>o.addItem&&o.addItem(...t)),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-400 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},BR)])])])])):((0,s.wg)(),(0,s.iD)("tbody",QR,[(0,s._)("tr",null,[(0,s._)("td",GR,[(0,s._)("div",JR,[(0,s.Wm)(n)])])])]))]))])])):(0,s.kq)("",!0)])}var tj={components:{ItemRow:O$},props:{items:{required:!0,default:[]},error:{required:!1,default:null},products:{required:!0},productsFetched:{required:!0,default:!1},order:{required:!0}},data(){return{currency:R}},computed:{price(){return Mi(this.order)}},methods:{updateItem(t){const e=this.items.map((e=>e.id==t.id?t:e));this.$emit("update:items",e)},deleteItem(t){const e=this.items.filter((e=>e.id!=t));this.$emit("update:items",e)},addItem(){const t=this.items.length>0?this.items[this.items.length-1]:1,e=t?t.id+1:1,r={id:e,quantity:0,price:0,product_variation_id:0,product_id:0},a=[...this.items,r];this.$emit("update:items",a)}},mounted(){}};const ej=(0,d.Z)(tj,[["render",XR]]);var rj=ej;const aj=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Affectation",-1),sj={key:0,class:"tw-relative"},ij=["value","disabled"],oj=(0,s._)("option",{value:""},"Choose a Delivery",-1),lj=["value"],nj=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),dj={key:1,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},wj={key:2,class:"tw-relative"},cj={class:"tw-absolute tw-scale-75 tw-left-1/2 tw-top-1/2 -tw-translate-x-1/2 -tw-translate-y-1/2 tw-z-10"},uj=(0,s._)("select",{disabled:"",class:"tw-opacity-30 tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[(0,s._)("option",{value:null,selected:""},"Loading...")],-1),pj=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},null,-1);function mj(t,e,r,a,i,o){const l=(0,s.up)("loading");return(0,s.wg)(),(0,s.iD)("div",null,[aj,i.fetched?((0,s.wg)(),(0,s.iD)("div",sj,[(0,s._)("select",{value:r.affectation,onChange:e[0]||(e[0]=(...t)=>o.handleChange&&o.handleChange(...t)),disabled:"reconfirmer"!=r.item.followup_confirmation,class:(0,Q.C_)([[r.error&&"!tw-border-red-400","reconfirmer"!=r.item.followup_confirmation&&"tw-cursor-not-allowed"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[oj,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.availableDeliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,lj)))),128))],42,ij),nj])):(0,s.kq)("",!0),i.fetched&&r.error?((0,s.wg)(),(0,s.iD)("label",dj,(0,Q.zw)(r.error),1)):(0,s.kq)("",!0),i.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",wj,[(0,s._)("div",cj,[(0,s.Wm)(l)]),uj,pj]))])}var hj={props:{affectation:{required:!0},error:{required:!1,default:null},item:{required:!0}},data(){return{deliveries:[],fetched:!1}},computed:{availableDeliveries(){return this.deliveries.filter((t=>t.has.some((t=>this.item.items.some((e=>e.product_id==t))))))},delivery(){return this.deliveries.find((t=>t.id==this.affectation))}},watch:{"item.confirmation":{deep:!0,handler(){}},"item.items":{deep:!0,handler(){if(!this.affectation)return!1;this.delivery.has.some((t=>this.item.items.some((e=>e.product_id==t))))||this.$emit("update:affectation",null)}}},methods:{getDeliveries(){this.fetched=!1,K.allDeliveries().then((t=>{"SUCCESS"==t?.data.code&&(this.deliveries=t.data.data.deliveries,this.fetched=!0)})).catch(this.$handleApiError)},handleChange(t){this.$emit("update:affectation",t.target.value),this.$emit("update:error",null)}},mounted(){this.getDeliveries()}};const gj=(0,d.Z)(hj,[["render",mj]]);var fj=gj,vj={components:{OrderItems:rj,OrderAffectation:fj},props:{visible:{required:!0},item:{required:!0}},data(){return{confirmationsFollowup:An,upsells:$n,isLoading:!1,products_fetched:null,products:null,itemCopy:null,errors:{fullname:null,phone:null,city:null,adresse:null,note:null,reported_agente_date:null,affectation:null,items:null}}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{handleUpdate(){const t=LR(this,this.itemCopy);if(!t)return!1;WR(this,this.itemCopy)},cancel(){if(this.isLoading)return!1;this.$emit("update:visible",!1)},getProducts(){this.products_fetched=!1,ea.allForOrder().then((t=>{"SUCCESS"==t.data.code?this.products=t.data.data.products:this.products=[],this.products_fetched=!0})).catch(this.$handleApiError)}},mounted(){this.itemCopy=JSON.parse(JSON.stringify(this.item)),this.getProducts()}};const yj=(0,d.Z)(vj,[["render",UR]]);var xj=yj,bj={components:{UpdatePopup:xj},props:{item:{required:!0}},data(){return{popup:!1,isLoading:!1}},methods:{handle(){}}};const _j=(0,d.Z)(bj,[["render",qF]]);var kj=_j,Cj={components:{TableActions:kj},props:{item:{required:!0}},data(){return{moment:UP()}},computed:{confirmation(){return An.find((t=>t.value==this.item.followup_confirmation))},deliveryState(){return Wn.find((t=>t.value==this.item.delivery))}},methods:{}};const Dj=(0,d.Z)(Cj,[["render",LF]]);var Sj=Dj,zj={components:{TablePaginationNoNums:mF,TableRow:Sj},props:{items:{default:[]},loading:{type:Boolean,default:!0},from:{type:Number,default:1},to:{type:Number,default:1},perPage:{type:Number,default:10},total:{type:Number,default:0},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1}}};const Uj=(0,d.Z)(zj,[["render",JI]]);var Lj=Uj;const Pj={class:"tw-mt-6 tw-mb-4 md:tw-flex md:tw-items-center md:tw-justify-between"},Aj={class:"tw-inline-flex tw-overflow-hidden tw-bg-white tw-border tw-divide-x tw-rounded-lg darkx:tw-bg-gray-900 rtl:tw-flex-row-reverse darkx:tw-border-gray-700 darkx:tw-divide-gray-700"},$j=(0,s._)("button",{class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 tw-bg-gray-100 sm:tw-text-sm darkx:tw-bg-gray-800 darkx:tw-text-gray-300"}," View all ",-1),Wj=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M9 5a1 1 0 1 0 0 2a1 1 0 0 0 0-2zM6.17 5a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 0 1 0-2h1.17zM15 11a1 1 0 1 0 0 2a1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-1.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h7.17zM9 17a1 1 0 1 0 0 2a1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h1.17z"})],-1),qj=[Wj],Oj=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M10 2c-.6 0-1 .4-1 1v18c0 .6.4 1 1 1s1-.4 1-1V3c0-.6-.4-1-1-1zM5 12c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1s1-.4 1-1v-8c0-.6-.4-1-1-1zm10-4c-.6 0-1 .4-1 1v12c0 .6.4 1 1 1s1-.4 1-1V9c0-.6-.4-1-1-1zm5 8c-.6 0-1 .4-1 1v4c0 .6.4 1 1 1s1-.4 1-1v-4c0-.6-.4-1-1-1z"})],-1),Ej=[Oj],Tj=["disabled"],Vj=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[(0,s._)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4.75 10.75h-3m12.5-2c0 3-2.798 5.5-6.25 5.5c-3.75 0-6.25-3.5-6.25-3.5v3.5m9.5-9h3m-12.5 2c0-3 2.798-5.5 6.25-5.5c3.75 0 6.25 3.5 6.25 3.5v-3.5"})],-1),Ij=[Vj],Fj={class:"tw-relative"},Rj=["value"],jj=(0,s.uE)('<option value="5">5</option><option value="10">10</option><option value="20">20</option><option value="50">50</option><option value="100">100</option><option value="200">200</option>',6),Nj=[jj],Mj=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),Hj={class:"tw-relative tw-flex tw-items-center tw-mt-4 md:tw-mt-0"},Yj=["value"],Zj={class:"tw-overflow-hidden tw-col-span-1"},Kj={class:"tw-overflow-hidden tw-col-span-1"};function Bj(t,e,r,i,o,l){const n=(0,s.up)("FiltersWrapper"),d=(0,s.up)("IndexStatistics");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",Pj,[(0,s._)("div",Aj,[$j,(0,s._)("button",{onClick:e[0]||(e[0]=t=>o.showFilters=!o.showFilters),class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},qj),r.activeStatistics&&r.statistics?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:e[1]||(e[1]=t=>o.showStatistics=!o.showStatistics),class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},Ej)):(0,s.kq)("",!0),(0,s._)("button",{onClick:e[2]||(e[2]=e=>t.$emit("fresh")),disabled:r.loading,class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},Ij,8,Tj),(0,s._)("div",Fj,[(0,s._)("select",{onChange:e[3]||(e[3]=e=>t.$emit("perPageChange",e.target.value)),value:r.perPage,class:"tw-h-full tw-px-5 tw-py-2 tw-w-20 focus:tw-outline-none tw-text-xs tw-font-medium tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},Nj,40,Rj),Mj])]),(0,s._)("div",Hj,[(0,s._)("input",{type:"text",placeholder:"Search",value:r.search,onInput:e[4]||(e[4]=e=>t.$emit("update:search",e.target.value)),onKeyup:e[5]||(e[5]=(0,a.D2)((e=>t.$emit("filter")),["enter"])),class:"tw-block tw-w-full tw-py-1.5 tw-pl-5 tw-text-gray-700 tw-bg-white tw-border tw-border-solid tw-border-gray-200 tw-rounded-lg md:tw-w-80 placeholder-gray-400/70 tw-pr-11 rtl:tw-pr-11 rtl:tw-pl-5 darkx:tw-bg-gray-900 darkx:tw-text-gray-300 darkx:tw-border-gray-600 focus:tw-border-orange-400 darkx:focus:tw-border-orange-300 focus:tw-ring-orange-300 focus:tw-outline-none focus:tw-ring focus:tw-ring-opacity-40"},null,40,Yj),(0,s._)("button",{onClick:e[6]||(e[6]=e=>t.$emit("filter")),class:"tw-absolute tw-right-0 tw-px-2 tw-py-1 tw-w-[38px] tw-h-[36px] tw-border-solid tw-rounded-r-lg tw-border-l tw-text-orange-500/80 tw-border-orange-500/20 hover:tw-bg-orange-500/10 hover:tw-border-orange-500/70 tw-duration-300 tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(X.t,{size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-magnify")])),_:1})])])]),(0,s._)("div",{class:(0,Q.C_)([[o.showFilters?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",Zj,[(0,s.Wm)(n,{onFilter:e[7]||(e[7]=e=>t.$emit("filter")),filters:r.filters,onUpdate:e[8]||(e[8]=e=>t.$emit("update:filters",e))},null,8,["filters"])])],2),r.statistics?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([[o.showStatistics?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",Kj,[(0,s.Wm)(d,{statistics:r.statistics},null,8,["statistics"])])],2)):(0,s.kq)("",!0)])}const Qj={class:"tw-mb-4"},Gj={class:"tw-grid tw-grid-cols-12 tw-gap-4"},Jj={class:"tw-h-full tw-w-full tw-p-3 tw-rounded tw-space-y-2 tw-border tw-border-solid"},Xj={class:"tw-flex tw-items-center tw-justify-between"},tN={class:"tw-text-xl tw-font-bold tw-text-gray-900"},eN={class:"tw-px-2 tw-py-1 tw-font-medium tw-text-sm tw-rounded tw-bg-white tw-text-gray-900"};function rN(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",Qj,[(0,s._)("div",Gj,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.visible,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"md:tw-col-span-3 tw-col-span-12"},[(0,s._)("div",Jj,[(0,s._)("p",{class:(0,Q.C_)(["tw-text-sm tw-font-bold tw-w-fit tw-h-fit tw-px-2 tw-rounded",[o.getConfirmation(t.confirmation).textLight,o.getConfirmation(t.confirmation).bgLight]])},(0,Q.zw)(t.name),3),(0,s._)("div",Xj,[(0,s._)("span",tN,(0,Q.zw)(t.total),1),(0,s._)("span",eN,(0,Q.zw)(t.percent)+"%",1)])])])))),128))])])}var aN={props:{statistics:{required:!0}},computed:{visible(){return this.statistics.show.includes("*")?this.statistics.data:this.statistics.data.filter((t=>this.statistics.show.includes(t.followup_confirmation)))}},methods:{getConfirmation(t){return An.find((e=>e.value==t))}}};const sN=(0,d.Z)(aN,[["render",rN]]);var iN=sN;const oN={class:"tw-mb-4"},lN={class:"tw-grid tw-grid-cols-12 tw-gap-4 tw-p-1"},nN={class:"md:tw-col-span-4 tw-col-span-12 tw-rounded"},dN=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Created",-1),wN=["value"],cN={class:"md:tw-col-span-4 tw-col-span-12 tw-rounded"},uN=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),pN=["value"],mN=(0,s._)("option",{value:"all",selected:""},"All",-1),hN=["value"],gN={class:"md:tw-col-span-4 tw-col-span-12 tw-rounded"},fN=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Delivery Status",-1),vN=["value"],yN=(0,s._)("option",{value:"all",selected:""},"All",-1),xN=["value"],bN=(0,s._)("button",{class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},[(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[(0,s._)("path",{fill:"#fff",d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})]),(0,s._)("span",null,"Filter")],-1),_N=[bN];function kN(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",oN,[(0,s._)("div",lN,[(0,s._)("div",nN,[dN,(0,s._)("input",{value:r.filters.created_at,type:"date",onChange:e[0]||(e[0]=e=>t.$emit("update",{...r.filters,created_at:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,wN)]),(0,s._)("div",cN,[uN,(0,s._)("select",{value:r.filters.followup_confirmation,onChange:e[1]||(e[1]=e=>t.$emit("update",{...r.filters,followup_confirmation:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[mN,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.confirmationsFollowup,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,class:"tw-capitalize",key:t.id},(0,Q.zw)(t.name),9,hN)))),128))],40,pN)]),(0,s._)("div",gN,[fN,(0,s._)("select",{onChange:e[2]||(e[2]=e=>t.$emit("update",{...r.filters,delivery:e.target.value})),value:r.filters.delivery,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[yN,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,class:"tw-capitalize",key:t.id},(0,Q.zw)(t.name),9,xN)))),128))],40,vN)]),(0,s.kq)("",!0),(0,s._)("div",{onClick:e[3]||(e[3]=e=>t.$emit("filter")),class:"tw-col-span-12 tw-flex tw-justify-end"},_N)])])}var CN={props:{filters:{required:!0,default:{}}},data(){return{confirmationsFollowup:An,deliveryStatus:Wn,deliveries:[{id:1,value:"annuler",name:"Cancelled"},{id:2,value:"pas-de-reponse",name:"No Answer"}]}}};const DN=(0,d.Z)(CN,[["render",kN]]);var SN=DN,zN={components:{IndexStatistics:iN,FiltersWrapper:SN},props:{perPage:{type:Number,default:10},statistics:{default:null},activeStatistics:{type:Boolean,default:!1},loading:{default:!0},search:{default:""},filters:{required:!0}},data(){return{showFilters:!1,showStatistics:!1}}};const UN=(0,d.Z)(zN,[["render",Bj]]);var LN=UN;const PN={class:"tw-mx-auto tw-w-[95%] md:tw-max-w-[800px] tw-overflow-hidden tw-h-fit dark:tw-bg-neutral-900 tw-bg-white tw-border tw-border-solid dark:tw-border-neutral-700 tw-border-neutral-300 tw-shadow-md tw-my-5 tw-rounded-lg"},AN=(0,s._)("div",{class:"tw-p-4 tw-text-lg tw-border-b tw-border-solid tw-font-medium tw-flex dark:tw-text-neutral-400 tw-text-neutral-500 tw-items-center tw-gap-4 dark:tw-bg-neutral-800 tw-bg-gray-50"}," Order Informations ",-1),$N={class:"tw-bg-white tw-p-4"},WN={class:"tw-grid tw-gap-6 tw-gap-y-5 tw-grid-cols-1 md:tw-grid-cols-2"},qN={class:"tw-col-span-2 md:tw-col-span-1"},ON=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Client Name",-1),EN={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},TN={class:"tw-col-span-2 md:tw-col-span-1"},VN=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Phone Number",-1),IN={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},FN={class:"tw-col-span-2 md:tw-col-span-1"},RN=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"City",-1),jN={class:"tw-relative"},NN=(0,s._)("option",{value:null,disabled:""},"Choose a City",-1),MN=["value"],HN=["value"],YN=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),ZN={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},KN={class:"tw-col-span-2 md:tw-col-span-1"},BN=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Address",-1),QN={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},GN={class:"tw-col-span-2"},JN=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),XN={class:"tw-relative"},tM=["value"],eM=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),rM={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},aM={key:0,class:"md:tw-col-span-1 tw-col-span-2"},sM=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Date",-1),iM={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},oM={key:1,class:"md:tw-col-span-1 tw-col-span-2"},lM=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Note",-1),nM={class:"tw-col-span-2"},dM=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Note",-1),wM={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},cM={class:"md:tw-col-span-1 tw-col-span-2"},uM={class:"md:tw-col-span-1 tw-col-span-2"},pM=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Upsell",-1),mM={class:"tw-relative"},hM=["value"],gM=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),fM={class:"tw-col-span-2"},vM={class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},yM={key:0,class:"tw-text-red-400 tw-text-xs"},xM={class:"tw-flex tw-justify-end tw-items-center tw-p-4 tw-gap-3 dark:tw-bg-neutral-900 tw-bg-gray-50 tw-border-t tw-border-solid"},bM=["disabled"],_M=(0,s._)("span",null,"Create",-1);function kM(t,e,r,i,o,l){const n=(0,s.up)("OrderAffectation"),d=(0,s.up)("OrderItems"),w=(0,s.up)("popup-new");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(w,{visible:r.visible,closeable:!1,onCancel:l.cancel},{default:(0,s.w5)((()=>[(0,s._)("div",PN,[AN,(0,s._)("div",$N,[(0,s._)("div",WN,[(0,s._)("div",qN,[ON,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.itemCopy.fullname=t),onInput:e[1]||(e[1]=t=>o.errors.fullname=null),type:"text",class:(0,Q.C_)([[o.errors.fullname&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),placeholder:"John",required:""},null,34),[[a.nr,o.itemCopy.fullname]]),o.errors.fullname?((0,s.wg)(),(0,s.iD)("label",EN,(0,Q.zw)(o.errors.fullname),1)):(0,s.kq)("",!0)]),(0,s._)("div",TN,[VN,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.itemCopy.phone=t),onInput:e[3]||(e[3]=t=>o.errors.phone=null),class:(0,Q.C_)([[o.errors.phone&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"123-45-678",required:""},null,34),[[a.nr,o.itemCopy.phone]]),o.errors.phone?((0,s.wg)(),(0,s.iD)("label",IN,(0,Q.zw)(o.errors.phone),1)):(0,s.kq)("",!0)]),(0,s._)("div",FN,[RN,(0,s._)("div",jN,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.itemCopy.city=t),onChange:e[5]||(e[5]=t=>o.errors.city=null),class:(0,Q.C_)([[o.errors.city&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 tw-pr-7"])},[NN,(0,s._)("option",{value:o.itemCopy.city,disabled:""},(0,Q.zw)(o.itemCopy.city),9,MN),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,HN)))),128))],34),[[a.bM,o.itemCopy.city]]),YN]),o.errors.city?((0,s.wg)(),(0,s.iD)("label",ZN,(0,Q.zw)(o.errors.city),1)):(0,s.kq)("",!0)]),(0,s._)("div",KN,[BN,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>o.itemCopy.adresse=t),onInput:e[7]||(e[7]=t=>o.errors.adresse=null),class:(0,Q.C_)([[o.errors.adresse&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"Address",required:""},null,34),[[a.nr,o.itemCopy.adresse]]),o.errors.adresse?((0,s.wg)(),(0,s.iD)("label",QN,(0,Q.zw)(o.errors.adresse),1)):(0,s.kq)("",!0)]),(0,s._)("div",GN,[JN,(0,s._)("div",XN,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>o.itemCopy.confirmation=t),onChange:e[9]||(e[9]=t=>o.errors.confirmation=null),class:(0,Q.C_)([[o.errors.confirmation&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,class:(0,Q.C_)([t.text,!t.value&&"!tw-text-green-500"]),key:t.id},(0,Q.zw)(t.name),11,tM)))),128))],34),[[a.bM,o.itemCopy.confirmation]]),eM]),o.errors.confirmation?((0,s.wg)(),(0,s.iD)("label",rM,(0,Q.zw)(o.errors.confirmation),1)):(0,s.kq)("",!0)]),"reporter"==o.itemCopy.confirmation?((0,s.wg)(),(0,s.iD)("div",aM,[sM,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>o.itemCopy.reported_agente_date=t),onInput:e[11]||(e[11]=t=>o.errors.reported_agente_date=null),class:(0,Q.C_)([[o.errors.reported_agente_date&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"date",required:""},null,34),[[a.nr,o.itemCopy.reported_agente_date]]),o.errors.reported_agente_date?((0,s.wg)(),(0,s.iD)("label",iM,(0,Q.zw)(o.errors.reported_agente_date),1)):(0,s.kq)("",!0)])):(0,s.kq)("",!0),"reporter"==o.itemCopy.confirmation?((0,s.wg)(),(0,s.iD)("div",oM,[lM,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[12]||(e[12]=t=>o.itemCopy.reported_agente_note=t),rows:"1",class:"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500",placeholder:"Enter a note"},null,512),[[a.nr,o.itemCopy.reported_agente_note]])])):(0,s.kq)("",!0),(0,s._)("div",nM,[dM,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[13]||(e[13]=t=>o.itemCopy.note=t),onInput:e[14]||(e[14]=t=>o.errors.note=null),class:(0,Q.C_)([[o.errors.note&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),rows:"3",placeholder:"Enter a note"},null,34),[[a.nr,o.itemCopy.note]]),o.errors.note?((0,s.wg)(),(0,s.iD)("label",wM,(0,Q.zw)(o.errors.note),1)):(0,s.kq)("",!0)]),(0,s._)("div",cM,[(0,s.Wm)(n,{item:o.itemCopy,error:o.errors.affectation,"onUpdate:error":e[15]||(e[15]=t=>o.errors.affectation=t),affectation:o.itemCopy.affectation,"onUpdate:affectation":e[16]||(e[16]=t=>o.itemCopy.affectation=t)},null,8,["item","error","affectation"])]),(0,s._)("div",uM,[pM,(0,s._)("div",mM,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[17]||(e[17]=t=>o.itemCopy.upsell=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.upsells,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([t.text]),value:t.value,key:t.id},(0,Q.zw)(t.name),11,hM)))),128))],512),[[a.bM,o.itemCopy.upsell]]),gM])]),(0,s._)("div",fM,[(0,s._)("label",vM,[(0,s.Uk)("Order Items "),o.errors.items?((0,s.wg)(),(0,s.iD)("span",yM," # "+(0,Q.zw)(o.errors.items),1)):(0,s.kq)("",!0)]),(0,s._)("div",null,[(0,s.Wm)(d,{order:o.itemCopy,error:o.errors.items,products:o.products,"products-fetched":o.products_fetched,items:o.itemCopy.items,"onUpdate:items":e[18]||(e[18]=t=>o.itemCopy.items=t)},null,8,["order","error","products","products-fetched","items"])])])])]),(0,s._)("div",xM,[(0,s._)("button",{onClick:e[19]||(e[19]=(...t)=>l.cancel&&l.cancel(...t)),class:"tw-py-2 tw-px-7 tw-rounded tw-text-sm tw-border tw-border-solid tw-border-tansparent dark:tw-border-neutral-900 hover:tw-border-neutral-400 dark:hover:tw-border-neutral-500 hover:tw-bg-gray-300 tw-bg-gray-200 dark:tw-bg-neutral-600 tw-duration-300 tw-text-neutral-900 dark:tw-text-neutral-300"}," Cancel "),(0,s._)("button",{onClick:e[20]||(e[20]=(...t)=>l.handleCreate&&l.handleCreate(...t)),disabled:o.isLoading,class:"tw-py-2 tw-px-7 tw-flex tw-items-center tw-rounded tw-text-sm tw-bg-orange-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-orange-600 dark:tw-border-neutral-900 dark:hover:tw-border-orange-500 hover:tw-bg-orange-500/80 dark:hover:tw-bg-orange-400 tw-duration-300 tw-text-white"},[(0,s.Wm)(X.t,{size:"small",class:(0,Q.C_)(["tw-duration-300 tw-animate-spin tw-overflow-hidden tw-max-w-0 tw-mr-0",[o.isLoading&&"!tw-max-w-[50px] !tw-mr-3"]])},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1},8,["class"]),_M],8,bM)])])])),_:1},8,["visible","onCancel"])])}const CM=(t,e)=>{t.$alert({title:"Created Successfully",type:"success"}),console.log(e),t.isLoading=!1,t.cancel(),t.errors={}},DM=(t,e)=>{t.$alert({title:e.message,type:"error"}),"VALIDATION_ERROR"==e.code&&(t.errors=e.errors),t.isLoading=!1},SM=(t,e)=>{t.isLoading=!0,t.errors={},XU.create(e).then((e=>CM(t,e.data))).catch((e=>DM(t,e.response.data))).finally((()=>t.isLoading=!1))};var zM={components:{OrderItems:rj,OrderAffectation:fj},props:{visible:{required:!0}},data(){return{confirmations:Pn,upsells:$n,isLoading:!1,products_fetched:null,products:null,itemCopy:null,errors:{fullname:null,phone:null,city:null,adresse:null,note:null,reported_agente_date:null,affectation:null,items:null}}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{handleCreate(){const t=LR(this,this.itemCopy);if(!t)return!1;SM(this,this.itemCopy)},cancel(){if(this.isLoading)return!1;this.$emit("update:visible",!1)},getProducts(){this.products_fetched=!1,ea.allForOrder().then((t=>{"SUCCESS"==t.data.code?this.products=t.data.data.products:this.products=[],this.products_fetched=!0})).catch(this.$handleApiError)}},mounted(){this.itemCopy={confirmation:null,upsell:null,items:[]},this.getProducts()}};const UM=(0,d.Z)(zM,[["render",kM]]);var LM=UM,PM={components:{IndexTable:Lj,IndexFilters:LN,CreatePopup:LM},data(){return{fetching:!0,create_popup:!1,items:[],statistics:null,first_page_url:null,lase_page_url:null,next_page_url:null,prev_page_url:null,last_page:1,from:1,to:1,total:0,totalOrders:0,links:null,search:"",sort_by:"created_at",sort_order:"desc",per_page:10,current_page:1,filters:{followup_confirmation:"all",delivery:"all",created_at:"all"}}},methods:{paginateOrders(){const t="?page="+this.current_page,e={sort_by:this.sort_by,sort_order:this.sort_order,per_page:this.per_page,current_page:this.current_page,search:this.search,filters:this.filters};return this.fetching=!0,Ko.paginate(t,e).then((({data:t})=>{const e=t.data.orders;this.setOptions(e),this.statistics=this.search?this.statistics:t.data.statistics})).then((()=>{this.fetching=!1}))},setOptions(t){this.items=t.data,this.first_page_url=Hi(t.first_page_url),this.lase_page_url=Hi(t.last_page_url),this.next_page_url=Hi(t.next_page_url),this.prev_page_url=Hi(t.prev_page_url),this.last_page=parseInt(t.last_page),this.from=parseInt(t.from),this.to=parseInt(t.to),this.per_page=parseInt(t.per_page),this.total=parseInt(t.total),this.totalOrders=this.search?this.totalOrders:parseInt(t.total),this.links=t.links},handleNext(){},handlePrev(){},handleItemUpdate(t){this.items=this.items.map((e=>e.id==t.id?t:e))},handlePageChange(t){this.current_page=t,this.paginateOrders()},handlePerPageChange(t){this.per_page=parseInt(t),this.handlePageChange(1)},handleSortOrderChange(){this.sort_order="asc"==this.sort_order?"desc":"asc",this.paginateOrders()}},mounted(){this.paginateOrders()}};const AM=(0,d.Z)(PM,[["render",_I]]);var $M=AM,WM={name:"sales",path:"/sales",component:sa,meta:{module:"sale"},children:[{name:"sale/list",path:"",component:TU,meta:{module:"sale",subModule:"sale/list",title:"Sales List",gate:"show_all_sales"}},{name:"sale/newlist",path:"new",component:AV,meta:{module:"sale",subModule:"sale/newlist",title:"Sales List",gate:"show_all_sales"}},{name:"sale/expidation",path:"expidation",component:KV,meta:{module:"sale",subModule:"sale/expidation",title:"Expidation",gate:"show_all_expidations"}},{name:"sale/shipping",path:"shipping",component:cI,meta:{module:"sale",subModule:"sale/shipping",title:"Shipping",gate:"show_all_expidations"}},{name:"sale/followup",path:"followup",component:$M,meta:{module:"followup",subModule:"sale/followup",title:"Follow Up",gate:"show_all_expidations"}}]};const qM={class:"mb-5 tw-flex tw-justify-between tw-items-center"},OM=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"My Orders"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"See orders affected to you")],-1),EM={key:0},TM=(0,s._)("span",{class:"text-white"}," Add Sale ",-1),VM={key:0},IM={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},FM={class:"mb-5 tw-flex"},RM={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},jM={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},NM={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},MM=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Sort By",-1),HM={class:"tw-relative"},YM=["value"],ZM={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},KM=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Order By",-1),BM={class:"tw-relative"},QM=["value"],GM={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},JM=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Upsell",-1),XM={class:"tw-relative"},tH=(0,s._)("option",{value:"all"},"Select",-1),eH=(0,s._)("option",{value:"oui"},"Oui",-1),rH=(0,s._)("option",{value:"non"},"Non",-1),aH=[tH,eH,rH],sH={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},iH=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Confirmation",-1),oH={class:"tw-relative"},lH=["value"],nH={key:0},dH={key:1,class:""},wH=(0,s._)("p",{class:"tw-text-neutral-400 tw-py-5"},"Your order liste is empty !",-1),cH=[wH];function uH(t,e,r,i,o,l){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("OrdersTable"),w=(0,s.up)("AddNewOrder");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",qM,[OM,o.isLoaded?((0,s.wg)(),(0,s.iD)("div",EM,[(0,s.Wm)(G.T,{color:"primary-color",onClick:e[0]||(e[0]=t=>o.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),TM])),_:1})])):(0,s.kq)("",!0)]),o.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",VM,[(0,s.Wm)(n)])),o.isLoaded?((0,s.wg)(),(0,s.iD)("div",IM,[(0,s._)("div",FM,[(0,s.Wm)(G.T,{onClick:e[1]||(e[1]=t=>o.showFilters=!o.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",RM,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,o.search]])])]),(0,s._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":o.showFilters}])},[(0,s._)("div",jM,[(0,s._)("div",NM,[MM,(0,s._)("div",HM,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.sorting.sortBy=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.sorting.fields,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.value,value:t.value},(0,Q.zw)(t.name),9,YM)))),128))],512),[[a.bM,o.sorting.sortBy]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",ZM,[KM,(0,s._)("div",BM,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.sorting.orderBy=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.sorting.options,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.value,value:t.value},(0,Q.zw)(t.name),9,QM)))),128))],512),[[a.bM,o.sorting.orderBy]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",GM,[JM,(0,s._)("div",XM,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>o.upsellFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},aH,512),[[a.bM,o.upsellFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",sH,[iH,(0,s._)("div",oH,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>o.confirmationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.value?t.value:"all"},(0,Q.zw)(t.name),9,lH)))),128))],512),[[a.bM,o.confirmationFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])],2),l.orders.length>0?((0,s.wg)(),(0,s.iD)("div",nH,[(0,s.Wm)(d,{orders:l.filteredOrders},null,8,["orders"])])):((0,s.wg)(),(0,s.iD)("div",dH,cH))])):(0,s.kq)("",!0),(0,s.Wm)(w,{onCancel:e[7]||(e[7]=t=>o.showPopup=!1),visible:o.showPopup,"onUpdate:visible":e[8]||(e[8]=t=>o.showPopup=t)},null,8,["visible"])])}const pH={class:"tw-relative tw-min-h-[400px] tw-overflow-x-auto tw-overflow-y-visible sm:tw-rounded-lg"},mH={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},hH={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},gH=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),fH={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},vH={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},yH={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},xH=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),bH=["value"],_H={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},kH={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},CH={class:"tw-flex tw-flex-wrap tw-gap-2"},DH={class:"tw-text-white"};function SH(t,e,r,i,o,l){const n=(0,s.up)("OrderRow");return r.orders.length>0?((0,s.wg)(),(0,s.iD)("div",{key:r.orders.length},[(0,s._)("div",pH,[(0,s._)("table",mH,[(0,s._)("thead",hH,[(0,s._)("tr",null,[gH,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",fH,(0,Q.zw)(t),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.items,(t=>((0,s.wg)(),(0,s.j4)(n,{showNote:!!r.note,key:t.id,order:t},null,8,["showNote","order"])))),128))])])]),(0,s._)("div",vH,[(0,s._)("div",yH,[xH,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,bH)))),128))],512),[[a.bM,o.paginationLimit]])]),(0,s._)("div",_H,[(0,s._)("div",kH,(0,Q.zw)(l.prevRange+1)+" - "+(0,Q.zw)(o.currentPage==l.pageCount?r.orders.length:l.nextRange)+" of "+(0,Q.zw)(r.orders.length)+" items ",1),(0,s._)("div",CH,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.pageCount,(t=>((0,s.wg)(),(0,s.j4)(G.T,{onClick:e=>o.currentPage=t,ripple:!1,variant:"flat",icon:"",rounded:"lg",color:t==o.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",DH,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])):(0,s.kq)("",!0)}const zH=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),UH={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},LH={class:"tw-px-6 tw-py-4 tw-relative"},PH={key:0},AH={class:"tw-px-6 tw-py-4"},$H={class:"tw-px-6 tw-py-4 tw-relative"},WH={class:"tw-pb-2"},qH={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},OH={key:0},EH={key:1},TH={class:"tw-absolute tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-text-xs"},VH={key:0,class:"tw-bg-emerald-500/10 tw-text-emerald-500 tw-px-2 tw-rounded-t"},IH={key:1,class:"tw-bg-blue-500/10 tw-text-blue-500 tw-px-2 tw-rounded-t"},FH={class:"tw-px-6 tw-py-4 tw-relative"},RH={class:"tw-flex tw-items-center tw-justify-center"},jH={class:"tw-flex tw-gap-1"},NH={key:0},MH={class:"tw-px-6 tw-py-4"},HH={class:"tw-px-6 tw-py-4"},YH={class:"tw-px-6 tw-py-4"},ZH={class:"!tw-max-w-[300px] !tw-min-w-[300px] tw-whitespace-normal"},KH={key:1,class:"tw-px-6 tw-py-4"},BH={class:"tw-max-w-[300px] tw-min-w-[150px] tw-whitespace-normal"},QH={class:"tw-px-6 tw-py-4"},GH={class:"tw-min-w-[300px]"},JH=(0,s._)("p",null,"Edit note",-1);function XH(t,e,r,a,i,o){(0,s.up)("OrderUpsell");const l=(0,s.up)("OrderConfirmation"),n=(0,s.up)("OrderAffectation"),d=(0,s.up)("OrderActions"),w=(0,s.up)("popup");return(0,s.wg)(),(0,s.iD)(s.HY,null,[((0,s.wg)(),(0,s.iD)("tr",{key:r.order.id,class:(0,Q.C_)([["reporter"==r.order.confirmation&&"tw-relative",o.isReportedToday(r.order)&&"!tw-border tw-border-red-400"],"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"])},[zH,(0,s._)("th",UH,(0,Q.zw)(o.id),1),(0,s._)("td",LH,[(0,s.Uk)((0,Q.zw)(r.order?.created_at?.split("T")[0])+" ",1),"reporter"==r.order.confirmation?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([o.isReportedToday(r.order)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[o.isReportedToday(r.order)?((0,s.wg)(),(0,s.iD)("span",PH," Reported for today ")):(0,s.kq)("",!0)],2)):(0,s.kq)("",!0)]),(0,s._)("td",AH,(0,Q.zw)(o.fullname),1),(0,s._)("td",$H,[(0,s._)("div",WH,[(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.order.items,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,s.Uk)(" - "),(0,s._)("span",qH,(0,Q.zw)(t.quantity)+" X ",1),(0,s.Uk)((0,Q.zw)(t.product.name)+" ",1),t.product_variation.size?((0,s.wg)(),(0,s.iD)("span",OH,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,s.kq)("",!0),t.product_variation.color?((0,s.wg)(),(0,s.iD)("span",EH,"| "+(0,Q.zw)(t.product_variation.color),1)):(0,s.kq)("",!0)])))),128))]),(0,s._)("div",TH,[r.order.counts_from_warehouse?((0,s.wg)(),(0,s.iD)("p",VH," warehouse ")):(0,s.kq)("",!0),r.order.counts_from_warehouse?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",IH," delivery "))])])]),(0,s.kq)("",!0),(0,s._)("td",FH,[(0,s._)("div",RH,[((0,s.wg)(),(0,s.j4)(l,{class:(0,Q.C_)("reporter"==r.order.confirmation&&"tw-mb-1"),order:r.order,confirmation:o.confirmation,key:o.confirmation,id:o.id},null,8,["class","order","confirmation","id"])),"reporter"==r.order.confirmation?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([o.isReportedToday(r.order)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[(0,s._)("span",jH,["reporter"==r.order.confirmation?((0,s.wg)(),(0,s.iD)("span",NH,[(0,s.Wm)(X.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s._)("span",null,(0,Q.zw)(r.order?.reported_agente_date?.split("T")[0]),1)])):(0,s.kq)("",!0)])],2)):(0,s.kq)("",!0)])]),(0,s._)("td",MH,["confirmer"===o.confirmation?((0,s.wg)(),(0,s.j4)(n,{order:r.order,id:o.id,affectation:o.affectation,key:o.affectation},null,8,["order","id","affectation"])):(0,s.kq)("",!0)]),(0,s._)("td",HH,(0,Q.zw)(o.getPrice(r.order)),1),(0,s._)("td",YH,[(0,s._)("div",ZH,(0,Q.zw)(r.order.city),1)]),r.showNote?((0,s.wg)(),(0,s.iD)("td",KH,[(0,s._)("div",BH,[(0,s.Uk)((0,Q.zw)(r.order.note)+" ",1),(0,s.Wm)(X.t,{onClick:o.handleClick,size:"x-small",class:(0,Q.C_)(["tw-ml-2 tw-text-blue-500 tw-cursor-pointer hover:tw-bg-neutral-900/10 tw-rounded-full tw-p-3",{"tw-animate-spin":i.isLoading}])},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(i.isLoading?"mdi-loading":"mdi-pencil"),1)])),_:1},8,["onClick","class"])])])):(0,s.kq)("",!0),(0,s._)("td",QH,[(0,s.Wm)(d,{order:r.order},null,8,["order"])])],2)),(0,s.Wm)(w,{type:"info",title:"Add Note",onResolved:o.handleResolved,loading:i.isLoading,visible:i.showPopup},{default:(0,s.w5)((()=>[(0,s._)("div",GH,[JH,(0,s.Wm)(mp.z,{modelValue:i.newNote,"onUpdate:modelValue":e[0]||(e[0]=t=>i.newNote=t),variant:"outlined",class:"rounded-md",color:"primary-color"},null,8,["modelValue"])])])),_:1},8,["onResolved","loading","visible"])],64)}const tY={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},eY=["onClick"],rY={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},aY=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter note",-1),sY={class:"tw-flex tw-justify-end tw-mt-2"};function iY(t,e,r,i,o,l){const n=(0,s.up)("popup-full"),d=(0,s.up)("OrderReporting"),w=(0,s.up)("OrderAnnuler");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:r.confirmation,class:"tw-relative tw-min-w-[100px]"},[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>l.toggle&&l.toggle(...t)),class:(0,Q.C_)([[l.selected.text,l.selected.bg,l.selected.ring],"focus:tw-ring-4 tw-min-w-[100px] focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between"]),type:"button"},[(0,s.Uk)((0,Q.zw)(l.selected.name)+" ",1),o.isLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(X.t,{key:0,class:"tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(o.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),o.isLoading?((0,s.wg)(),(0,s.j4)(X.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)],2),(0,s._)("div",{class:(0,Q.C_)([{"tw-hidden":!o.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,s._)("ul",tY,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.options,(t=>((0,s.wg)(),(0,s.iD)("li",{onClick:e=>l.handleChange(t),key:t.id},[(0,s._)("a",{class:(0,Q.C_)(["tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100",[t.text,t.bg]])},(0,Q.zw)(t.name),3)],8,eY)))),128))])],2),(0,s.Wm)(n,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>o.showPopup=!1),visible:o.showPopup},{default:(0,s.w5)((()=>[(0,s._)("div",rY,[aY,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.note=t),cols:"30",rows:"3",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n\r\n        ",512),[[a.nr,o.note]]),(0,s._)("div",sY,[(0,s.Wm)(G.T,{class:"tw-capitalize",loading:o.isLoading,variant:"flat",color:"green",onClick:l.handleClick},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"]),(0,s.Wm)(d,{order:r.order,visible:o.showPopupReporter,onCancel:e[3]||(e[3]=t=>o.showPopupReporter=!1)},null,8,["order","visible"]),(0,s.Wm)(w,{order:r.order,visible:o.showPopupAnnuler,onCancel:e[4]||(e[4]=t=>o.showPopupAnnuler=!1)},null,8,["order","visible"])])),[[Bt.L,l.close]])}const oY={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},lY=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),nY=(0,s._)("br",null,null,-1),dY=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),wY={class:"tw-flex tw-justify-end tw-mt-2"};function cY(t,e,r,i,o,l){const n=(0,s.up)("VueDatePicker"),d=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",{key:r.order.id},[(0,s.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>l.cancel()),visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",oY,[lY,(0,s.Wm)(n,{modelValue:o.date,"onUpdate:modelValue":e[0]||(e[0]=t=>o.date=t),format:l.format},null,8,["modelValue","format"]),nY,dY,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[a.nr,o.note]]),(0,s._)("div",wY,[(0,s.Wm)(G.T,{class:"tw-capitalize",loading:o.isLoading,variant:"flat",color:"green",onClick:l.handleConfirm},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var uY={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_agente_date=this.realDate,t.reported_agente_note=this.note,t.confirmation="reporter",this.isLoading=!0,Ir.agenteUpdateConfirmation(t.id,"reporter",t).then((e=>{console.log(e.data),this.$alert({type:"success",title:"Order reported successfully"}),this.$store.dispatch("order/update",{id:t.id,order:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},format(t){const e=t.getDate(),r=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,s=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();return this.realDate=`${i}-${s}-${r}`,`${r}/${s}/${i}`},cancel(){this.$emit("cancel")}},mounted(){}};const pY=(0,d.Z)(uY,[["render",cY]]);var mY=pY;const hY={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},gY=(0,s._)("br",null,null,-1),fY=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),vY={class:"tw-flex tw-justify-end tw-mt-2"};function yY(t,e,r,i,o,l){const n=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",{key:r.order.id},[(0,s.Wm)(n,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[1]||(e[1]=t=>l.cancel()),visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",hY,[gY,fY,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n          ",512),[[a.nr,o.note]]),(0,s._)("div",vY,[(0,s.Wm)(G.T,{class:"tw-capitalize",loading:o.isLoading,variant:"flat",color:"green",onClick:l.handleConfirm},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var xY={props:["visible","order"],data(){return{isLoading:!1,note:"",newOrder:null}},methods:{handleConfirm(){const t={...this.order};t.reported_agente_note=this.note,t.confirmation="annuler",this.isLoading=!0,Ir.agenteUpdateConfirmation(t.id,"annuler",t).then((e=>{console.log(e.data),this.$alert({type:"success",title:"Order annuler successfully"}),this.$store.dispatch("order/update",{id:t.id,order:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},cancel(){this.$emit("cancel")}},mounted(){}};const bY=(0,d.Z)(xY,[["render",yY]]);var _Y=bY,kY={props:["confirmation","id","order"],components:{OrderReporting:mY,OrderAnnuler:_Y},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",selectedId:0,allOptions:Pn,showPopupReporter:!1,showPopupAnnuler:!1}},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleResolved(t){t?(this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))):this.showPopup=!1},handleClick(){this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))},async handleChange(t){if(t.id===this.selectedId)return!1;["confirmer","reporter","annuler"].includes(t.value)?"reporter"===t.value?this.showPopupReporter=!0:"annuler"===t.value?this.showPopupAnnuler=!0:(this.nextOption=t.id,this.showPopup=!0):(this.selectedId=t.id,this.updateOrder()),this.close()},async updateOrder(){return this.isLoading=!0,Ir.agenteUpdateConfirmation(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmation(this.id,this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t)))},async updateOrderWithNote(){return this.isLoading=!0,Ir.agenteUpdateConfirmationWithNote(this.id,this.selected.value,this.note).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmationWithNote(this.id,this.selected.value,this.note),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateConfirmation(t,e){this.$store.dispatch("order/updateConfirmation",{id:t,confirmation:e}),this.$emit("update",e)},updateConfirmationWithNote(t,e,r){this.$store.dispatch("order/updateConfirmationWithNote",{id:t,confirmation:e,note:r}),this.$emit("update",e)}},mounted(){this.availableOptions.includes(this.confirmation)?this.selectedId=this.allOptions.find((t=>t.value==this.confirmation)).id:this.selectedId=0}};const CY=(0,d.Z)(kY,[["render",iY]]);var DY=CY;const SY={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700"},zY=["onClick"];function UY(t,e,r,a,i,o){return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:r.upsell,class:"tw-relative tw-w-[60px]"},[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>o.toggle&&o.toggle(...t)),class:(0,Q.C_)([[o.selected.text,o.selected.bg,o.selected.ring],"focus:tw-ring-4 focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center"]),type:"button"},[(0,s.Uk)((0,Q.zw)(o.selected.name)+" ",1),i.isLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(X.t,{key:0,class:"tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(i.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),i.isLoading?((0,s.wg)(),(0,s.j4)(X.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)],2),(0,s._)("div",{class:(0,Q.C_)([{"tw-hidden":!i.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,s._)("ul",SY,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.options,(t=>((0,s.wg)(),(0,s.iD)("li",{onClick:e=>o.handleChange(t),key:t.id},[(0,s._)("a",{class:(0,Q.C_)(["tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100",[t.text,t.bg]])},(0,Q.zw)(t.name),3)],8,zY)))),128))])],2)])),[[Bt.L,o.close]])}var LY={props:["upsell","id"],data(){return{isLoading:!1,isOpen:!1,selectedId:0,allOptions:$n}},computed:{options(){return this.allOptions},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(t.id==this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()},updateOrder(){Ir.agenteUpdateUpsell(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateUpsell(this.id,this.selected.value),this.$emit("update",this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t)))},updateUpsell(t,e){this.$store.dispatch("order/updateUpsell",{id:t,upsell:e})}},mounted(){switch(console.log(this.upsell),this.upsell){case"oui":console.log("found oui"),this.selectedId=1;break;case"non":console.log("found non"),this.selectedId=2;break;default:console.log("found nothing"),this.selectedId=0;break}}};const PY=(0,d.Z)(LY,[["render",UY]]);var AY=PY;const $Y={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},WY=["onClick"],qY={class:"tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100"},OY={key:1,class:"tw-relative tw-min-w-[100px] tw-flex tw-items-center"};function EY(t,e,r,a,i,o){return o.fetched?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:r.affectation,class:"tw-relative tw-min-w-[100px]"},[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>o.toggle&&o.toggle(...t)),class:"tw-whitespace-nowrap focus:tw-ring-4 tw-ring-neutral-200 tw-bg-neutral-600/10 tw-text-neutral-800 focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center",type:"button"},[(0,s.Uk)((0,Q.zw)(o.selected.firstname)+" "+(0,Q.zw)(o.selected.lastname)+" ",1),i.isLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(X.t,{key:0,class:"tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(i.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),i.isLoading?((0,s.wg)(),(0,s.j4)(X.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)]),(0,s._)("div",{class:(0,Q.C_)([{"tw-hidden":!i.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,s._)("ul",$Y,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.options,(t=>((0,s.wg)(),(0,s.iD)("li",{onClick:e=>o.handleChange(t),key:t.id},[(0,s._)("a",qY,(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),1)],8,WY)))),128))])],2)])),[[Bt.L,o.close]]):((0,s.wg)(),(0,s.iD)("div",OY,[(0,s.Wm)(X.t,{class:"tw-animate-spin tw-ml-1 tw-text-orange-500"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})]))}var TY={props:["affectation","id","order"],data(){return{isOpen:!1,isLoading:!1,selectedId:null}},computed:{options(){return[{id:null,firstname:"select",lastname:""},...this.deliveries]},selected(){const t=[...this.deliveries.map((t=>parseInt(t.id)))];return null!=this.selectedId&&t.includes(parseInt(this.selectedId))?this.options.filter((t=>t.id==this.selectedId))[0]:{id:null,firstname:"select",lastname:""}},users(){return this.$store.getters["user/users"]},allDeliveries(){return this.users.filter((t=>"delivery"==t.role_name))},fetched(){return this.$store.getters["user/fetched"]},deliveries(){return this.allDeliveries.filter((t=>t.delivery_products.some((t=>this.order.items.some((e=>e.product_id==t.product_id))))))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(this.old=this.affectation,t.id===this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()},updateOrder(){Ir.agenteUpdateAffectaion(this.id,this.selectedId).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateAffectation(this.id,this.selected.id),this.isLoading=!1)}),(t=>{this.$handleApiError(t),this.isLoading=!1,this.selectedId=this.old}))},updateAffectation(t,e){this.$store.dispatch("order/updateAffectation",{id:t,affectation:e})}},mounted(){this.selectedId=this.affectation,console.log("id: ",this.id," affecte: ",this.affectation)}};const VY=(0,d.Z)(TY,[["render",EY]]);var IY=VY;const FY={key:0},RY={key:2},jY={key:3};function NY(t,e,r,a,i,o){const l=(0,s.up)("UpdateDoubleOrder"),n=(0,s.up)("UpdateOrder");return r.order?((0,s.wg)(),(0,s.iD)("div",FY,[r.only.includes("whatsapp")?((0,s.wg)(),(0,s.j4)(G.T,{key:0,link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+r.order.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])):(0,s.kq)("",!0),r.only.includes("update")?((0,s.wg)(),(0,s.j4)(G.T,{key:1,onClick:e[0]||(e[0]=t=>i.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),r.double?((0,s.wg)(),(0,s.iD)("div",RY,[i.showUpdatePopup?((0,s.wg)(),(0,s.j4)(l,{key:0,onUpdateOrder:e[1]||(e[1]=e=>t.$emit("updateOrder",e)),visible:i.showUpdatePopup,"onUpdate:visible":e[2]||(e[2]=t=>i.showUpdatePopup=t),order:r.order},null,8,["visible","order"])):(0,s.kq)("",!0)])):((0,s.wg)(),(0,s.iD)("div",jY,[i.showUpdatePopup?((0,s.wg)(),(0,s.j4)(n,{key:0,visible:i.showUpdatePopup,"onUpdate:visible":e[3]||(e[3]=t=>i.showUpdatePopup=t),order:r.order},null,8,["visible","order"])):(0,s.kq)("",!0)]))])):(0,s.kq)("",!0)}const MY={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},HY={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[950px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},YY=(0,s._)("h1",{class:"tw-text-lg"},"Update Order",-1),ZY={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},KY={class:"md:tw-col-span-6 tw-col-span-12"},BY=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),QY={class:"md:tw-col-span-6 tw-col-span-12"},GY=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),JY={class:"md:tw-col-span-6 tw-col-span-12"},XY=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),tZ=["value"],eZ=["value"],rZ={class:"md:tw-col-span-6 tw-col-span-12"},aZ=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),sZ={class:"md:tw-col-span-12 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},iZ=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Confirmation",-1),oZ={class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},lZ={class:"tw-col-span-12"},nZ=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note:",-1),dZ={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},wZ={class:"tw-col-span-12 md:tw-col-span-4"},cZ=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Date:",-1),uZ={class:"tw-col-span-12 md:tw-col-span-8"},pZ=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Note:",-1),mZ={class:"md:tw-col-span-6 tw-col-span-12"},hZ=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Affectation",-1),gZ={class:"md:tw-col-span-6 tw-col-span-12"},fZ=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Upsell",-1),vZ=["value"],yZ=(0,s._)("p",{class:"tw-col-span-12 tw-mt-5 tw-mb-2"},"Order Items",-1),xZ={key:1,class:"tw-col-span-12 tw-rounded tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},bZ={key:2,class:"md:tw-col-span-12 tw-col-span-12"},_Z={class:"tw-max-w-full tw-overflow-auto"},kZ={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},CZ={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},DZ={class:"tw-mx-auto tw-w-[50px] tw-h-[35px] tw-shadow tw-shadow-gray-200 tw-rounded tw-overflow-hidden tw-cursor-pointer"},SZ=["src"],zZ={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},UZ=["onUpdate:modelValue"],LZ=(0,s._)("option",{value:0},"Select",-1),PZ=["value"],AZ={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},$Z=["disabled","onUpdate:modelValue"],WZ=(0,s._)("option",{value:0},"Select",-1),qZ=["value"],OZ={key:0},EZ={key:1},TZ={key:2},VZ={key:3},IZ=["value"],FZ={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},RZ={class:"md:tw-col-span-6 tw-col-span-12"},jZ=["onUpdate:modelValue"],NZ={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},MZ={key:0},HZ={key:1,class:"md:tw-col-span-6 tw-col-span-12"},YZ=["onUpdate:modelValue"],ZZ={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},KZ={class:"tw-w-full tw-col-span-12 tw-flex tw-justify-end tw-mt-3"},BZ=(0,s._)("span",{class:"!tw-text-sm !tw-capitalize"},"Add",-1),QZ={class:"md:tw-col-span-12 tw-col-span-12"},GZ={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},JZ=(0,s._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),XZ={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},tK=(0,s._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-mb-2 tw-whitespace-nowrap"},"Price: ",-1),eK={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},rK=(0,s._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),aK={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},sK=(0,s._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-whitespace-nowrap"},"Total Price: ",-1),iK={class:"tw-text-xl tw-text-green-500 tw-font-bold tw-px-2 tw-py-1 tw-rounded tw-bg-green-100"},oK={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},lK=(0,s._)("span",{class:"text-white"}," Cancel ",-1),nK=(0,s._)("span",{class:"text-white"}," Update ",-1);function dK(t,e,r,i,o,l){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("AddOrderConfirmation"),w=(0,s.up)("AddOrderAffectation"),c=(0,s.up)("ProductOffers"),u=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(u,{onCancel:e[12]||(e[12]=e=>t.$emit("update:visible",!1)),visible:r.visible},{default:(0,s.w5)((()=>[l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",MY,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",HY,[YY,(0,s._)("div",ZY,[(0,s._)("div",KY,[BY,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sale.fullname]])]),(0,s._)("div",QY,[GY,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>o.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sale.phone]])]),(0,s._)("div",JY,[XY,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[(0,s._)("option",{disabled:"",value:o.sale.city},(0,Q.zw)(o.sale.city),9,tZ),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,eZ)))),128))],512),[[a.bM,o.sale.city]])]),(0,s._)("div",rZ,[aZ,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>o.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sale.adresse]])]),(0,s._)("div",sZ,[iZ,(0,s.Wm)(d,{order:o.sale,id:o.sale.id,confirmation:o.sale.confirmation,"onUpdate:confirmation":e[4]||(e[4]=t=>o.sale.confirmation=t),onChange:l.handleConfirmationChange,onConfirmed:e[5]||(e[5]=t=>o.sale.note=t),onReported:l.handleReported},null,8,["order","id","confirmation","onChange","onReported"]),(0,s._)("div",oZ,[(0,s._)("div",lZ,[nZ,(0,s.wy)((0,s._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[6]||(e[6]=t=>o.sale.note=t)},null,512),[[a.nr,o.sale.note]])])]),"reporter"==o.sale.confirmation&&o.sale.reported_agente_date?((0,s.wg)(),(0,s.iD)("div",dZ,[(0,s._)("div",wZ,[cZ,(0,s._)("div",null,(0,Q.zw)(o.sale.reported_agente_date.split("T")[0]),1)]),(0,s._)("div",uZ,[pZ,(0,s.wy)((0,s._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[7]||(e[7]=t=>o.sale.reported_agente_note=t)},null,512),[[a.nr,o.sale.reported_agente_note]])])])):(0,s.kq)("",!0)]),(0,s._)("div",mZ,[hZ,(0,s.Wm)(w,{"product-ids":l.product_ids,items:l.formatedItems,order:o.sale,confirmation:o.sale.confirmation,affectation:o.sale.affectation,"onUpdate:affectation":e[8]||(e[8]=t=>o.sale.affectation=t),id:o.sale.id},null,8,["product-ids","items","order","confirmation","affectation","id"])]),(0,s._)("div",gZ,[fZ,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>o.sale.upsell=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.upsells,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,key:t.id},(0,Q.zw)(t.name),9,vZ)))),128))],512),[[a.bM,o.sale.upsell]])]),(0,s.kq)("",!0),yZ,o.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",xZ," No Order items ")),o.items.length?((0,s.wg)(),(0,s.iD)("div",bZ,[(0,s._)("div",_Z,[((0,s.wg)(),(0,s.iD)("table",{key:o.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,s._)("thead",kZ,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",CZ,(0,Q.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.items,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:t,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[((0,s.wg)(),(0,s.iD)("th",{scope:"row",class:"tw-px-2 tw-py-2",key:t.product.id},[(0,s._)("div",DZ,[l.product_images[e]?((0,s.wg)(),(0,s.iD)("img",{key:0,class:"tw-w-full tw-h-full tw-object-contain",src:o.serverUrl+"storage/"+l.product_images[e]},null,8,SZ)):(0,s.kq)("",!0)])])),(0,s._)("th",zZ,[(0,s._)("div",null,[(0,s._)("div",null,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e=>t.product.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[LZ,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.filtredProducts,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,PZ)))),128))],8,UZ),[[a.bM,t.product.id]])])])]),(0,s._)("th",AZ,[(0,s._)("div",null,[0!=t.product.id?(0,s.wy)(((0,s.wg)(),(0,s.iD)("select",{key:0,disabled:1==l.getVariations(t.product)?.variations?.length,"onUpdate:modelValue":e=>t.product_variation.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[WZ,l.getVariations(t.product)?.variations?.length>1?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(l.getVariations(t.product)?.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},[t.size||t.color?t.size&&"-"!=t.size&&t.color&&"-"!=t.color?((0,s.wg)(),(0,s.iD)("p",EZ,(0,Q.zw)(t.size)+" / "+(0,Q.zw)(t.color),1)):t.size&&"-"!=t.size?((0,s.wg)(),(0,s.iD)("p",TZ,(0,Q.zw)(t.size),1)):t.color?((0,s.wg)(),(0,s.iD)("p",VZ,(0,Q.zw)(t.color),1)):(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",OZ,"-"))],8,qZ)))),128)):((0,s.wg)(),(0,s.iD)("option",{key:1,value:l.getVariations(t.product)?.variations[0]?.id}," Default ",8,IZ))],8,$Z)),[[a.bM,t.product_variation.id]]):(0,s.kq)("",!0)])]),(0,s._)("th",FZ,[(0,s._)("div",RZ,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,jZ),[[a.nr,t.quantity]])])]),(0,s._)("th",NZ,[(0,s._)("div",null,[null==t.price?((0,s.wg)(),(0,s.iD)("div",MZ," - ")):((0,s.wg)(),(0,s.iD)("div",HZ,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e=>t.price=e,placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,YZ),[[a.nr,t.price]])]))])]),(0,s._)("th",ZZ,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:e=>l.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])]))])])):(0,s.kq)("",!0),(0,s._)("div",KZ,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:l.addNewRow,class:"mr-2 !tw-px-1 !tw-py-1 !tw-pr-2 tw-flex tw-items-center tw-gap-2","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1}),BZ])),_:1},8,["onClick"])])]),(0,s._)("div",QZ,[(0,s.Wm)(c,{"product-ids":l.product_ids},null,8,["product-ids"])]),(0,s._)("div",GZ,[JZ,(0,s._)("div",XZ,[tK,(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e[11]||(e[11]=t=>o.sale.price=t),class:"tw-py-1 tw-max-w-[100px] tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sale.price]])])]),(0,s._)("div",eK,[rK,(0,s._)("div",aK,[sK,(0,s._)("div",iK,(0,Q.zw)(o.currency)+" "+(0,Q.zw)(l.total_price),1)])])]),(0,s._)("div",oK,[(0,s.Wm)(G.T,{onClick:l.handleCancel,color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[lK])),_:1},8,["onClick"]),(0,s.Wm)(G.T,{loading:o.isLoading,onClick:l.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[nK])),_:1},8,["loading","onClick"])])])):(0,s.kq)("",!0)])),_:1},8,["visible"])])}const wK={class:"tw-relative"},cK=["disabled"],uK=["value"],pK={key:1,class:"tw-relative tw-min-w-[100px] tw-flex tw-items-center"};function mK(t,e,r,i,o,l){return o.fetched?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:r.affectation,class:"tw-relative tw-min-w-[100px]"},[(0,s._)("div",null,[(0,s._)("div",wK,[(0,s.wy)((0,s._)("select",{disabled:"confirmer"!=r.confirmation,"onUpdate:modelValue":e[0]||(e[0]=t=>l.affectationValue=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.options,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.id},(0,Q.zw)(t.firstname+" "+t.lastname),9,uK)))),128))],8,cK),[[a.bM,l.affectationValue]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])),[[Bt.L,l.close]]):((0,s.wg)(),(0,s.iD)("div",pK,[(0,s.Wm)(X.t,{class:"tw-animate-spin tw-ml-1 tw-text-orange-500"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})]))}var hK={props:["affectation","id","order","confirmation","items","productIds"],data(){return{fetched:!1,isOpen:!1,isLoading:!1,selectedId:null}},computed:{options(){return[{id:null,firstname:"select",lastname:""},...this.deliveries]},affectationValue:{get(){return this.affectation},set(t){this.$emit("update:affectation",t)}},selected(){const t=[...this.deliveries.map((t=>parseInt(t.id)))];return null!=this.selectedId&&t.includes(parseInt(this.selectedId))?this.options.filter((t=>t.id==this.selectedId))[0]:{id:null,firstname:"select",lastname:""}},users(){return this.$store.getters["user/users"]},allDeliveries(){return this.users.filter((t=>"delivery"==t.role_name))},deliveries(){return this.allDeliveries.filter((t=>t.delivery_products.some((t=>this.productIds.includes(t.product_id)))))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(t.id===this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()},getUsers(){this.fetched=!1,K.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),this.$store.dispatch("user/setFetched",!0),this.fetched=!0}})).catch(this.$handleApiError)}},mounted(){this.selectedId=this.affectation,this.getUsers()}};const gK=(0,d.Z)(hK,[["render",mK]]);var fK=gK,vK={components:{AddOrderConfirmation:Cc,AddOrderAffectation:fK,ProductOffers:Kc},props:["visible","order"],data(){return{upsells:$n,serverUrl:F,currency:R,isLoading:!1,isAddItem:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],reported_date:null,price:0,sale:{fullname:"",phone:"",city:"",adresse:"",price:0,upsell:null,confirmation:null,counts_from_warehouse:!1}}},watch:{product_id(){this.selectedProduct&&this.selectedProduct.variations.length>0?this.product_variation_id=this.selectedProduct.variations[0].id:this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0},"sale.confirmation":{deep:!0,handler(t){"confirmer"!=t&&(this.sale.affectation=null,this.sale.delivery=null)}},product_ids:{deep:!0,handler(t,e){this.items.map(((r,a)=>{if(0==r.product.id)return r;const s=this.getVariations(r.product)?.variations;return e[a]==t[r]||s.some((t=>t.id==r.product_variation.id))||(r.product_variation={id:0},r.product_variation_id=0),1==s?.length&&(r.product_variation=s[0],r.product_variation_id=s[0].id),r}))}}},computed:{products(){return this.$store.getters["product/products"]},product_images(){return this.items.map((t=>0==t.product.id?null:this.products.find((e=>e.id==t.product.id))?.image))},product_ids(){return this.items.map((t=>t.product.id))},isLoaded(){return this.$store.getters["product/fetched"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,r)=>e.indexOf(t.id)===r))},filtredProducts(){return this.products},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},selectedProduct(){return this.products.find((t=>t.id==this.product_id))},total_price:{get(){const t=this.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(this.sale.price?this.sale.price:0)+parseFloat(t)}},isItemsValid(){if(0==this.items.length)return!1;const t=this.items.some((t=>0==t.product.id||0==t.product_variation_id||0==t.quantity));return!t},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city},formatedItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const r=e.variations.find((e=>e.id==t.product_variation.id));return r?{...t,product:e,product_id:e.id,product_variation:r,product_variation_id:r.id,product_ref:e.ref}:t}));return t}},methods:{deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},handleConfirmationChange(){"confirmer"!=this.sale.confirmation&&(this.sale.affectation=null)},addNewRow(){const t={id:this.item_id,product_id:0,product_ref:null,product:{id:0},product_variation:{id:0},product_variation_id:0,order_id:this.order.id,quantity:0,price:0};this.items.push(t)},getVariations(t){return this.products.find((e=>e.id==t.id))},formatItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const r=e.variations.find((e=>e.id==t.product_variation.id));return r?{...t,product:e,product_id:e.id,product_variation:r,product_variation_id:r.id,product_ref:e.ref}:t}));return this.items=t,t},addItem(){if([this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),r={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:this.price};this.items.push(r),this.product_id=0,this.product_variation_id=0,this.price=0,this.item_id+=1},update(){if(this.formatItems(),!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;if("annuler"==this.sale.confirmation&&!this.sale.note)return this.$alert({type:"warning",title:"Add Cancellation note."}),!1;if(!this.isItemsValid)return this.$alert({type:"warning",title:"Order Items are not valid"}),!1;this.isLoading=!0;const t={id:this.sale.id,fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,upsell:this.sale.upsell,counts_from_warehouse:this.sale.counts_from_warehouse,orderItems:this.items,confirmation:this.sale.confirmation,note:this.sale.note,affectation:this.sale.affectation,reported_agente_note:this.sale.reported_agente_note,reported_agente_date:this.sale.reported_agente_date};"confirmer"!=t.confirmation&&(t.affectation=null,t.delivery=null),this.isLoading=!0,Ir.update(t.id,t).then((e=>{"SUCCESS"==e.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"Order updated"}),this.$store.dispatch("order/update",{id:t.id,order:e.data.data.sale}),this.$emit("update:visible",!1),this.$emit("updateOrder",e.data.data.sale))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},handleCancel(){this.sale={...this.order},this.items=[...this.order.items],this.$emit("update:visible",!1)},handleReported(t){this.sale.reported_agente_note=t.reported_agente_note,this.sale.reported_agente_date=t.reported_agente_date},checkVariant(t,e){const r=this.products.find((e=>e.id==t));if(!r)return{exists:!1};let a=r.variations.find((t=>t.id==e));return a||(a=r.variations.length>0?r.variations[0]:null),{exists:!0,variation:a}},getProducts(){return ea.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.sale={...this.order},this.items=[...this.order.items]}};const yK=(0,d.Z)(vK,[["render",dK]]);var xK=yK;const bK={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},_K={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[880px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},kK=(0,s._)("h1",{class:"tw-text-lg"},"Update Order",-1),CK={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},DK={class:"md:tw-col-span-6 tw-col-span-12"},SK=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),zK={class:"md:tw-col-span-6 tw-col-span-12"},UK=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),LK={class:"md:tw-col-span-6 tw-col-span-12"},PK=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),AK=["value"],$K=["value"],WK={class:"md:tw-col-span-6 tw-col-span-12"},qK=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),OK={class:"md:tw-col-span-12 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},EK=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Confirmation",-1),TK={class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},VK={class:"tw-col-span-12"},IK=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note:",-1),FK={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},RK={class:"tw-col-span-12 md:tw-col-span-4"},jK=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Date:",-1),NK={class:"tw-col-span-12 md:tw-col-span-8"},MK=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Note:",-1),HK={class:"md:tw-col-span-6 tw-col-span-12"},YK=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Affectation",-1),ZK={class:"md:tw-col-span-6 tw-col-span-12"},KK=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Upsell",-1),BK=["value"],QK=(0,s._)("p",{class:"tw-col-span-12 tw-mt-5 tw-mb-2"},"Order Items",-1),GK={key:5,class:"tw-col-span-12 tw-rounded tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},JK={key:6,class:"md:tw-col-span-12 tw-col-span-12"},XK={class:"tw-max-w-full tw-overflow-auto"},tB={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},eB={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},rB={class:"tw-mx-auto tw-w-[50px] tw-h-[35px] tw-shadow tw-shadow-gray-200 tw-rounded tw-overflow-hidden tw-cursor-pointer"},aB=["src"],sB={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},iB=["onUpdate:modelValue"],oB=(0,s._)("option",{value:0},"Select",-1),lB=["value"],nB={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},dB=["disabled","onUpdate:modelValue"],wB=(0,s._)("option",{value:0},"Select",-1),cB=["value"],uB={key:0},pB={key:1},mB={key:2},hB={key:3},gB=["value"],fB={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},vB={class:"md:tw-col-span-6 tw-col-span-12"},yB=["onUpdate:modelValue"],xB={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},bB={key:0},_B={key:1,class:"md:tw-col-span-6 tw-col-span-12"},kB=["onUpdate:modelValue"],CB={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},DB={class:"tw-w-full tw-col-span-12 tw-flex tw-justify-end tw-mt-3"},SB=(0,s._)("span",{class:"!tw-text-sm !tw-capitalize"},"Add",-1),zB={class:"md:tw-col-span-12 tw-col-span-12"},UB={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},LB=(0,s._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),PB={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},AB=(0,s._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-mb-2 tw-whitespace-nowrap"},"Price: ",-1),$B={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},WB=(0,s._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),qB={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},OB=(0,s._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-whitespace-nowrap"},"Total Price: ",-1),EB={class:"tw-text-xl tw-text-green-500 tw-font-bold tw-px-2 tw-py-1 tw-rounded tw-bg-green-100"},TB={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},VB=(0,s._)("span",{class:"text-white"}," Cancel ",-1),IB=(0,s._)("span",{class:"text-white"}," Update ",-1);function FB(t,e,r,i,o,l){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("AddOrderConfirmation"),w=(0,s.up)("AddOrderAffectation"),c=(0,s.up)("ProductOffers"),u=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(u,{onCancel:e[16]||(e[16]=e=>t.$emit("update:visible",!1)),visible:r.visible},{default:(0,s.w5)((()=>[l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",bK,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",_K,[kK,(0,s._)("div",CK,[(0,s._)("div",DK,[SK,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sale.fullname]])]),(0,s._)("div",zK,[UK,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>o.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sale.phone]])]),(0,s._)("div",LK,[PK,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[(0,s._)("option",{disabled:"",value:o.sale.city},(0,Q.zw)(o.sale.city),9,AK),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,$K)))),128))],512),[[a.bM,o.sale.city]])]),(0,s._)("div",WK,[qK,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>o.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sale.adresse]])]),(0,s._)("div",OK,[EK,(0,s.Wm)(d,{order:o.sale,id:o.sale.id,confirmation:o.sale.confirmation,"onUpdate:confirmation":e[4]||(e[4]=t=>o.sale.confirmation=t),onConfirmed:e[5]||(e[5]=t=>o.sale.note=t),onReported:l.handleReported,onChange:l.handleConfirmationChange},null,8,["order","id","confirmation","onReported","onChange"]),(0,s._)("div",TK,[(0,s._)("div",VK,[IK,(0,s.wy)((0,s._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[6]||(e[6]=t=>o.sale.note=t)},null,512),[[a.nr,o.sale.note]])])]),"reporter"==o.sale.confirmation&&o.sale.reported_agente_date?((0,s.wg)(),(0,s.iD)("div",FK,[(0,s._)("div",RK,[jK,(0,s._)("div",null,(0,Q.zw)(o.sale.reported_agente_date.split("T")[0]),1)]),(0,s._)("div",NK,[MK,(0,s.wy)((0,s._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[7]||(e[7]=t=>o.sale.reported_agente_note=t)},null,512),[[a.nr,o.sale.reported_agente_note]])])])):(0,s.kq)("",!0)]),(0,s._)("div",HK,[YK,(0,s.Wm)(w,{"product-ids":l.product_ids,items:o.items,order:o.sale,confirmation:o.sale.confirmation,affectation:o.sale.affectation,"onUpdate:affectation":e[8]||(e[8]=t=>o.sale.affectation=t),id:o.sale.id},null,8,["product-ids","items","order","confirmation","affectation","id"])]),(0,s._)("div",ZK,[KK,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>o.sale.upsell=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.upsells,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,key:t.id},(0,Q.zw)(t.name),9,BK)))),128))],512),[[a.bM,o.sale.upsell]])]),(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s.kq)("",!0),QK,o.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",GK," No Order items ")),o.items.length?((0,s.wg)(),(0,s.iD)("div",JK,[(0,s._)("div",XK,[((0,s.wg)(),(0,s.iD)("table",{key:o.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,s._)("thead",tB,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",eB,(0,Q.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.items,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:t,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[((0,s.wg)(),(0,s.iD)("th",{scope:"row",class:"tw-px-2 tw-py-2",key:t.product.id},[(0,s._)("div",rB,[l.product_images[e]?((0,s.wg)(),(0,s.iD)("img",{key:0,class:"tw-w-full tw-h-full tw-object-contain",src:o.serverUrl+"storage/"+l.product_images[e]},null,8,aB)):(0,s.kq)("",!0)])])),(0,s._)("th",sB,[(0,s._)("div",null,[(0,s._)("div",null,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e=>t.product.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[oB,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.filtredProducts,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,lB)))),128))],8,iB),[[a.bM,t.product.id]])])])]),(0,s._)("th",nB,[(0,s._)("div",null,[0!=t.product.id?(0,s.wy)(((0,s.wg)(),(0,s.iD)("select",{key:0,disabled:1==l.getVariations(t.product)?.variations?.length,"onUpdate:modelValue":e=>t.product_variation.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[wB,l.getVariations(t.product)?.variations?.length>1?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(l.getVariations(t.product)?.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},[t.size||t.color?t.size&&"-"!=t.size&&t.color&&"-"!=t.color?((0,s.wg)(),(0,s.iD)("p",pB,(0,Q.zw)(t.size)+" / "+(0,Q.zw)(t.color),1)):t.size&&"-"!=t.size?((0,s.wg)(),(0,s.iD)("p",mB,(0,Q.zw)(t.size),1)):t.color?((0,s.wg)(),(0,s.iD)("p",hB,(0,Q.zw)(t.color),1)):(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",uB,"-"))],8,cB)))),128)):((0,s.wg)(),(0,s.iD)("option",{key:1,value:l.getVariations(t.product)?.variations[0]?.id}," Default ",8,gB))],8,dB)),[[a.bM,t.product_variation.id]]):(0,s.kq)("",!0)])]),(0,s._)("th",fB,[(0,s._)("div",vB,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,yB),[[a.nr,t.quantity]])])]),(0,s._)("th",xB,[(0,s._)("div",null,[null==t.price?((0,s.wg)(),(0,s.iD)("div",bB," - ")):((0,s.wg)(),(0,s.iD)("div",_B,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e=>t.price=e,placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,kB),[[a.nr,t.price]])]))])]),(0,s._)("th",CB,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:e=>l.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])]))])])):(0,s.kq)("",!0),(0,s._)("div",DB,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:l.addNewRow,class:"mr-2 !tw-px-1 !tw-py-1 !tw-pr-2 tw-flex tw-items-center tw-gap-2","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1}),SB])),_:1},8,["onClick"])])]),(0,s._)("div",zB,[(0,s.Wm)(c,{"product-ids":l.product_ids},null,8,["product-ids"])]),(0,s._)("div",UB,[LB,(0,s._)("div",PB,[AB,(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e[15]||(e[15]=t=>o.sale.price=t),class:"tw-py-1 tw-max-w-[100px] tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sale.price]])])]),(0,s._)("div",$B,[WB,(0,s._)("div",qB,[OB,(0,s._)("div",EB,(0,Q.zw)(o.currency)+" "+(0,Q.zw)(l.total_price),1)])])]),(0,s._)("div",TB,[(0,s.Wm)(G.T,{onClick:l.handleCancel,color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[VB])),_:1},8,["onClick"]),(0,s.Wm)(G.T,{loading:o.isLoading,onClick:l.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[IB])),_:1},8,["loading","onClick"])])])):(0,s.kq)("",!0)])),_:1},8,["visible"])])}var RB={components:{AddOrderConfirmation:Cc,AddOrderAffectation:fK,ProductOffers:Ih},props:["visible","order"],data(){return{upsells:$n,serverUrl:F,currency:R,isLoading:!1,isAddItem:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],reported_date:null,price:0,sale:{fullname:"",phone:"",city:"",adresse:"",price:0,upsell:null,confirmation:null,counts_from_warehouse:!1}}},watch:{product_id(){this.selectedProduct&&this.selectedProduct.variations.length>0?this.product_variation_id=this.selectedProduct.variations[0].id:this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0},"sale.confirmation":{deep:!0,handler(t){"confirmer"!=t&&(this.sale.affectation=null,this.sale.delivery=null)}},product_ids:{deep:!0,handler(t,e){this.items.map(((r,a)=>{if(0==r.product.id)return r;const s=this.getVariations(r.product)?.variations;return e[a]==t[r]||s.some((t=>t.id==r.product_variation.id))||(r.product_variation={id:0},r.product_variation_id=0),1==s?.length&&(r.product_variation=s[0],r.product_variation_id=s[0].id),r}))}}},computed:{products(){return this.$store.getters["product/products"]},product_images(){return this.items.map((t=>0==t.product.id?null:this.products.find((e=>e.id==t.product.id))?.image))},product_ids(){return this.items.map((t=>t.product.id))},isLoaded(){return this.$store.getters["product/fetched"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,r)=>e.indexOf(t.id)===r))},filtredProducts(){return this.products},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},selectedProduct(){return this.products.find((t=>t.id==this.product_id))},total_price:{get(){const t=this.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(this.sale.price?this.sale.price:0)+parseFloat(t)}},isItemsValid(){if(0==this.items.length)return!1;const t=this.items.some((t=>0==t.product.id||0==t.product_variation_id||0==t.quantity));return!t},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city},formatedItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const r=e.variations.find((e=>e.id==t.product_variation.id));return r?{...t,product:e,product_id:e.id,product_variation:r,product_variation_id:r.id,product_ref:e.ref}:t}));return t}},methods:{deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},handleConfirmationChange(){"confirmer"!=this.sale.confirmation&&(this.sale.affectation=null)},addNewRow(){const t={id:this.item_id,product_id:0,product_ref:null,product:{id:0},product_variation:{id:0},product_variation_id:0,order_id:this.order.id,quantity:0,price:0};this.items.push(t)},getVariations(t){return this.products.find((e=>e.id==t.id))},formatItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const r=e.variations.find((e=>e.id==t.product_variation.id));return r?{...t,product:e,product_id:e.id,product_variation:r,product_variation_id:r.id,product_ref:e.ref}:t}));return this.items=t,t},addItem(){if([this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),r={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:this.price};this.items.push(r),this.product_id=0,this.product_variation_id=0,this.price=0,this.item_id+=1},update(){if(this.formatItems(),!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;if("annuler"==this.sale.confirmation&&!this.sale.note)return this.$alert({type:"warning",title:"Add Cancellation note."}),!1;if(!this.isItemsValid)return this.$alert({type:"warning",title:"Order Items are not valid"}),!1;const t={id:this.sale.id,fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,upsell:this.sale.upsell,counts_from_warehouse:this.sale.counts_from_warehouse,orderItems:this.items,confirmation:this.sale.confirmation,note:this.sale.note,affectation:this.sale.affectation,reported_agente_note:this.sale.reported_agente_note,reported_agente_date:this.sale.reported_agente_date};"confirmer"!=t.confirmation&&(t.affectation=null,t.delivery=null),this.isLoading=!0,Ir.update(t.id,t).then((t=>{"SUCCESS"==t.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"Order updated"}),this.$emit("update:visible",!1),this.$emit("updateOrder",t.data.data.sale))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},handleCancel(){this.sale={...this.order},this.items=[...this.order.items],this.$emit("update:visible",!1)},handleReported(t){this.sale.reported_agente_note=t.reported_agente_note,this.sale.reported_agente_date=t.reported_agente_date},getProducts(){return ea.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.sale={...this.order},this.items=[...this.order.items]}};const jB=(0,d.Z)(RB,[["render",FB]]);var NB=jB,MB={emits:["updateOrder"],components:{UpdateOrder:xK,UpdateDoubleOrder:NB},props:{order:{required:!0},only:{required:!1,default:["update","whatsapp"]},double:{required:!1,default:!1}},name:"orderActions",data(){return{showPopup:!1,showUpdatePopup:!1,isLoading:!1,newOrder:null}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{},mounted(){}};const HB=(0,d.Z)(MB,[["render",NY]]);var YB=HB,ZB={props:["order","showNote"],components:{OrderConfirmation:DY,OrderUpsell:AY,OrderAffectation:IY,OrderActions:YB},data(){return{showPopup:!1,isLoading:!1,newNote:"",newOrder:null,todayDate:null}},computed:{id(){return this.order.id},fullname(){return this.order.fullname},product_name(){return this.order.product_name},agente_id(){return this.order.agente_id},upsell(){return this.order.upsell},phone(){return this.order.phone},city(){return this.order.city},adresse(){return this.order.adresse},quantity(){return this.order.quantity},price(){return this.order.price},confirmation(){return this.order.confirmation},affectation(){return this.order.affectation},delivery(){return this.order.delivery},note(){return this.order.note},created_at(){return this.order?.created_at}},methods:{getPrice(t){return Mi(t)},handleClick(){this.showPopup=!0,this.newNote=this.note},handleResolved(t){t?(this.showPopup=!1,this.isLoading=!0,Ir.agenteUpdateNote(this.id,this.newNote).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.$store.dispatch("order/updateNote",{note:this.newNote,id:this.id}))}),this.$handleApiError).finally((()=>this.isLoading=!1))):this.showPopup=!1},isReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date?.split("T")[0]==this.todayDate}},mounted(){this.newOrder=this.order;const t=new Date,e=t.getDate(),r=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,s=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();this.todayDate=`${i}-${s}-${r}`}};const KB=(0,d.Z)(ZB,[["render",XH]]);var BB=KB,QB={props:["orders","note"],data(){return{allowedLimit:[5,10,20,50,100,200,500],currentPage:1,paginationLimit:50,todayDate:null,columnsNote:["id","date","client","product","confirmation","affectation","price","city","note","actions"],columnsNormal:["id","date","client","product","confirmation","affectation","price","city","actions"]}},components:{OrderRow:BB},computed:{columns(){return this.note?this.columnsNote:this.columnsNormal},deliveries(){return this.$store.getters["user/deliveries"]},prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.orders.length/this.paginationLimit)},items(){const t=[...this.reportedForToday,...this.orders.filter((t=>!this.isReportedToday(t)))];return t.slice(this.prevRange,this.nextRange)},reportedForToday(){return this.orders.filter(this.isReportedToday)}},methods:{getDeliveries(){K.deliveries().then((t=>{this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)},isReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date?.split("T")[0]==this.todayDate}},mounted(){0==this.deliveries.length&&this.getDeliveries();const t=new Date,e=t.getDate(),r=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,s=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();this.todayDate=`${i}-${s}-${r}`,console.log(this.reportedForToday)}};const GB=(0,d.Z)(QB,[["render",SH]]);var JB=GB;const XB={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},tQ={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[950px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},eQ=(0,s._)("h1",{class:"tw-text-lg"},"Update Order",-1),rQ={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},aQ={class:"md:tw-col-span-6 tw-col-span-12"},sQ=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),iQ={class:"md:tw-col-span-6 tw-col-span-12"},oQ=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),lQ={class:"md:tw-col-span-6 tw-col-span-12"},nQ=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),dQ=["value"],wQ=["value"],cQ={class:"md:tw-col-span-6 tw-col-span-12"},uQ=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),pQ={class:"md:tw-col-span-12 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},mQ=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Confirmation",-1),hQ={class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},gQ={class:"tw-col-span-12"},fQ=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note:",-1),vQ={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},yQ={class:"tw-col-span-12 md:tw-col-span-4"},xQ=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Date:",-1),bQ={class:"tw-col-span-12 md:tw-col-span-8"},_Q=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Note:",-1),kQ={class:"md:tw-col-span-6 tw-col-span-12"},CQ=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Affectation",-1),DQ={class:"md:tw-col-span-6 tw-col-span-12"},SQ=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Upsell",-1),zQ=["value"],UQ={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-4"},LQ={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},PQ={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit -tw-rotate-90 tw-scale-75"},AQ=(0,s._)("div",{class:"tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),$Q={class:"tw-flex tw-flex-col tw-justify-center"},WQ=(0,s._)("p",{class:"tw-col-span-12 tw-mt-5 tw-mb-2"},"Order Items",-1),qQ={key:1,class:"tw-col-span-12 tw-rounded tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},OQ={key:2,class:"md:tw-col-span-12 tw-col-span-12"},EQ={class:"tw-max-w-full tw-overflow-auto"},TQ={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},VQ={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},IQ={class:"tw-mx-auto tw-w-[50px] tw-h-[35px] tw-shadow tw-shadow-gray-200 tw-rounded tw-overflow-hidden tw-cursor-pointer"},FQ=["src"],RQ={scope:"row",class:"tw-pr-6 tw-py-2 tw-font-medium tw-text-gray-900"},jQ=["onUpdate:modelValue"],NQ=(0,s._)("option",{value:0},"Select",-1),MQ=["value"],HQ={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},YQ=["disabled","onUpdate:modelValue"],ZQ=(0,s._)("option",{value:0},"Select",-1),KQ=["value"],BQ={key:0},QQ={key:1},GQ={key:2},JQ={key:3},XQ=["value"],tG={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},eG={class:"md:tw-col-span-6 tw-col-span-12"},rG=["onUpdate:modelValue"],aG={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},sG={key:0},iG={key:1,class:"md:tw-col-span-6 tw-col-span-12"},oG=["onUpdate:modelValue"],lG={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},nG={class:"tw-w-full tw-col-span-12 tw-flex tw-justify-end tw-mt-3"},dG=(0,s._)("span",{class:"!tw-text-sm !tw-capitalize"},"Add",-1),wG={class:"md:tw-col-span-12 tw-col-span-12"},cG={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},uG=(0,s._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),pG={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},mG=(0,s._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-mb-2 tw-whitespace-nowrap"},"Price: ",-1),hG={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},gG=(0,s._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),fG={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},vG=(0,s._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-whitespace-nowrap"},"Total Price: ",-1),yG={class:"tw-text-xl tw-text-green-500 tw-font-bold tw-px-2 tw-py-1 tw-rounded tw-bg-green-100"},xG={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},bG=(0,s._)("span",{class:"text-white"}," Cancel ",-1),_G=(0,s._)("span",{class:"text-white"}," Create ",-1);function kG(t,e,r,i,o,l){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("AddOrderConfirmation"),w=(0,s.up)("AddOrderAffectation"),c=(0,s.up)("ProductOffers"),u=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(u,{onCancel:e[14]||(e[14]=e=>t.$emit("update:visible",!1)),visible:r.visible},{default:(0,s.w5)((()=>[l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",XB,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",tQ,[eQ,(0,s._)("div",rQ,[(0,s._)("div",aQ,[sQ,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sale.fullname]])]),(0,s._)("div",iQ,[oQ,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>o.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sale.phone]])]),(0,s._)("div",lQ,[nQ,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[(0,s._)("option",{disabled:"",value:o.sale.city},(0,Q.zw)(o.sale.city),9,dQ),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,wQ)))),128))],512),[[a.bM,o.sale.city]])]),(0,s._)("div",cQ,[uQ,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>o.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sale.adresse]])]),(0,s._)("div",pQ,[mQ,(0,s.Wm)(d,{order:o.sale,id:o.sale.id,confirmation:o.sale.confirmation,"onUpdate:confirmation":e[4]||(e[4]=t=>o.sale.confirmation=t),onConfirmed:e[5]||(e[5]=t=>o.sale.note=t),onReported:l.handleReported,onChange:l.handleConfirmationChange},null,8,["order","id","confirmation","onReported","onChange"]),(0,s._)("div",hQ,[(0,s._)("div",gQ,[fQ,(0,s.wy)((0,s._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[6]||(e[6]=t=>o.sale.note=t)},null,512),[[a.nr,o.sale.note]])])]),"reporter"==o.sale.confirmation&&o.sale.reported_agente_date?((0,s.wg)(),(0,s.iD)("div",vQ,[(0,s._)("div",yQ,[xQ,(0,s._)("div",null,(0,Q.zw)(o.sale.reported_agente_date.split("T")[0]),1)]),(0,s._)("div",bQ,[_Q,(0,s.wy)((0,s._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[7]||(e[7]=t=>o.sale.reported_agente_note=t)},null,512),[[a.nr,o.sale.reported_agente_note]])])])):(0,s.kq)("",!0)]),(0,s._)("div",kQ,[CQ,(0,s.Wm)(w,{"product-ids":l.product_ids,items:o.items,"onUpdate:items":e[8]||(e[8]=t=>o.items=t),order:o.sale,confirmation:o.sale.confirmation,affectation:o.sale.affectation,"onUpdate:affectation":e[9]||(e[9]=t=>o.sale.affectation=t),id:o.sale.id},null,8,["product-ids","items","order","confirmation","affectation","id"])]),(0,s._)("div",DQ,[SQ,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>o.sale.upsell=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.upsells,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,key:t.id},(0,Q.zw)(t.name),9,zQ)))),128))],512),[[a.bM,o.sale.upsell]])]),(0,s.kq)("",!0),(0,s._)("div",UQ,[(0,s._)("div",LQ,[(0,s._)("label",PQ,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=t=>o.sale.counts_from_warehouse=t),class:"tw-sr-only tw-peer"},null,512),[[a.e8,o.sale.counts_from_warehouse]]),AQ]),(0,s._)("label",$Q,[(0,s._)("span",{class:(0,Q.C_)([[o.sale.counts_from_warehouse?"tw-text-orange-500":"tw-text-neutral-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Warehouse",2),(0,s._)("span",{class:(0,Q.C_)([[o.sale.counts_from_warehouse?"tw-text-neutral-500":"tw-text-orange-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Delivery",2)])])]),WQ,o.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",qQ," No Order items ")),o.items.length?((0,s.wg)(),(0,s.iD)("div",OQ,[(0,s._)("div",EQ,[((0,s.wg)(),(0,s.iD)("table",{key:o.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,s._)("thead",TQ,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",VQ,(0,Q.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.items,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:t.product.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[((0,s.wg)(),(0,s.iD)("th",{scope:"row",class:"tw-px-2 tw-py-2",key:t.product.id},[(0,s._)("div",IQ,[l.product_images[e]?((0,s.wg)(),(0,s.iD)("img",{key:0,class:"tw-w-full tw-h-full tw-object-contain",src:o.serverUrl+"storage/"+l.product_images[e]},null,8,FQ)):(0,s.kq)("",!0)])])),(0,s._)("th",RQ,[(0,s._)("div",null,[(0,s._)("div",null,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e=>t.product.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[NQ,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.filtredProducts,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,MQ)))),128))],8,jQ),[[a.bM,t.product.id]])])])]),(0,s._)("th",HQ,[(0,s._)("div",null,[0!=t.product.id?(0,s.wy)(((0,s.wg)(),(0,s.iD)("select",{key:0,disabled:1==l.getVariations(t.product)?.variations?.length,"onUpdate:modelValue":e=>t.product_variation.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[ZQ,l.getVariations(t.product)?.variations?.length>1?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(l.getVariations(t.product)?.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},[t.size||t.color?t.size&&"-"!=t.size&&t.color&&"-"!=t.color?((0,s.wg)(),(0,s.iD)("p",QQ,(0,Q.zw)(t.size)+" / "+(0,Q.zw)(t.color),1)):t.size&&"-"!=t.size?((0,s.wg)(),(0,s.iD)("p",GQ,(0,Q.zw)(t.size),1)):t.color?((0,s.wg)(),(0,s.iD)("p",JQ,(0,Q.zw)(t.color),1)):(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",BQ,"-"))],8,KQ)))),128)):((0,s.wg)(),(0,s.iD)("option",{key:1,value:l.getVariations(t.product)?.variations[0]?.id}," Default ",8,XQ))],8,YQ)),[[a.bM,t.product_variation.id]]):(0,s.kq)("",!0)])]),(0,s._)("th",tG,[(0,s._)("div",eG,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,rG),[[a.nr,t.quantity]])])]),(0,s._)("th",aG,[(0,s._)("div",null,[null==t.price?((0,s.wg)(),(0,s.iD)("div",sG," - ")):((0,s.wg)(),(0,s.iD)("div",iG,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e=>t.price=e,placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,oG),[[a.nr,t.price]])]))])]),(0,s._)("th",lG,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:e=>l.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])]))])])):(0,s.kq)("",!0),(0,s._)("div",nG,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:l.addNewRow,class:"mr-2 !tw-px-1 !tw-py-1 !tw-pr-2 tw-flex tw-items-center tw-gap-2","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1}),dG])),_:1},8,["onClick"])])]),(0,s._)("div",wG,[(0,s.Wm)(c,{"product-ids":l.product_ids},null,8,["product-ids"])]),(0,s._)("div",cG,[uG,(0,s._)("div",pG,[mG,(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e[13]||(e[13]=t=>o.sale.price=t),class:"tw-py-1 tw-max-w-[100px] tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sale.price]])])]),(0,s._)("div",hG,[gG,(0,s._)("div",fG,[vG,(0,s._)("div",yG,(0,Q.zw)(o.currency)+" "+(0,Q.zw)(l.total_price),1)])])]),(0,s._)("div",xG,[(0,s.Wm)(G.T,{onClick:l.handleCancel,color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[bG])),_:1},8,["onClick"]),(0,s.Wm)(G.T,{loading:o.isLoading,onClick:l.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[_G])),_:1},8,["loading","onClick"])])])):(0,s.kq)("",!0)])),_:1},8,["visible"])])}var CG={components:{AddOrderConfirmation:Cc,AddOrderAffectation:$c,ProductOffers:Kc},props:["visible","order"],data(){return{upsells:$n,serverUrl:F,currency:R,isLoading:!1,isAddItem:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],reported_date:null,price:0,sale:{fullname:"",phone:"",city:"",adresse:"",price:0,upsell:null,confirmation:null,counts_from_warehouse:!0}}},watch:{product_id(){this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0},"sale.confirmation":{deep:!0,handler(t){"confirmer"!=t&&(this.sale.affectation=null,this.sale.delivery=null)}},product_ids:{deep:!0,handler(t,e){this.items.map(((r,a)=>{if(0==r.product.id)return r;const s=this.getVariations(r.product)?.variations;return e[a]==t[r]||s.some((t=>t.id==r.product_variation.id))||(r.product_variation={id:0},r.product_variation_id=0),1==s?.length&&(r.product_variation=s[0],r.product_variation_id=s[0].id),r}))}}},computed:{products(){return this.$store.getters["product/products"]},product_images(){return this.items.map((t=>0==t.product.id?null:this.products.find((e=>e.id==t.product.id))?.image))},product_ids(){return this.items.map((t=>t.product.id))},isLoaded(){return this.$store.getters["product/fetched"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,r)=>e.indexOf(t.id)===r))},filtredProducts(){return this.products},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},selectedProduct(){return this.products.find((t=>t.id==this.product_id))},total_price:{get(){const t=this.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(this.sale.price?this.sale.price:0)+parseFloat(t)}},isItemsValid(){if(0==this.items.length)return!1;const t=this.items.some((t=>0==t.product.id||0==t.product_variation_id||0==t.quantity));return!t},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city}},methods:{deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},handleConfirmationChange(){"confirmer"!=this.sale.confirmation&&(this.sale.affectation=null)},addNewRow(){const t={id:this.item_id,product_id:0,product_ref:null,product:{id:0},product_variation:{id:0},product_variation_id:0,quantity:0,price:0};this.items.push(t)},getVariations(t){return this.products.find((e=>e.id==t.id))},formatItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const r=e.variations.find((e=>e.id==t.product_variation.id));return r?{...t,product:e,product_id:e.id,product_variation:r,product_variation_id:r.id,product_ref:e.ref}:t}));return this.items=t,t},addItem(){if([this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),r={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:this.price};this.items.push(r),this.product_id=0,this.product_variation_id=0,this.price=0,this.item_id+=1},create(){if(this.formatItems(),!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;if("annuler"==this.sale.confirmation&&!this.sale.note)return this.$alert({type:"warning",title:"Add Cancellation note."}),!1;if(!this.isItemsValid)return this.$alert({type:"warning",title:"Order Items are not valid"}),!1;this.isLoading=!0;const t={fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,upsell:this.sale.upsell,counts_from_warehouse:this.sale.counts_from_warehouse,orderItems:this.items,confirmation:this.sale.confirmation,note:this.sale.note,affectation:this.sale.affectation,reported_agente_note:this.sale.reported_agente_note,reported_agente_date:this.sale.reported_agente_date};this.isLoading=!0,Ir.create(t).then((t=>{"SALE_ADDED"==t.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"New Order Added"}),this.$store.dispatch("order/addOrder",t.data.data.sale),this.$emit("update:visible",!1))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},handleCancel(){this.$emit("update:visible",!1)},handleReported(t){this.sale.reported_agente_note=t.reported_agente_note,this.sale.reported_agente_date=t.reported_agente_date},checkVariant(t,e){const r=this.products.find((e=>e.id==t));if(!r)return{exists:!1};let a=r.variations.find((t=>t.id==e));return a||(a=r.variations.length>0?r.variations[0]:null),{exists:!0,variation:a}},getProducts(){return ea.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){}};const DG=(0,d.Z)(CG,[["render",kG]]);var SG=DG,zG={components:{OrdersTable:JB,AddNewOrder:SG},data(){return{localUrl:I,confirmations:Pn,isLoaded:!1,showFilters:!1,confirmationFilter:"all",affectationFilter:"all",upsellFilter:"all",search:"",showPopup:!1,sorting:{sortBy:null,orderBy:"asc",fields:[{name:"Select",value:null},{name:"ID",value:"id"},{name:"Created At",value:"created_at"}],options:[{name:"Ascending",value:"asc"},{name:"Descending",value:"desc"}]}}},computed:{orders(){return this.$store.getters["order/orders"]},sortedOrders(){const t=this.orders;return t.sort(((t,e)=>{switch(this.sorting.sortBy){case"created_at":return"asc"==this.sorting.orderBy?new Date(t.created_at)-new Date(e.created_at):new Date(e.created_at)-new Date(t.created_at);case"id":return"asc"==this.sorting.orderBy?t.id-e.id:e.id-t.id;default:return!0}}))},deliveries(){return this.$store.getters["user/deliveries"]},filteredOrders(){const t=this.confirmationFilter,e=this.affectationFilter,r=this.upsellFilter;return this.sortedOrders.filter((a=>{if("all"!==t&&a.confirmation!==t)return!1;if("all"!==e&&parseInt(a.affectation)!==parseInt(e))return!1;if("all"!==r&&a.upsell!==r)return!1;const s=((t,e)=>{for(const r in t)if(!["created_at","updated_at","sheets_id","reported_agente_note","reported_agente_note","reported_agente_date","reported_delivery_note","reported_delivery_date"].includes(r)&&String(t[r]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(a,this.search);return!!s}))}},methods:{async getDeliveries(){await K.deliveries().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)},getOrders(){Ir.agenteOrders().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("order/setOrders",e),console.log(t.data),this.isLoaded=!0}})).catch(this.$handleApiError)}},mounted(){this.$store.dispatch("order/setOrders",[]),this.getOrders()}};const UG=(0,d.Z)(zG,[["render",uH]]);var LG=UG;const PG=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Order"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Order Details")])],-1),AG={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},$G={class:""},WG={class:"text-white"},qG={key:0},OG={class:"mt-5"},EG={key:0,class:"tw-py-5"},TG=(0,s._)("p",{class:"tw-text-neutral-400 tw-text-md"},"Original Order: ",-1),VG={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},IG={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},FG=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"px-6 py-3"}," # "),(0,s._)("th",{scope:"col",class:"px-6 py-3"}," Client "),(0,s._)("th",{scope:"col",class:"px-6 py-3"}," Phone "),(0,s._)("th",{scope:"col",class:"px-6 py-3"}," Product "),(0,s._)("th",{scope:"col",class:"px-6 py-3"}," Price "),(0,s._)("th",{scope:"col",class:"px-6 py-3"}," City "),(0,s._)("th",{scope:"col",class:"px-6 py-3"}," Adresse "),(0,s._)("th",{scope:"col",class:"px-6 py-3"},[(0,s._)("span",{class:"sr-only"},"Edit")])])],-1),RG={class:"tw-bg-white tw-border-b"},jG={scope:"row",class:"px-6 py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},NG={scope:"row",class:"px-6 py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},MG={class:"px-6 py-4 tw-flex tw-items-center"},HG={class:"px-6 py-4"},YG={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},ZG={key:0},KG={key:1},BG={class:"px-6 py-4"},QG={class:"px-6 py-4"},GG={class:"px-6 py-4"},JG={class:"px-6 py-4"},XG={class:"tw-flex tw-gap-2 tw-justify-end tw-mt-5"},tJ=(0,s._)("span",{class:"text-white"}," Save ",-1),eJ={key:1},rJ=(0,s._)("p",{class:"tw-text-neutral-400 tw-py-5"},"No Order was found !",-1),aJ=[rJ];function sJ(t,e,r,a,i,o){const l=(0,s.up)("NewOrder"),n=(0,s.up)("UpdateOrder");return(0,s.wg)(),(0,s.iD)("div",null,[PG,(0,s._)("div",AG,[(0,s._)("div",$G,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:o.addOrder,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s._)("span",WG,(0,Q.zw)(i.isLoaded?"Add Order":"Loading..."),1),i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(X.t,{key:0,icon:"mdi-autorenew",class:"ml-2 text-white tw-animate-spin"}))])),_:1},8,["onClick"])]),i.isLoaded&&i.isOrderExists?((0,s.wg)(),(0,s.iD)("div",qG,[(0,s._)("div",OG,[i.newOrder.product_name?((0,s.wg)(),(0,s.iD)("div",EG,[TG,(0,s._)("p",null,[(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.newOrder.product_name.split("\n"),(t=>((0,s.wg)(),(0,s.iD)("li",{key:t,class:"tw-font-bold"}," - "+(0,Q.zw)(t),1)))),128))])])])):(0,s.kq)("",!0),(0,s._)("div",VG,[(0,s._)("table",IG,[FG,(0,s._)("tbody",null,[(0,s._)("tr",RG,[(0,s._)("th",jG,(0,Q.zw)(i.newOrder.id),1),(0,s._)("th",NG,(0,Q.zw)(i.newOrder.fullname),1),(0,s._)("td",MG,[(0,s.Uk)((0,Q.zw)(i.newOrder.phone)+" ",1),(0,s.Wm)(G.T,{link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+i.newOrder.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"text",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"green"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])]),(0,s._)("td",HG,[(0,s._)("p",null,[(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.newOrder.items,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,s.Uk)(" - "),(0,s._)("span",YG,(0,Q.zw)(t.quantity)+" X ",1),(0,s.Uk)((0,Q.zw)(t.product.name)+" ",1),t.product_variation.size?((0,s.wg)(),(0,s.iD)("span",ZG,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,s.kq)("",!0),t.product_variation.color?((0,s.wg)(),(0,s.iD)("span",KG,"| "+(0,Q.zw)(t.product_variation.color),1)):(0,s.kq)("",!0)])))),128))])])]),(0,s._)("td",BG,(0,Q.zw)(o.getPrice(i.newOrder)),1),(0,s._)("td",QG,(0,Q.zw)(i.newOrder.city),1),(0,s._)("td",GG,(0,Q.zw)(i.newOrder.adresse),1),(0,s._)("td",JG,[(i.newOrder.upsell,(0,s.wg)(),(0,s.j4)(G.T,{key:0,onClick:e[0]||(e[0]=t=>i.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1}))])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.doubles.filter((t=>t.id!=i.newOrder.id)),(t=>((0,s.wg)(),(0,s.j4)(l,{onUpdate:o.handleDoubleUpdate,order:t,key:t.id},null,8,["onUpdate","order"])))),128))])])])]),(0,s._)("div",XG,[(0,s.Wm)(G.T,{onClick:o.clearOrder,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[tJ])),_:1},8,["onClick"])])])):(0,s.kq)("",!0),i.isLoaded&&!i.isOrderExists?((0,s.wg)(),(0,s.iD)("div",eJ,aJ)):(0,s.kq)("",!0)])]),i.showUpdatePopup?((0,s.wg)(),(0,s.j4)(n,{key:0,onUpdateOrder:o.handleUpdateOrder,visible:i.showUpdatePopup,"onUpdate:visible":e[1]||(e[1]=t=>i.showUpdatePopup=t),order:i.newOrder},null,8,["onUpdateOrder","visible","order"])):(0,s.kq)("",!0)])}const iJ={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},oJ={class:"tw-px-6 tw-py-4 tw-relative"},lJ={class:"tw-absolute tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-text-xs"},nJ={class:"tw-bg-purple-500/10 tw-text-purple-500 tw-px-2 tw-rounded-t"},dJ={class:"px-6 py-4 tw-flex tw-items-center"},wJ={class:"tw-px-6 tw-py-4 tw-relative"},cJ={class:"tw-pb-2"},uJ={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},pJ={key:0},mJ={key:1},hJ={class:"tw-px-6 tw-py-4"},gJ={class:"tw-px-6 tw-py-4"},fJ={class:"tw-px-6 tw-py-4"},vJ={key:3,class:"tw-px-6 tw-py-4"},yJ={class:"tw-max-w-[300px] tw-min-w-[150px] tw-whitespace-normal"},xJ={class:"tw-px-6 tw-py-4"},bJ={class:"tw-min-w-[300px]"},_J=(0,s._)("p",null,"Edit note",-1);function kJ(t,e,r,a,i,o){(0,s.up)("OrderUpsell"),(0,s.up)("OrderConfirmation"),(0,s.up)("OrderAffectation");const l=(0,s.up)("OrderActions"),n=(0,s.up)("popup");return(0,s.wg)(),(0,s.iD)(s.HY,null,[((0,s.wg)(),(0,s.iD)("tr",{key:r.order.id,class:(0,Q.C_)([["reporter"==r.order.confirmation&&"tw-relative",o.isReportedToday(r.order)&&"!tw-border tw-border-red-400"],"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"])},[(0,s._)("th",iJ,(0,Q.zw)(o.id),1),(0,s._)("td",oJ,[(0,s._)("p",null,(0,Q.zw)(o.fullname),1),(0,s._)("div",lJ,[(0,s._)("p",nJ," Maybe Double: "+(0,Q.zw)(r.order.double),1)])]),(0,s._)("td",dJ,[(0,s.Uk)((0,Q.zw)(r.order.phone)+" ",1),(0,s.Wm)(G.T,{link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+r.order.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"text",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"green"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])]),(0,s._)("td",wJ,[(0,s._)("div",cJ,[(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.order.items,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,s.Uk)(" - "),(0,s._)("span",uJ,(0,Q.zw)(t.quantity)+" X ",1),(0,s.Uk)((0,Q.zw)(t.product.name)+" ",1),t.product_variation.size?((0,s.wg)(),(0,s.iD)("span",pJ,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,s.kq)("",!0),t.product_variation.color?((0,s.wg)(),(0,s.iD)("span",mJ,"| "+(0,Q.zw)(t.product_variation.color),1)):(0,s.kq)("",!0)])))),128))])])]),(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s._)("td",hJ,(0,Q.zw)(o.getPrice(r.order)),1),(0,s._)("td",gJ,(0,Q.zw)(r.order.city),1),(0,s._)("td",fJ,(0,Q.zw)(r.order.adresse),1),r.showNote?((0,s.wg)(),(0,s.iD)("td",vJ,[(0,s._)("div",yJ,[(0,s.Uk)((0,Q.zw)(r.order.note)+" ",1),(0,s.Wm)(X.t,{onClick:o.handleClick,size:"x-small",class:(0,Q.C_)(["tw-ml-2 tw-text-blue-500 tw-cursor-pointer hover:tw-bg-neutral-900/10 tw-rounded-full tw-p-3",{"tw-animate-spin":i.isLoading}])},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(i.isLoading?"mdi-loading":"mdi-pencil"),1)])),_:1},8,["onClick","class"])])])):(0,s.kq)("",!0),(0,s._)("td",xJ,[(0,s.Wm)(l,{double:!0,onUpdateOrder:e[0]||(e[0]=e=>t.$emit("update",e)),only:["update"],order:r.order},null,8,["order"])])],2)),(0,s.Wm)(n,{type:"info",title:"Add Note",onResolved:o.handleResolved,loading:i.isLoading,visible:i.showPopup},{default:(0,s.w5)((()=>[(0,s._)("div",bJ,[_J,(0,s.Wm)(mp.z,{modelValue:i.newNote,"onUpdate:modelValue":e[1]||(e[1]=t=>i.newNote=t),variant:"outlined",class:"rounded-md",color:"primary-color"},null,8,["modelValue"])])])),_:1},8,["onResolved","loading","visible"])],64)}var CJ={props:["order","showNote"],emits:["update"],components:{OrderConfirmation:DY,OrderUpsell:AY,OrderAffectation:IY,OrderActions:YB},data(){return{showPopup:!1,isLoading:!1,newNote:"",newOrder:null,todayDate:null}},computed:{id(){return this.order.id},fullname(){return this.order.fullname},product_name(){return this.order.product_name},agente_id(){return this.order.agente_id},upsell(){return this.order.upsell},phone(){return this.order.phone},city(){return this.order.city},adresse(){return this.order.adresse},quantity(){return this.order.quantity},price(){return this.order.price},confirmation(){return this.order.confirmation},affectation(){return this.order.affectation},delivery(){return this.order.delivery},note(){return this.order.note},created_at(){return this.order?.created_at}},methods:{getPrice(t){return Mi(t)},handleClick(){this.showPopup=!0,this.newNote=this.note},handleResolved(t){t?(this.showPopup=!1,this.isLoading=!0,Ir.agenteUpdateNote(this.id,this.newNote).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.$store.dispatch("order/updateNote",{note:this.newNote,id:this.id}))}),this.$handleApiError).finally((()=>this.isLoading=!1))):this.showPopup=!1},isReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date==this.todayDate}},mounted(){this.newOrder=this.order;const t=new Date,e=t.getDate(),r=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,s=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();this.todayDate=`${i}-${s}-${r}`}};const DJ=(0,d.Z)(CJ,[["render",kJ]]);var SJ=DJ,zJ={components:{UpdateOrder:xK,NewOrder:SJ},data(){return{isOrderExists:!1,isLoaded:!1,isLoading:!1,showUpdatePopup:!1,doubles:[],double:!1,form:{fullname:{valid:!0,message:""},phone:{valid:!0,message:""},city:{valid:!0,message:""},adresse:{valid:!0,message:""},quantity:{valid:!0,message:""},price:{valid:!0,message:""}},newOrder:null,popupOrder:null}},computed:{deliveries(){return this.$store.getters["user/deliveries"]},isFormValid(){return this.form.fullname.valid&&this.form.phone.valid&&this.form.city.valid&&this.form.adresse.valid&&this.form.quantity.valid&&this.form.price.valid},cities(){return this.$store.getters["city/cities"]}},methods:{updateConfirmation(t){this.newOrder.confirmation=t},getPrice(t){return Mi(t)},updateUpsell(t){this.newOrder.upsell=t,this.popupOrder.upsell=t},handleCancel(){this.showUpdatePopup=!1,this.popupOrder={...this.newOrder}},handleUpdateOrder(t){this.newOrder={...t}},validateForm(){this.form.fullname=_t(this.popupOrder.fullname,"Client"),this.form.phone=_t(this.popupOrder.phone,"Phone"),this.form.city=_t(this.popupOrder.city,"City"),this.form.adresse=_t(this.popupOrder.adresse,"Address"),this.form.quantity=_t(this.popupOrder.quantity,"Quantity"),this.form.price=_t(this.popupOrder.price,"Price")},handleDoubleUpdate(t){console.log("order updated: ",t),this.doubles=this.doubles.map((e=>e.id==t.id?t:e))},clearOrder(){return this.newOrder.confirmation?this.double&&this.doubles.some((t=>t.id!=this.newOrder.id&&!t.confirmation))?(this.$alert({type:"warning",title:"Double order confirmation not changed"}),!1):(this.isOrderExists=!1,this.$alert({type:"success",title:"Order Saved Successfully !"}),void this.$store.dispatch("order/addOrder",this.newOrder)):(this.$alert({type:"warning",title:"Order confirmation not changed"}),!1)},updateOrder(){if(this.validateForm(),!this.isFormValid)return!1;this.isLoading=!0,this.newOrder={...this.popupOrder},Ir.update(this.newOrder.id,this.newOrder).then((t=>{"SUCCESS"==t.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"Order updated"}),this.$store.dispatch("order/setOrder",this.newOrder))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},addOrder(){this.isLoaded=!1,Ir.agenteAddOrder().then((t=>{if("ORDER_NOT_CONFIRMED"===t.data.code&&this.$alert({type:"warning",title:"Order was not confirmed"}),"SUCCESS"===t.data.code&&(console.log("order exists..."),t.data.data?.orders)){const e=t.data.data.orders;this.newOrder=e,this.popupOrder={...e},this.$store.dispatch("order/setOrder",this.order),this.isLoaded=!0,1==t.data.data.double?(this.doubles=t.data.data.double_orders,this.double=!0):(this.doubles=[],this.double=!1),this.isOrderExists=!0}"NO_ORDERS"==t.data.code&&(this.isOrderExists=!1)})).catch(this.$handleApiError).finally((()=>{this.isLoaded=!0}))},getOrder(){Ir.agenteGetOrder().then((t=>{if("SUCCESS"===t.data.code){const e=t.data.data.orders[0];this.newOrder=e,this.popupOrder={...e},this.$store.dispatch("order/setOrder",this.order),1==t.data.data.double?(this.doubles=t.data.data.double_orders,this.double=!0):(this.doubles=[],this.double=!1),this.isLoaded=!0,this.isOrderExists=!0}"NO_ORDER"===t.data.code&&(this.isLoaded=!0)}),(t=>{this.$handleApiError(t),this.isLoaded=!0}))},getDeliveries(){K.deliveries().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)}},async mounted(){this.getOrder(),0==this.deliveries.length&&this.getDeliveries()}};const UJ=(0,d.Z)(zJ,[["render",sJ]]);var LJ=UJ;const PJ={class:"mb-5 tw-flex tw-justify-between tw-items-center"},AJ=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Confirmed Orders"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"See your confirmed orders")],-1),$J={key:0},WJ=(0,s._)("span",{class:"text-white"}," Add Sale ",-1),qJ={key:0},OJ={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},EJ={class:"mb-5 tw-flex"},TJ={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},VJ={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},IJ={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},FJ=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Sort By",-1),RJ={class:"tw-relative"},jJ=["value"],NJ={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},MJ=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Order By",-1),HJ={class:"tw-relative"},YJ=["value"],ZJ={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},KJ=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Upsell",-1),BJ={class:"tw-relative"},QJ=(0,s._)("option",{value:"all"},"Select",-1),GJ=(0,s._)("option",{value:"oui"},"Oui",-1),JJ=(0,s._)("option",{value:"non"},"Non",-1),XJ=[QJ,GJ,JJ],tX={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},eX=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Confirmation",-1),rX={class:"tw-relative"},aX=["value"],sX={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},iX=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Affect",-1),oX={class:"tw-relative"},lX=(0,s._)("option",{value:"all"},"Select",-1),nX=["value"],dX={key:0},wX={key:1,class:""},cX=(0,s._)("p",{class:"tw-text-neutral-400 tw-py-5"},"Your order's list is empty !",-1),uX=[cX];function pX(t,e,r,i,o,l){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("OrdersTable"),w=(0,s.up)("AddNewOrder");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",PJ,[AJ,o.isLoaded?((0,s.wg)(),(0,s.iD)("div",$J,[(0,s.Wm)(G.T,{color:"primary-color",onClick:e[0]||(e[0]=t=>o.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),WJ])),_:1})])):(0,s.kq)("",!0)]),o.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",qJ,[(0,s.Wm)(n)])),o.isLoaded?((0,s.wg)(),(0,s.iD)("div",OJ,[(0,s._)("div",EJ,[(0,s.Wm)(G.T,{onClick:e[1]||(e[1]=t=>o.showFilters=!o.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",TJ,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,o.search]])])]),(0,s._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":o.showFilters}])},[(0,s._)("div",VJ,[(0,s._)("div",IJ,[FJ,(0,s._)("div",RJ,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.sorting.sortBy=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.sorting.fields,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.value,value:t.value},(0,Q.zw)(t.name),9,jJ)))),128))],512),[[a.bM,o.sorting.sortBy]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",NJ,[MJ,(0,s._)("div",HJ,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.sorting.orderBy=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.sorting.options,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.value,value:t.value},(0,Q.zw)(t.name),9,YJ)))),128))],512),[[a.bM,o.sorting.orderBy]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",ZJ,[KJ,(0,s._)("div",BJ,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>o.upsellFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},XJ,512),[[a.bM,o.upsellFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",tX,[eX,(0,s._)("div",rX,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>o.confirmationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.value?t.value:"all"},(0,Q.zw)(t.name),9,aX)))),128))],512),[[a.bM,o.confirmationFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",sX,[iX,(0,s._)("div",oX,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>o.affectationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[lX,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,nX)))),128))],512),[[a.bM,o.affectationFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])],2),l.confirmedOrders.length>0?((0,s.wg)(),(0,s.iD)("div",dX,[(0,s.Wm)(d,{note:!0,orders:l.filteredOrders},null,8,["orders"])])):((0,s.wg)(),(0,s.iD)("div",wX,uX))])):(0,s.kq)("",!0),(0,s.Wm)(w,{onCancel:e[8]||(e[8]=t=>o.showPopup=!1),visible:o.showPopup,"onUpdate:visible":e[9]||(e[9]=t=>o.showPopup=t)},null,8,["visible"])])}var mX={components:{OrdersTable:JB,AddNewOrder:SG},data(){return{localUrl:I,confirmations:Pn,isLoaded:!1,showFilters:!1,confirmationFilter:"all",affectationFilter:"all",upsellFilter:"all",search:"",showPopup:!1,sorting:{sortBy:null,orderBy:"asc",fields:[{name:"Select",value:null},{name:"ID",value:"id"},{name:"Created At",value:"created_at"}],options:[{name:"Ascending",value:"asc"},{name:"Descending",value:"desc"}]}}},computed:{confirmedOrders(){return this.$store.getters["order/orders"]},sortedOrders(){const t=this.confirmedOrders;return t.sort(((t,e)=>{switch(this.sorting.sortBy){case"created_at":return"asc"==this.sorting.orderBy?new Date(t.created_at)-new Date(e.created_at):new Date(e.created_at)-new Date(t.created_at);case"id":return"asc"==this.sorting.orderBy?t.id-e.id:e.id-t.id;default:return!0}}))},deliveries(){return this.$store.getters["user/deliveries"]},filteredOrders(){const t=this.confirmationFilter,e=this.affectationFilter,r=this.upsellFilter;return this.sortedOrders.filter((a=>{if("all"!==t&&a.confirmation!==t)return!1;if("all"!==e&&parseInt(a.affectation)!==parseInt(e))return!1;if("all"!==r&&a.upsell!==r)return!1;const s=((t,e)=>{for(const r in t)if(!["created_at","updated_at","sheets_id","reported_agente_note","reported_agente_note","reported_agente_date","reported_delivery_note","reported_delivery_date"].includes(r)&&String(t[r]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(a,this.search);return!!s}))}},methods:{getOrders(){Ir.agenteConfirmedOrders().then((t=>{if("SUCCESS"==t?.data.code)if("No Order Confirmed Yet !"==t?.data.data)this.orders=[],this.isLoaded=!0;else{const e=t.data.data.orders;this.$store.dispatch("order/setOrders",e),this.isLoaded=!0}})).catch(this.$handleApiError)},async getDeliveries(){await K.deliveries().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)}},mounted(){this.$store.dispatch("order/setOrders",[]),this.getDeliveries(),this.getOrders()}};const hX=(0,d.Z)(mX,[["render",pX]]);var gX=hX,fX={name:"orders",path:"/orders",component:sa,meta:{module:"order"},children:[{name:"order/list",path:"",component:LG,meta:{module:"order",subModule:"order/list",title:"Orders List",gate:"show_all_orders"}},{name:"order/show",path:"/order",component:LJ,meta:{module:"order",subModule:"order/show",title:"Current Order",gate:"show_all_orders"}},{name:"order/confirmed",path:"/orders/confirmed",component:gX,meta:{module:"order",subModule:"order/confirmed",title:"Confirmed Orders",gate:"show_all_orders"}}]};const vX=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Orders")])],-1),yX={key:0},xX={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},bX={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-5"},_X={key:1},kX={class:"tw-min-h-[400px] tw-flex tw-flex-col tw-justify-center tw-items-center"},CX=(0,s._)("p",{class:"tw-font-medium tw-text-neutral-400 tw-text-lg tw-mb-n3"},"No Confirmed orders for now.",-1),DX=["src"];function SX(t,e,r,a,i,o){const l=(0,s.up)("LoadingAnimation"),n=(0,s.up)("OrderCard");return(0,s.wg)(),(0,s.iD)("div",null,[vX,i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",yX,[(0,s.Wm)(l)])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",xX,[o.orders.length>0?((0,s.wg)(),(0,s.iD)("div",bX,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.filteredOrders,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t.id,class:"tw-col-span-12 md:tw-col-span-4"},[((0,s.wg)(),(0,s.j4)(n,{order:t,key:t.id},null,8,["order"]))])))),128))])):((0,s.wg)(),(0,s.iD)("div",_X,[(0,s._)("div",kX,[CX,(0,s._)("img",{src:i.localUrl+"images/delivery.jpg",class:"tw-mt-0 tw-mx-auto tw-max-w-[600px] tw-w-full",alt:""},null,8,DX)])]))])):(0,s.kq)("",!0)])}var zX=r(9875),UX=r(1888),LX=r(1334);const PX={class:"tw-text-sm tw-text-orange-500x tw-bg-orange-500x/10 tw-underline tw-underline-offset-2 tw-px-1 tw-w-fit tw-rounded"},AX={class:"tw-w-full tw-whitespace-normal"},$X=(0,s._)("div",{class:"tw-border-b tw-mb-1 tw-border-dashed"},null,-1),WX={class:"tw-flex tw-items-center"},qX={key:0},OX={key:1},EX={class:"tw-min-w-fit tw-w-[25px] tw-h-[25px] tw-flex tw-items-center tw-justify-center tw-text-md tw-font-bold tw-p-1 tw-rounded tw-text-orange-400 tw-bg-orange-400/10"},TX=(0,s._)("span",{class:"tw-text-sm"},"x",-1),VX={key:0},IX={key:0,class:"tw-px-5 tw-py-2 tw-mt-2 tw-border-neutral-200 tw-border-t tw-border-dashed"},FX=(0,s._)("p",{class:"tw-text-md tw-font-bold tw-text-pink-500"},"NOTE",-1),RX={class:"tw-flex tw-items-center tw-text-gray-500"},jX={class:"tw-flex tw-items-center tw-text-gray-500"};function NX(t,e,r,a,i,o){const l=(0,s.up)("OrderCardDelivery");return(0,s.wg)(),(0,s.j4)(Ja._,{class:(0,Q.C_)(["tw-mx-auto tw-relative tw-border-dashed !tw-shadow-lg !tw-shadow-gray-100/70",[!!r.order.note&&"tw-border-pink-00","livrer"==r.order.delivery&&"tw-border-emerald-400"]]),flat:"",border:""},{default:(0,s.w5)((()=>[(0,s._)("div",{class:(0,Q.C_)(["tw-absolute tw-top-0 tw-right-0 tw-py-1 tw-px-2 tw-rounded-bl tw-text-xs",[o.delivery?.bg,o.delivery?.text]])},(0,Q.zw)(r.order.delivery),3),(0,s.Wm)(zX._,null,{title:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("p",PX,(0,Q.zw)(r.order.city),1),(0,s._)("p",AX,(0,Q.zw)(r.order.adresse),1)]),$X])),_:1}),(0,s.Wm)(UX.Z,{class:"py-0"},{default:(0,s.w5)((()=>[(0,s.Wm)(la.o,{align:"center","no-gutters":""},{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{cols:"12",class:"tw-flex tw-items-center tw-flex-wrap tw-text-gray-500"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{icon:"mdi-account",size:"small",class:"tw-mr-2 tw-text-sm"}),(0,s.Uk)(" "+(0,Q.zw)(r.order.fullname)+" ",1),r.order.note?((0,s.wg)(),(0,s.j4)(X.t,{key:0,icon:"mdi-note-outline",size:"small",class:"tw-ml-2 tw-text-sm !tw-text-pink-500"})):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(na.D,{cols:"12",class:"tw-text-gray-500 tw-space-y-1 tw-mt-2"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.order.items,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"tw-flex tw-items-center tw-gap-3",key:t.id},[(0,s._)("div",WX,[(0,s._)("span",null,[(0,s.Uk)((0,Q.zw)(t.product.name)+" ",1),t.product_variation.size?((0,s.wg)(),(0,s.iD)("span",qX,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,s.kq)("",!0),(0,s.Uk)(),t.product_variation.size?((0,s.wg)(),(0,s.iD)("span",OX,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,s.kq)("",!0)])]),(0,s._)("div",null,[(0,s._)("p",EX,[TX,(0,s.Uk)(" "+(0,Q.zw)(t.quantity),1)])])])))),128))])),_:1}),(0,s.Wm)(na.D,{class:"text-h4 tw-my-3",cols:"12"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(o.getPrice(r.order)),1)])),_:1})])),_:1})])),_:1}),(0,s.kq)("",!0),(0,s.Wm)(Ut.Fx,null,{default:(0,s.w5)((()=>[t.expand?((0,s.wg)(),(0,s.iD)("div",VX,[r.order.note?((0,s.wg)(),(0,s.iD)("div",IX,[FX,(0,s._)("p",null,(0,Q.zw)(r.order.note),1)])):(0,s.kq)("",!0),(0,s.Wm)(Qe.i,{class:"bg-transparent tw-space-y-2 !tw-px-5 tw-py-3 tw-border-neutral-200 tw-border-dashed tw-border-t tw-mt-5"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",RX,[(0,s.Wm)(X.t,{icon:"mdi-phone",class:"mr-2 tw-text-sm"}),(0,s.Uk)(" "+(0,Q.zw)(r.order.phone),1)])]),(0,s._)("div",null,[(0,s._)("div",jX,[(0,s.Wm)(X.t,{icon:"mdi-calendar",class:"mr-2 tw-text-sm"}),(0,s.Uk)(" "+(0,Q.zw)(r.order.created_at?.split("T")[0].split("-").reverse().join(".")),1)])])])),_:1})])):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(Zt.J),(0,s.Wm)(LX.h,{class:"tw-flex tw-justify-end tw-gap-2 tw-flex-wrap"},{default:(0,s.w5)((()=>[(0,s.Wm)(G.T,{class:"tw-capitalize tw-mx-auto tw-bg-orange-500/5 tw-text-orange-500",rounded:"lg",density:"comfortable",icon:"",variant:"flat",onClick:e[0]||(e[0]=e=>t.expand=!t.expand)},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(t.expand?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})])),_:1}),(0,s.Wm)(er.C),r.order.phone?((0,s.wg)(),(0,s.j4)(G.T,{key:0,link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+r.order.phone.replace("+","").replace("-","").replace(" ",""),class:"tw-capitalize tw-bg-green-500/5 tw-text-green-500 tw-border tw-border-green-500/30",icon:"",rounded:"lg",variant:"flat",density:"comfortable"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])):(0,s.kq)("",!0),r.order.phone?((0,s.wg)(),(0,s.j4)(G.T,{key:1,link:"",target:"_blank",href:"tel:"+r.order.phone,class:"tw-capitalize tw-bg-blue-500/5 tw-text-blue-500 tw-border tw-border-blue-500/30",icon:"",rounded:"lg",variant:"flat",density:"comfortable"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-phone")])),_:1})])),_:1},8,["href"])):(0,s.kq)("",!0),(0,s.Wm)(G.T,{onClick:e[1]||(e[1]=e=>t.confirmPopup=!0),class:"tw-capitalize tw-bg-emerald-500 tw-text-white tw-border tw-border-emerald-500/30",icon:"",rounded:"lg",variant:"flat",density:"comfortable"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-check")])),_:1})])),_:1})])),_:1}),((0,s.wg)(),(0,s.j4)(l,{delivery:r.order.delivery,order:r.order,key:r.order,visible:t.confirmPopup,onCancel:e[2]||(e[2]=e=>t.confirmPopup=!1)},null,8,["delivery","order","visible"]))])),_:1},8,["class"])}const MX={class:"md:tw-w-[80%] tw-overflow-hidden tw-w-[95%] tw-max-w-[550px] tw-mx-auto tw-my-3 tw-min-h-[200px] tw-bg-white tw-rounded-lg tw-shadow-lg"},HX={class:"tw-px-5 tw-pt-5"},YX=(0,s._)("h1",{class:"tw-font-bold tw-text-gray-600"},"Select Status",-1),ZX={class:"tw-mt-3 tw-flex tw-gap-3 tw-flex-wrap"},KX=["disabled","onClick"],BX={class:"tw-mt-5 tw-px-5 tw-py-3 tw-bg-gray-50 tw-border-t tw-flex tw-gap-2 tw-justify-end"},QX=(0,s._)("span",{class:"!tw-text-gray-500"},"Cancel",-1),GX=(0,s._)("span",{class:"!tw-text-white"},"Confirm",-1);function JX(t,e,r,a,i,o){const l=(0,s.up)("popup-full"),n=(0,s.up)("OrderReporting");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(l,{onCancel:o.cancel,visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",MX,[(0,s._)("div",HX,[YX,(0,s._)("div",ZX,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.deliveryStatus,(e=>((0,s.wg)(),(0,s.iD)("button",{disabled:o.isDisabled(e),onClick:t=>o.handleChange(e),key:e.value,class:(0,Q.C_)([[o.isDisabled(e)&&"tw-saturate-0",e.text,e.bg,e.id==t.delivery&&[e.ring,"tw-ring"]],"tw-px-4 tw-py-2 tw-rounded"])},(0,Q.zw)(e.name),11,KX)))),128))])]),(0,s._)("div",BX,[(0,s.Wm)(G.T,{onClick:o.cancel,class:"!tw-capitalize",color:"grey-lighten-3",flat:""},{default:(0,s.w5)((()=>[QX])),_:1},8,["onClick"]),(0,s.Wm)(G.T,{onClick:o.handleConfirm,loading:t.isLoading,class:"!tw-capitalize",color:"primary-color",flat:""},{default:(0,s.w5)((()=>[GX])),_:1},8,["onClick","loading"])])])])),_:1},8,["onCancel","visible"]),(0,s.Wm)(n,{onOrderReported:o.cancel,order:r.order,visible:t.showPopupReporter,onCancel:e[0]||(e[0]=e=>t.showPopupReporter=!1)},null,8,["onOrderReported","order","visible"])])}const XX={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},t0=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),e0=(0,s._)("br",null,null,-1),r0=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),a0={class:"tw-flex tw-justify-end tw-mt-2"};function s0(t,e,r,i,o,l){const n=(0,s.up)("VueDatePicker"),d=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",{key:r.order.id},[(0,s.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>l.cancel()),visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",XX,[t0,(0,s.Wm)(n,{modelValue:o.date,"onUpdate:modelValue":e[0]||(e[0]=t=>o.date=t),format:l.format},null,8,["modelValue","format"]),e0,r0,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[a.nr,o.note]]),(0,s._)("div",a0,[(0,s.Wm)(G.T,{class:"tw-capitalize",loading:o.isLoading,variant:"flat",color:"green",onClick:l.handleConfirm},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var i0={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_delivery_date=this.realDate,t.reported_delivery_note=this.note,t.delivery="reporter",this.isLoading=!0,Ir.deliveryUpdateDelivery(t.id,"reporter",t).then((e=>{console.log(e.data),this.$alert({type:"success",title:"Order reported successfully"}),this.$emit("orderReported"),this.$store.dispatch("order/update",{id:t.id,order:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},format(t){const e=t.getDate(),r=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,s=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();return this.realDate=`${i}-${s}-${r}`,`${r}/${s}/${i}`},cancel(){this.$emit("cancel")}},mounted(){console.log(this.order)}};const o0=(0,d.Z)(i0,[["render",s0]]);var l0=o0,n0={props:["visible","order"],components:{OrderReporting:l0},data:()=>({status:Wn,disabled:qn,delivery:2,isLoading:!1,note:"",showPopupReporter:!1}),computed:{deliveryStatus(){return this.status.filter((t=>!!t.value))},selected(){return this.status.find((t=>t.id==this.delivery))}},watch:{order:{handler(t){this.delivery=this.getDeliveryId(t.delivery)},deep:!0,immediate:!0}},methods:{cancel(){this.getCurrentStatus(),this.$emit("cancel")},isDisabled(t){return this.disabled.includes(t.value)},handleChange(t){if(this.isDisabled(t))return!1;this.delivery=t.id},handleConfirm(){const t=this.selected;if(t.value===this.order.delivery)return this.cancel(),!1;"reporter"!=t.value&&this.updateOrder().then((()=>{this.cancel()})),"reporter"==t.value&&(this.showPopupReporter=!0)},async updateOrder(){return this.isLoading=!0,Ir.deliveryUpdateDelivery(this.order.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateDelivery(this.order.id,this.selected.value),this.isLoading=!1,this.cancel())}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateDelivery(t,e){this.$store.dispatch("order/updateDelivery",{id:t,delivery:e})},getDeliveryId(t){return this.status.find((e=>e.value==t)).id||0},getCurrentStatus(){this.delivery=this.getDeliveryId(this.order.delivery)}},mounted(){this.getCurrentStatus()}};const d0=(0,d.Z)(n0,[["render",JX]]);var w0=d0,c0={components:{OrderCardDelivery:w0},props:["order"],data:()=>({deliveryStatus:Wn,expand:!1,confirmPopup:!1,labels:[{name:"Telephone",field:"phone",icon:"mdi-phone"},{name:"Date",field:"created_at",icon:"mdi-calendar"}]}),computed:{delivery(){return this.getDeliveryStatus(this.order.delivery)}},methods:{getDeliveryStatus(t){return this.deliveryStatus.find((e=>e.value==t))||this.deliveryStatus[0]},getPrice(t){return Mi(t)}}};const u0=(0,d.Z)(c0,[["render",NX]]);var p0=u0,m0={components:{OrderCard:p0},data(){return{localUrl:I,deliveryStatus:Wn,isLoaded:!1,showFilters:!1,deliveryFilter:"all",affectationFilter:"all",upsellFilter:"all",search:""}},computed:{orders(){return this.$store.getters["order/orders"].filter((t=>"livrer"!=t.delivery))},filteredOrders(){const t=this.deliveryFilter;return this.orders.filter((e=>{if("all"!==t&&e.delivery!==t)return!1;const r=((t,e)=>{for(const r in t)if(!["created_at","updated_at"].includes(r)&&String(t[r]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(e,this.search);return!!r}))}},methods:{getOrders(){Ir.deliveryOrders().then((t=>{const e=t.data.data.orders;this.$store.dispatch("order/setOrders",e),this.isLoaded=!0}),this.$handleApiError)}},mounted(){this.$store.dispatch("order/setOrders",[]),this.getOrders()}};const h0=(0,d.Z)(m0,[["render",SX]]);var g0=h0;const f0=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Delivered Orders"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Delivered orders list")])],-1),v0={key:0},y0={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},x0={class:"mb-5 tw-flex"},b0={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},_0={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},k0={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},C0=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Delivery",-1),D0={class:"tw-relative"},S0=["value"],z0={key:0,class:""},U0={key:1},L0=(0,s._)("p",null,"No orders for now",-1),P0=[L0];function A0(t,e,r,i,o,l){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("OrdersTable");return(0,s.wg)(),(0,s.iD)("div",null,[f0,o.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",v0,[(0,s.Wm)(n)])),o.isLoaded?((0,s.wg)(),(0,s.iD)("div",y0,[(0,s._)("div",x0,[(0,s.Wm)(G.T,{onClick:e[0]||(e[0]=t=>o.showFilters=!o.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",b0,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,o.search]])])]),(0,s._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":o.showFilters}])},[(0,s._)("div",_0,[(0,s._)("div",k0,[C0,(0,s._)("div",D0,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.deliveryFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.deliveryStatus,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.value?t.value:"all"},(0,Q.zw)(t.name),9,S0)))),128))],512),[[a.bM,o.deliveryFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])],2),l.orders.length>0?((0,s.wg)(),(0,s.iD)("div",z0,[(0,s.Wm)(d,{orders:l.filteredOrders},null,8,["orders"])])):((0,s.wg)(),(0,s.iD)("div",U0,P0))])):(0,s.kq)("",!0)])}const $0={class:"tw-relative tw-min-h-[400px] tw-overflow-x-auto tw-overflow-y-visible sm:tw-rounded-lg"},W0={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},q0={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},O0=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),E0={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},T0={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},V0={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},I0=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),F0=["value"],R0={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},j0={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},N0={class:"tw-text-white"};function M0(t,e,r,i,o,l){const n=(0,s.up)("OrderRow");return(0,s.wg)(),(0,s.iD)("div",{key:r.orders.length},[(0,s._)("div",$0,[(0,s._)("table",W0,[(0,s._)("thead",q0,[(0,s._)("tr",null,[O0,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",E0,(0,Q.zw)(t),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.orders,(t=>((0,s.wg)(),(0,s.j4)(n,{key:t.id,order:t},null,8,["order"])))),128))])])]),(0,s._)("div",T0,[(0,s._)("div",V0,[I0,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,F0)))),128))],512),[[a.bM,o.paginationLimit]])]),(0,s._)("div",R0,[(0,s._)("div",j0,(0,Q.zw)(l.prevRange+1)+" - "+(0,Q.zw)(o.currentPage==l.pageCount?r.orders.length:l.nextRange)+" of "+(0,Q.zw)(r.orders.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.pageCount,(t=>((0,s.wg)(),(0,s.j4)(G.T,{onClick:e=>o.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==o.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",N0,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const H0=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),Y0={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},Z0={class:"tw-px-6 tw-py-4 tw-relative"},K0={key:0},B0={class:"tw-px-6 tw-py-4"},Q0={class:"tw-px-6 tw-py-4"},G0={class:"tw-px-6 tw-py-4"},J0={class:"tw-px-6 tw-py-4"},X0={class:"tw-pb-2"},t1={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},e1={key:0},r1={key:1},a1={class:"tw-px-6 tw-py-4 tw-relative"},s1={class:"tw-flex tw-items-center tw-justify-center"},i1={class:"tw-flex tw-gap-1"},o1={key:0},l1={class:"tw-px-6 tw-py-4"},n1={class:"tw-px-6 tw-py-4"},d1={class:"tw-px-6 tw-py-4"},w1={class:"tw-max-w-[300px] tw-min-w-[150px] tw-whitespace-normal"},c1={class:"tw-px-6 tw-py-4"};function u1(t,e,r,a,i,o){const l=(0,s.up)("OrderDelivery"),n=(0,s.up)("OrderActions");return(0,s.wg)(),(0,s.iD)("tr",{key:r.order.id,class:(0,Q.C_)([["reporter"==r.order.delivery&&"tw-relative",o.isReportedToday(r.order)&&"!tw-border tw-border-red-400"],"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"])},[H0,(0,s._)("th",Y0,(0,Q.zw)(r.order.id),1),(0,s._)("td",Z0,[(0,s.Uk)((0,Q.zw)(r.order?.created_at?.split("T")[0])+" ",1),"reporter"==r.order.delivery?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([o.isReportedToday(r.order)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[o.isReportedToday(r.order)?((0,s.wg)(),(0,s.iD)("span",K0," Reported for today ")):(0,s.kq)("",!0)],2)):(0,s.kq)("",!0)]),(0,s._)("td",B0,(0,Q.zw)(r.order.fullname),1),(0,s._)("td",Q0,(0,Q.zw)(r.order.adresse),1),(0,s._)("td",G0,(0,Q.zw)(r.order.phone),1),(0,s._)("td",J0,[(0,s._)("div",X0,[(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.order.items,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,s.Uk)(" - "),(0,s._)("span",t1,(0,Q.zw)(t.quantity)+" X ",1),(0,s.Uk)((0,Q.zw)(t.product.name)+" ",1),t.product_variation.size?((0,s.wg)(),(0,s.iD)("span",e1,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,s.kq)("",!0),t.product_variation.color?((0,s.wg)(),(0,s.iD)("span",r1,"| "+(0,Q.zw)(t.product_variation.color),1)):(0,s.kq)("",!0)])))),128))])])]),(0,s._)("td",a1,[(0,s._)("div",s1,[((0,s.wg)(),(0,s.j4)(l,{class:(0,Q.C_)("reporter"==r.order.delivery&&"tw-mb-1"),order:r.order,id:r.order.id,key:r.order.delivery,delivery:r.order.delivery},null,8,["class","order","id","delivery"])),"reporter"==r.order.delivery?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([o.isReportedToday(r.order)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[(0,s._)("span",i1,["reporter"==r.order.delivery?((0,s.wg)(),(0,s.iD)("span",o1,[(0,s.Wm)(X.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s._)("span",null,(0,Q.zw)(r.order?.reported_delivery_date?.split("T")[0]),1)])):(0,s.kq)("",!0)])],2)):(0,s.kq)("",!0)])]),(0,s._)("td",l1,(0,Q.zw)(o.getPrice(r.order)),1),(0,s._)("td",n1,(0,Q.zw)(r.order.city),1),(0,s._)("td",d1,[(0,s._)("div",w1,(0,Q.zw)(r.order.note),1)]),(0,s._)("td",c1,[((0,s.wg)(),(0,s.j4)(n,{key:r.order.id,order:r.order},null,8,["order"]))])],2)}const p1={key:0,class:"focus:tw-ring-4 tw-min-w-fit focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between tw-bg-green-500/10 tw-text-green-500"},m1={key:1},h1={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},g1=["onClick"];function f1(t,e,r,a,i,o){const l=(0,s.up)("OrderReporting");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:r.delivery,class:"tw-relative tw-min-w-[100px]"},["livrer"==r.delivery?((0,s.wg)(),(0,s.iD)("div",p1,(0,Q.zw)(o.selected.name),1)):(0,s.kq)("",!0),"livrer"!=r.delivery?((0,s.wg)(),(0,s.iD)("div",m1,[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>o.toggle&&o.toggle(...t)),class:(0,Q.C_)([[o.selected.text,o.selected.bg,o.selected.ring],"focus:tw-ring-4 tw-min-w-[100px] focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between"]),type:"button"},[(0,s.Uk)((0,Q.zw)(o.selected.name)+" ",1),i.isLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(X.t,{key:0,class:"tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(i.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),i.isLoading?((0,s.wg)(),(0,s.j4)(X.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)],2),(0,s._)("div",{class:(0,Q.C_)([{"tw-hidden":!i.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,s._)("ul",h1,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.options,(t=>((0,s.wg)(),(0,s.iD)("li",{onClick:e=>!i.disabled.includes(t.value)&&o.handleChange(t),key:t.id},[(0,s._)("a",{class:(0,Q.C_)(["tw-block tw-px-4 tw-py-2",[i.disabled.includes(t.value)?"tw-text-neutral-400/80 tw-bg-neutral-400/10":[t.text,t.bg]]])},(0,Q.zw)(t.name),3)],8,g1)))),128))])],2),(0,s.Wm)(l,{order:r.order,visible:i.showPopupReporter,onCancel:e[1]||(e[1]=t=>i.showPopupReporter=!1)},null,8,["order","visible"])])):(0,s.kq)("",!0)])),[[Bt.L,o.close]])}var v1={props:["delivery","id","order"],components:{OrderReporting:l0},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",selectedId:0,allOptions:Wn,disabled:qn,showPopupReporter:!1}},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(t.id===this.selectedId)return!1;"reporter"!=t.value&&(this.selectedId=t.id,this.updateOrder(),this.close()),"reporter"==t.value&&(this.showPopupReporter=!0)},async updateOrder(){return this.isLoading=!0,Ir.deliveryUpdateDelivery(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateDelivery(this.id,this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateDelivery(t,e){this.$store.dispatch("order/updateDelivery",{id:t,delivery:e})}},mounted(){this.availableOptions.includes(this.delivery)?this.selectedId=this.allOptions.find((t=>t.value==this.delivery)).id:this.selectedId=0}};const y1=(0,d.Z)(v1,[["render",f1]]);var x1=y1;const b1={key:0};function _1(t,e,r,a,i,o){return i.newOrder?((0,s.wg)(),(0,s.iD)("div",b1,[(0,s.Wm)(G.T,{link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+r.order.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])])):(0,s.kq)("",!0)}var k1={props:["order"],name:"orderActions",data(){return{newOrder:null}},computed:{},methods:{},mounted(){this.newOrder={...this.order}}};const C1=(0,d.Z)(k1,[["render",_1]]);var D1=C1,S1={props:["order","showNote"],components:{OrderDelivery:x1,OrderActions:D1},data(){return{showPopup:!1,isLoading:!1,todayDate:null}},methods:{handleClick(){this.showPopup=!0},isReportedToday(t){return"reporter"==t.delivery&&t.reported_delivery_date==this.todayDate},getPrice(t){return Mi(t)}},mounted(){const t=new Date,e=t.getDate(),r=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,s=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();this.todayDate=`${i}-${s}-${r}`}};const z1=(0,d.Z)(S1,[["render",u1]]);var U1=z1,L1={props:["orders"],components:{OrderRow:U1},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10,todayDate:null,columns:["#","Date","Client","Address","Phone","Product","Delivery","Price","City","Note","Actions"]}},computed:{deliveries(){return this.$store.getters["user/deliveries"]},prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.orders.length/this.paginationLimit)},items(){const t=[...this.reportedForToday,...this.orders.filter((t=>!this.isReportedToday(t)))];return t.slice(this.prevRange,this.nextRange)},reportedForToday(){return this.orders.filter(this.isReportedToday)}},methods:{isReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date==this.todayDate}},mounted(){const t=new Date,e=t.getDate(),r=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,s=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();this.todayDate=`${i}-${s}-${r}`}};const P1=(0,d.Z)(L1,[["render",M0]]);var A1=P1,$1={components:{OrdersTable:A1},data(){return{localUrl:I,deliveryStatus:Wn,isLoaded:!1,showFilters:!1,deliveryFilter:"all",affectationFilter:"all",upsellFilter:"all",search:""}},computed:{orders(){return this.$store.getters["order/orders"]},filteredOrders(){const t=this.deliveryFilter;return this.orders.filter((e=>{if("all"!==t&&e.delivery!==t)return!1;const r=((t,e)=>{for(const r in t)if(!["created_at","updated_at"].includes(r)&&String(t[r]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(e,this.search);return!!r}))}},methods:{getOrders(){Ir.deliveryDeliveredOrders().then((t=>{const e=t.data.data.orders;this.$store.dispatch("order/setOrders",e),this.isLoaded=!0}),this.$handleApiError)}},mounted(){this.$store.dispatch("order/setOrders",[]),this.getOrders()}};const W1=(0,d.Z)($1,[["render",A0]]);var q1=W1,O1={name:"deliveries",path:"/deliveries",component:sa,meta:{module:"delivery"},children:[{name:"delivery/list",path:"",component:g0,meta:{module:"delivery",subModule:"delivery/list",title:"Orders List",gate:"all"}},{name:"delivery/delivered",path:"/delivered",component:q1,meta:{module:"delivery",subModule:"delivery/delivered",title:"Delivered Orders List",gate:"all"}}]};const E1=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Inventory State List "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"See your inventory state")])],-1),T1={key:0},V1={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},I1={class:"mb-5 tw-flex"},F1={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},R1={key:0,class:""};function j1(t,e,r,i,o,l){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("InventoryStateTable");return(0,s.wg)(),(0,s.iD)("div",null,[E1,o.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",T1,[(0,s.Wm)(n)])),o.isLoaded?((0,s.wg)(),(0,s.iD)("div",V1,[(0,s._)("div",I1,[(0,s.Wm)(G.T,{icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white !tw-w-0 !tw-overflow-hidden"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",F1,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,o.search]])])]),l.inventoryState.length>0?((0,s.wg)(),(0,s.iD)("div",R1,[(0,s.Wm)(d,{columns:o.columns,states:l.filteredInventoryState},null,8,["columns","states"])])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])}class N1{async inventoryStates(){return await Y.getCookie(),M.get("api/inventorystates")}async inventoryMovements(){return await Y.getCookie(),M.get("api/inventorymovements")}async getMovement(t){return await Y.getCookie(),M.get("api/inventorymovements/"+t)}async inventoryMovementCreate({product_id:t,delivery_id:e,variants:r}){return await Y.getCookie(),M.post("api/inventorymovements/new",{product_id:t,delivery_id:e,variations:r})}async inventoryMovementUpdate(t,{product_id:e,delivery_id:r,variants:a,quantity:s}){return await Y.getCookie(),M.post("api/inventorymovements/update/"+t,{product_id:e,delivery_id:r,variants:a,quantity:s})}async deliveryUpdateMovement(t,e,r){return await Y.getCookie(),M.post("api/delivery/inventorymovements/update/"+t,{is_received:e,note:r})}async delete(t){return await Y.getCookie(),M["delete"]("api/inventorymovements/delete/"+t)}}var M1=new N1;const H1={class:"tw-relative tw-min-h-[400px] tw-overflow-x-auto tw-overflow-y-visible sm:tw-rounded-lg"},Y1={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Z1={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},K1=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),B1={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},Q1=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),G1={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},J1={class:"tw-px-6 tw-py-4 tw-underline tw-underline-offset-1 tw-font-medium"},X1={class:"tw-px-6 tw-py-4"},t2={class:"tw-px-6 tw-py-4"},e2={class:"tw-px-6 tw-py-4 tw-font-bold tw-text-green-500"},r2={class:"tw-px-6 tw-py-4"},a2={class:"tw-px-6 tw-py-4"},s2=(0,s._)("br",null,null,-1),i2={class:"tw-px-6 tw-py-4"},o2={class:"mt-5 tw-flex tw-justify-between"},l2={class:"d-flex align-center"},n2=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700"},"Show per page: ",-1),d2={class:"d-flex align-center"},w2={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},c2={class:"tw-text-white"};function u2(t,e,r,a,i,o){const l=(0,s.up)("router-link"),n=(0,s.up)("InventoryStateActions");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",H1,[(0,s._)("table",Y1,[(0,s._)("thead",Z1,[(0,s._)("tr",null,[K1,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",B1,(0,Q.zw)(t.name),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.items,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:e,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[Q1,(0,s._)("th",G1,(0,Q.zw)(t.id),1),(0,s._)("td",J1,[(0,s.Wm)(l,{to:"products/"+t.id},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(t.name),1)])),_:2},1032,["to"])]),(0,s._)("td",X1,(0,Q.zw)(t.buying_price)+" DH ",1),(0,s._)("td",t2,(0,Q.zw)(t.selling_price)+" DH ",1),(0,s._)("td",e2,(0,Q.zw)(o.availableQuantity(t)),1),(0,s._)("td",r2,(0,Q.zw)(t.total_quantity),1),(0,s._)("td",a2,[(0,s.Uk)((0,Q.zw)(t.updated_at?.split("T")[0])+" ",1),s2,(0,s.Uk)(" "+(0,Q.zw)(t.updated_at?.split("T")[1].split(".")[0]),1)]),(0,s._)("td",i2,[(0,s.Wm)(n,{state:t},null,8,["state"])])])))),128))])])]),(0,s._)("div",o2,[(0,s._)("div",l2,[n2,(0,s.Wm)(pp.r,{"hide-details":!0,modelValue:i.paginationLimit,"onUpdate:modelValue":e[0]||(e[0]=t=>i.paginationLimit=t),items:i.allowedLimit,variant:"outlined",density:"compact",color:"primary-color"},null,8,["modelValue","items"])]),(0,s._)("div",d2,[(0,s._)("div",w2,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(i.currentPage==o.pageCount?r.states.length:o.nextRange)+" of "+(0,Q.zw)(r.states.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pageCount,(t=>((0,s.wg)(),(0,s.j4)(G.T,{onClick:e=>i.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==i.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",c2,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}function p2(t,e,r,a,i,o){const l=(0,s.up)("InventoryStateDetails"),n=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",{key:r.state.id,class:"tw-flex tw-items-center"},[(0,s.Wm)(G.T,{onClick:e[0]||(e[0]=t=>i.detailsPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-eye-outline")])),_:1})])),_:1}),(0,s.Wm)(n,{visible:i.detailsPopup,onCancel:e[2]||(e[2]=t=>i.detailsPopup=!1)},{default:(0,s.w5)((()=>[i.detailsPopup?((0,s.wg)(),(0,s.j4)(l,{key:0,onCancel:e[1]||(e[1]=t=>i.detailsPopup=!1),state:r.state},null,8,["state"])):(0,s.kq)("",!0)])),_:1},8,["visible"])])}const m2={class:"md:tw-w-[50%] tw-relative tw-max-h-full tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},h2={class:"tw-p-5"},g2={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500 tw-rounded-md tw-overflow-hidden"},f2=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"}," SIZE "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," COLOR "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY ")])],-1),v2={class:"tw-w-4 tw-p-4"},y2={class:"tw-w-4 tw-p-4"},x2={class:"tw-w-4 tw-p-4"},b2={class:"tw-w-4 tw-p-4"},_2={class:"tw-flex tw-items-center tw-gap-1"},k2={class:"tw-text-green-500"},C2={key:0},D2={class:"tw-text-red-400"},S2=(0,s.uE)('<div class="tw-flex tw-gap-3 mt-5"><div class="tw-flex tw-items-center tw-gap-1 tw-text-xs"><div class="tw-w-[10px] tw-h-[10px] tw-rounded-full tw-bg-green-500"></div><span>Available</span></div><div class="tw-flex tw-items-center tw-gap-1 tw-text-xs"><div class="tw-w-[10px] tw-h-[10px] tw-rounded-full tw-bg-neutral-700"></div><span>Initial</span></div><div class="tw-flex tw-items-center tw-gap-1 tw-text-xs"><div class="tw-w-[10px] tw-h-[10px] tw-rounded-full tw-bg-red-400"></div><span>Not Received</span></div></div>',1);function z2(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",m2,[(0,s.Wm)(G.T,{onClick:o.cancel,icon:"mdi-close",variant:"flat",size:"w-small",color:"red",class:"tw-absolute tw-top-3 tw-z-10 tw-right-3"},null,8,["onClick"]),(0,s._)("div",h2,[(0,s._)("table",g2,[f2,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.state.variations,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,s._)("td",v2,(0,Q.zw)(t.id),1),(0,s._)("td",y2,(0,Q.zw)(t.size),1),(0,s._)("td",x2,(0,Q.zw)(t.color),1),(0,s._)("td",b2,[(0,s._)("div",_2,[(0,s._)("span",k2,(0,Q.zw)(t.available_quantity),1),(0,s._)("span",null,"/ "+(0,Q.zw)(t.quantity),1),t.on_hold>0?((0,s.wg)(),(0,s.iD)("span",C2,[(0,s.Uk)(" / "),(0,s._)("span",D2,(0,Q.zw)(t.on_hold),1)])):(0,s.kq)("",!0)])])])))),128))])]),S2])])}var U2={props:["state"],data(){return{}},computed:{},methods:{cancel(){this.$emit("cancel")}},mounted(){console.log(this.state)}};const L2=(0,d.Z)(U2,[["render",z2]]);var P2=L2,A2={props:["rowIndex","state"],components:{InventoryStateDetails:P2},name:"inventoryStateActions",data(){return{showPopup:!1,confirmPopup:!1,detailsPopup:!1,isConfirmed:!1,note:"",isLoading:!1}},computed:{user(){return this.$store.getters["user/user"]}},methods:{},mounted(){}};const $2=(0,d.Z)(A2,[["render",p2]]);var W2=$2,q2={props:["columns","states"],components:{InventoryStateActions:W2},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.states.length/this.paginationLimit)},items(){return this.states.slice(this.prevRange,this.nextRange)}},methods:{availableQuantity(t){let e=0;return t.variations.forEach((t=>{e+=t.available_quantity})),e}}};const O2=(0,d.Z)(q2,[["render",u2]]);var E2=O2,T2={components:{InventoryStateTable:E2},data(){return{localUrl:I,isLoaded:!1,showFilters:!1,search:"",columns:[{prop:"id",name:"#"},{prop:"product_name",name:"Product Name"},{prop:"buying_price",name:"Buying Price"},{prop:"selling_price",name:"Selling Price"},{prop:"available",name:"Available"},{prop:"quantity",name:"Quantity"},{prop:"updated_at",name:"Updated At"},{prop:"actions",name:"Actions"}]}},computed:{inventoryState(){return this.$store.getters["inventory/inventoryState"]},filteredInventoryState(){return this.inventoryState.filter((t=>!!(t.ref.toLowerCase().includes(this.search.toLowerCase())||t.name.toLowerCase().includes(this.search.toLowerCase())||t.description.toLowerCase().includes(this.search.toLowerCase()))))}},methods:{async getInventoryStates(){await M1.inventoryStates().then((t=>{if(console.log(t.data.data),"SHOW_ALL_INVENTORY_STATES"==t.data.code){const e=t.data.data;this.$store.dispatch("inventory/setInventoryState",e)}}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))}},async mounted(){this.getInventoryStates()}};const V2=(0,d.Z)(T2,[["render",j1]]);var I2=V2;const F2=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Add Inventory Movement"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create New Movement")],-1),R2={key:0},j2={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},N2={class:"tw-w-full"},M2=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery",-1),H2={class:"tw-relative"},Y2=["disabled"],Z2=["value"],K2={class:"tw-w-full"},B2=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Product Name",-1),Q2={class:"tw-relative"},G2=["disabled"],J2=["value"],X2={class:"tw-w-full"},t5=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variation",-1),e5={class:"tw-relative"},r5=["value"],a5={class:"tw-w-full"},s5=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),i5={class:"tw-w-full tw-h-full tw-flex tw-items-end"},o5=(0,s._)("span",{class:"text-white text-capitalize"},"Add",-1),l5={class:"tw-max-w-full"},n5={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},d5=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"}," SIZE "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," COLOR "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate tw-max-w-[50px]"}," ACTIONS ")])],-1),w5={class:"tw-w-4 tw-p-4"},c5={class:"tw-w-4 tw-p-4"},u5={class:"tw-w-4 tw-p-4"},p5={class:"tw-w-4 tw-p-4"},m5={class:"tw-w-4 tw-p-4"},h5={class:"tw-w-fit tw-h-full tw-flex tw-items-end"},g5={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},f5=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),v5=(0,s._)("span",{class:"text-white text-capitalize"},"Create",-1);function y5(t,e,r,i,o,l){const n=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[F2,o.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",R2,[(0,s.Wm)(n)])),o.isLoaded?((0,s.wg)(),(0,s.iD)("div",j2,[(0,s._)("div",null,[(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",N2,[M2,(0,s._)("div",H2,[(0,s.wy)((0,s._)("select",{disabled:o.selectedVariations.length,"onUpdate:modelValue":e[0]||(e[0]=t=>o.delivery=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-capitalize tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname+" "+t.lastname),9,Z2)))),128))],8,Y2),[[a.bM,o.delivery]]),(0,s.Wm)(X.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",K2,[B2,(0,s._)("div",Q2,[(0,s.wy)((0,s._)("select",{disabled:o.selectedVariations.length>0,"onUpdate:modelValue":e[1]||(e[1]=t=>o.product=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.products,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,J2)))),128))],8,G2),[[a.bM,o.product]]),(0,s.Wm)(X.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",X2,[t5,(0,s._)("div",e5,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.variation=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.color+" - "+t.size+"  ("+t.available_quantity+" items)"),9,r5)))),128))],512),[[a.bM,o.variation]]),(0,s.Wm)(X.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",sm:"4",md:"4"},{default:(0,s.w5)((()=>[(0,s._)("div",a5,[s5,(0,s._)("div",null,[(0,s.Wm)(tt.hw,{type:"number",onChange:l.handleQuantityChange,"hide-details":!0,modelValue:o.quantity,"onUpdate:modelValue":e[3]||(e[3]=t=>o.quantity=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","modelValue"])])])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",sm:"2",md:"2"},{default:(0,s.w5)((()=>[(0,s._)("div",i5,[(0,s.Wm)(G.T,{onClick:l.addVariation,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[o5])),_:1},8,["onClick"])])])),_:1}),(0,s.Wm)(na.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",l5,[(0,s._)("table",n5,[d5,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.selectedVariations,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,s._)("td",w5,(0,Q.zw)(t.id),1),(0,s._)("td",c5,(0,Q.zw)(t.size),1),(0,s._)("td",u5,(0,Q.zw)(t.color),1),(0,s._)("td",p5,(0,Q.zw)(t.quantity),1),(0,s._)("td",m5,[(0,s._)("div",h5,[(0,s.Wm)(G.T,{onClick:e=>l.deleteVariation(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])])])])),_:1})])),_:1})]),(0,s._)("div",g5,[(0,s.Wm)(G.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[f5])),_:1}),(0,s.Wm)(G.T,{onClick:l.create,loading:o.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[v5])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}var x5={data(){return{isLoading:!1,isLoaded:!1,variationId:0,product:1,delivery:1,quantity:0,variation:0,selectedVariations:[]}},computed:{products(){return this.$store.getters["product/products"]},deliveries(){return this.$store.getters["user/deliveries"]},variations(){return this.products.find((t=>t.id==this.product))?.variations.filter((t=>{let e=!0;return this.selectedVariations.forEach((r=>{t.id==r.id&&(e=!1)})),e}))}},watch:{product(){this.variations.length>0?this.variation=this.variations[0].id:this.variation=null}},methods:{addVariation(){if(0==this.variations.length)return!1;const t=this.variations.find((t=>t.id==this.variation));if(!t)return!1;if(this.quantity>t.available_quantity||0==this.quantity)return this.$alert({type:"warning",title:"Quantity should be between 1 and "+t.available_quantity}),!1;const e={id:t.id,size:t.size,color:t.color,quantity:this.quantity};this.quantity=0,this.selectedVariations.push(e),this.variations.length>0?this.variation=this.variations[0].id:this.variation=null},deleteVariation(t){this.selectedVariations=this.selectedVariations.filter((e=>e.id!==t)),1==this.variations.length&&(this.variation=this.variations[0].id)},create(){if(0==this.selectedVariations.length)return this.$alert({type:"warning",title:"You need to add some variations"}),!1;let t=0;this.selectedVariations.forEach((e=>t+=e.quantity)),this.isLoading=!0,M1.inventoryMovementCreate({product_id:this.product,delivery_id:this.delivery,variants:this.selectedVariations,quantity:this.qty}).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.selectedVariations=[],this.getData()),"ERROR_QUANTITY"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).finally((()=>this.isLoading=!1))},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},async getDeliveries(){await K.deliveries().then((t=>{const e=t.data.data;this.$store.dispatch("user/setDeliveries",e),e.length>0?this.delivery=e[0].id:this.delivery=null}),this.$handleApiError)},getProducts(){return M1.inventoryStates().then((t=>{if("SHOW_ALL_INVENTORY_STATES"==t.data.code){const e=t.data.data;if(this.$store.dispatch("product/setProducts",e),e.length>0){const t=e[0];this.product=t.id,this.variations.length>0&&(this.variation=this.variations[0].id)}else this.product=null}}),(t=>{this.$handleApiError(t)}))},getData(){this.isLoaded=!1,Promise.allSettled([this.getProducts(),this.getDeliveries()]).then((()=>{this.isLoaded=!0}))}},mounted(){this.getData()}};const b5=(0,d.Z)(x5,[["render",y5]]);var _5=b5;const k5=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Update Inventory Movement"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Edit an existing Movement")],-1),C5={key:0},D5={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},S5={class:"tw-w-full"},z5=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery",-1),U5={class:"tw-relative"},L5=["value"],P5={class:"tw-w-full"},A5=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variation",-1),$5={class:"tw-relative"},W5=["value"],q5={class:"tw-w-full"},O5=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),E5={class:"tw-w-full tw-h-full tw-flex tw-items-end"},T5=(0,s._)("span",{class:"text-white text-capitalize"},"Add",-1),V5={class:"tw-max-w-full"},I5={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},F5=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"}," SIZE "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," COLOR "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate tw-max-w-[50px]"}," ACTIONS ")])],-1),R5={class:"tw-w-4 tw-p-4"},j5={class:"tw-w-4 tw-p-4"},N5={class:"tw-w-4 tw-p-4"},M5={class:"tw-w-4 tw-p-4"},H5={class:"tw-w-4 tw-p-4"},Y5={class:"tw-w-fit tw-h-full tw-flex tw-items-end"},Z5={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},K5=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),B5=(0,s._)("span",{class:"text-white text-capitalize"},"Update",-1);function Q5(t,e,r,i,o,l){const n=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[k5,o.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",C5,[(0,s.Wm)(n)])),o.isLoaded?((0,s.wg)(),(0,s.iD)("div",D5,[(0,s._)("div",null,[(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",S5,[z5,(0,s._)("div",U5,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.delivery=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-capitalize tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname+" "+t.lastname),9,L5)))),128))],512),[[a.bM,o.delivery]]),(0,s.Wm)(X.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",P5,[A5,(0,s._)("div",$5,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.variation=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.color+" / "+t.size+" / "+t.quantity),9,W5)))),128))],512),[[a.bM,o.variation]]),(0,s.Wm)(X.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",sm:"4",md:"4"},{default:(0,s.w5)((()=>[(0,s._)("div",q5,[O5,(0,s._)("div",null,[(0,s.Wm)(tt.hw,{type:"number",onChange:l.handleQuantityChange,"hide-details":!0,modelValue:o.quantity,"onUpdate:modelValue":e[2]||(e[2]=t=>o.quantity=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","modelValue"])])])])),_:1}),(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",sm:"2",md:"2"},{default:(0,s.w5)((()=>[(0,s._)("div",E5,[(0,s.Wm)(G.T,{onClick:l.addVariation,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[T5])),_:1},8,["onClick"])])])),_:1}),(0,s.Wm)(na.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",V5,[(0,s._)("table",I5,[F5,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.selectedVariations,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,s._)("td",R5,(0,Q.zw)(t.id),1),(0,s._)("td",j5,(0,Q.zw)(t.size),1),(0,s._)("td",N5,(0,Q.zw)(t.color),1),(0,s._)("td",M5,(0,Q.zw)(t.quantity),1),(0,s._)("td",H5,[(0,s._)("div",Y5,[(0,s.Wm)(G.T,{onClick:e=>l.deleteVariation(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])])])])),_:1})])),_:1})]),(0,s._)("div",Z5,[(0,s.Wm)(G.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[K5])),_:1}),(0,s.Wm)(G.T,{onClick:l.update,loading:o.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[B5])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}var G5={data(){return{isLoading:!1,isLoaded:!1,movement:null,variationId:0,product:1,delivery:1,quantity:0,variation:0,selectedVariations:[]}},computed:{products(){return this.$store.getters["product/products"]},deliveries(){return this.$store.getters["user/deliveries"]},id(){return this.$route.params.id},variations(){return this.products.find((t=>t.id==this.product))?.variations.filter((t=>{let e=!0;return this.selectedVariations.forEach((r=>{t.id==r.id&&(e=!1)})),e}))}},watch:{product(){this.variations.length>0?this.variation=this.variations[0].id:this.variation=null}},methods:{addVariation(){if(0==this.variations.length)return!1;const t=this.variations.find((t=>t.id==this.variation));if(!t)return!1;if(this.quantity>t.quantity||0==this.quantity)return this.$alert({type:"warning",title:"Quantity should be between 1 and "+t.quantity}),!1;const e={id:t.id,size:t.size,color:t.color,quantity:this.quantity};this.quantity=0,this.selectedVariations.push(e),this.variations.length>0?this.variation=this.variations[0].id:this.variation=null},deleteVariation(t){this.selectedVariations=this.selectedVariations.filter((e=>e.id!==t)),1==this.variations.length&&(this.variation=this.variations[0].id)},update(){if(0==this.selectedVariations.length)return this.$alert({type:"warning",title:"You need to add some variations"}),!1;let t=0;this.selectedVariations.forEach((e=>t+=e.quantity)),this.isLoading=!0,M1.inventoryMovementUpdate(this.id,{product_id:this.product,delivery_id:this.delivery,variants:this.selectedVariations,quantity:this.qty}).then((t=>{"SUCCESS"==t.data.code&&this.$alert({type:"success",title:t.data.message}),"ERROR_QUANTITY"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).finally((()=>this.isLoading=!1))},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},async getDeliveries(){await K.deliveries().then((t=>{const e=t.data.data;this.$store.dispatch("user/setDeliveries",e),e.length>0?this.delivery=e[0].id:this.delivery=null}),this.$handleApiError)},getProducts(){return ea.all().then((t=>{if("SUCCESS"==t.data.code){const e=t.data.data.products;this.$store.dispatch("product/setProducts",e),e.length>0?this.product=e[0].id:this.product=null}}),(t=>{this.$handleApiError(t)}))},getMovement(){return M1.getMovement(this.id).then((t=>{if("SUCCESS"==t.data.code){const e=t.data.data.movement;this.product=e.product.id,this.delivery=e.delivery.id,this.selectedVariations=e.inventory_movement_variations;let r=0;this.selectedVariations.forEach((t=>{r+=t.quantity})),this.quantity_total=r}}),(t=>{this.$handleApiError(t)}))}},mounted(){Promise.allSettled([this.getProducts(),this.getDeliveries(),this.getMovement()]).then((()=>{this.isLoaded=!0}))}};const J5=(0,d.Z)(G5,[["render",Q5]]);var X5=J5;const t4=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Inventory State List"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"See your inventory state")])],-1),e4={key:0},r4={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},a4={class:"mb-5 tw-flex"},s4={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},i4={key:0,class:""};function o4(t,e,r,i,o,l){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("InventoryMovementsTable");return(0,s.wg)(),(0,s.iD)("div",null,[t4,o.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",e4,[(0,s.Wm)(n)])),o.isLoaded?((0,s.wg)(),(0,s.iD)("div",r4,[(0,s._)("div",a4,[(0,s.Wm)(G.T,{icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white !tw-w-0 !tw-overflow-hidden"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",s4,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,o.search]])])]),l.inventoryMovements.length>0?((0,s.wg)(),(0,s.iD)("div",i4,[(0,s.Wm)(d,{columns:o.columns,movements:l.inventoryMovements},null,8,["columns","movements"])])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])}const l4={class:"tw-relative tw-min-h-[400px] tw-overflow-x-auto tw-overflow-y-visible sm:tw-rounded-lg"},n4={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},d4={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},w4=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),c4={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},u4=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),p4={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},m4={class:"tw-px-6 tw-py-4"},h4=(0,s._)("br",null,null,-1),g4={class:"tw-px-6 tw-py-4"},f4={class:"tw-px-6 tw-py-4"},v4={class:"tw-px-6 tw-py-4"},y4={class:"tw-px-6 tw-py-4"},x4={class:"tw-px-6 tw-py-4"},b4={class:"tw-w-[200px] !tw-whitespace-normal"},_4={class:"tw-px-6 tw-py-4"},k4={class:"tw-px-6 tw-py-4"},C4={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},D4={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},S4=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),z4=["value"],U4={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},L4={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},P4={class:"tw-text-white"};function A4(t,e,r,i,o,l){const n=(0,s.up)("router-link"),d=(0,s.up)("InventoryMovementsActions");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",l4,[(0,s._)("table",n4,[(0,s._)("thead",d4,[(0,s._)("tr",null,[w4,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",c4,(0,Q.zw)(t.name),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.movements,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:e,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[u4,(0,s._)("th",p4,(0,Q.zw)(t.id),1),(0,s._)("td",m4,[(0,s.Uk)((0,Q.zw)(t.created_at?.split("T")[0])+" ",1),h4,(0,s.Uk)(" "+(0,Q.zw)(t.created_at?.split("T")[1].split(".")[0]),1)]),(0,s._)("td",g4,(0,Q.zw)(t.delivery.firstname+" "+t.delivery.lastname),1),(0,s._)("td",f4,[(0,s.Wm)(n,{to:"products/"+t.product.id},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(t.product.name),1)])),_:2},1032,["to"])]),(0,s._)("td",v4,(0,Q.zw)(l.quantityTotal(t.inventory_movement_variations)),1),(0,s._)("td",y4,[(0,s._)("div",{class:(0,Q.C_)([[t.is_received?"tw-text-green-500 tw-bg-green-500/10":"tw-text-red-500 tw-bg-red-500/10"],"tw-flex tw-justify-center tw-py-1 tw-rounded-lg tw-items-center"])},[(0,s._)("span",null,(0,Q.zw)(t.is_received?"Yes":"No"),1)],2)]),(0,s._)("td",x4,[(0,s._)("div",b4,(0,Q.zw)(t.note?t.note:"-"),1)]),(0,s._)("td",_4,(0,Q.zw)(t.delivery.city?.name),1),(0,s._)("td",k4,[(0,s.Wm)(d,{movement:t},null,8,["movement"])])])))),128))])])]),(0,s._)("div",C4,[(0,s._)("div",D4,[S4,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,z4)))),128))],512),[[a.bM,o.paginationLimit]])]),(0,s._)("div",U4,[(0,s._)("div",L4,(0,Q.zw)(l.prevRange+1)+" - "+(0,Q.zw)(o.currentPage==l.pageCount?r.movements.length:l.nextRange)+" of "+(0,Q.zw)(r.movements.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.pageCount,(t=>((0,s.wg)(),(0,s.j4)(G.T,{onClick:e=>o.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==o.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",P4,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const $4={class:"md:tw-w-[50%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},W4=(0,s._)("h1",{class:"tw-text-lg tw-font-medium tw-text-blue-500"},"Confirmation",-1),q4={class:"mt-3"},O4=(0,s._)("h2",{class:"mb-2"},"Received",-1),E4={class:"tw-mt-3"},T4=(0,s._)("h2",{class:"tw-text-md mb-1"},"Add note",-1),V4={class:"tw-flex tw-gap-2 mt-3 tw-justify-end"},I4=(0,s._)("span",{class:"text-white"}," Cancel ",-1),F4=(0,s._)("span",{class:"text-white"}," Update ",-1);function R4(t,e,r,i,o,l){const n=(0,s.up)("popup-full"),d=(0,s.up)("MovementDetails"),w=(0,s.up)("popup");return(0,s.wg)(),(0,s.iD)("div",{key:r.movement.id,class:"tw-flex tw-items-center"},[["delivery","admin"].includes(l.user.role)?((0,s.wg)(),(0,s.j4)(G.T,{key:0,onClick:e[0]||(e[0]=t=>o.confirmPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-checkbox-marked-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.kq)("",!0),(t.$can("view_inventory_movement"),(0,s.wg)(),(0,s.j4)(G.T,{key:2,onClick:e[1]||(e[1]=t=>o.detailsPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-eye-outline")])),_:1})])),_:1})),t.$can("delete_inventory_movement")?((0,s.wg)(),(0,s.j4)(G.T,{key:3,onClick:e[2]||(e[2]=t=>o.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),t.$can("confirmation_inventory_movement")?((0,s.wg)(),(0,s.j4)(n,{key:4,visible:o.confirmPopup,onCancel:e[6]||(e[6]=t=>o.confirmPopup=!1)},{default:(0,s.w5)((()=>[(0,s._)("div",$4,[W4,(0,s._)("div",q4,[O4,(0,s.Wm)(el.G,{density:"compact","hide-details":!0,modelValue:o.isConfirmed,"onUpdate:modelValue":e[3]||(e[3]=t=>o.isConfirmed=t),color:"blue"},null,8,["modelValue"])]),(0,s._)("div",E4,[T4,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.note=t),cols:"30",rows:"3",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n\r\n              ",512),[[a.nr,o.note]])]),(0,s._)("div",V4,[(0,s.Wm)(G.T,{onClick:e[5]||(e[5]=t=>o.confirmPopup=!1),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[I4])),_:1}),(0,s.Wm)(G.T,{loading:o.isLoading,onClick:l.updateMovement,color:"blue",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[F4])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])):(0,s.kq)("",!0),(0,s.Wm)(n,{visible:o.detailsPopup,onCancel:e[8]||(e[8]=t=>o.detailsPopup=!1)},{default:(0,s.w5)((()=>[o.detailsPopup?((0,s.wg)(),(0,s.j4)(d,{key:0,onCancel:e[7]||(e[7]=t=>o.detailsPopup=!1),movement:r.movement},null,8,["movement"])):(0,s.kq)("",!0)])),_:1},8,["visible"]),(0,s.Wm)(w,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this movement?</p> You won't be able to revert this!",loading:o.isLoading,visible:o.showPopup,onResolved:l.handleResolved},null,8,["loading","visible","onResolved"])])}const j4={class:"md:tw-w-[50%] tw-relative tw-max-h-full tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},N4={class:"tw-p-5"},M4={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500 tw-rounded-md tw-overflow-hidden"},H4=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"}," SIZE "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," COLOR "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY ")])],-1),Y4={class:"tw-w-4 tw-p-4"},Z4={class:"tw-w-4 tw-p-4"},K4={class:"tw-w-4 tw-p-4"},B4={class:"tw-w-4 tw-p-4"};function Q4(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",j4,[(0,s.Wm)(G.T,{onClick:o.cancel,icon:"mdi-close",variant:"flat",size:"w-small",color:"red",class:"tw-absolute tw-top-3 tw-z-10 tw-right-3"},null,8,["onClick"]),(0,s._)("div",N4,[(0,s._)("table",M4,[H4,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.movement.inventory_movement_variations,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,s._)("td",Y4,(0,Q.zw)(t.id),1),(0,s._)("td",Z4,(0,Q.zw)(t.product_variation.size),1),(0,s._)("td",K4,(0,Q.zw)(t.product_variation.color),1),(0,s._)("td",B4,(0,Q.zw)(t.quantity),1)])))),128))])])])])}var G4={props:["movement"],data(){return{}},computed:{},methods:{cancel(){this.$emit("cancel")}},mounted(){}};const J4=(0,d.Z)(G4,[["render",Q4]]);var X4=J4,t3={props:["rowIndex","movement"],components:{MovementDetails:X4},name:"inventoryActions",data(){return{showPopup:!1,confirmPopup:!1,detailsPopup:!1,isConfirmed:!1,note:"",isLoading:!1}},computed:{user(){return this.$store.getters["user/user"]}},methods:{handleResolved(t){t?(this.isLoading=!0,M1["delete"](this.movement.id).then((t=>{"SUCCESS"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Inventory Movement Deleted Successfully"})),this.getMovements()})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1},updateMovement(){this.isLoading=!0,M1.deliveryUpdateMovement(this.movement.id,this.isConfirmed?1:0,this.note).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:"Inventory Movement Updated Successfully"}),this.getMovements())}),this.$handleApiError).finally((()=>{this.isLoading=!1,this.confirmPopup=!1}))},getMovements(){M1.inventoryMovements().then((t=>{if("SHOW_ALL_INVENTORY_MOVEMENTS"==t.data.code){const e=t.data.data;this.$store.dispatch("inventory/setInventoryMovements",e)}})).catch(this.$handleApiError)}},mounted(){this.note=this.movement.note,this.isConfirmed=1==this.movement.is_received}};const e3=(0,d.Z)(t3,[["render",R4]]);var r3=e3,a3={props:["columns","movements"],components:{InventoryMovementsActions:r3},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.movements.length/this.paginationLimit)},items(){return this.movements.slice(this.prevRange,this.nextRange)}},methods:{quantityTotal(t){let e=0;return t.forEach((t=>{e+=t.quantity})),e}}};const s3=(0,d.Z)(a3,[["render",A4]]);var i3=s3,o3={components:{InventoryMovementsTable:i3},data(){return{localUrl:I,isLoaded:!1,showFilters:!1,search:"",columns:[{prop:"id",name:"#"},{prop:"created_at",name:"Date"},{prop:"delivery",name:"Delivery"},{prop:"product",name:"Product"},{prop:"quantity",name:"Quantity"},{prop:"received",name:"Received"},{prop:"note",name:"Note"},{prop:"city",name:"City"},{prop:"actions",name:"Actions"}]}},computed:{inventoryMovements(){return this.$store.getters["inventory/inventoryMovements"]},filteredInventoryState(){return this.inventoryMovements.filter((()=>!0))}},methods:{async getInventoryMovements(){await M1.inventoryMovements().then((t=>{if(console.log(t.data.data),"SHOW_ALL_INVENTORY_MOVEMENTS"==t.data.code){const e=t.data.data;this.$store.dispatch("inventory/setInventoryMovements",e),console.log(e)}}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))}},async mounted(){this.getInventoryMovements()}};const l3=(0,d.Z)(o3,[["render",o4]]);var n3=l3,d3={name:"inventory/list",path:"/inventories",component:sa,meta:{module:"inventory"},children:[{name:"inventory/state",path:"",component:I2,meta:{module:"inventory",subModule:"inventory/list",title:"Inventory State",gate:"show_all_inventory_states"}},{name:"inventory/movememnts",path:"movements",component:n3,meta:{module:"inventory",subModule:"inventory/movements",title:"Inventory Movements",gate:"show_all_inventory_movements"}},{name:"inventory/add",path:"add",component:_5,meta:{module:"inventory",subModule:"inventory/add",title:"Add Inventory Movement",gate:"create_inventory_movement"}},{name:"inventory/update",path:"update/:id",component:X5,meta:{module:"inventory",subModule:"inventory/update",title:"Update Inventory Movement",gate:"update_inventory_movement"}}]};const w3={class:"mb-5 tw-flex tw-justify-between tw-items-center"},c3=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Shop List"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your shops")],-1),u3={key:0},p3=(0,s._)("span",{class:"text-white"}," Add Shop ",-1),m3={key:0},h3={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},g3={class:"mb-5 tw-flex"},f3={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},v3={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},y3={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},x3=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),b3={class:"tw-relative"},_3={class:""};function k3(t,e,r,i,o,l){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("ShopsTable");return(0,s.wg)(),(0,s.iD)("div",{key:l.shops.length},[(0,s._)("div",w3,[c3,t.$can("create_shop")?((0,s.wg)(),(0,s.iD)("div",u3,[(0,s.Wm)(G.T,{color:"primary-color",link:"",to:{name:"shop/add"},variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),p3])),_:1})])):(0,s.kq)("",!0)]),o.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",m3,[(0,s.Wm)(n)])),o.isLoaded?((0,s.wg)(),(0,s.iD)("div",h3,[(0,s._)("div",g3,[(0,s.Wm)(G.T,{onClick:e[0]||(e[0]=t=>o.showFilters=!o.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",f3,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,o.search]])])]),(0,s._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":o.showFilters}])},[(0,s._)("div",v3,[(0,s._)("div",y3,[x3,(0,s._)("div",b3,[(0,s.wy)((0,s._)("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=t=>o.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[a.nr,o.date]])])])])],2),(0,s._)("div",_3,[(0,s.Wm)(d,{columns:o.columns,shops:l.filteredShops},null,8,["columns","shops"])])])):(0,s.kq)("",!0)])}class C3{async create(t){return await Y.getCookie(),M.post("api/shops/new",{name:t.name})}async update(t,e){return await Y.getCookie(),M.post("api/shops/update/"+t,{name:e.name})}async all(){return await Y.getCookie(),M.get("api/shops")}async getShop(t){return await Y.getCookie(),M.get("api/shops/"+t)}async delete(t){return await Y.getCookie(),M["delete"]("api/shops/delete/"+t)}}var D3=new C3;const S3={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},z3={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},U3={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},L3=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),P3={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},A3=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),$3={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},W3={class:"tw-px-6 tw-py-4"},q3={class:"tw-px-6 tw-py-4"},O3={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},E3={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},T3={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},V3=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),I3=["value"],F3={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},R3={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},j3={class:"tw-text-white"};function N3(t,e,r,i,o,l){const n=(0,s.up)("ShopActions");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",S3,[(0,s._)("table",z3,[(0,s._)("thead",U3,[(0,s._)("tr",null,[L3,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",P3,(0,Q.zw)(t.name),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.shops,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[A3,(0,s._)("th",$3,(0,Q.zw)(t.id),1),(0,s._)("td",W3,(0,Q.zw)(t.name),1),(0,s._)("td",q3,(0,Q.zw)(t.created_at.split("T")[0]),1),(0,s._)("td",O3,[(0,s.Wm)(n,{shop:t},null,8,["shop"])])])))),128))])])]),(0,s._)("div",E3,[(0,s._)("div",T3,[V3,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,I3)))),128))],512),[[a.bM,o.paginationLimit]])]),(0,s._)("div",F3,[(0,s._)("div",R3,(0,Q.zw)(l.prevRange+1)+" - "+(0,Q.zw)(o.currentPage==l.pageCount?r.shops.length:l.nextRange)+" of "+(0,Q.zw)(r.shops.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.pageCount,(t=>((0,s.wg)(),(0,s.j4)(G.T,{onClick:e=>o.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==o.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",j3,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const M3={class:"tw-flex tw-items-center tw-gap-1"};function H3(t,e,r,a,i,o){const l=(0,s.up)("popup");return(0,s.wg)(),(0,s.iD)("div",M3,[t.$can("update_shop")?((0,s.wg)(),(0,s.j4)(G.T,{key:0,to:"/shops/update/"+r.shop.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1},8,["to"])):(0,s.kq)("",!0),t.$can("delete_shop")?((0,s.wg)(),(0,s.j4)(G.T,{key:1,onClick:e[0]||(e[0]=t=>i.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(l,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this shop?</p> You won't be able to revert this!",loading:i.isLoading,visible:i.showPopup,onResolved:o.handleResolved},null,8,["loading","visible","onResolved"])])}var Y3={props:["rowIndex","shop"],name:"shopActions",data(){return{showPopup:!1,isLoading:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,D3["delete"](this.shop.id).then((t=>{"SHOP_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Shop Deleted Successfully"})),D3.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("shop/setShops",t.data.data.shops)})).catch(this.$handleApiError)})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const Z3=(0,d.Z)(Y3,[["render",H3]]);var K3=Z3,B3={props:["columns","shops"],components:{ShopActions:K3},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.shops.length/this.paginationLimit)},items(){return this.shops.slice(this.prevRange,this.nextRange)}},methods:{}};const Q3=(0,d.Z)(B3,[["render",N3]]);var G3=Q3,J3={components:{ShopsTable:G3},data(){return{localUrl:I,isLoaded:!1,showFilters:!1,date:null,search:"",columns:[{prop:"id",name:"#"},{prop:"name",name:"Name"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{shops(){return this.$store.getters["shop/shops"]},filteredShops(){const t=this.date;return this.shops.filter((e=>(!t||e?.created_at.split("T")[0]===t)&&!!e.name.toLowerCase().includes(this.search.toLowerCase())))}},mounted(){D3.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("shop/setShops",t.data.data.shops)}),(t=>{this.$handleApiError(t)})).finally((()=>this.isLoaded=!0))}};const X3=(0,d.Z)(J3,[["render",k3]]);var t8=X3;const e8=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Add Shop "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create new shop")],-1),r8={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},a8={class:"tw-w-full"},s8=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Shop Name ",-1),i8={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},o8={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},l8=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),n8=(0,s._)("span",{class:"text-white text-capitalize"},"Create",-1);function d8(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",null,[e8,(0,s._)("div",r8,[(0,s._)("div",null,[(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",a8,[s8,(0,s.Wm)(tt.hw,{error:!i.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>o.resetError("name")),"hide-details":!0,modelValue:i.shop.name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.shop.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",i8,(0,Q.zw)(i.formStatus.name.message),1)])])),_:1})])),_:1})])),_:1})])),_:1})]),(0,s._)("div",o8,[(0,s.Wm)(G.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[l8])),_:1}),(0,s.Wm)(G.T,{onClick:o.create,loading:i.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[n8])),_:1},8,["onClick","loading"])])])])}var w8={components:{},data(){return{isLoading:!1,shop:{name:""},formStatus:{name:{valid:!0,message:""}}}},methods:{create(){if(!this.validate())return!1;this.isLoading=!0;let t=this.shop;D3.create(t).then((t=>{"SHOP_CREATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.shop={name:""}),"VALIDATION_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.errors.ref})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=_t(this.shop.name,"Shop name"),this.formStatus.name.valid}}};const c8=(0,d.Z)(w8,[["render",d8]]);var u8=c8;const p8=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Update Shop"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Update shop informations")],-1),m8={key:0},h8={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},g8={class:"tw-flex tw-gap-2 tw-text-neutral-800 tw-items-center tw-mb-5"},f8={class:"tw-block tw-py-1 tw-px-2 tw-rounded-md text-primary-color"},v8={class:"tw-w-full"},y8=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Shop Name",-1),x8={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},b8={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},_8=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),k8=(0,s._)("span",{class:"text-white text-capitalize"},"Update",-1);function C8(t,e,r,a,i,o){const l=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[p8,i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",m8,[(0,s.Wm)(l)])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",h8,[(0,s._)("div",g8,[(0,s.Uk)(" Shop ID: "),(0,s._)("span",f8,(0,Q.zw)(o.id),1)]),(0,s._)("div",null,[(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(la.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(na.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",v8,[y8,(0,s.Wm)(tt.hw,{error:!i.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>o.resetError("name")),"hide-details":!0,modelValue:i.shop.name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.shop.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",x8,(0,Q.zw)(i.formStatus.name.message),1)])])),_:1})])),_:1})])),_:1})])),_:1})]),(0,s._)("div",b8,[(0,s.Wm)(G.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[_8])),_:1}),(0,s.Wm)(G.T,{onClick:o.update,loading:i.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[k8])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}var D8={components:{},data(){return{isLoading:!1,isLoaded:!1,shop:{name:""},formStatus:{name:{valid:!0,message:""}}}},computed:{id(){return this.$route.params.id}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0;let t=this.shop;D3.update(this.$route.params.id,t).then((t=>{"SHOP_UPDATED"==t.data.code&&this.$alert({type:"success",title:t.data.message}),"SHOP_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=_t(this.shop.name,"Shop name"),this.formStatus.name.valid}},mounted(){D3.getShop(this.$route.params.id).then((t=>{if("SUCCESS"==t.data.code){const{name:e}=t.data.data.shops;this.shop.name=e,this.isLoaded=!0}}),this.$handleApiError)}};const S8=(0,d.Z)(D8,[["render",C8]]);var z8=S8,U8={name:"shops",path:"/shops",component:sa,meta:{module:"shop"},children:[{name:"shop/list",path:"",component:t8,meta:{module:"shop",subModule:"shop/list",title:"Shop List",gate:"show_all_sales"}},{name:"shop/add",path:"add",component:u8,meta:{module:"shop",subModule:"shop/add",title:"Shop Add",gate:"create_shop"}},{name:"shop/update",path:"update/:id",component:z8,meta:{module:"shop",subModule:"shop/update",title:"Update Shop",gate:"update_shop"}}]};const L8={class:"mb-5 tw-flex tw-justify-between tw-items-center"},P8=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Warehouse List"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your warehouses")],-1),A8={key:0},$8=(0,s._)("span",{class:"text-white"}," Add Warehouse ",-1),W8={key:0},q8={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},O8={class:"mb-5 tw-flex"},E8={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},T8={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},V8={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},I8=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),F8={class:"tw-relative"},R8={class:""};function j8(t,e,r,i,o,l){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("WarehousesTable"),w=(0,s.up)("AddWarehouse");return(0,s.wg)(),(0,s.iD)("div",{key:l.warehouses.length},[(0,s._)("div",L8,[P8,t.$can("create_warehouse")?((0,s.wg)(),(0,s.iD)("div",A8,[(0,s.Wm)(G.T,{color:"primary-color",onClick:e[0]||(e[0]=t=>o.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),$8])),_:1})])):(0,s.kq)("",!0)]),o.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",W8,[(0,s.Wm)(n)])),o.isLoaded?((0,s.wg)(),(0,s.iD)("div",q8,[(0,s._)("div",O8,[(0,s.Wm)(G.T,{onClick:e[1]||(e[1]=t=>o.showFilters=!o.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",E8,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,o.search]])])]),(0,s._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":o.showFilters}])},[(0,s._)("div",T8,[(0,s._)("div",V8,[I8,(0,s._)("div",F8,[(0,s.wy)((0,s._)("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=t=>o.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[a.nr,o.date]])])])])],2),(0,s._)("div",R8,[(0,s.Wm)(d,{columns:o.columns,warehouses:l.filteredWarehouses},null,8,["columns","warehouses"])]),(0,s.Wm)(w,{onCancel:e[4]||(e[4]=t=>o.showPopup=!1),visible:o.showPopup},null,8,["visible"])])):(0,s.kq)("",!0)])}const N8={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},M8={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},H8={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},Y8=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),Z8={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},K8=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),B8={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},Q8={class:"tw-px-6 tw-py-4"},G8={class:"tw-px-6 tw-py-4"},J8={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},X8={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},t6={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},e6=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),r6=["value"],a6={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},s6={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},i6={class:"tw-text-white"};function o6(t,e,r,i,o,l){const n=(0,s.up)("WarehouseActions");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",N8,[(0,s._)("table",M8,[(0,s._)("thead",H8,[(0,s._)("tr",null,[Y8,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",Z8,(0,Q.zw)(t.name),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.warehouses,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[K8,(0,s._)("th",B8,(0,Q.zw)(t.id),1),(0,s._)("td",Q8,(0,Q.zw)(t.name),1),(0,s._)("td",G8,(0,Q.zw)(t.created_at.split("T")[0]),1),(0,s._)("td",J8,[(0,s.Wm)(n,{warehouse:t},null,8,["warehouse"])])])))),128))])])]),(0,s._)("div",X8,[(0,s._)("div",t6,[e6,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,r6)))),128))],512),[[a.bM,o.paginationLimit]])]),(0,s._)("div",a6,[(0,s._)("div",s6,(0,Q.zw)(l.prevRange+1)+" - "+(0,Q.zw)(o.currentPage==l.pageCount?r.warehouses.length:l.nextRange)+" of "+(0,Q.zw)(r.warehouses.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.pageCount,(t=>((0,s.wg)(),(0,s.j4)(G.T,{onClick:e=>o.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==o.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",i6,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const l6={class:"tw-flex tw-items-center tw-gap-1"};function n6(t,e,r,a,i,o){const l=(0,s.up)("UpdateWarehouse"),n=(0,s.up)("popup");return(0,s.wg)(),(0,s.iD)("div",l6,[t.$can("update_warehouse")?((0,s.wg)(),(0,s.j4)(G.T,{key:0,onClick:e[0]||(e[0]=t=>i.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),t.$can("delete_warehouse")?((0,s.wg)(),(0,s.j4)(G.T,{key:1,onClick:e[1]||(e[1]=t=>i.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),((0,s.wg)(),(0,s.j4)(l,{visible:i.showUpdatePopup,onCancel:e[2]||(e[2]=t=>i.showUpdatePopup=!1),key:r.warehouse.id,warehouse:r.warehouse},null,8,["visible","warehouse"])),(0,s.Wm)(n,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this warehouse?</p> You won't be able to revert this!",loading:i.isLoading,visible:i.showPopup,onResolved:o.handleResolved},null,8,["loading","visible","onResolved"])])}const d6={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[500px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},w6=(0,s._)("h1",{class:"tw-text-lg"},"Update Warehouse",-1),c6={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},u6={class:"tw-w-full tw-col-span-12"},p6=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Warehouse Name",-1),m6={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},h6={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},g6=(0,s._)("span",{class:"text-white"}," Cancel ",-1),f6=(0,s._)("span",{class:"text-white"}," Update ",-1);function v6(t,e,r,a,i,o){const l=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(l,{onCancel:e[3]||(e[3]=e=>t.$emit("cancel")),visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",d6,[w6,(0,s._)("div",c6,[(0,s._)("div",u6,[p6,(0,s.Wm)(tt.hw,{error:!i.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>o.resetError("name")),"hide-details":!0,modelValue:i.Warehouse.name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.Warehouse.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",m6,(0,Q.zw)(i.formStatus.name.message),1)])]),(0,s._)("div",h6,[(0,s.Wm)(G.T,{onClick:e[2]||(e[2]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[g6])),_:1}),(0,s.Wm)(G.T,{loading:i.isLoading,onClick:o.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[f6])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var y6={components:{},props:["warehouse","visible"],data(){return{isLoading:!1,isLoaded:!1,Warehouse:{name:""},formStatus:{name:{valid:!0,message:""}}}},computed:{},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,ph.update(this.warehouse.id,this.Warehouse).then((t=>{"WAREHOUSE_UPDATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.$store.dispatch("warehouse/update",this.Warehouse),this.$emit("cancel")),"WAREHOUSE_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=_t(this.Warehouse.name,"Warehouse name"),this.formStatus.name.valid}},mounted(){this.Warehouse={...this.warehouse}}};const x6=(0,d.Z)(y6,[["render",v6]]);var b6=x6,_6={components:{UpdateWarehouse:b6},props:["rowIndex","warehouse"],name:"warehouseActions",data(){return{showPopup:!1,isLoading:!1,showUpdatePopup:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,ph["delete"](this.warehouse.id).then((t=>{"WAREHOUSE_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Warehouse Deleted Successfully"}),this.$store.dispatch("warehouse/delete",this.warehouse.id))})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const k6=(0,d.Z)(_6,[["render",n6]]);var C6=k6,D6={props:["columns","warehouses"],components:{WarehouseActions:C6},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.warehouses.length/this.paginationLimit)},items(){return this.warehouses.slice(this.prevRange,this.nextRange)}},methods:{}};const S6=(0,d.Z)(D6,[["render",o6]]);var z6=S6;const U6={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[500px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},L6=(0,s._)("h1",{class:"tw-text-lg"},"Create Warehouse",-1),P6={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},A6={class:"tw-w-full tw-col-span-12"},$6=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Warehouse Name",-1),W6={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},q6={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},O6=(0,s._)("span",{class:"text-white"}," Cancel ",-1),E6=(0,s._)("span",{class:"text-white"}," Create ",-1);function T6(t,e,r,a,i,o){const l=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(l,{onCancel:e[3]||(e[3]=e=>t.$emit("cancel")),visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",U6,[L6,(0,s._)("div",P6,[(0,s._)("div",A6,[$6,(0,s.Wm)(tt.hw,{error:!i.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>o.resetError("name")),"hide-details":!0,modelValue:i.warehouse.name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.warehouse.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",W6,(0,Q.zw)(i.formStatus.name.message),1)])]),(0,s._)("div",q6,[(0,s.Wm)(G.T,{onClick:e[2]||(e[2]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[O6])),_:1}),(0,s.Wm)(G.T,{loading:i.isLoading,onClick:o.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[E6])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var V6={props:["visible"],components:{},data(){return{isLoading:!1,warehouse:{name:""},formStatus:{name:{valid:!0,message:""}}}},methods:{create(){if(!this.validate())return!1;this.isLoading=!0;let t=this.warehouse;ph.create(t).then((t=>{if("WAREHOUSE_CREATED"==t.data.code){this.$alert({type:"success",title:t.data.message});const e=t.data.data.warehouse;this.$store.dispatch("warehouse/addWarehouse",e),this.$emit("cancel"),this.warehouse={name:""}}"VALIDATION_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.errors.ref})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=_t(this.warehouse.name,"Warehouse name"),this.formStatus.name.valid}}};const I6=(0,d.Z)(V6,[["render",T6]]);var F6=I6,R6={components:{WarehousesTable:z6,AddWarehouse:F6},data(){return{localUrl:I,isLoaded:!1,showFilters:!1,date:null,search:"",showPopup:!1,columns:[{prop:"id",name:"#"},{prop:"name",name:"Name"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{warehouses(){return this.$store.getters["warehouse/warehouses"]},filteredWarehouses(){const t=this.date;return this.warehouses.filter((e=>(!t||e?.created_at.split("T")[0]===t)&&!!e.name.toLowerCase().includes(this.search.toLowerCase())))}},mounted(){ph.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("warehouse/setWarehouses",t.data.data.warehouses)}),(t=>{this.$handleApiError(t)})).finally((()=>this.isLoaded=!0))}};const j6=(0,d.Z)(R6,[["render",j8]]);var N6=j6,M6={name:"warehouses",path:"/warehouses",component:sa,meta:{module:"warehouse"},children:[{name:"warehouse/list",path:"",component:N6,meta:{module:"warehouse",subModule:"warehouse/list",title:"Warehouse List",gate:"show_all_warehouses"}}]};const H6=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Factorisation List"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your factorisations")])],-1),Y6={key:0},Z6={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},K6={class:"mb-5 tw-flex"},B6={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},Q6={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},G6={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},J6=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),X6={class:"tw-relative"},t7={class:""};function e7(t,e,r,i,o,l){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("FactorisationsTable");return(0,s.wg)(),(0,s.iD)("div",{key:l.factorisations.length},[H6,o.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Y6,[(0,s.Wm)(n)])),o.isLoaded?((0,s.wg)(),(0,s.iD)("div",Z6,[(0,s._)("div",K6,[(0,s.Wm)(G.T,{onClick:e[0]||(e[0]=t=>o.showFilters=!o.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",B6,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,o.search]])])]),(0,s._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":o.showFilters}])},[(0,s._)("div",Q6,[(0,s._)("div",G6,[J6,(0,s._)("div",X6,[(0,s.wy)((0,s._)("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=t=>o.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[a.nr,o.date]])])])])],2),(0,s._)("div",t7,[(0,s.Wm)(d,{columns:o.columns,factorisations:l.filteredFactorisations},null,8,["columns","factorisations"])])])):(0,s.kq)("",!0)])}class r7{async update(t,e){return await Y.getCookie(),M.post("api/factorisations/update/"+t,{factorisation_id:e.factorisation_id,delivery_id:e.delivery_id,price:e.price,commands_number:e.commands_number})}async updateComment(t,e){return await Y.getCookie(),M.post("api/factorisations/update/comment/"+t,{comment:e.comment})}async updatePaid(t,e){return await Y.getCookie(),M.post("api/factorisations/update/payment/"+t,{paid:e})}async updateClose(t,e){return await Y.getCookie(),M.post("api/factorisations/update/closing/"+t,{close:e})}async all(){return await Y.getCookie(),M.get("api/factorisations")}async getFactorisation(t){return await Y.getCookie(),M.get("api/factorisations/"+t)}async delete(t){return await Y.getCookie(),M["delete"]("api/factorisations/delete/"+t)}}var a7=new r7;const s7={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},i7={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},o7={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},l7=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),n7={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},d7={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},w7={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},c7=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"}," Show per page: ",-1),u7=["value"],p7={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},m7={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},h7={class:"tw-text-white"};function g7(t,e,r,i,o,l){const n=(0,s.up)("FactorisationRow");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",s7,[(0,s._)("table",i7,[(0,s._)("thead",o7,[(0,s._)("tr",null,[l7,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",n7,(0,Q.zw)(t.name),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.factorisations,(t=>((0,s.wg)(),(0,s.j4)(n,{factorisation:t,key:t.id},null,8,["factorisation"])))),128))])])]),(0,s._)("div",d7,[(0,s._)("div",w7,[c7,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,u7)))),128))],512),[[a.bM,o.paginationLimit]])]),(0,s._)("div",p7,[(0,s._)("div",m7,(0,Q.zw)(l.prevRange+1)+" - "+(0,Q.zw)(o.currentPage==l.pageCount?r.factorisations.length:l.nextRange)+" of "+(0,Q.zw)(r.factorisations.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.pageCount,(t=>((0,s.wg)(),(0,s.j4)(G.T,{onClick:e=>o.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==o.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",h7,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const f7={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},v7=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),y7={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},x7={class:"tw-px-6 tw-py-4"},b7={class:"tw-px-6 tw-py-4"},_7={class:"tw-px-6 tw-py-4"},k7={class:"tw-px-6 tw-py-4"},C7={class:"tw-px-6 tw-py-4"},D7={class:"tw-px-6 tw-py-4"},S7={class:"tw-px-6 tw-py-4"},z7={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},U7={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},L7=["disabled"],P7=(0,s._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),A7={class:"tw-px-6 tw-py-4"},$7={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},W7={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},q7=["disabled"],O7=(0,s._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),E7={class:"tw-px-6 tw-py-4"},T7={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"};function V7(t,e,r,i,o,l){const n=(0,s.up)("FactorisationActions");return(0,s.wg)(),(0,s.iD)("tr",f7,[v7,(0,s._)("th",y7,(0,Q.zw)(r.factorisation.id),1),(0,s._)("td",x7,[(0,s._)("button",{class:"tw-underline",onClick:e[0]||(e[0]=t=>l.download(r.factorisation.id))},(0,Q.zw)(r.factorisation.factorisation_id),1)]),(0,s._)("td",b7,(0,Q.zw)(l.deliveryName),1),(0,s._)("td",_7,(0,Q.zw)(r.factorisation.commands_number),1),(0,s._)("td",k7,(0,Q.zw)(r.factorisation.price),1),(0,s._)("td",C7,(0,Q.zw)(r.factorisation.close_at?.split("T")[0]),1),(0,s._)("td",D7,(0,Q.zw)(r.factorisation.paid_at?.split("T")[0]),1),(0,s._)("td",S7,[(0,s._)("div",z7,[(0,s._)("label",U7,[(0,s.wy)((0,s._)("input",{disabled:o.isLoadingClose,"onUpdate:modelValue":e[1]||(e[1]=t=>l.close=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,8,L7),[[a.e8,l.close]]),P7]),o.isLoadingClose?((0,s.wg)(),(0,s.j4)(X.t,{key:0,color:"green",size:"small",class:"tw-animate-spin"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)])]),(0,s._)("td",A7,[(0,s._)("div",$7,[(0,s._)("label",W7,[(0,s.wy)((0,s._)("input",{disabled:o.isLoadingPaid,"onUpdate:modelValue":e[2]||(e[2]=t=>l.paid=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,8,q7),[[a.e8,l.paid]]),O7]),o.isLoadingPaid?((0,s.wg)(),(0,s.j4)(X.t,{key:0,color:"green",size:"small",class:"tw-animate-spin"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)])]),(0,s._)("td",E7,(0,Q.zw)(r.factorisation.created_at.split("T")[0]),1),(0,s._)("td",T7,[(0,s.Wm)(n,{factorisation:r.factorisation},null,8,["factorisation"])])])}const I7={class:"tw-flex tw-items-center tw-gap-1"};function F7(t,e,r,a,i,o){const l=(0,s.up)("UpdateFactorisation"),n=(0,s.up)("UpdateComment"),d=(0,s.up)("popup");return(0,s.wg)(),(0,s.iD)("div",I7,[t.$can("update_factorisation")?((0,s.wg)(),(0,s.j4)(G.T,{key:0,onClick:e[0]||(e[0]=t=>i.showUpdateCommentPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-comment-text")])),_:1})])),_:1})):(0,s.kq)("",!0),t.$can("update_factorisation")?((0,s.wg)(),(0,s.j4)(G.T,{key:1,onClick:e[1]||(e[1]=t=>i.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),t.$can("delete_factorisation")?((0,s.wg)(),(0,s.j4)(G.T,{key:2,onClick:e[2]||(e[2]=t=>i.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),((0,s.wg)(),(0,s.j4)(l,{visible:i.showUpdatePopup,onCancel:e[3]||(e[3]=t=>i.showUpdatePopup=!1),key:r.factorisation.id,factorisation:r.factorisation},null,8,["visible","factorisation"])),((0,s.wg)(),(0,s.j4)(n,{visible:i.showUpdateCommentPopup,onCancel:e[4]||(e[4]=t=>i.showUpdateCommentPopup=!1),key:r.factorisation.id,factorisation:r.factorisation},null,8,["visible","factorisation"])),(0,s.Wm)(d,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this factorisation?</p> You won't be able to revert this!",loading:i.isLoading,visible:i.showPopup,onResolved:o.handleResolved},null,8,["loading","visible","onResolved"])])}const R7={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},j7=(0,s._)("h1",{class:"tw-text-lg"},"Update Factorisation",-1),N7={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},M7={class:"tw-w-full tw-col-span-6"},H7=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Factorisation Code ",-1),Y7={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Z7={class:"tw-w-full tw-col-span-6"},K7=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery",-1),B7={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Q7={class:"tw-w-full tw-col-span-6"},G7=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Total Price",-1),J7={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},X7={class:"tw-w-full tw-col-span-6"},t9=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Nb Commands",-1),e9={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},r9={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},a9=(0,s._)("span",{class:"text-white"}," Cancel ",-1),s9=(0,s._)("span",{class:"text-white"}," Update ",-1);function i9(t,e,r,a,i,o){const l=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(l,{onCancel:e[9]||(e[9]=e=>t.$emit("cancel")),visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",R7,[j7,(0,s._)("div",N7,[(0,s._)("div",M7,[H7,(0,s.Wm)(tt.hw,{error:!i.formStatus.factorisation_id.valid,onKeyup:e[0]||(e[0]=t=>o.resetError("factorisation_id")),"hide-details":!0,modelValue:i.Factorisation.factorisation_id,"onUpdate:modelValue":e[1]||(e[1]=t=>i.Factorisation.factorisation_id=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",Y7,(0,Q.zw)(i.formStatus.factorisation_id.message),1)]),(0,s._)("div",Z7,[K7,(0,s.Wm)(tt.hw,{error:!i.formStatus.delivery_id.valid,onKeyup:e[2]||(e[2]=t=>o.resetError("delivery_id")),"hide-details":!0,disabled:!0,modelValue:o.deliveryName,"onUpdate:modelValue":e[3]||(e[3]=t=>o.deliveryName=t),clearable:"",disable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",B7,(0,Q.zw)(i.formStatus.delivery_id.message),1)]),(0,s._)("div",Q7,[G7,(0,s.Wm)(tt.hw,{error:!i.formStatus.price.valid,onKeyup:e[4]||(e[4]=t=>o.resetError("price")),"hide-details":!0,modelValue:i.Factorisation.price,"onUpdate:modelValue":e[5]||(e[5]=t=>i.Factorisation.price=t),disabled:!0,clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",J7,(0,Q.zw)(i.formStatus.price.message),1)]),(0,s._)("div",X7,[t9,(0,s.Wm)(tt.hw,{error:!i.formStatus.commands_number.valid,disabled:!0,onKeyup:e[6]||(e[6]=t=>o.resetError("commands_number")),"hide-details":!0,modelValue:i.Factorisation.commands_number,"onUpdate:modelValue":e[7]||(e[7]=t=>i.Factorisation.commands_number=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",e9,(0,Q.zw)(i.formStatus.commands_number.message),1)])]),(0,s._)("div",r9,[(0,s.Wm)(G.T,{onClick:e[8]||(e[8]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[a9])),_:1}),(0,s.Wm)(G.T,{loading:i.isLoading,onClick:o.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[s9])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var o9={components:{},props:["factorisation","visible"],data(){return{isLoading:!1,isLoaded:!1,Factorisation:{factorisation_id:"",delivery_id:0,price:0,commands_number:0,note:""},formStatus:{factorisation_id:{valid:!0,message:""},delivery_id:{valid:!0,message:""},price:{valid:!0,message:""},commands_number:{valid:!0,message:""}}}},computed:{deliveryName:{get(){return this.Factorisation.delivery.firstname+" "+this.Factorisation.delivery.lastname},set(t){console.log(t)}}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,a7.update(this.factorisation.id,this.Factorisation).then((t=>{"FACTORISATION_UPDATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.$store.dispatch("factorisation/update",this.Factorisation),this.$emit("cancel")),"FACTORISATION_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.factorisation_id=_t(this.Factorisation.factorisation_id,"Factorisation Code"),this.formStatus.price=kt(this.Factorisation.price,"Factorisation Price"),this.formStatus.commands_number=kt(this.Factorisation.commands_number,"Factorisation Nb Commands"),this.formStatus.factorisation_id.valid&&this.formStatus.price.valid&&this.formStatus.commands_number.valid}},mounted(){this.Factorisation={...this.factorisation}}};const l9=(0,d.Z)(o9,[["render",i9]]);var n9=l9;const d9={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},w9=(0,s._)("h1",{class:"tw-text-lg"},"Update Factorisation Comment",-1),c9={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},u9={class:"tw-w-full tw-col-span-6"},p9=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Total Price",-1),m9={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},h9={class:"tw-w-full tw-col-span-6"},g9=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Nb Commands",-1),f9={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},v9={class:"tw-w-full tw-col-span-12"},y9=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Comment",-1),x9=["error"],b9={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},_9={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},k9=(0,s._)("span",{class:"text-white"}," Cancel ",-1),C9=(0,s._)("span",{class:"text-white"}," Update ",-1);function D9(t,e,r,i,o,l){const n=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(n,{onCancel:e[7]||(e[7]=e=>t.$emit("cancel")),visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",d9,[w9,(0,s._)("div",c9,[(0,s._)("div",u9,[p9,(0,s.Wm)(tt.hw,{error:!o.formStatus.price.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("price")),"hide-details":!0,modelValue:o.Factorisation.price,"onUpdate:modelValue":e[1]||(e[1]=t=>o.Factorisation.price=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",disabled:"",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",m9,(0,Q.zw)(o.formStatus.price.message),1)]),(0,s._)("div",h9,[g9,(0,s.Wm)(tt.hw,{error:!o.formStatus.commands_number.valid,onKeyup:e[2]||(e[2]=t=>l.resetError("commands_number")),"hide-details":!0,modelValue:o.Factorisation.commands_number,"onUpdate:modelValue":e[3]||(e[3]=t=>o.Factorisation.commands_number=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",disabled:"",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",f9,(0,Q.zw)(o.formStatus.commands_number.message),1)]),(0,s._)("div",v9,[y9,(0,s.wy)((0,s._)("textarea",{error:!o.formStatus.commands_number.valid,onKeyup:e[4]||(e[4]=t=>l.resetError("commands_number")),"hide-details":!0,clearable:"","clear-icon":"mdi-close","onUpdate:modelValue":e[5]||(e[5]=t=>o.Factorisation.comment=t),variant:"outlined",density:"compact",cols:"30",rows:"5",color:"primary-color",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-400 focus:tw-border-orange-500"},"\r\n            ",40,x9),[[a.nr,o.Factorisation.comment]]),(0,s._)("div",b9,(0,Q.zw)(o.formStatus.commands_number.message),1)])]),(0,s._)("div",_9,[(0,s.Wm)(G.T,{onClick:e[6]||(e[6]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[k9])),_:1}),(0,s.Wm)(G.T,{loading:o.isLoading,onClick:l.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[C9])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var S9={components:{},props:["factorisation","visible"],data(){return{isLoading:!1,isLoaded:!1,Factorisation:{price:0,commands_number:0,comment:""},formStatus:{price:{valid:!0,message:""},commands_number:{valid:!0,message:""},comment:{valid:!0,message:""}}}},computed:{},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,a7.updateComment(this.factorisation.id,this.Factorisation).then((t=>{"FACTORISATION_UPDATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.$store.dispatch("factorisation/update",this.Factorisation),this.$emit("cancel")),"FACTORISATION_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.comment=_t(this.Factorisation.comment,"Factorisation Comment"),this.formStatus.comment.valid}},mounted(){this.Factorisation={...this.factorisation}}};const z9=(0,d.Z)(S9,[["render",D9]]);var U9=z9,L9={components:{UpdateFactorisation:n9,UpdateComment:U9},props:["rowIndex","factorisation"],name:"factorisationActions",data(){return{showPopup:!1,isLoading:!1,showUpdatePopup:!1,showUpdateCommentPopup:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,a7["delete"](this.factorisation.id).then((t=>{"FACTORISATION_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Factorisation Deleted Successfully"}),this.$store.dispatch("factorisation/delete",this.factorisation.id)),"DELETE_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const P9=(0,d.Z)(L9,[["render",F7]]);var A9=P9,$9={props:["factorisation"],components:{FactorisationActions:A9},data(){return{isLoadingPaid:!1,isLoadingClose:!1}},computed:{deliveryName:{get(){return this.factorisation.delivery.firstname+" "+this.factorisation.delivery.lastname},set(t){console.log(t)}},paid:{get(){return 1==this.factorisation.paid},set(t){this.updatePaid(t)}},close:{get(){return 1==this.factorisation.close},set(t){this.updateClose(t)}}},methods:{updatePaid(t){this.isLoadingPaid=!0,a7.updatePaid(this.factorisation.id,t).then((t=>{"FACTORISATION_UPDATED"==t.data.code&&this.$store.dispatch("factorisation/update",t.data.data.factorisation)}),this.$handleApiError).finally((()=>{this.isLoadingPaid=!1}))},updateClose(t){this.isLoadingClose=!0,a7.updateClose(this.factorisation.id,t).then((t=>{"FACTORISATION_UPDATED"==t.data.code&&this.$store.dispatch("factorisation/update",t.data.data.factorisation)}),this.$handleApiError).finally((()=>{this.isLoadingClose=!1}))},download(t){const e=F+"api/factorisations/generate-pdf/"+t,r=document.createElement("a");r.href=e,r.target="_blank",r.setAttribute("download","dd.pdf"),document.body.appendChild(r),r.click(),document.body.removeChild(r)}}};const W9=(0,d.Z)($9,[["render",V7]]);var q9=W9,O9={props:["columns","factorisations"],components:{FactorisationRow:q9},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.factorisations.length/this.paginationLimit)},items(){return this.factorisations.slice(this.prevRange,this.nextRange)}},methods:{}};const E9=(0,d.Z)(O9,[["render",g7]]);var T9=E9,V9={components:{FactorisationsTable:T9},data(){return{localUrl:I,isLoaded:!1,showFilters:!1,date:null,search:"",showPopup:!1,columns:[{prop:"id",name:"#"},{prop:"factorisation_id",name:"Code"},{prop:"delivery_id",name:"Delivery"},{prop:"commands_number",name:"Nb Commands"},{prop:"price",name:"Total Price"},{prop:"close_at",name:"Closed at"},{prop:"paid_at",name:"Paid at"},{prop:"close",name:"Close"},{prop:"paid",name:"Paid"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{factorisations(){return this.$store.getters["factorisation/factorisations"]},filteredFactorisations(){const t=this.date;return this.factorisations.filter((e=>!t||e?.created_at.split("T")[0]===t))}},mounted(){a7.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("factorisation/setFactorisations",t.data.data.factorisations)}),(t=>{this.$handleApiError(t)})).finally((()=>this.isLoaded=!0))}};const I9=(0,d.Z)(V9,[["render",e7]]);var F9=I9,R9={name:"factorisations",path:"/factorisations",component:sa,meta:{module:"factorisation"},children:[{name:"factorisation/list",path:"",component:F9,meta:{module:"factorisation",subModule:"factorisation/list",title:"Factorisations List",gate:"show_all_factorisations"}}]};const j9={class:"mb-5 tw-flex tw-justify-between tw-items-center"},N9=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Google Sheets"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your google sheets")],-1),M9=(0,s._)("span",{class:"text-white"}," Add Sheet ",-1),H9={key:0},Y9={key:1,class:"py-5 px-5 tw-mb-5 tw-border bg-white tw-w-full tw-rounded-md"},Z9={class:"tw-flex tw-items-center tw-gap-2"},K9=(0,s._)("h1",null,"Application's email",-1),B9={class:"tw-bg-gray-100 tw-border tw-border-gray-300 tw-rounded tw-py-2 tw-px-2 tw-text-sm tw-mt-2 tw-text-gray-700"},Q9=(0,s._)("p",{class:"tw-mt-1 tw-text-xs tw-text-gray-400"}," Use this email to give access to Google Sheets ",-1),G9={key:2,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},J9={class:"mb-5 tw-flex"},X9={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},ttt={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},ett={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},rtt=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),att={class:"tw-relative"},stt={class:""};function itt(t,e,r,i,o,l){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("SheetsTable"),w=(0,s.up)("AddSheet");return(0,s.wg)(),(0,s.iD)("div",{key:l.sheets.length},[(0,s._)("div",j9,[N9,(0,s._)("div",null,[t.$can("create_sheet")?((0,s.wg)(),(0,s.j4)(G.T,{key:0,color:"primary-color",onClick:e[0]||(e[0]=t=>o.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),M9])),_:1})):(0,s.kq)("",!0)])]),o.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",H9,[(0,s.Wm)(n)])),o.isLoaded?((0,s.wg)(),(0,s.iD)("div",Y9,[(0,s._)("div",Z9,[K9,(0,s._)("button",{onClick:e[1]||(e[1]=(...t)=>l.copy&&l.copy(...t)),class:"tw-bg-gray-100 tw-border tw-border-gray-300 tw-rounded tw-w-[30px] tw-h-[30px] tw-text-gray-500 hover:tw-text-gray-700 tw-duration-300 tw-border-solid hover:tw-border-gray-400"},[(0,s.Wm)(X.t,{class:"tw-text-xs"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-content-copy")])),_:1})])]),(0,s._)("div",B9,(0,Q.zw)(o.email),1),Q9])):(0,s.kq)("",!0),o.isLoaded?((0,s.wg)(),(0,s.iD)("div",G9,[(0,s._)("div",J9,[(0,s.Wm)(G.T,{onClick:e[2]||(e[2]=t=>o.showFilters=!o.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",X9,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,o.search]])])]),(0,s._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":o.showFilters}])},[(0,s._)("div",ttt,[(0,s._)("div",ett,[rtt,(0,s._)("div",att,[(0,s.wy)((0,s._)("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=t=>o.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[a.nr,o.date]])])])])],2),(0,s._)("div",stt,[(0,s.Wm)(d,{sheets:l.sheets},null,8,["sheets"])]),(0,s.Wm)(w,{onCancel:e[5]||(e[5]=t=>o.showPopup=!1),visible:o.showPopup},null,8,["visible"])])):(0,s.kq)("",!0)])}const ott={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},ltt={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},ntt={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},dtt=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),wtt={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},ctt={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},utt={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},ptt=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"}," Show per page: ",-1),mtt=["value"],htt={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},gtt={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},ftt={class:"tw-text-white"};function vtt(t,e,r,i,o,l){const n=(0,s.up)("SheetRow");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",ott,[(0,s._)("table",ltt,[(0,s._)("thead",ntt,[(0,s._)("tr",null,[dtt,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",wtt,(0,Q.zw)(t),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.sheets,(t=>((0,s.wg)(),(0,s.j4)(n,{sheet:t,key:t.id},null,8,["sheet"])))),128))])])]),(0,s._)("div",ctt,[(0,s._)("div",utt,[ptt,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,mtt)))),128))],512),[[a.bM,o.paginationLimit]])]),(0,s._)("div",htt,[(0,s._)("div",gtt,(0,Q.zw)(l.prevRange+1)+" - "+(0,Q.zw)(o.currentPage==l.pageCount?r.sheets.length:l.nextRange)+" of "+(0,Q.zw)(r.sheets.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.pageCount,(t=>((0,s.wg)(),(0,s.j4)(G.T,{onClick:e=>o.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==o.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",ftt,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const ytt={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},xtt=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),btt={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},_tt={class:"tw-px-6 tw-py-4"},ktt={class:"tw-px-6 tw-py-4"},Ctt={class:"tw-px-6 tw-py-4"},Dtt={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},Stt={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},ztt=["disabled"],Utt=(0,s._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),Ltt={class:"tw-px-6 tw-py-4"},Ptt={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"};function Att(t,e,r,i,o,l){const n=(0,s.up)("SheetActions");return(0,s.wg)(),(0,s.iD)("tr",ytt,[xtt,(0,s._)("th",btt,(0,Q.zw)(r.sheet.id),1),(0,s._)("td",_tt,[(0,s._)("div",null,[(0,s._)("span",{class:(0,Q.C_)(["tw-inline-block tw-w-[8px] tw-h-[8px] tw-rounded-full tw-mr-1",[1==r.sheet.active&&1==r.sheet.auto_fetch?"tw-bg-emerald-500":"tw-bg-red-500"]])},null,2),(0,s.Uk)(" "+(0,Q.zw)(r.sheet.name),1)])]),(0,s._)("td",ktt,[(0,s._)("div",null,(0,Q.zw)(r.sheet.sheet_name),1)]),(0,s._)("td",Ctt,[(0,s._)("div",Dtt,[(0,s._)("label",Stt,[(0,s.wy)((0,s._)("input",{disabled:o.isLoadingAuto,"onUpdate:modelValue":e[0]||(e[0]=t=>l.autoFetch=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,8,ztt),[[a.e8,l.autoFetch]]),Utt]),o.isLoadingAuto?((0,s.wg)(),(0,s.j4)(X.t,{key:0,color:"green",size:"small",class:"tw-animate-spin"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)])]),(0,s._)("td",Ltt,(0,Q.zw)(r.sheet.created_at.split("T")[0]),1),(0,s._)("td",Ptt,[(0,s.Wm)(n,{sheet:r.sheet},null,8,["sheet"])])])}const $tt={key:0};function Wtt(t,e,r,a,i,o){const l=(0,s.up)("UpdateSheet"),n=(0,s.up)("SheetOrders"),d=(0,s.up)("popup");return r.sheet?((0,s.wg)(),(0,s.iD)("div",$tt,[t.$can("update_sheet")?((0,s.wg)(),(0,s.j4)(G.T,{key:0,onClick:o.sync,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{class:(0,Q.C_)([i.isLoadingSheet&&"tw-animate-spin"]),color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1},8,["class"])])),_:1},8,["onClick"])):(0,s.kq)("",!0),t.$can("update_sheet")?((0,s.wg)(),(0,s.j4)(G.T,{key:1,onClick:e[0]||(e[0]=t=>i.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),t.$can("delete_sheet")?((0,s.wg)(),(0,s.j4)(G.T,{key:2,onClick:e[1]||(e[1]=t=>i.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(l,{visible:i.showUpdatePopup,"onUpdate:visible":e[2]||(e[2]=t=>i.showUpdatePopup=t),sheet:r.sheet,onCancel:e[3]||(e[3]=t=>i.showUpdatePopup=!1)},null,8,["visible","sheet"]),(0,s.Wm)(n,{visible:i.showSheetPopup,"onUpdate:visible":e[4]||(e[4]=t=>i.showSheetPopup=t),sheet:r.sheet,orders:i.orders,onCancel:e[5]||(e[5]=t=>i.showSheetPopup=!1)},null,8,["visible","sheet","orders"]),(0,s.Wm)(d,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this sale?</p> You won't be able to revert this!",loading:i.isLoading,visible:i.showPopup,onResolved:o.handleDelete},null,8,["loading","visible","onResolved"])])):(0,s.kq)("",!0)}const qtt={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},Ott=(0,s._)("h1",{class:"tw-text-lg"},"Create Sheet",-1),Ett={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},Ttt={class:"md:tw-col-span-6 tw-col-span-12"},Vtt=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Name",-1),Itt={class:"md:tw-col-span-6 tw-col-span-12"},Ftt=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Sheet Name",-1),Rtt={class:"md:tw-col-span-12 tw-col-span-12"},jtt=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Sheet ID",-1),Ntt={class:"md:tw-col-span-6 tw-col-span-12"},Mtt=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Auto Fetch",-1),Htt={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},Ytt=(0,s._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),Ztt={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},Ktt=(0,s._)("span",{class:"text-white"}," Cancel ",-1),Btt=(0,s._)("span",{class:"text-white"}," Save ",-1);function Qtt(t,e,r,i,o,l){const n=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(n,{onCancel:e[5]||(e[5]=e=>t.$emit("cancel")),visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",qtt,[Ott,(0,s._)("div",Ett,[(0,s._)("div",Ttt,[Vtt,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.newSheet.name=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.newSheet.name]])]),(0,s._)("div",Itt,[Ftt,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>o.newSheet.sheet_name=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.newSheet.sheet_name]])]),(0,s._)("div",Rtt,[jtt,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>o.newSheet.sheet_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.newSheet.sheet_id]])]),(0,s._)("div",Ntt,[Mtt,(0,s._)("label",Htt,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.newSheet.auto_fetch=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,512),[[a.e8,o.newSheet.auto_fetch]]),Ytt])])]),(0,s._)("div",Ztt,[(0,s.Wm)(G.T,{onClick:e[4]||(e[4]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[Ktt])),_:1}),(0,s.Wm)(G.T,{loading:o.isLoading,onClick:l.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[Btt])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var Gtt={props:["visible","sheet"],data(){return{isLoading:!1,newSheet:{name:"",sheet_id:"",sheet_name:"",auto_fetch:!0}}},watch:{visible(t){t&&(this.newSheet={...this.sheet,auto_fetch:1==this.sheet.auto_fetch})}},computed:{isFormValid(){return!!this.newSheet.name&&!!this.newSheet.sheet_id&&!!this.newSheet.sheet_name}},methods:{update(){if(!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;this.isLoading=!0;const t=this.newSheet;Xr.update(this.sheet.id,t).then((t=>{"SUCCESS"==t.data.code&&(this.$emit("cancel"),this.$alert({type:"success",title:"Sheet updated successfully"}),this.$store.dispatch("sheet/update",t.data.data.sheet))}),this.$handleApiError).finally((()=>this.isLoading=!1))}}};const Jtt=(0,d.Z)(Gtt,[["render",Qtt]]);var Xtt=Jtt;const tet={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},eet={key:0},ret={class:"tw-flex tw-items-center tw-gap-2 tw-mb-2"},aet=(0,s._)("h1",{class:"tw-text-sm tw-font-medium tw-text-neutral-700"},"Sheet's New Orders",-1),set={class:"tw-bg-emerald-500 tw-text-white tw-px-1 tw-text-sm tw-rounded"},iet={class:"tw-relative tw-overflow-x-auto"},oet={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500 tw-border tw-rounded"},net=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50 tw-rounded-t tw-overflow-hidden"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Fullname"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Product"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"SKU"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Qty"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Price")])],-1),det={class:"tw-px-6 tw-py-2"},wet={class:"tw-px-6 tw-py-2"},cet={class:"tw-px-6 tw-py-2"},uet={class:"tw-px-6 tw-py-2"},pet={class:"tw-px-6 tw-py-2"},met={class:"tw-flex tw-gap-2 mt-3 tw-justify-end"},het=(0,s._)("span",{class:"text-white"}," Cancel ",-1),get=(0,s._)("span",{class:"text-white"}," Save Orders",-1);function fet(t,e,r,a,i,o){const l=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(l,{onCancel:e[1]||(e[1]=e=>t.$emit("cancel")),visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",tet,[r.orders.length>0?((0,s.wg)(),(0,s.iD)("div",eet,[(0,s._)("div",ret,[aet,(0,s._)("div",set,(0,Q.zw)(r.orders.length),1)]),(0,s._)("div",null,[(0,s._)("div",iet,[(0,s._)("table",oet,[net,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.orders,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t,class:"tw-bg-white tw-border-b"},[(0,s._)("td",det,(0,Q.zw)(t["Full name"]),1),(0,s._)("td",wet,[(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t["Product name"].split("\n"),(t=>((0,s.wg)(),(0,s.iD)("p",{key:t},"- "+(0,Q.zw)(t),1)))),128))])]),(0,s._)("td",cet,[(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t["SKU"].split("\n"),(t=>((0,s.wg)(),(0,s.iD)("p",{key:t},(0,Q.zw)(t),1)))),128))])]),(0,s._)("td",uet,[(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t["Total quantity"].split("\n"),(t=>((0,s.wg)(),(0,s.iD)("p",{key:t},(0,Q.zw)(t),1)))),128))])]),(0,s._)("td",pet,(0,Q.zw)(t["Total charge"]),1)])))),128))])])])]),(0,s._)("div",met,[(0,s.Wm)(G.T,{onClick:e[0]||(e[0]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[het])),_:1}),(0,s.Wm)(G.T,{loading:i.isLoading,onClick:o.save,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[get])),_:1},8,["loading","onClick"])])])):(0,s.kq)("",!0)])])),_:1},8,["visible"])])}var vet={props:["visible","sheet","orders"],data(){return{isLoading:!1}},computed:{sales(){return this.$store.getters["sale/sales"]}},methods:{save(){this.isLoading=!0,Xr.saveOrders(this.sheet.id).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({title:t.data.data.orders.length+" Order has been added",type:"success"}),this.$store.dispatch("sale/setSales",[...t.data.data.orders,...this.sales]),this.$emit("cancel"))}),(t=>{this.$handleApiError(t),"PERMISSION_DENIED"==t?.response?.data?.code&&this.$alert({title:"Access denied to this sheet",type:"warning"})})).finally((()=>{this.isLoading=!1}))}}};const yet=(0,d.Z)(vet,[["render",fet]]);var xet=yet,bet={props:["sheet"],name:"sheetActions",components:{UpdateSheet:Xtt,SheetOrders:xet},data(){return{showPopup:!1,showUpdatePopup:!1,showSheetPopup:!1,isLoading:!1,isLoadingSheet:!1,orders:[]}},computed:{},methods:{handleDelete(t){if(console.log(t),!t)return this.showPopup=!1,!1;this.delete()},delete(){this.isLoading=!0,Xr["delete"](this.sheet.id).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({title:"Deleted successfully",type:"success"}),this.$store.dispatch("sheet/delete",this.sheet.id),this.showPopup=!1)}),this.$handleApiError).finally((()=>{this.isLoading=!1}))},sync(){this.isLoadingSheet=!0,Xr.sync(this.sheet.id).then((t=>{"SUCCESS"==t.data.code&&(0==t.data.data.orders.length?this.$alert({title:"0 Orders found",type:"info"}):(this.orders=t.data.data.orders,this.showSheetPopup=!0),console.log(t.data.data.sheet),this.$store.dispatch("sheet/update",t.data.data.sheet)),console.log(t.data)}),(t=>{this.$handleApiError(t),console.log(t),this.$store.dispatch("sheet/update",t.response.data.data.sheet),"PERMISSION_DENIED"==t?.response?.data?.code&&this.$alert({title:"Access denied to this Google Sheet",type:"error"})})).finally((()=>{this.isLoadingSheet=!1}))}},mounted(){}};const _et=(0,d.Z)(bet,[["render",Wtt]]);var ket=_et,Cet={props:["sheet"],components:{SheetActions:ket},data(){return{isLoadingAuto:!1}},computed:{autoFetch:{get(){return 1==this.sheet.auto_fetch},set(t){this.updateAutoFetch(t)}}},methods:{updateAutoFetch(t){this.isLoadingAuto=!0,Xr.updateAutoFetch(this.sheet.id,t).then((e=>{"SUCCESS"==e.data.code&&(this.$alert({title:t?"Activated":"Disabled",type:"success"}),this.$store.dispatch("sheet/update",e.data.data.sheet))}),this.$handleApiError).finally((()=>{this.isLoadingAuto=!1}))}}};const Det=(0,d.Z)(Cet,[["render",Att]]);var zet=Det,Uet={props:["sheets"],components:{SheetRow:zet},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10,columns:["id","name","sheet name","auto fetch","created","actions"]}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.sheets.length/this.paginationLimit)},items(){return this.sheets.slice(this.prevRange,this.nextRange)}},methods:{}};const Let=(0,d.Z)(Uet,[["render",vtt]]);var Pet=Let;const Aet={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},$et=(0,s._)("h1",{class:"tw-text-lg"},"Create Sheet",-1),Wet={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},qet={class:"md:tw-col-span-6 tw-col-span-12"},Oet=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Name",-1),Eet={class:"md:tw-col-span-6 tw-col-span-12"},Tet=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Sheet Name",-1),Vet={class:"md:tw-col-span-12 tw-col-span-12"},Iet=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Sheet ID",-1),Fet={class:"md:tw-col-span-6 tw-col-span-12"},Ret=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Auto Fetch",-1),jet={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},Net=(0,s._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),Met={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},Het=(0,s._)("span",{class:"text-white"}," Cancel ",-1),Yet=(0,s._)("span",{class:"text-white"}," Save ",-1);function Zet(t,e,r,i,o,l){const n=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(n,{onCancel:e[5]||(e[5]=e=>t.$emit("cancel")),visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",Aet,[$et,(0,s._)("div",Wet,[(0,s._)("div",qet,[Oet,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.sheet.name=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sheet.name]])]),(0,s._)("div",Eet,[Tet,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>o.sheet.sheet_name=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sheet.sheet_name]])]),(0,s._)("div",Vet,[Iet,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>o.sheet.sheet_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,o.sheet.sheet_id]])]),(0,s._)("div",Fet,[Ret,(0,s._)("label",jet,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.sheet.auto_fetch=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,512),[[a.e8,o.sheet.auto_fetch]]),Net])])]),(0,s._)("div",Met,[(0,s.Wm)(G.T,{onClick:e[4]||(e[4]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[Het])),_:1}),(0,s.Wm)(G.T,{loading:o.isLoading,onClick:l.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[Yet])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var Ket={props:["visible"],data(){return{isLoading:!1,sheet:{name:"",sheet_id:"",sheet_name:"",auto_fetch:!0}}},computed:{isFormValid(){return!!this.sheet.name&&!!this.sheet.sheet_id&&!!this.sheet.sheet_name}},methods:{create(){if(!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;this.isLoading=!0;const t=this.sheet;Xr.create(t).then((t=>{"SUCCESS"==t.data.code&&(this.$emit("cancel"),this.$alert({type:"success",title:"Sheet created successfully"}),this.$store.dispatch("sheet/addSheet",t.data.data.sheet))}),this.$handleApiError).finally((()=>this.isLoading=!1))}}};const Bet=(0,d.Z)(Ket,[["render",Zet]]);var Qet=Bet,Get={components:{SheetsTable:Pet,AddSheet:Qet},data(){return{localUrl:I,isLoaded:!1,showFilters:!1,date:null,search:"",showPopup:!1,email:"new-service-account@testing-379416.iam.gserviceaccount.com"}},computed:{sheets(){return this.$store.getters["sheet/sheets"]}},methods:{getSheets(){return this.isLoaded=!1,Xr.all().then((t=>("SUCCESS"==t.data.code&&this.$store.dispatch("sheet/setSheets",t.data.data.sheets),t)),this.$handleApiError).finally((()=>{this.isLoaded=!0}))},copy(){navigator.clipboard.writeText(this.email),this.$alert({title:"Email Copied !",type:"success"})}},mounted(){this.getSheets()}};const Jet=(0,d.Z)(Get,[["render",itt]]);var Xet=Jet,trt={name:"sheets",path:"/sheets",component:sa,meta:{module:"sheet"},children:[{name:"sheet/list",path:"",component:Xet,meta:{module:"sheet",subModule:"sheet/list",title:"Google Sheets List",gate:"show_all_sheets"}}]};const ert={class:"py-5 px-2 tw-border tw-bg-white tw-w-full tw-rounded-md tw-mb-5"},rrt={class:"tw-px-3"},art={class:"tw-flex tw-items-center tw-justify-between tw-flex-wrap"},srt={class:"tw-flex tw-items-center tw-gap-x-3"},irt=(0,s._)("h2",{class:"tw-text-lg tw-font-medium tw-text-gray-800 darkx:tw-text-white"}," Orders ",-1),ort={class:"tw-px-3 tw-py-1 tw-text-xs tw-text-emerald-600 tw-bg-emerald-100 tw-rounded-full darkx:tw-bg-gray-800 darkx:tw-text-orange-400"},lrt=(0,s._)("p",{class:"tw-mt-1 tw-text-sm tw-text-gray-500 darkx:tw-text-gray-300"}," These orders have needs to reconfirmed. ",-1),nrt={class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-3"},drt=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",width:"16",height:"16",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),wrt=(0,s._)("span",null,"Create",-1),crt=[drt,wrt],urt={class:"tw-overflow-hidden tw-col-span-1"},prt={key:0};function mrt(t,e,r,a,i,o){const l=(0,s.up)("IndexFilters"),n=(0,s.up)("BulkActions"),d=(0,s.up)("IndexTable"),w=(0,s.up)("CreatePopup");return(0,s.wg)(),(0,s.iD)("div",ert,[(0,s._)("section",rrt,[(0,s._)("div",art,[(0,s._)("div",null,[(0,s._)("div",srt,[irt,(0,s._)("span",ort,(0,Q.zw)(i.totalOrders)+" order",1)]),lrt]),(0,s._)("div",nrt,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.create_popup=!0),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},crt)])]),(0,s.Wm)(l,{search:i.search,"onUpdate:search":e[1]||(e[1]=t=>i.search=t),filters:i.filters,"onUpdate:filters":e[2]||(e[2]=t=>i.filters=t),onFilter:e[3]||(e[3]=t=>o.handlePerPageChange(i.per_page)),onClear:o.handleClearFilters,onPerPageChange:o.handlePerPageChange,onFresh:o.paginateOrders,loading:i.fetching,statistics:i.statistics,"per-page":i.per_page,"active-statistics":""},null,8,["search","filters","onClear","onPerPageChange","onFresh","loading","statistics","per-page"]),(0,s._)("div",{class:(0,Q.C_)([[i.selected.length>0?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",urt,[(0,s.Wm)(n,{onUpdate:o.handleBulkUpdate,selected:i.selected,"onUpdate:selected":e[4]||(e[4]=t=>i.selected=t)},null,8,["onUpdate","selected"])])],2),(0,s._)("div",null,[(0,s.Wm)(d,{selected:i.selected,"onUpdate:selected":e[5]||(e[5]=t=>i.selected=t),onUpdate:o.handleItemUpdate,onPageChange:o.handlePageChange,onSortOrder:o.handleSortOrderChange,loading:i.fetching,from:i.from,to:i.to,"last-page":i.last_page,"per-page":i.per_page,total:i.total,"current-page":i.current_page,items:i.items,deliveries:i.deliveries},null,8,["selected","onUpdate","onPageChange","onSortOrder","loading","from","to","last-page","per-page","total","current-page","items","deliveries"])]),i.create_popup?((0,s.wg)(),(0,s.iD)("div",prt,[(0,s.Wm)(w,{visible:i.create_popup,"onUpdate:visible":e[6]||(e[6]=t=>i.create_popup=t)},null,8,["visible"])])):(0,s.kq)("",!0)])])}const hrt={class:"tw-flex tw-flex-col"},grt={class:"tw-overflow-x-auto"},frt={class:"tw-inline-block tw-min-w-full tw-align-middle"},vrt={class:"tw-border tw-overflow-auto tw-border-gray-200 darkx:tw-border-gray-700 md:tw-rounded-lg"},yrt={class:"tw-min-w-full tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700"},xrt={class:"tw-bg-gray-50 darkx:tw-bg-gray-800"},brt={scope:"col",class:"rtl:tw-text-right tw-px-2 tw-text-sm tw-font-medium tw-whitespace-nowrap tw-text-gray-500 darkx:tw-text-gray-400"},_rt={class:"tw-max-w-[25px]"},krt={class:"tw-inline-flex tw-items-center"},Crt={class:"tw-relative tw-flex tw-cursor-pointer tw-items-center tw-rounded-full tw-p-3",for:"checkbox","data-ripple-dark":"true"},Drt=["checked"],Srt=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-top-2/4 tw-left-2/4 -tw-translate-y-2/4 -tw-translate-x-2/4 tw-text-white tw-opacity-0 tw-transition-opacity peer-checked:tw-opacity-100"},[(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"tw-h-3.5 tw-w-3.5",viewBox:"0 0 20 20",fill:"currentColor",stroke:"currentColor","stroke-width":"1"},[(0,s._)("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])],-1),zrt=(0,s._)("th",{scope:"col",class:"tw-py-3.5 tw-px-4 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"},[(0,s._)("span",null,"ID")],-1),Urt={scope:"col",class:"tw-py-3.5 tw-px-4 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"},Lrt=(0,s._)("span",null,"Created",-1),Prt=(0,s._)("svg",{class:"tw-h-3",viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s._)("path",{d:"M2.13347 0.0999756H2.98516L5.01902 4.79058H3.86226L3.45549 3.79907H1.63772L1.24366 4.79058H0.0996094L2.13347 0.0999756ZM2.54025 1.46012L1.96822 2.92196H3.11227L2.54025 1.46012Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,s._)("path",{d:"M0.722656 9.60832L3.09974 6.78633H0.811638V5.87109H4.35819V6.78633L2.01925 9.60832H4.43446V10.5617H0.722656V9.60832Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,s._)("path",{d:"M8.45558 7.25664V7.40664H8.60558H9.66065C9.72481 7.40664 9.74667 7.42274 9.75141 7.42691C9.75148 7.42808 9.75146 7.42993 9.75116 7.43262C9.75001 7.44265 9.74458 7.46304 9.72525 7.49314C9.72522 7.4932 9.72518 7.49326 9.72514 7.49332L7.86959 10.3529L7.86924 10.3534C7.83227 10.4109 7.79863 10.418 7.78568 10.418C7.77272 10.418 7.73908 10.4109 7.70211 10.3534L7.70177 10.3529L5.84621 7.49332C5.84617 7.49325 5.84612 7.49318 5.84608 7.49311C5.82677 7.46302 5.82135 7.44264 5.8202 7.43262C5.81989 7.42993 5.81987 7.42808 5.81994 7.42691C5.82469 7.42274 5.84655 7.40664 5.91071 7.40664H6.96578H7.11578V7.25664V0.633865C7.11578 0.42434 7.29014 0.249976 7.49967 0.249976H8.07169C8.28121 0.249976 8.45558 0.42434 8.45558 0.633865V7.25664Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.3"})],-1),Art=[Lrt,Prt],$rt=(0,s._)("th",{scope:"col",class:"tw-px-3 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Client ",-1),Wrt=(0,s._)("th",{scope:"col",class:"tw-px-3 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," City ",-1),qrt=(0,s._)("th",{scope:"col",class:"tw-px-3 !tw-w-5 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Phone ",-1),Ort=(0,s._)("th",{scope:"col",class:"tw-px-3 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Product ",-1),Ert=(0,s._)("th",{scope:"col",class:"tw-w-10 tw-px-3 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Confirmation ",-1),Trt=(0,s._)("th",{scope:"col",class:"tw-px-3 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Affected ",-1),Vrt=(0,s._)("th",{scope:"col",class:"tw-w-10 tw-px-3 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Delivery ",-1),Irt=(0,s._)("th",{scope:"col",class:"tw-relative tw-py-3.5 tw-px-4"},[(0,s._)("span",{class:"tw-sr-only"},"Actions")],-1),Frt={key:0,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},Rrt={key:1,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},jrt=(0,s._)("tr",null,[(0,s._)("td",{colspan:"8"},[(0,s._)("div",{class:"tw-p-5 tw-text-center tw-text-gray-600 tw-font-medium"}," No Order was found ! ")])],-1),Nrt=[jrt],Mrt={key:2,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},Hrt={colspan:"11"},Yrt={role:"status",class:"tw-w-full tw-p-4 tw-space-y-4 tw-border-gray-200 tw-divide-y tw-divide-gray-200 tw-rounded tw-shadow tw-animate-pulse dark:tw-divide-gray-300 md:tw-p-6 dark:tw-border-gray-300"},Zrt=(0,s._)("div",{class:"tw-flex tw-items-center tw-justify-between"},[(0,s._)("div",null,[(0,s._)("div",{class:"tw-w-32 tw-h-2 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-200"})]),(0,s._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-200 tw-w-12"})],-1),Krt=(0,s._)("div",null,[(0,s._)("div",{class:"tw-w-32 tw-h-2 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-200"})],-1),Brt=(0,s._)("div",{class:"tw-h-2.5 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-200 tw-w-12"},null,-1),Qrt=[Krt,Brt],Grt={class:"tw-mt-6"};function Jrt(t,e,r,a,i,o){const l=(0,s.up)("TableRow"),n=((0,s.up)("loading"),(0,s.up)("TablePaginationNoNums"));return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",hrt,[(0,s._)("div",grt,[(0,s._)("div",frt,[(0,s._)("div",vrt,[(0,s._)("table",yrt,[(0,s._)("thead",xrt,[(0,s._)("tr",null,[(0,s._)("th",brt,[(0,s._)("div",_rt,[(0,s._)("div",krt,[(0,s._)("label",Crt,[(0,s._)("input",{type:"checkbox",checked:i.isAllSelected,onChange:e[0]||(e[0]=(...t)=>o.handleSelectedAllChange&&o.handleSelectedAllChange(...t)),class:"before:tw-content[''] tw-border-solid tw-bg-white tw-peer tw-relative tw-h-5 tw-w-5 tw-cursor-pointer tw-appearance-none tw-rounded-md tw-border tw-border-blue-gray-200 tw-transition-all before:tw-absolute before:tw-top-2/4 before:tw-left-2/4 before:tw-block before:tw-h-12 before:tw-w-12 before:-tw-translate-y-2/4 before:-tw-translate-x-2/4 before:tw-rounded-full before:bg-blue-gray-500 before:tw-opacity-0 before:tw-transition-opacity checked:tw-border-orange-500 checked:tw-bg-orange-500 checked:before:tw-bg-orange-500 hover:before:tw-opacity-10",id:"checkbox-all"},null,40,Drt),Srt])])])]),zrt,(0,s._)("th",Urt,[(0,s._)("button",{onClick:e[1]||(e[1]=e=>t.$emit("sortOrder",{name:"created_at"})),class:"tw-flex tw-items-center tw-gap-x-3 focus:tw-outline-none"},Art)]),$rt,Wrt,qrt,Ort,Ert,Trt,Vrt,Irt])]),!r.loading&&r.items.length>0?((0,s.wg)(),(0,s.iD)("tbody",Frt,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.items,((a,i,n)=>((0,s.wg)(),(0,s.j4)(l,{selected:o.selectedOrders,"onUpdate:selected":e[2]||(e[2]=t=>o.selectedOrders=t),deliveries:r.deliveries,onUpdate:e[3]||(e[3]=e=>t.$emit("update",e)),all:n,index:i,key:a.id,item:a},null,8,["selected","deliveries","all","index","item"])))),128))])):(0,s.kq)("",!0),r.loading||0!=r.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("tbody",Rrt,Nrt)),r.loading?((0,s.wg)(),(0,s.iD)("tbody",Mrt,[(0,s._)("tr",null,[(0,s.kq)("",!0),(0,s._)("td",Hrt,[(0,s._)("div",Yrt,[Zrt,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.perPage-1,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"tw-flex tw-items-center tw-justify-between tw-pt-4"},Qrt)))),128))])])])])):(0,s.kq)("",!0)])])])])]),(0,s._)("div",Grt,[(0,s.Wm)(n,{from:r.from,to:r.to,"last-page":r.lastPage,"per-page":r.perPage,total:r.total,"current-page":r.currentPage,onPageChange:e[4]||(e[4]=e=>t.$emit("pageChange",e))},null,8,["from","to","last-page","per-page","total","current-page"])])])}const Xrt={class:"sm:tw-flex sm:tw-items-center sm:tw-justify-between"},tat={class:"tw-text-sm tw-text-gray-500 darkx:tw-text-gray-400"},eat={class:"tw-font-medium tw-text-gray-700 darkx:tw-text-gray-100"},rat={class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-4 sm:tw-mt-0"},aat=["disabled"],sat=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5 rtl:tw--scale-x-100"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18"})],-1),iat=(0,s._)("span",null," previous ",-1),oat=[sat,iat],lat=["disabled"],nat=(0,s._)("span",null," Next ",-1),dat=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5 rtl:tw--scale-x-100"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"})],-1),wat=[nat,dat];function cat(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",Xrt,[(0,s._)("div",tat,[(0,s.Uk)(" Page "),(0,s._)("span",eat,(0,Q.zw)(r.currentPage)+" of "+(0,Q.zw)(r.lastPage),1)]),(0,s._)("div",rat,[(0,s._)("button",{disabled:r.currentPage<=1,onClick:e[0]||(e[0]=t=>o.changePage(r.currentPage-1)),class:(0,Q.C_)([[r.currentPage<=1&&"tw-cursor-not-allowed"],"tw-flex tw-items-center tw-justify-center tw-w-1/2 tw-px-5 tw-py-2 tw-text-sm tw-text-gray-700 tw-capitalize tw-transition-colors tw-duration-200 tw-bg-white tw-border tw-border-solid tw-rounded-md sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-100 darkx:tw-bg-gray-900 darkx:tw-text-gray-200 darkx:tw-border-gray-700 darkx:hover:tw-bg-gray-800"])},oat,10,aat),(0,s._)("button",{disabled:r.currentPage>=o.totalPages,onClick:e[1]||(e[1]=t=>o.changePage(r.currentPage+1)),class:(0,Q.C_)([[r.currentPage>=o.totalPages&&"tw-cursor-not-allowed"],"tw-flex tw-items-center tw-justify-center tw-w-1/2 tw-px-5 tw-py-2 tw-text-sm tw-text-gray-700 tw-capitalize tw-transition-colors tw-duration-200 tw-bg-white tw-border tw-border-solid tw-rounded-md sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-100 darkx:tw-bg-gray-900 darkx:tw-text-gray-200 darkx:tw-border-gray-700 darkx:hover:tw-bg-gray-800"])},wat,10,lat)])])])}var uat={props:{from:{type:Number,default:1},to:{type:Number,default:1},perPage:{type:Number,default:1},total:{type:Number,default:1},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1}},data(){return{totalItems:100,itemsPerPage:5}},computed:{totalPages(){return this.lastPage},showEllipsisStart(){return this.currentPage>3},showEllipsisEnd(){return this.currentPage<this.totalPages-2},visiblePages(){let t=Math.max(1,this.currentPage-1),e=Math.min(this.totalPages,this.currentPage+1);const r=[];for(let a=t;a<=e;a++)r.push(a);return r}},methods:{changePage(t){this.$emit("pageChange",t)}}};const pat=(0,d.Z)(uat,[["render",cat]]);var mat=pat;const hat={class:"tw-p-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},gat={class:"tw-max-w-[25px]"},fat={class:"tw-inline-flex tw-items-center"},vat={class:"tw-relative tw-flex tw-cursor-pointer tw-items-center tw-rounded-full tw-p-3",for:"checkbox","data-ripple-dark":"true"},yat=["checked","id"],xat=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-top-2/4 tw-left-2/4 -tw-translate-y-2/4 -tw-translate-x-2/4 tw-text-white tw-opacity-0 tw-transition-opacity peer-checked:tw-opacity-100"},[(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"tw-h-3.5 tw-w-3.5",viewBox:"0 0 20 20",fill:"currentColor",stroke:"currentColor","stroke-width":"1"},[(0,s._)("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])],-1),bat={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},_at={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white"},kat={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},Cat={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-flex tw-items-center tw-gap-2"},Dat={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},Sat={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-font-[cairo] tw-max-w-[150px] tw-truncate"},zat={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},Uat={class:"tw-font-medium tw-max-w-[100px] tw-truncate tw-text-gray-800 darkx:tw-text-white tw-font-[cairo]"},Lat={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},Pat={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-font-[cairo] tw-max-w-[120px] tw-truncate"},Aat={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},$at={class:"tw-space-y-1"},Wat={class:"tw-font-bold tw-text-green-500"},qat={class:"tw-block tw-max-w-[150px] tw-truncate"},Oat={key:0,class:"tw-font-bold tw-text-orange-500 tw-bg-orange-100 tw-rounded-lg tw-px-2 tw-text-sm"},Eat={key:1,class:"tw-font-bold tw-text-orange-500 tw-bg-orange-100 tw-rounded-lg tw-px-2 tw-text-sm"},Tat={class:"tw-px-2 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},Vat={class:"tw-px-2 tw-py-2 tw-text-sm tw-whitespace-nowrap"},Iat={class:"tw-px-2 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},Fat={class:"tw-px-4 tw-py-2 tw-text-sm tw-whitespace-nowrap"};function Rat(t,e,r,a,i,o){const l=(0,s.up)("TableRowAffectation"),n=(0,s.up)("TableActions");return(0,s.wg)(),(0,s.iD)("tr",{class:(0,Q.C_)(["hover:tw-bg-gray-50",[null!=r.item.reported_diff&&"reporter"==r.item.confirmation&&r.item.reported_diff<=0&&" !tw-shadow-sm !tw-border !tw-border-emerald-300"]])},[(0,s._)("td",hat,[(0,s._)("div",gat,[(0,s._)("div",fat,[(0,s._)("label",vat,[(0,s._)("input",{type:"checkbox",checked:o.isSelected,onChange:e[0]||(e[0]=(...t)=>o.handleSelected&&o.handleSelected(...t)),class:"before:tw-content[''] tw-border-solid tw-bg-white tw-peer tw-relative tw-h-5 tw-w-5 tw-cursor-pointer tw-appearance-none tw-rounded-md tw-border tw-border-blue-gray-200 tw-transition-all before:tw-absolute before:tw-top-2/4 before:tw-left-2/4 before:tw-block before:tw-h-12 before:tw-w-12 before:-tw-translate-y-2/4 before:-tw-translate-x-2/4 before:tw-rounded-full before:bg-blue-gray-500 before:tw-opacity-0 before:tw-transition-opacity checked:tw-border-orange-500 checked:tw-bg-orange-500 checked:before:tw-bg-orange-500 hover:before:tw-opacity-10",id:"checkbox-"+r.item.id},null,40,yat),xat])])])]),(0,s._)("td",bat,[(0,s._)("div",null,[(0,s._)("h2",_at,(0,Q.zw)(r.item.id),1)])]),(0,s._)("td",kat,[(0,s._)("div",null,[(0,s._)("h2",Cat,[(0,s._)("p",null,(0,Q.zw)(i.moment(r.item.created_at).format("DD[/]MM[/]YY")),1),(0,s.kq)("",!0)])])]),(0,s._)("td",Dat,[(0,s._)("div",null,[(0,s._)("h2",Sat,(0,Q.zw)(r.item.fullname),1)])]),(0,s._)("td",zat,[(0,s._)("div",null,[(0,s._)("h2",Uat,(0,Q.zw)(r.item.city),1)])]),(0,s._)("td",Lat,[(0,s._)("div",null,[(0,s._)("h2",Pat,(0,Q.zw)(r.item.phone),1)])]),(0,s._)("td",Aat,[(0,s._)("div",null,[(0,s._)("ul",$at,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.item.items,(t=>((0,s.wg)(),(0,s.iD)("li",{dir:"rtl",class:"tw-font-[cairo] tw-flex tw-items-center tw-gap-1",key:t.id},[(0,s._)("span",Wat,(0,Q.zw)(t.quantity)+" x ",1),(0,s._)("span",qat,(0,Q.zw)(t.product.name),1),t.product_variation.color&&!["/","-"].includes(t.product_variation.color)?((0,s.wg)(),(0,s.iD)("span",Oat,(0,Q.zw)(t.product_variation.color),1)):(0,s.kq)("",!0),t.product_variation.size&&!["/","-"].includes(t.product_variation.size)?((0,s.wg)(),(0,s.iD)("span",Eat,(0,Q.zw)(t.product_variation.size),1)):(0,s.kq)("",!0)])))),128))])])]),(0,s._)("td",Tat,[(0,s._)("div",null,[(0,s._)("span",{class:(0,Q.C_)([[o.confirmation.bgLight,o.confirmation.textLight],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},(0,Q.zw)(o.confirmation.name),3)])]),(0,s._)("td",Vat,[(0,s._)("div",null,[(0,s.Wm)(l,{onUpdate:e[1]||(e[1]=e=>t.$emit("update",e)),deliveries:r.deliveries,item:r.item},null,8,["deliveries","item"])]),(0,s.kq)("",!0)]),(0,s._)("td",Iat,[(0,s._)("div",null,[(0,s._)("span",{class:(0,Q.C_)([[o.deliveryState.bgLight,o.deliveryState.textLight],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},(0,Q.zw)(o.deliveryState.value?o.deliveryState.name:"Not Selected"),3)])]),(0,s._)("td",Fat,[(0,s._)("div",null,[(0,s.Wm)(n,{onUpdate:e[2]||(e[2]=e=>t.$emit("update",e)),item:r.item},null,8,["item"])])])],2)}const jat={class:"tw-h-full"},Nat={class:"tw-flex tw-items-center tw-gap-2"},Mat=["href"],Hat={key:0};function Yat(t,e,r,a,i,o){const l=(0,s.up)("UpdatePopup");return(0,s.wg)(),(0,s.iD)("div",jat,[(0,s._)("div",Nat,[(0,s._)("a",{target:"_blank",href:"https://api.whatsapp.com/send?phone="+r.item.phone.replace("+","").replace("-","").replace(" ",""),class:"tw-bg-whites tw-shadow-sm tw-px-2 tw-py-1 tw-w-[30px] tw-h-[30px] tw-border tw-border-solid tw-border-green-500/20 hover:tw-bg-green-500/10 hover:tw-border-green-500/70 tw-duration-300 tw-text-green-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(X.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-whatsapp")])),_:1})],8,Mat),(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.update=!0),class:"tw-bg-whites tw-shadow-sm tw-px-2 tw-py-1 tw-w-[30px] tw-h-[30px] tw-border tw-border-solid tw-border-orange-500/20 hover:tw-bg-orange-500/10 hover:tw-border-orange-500/70 tw-duration-300 tw-text-orange-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(X.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])]),i.update?((0,s.wg)(),(0,s.iD)("div",Hat,[(0,s.Wm)(l,{onUpdate:e[1]||(e[1]=e=>t.$emit("update",e)),visible:i.update,"onUpdate:visible":e[2]||(e[2]=t=>i.update=t),item:r.item},null,8,["visible","item"])])):(0,s.kq)("",!0)])}const Zat={class:"tw-mx-auto tw-w-[95%] md:tw-max-w-[800px] tw-overflow-hidden tw-h-fit dark:tw-bg-neutral-900 tw-bg-white tw-border tw-border-solid dark:tw-border-neutral-700 tw-border-neutral-300 tw-shadow-md tw-my-5 tw-rounded-lg"},Kat=(0,s._)("div",{class:"tw-p-4 tw-text-lg tw-border-b tw-border-solid tw-font-medium tw-flex dark:tw-text-neutral-400 tw-text-neutral-500 tw-items-center tw-gap-4 dark:tw-bg-neutral-800 tw-bg-gray-50"}," Order Informations ",-1),Bat={class:"tw-bg-white tw-p-4"},Qat={class:"tw-grid tw-gap-6 tw-gap-y-5 tw-grid-cols-1 md:tw-grid-cols-2"},Gat={class:"tw-col-span-2 md:tw-col-span-1"},Jat=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Client Name",-1),Xat={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},tst={class:"tw-col-span-2 md:tw-col-span-1"},est=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Phone Number",-1),rst={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},ast={class:"tw-col-span-2 md:tw-col-span-1"},sst=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"City",-1),ist={class:"tw-relative"},ost=(0,s._)("option",{value:null,disabled:""},"Choose a City",-1),lst=["value"],nst=["value"],dst=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),wst={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},cst={class:"tw-col-span-2 md:tw-col-span-1"},ust=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Address",-1),pst={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},mst={class:"tw-col-span-2"},hst=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Reconfirmation",-1),gst={class:"tw-relative"},fst=["value"],vst=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),yst={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},xst={key:0,class:"md:tw-col-span-1 tw-col-span-2"},bst=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Date",-1),_st={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},kst={key:1,class:"md:tw-col-span-1 tw-col-span-2"},Cst=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Note",-1),Dst={class:"tw-col-span-2"},Sst=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Note",-1),zst={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},Ust={class:"md:tw-col-span-1 tw-col-span-2"},Lst={class:"md:tw-col-span-1 tw-col-span-2"},Pst=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Upsell",-1),Ast={class:"tw-relative"},$st=["value"],Wst=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),qst={class:"tw-col-span-2"},Ost={class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},Est={key:0,class:"tw-text-red-400 tw-text-xs"},Tst={key:3,class:"tw-col-span-2"},Vst={class:"tw-flex tw-justify-end tw-items-center tw-p-4 tw-gap-3 dark:tw-bg-neutral-900 tw-bg-gray-50 tw-border-t tw-border-solid"},Ist=["disabled"],Fst=(0,s._)("span",null,"Update",-1);function Rst(t,e,r,i,o,l){const n=(0,s.up)("OrderAffectation"),d=(0,s.up)("OrderItems"),w=(0,s.up)("ProductOffersTable"),c=(0,s.up)("popup-new");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(c,{visible:r.visible,closeable:!1,onCancel:l.cancel},{default:(0,s.w5)((()=>[(0,s._)("div",Zat,[Kat,(0,s._)("div",Bat,[(0,s._)("div",Qat,[(0,s._)("div",Gat,[Jat,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.itemCopy.fullname=t),onInput:e[1]||(e[1]=t=>o.errors.fullname=null),type:"text",class:(0,Q.C_)([[o.errors.fullname&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),placeholder:"John",required:""},null,34),[[a.nr,o.itemCopy.fullname]]),o.errors.fullname?((0,s.wg)(),(0,s.iD)("label",Xat,(0,Q.zw)(o.errors.fullname),1)):(0,s.kq)("",!0)]),(0,s._)("div",tst,[est,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.itemCopy.phone=t),onInput:e[3]||(e[3]=t=>o.errors.phone=null),class:(0,Q.C_)([[o.errors.phone&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"123-45-678",required:""},null,34),[[a.nr,o.itemCopy.phone]]),o.errors.phone?((0,s.wg)(),(0,s.iD)("label",rst,(0,Q.zw)(o.errors.phone),1)):(0,s.kq)("",!0)]),(0,s._)("div",ast,[sst,(0,s._)("div",ist,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.itemCopy.city=t),onChange:e[5]||(e[5]=t=>o.errors.city=null),class:(0,Q.C_)([[o.errors.city&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 tw-pr-7"])},[ost,(0,s._)("option",{value:o.itemCopy.city,disabled:""},(0,Q.zw)(o.itemCopy.city),9,lst),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,nst)))),128))],34),[[a.bM,o.itemCopy.city]]),dst]),o.errors.city?((0,s.wg)(),(0,s.iD)("label",wst,(0,Q.zw)(o.errors.city),1)):(0,s.kq)("",!0)]),(0,s._)("div",cst,[ust,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>o.itemCopy.adresse=t),onInput:e[7]||(e[7]=t=>o.errors.adresse=null),class:(0,Q.C_)([[o.errors.adresse&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"Address",required:""},null,34),[[a.nr,o.itemCopy.adresse]]),o.errors.adresse?((0,s.wg)(),(0,s.iD)("label",pst,(0,Q.zw)(o.errors.adresse),1)):(0,s.kq)("",!0)]),(0,s._)("div",mst,[hst,(0,s._)("div",gst,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>o.itemCopy.followup_confirmation=t),onChange:e[9]||(e[9]=t=>o.errors.followup_confirmation=null),class:(0,Q.C_)([[o.errors.followup_confirmation&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.followup_confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,class:(0,Q.C_)([t.text,!t.value&&"!tw-text-green-500"]),key:t.id},(0,Q.zw)(t.name),11,fst)))),128))],34),[[a.bM,o.itemCopy.followup_confirmation]]),vst]),o.errors.followup_confirmation?((0,s.wg)(),(0,s.iD)("label",yst,(0,Q.zw)(o.errors.followup_confirmation),1)):(0,s.kq)("",!0)]),"reporter"==o.itemCopy.followup_confirmation?((0,s.wg)(),(0,s.iD)("div",xst,[bst,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>o.itemCopy.followup_reported_date=t),onInput:e[11]||(e[11]=t=>o.errors.followup_reported_date=null),class:(0,Q.C_)([[o.errors.followup_reported_date&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"date",required:""},null,34),[[a.nr,o.itemCopy.followup_reported_date]]),o.errors.followup_reported_date?((0,s.wg)(),(0,s.iD)("label",_st,(0,Q.zw)(o.errors.followup_reported_date),1)):(0,s.kq)("",!0)])):(0,s.kq)("",!0),"reporter"==o.itemCopy.followup_confirmation?((0,s.wg)(),(0,s.iD)("div",kst,[Cst,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[12]||(e[12]=t=>o.itemCopy.followup_reported_note=t),rows:"1",class:"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500",placeholder:"Enter a note"},null,512),[[a.nr,o.itemCopy.followup_reported_note]])])):(0,s.kq)("",!0),(0,s._)("div",Dst,[Sst,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[13]||(e[13]=t=>o.itemCopy.note=t),onInput:e[14]||(e[14]=t=>o.errors.note=null),class:(0,Q.C_)([[o.errors.note&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),rows:"3",placeholder:"Enter a note"},null,34),[[a.nr,o.itemCopy.note]]),o.errors.note?((0,s.wg)(),(0,s.iD)("label",zst,(0,Q.zw)(o.errors.note),1)):(0,s.kq)("",!0)]),(0,s._)("div",Ust,[(0,s.Wm)(n,{item:o.itemCopy,error:o.errors.affectation,"onUpdate:error":e[15]||(e[15]=t=>o.errors.affectation=t),affectation:o.itemCopy.affectation,"onUpdate:affectation":e[16]||(e[16]=t=>o.itemCopy.affectation=t)},null,8,["item","error","affectation"])]),(0,s.kq)("",!0),(0,s._)("div",Lst,[Pst,(0,s._)("div",Ast,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[19]||(e[19]=t=>o.itemCopy.upsell=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.upsells,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([t.text]),value:t.value,key:t.id},(0,Q.zw)(t.name),11,$st)))),128))],512),[[a.bM,o.itemCopy.upsell]]),Wst])]),(0,s._)("div",qst,[(0,s._)("label",Ost,[(0,s.Uk)("Order Items "),o.errors.items?((0,s.wg)(),(0,s.iD)("span",Est," # "+(0,Q.zw)(o.errors.items),1)):(0,s.kq)("",!0)]),(0,s._)("div",null,[(0,s.Wm)(d,{order:o.itemCopy,error:o.errors.items,products:o.products,"products-fetched":o.products_fetched,items:o.itemCopy.items,"onUpdate:items":e[20]||(e[20]=t=>o.itemCopy.items=t)},null,8,["order","error","products","products-fetched","items"])])]),o.products_fetched?((0,s.wg)(),(0,s.iD)("div",Tst,[(0,s.Wm)(w,{products:o.products,item:o.itemCopy},null,8,["products","item"])])):(0,s.kq)("",!0)])]),(0,s._)("div",Vst,[(0,s._)("button",{onClick:e[21]||(e[21]=(...t)=>l.cancel&&l.cancel(...t)),class:"tw-py-2 tw-px-7 tw-rounded tw-text-sm tw-border tw-border-solid tw-border-tansparent dark:tw-border-neutral-900 hover:tw-border-neutral-400 dark:hover:tw-border-neutral-500 hover:tw-bg-gray-300 tw-bg-gray-200 dark:tw-bg-neutral-600 tw-duration-300 tw-text-neutral-900 dark:tw-text-neutral-300"}," Cancel "),(0,s._)("button",{onClick:e[22]||(e[22]=(...t)=>l.handleUpdate&&l.handleUpdate(...t)),disabled:o.isLoading,class:"tw-py-2 tw-px-7 tw-flex tw-items-center tw-rounded tw-text-sm tw-bg-orange-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-orange-600 dark:tw-border-neutral-900 dark:hover:tw-border-orange-500 hover:tw-bg-orange-500/80 dark:hover:tw-bg-orange-400 tw-duration-300 tw-text-white"},[(0,s.Wm)(X.t,{size:"small",class:(0,Q.C_)(["tw-duration-300 tw-animate-spin tw-overflow-hidden tw-max-w-0 tw-mr-0",[o.isLoading&&"!tw-max-w-[50px] !tw-mr-3"]])},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1},8,["class"]),Fst],8,Ist)])])])),_:1},8,["visible","onCancel"])])}const jst=(t,e)=>e.fullname?e.phone?e.adresse?e.note||"annuler"!=e.confirmation?e.affectation&&"confirmer"!=e.confirmation?(t.errors.affectation="Cannot update affectation: Order not confirmed.",!1):!!Nst(t,e.items):(t.errors.note="Add Cancelation note !",!1):(t.errors.adresse="Address is required",!1):(t.errors.phone="Phone Number is required",!1):(t.errors.fullname="Client Name is required",!1),Nst=(t,e)=>{if(!e.length)return t.errors.items="You should add one order item at least.",!1;let r=!0;return e.forEach((e=>0==e.product_id?(t.errors.items="Product is required for order item",r=!1,!1):0==e.product_variation_id?(t.errors.items="Select a product variation",r=!1,!1):0==e.quantity?(t.errors.items="Items quantity cannot be 0",r=!1,!1):void 0)),r},Mst=(t,e)=>{t.$alert({title:"Updated Successfully",type:"success"});const r=e.data.order;t.$emit("update",r),t.isLoading=!1,t.cancel(),t.errors={}},Hst=(t,e)=>{t.$alert({title:e.message,type:"error"}),"VALIDATION_ERROR"==e.code&&(t.errors=e.errors),t.isLoading=!1},Yst=(t,e)=>{t.isLoading=!0,t.errors={},XU.update(e.id,e).then((e=>Mst(t,e.data))).catch((e=>Hst(t,e.response.data))).finally((()=>t.isLoading=!1))},Zst={key:0},Kst=(0,s._)("p",{class:"tw-col-span-12 tw-rounded-lg tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"}," No Order items ",-1),Bst={class:"tw-flex tw-justify-end tw-items-center tw-py-3"},Qst=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),Gst=(0,s._)("span",null,"Add Item",-1),Jst=[Qst,Gst],Xst={key:1,class:"md:tw-col-span-12 tw-col-span-12"},tit={class:"tw-max-w-full tw-overflow-auto"},eit={class:"tw-text-xs tw-text-gray-700 tw-uppercase !tw-rounded-t-lg tw-border tw-border-solid"},rit={class:"tw-bg-gray-50"},ait={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},sit={key:0},iit={colspan:"6"},oit={class:"tw-flex tw-justify-end tw-items-center tw-py-3"},lit=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),nit=(0,s._)("span",null,"Add Item",-1),dit=[lit,nit],wit=(0,s._)("td",{colspan:"4"},null,-1),cit=(0,s._)("td",null,null,-1),uit={colspan:"1",class:"tw-p-2"},pit={class:"tw-p-2 tw-py-1 tw-text-lg tw-font-['cairo'] tw-text-green-500 tw-w-24 tw-font-bold tw-tracking-wide tw-block focus:tw-outline-none tw-shadow-sm tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},mit={key:1},hit={colspan:"6"},git={class:"tw-scale-75 tw-p-5"};function fit(t,e,r,a,i,o){const l=(0,s.up)("ItemRow"),n=(0,s.up)("loading");return(0,s.wg)(),(0,s.iD)("div",null,[r.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Zst,[Kst,(0,s._)("div",Bst,[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>o.addItem&&o.addItem(...t)),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-400 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},Jst)])])),r.items.length?((0,s.wg)(),(0,s.iD)("div",Xst,[(0,s._)("div",tit,[((0,s.wg)(),(0,s.iD)("table",{key:r.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,s._)("thead",eit,[(0,s._)("tr",rit,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",ait,(0,Q.zw)(t),1)],2))),64))])]),r.productsFetched?((0,s.wg)(),(0,s.iD)("tbody",sit,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.items,(t=>((0,s.wg)(),(0,s.j4)(l,{key:t.id,item:t,products:r.products,onDelete:o.deleteItem,onUpdate:o.updateItem},null,8,["item","products","onDelete","onUpdate"])))),128)),(0,s._)("tr",null,[(0,s._)("td",iit,[(0,s._)("div",oit,[(0,s._)("button",{onClick:e[1]||(e[1]=(...t)=>o.addItem&&o.addItem(...t)),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-400 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},dit)])])]),(0,s._)("tr",null,[wit,cit,(0,s._)("td",uit,[(0,s._)("div",pit,[(0,s._)("p",null,(0,Q.zw)(i.currency)+" "+(0,Q.zw)(o.price),1)])])])])):((0,s.wg)(),(0,s.iD)("tbody",mit,[(0,s._)("tr",null,[(0,s._)("td",hit,[(0,s._)("div",git,[(0,s.Wm)(n)])])])]))]))])])):(0,s.kq)("",!0)])}var vit={components:{ItemRow:O$},props:{items:{required:!0,default:[]},error:{required:!1,default:null},products:{required:!0},productsFetched:{required:!0},order:{required:!0}},data(){return{currency:R}},computed:{price(){return Mi(this.order)}},methods:{updateItem(t){const e=this.items.map((e=>e.id==t.id?t:e));this.$emit("update:items",e)},deleteItem(t){const e=this.items.filter((e=>e.id!=t));this.$emit("update:items",e)},addItem(){const t=this.items.length>0?this.items[this.items.length-1].id:1,e=t?t+1:1,r={id:e,quantity:0,price:0,product_variation_id:0,product_id:0},a=[...this.items,r];this.$emit("update:items",a)}},mounted(){}};const yit=(0,d.Z)(vit,[["render",fit]]);var xit=yit;const bit=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Affectation",-1),_it={key:0,class:"tw-relative"},kit=["value","disabled"],Cit=(0,s._)("option",{value:""},"Choose a Delivery",-1),Dit=["value"],Sit=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),zit={key:1,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},Uit={key:2,class:"tw-relative"},Lit={class:"tw-absolute tw-scale-75 tw-left-1/2 tw-top-1/2 -tw-translate-x-1/2 -tw-translate-y-1/2 tw-z-10"},Pit=(0,s._)("select",{disabled:"",class:"tw-opacity-30 tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[(0,s._)("option",{value:null,selected:""},"Loading...")],-1),Ait=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},null,-1);function $it(t,e,r,a,i,o){const l=(0,s.up)("loading");return(0,s.wg)(),(0,s.iD)("div",null,[bit,i.fetched?((0,s.wg)(),(0,s.iD)("div",_it,[(0,s._)("select",{value:r.affectation,onChange:e[0]||(e[0]=(...t)=>o.handleChange&&o.handleChange(...t)),disabled:"confirmer"!=r.item.confirmation,class:(0,Q.C_)([[r.error&&"!tw-border-red-400","confirmer"!=r.item.confirmation&&"tw-cursor-not-allowed"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[Cit,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.availableDeliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,Dit)))),128))],42,kit),Sit])):(0,s.kq)("",!0),i.fetched&&r.error?((0,s.wg)(),(0,s.iD)("label",zit,(0,Q.zw)(r.error),1)):(0,s.kq)("",!0),i.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Uit,[(0,s._)("div",Lit,[(0,s.Wm)(l)]),Pit,Ait]))])}var Wit={props:{affectation:{required:!0},error:{required:!1,default:null},item:{required:!0}},data(){return{deliveries:[],fetched:!1}},computed:{availableDeliveries(){return this.deliveries.filter((t=>t.has.some((t=>this.item.items.some((e=>e.product_id==t))))))},delivery(){return this.deliveries.find((t=>t.id==this.affectation))}},watch:{"item.confirmation":{deep:!0,handler(){this.$emit("update:affectation",null)}},"item.items":{deep:!0,handler(){if(!this.affectation)return!1;this.delivery.has.some((t=>this.item.items.some((e=>e.product_id==t))))||this.$emit("update:affectation",null)}}},methods:{getDeliveries(){this.fetched=!1,K.allDeliveries().then((t=>{"SUCCESS"==t?.data.code&&(this.deliveries=t.data.data.deliveries,this.fetched=!0)})).catch(this.$handleApiError)},handleChange(t){this.$emit("update:affectation",t.target.value),this.$emit("update:error",null)}},mounted(){this.getDeliveries()}};const qit=(0,d.Z)(Wit,[["render",$it]]);var Oit=qit;const Eit={key:0},Tit=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Offers",-1),Vit={class:"md:tw-col-span-12 tw-col-span-12"},Iit={class:"tw-max-w-full tw-overflow-auto"},Fit={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Rit=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 !tw-rounded-t-lg tw-border tw-border-solid"},[(0,s._)("tr",{class:"tw-bg-gray-50"},[(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Product Name"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Quantity"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Price"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Note")])],-1),jit={class:"tw-px-3 tw-py-2"},Nit={class:"tw-px-3 tw-py-2"},Mit={class:"tw-px-3 tw-py-2"},Hit={class:"tw-px-3 tw-py-2"},Yit={class:"tw-max-w-[250px] tw-text-sm"};function Zit(t,e,r,a,i,o){return o.offers.length?((0,s.wg)(),(0,s.iD)("div",Eit,[Tit,(0,s._)("div",Vit,[(0,s._)("div",Iit,[(0,s._)("table",Fit,[Rit,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.offers,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"odd:tw-bg-white even:tw-bg-gray-50 tw-border-b"},[(0,s._)("td",jit,(0,Q.zw)(o.getProduct(t.product_id)?.name),1),(0,s._)("td",Nit,(0,Q.zw)(t.quantity),1),(0,s._)("td",Mit,(0,Q.zw)(t.price)+" "+(0,Q.zw)(i.currency),1),(0,s._)("td",Hit,[(0,s._)("p",Yit,(0,Q.zw)(t.note),1)])])))),128))])])])])])):(0,s.kq)("",!0)}var Kit={props:{products:{required:!0},item:{required:!0}},data(){return{currency:R}},computed:{offers(){return this.products.filter((t=>this.item.items.map((t=>t.product_id)).includes(t.id))).flatMap((t=>t.offers))}},methods:{getProduct(t){return this.products.find((e=>e.id==t))}},mounted(){}};const Bit=(0,d.Z)(Kit,[["render",Zit]]);var Qit=Bit,Git={components:{OrderItems:xit,OrderAffectation:Oit,ProductOffersTable:Qit},props:{visible:{required:!0},item:{required:!0}},data(){return{followup_confirmations:An,deliveryStatus:Wn,upsells:$n,isLoading:!1,products_fetched:null,products:null,itemCopy:null,errors:{fullname:null,phone:null,city:null,adresse:null,note:null,reported_agente_date:null,affectation:null,items:null}}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{handleUpdate(){const t=jst(this,this.itemCopy);if(!t)return!1;Yst(this,this.itemCopy)},cancel(){if(this.isLoading)return!1;this.$emit("update:visible",!1)},getProducts(){this.products_fetched=!1,ea.allForOrder().then((t=>{"SUCCESS"==t.data.code?this.products=t.data.data.products:this.products=[],this.products_fetched=!0})).catch(this.$handleApiError)}},mounted(){this.itemCopy=JSON.parse(JSON.stringify(this.item)),this.getProducts()}};const Jit=(0,d.Z)(Git,[["render",Rst]]);var Xit=Jit,tot={components:{UpdatePopup:Xit},props:{item:{required:!0}},data(){return{update:!1,history:!1,isLoading:!1}},methods:{handle(){}}};const eot=(0,d.Z)(tot,[["render",Yat]]);var rot=eot;const aot={key:0},sot={key:0,class:"tw-relative tw-inline-block tw-text-left"},iot={key:0},oot=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"#4ade80",d:"M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41L9 16.17z"})],-1),lot=[oot],not={class:"tw-w-full tw-truncate tw-text-start tw-text-gray-500"},dot={key:0,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},wot=(0,s.uE)('<g fill="none" stroke="#4ade80" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" stroke-opacity=".3" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="1.3s" values="60;0"></animate></path><path stroke-dasharray="15" stroke-dashoffset="15" d="M12 3C16.9706 3 21 7.02944 21 12"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="15;0"></animate><animateTransform attributeName="transform" dur="1.5s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"></animateTransform></path></g>',1),cot=[wot],uot={key:0,class:"tw-text-xs tw-mt-2 tw-max-w-[150px] tw-text-red-400 tw-whitespace-normal"},pot={key:0,class:"tw-absolute tw-right-0 tw-z-10 tw-mt-2 tw-w-56 tw-origin-top-right tw-rounded-md tw-bg-white tw-shadow-lg tw-ring-1 tw-ring-black tw-ring-opacity-5 focus:tw-outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",tabindex:"-1"},mot={class:"tw-py-1",role:"none"},hot=["onClick"],got={key:1},fot={class:"tw-p-2 tw-scale-75"};function vot(t,e,r,a,i,o){const l=(0,s.up)("loading");return"confirmer"==r.item.confirmation?((0,s.wg)(),(0,s.iD)("div",aot,[r.deliveries.fetched?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",sot,[(0,s._)("div",null,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.visible=!i.visible),type:"button",class:"tw-inline-flex tw-w-[150px] tw-truncate tw-relative tw-items-center tw-gap-x-1.5 tw-rounded-md tw-bg-white tw-px-3 tw-py-1 tw-text-sm tw-font-semibold tw-text-gray-900 tw-shadow-none hover:tw-shadow-sm tw-ring-1 tw-ring-inset tw-ring-gray-200",id:"menu-button","aria-expanded":"true","aria-haspopup":"true"},[o.selected.id?((0,s.wg)(),(0,s.iD)("div",iot,lot)):(0,s.kq)("",!0),(0,s._)("p",not,(0,Q.zw)(o.selected.name),1),(0,s._)("div",null,[i.isLoading?((0,s.wg)(),(0,s.iD)("svg",dot,cot)):(0,s.kq)("",!0)])]),i.errors.affectation?((0,s.wg)(),(0,s.iD)("p",uot,(0,Q.zw)(i.errors.affectation),1)):(0,s.kq)("",!0)]),(0,s.Wm)(Ut.cu,null,{default:(0,s.w5)((()=>[i.visible?((0,s.wg)(),(0,s.iD)("div",pot,[(0,s._)("div",mot,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.availableDeliveries,(t=>((0,s.wg)(),(0,s.iD)("button",{onClick:e=>o.handleChange(t.id),key:t.id,class:"hover:tw-bg-gray-100 tw-items-center tw-w-full tw-text-start hover:tw-text-gray-700 tw-text-gray-700 tw-flex tw-gap-2 tw-px-4 tw-py-2 tw-text-sm",role:"menuitem"},[(0,s._)("span",null,(0,Q.zw)(t.name),1)],8,hot)))),128))])])):(0,s.kq)("",!0)])),_:1})])),[[Bt.L,o.handleClickOutside]]):((0,s.wg)(),(0,s.iD)("div",got,[(0,s._)("div",fot,[(0,s.Wm)(l)])]))])):(0,s.kq)("",!0)}var yot={props:{deliveries:{required:!0},item:{required:!0}},data(){return{visible:!1,isLoading:!1,errors:{}}},computed:{availableDeliveries(){return[{id:null,name:"Select"},...this.deliveries.items.filter((t=>t.has.some((t=>this.item.items.some((e=>e.product_id==t))))))]},selected(){return this.availableDeliveries.find((t=>t.id==this.item.affectation))}},methods:{handleClickOutside(){this.visible&&(this.visible=!1)},handleChange(t){this.visible=!1,this.errors={};const e={...this.item,affectation:t};Yst(this,e,!1)}}};const xot=(0,d.Z)(yot,[["render",vot]]);var bot=xot,_ot={components:{TableActions:rot,TableRowAffectation:bot},props:{item:{required:!0},selected:{required:!0},deliveries:{required:!0},all:{required:!0},index:{required:!0}},data(){return{moment:UP()}},computed:{confirmation(){return Pn.find((t=>t.value==this.item.confirmation))},deliveryState(){return Wn.find((t=>t.value==this.item.delivery))},isSelected(){return this.selected.includes(this.item.id)}},methods:{handleSelected(t){if(t.target.checked){const t=[...this.selected];return t.push(this.item.id),this.$emit("update:selected",t),!1}const e=this.selected.filter((t=>t!=this.item.id));this.$emit("update:selected",e)}},mounted(){}};const kot=(0,d.Z)(_ot,[["render",Rat]]);var Cot=kot,Dot={components:{TablePaginationNoNums:mat,TableRow:Cot},props:{items:{default:[]},loading:{type:Boolean,default:!0},from:{type:Number,default:1},to:{type:Number,default:1},perPage:{type:Number,default:10},total:{type:Number,default:0},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1},selected:{required:!0},deliveries:{required:!0}},data(){return{isAllSelected:!1}},computed:{selectedOrders:{get(){return this.selected},set(t){this.$emit("update:selected",t)}}},watch:{selected(t){0==t.length&&(this.isAllSelected=!1)}},methods:{handleSelectedAllChange(t){t.target.checked?(this.$emit("update:selected",[...this.items.map((t=>t.id))]),this.isAllSelected=!0):(this.$emit("update:selected",[]),this.isAllSelected=!1)}}};const Sot=(0,d.Z)(Dot,[["render",Jrt]]);var zot=Sot;const Uot={class:"tw-mt-6 tw-mb-4 md:tw-flex md:tw-items-center md:tw-justify-between"},Lot={class:"tw-inline-flex tw-overflow-hidden tw-bg-white tw-border tw-divide-x tw-rounded-lg darkx:tw-bg-gray-900 rtl:tw-flex-row-reverse darkx:tw-border-gray-700 darkx:tw-divide-gray-700"},Pot=["disabled"],Aot=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M9 5a1 1 0 1 0 0 2a1 1 0 0 0 0-2zM6.17 5a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 0 1 0-2h1.17zM15 11a1 1 0 1 0 0 2a1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-1.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h7.17zM9 17a1 1 0 1 0 0 2a1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h1.17z"})],-1),$ot=[Aot],Wot=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M10 2c-.6 0-1 .4-1 1v18c0 .6.4 1 1 1s1-.4 1-1V3c0-.6-.4-1-1-1zM5 12c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1s1-.4 1-1v-8c0-.6-.4-1-1-1zm10-4c-.6 0-1 .4-1 1v12c0 .6.4 1 1 1s1-.4 1-1V9c0-.6-.4-1-1-1zm5 8c-.6 0-1 .4-1 1v4c0 .6.4 1 1 1s1-.4 1-1v-4c0-.6-.4-1-1-1z"})],-1),qot=[Wot],Oot=["disabled"],Eot=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 16 16"},[(0,s._)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4.75 10.75h-3m12.5-2c0 3-2.798 5.5-6.25 5.5c-3.75 0-6.25-3.5-6.25-3.5v3.5m9.5-9h3m-12.5 2c0-3 2.798-5.5 6.25-5.5c3.75 0 6.25 3.5 6.25 3.5v-3.5"})],-1),Tot=[Eot],Vot={class:"tw-relative"},Iot=["value"],Fot=(0,s.uE)('<option value="5">5</option><option value="10">10</option><option value="20">20</option><option value="50">50</option><option value="100">100</option><option value="250">250</option><option value="500">500</option>',7),Rot=[Fot],jot=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),Not={class:"tw-relative tw-flex tw-items-center tw-mt-4 md:tw-mt-0"},Mot=["value"],Hot={class:"tw-overflow-hidden tw-col-span-1"},Yot={class:"tw-overflow-hidden tw-col-span-1"};function Zot(t,e,r,i,o,l){const n=(0,s.up)("FiltersWrapper"),d=((0,s.up)("IndexExport"),(0,s.up)("IndexStatistics"));return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",Uot,[(0,s._)("div",Lot,[(0,s._)("button",{class:(0,Q.C_)([[o.showAll&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 hover:tw-bg-gray-100 sm:tw-text-sm darkx:tw-bg-gray-800 darkx:tw-text-gray-300"]),disabled:o.showAll,onClick:e[0]||(e[0]=t=>l.filterToday(!1))}," View all ",10,Pot),(0,s.kq)("",!0),(0,s._)("button",{title:"Show Filters Tab",onClick:e[2]||(e[2]=t=>o.showFilters=!o.showFilters),class:(0,Q.C_)([[o.showFilters&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"])},$ot,2),r.activeStatistics&&r.statistics?((0,s.wg)(),(0,s.iD)("button",{key:1,title:"Show Statistics Tab",onClick:e[3]||(e[3]=t=>o.showStatistics=!o.showStatistics),class:(0,Q.C_)([[o.showStatistics&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"])},qot,2)):(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s._)("button",{title:"Refresh",onClick:e[5]||(e[5]=e=>t.$emit("fresh")),disabled:r.loading,class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},Tot,8,Oot),(0,s.kq)("",!0),(0,s._)("div",Vot,[(0,s._)("select",{onChange:e[7]||(e[7]=(...t)=>l.handlePerPageChange&&l.handlePerPageChange(...t)),value:r.perPage,class:"tw-h-full tw-px-5 tw-py-2 tw-w-20 focus:tw-outline-none tw-text-xs tw-font-medium tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},Rot,40,Iot),jot])]),(0,s._)("div",Not,[(0,s._)("input",{type:"text",placeholder:"Search",value:r.search,onInput:e[8]||(e[8]=e=>t.$emit("update:search",e.target.value)),onKeyup:e[9]||(e[9]=(0,a.D2)((e=>t.$emit("filter")),["enter"])),class:"tw-block tw-w-full tw-py-1.5 tw-pl-5 tw-text-gray-700 tw-bg-white tw-border tw-border-solid tw-border-gray-200 tw-rounded-lg md:tw-w-80 placeholder-gray-400/70 tw-pr-11 rtl:tw-pr-11 rtl:tw-pl-5 darkx:tw-bg-gray-900 darkx:tw-text-gray-300 darkx:tw-border-gray-600 focus:tw-border-orange-400 darkx:focus:tw-border-orange-300 focus:tw-ring-orange-300 focus:tw-outline-none focus:tw-ring focus:tw-ring-opacity-40"},null,40,Mot),(0,s._)("button",{onClick:e[10]||(e[10]=e=>t.$emit("filter")),class:"tw-absolute tw-right-0 tw-px-2 tw-py-1 tw-w-[38px] tw-h-[36px] tw-border-solid tw-rounded-r-lg tw-border-l tw-text-orange-500/80 tw-border-orange-500/20 hover:tw-bg-orange-500/10 hover:tw-border-orange-500/70 tw-duration-300 tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(X.t,{size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-magnify")])),_:1})])])]),(0,s._)("div",{class:(0,Q.C_)([[o.showFilters?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",Hot,[(0,s.Wm)(n,{onClear:e[11]||(e[11]=e=>t.$emit("clear")),onFilter:e[12]||(e[12]=e=>t.$emit("filter")),filters:r.filters,onUpdate:e[13]||(e[13]=e=>t.$emit("update:filters",e))},null,8,["filters"])])],2),(0,s.kq)("",!0),r.statistics?((0,s.wg)(),(0,s.iD)("div",{key:1,class:(0,Q.C_)([[o.showStatistics?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",Yot,[(0,s.Wm)(d,{statistics:r.statistics},null,8,["statistics"])])],2)):(0,s.kq)("",!0)])}const Kot={class:"tw-mb-4"},Bot={class:"tw-grid tw-grid-cols-12 tw-gap-4"},Qot={class:"tw-h-full tw-w-full tw-p-3 tw-rounded tw-space-y-2 tw-border tw-border-solid"},Got={class:"tw-flex tw-items-center tw-justify-between"},Jot={class:"tw-text-xl tw-font-bold tw-text-gray-900"},Xot={class:"tw-px-2 tw-py-1 tw-font-medium tw-text-sm tw-rounded tw-bg-white tw-text-gray-900"};function tlt(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",Kot,[(0,s._)("div",Bot,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.visible,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"md:tw-col-span-3 tw-col-span-12"},[(0,s._)("div",Qot,[(0,s._)("p",{class:(0,Q.C_)(["tw-text-sm tw-font-bold tw-w-fit tw-h-fit tw-px-2 tw-rounded",[o.getConfirmation(t.confirmation).textLight,o.getConfirmation(t.confirmation).bgLight]])},(0,Q.zw)(t.name),3),(0,s._)("div",Got,[(0,s._)("span",Jot,(0,Q.zw)(t.total),1),(0,s._)("span",Xot,(0,Q.zw)(t.percent)+"%",1)])])])))),128))])])}var elt={props:{statistics:{required:!0}},computed:{visible(){return this.statistics.show.includes("*")?this.statistics.data:this.statistics.data.filter((t=>this.statistics.show.includes(t.followup_confirmation)))}},methods:{getConfirmation(t){return Pn.find((e=>e.value==t))}}};const rlt=(0,d.Z)(elt,[["render",tlt]]);var alt=rlt;const slt={class:"tw-mb-4"},ilt={class:"tw-flex tw-items-center tw-gap-2"},olt=["disabled"],llt=(0,s._)("span",null,"Select Filtered",-1),nlt={class:"tw-flex tw-justify-end"},dlt=["disabled"];function wlt(t,e,r,a,i,o){const l=(0,s.up)("download-csv");return(0,s.wg)(),(0,s.iD)("div",slt,[(0,s._)("div",ilt,[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>o.handleExportFiltered&&o.handleExportFiltered(...t)),disabled:i.isLoadingFiltered,class:"tw-py-2 tw-px-7 tw-flex tw-items-center tw-rounded tw-text-sm tw-bg-orange-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-orange-600 dark:tw-border-neutral-900 dark:hover:tw-border-orange-500 hover:tw-bg-orange-500/80 dark:hover:tw-bg-orange-400 tw-duration-300 tw-text-white"},[(0,s.Wm)(X.t,{size:"small",class:(0,Q.C_)(["tw-duration-300 tw-animate-spin tw-overflow-hidden tw-max-w-0 tw-mr-0",[i.isLoadingFiltered&&"!tw-max-w-[50px] !tw-mr-3"]])},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1},8,["class"]),llt],8,olt)]),(0,s._)("div",nlt,[(0,s._)("button",{disabled:i.readyToDownload,class:(0,Q.C_)([[!i.readyToDownload&&"!tw-bg-gray-200 !tw-cursor-not-allowed hover:tw-bg-gray-200 !tw-text-gray-600"],"tw-py-2 tw-px-7 tw-flex tw-items-center tw-cursor-pointer tw-rounded tw-text-sm tw-bg-emerald-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-emerald-600 dark:tw-border-neutral-900 dark:hover:tw-border-emerald-500 hover:tw-bg-emerald-500/80 dark:hover:tw-bg-emerald-400 tw-duration-300 tw-text-white"])},[(0,s.Wm)(l,{delimiter:";",data:i.toImport},{default:(0,s.w5)((()=>[(0,s.Uk)(" Download ")])),_:1},8,["data"])],10,dlt)])])}var clt={props:{filters:{required:!0}},data(){return{isLoadingFiltered:!1,isLoading:!1,toImport:[],readyToDownload:!1}},watch:{filters:{deep:!0,handler(){this.readyToDownload=!1}}},methods:{handleExportFiltered(){this.isLoadingFiltered=!0,this.readyToDownload=!1,XU["export"]({filters:this.filters}).then((t=>{if("SUCCESS"==t.data.code){const e=t.data.data.orders;this.importOrders(e),this.readyToDownload=!0}})).catch(this.$handleApiError).finally((()=>{this.isLoadingFiltered=!1}))},importOrders(t){const e=t.map((t=>{const e=Object.keys(t);return e.forEach((e=>{t[e]=t[e]?t[e]:"NONE"})),t})),r=",",a=e.map((t=>(delete t["factorisation_id"],delete t["note_d"],delete t["cmd"],delete t["product_name"],delete t["is_done"],delete t["factorisation"],delete t["doubles"],delete t["is_double"],delete t["has_doubles"],delete t["double"],{...t,products:t.items.map((t=>`id=${t.id}${r}price=${t.price?t.price:0}${r}name=${t.product?.name}${r}ref=${t.product?.ref}${r}variation_id=${t.product_variation_id}${r}size=${t.product_variation.size?t.product_variation.size:"DEFAULT"}${r}color=${t.product_variation.color?t.product_variation.color:"DEFAULT"}${r}`))})));this.toImport=a.map((t=>(delete t["items"],t)))}}};const ult=(0,d.Z)(clt,[["render",wlt]]);var plt=ult;const mlt={class:"tw-mb-4"},hlt={class:"tw-grid tw-grid-cols-12 tw-gap-4 tw-p-1"},glt={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},flt=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Reconfirmation",-1),vlt=["value"],ylt=(0,s._)("option",{value:"all",selected:""},"All",-1),xlt=["value"],blt={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},_lt=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Delivery",-1),klt=["value"],Clt=(0,s._)("option",{value:"all",selected:""},"All",-1),Dlt=["value"],Slt={class:"tw-col-span-12 tw-flex tw-justify-end tw-gap-2"},zlt=(0,s._)("svg",{class:"tw-stroke-gray-500",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59L7.11 5.7A.996.996 0 1 0 5.7 7.11L10.59 12L5.7 16.89a.996.996 0 1 0 1.41 1.41L12 13.41l4.89 4.89a.996.996 0 1 0 1.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"})],-1),Ult=(0,s._)("span",null,"Clear",-1),Llt=[zlt,Ult],Plt=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[(0,s._)("path",{fill:"#fff",d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})],-1),Alt=(0,s._)("span",null,"Filter",-1),$lt=[Plt,Alt];function Wlt(t,e,r,a,i,o){(0,s.up)("ProductFilter"),(0,s.up)("AgentFilter");const l=(0,s.up)("AffectationFilter");return(0,s.wg)(),(0,s.iD)("div",mlt,[(0,s._)("div",hlt,[(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s._)("div",glt,[flt,(0,s._)("select",{value:r.filters.followup_confirmation,onChange:e[6]||(e[6]=e=>t.$emit("update",{...r.filters,followup_confirmation:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[ylt,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.followup_confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([[t.text,null==t.value&&"!tw-text-green-500"],"tw-capitalize"]),value:t.value?t.value:"",key:t.value},(0,Q.zw)(t.name),11,xlt)))),128))],40,vlt)]),(0,s.Wm)(l,{filters:r.filters,onUpdate:e[7]||(e[7]=e=>t.$emit("update",e))},null,8,["filters"]),(0,s._)("div",blt,[_lt,(0,s._)("select",{onChange:e[8]||(e[8]=e=>t.$emit("update",{...r.filters,delivery:e.target.value})),value:r.filters.delivery,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[Clt,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([[t.text,null==t.value&&"!tw-text-gray-500"],"tw-capitalize"]),value:t.value?t.value:"",key:t.id},(0,Q.zw)(t.name),11,Dlt)))),128))],40,klt)]),(0,s.kq)("",!0),(0,s._)("div",Slt,[(0,s._)("button",{onClick:e[10]||(e[10]=e=>t.$emit("clear")),class:"tw-flex tw-items-center tw-text-gray-500 tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-transition-colors tw-duration-200 tw-bg-gray-200 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-300 darkx:hover:tw-bg-gray-500 darkx:tw-bg-gray-600"},Llt),(0,s._)("button",{onClick:e[11]||(e[11]=e=>t.$emit("filter")),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},$lt)])])])}const qlt={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Olt=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Affectation",-1),Elt=["value"],Tlt=(0,s._)("option",{value:"all"},"All",-1),Vlt=(0,s._)("option",{value:""},"No Delivery",-1),Ilt=["value"];function Flt(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",qlt,[Olt,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...r.filters,affectation:e.target.value})),value:r.filters.affectation,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[Tlt,Vlt,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,Ilt)))),128))],40,Elt)])}var Rlt={props:{filters:{required:!0}},data(){return{}},computed:{users(){return this.$store.getters["user/users"]},deliveries(){return this.fetched?this.users.filter((t=>"delivery"==t.role.name)):[]},fetched(){return this.$store.getters["user/fetched"]}}};const jlt=(0,d.Z)(Rlt,[["render",Flt]]);var Nlt=jlt;const Mlt={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Hlt=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Agent",-1),Ylt=["value"],Zlt=(0,s._)("option",{value:"all"},"All",-1),Klt=(0,s._)("option",{value:""},"No Agent",-1),Blt=["value"];function Qlt(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",Mlt,[Hlt,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...r.filters,agente_id:e.target.value})),value:r.filters.agente_id,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[Zlt,Klt,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.agents,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,Blt)))),128))],40,Ylt)])}var Glt={props:{filters:{required:!0}},data(){return{}},computed:{users(){return this.$store.getters["user/users"]},agents(){return this.fetched?this.users.filter((t=>"agente"==t.role.name)):[]},fetched(){return this.$store.getters["user/fetched"]}}};const Jlt=(0,d.Z)(Glt,[["render",Qlt]]);var Xlt=Jlt;const tnt={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},ent=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Product",-1),rnt=["value"],ant=(0,s._)("option",{value:"all"},"All",-1),snt=["value"];function int(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",tnt,[ent,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...r.filters,product_id:e.target.value})),value:r.filters.product_id,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[ant,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.products,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,Q.zw)(t.name),9,snt)))),128))],40,rnt)])}var ont={props:{filters:{required:!0}},data(){return{}},computed:{products(){return this.$store.getters["product/products"]},fetched(){return this.$store.getters["product/fetched"]}},methods:{getProducts(){return ea.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}}};const lnt=(0,d.Z)(ont,[["render",int]]);var nnt=lnt,dnt={components:{AffectationFilter:Nlt,AgentFilter:Xlt,ProductFilter:nnt},props:{filters:{required:!0,default:{}}},data(){return{followup_confirmations:An,deliveries:Wn,dateFilter:["",""]}}};const wnt=(0,d.Z)(dnt,[["render",Wlt]]);var cnt=wnt,unt={components:{IndexStatistics:alt,FiltersWrapper:cnt,IndexExport:plt},props:{perPage:{type:Number},statistics:{default:null},activeStatistics:{type:Boolean,default:!1},loading:{default:!0},search:{default:""},filters:{required:!0}},data(){return{showFilters:!1,showStatistics:!1,showExport:!1,showAll:!0,showToday:!1}},methods:{handlePerPageChange(t){this.$emit("perPageChange",t.target.value)},showReportedFirst(){this.$emit("update:filters",{...this.filters,reported_first:!this.filters.reported_first}),this.$emit("filter")},filterToday(t){var e=null;t?(this.showAll=!1,this.showToday=!0,e=UP()(),e=e.format("YYYY-MM-DD")):(this.showAll=!0,this.showToday=!1),this.$emit("update:filters",{...this.filters,created_from:e,created_to:e}),this.$emit("filter")}},mounted(){}};const pnt=(0,d.Z)(unt,[["render",Zot]]);var mnt=pnt;const hnt={class:"tw-mx-auto tw-w-[95%] md:tw-max-w-[800px] tw-overflow-hidden tw-h-fit dark:tw-bg-neutral-900 tw-bg-white tw-border tw-border-solid dark:tw-border-neutral-700 tw-border-neutral-300 tw-shadow-md tw-my-5 tw-rounded-lg"},gnt=(0,s._)("div",{class:"tw-p-4 tw-text-lg tw-border-b tw-border-solid tw-font-medium tw-flex dark:tw-text-neutral-400 tw-text-neutral-500 tw-items-center tw-gap-4 dark:tw-bg-neutral-800 tw-bg-gray-50"}," Order Informations ",-1),fnt={class:"tw-bg-white tw-p-4"},vnt={class:"tw-grid tw-gap-6 tw-gap-y-5 tw-grid-cols-1 md:tw-grid-cols-2"},ynt={class:"tw-col-span-2 md:tw-col-span-1"},xnt=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Client Name",-1),bnt={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},_nt={class:"tw-col-span-2 md:tw-col-span-1"},knt=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Phone Number",-1),Cnt={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},Dnt={class:"tw-col-span-2 md:tw-col-span-1"},Snt=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"City",-1),znt={class:"tw-relative"},Unt=(0,s._)("option",{value:null,disabled:""},"Choose a City",-1),Lnt=["value"],Pnt=["value"],Ant=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),$nt={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},Wnt={class:"tw-col-span-2 md:tw-col-span-1"},qnt=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Address",-1),Ont={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},Ent={class:"tw-col-span-2"},Tnt=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Reconfirmation",-1),Vnt={class:"tw-relative"},Int=["value"],Fnt=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),Rnt={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},jnt={key:0,class:"md:tw-col-span-1 tw-col-span-2"},Nnt=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Date",-1),Mnt={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},Hnt={key:1,class:"md:tw-col-span-1 tw-col-span-2"},Ynt=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Note",-1),Znt={class:"tw-col-span-2"},Knt=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Note",-1),Bnt={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},Qnt={class:"md:tw-col-span-1 tw-col-span-2"},Gnt={class:"md:tw-col-span-1 tw-col-span-2"},Jnt=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Upsell",-1),Xnt={class:"tw-relative"},tdt=["value"],edt=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),rdt={class:"tw-col-span-2"},adt={class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},sdt={key:0,class:"tw-text-red-400 tw-text-xs"},idt={class:"tw-flex tw-justify-end tw-items-center tw-p-4 tw-gap-3 dark:tw-bg-neutral-900 tw-bg-gray-50 tw-border-t tw-border-solid"},odt=["disabled"],ldt=(0,s._)("span",null,"Create",-1);function ndt(t,e,r,i,o,l){const n=(0,s.up)("OrderAffectation"),d=(0,s.up)("OrderItems"),w=(0,s.up)("popup-new");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(w,{visible:r.visible,closeable:!1,onCancel:l.cancel},{default:(0,s.w5)((()=>[(0,s._)("div",hnt,[gnt,(0,s._)("div",fnt,[(0,s._)("div",vnt,[(0,s._)("div",ynt,[xnt,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.itemCopy.fullname=t),onInput:e[1]||(e[1]=t=>o.errors.fullname=null),type:"text",class:(0,Q.C_)([[o.errors.fullname&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),placeholder:"John",required:""},null,34),[[a.nr,o.itemCopy.fullname]]),o.errors.fullname?((0,s.wg)(),(0,s.iD)("label",bnt,(0,Q.zw)(o.errors.fullname),1)):(0,s.kq)("",!0)]),(0,s._)("div",_nt,[knt,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.itemCopy.phone=t),onInput:e[3]||(e[3]=t=>o.errors.phone=null),class:(0,Q.C_)([[o.errors.phone&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"123-45-678",required:""},null,34),[[a.nr,o.itemCopy.phone]]),o.errors.phone?((0,s.wg)(),(0,s.iD)("label",Cnt,(0,Q.zw)(o.errors.phone),1)):(0,s.kq)("",!0)]),(0,s._)("div",Dnt,[Snt,(0,s._)("div",znt,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.itemCopy.city=t),onChange:e[5]||(e[5]=t=>o.errors.city=null),class:(0,Q.C_)([[o.errors.city&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 tw-pr-7"])},[Unt,(0,s._)("option",{value:o.itemCopy.city,disabled:""},(0,Q.zw)(o.itemCopy.city),9,Lnt),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,Pnt)))),128))],34),[[a.bM,o.itemCopy.city]]),Ant]),o.errors.city?((0,s.wg)(),(0,s.iD)("label",$nt,(0,Q.zw)(o.errors.city),1)):(0,s.kq)("",!0)]),(0,s._)("div",Wnt,[qnt,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>o.itemCopy.adresse=t),onInput:e[7]||(e[7]=t=>o.errors.adresse=null),class:(0,Q.C_)([[o.errors.adresse&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"Address",required:""},null,34),[[a.nr,o.itemCopy.adresse]]),o.errors.adresse?((0,s.wg)(),(0,s.iD)("label",Ont,(0,Q.zw)(o.errors.adresse),1)):(0,s.kq)("",!0)]),(0,s._)("div",Ent,[Tnt,(0,s._)("div",Vnt,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>o.itemCopy.followup_confirmation=t),onChange:e[9]||(e[9]=t=>o.errors.followup_confirmation=null),class:(0,Q.C_)([[o.errors.followup_confirmation&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.followup_confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,class:(0,Q.C_)([t.text,!t.value&&"!tw-text-green-500"]),key:t.id},(0,Q.zw)(t.name),11,Int)))),128))],34),[[a.bM,o.itemCopy.followup_confirmation]]),Fnt]),o.errors.followup_confirmation?((0,s.wg)(),(0,s.iD)("label",Rnt,(0,Q.zw)(o.errors.followup_confirmation),1)):(0,s.kq)("",!0)]),"reporter"==o.itemCopy.followup_confirmation?((0,s.wg)(),(0,s.iD)("div",jnt,[Nnt,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>o.itemCopy.followup_reported_date=t),onInput:e[11]||(e[11]=t=>o.errors.followup_reported_date=null),class:(0,Q.C_)([[o.errors.followup_reported_date&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"date",required:""},null,34),[[a.nr,o.itemCopy.followup_reported_date]]),o.errors.followup_reported_date?((0,s.wg)(),(0,s.iD)("label",Mnt,(0,Q.zw)(o.errors.followup_reported_date),1)):(0,s.kq)("",!0)])):(0,s.kq)("",!0),"reporter"==o.itemCopy.followup_confirmation?((0,s.wg)(),(0,s.iD)("div",Hnt,[Ynt,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[12]||(e[12]=t=>o.itemCopy.followup_reported_note=t),rows:"1",class:"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500",placeholder:"Enter a note"},null,512),[[a.nr,o.itemCopy.followup_reported_note]])])):(0,s.kq)("",!0),(0,s._)("div",Znt,[Knt,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[13]||(e[13]=t=>o.itemCopy.note=t),onInput:e[14]||(e[14]=t=>o.errors.note=null),class:(0,Q.C_)([[o.errors.note&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),rows:"3",placeholder:"Enter a note"},null,34),[[a.nr,o.itemCopy.note]]),o.errors.note?((0,s.wg)(),(0,s.iD)("label",Bnt,(0,Q.zw)(o.errors.note),1)):(0,s.kq)("",!0)]),(0,s._)("div",Qnt,[(0,s.Wm)(n,{item:o.itemCopy,error:o.errors.affectation,"onUpdate:error":e[15]||(e[15]=t=>o.errors.affectation=t),affectation:o.itemCopy.affectation,"onUpdate:affectation":e[16]||(e[16]=t=>o.itemCopy.affectation=t)},null,8,["item","error","affectation"])]),(0,s._)("div",Gnt,[Jnt,(0,s._)("div",Xnt,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[17]||(e[17]=t=>o.itemCopy.upsell=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.upsells,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([t.text]),value:t.value,key:t.id},(0,Q.zw)(t.name),11,tdt)))),128))],512),[[a.bM,o.itemCopy.upsell]]),edt])]),(0,s._)("div",rdt,[(0,s._)("label",adt,[(0,s.Uk)("Order Items "),o.errors.items?((0,s.wg)(),(0,s.iD)("span",sdt," # "+(0,Q.zw)(o.errors.items),1)):(0,s.kq)("",!0)]),(0,s._)("div",null,[(0,s.Wm)(d,{order:o.itemCopy,error:o.errors.items,products:o.products,"products-fetched":o.products_fetched,items:o.itemCopy.items,"onUpdate:items":e[18]||(e[18]=t=>o.itemCopy.items=t)},null,8,["order","error","products","products-fetched","items"])])])])]),(0,s._)("div",idt,[(0,s._)("button",{onClick:e[19]||(e[19]=(...t)=>l.cancel&&l.cancel(...t)),class:"tw-py-2 tw-px-7 tw-rounded tw-text-sm tw-border tw-border-solid tw-border-tansparent dark:tw-border-neutral-900 hover:tw-border-neutral-400 dark:hover:tw-border-neutral-500 hover:tw-bg-gray-300 tw-bg-gray-200 dark:tw-bg-neutral-600 tw-duration-300 tw-text-neutral-900 dark:tw-text-neutral-300"}," Cancel "),(0,s._)("button",{onClick:e[20]||(e[20]=(...t)=>l.handleCreate&&l.handleCreate(...t)),disabled:o.isLoading,class:"tw-py-2 tw-px-7 tw-flex tw-items-center tw-rounded tw-text-sm tw-bg-orange-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-orange-600 dark:tw-border-neutral-900 dark:hover:tw-border-orange-500 hover:tw-bg-orange-500/80 dark:hover:tw-bg-orange-400 tw-duration-300 tw-text-white"},[(0,s.Wm)(X.t,{size:"small",class:(0,Q.C_)(["tw-duration-300 tw-animate-spin tw-overflow-hidden tw-max-w-0 tw-mr-0",[o.isLoading&&"!tw-max-w-[50px] !tw-mr-3"]])},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1},8,["class"]),ldt],8,odt)])])])),_:1},8,["visible","onCancel"])])}const ddt=(t,e)=>{t.$alert({title:"Created Successfully",type:"success"}),console.log(e),t.isLoading=!1,t.cancel(),t.errors={}},wdt=(t,e)=>{t.$alert({title:e.message,type:"error"}),"VALIDATION_ERROR"==e.code&&(t.errors=e.errors),t.isLoading=!1},cdt=(t,e)=>{t.isLoading=!0,t.errors={},Ko.create(e).then((e=>ddt(t,e.data))).catch((e=>wdt(t,e.response.data))).finally((()=>t.isLoading=!1))};var udt={components:{OrderItems:xit,OrderAffectation:Oit},props:{visible:{required:!0}},data(){return{followup_confirmations:An,upsells:$n,isLoading:!1,products_fetched:null,products:null,itemCopy:null,errors:{fullname:null,phone:null,city:null,adresse:null,note:null,reported_agente_date:null,affectation:null,items:null}}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{handleCreate(){const t=jst(this,this.itemCopy);if(!t)return!1;cdt(this,this.itemCopy)},cancel(){if(this.isLoading)return!1;this.$emit("update:visible",!1)},getProducts(){this.products_fetched=!1,ea.allForOrder().then((t=>{"SUCCESS"==t.data.code?this.products=t.data.data.products:this.products=[],this.products_fetched=!0})).catch(this.$handleApiError)}},mounted(){this.itemCopy={confirmation:"confirmer",upsell:null,items:[]},this.getProducts()}};const pdt=(0,d.Z)(udt,[["render",ndt]]);var mdt=pdt;const hdt={class:"tw-mb-4"},gdt={class:"tw-w-full tw-p-3 tw-py-2 tw-rounded-lg tw-bg-gray-50 tw-border tw-border-solid"},fdt={class:"tw-flex tw-items-center tw-gap-2 tw-justify-between"},vdt={class:"tw-flex tw-items-center tw-gap-2"},ydt={class:"tw-text-sm tw-px-2 tw-w-fit tw-bg-orange-500 tw-aspect-auto tw-text-white tw-rounded"},xdt=(0,s._)("p",{class:"tw-font-bold tw-text-sm"}," Selected",-1),bdt={class:"tw-flex tw-items-center tw-gap-2"},_dt=(0,s._)("svg",{class:"tw-stroke-gray-400",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59L7.11 5.7A.996.996 0 1 0 5.7 7.11L10.59 12L5.7 16.89a.996.996 0 1 0 1.41 1.41L12 13.41l4.89 4.89a.996.996 0 1 0 1.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"})],-1),kdt=(0,s._)("span",null," Clear Selection ",-1),Cdt=[_dt,kdt],Ddt=(0,s._)("svg",{class:"tw-stroke-gray-400",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 20 20"},[(0,s._)("g",{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"},[(0,s._)("path",{d:"M8.232 11.768A2.493 2.493 0 0 0 10 12.5c.672 0 1.302-.267 1.768-.732A2.493 2.493 0 0 0 12.5 10c0-.672-.267-1.302-.732-1.768A2.493 2.493 0 0 0 10 7.5c-.672 0-1.302.267-1.768.732A2.493 2.493 0 0 0 7.5 10c0 .672.267 1.302.732 1.768Zm2.829-.707c-.28.28-.657.439-1.061.439c-.404 0-.78-.16-1.06-.44S8.5 10.405 8.5 10s.16-.78.44-1.06s.656-.44 1.06-.44s.78.16 1.06.44s.44.656.44 1.06s-.16.78-.44 1.06Z"}),(0,s._)("path",{d:"m14.216 3.773l-1.27.714a6.213 6.213 0 0 0-1.166-.48l-.47-1.414a.5.5 0 0 0-.474-.343H9.06a.5.5 0 0 0-.481.365l-.392 1.403a6.214 6.214 0 0 0-1.164.486L5.69 3.835a.5.5 0 0 0-.578.094L3.855 5.185a.5.5 0 0 0-.082.599l.714 1.27c-.199.37-.36.76-.48 1.166l-1.414.47a.5.5 0 0 0-.343.474v1.777a.5.5 0 0 0 .365.481l1.403.392c.122.405.285.794.486 1.164l-.669 1.333a.5.5 0 0 0 .094.578l1.256 1.256a.5.5 0 0 0 .599.082l1.27-.714c.37.199.76.36 1.166.48l.47 1.414a.5.5 0 0 0 .474.343h1.777a.5.5 0 0 0 .481-.365l.392-1.403a6.21 6.21 0 0 0 1.164-.486l1.333.669a.5.5 0 0 0 .578-.093l1.256-1.257a.5.5 0 0 0 .082-.599l-.714-1.27c.199-.37.36-.76.48-1.166l1.414-.47a.5.5 0 0 0 .343-.474V9.06a.5.5 0 0 0-.365-.481l-1.403-.392a6.208 6.208 0 0 0-.486-1.164l.669-1.333a.5.5 0 0 0-.093-.578l-1.257-1.256a.5.5 0 0 0-.599-.082Zm-1.024 1.724l1.184-.667l.733.733l-.627 1.25a.5.5 0 0 0 .019.482c.265.44.464.918.59 1.418a.5.5 0 0 0 .35.36l1.309.366v1.037l-1.327.44a.5.5 0 0 0-.328.354a5.216 5.216 0 0 1-.585 1.42a.5.5 0 0 0-.007.502l.667 1.184l-.733.733l-1.25-.627a.5.5 0 0 0-.482.019c-.44.265-.918.464-1.418.59a.5.5 0 0 0-.36.35l-.366 1.309H9.525l-.44-1.327a.5.5 0 0 0-.355-.328a5.217 5.217 0 0 1-1.42-.585a.5.5 0 0 0-.502-.007l-1.184.667l-.733-.733l.627-1.25a.5.5 0 0 0-.019-.482a5.216 5.216 0 0 1-.59-1.418a.5.5 0 0 0-.35-.36l-1.309-.366V9.525l1.327-.44a.5.5 0 0 0 .327-.355c.125-.5.323-.979.586-1.42a.5.5 0 0 0 .007-.502L4.83 5.624l.733-.733l1.25.627a.5.5 0 0 0 .482-.019c.44-.265.918-.464 1.418-.59a.5.5 0 0 0 .36-.35l.366-1.309h1.037l.44 1.327a.5.5 0 0 0 .354.327c.5.125.979.323 1.42.586a.5.5 0 0 0 .502.007Z"})])],-1),Sdt=(0,s._)("span",null," Actions ",-1),zdt=[Ddt,Sdt],Udt={key:0};function Ldt(t,e,r,a,i,o){const l=(0,s.up)("BulkPopup");return(0,s.wg)(),(0,s.iD)("div",hdt,[(0,s._)("div",gdt,[(0,s._)("div",fdt,[(0,s._)("div",vdt,[(0,s._)("div",ydt,(0,Q.zw)(r.selected.length),1),xdt]),(0,s._)("div",bdt,[(0,s._)("button",{onClick:e[0]||(e[0]=e=>t.$emit("update:selected",[])),class:"tw-bg-white tw-flex tw-items-center tw-gap-1 tw-py-1.5 hover:tw-shadow-none tw-duration-200 tw-px-3 tw-text-sm tw-rounded tw-border tw-border-solid tw-border-gray-300 tw-shadow-sm"},Cdt),(0,s._)("button",{onClick:e[1]||(e[1]=t=>i.popup=!0),class:"tw-bg-white tw-flex tw-items-center tw-gap-1 tw-py-1.5 hover:tw-shadow-none tw-duration-200 tw-px-3 tw-text-sm tw-rounded tw-border tw-border-solid tw-border-gray-300 tw-shadow-sm"},zdt)])])]),i.popup?((0,s.wg)(),(0,s.iD)("div",Udt,[(0,s.Wm)(l,{selected:r.selected,onUpdate:o.handleUpdate,visible:i.popup,"onUpdate:visible":e[2]||(e[2]=t=>i.popup=t)},null,8,["selected","onUpdate","visible"])])):(0,s.kq)("",!0)])}const Pdt={class:"tw-mx-auto tw-w-[95%] md:tw-max-w-[800px] tw-overflow-hidden tw-h-fit dark:tw-bg-neutral-900 tw-bg-white tw-border tw-border-solid dark:tw-border-neutral-700 tw-border-neutral-300 tw-shadow-md tw-my-5 tw-rounded-lg"},Adt={class:"tw-p-4 tw-text-lg tw-border-b tw-border-solid tw-font-medium tw-flex dark:tw-text-neutral-400 tw-text-neutral-500 tw-items-center tw-gap-4 dark:tw-bg-neutral-800 tw-bg-gray-50"},$dt=(0,s._)("span",null,"Quick Actions",-1),Wdt={class:"tw-px-2 tw-w-fit tw-bg-orange-500 tw-aspect-auto tw-text-white tw-rounded"},qdt={class:"tw-bg-white tw-p-4"},Odt={class:"tw-grid tw-gap-6 tw-gap-y-5 tw-grid-cols-1 md:tw-grid-cols-2"},Edt={class:"tw-col-span-2 md:tw-col-span-1"},Tdt={key:0,class:"tw-col-span-2 md:tw-col-span-1"},Vdt={class:"tw-flex tw-justify-end tw-items-center tw-p-4 tw-gap-3 dark:tw-bg-neutral-900 tw-bg-gray-50 tw-border-t tw-border-solid"},Idt=(0,s._)("span",null,"Apply",-1);function Fdt(t,e,r,a,i,o){const l=(0,s.up)("BulkSelectAction"),n=(0,s.up)("BulkDeliveryAction"),d=(0,s.up)("popup-new");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(d,{visible:r.visible,closeable:!i.isLoading,onCancel:o.cancel},{default:(0,s.w5)((()=>[(0,s._)("div",Pdt,[(0,s._)("div",Adt,[$dt,(0,s._)("span",Wdt,(0,Q.zw)(r.selected.length),1)]),(0,s._)("div",qdt,[(0,s._)("div",Odt,[(0,s._)("div",Edt,[(0,s.Wm)(l,{action:i.action,"onUpdate:action":e[0]||(e[0]=t=>i.action=t)},null,8,["action"])]),2==i.action?((0,s.wg)(),(0,s.iD)("div",Tdt,[(0,s.Wm)(n,{value:i.value,"onUpdate:value":e[1]||(e[1]=t=>i.value=t)},null,8,["value"])])):(0,s.kq)("",!0)])]),(0,s._)("div",Vdt,[(0,s._)("button",{onClick:e[2]||(e[2]=(...t)=>o.cancel&&o.cancel(...t)),class:"tw-py-2 tw-px-7 tw-rounded tw-text-sm tw-border tw-border-solid tw-border-tansparent dark:tw-border-neutral-900 hover:tw-border-neutral-400 dark:hover:tw-border-neutral-500 hover:tw-bg-gray-300 tw-bg-gray-200 dark:tw-bg-neutral-600 tw-duration-300 tw-text-neutral-900 dark:tw-text-neutral-300"}," Cancel "),(0,s._)("button",{onClick:e[3]||(e[3]=(...t)=>o.execute&&o.execute(...t)),class:"tw-py-2 tw-px-7 tw-flex tw-items-center tw-rounded tw-text-sm tw-bg-orange-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-orange-600 dark:tw-border-neutral-900 dark:hover:tw-border-orange-500 hover:tw-bg-orange-500/80 dark:hover:tw-bg-orange-400 tw-duration-300 tw-text-white"},[(0,s.Wm)(X.t,{size:"small",class:(0,Q.C_)(["tw-duration-300 tw-animate-spin tw-overflow-hidden tw-max-w-0 tw-mr-0",[i.isLoading&&"!tw-max-w-[50px] !tw-mr-3"]])},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1},8,["class"]),Idt])])])])),_:1},8,["visible","closeable","onCancel"])])}const Rdt=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Action",-1),jdt={class:"tw-relative"},Ndt=["value"],Mdt=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1);function Hdt(t,e,r,i,o,l){return(0,s.wg)(),(0,s.iD)("div",null,[Rdt,(0,s._)("div",jdt,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.vaction=t),class:(0,Q.C_)([[!1],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 tw-pr-7"])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.actions,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,Ndt)))),128))],512),[[a.bM,l.vaction]]),Mdt]),(0,s.kq)("",!0)])}var Ydt={props:{action:{required:!0}},data(){return{actions:[{id:1,name:"Select Action"},{id:2,name:"Delivery Status"}]}},computed:{vaction:{get(){return this.action},set(t){this.$emit("update:action",t)}}}};const Zdt=(0,d.Z)(Ydt,[["render",Hdt]]);var Kdt=Zdt;const Bdt=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Value",-1),Qdt={class:"tw-relative"},Gdt=(0,s._)("option",{disabled:"",value:"not-selected"},"Select a value",-1),Jdt=["value"],Xdt=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1);function twt(t,e,r,i,o,l){return(0,s.wg)(),(0,s.iD)("div",null,[Bdt,(0,s._)("div",Qdt,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.vvalue=t),class:(0,Q.C_)([[!1],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 tw-pr-7"])},[Gdt,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.statuses,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([t.text]),value:t.value,key:t.id},(0,Q.zw)(t.name),11,Jdt)))),128))],512),[[a.bM,l.vvalue]]),Xdt]),(0,s.kq)("",!0)])}var ewt={props:{value:{required:!0}},data(){return{statuses:Wn}},computed:{vvalue:{get(){return this.value},set(t){this.$emit("update:value",t)}}}};const rwt=(0,d.Z)(ewt,[["render",twt]]);var awt=rwt,swt=(t,e)=>{t.isLoading=!0,xV.execute(e).then((e=>iwt(t,e.data))).catch(t.$handleApiError).finally((()=>{t.isLoading=!1}))};const iwt=(t,e)=>{"SUCCESS"==e.code&&(t.$alert({title:"Updated Successfully",type:"success"}),t.$emit("update:visible",!1),t.$emit("update"))};var owt={components:{BulkSelectAction:Kdt,BulkDeliveryAction:awt},props:{visible:{required:!0},selected:{required:!0}},data(){return{isLoading:!1,action:1,value:"not-selected"}},watch:{action(){this.value="not-selected"}},methods:{cancel(){this.$emit("update:visible",!1)},execute(){if(1==this.action)return this.$alert({title:"Select action",type:"info"}),!1;if("not-selected"==this.value)return this.$alert({title:"Select value",type:"info"}),!1;const t={action:this.action,value:this.value,selected:this.selected};swt(this,t)}}};const lwt=(0,d.Z)(owt,[["render",Fdt]]);var nwt=lwt,dwt={components:{BulkPopup:nwt},props:{selected:{required:!0}},data(){return{popup:!1}},methods:{handleUpdate(){this.$emit("update")}}};const wwt=(0,d.Z)(dwt,[["render",Ldt]]);var cwt=wwt,uwt={components:{IndexTable:zot,IndexFilters:mnt,CreatePopup:mdt,BulkActions:cwt},data(){return{fetching:!0,create_popup:!1,items:[],selected:[],deliveries:{fetched:!1,items:[]},statistics:null,first_page_url:null,lase_page_url:null,next_page_url:null,prev_page_url:null,last_page:1,from:1,to:1,total:0,totalOrders:0,links:null,search:"",sort_by:"created_at",sort_order:"desc",per_page:10,current_page:1,filters:{created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"all",product_id:"all",delivery:"all",reported_first:!1}}},methods:{paginateOrders(){const t="?page="+this.current_page,e={sort_by:this.sort_by,sort_order:this.sort_order,per_page:this.per_page,current_page:this.current_page,search:this.search,filters:this.filters};return this.fetching=!0,Ko.paginate(t,e).then((({data:t})=>{const e=t.data.orders;this.setOptions(e),this.statistics=this.search?this.statistics:t.data.statistics})).then((()=>{this.fetching=!1}))},setOptions(t){this.items=t.data,this.first_page_url=Hi(t.first_page_url),this.lase_page_url=Hi(t.last_page_url),this.next_page_url=Hi(t.next_page_url),this.prev_page_url=Hi(t.prev_page_url),this.last_page=parseInt(t.last_page),this.from=parseInt(t.from),this.to=parseInt(t.to),this.per_page=parseInt(t.per_page),this.total=parseInt(t.total),this.totalOrders=this.search?this.totalOrders:parseInt(t.total),this.links=t.links},handleClearFilters(){this.filters={created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"all",product_id:"all",delivery:"all",reported_first:!1},this.handlePageChange(1)},handleBulkUpdate(){this.selected=[],this.paginateOrders()},handleItemUpdate(t){this.items=this.items.map((e=>e.id==t.id?t:e))},handlePageChange(t){this.current_page=t,this.paginateOrders()},handlePerPageChange(t){this.per_page=parseInt(t),this.handlePageChange(1)},handleSortOrderChange(){this.sort_order="asc"==this.sort_order?"desc":"asc",this.paginateOrders()},getDeliveries(){this.deliveries.fetched=!1,K.allDeliveries().then((t=>{"SUCCESS"==t?.data.code&&(this.deliveries.items=t.data.data.deliveries,this.deliveries.fetched=!0)})).catch(this.$handleApiError)}},mounted(){this.paginateOrders(),this.getDeliveries()}};const pwt=(0,d.Z)(uwt,[["render",mrt]]);var mwt=pwt,hwt={path:"/followup",name:"followup",component:sa,meta:{module:"dashboard"},children:[{name:"followup/index",path:"",component:mwt,meta:{module:"followup",title:"Follow Up Orders",gate:"follow_up_orders"}}]};const gwt={class:"tw-pb-40"},fwt={class:"tw-space-y-3"};function vwt(t,e,r,a,i,o){const l=(0,s.up)("OnlineUsers"),n=(0,s.up)("IndexFilters"),d=(0,s.up)("IndexRevenue"),w=(0,s.up)("IndexStatistics");return(0,s.wg)(),(0,s.iD)("div",gwt,[(0,s._)("div",fwt,[(0,s.Wm)(l),(0,s.Wm)(n,{onUpdate:e[0]||(e[0]=t=>i.filters=t),onFilter:o.handleFilter},null,8,["onFilter"]),(0,s.Wm)(d,{statistics:i.statistics,fetching:i.fetching},null,8,["statistics","fetching"]),(0,s.Wm)(w,{statistics:i.statistics,fetching:i.fetching},null,8,["statistics","fetching"])])])}const ywt={class:"tw-bg-white tw-p-5"},xwt={class:"tw-flex tw-items-center tw-justify-between"},bwt=(0,s._)("h1",{class:"tw-mb-3 tw-text-xl tw-font-medium"},"Users",-1),_wt={class:"tw-relative tw-flex tw-items-center"},kwt=(0,s._)("span",{class:"tw-text-xs tw-absolute tw-right-0 tw-top-0 -tw-translate-y-full tw-whitespace-nowrap"},"Show All",-1),Cwt={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-scale-75"},Dwt=(0,s._)("div",{class:"tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none peer-focus:tw-ring-4 peer-focus:tw-ring-orange-200 dark:peer-focus:tw-ring-orange-500 tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600 peer-checked:tw-bg-orange-500"},null,-1),Swt={key:0,class:""},zwt={class:"tw-flex tw-items-center tw-flex-wrap tw-gap-2"},Uwt=(0,s._)("div",{class:"tw-w-[120px] tw-h-[55px] tw-bg-neutral-300/10 tw-animate-pulse tw-rounded tw-border tw-grid tw-grid-cols-12"},null,-1),Lwt=[Uwt],Pwt={key:1,class:"tw-min-h-[50px]"},Awt={class:"tw-flex tw-items-center tw-flex-wrap tw-gap-2"},$wt={class:"py-2 px-3 tw-rounded tw-bg-white tw-shadow-sm tw-grid tw-grid-cols-12 tw-relative tw-overflow-hidden"},Wwt={class:"tw-col-span-12 tw-flex tw-items-center tw-gap-2 tw-font-medium tw-capitalize tw-text-sm tw-text-neutral-600 tw-whitespace-nowrap"},qwt={key:0,class:"tw-w-full tw-pt-1 tw-rounded-full tw-bg-red-400 tw-absolute tw-top-0 tw-right-0"},Owt={key:1,class:"tw-w-full tw-pt-1 tw-rounded-full tw-bg-green-500 tw-absolute tw-top-0 tw-right-0"},Ewt={key:2,class:"tw-w-full tw-pt-1 tw-rounded-full tw-bg-yellow-400 tw-absolute tw-top-0 tw-right-0"},Twt={class:"tw-font-bold"},Vwt={class:"tw-col-span-12 tw-whitespace-nowrap tw-text-xs tw-mt-1"},Iwt={key:0,class:"tw-text-red-500 tw-flex tw-items-center tw-gap-2"},Fwt={key:1},Rwt={key:0,class:"tw-text-green-500 tw-flex tw-items-center tw-gap-2"},jwt={key:1,class:"tw-flex tw-items-center tw-gap-2"};function Nwt(t,e,r,i,o,l){return(0,s.wg)(),(0,s.iD)("div",ywt,[(0,s._)("div",xwt,[bwt,(0,s._)("div",_wt,[kwt,(0,s._)("label",Cwt,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=t=>o.showAll=t),class:"tw-sr-only tw-peer"},null,512),[[a.e8,o.showAll]]),Dwt])])]),o.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Swt,[(0,s._)("div",zwt,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(4,(t=>(0,s._)("div",{key:t},Lwt))),64))])])),o.isLoaded?((0,s.wg)(),(0,s.iD)("div",Pwt,[(0,s._)("div",Awt,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.users,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t.id},[(0,s._)("div",$wt,[(0,s._)("div",Wwt,[t.last_action?1==l.isOnline(l.lastSeen(t.last_action))?((0,s.wg)(),(0,s.iD)("div",Owt)):((0,s.wg)(),(0,s.iD)("div",Ewt)):((0,s.wg)(),(0,s.iD)("div",qwt)),(0,s._)("span",Twt,(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),1)]),(0,s._)("div",Vwt,[t.last_action?((0,s.wg)(),(0,s.iD)("div",Fwt,[1==l.isOnline(l.lastSeen(t.last_action))?((0,s.wg)(),(0,s.iD)("div",Rwt," Online ")):((0,s.wg)(),(0,s.iD)("div",jwt,(0,Q.zw)(l.lastSeen(t.last_action)),1))])):((0,s.wg)(),(0,s.iD)("div",Iwt," Never Connected "))])])])))),128))])])):(0,s.kq)("",!0)])}var Mwt={components:{},data(){return{isLoaded:!1,showAll:!1}},computed:{users(){return this.showAll?this.$store.getters["user/users"].filter((t=>"admin"!=t.role_name)).sort(((t,e)=>e.last_action?UP()(t.last_action).isAfter(e.last_action)?-1:1:-1)):this.$store.getters["user/users"].filter((t=>"admin"!=t.role_name)).sort(((t,e)=>e.last_action?UP()(t.last_action).isAfter(e.last_action)?-1:1:-1)).slice(0,8)}},methods:{getUsers(){K.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),this.isLoaded=!0}})).catch(this.$handleApiError)},lastSeen(t){let e=Date.parse(t.replace("-","/"))/1e3;return(0,Ka.x)(e)},isOnline(t){let e=["Just Now","1 minute ago","2 minute ago"];return e.includes(t)}},mounted(){this.getUsers()}};const Hwt=(0,d.Z)(Mwt,[["render",Nwt]]);var Ywt=Hwt;const Zwt={class:"tw-bg-white"},Kwt={class:"tw-flex tw-items-center tw-gap-2 tw-bg-gray-50 tw-p-2 tw-pt-0 tw-rounded-b tw-w-fit"},Bwt={class:"tw-p-5"};function Qwt(t,e,r,a,i,o){const l=(0,s.up)("ConfirmationTab"),n=(0,s.up)("DeliveryTab");return(0,s.wg)(),(0,s.iD)("div",Zwt,[(0,s._)("div",Kwt,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.active=1),class:(0,Q.C_)([[1==i.active?"tw-bg-white tw-shadow-orange-300":"tw-bg-gray-100 hover:tw-bg-white"],"tw-px-5 tw-py-2.5 tw-duration-300 tw-font-medium tw-shadow tw-rounded tw-text-gray-600"])}," Confirmations ",2),(0,s._)("button",{onClick:e[1]||(e[1]=t=>i.active=2),class:(0,Q.C_)([[2==i.active?"tw-bg-white tw-shadow-orange-300":"tw-bg-gray-100 hover:tw-bg-white"],"tw-px-5 tw-py-2.5 tw-duration-300 tw-font-medium tw-shadow tw-rounded tw-text-gray-600"])}," Delivery ",2)]),(0,s._)("div",Bwt,[1==i.active?((0,s.wg)(),(0,s.j4)(l,{key:0,statistics:r.statistics,fetching:r.fetching},null,8,["statistics","fetching"])):(0,s.kq)("",!0),2==i.active?((0,s.wg)(),(0,s.j4)(n,{key:1,statistics:r.statistics,fetching:r.fetching},null,8,["statistics","fetching"])):(0,s.kq)("",!0)])])}const Gwt={key:0,class:"tw-grid tw-gap-2 lg:tw-grid-cols-4 sm:tw-grid-cols-2 tw-grid-cols-1"},Jwt=(0,s.uE)('<div class="tw-flex tw-justify-between tw-w-full"><div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-2.5 tw-bg-gray-200 tw-rounded-full tw-w-[50px] tw-mb-4"></div></div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-4 tw-bg-gray-200 tw-rounded-full tw-w-[30px] tw-mb-4"></div></div></div><div class="tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-bg-gray-200 tw-text-white"><div class="tw-bg-white tw-w-[25px] tw-h-[25px] tw-rounded"></div></div></div>',1),Xwt=[Jwt],tct={key:1,class:"tw-grid tw-gap-2 lg:tw-grid-cols-4 sm:tw-grid-cols-2 tw-grid-cols-1"};function ect(t,e,r,a,i,o){const l=(0,s.up)("DashboardCard");return(0,s.wg)(),(0,s.iD)("div",null,[r.fetching?((0,s.wg)(),(0,s.iD)("div",Gwt,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(4,(t=>(0,s._)("div",{key:t,class:"tw-bg-white tw-animate-pulse tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-[90px]"},Xwt))),64))])):((0,s.wg)(),(0,s.iD)("div",tct,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.statistics.confirmations,(t=>((0,s.wg)(),(0,s.j4)(l,{key:t.id,color:t.color,icon:t.icon,title:t.title,symbol:t.symbol,percentage:t.percentage,value:t.value},null,8,["color","icon","title","symbol","percentage","value"])))),128))]))])}const rct={class:"tw-flex tw-justify-between"},act={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},sct={class:"tw-text-gray-500 tw-uppercase tw-text-xs tw-font-bold"},ict={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},oct={class:"tw-text-gray-700 tw-text-xl tw-font-bold"};function lct(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",{style:(0,Q.j5)({borderColor:r.color}),class:"tw-bg-white tw-border tw-border-dashed tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-fit"},[(0,s._)("div",rct,[(0,s._)("div",null,[(0,s._)("div",act,[(0,s._)("p",sct,(0,Q.zw)(r.title),1),void 0!=r.percentage?((0,s.wg)(),(0,s.iD)("span",{key:0,class:"tw-text-sm tw-font-medium tw-rounded tw-px-1 tw-text-white",style:(0,Q.j5)({background:r.color})},(0,Q.zw)(r.percentage.toFixed(2))+"%",5)):(0,s.kq)("",!0)]),(0,s._)("div",ict,[(0,s._)("span",oct,(0,Q.zw)(r.value),1)])]),(0,s._)("div",{style:(0,Q.j5)({background:r.color}),class:"tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-text-white"},[(0,s.Wm)(X.t,{style:(0,Q.j5)(["Orders"==r.title&&{color:"#2ee1ff"}]),size:"x-large"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(r.icon),1)])),_:1},8,["style"])],4)])],4)])}var nct={props:{icon:{required:!0},title:{required:!0},value:{required:!0},symbol:{default:"",required:!1},percentage:{required:!1},color:{required:!0,default:"#6b7280"}}};const dct=(0,d.Z)(nct,[["render",lct]]);var wct=dct,cct={components:{DashboardCard:wct},props:{statistics:{required:!0},fetching:{required:!0}}};const uct=(0,d.Z)(cct,[["render",ect]]);var pct=uct;const mct={key:0,class:"tw-grid tw-gap-2 lg:tw-grid-cols-4 sm:tw-grid-cols-2 tw-grid-cols-1"},hct=(0,s.uE)('<div class="tw-flex tw-justify-between tw-w-full"><div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-2.5 tw-bg-gray-200 tw-rounded-full tw-w-[50px] tw-mb-4"></div></div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-4 tw-bg-gray-200 tw-rounded-full tw-w-[30px] tw-mb-4"></div></div></div><div class="tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-bg-gray-200 tw-text-white"><div class="tw-bg-white tw-w-[25px] tw-h-[25px] tw-rounded"></div></div></div>',1),gct=[hct],fct={key:1,class:"tw-grid tw-gap-2 lg:tw-grid-cols-4 sm:tw-grid-cols-2 tw-grid-cols-1"};function vct(t,e,r,a,i,o){const l=(0,s.up)("DashboardCard");return(0,s.wg)(),(0,s.iD)("div",null,[r.fetching?((0,s.wg)(),(0,s.iD)("div",mct,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(4,(t=>(0,s._)("div",{key:t,class:"tw-bg-white tw-animate-pulse tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-[90px]"},gct))),64))])):((0,s.wg)(),(0,s.iD)("div",fct,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.statistics.delivery,(t=>((0,s.wg)(),(0,s.j4)(l,{key:t.id,color:t.color,icon:t.icon,title:t.title,symbol:t.symbol,percentage:t.percentage,value:t.value},null,8,["color","icon","title","symbol","percentage","value"])))),128))]))])}var yct={components:{DashboardCard:wct},props:{statistics:{required:!0},fetching:{required:!0}}};const xct=(0,d.Z)(yct,[["render",vct]]);var bct=xct,_ct={components:{ConfirmationTab:pct,DeliveryTab:bct},props:{statistics:{required:!0},fetching:{required:!0}},data(){return{active:1}}};const kct=(0,d.Z)(_ct,[["render",Qwt]]);var Cct=kct;const Dct={class:"tw-bg-white tw-p-5"},Sct=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-mb-3 tw-text-xl tw-font-medium"},"Filters")],-1),zct={class:"tw-grid tw-grid-cols-12 tw-gap-4 tw-p-1"},Uct={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Lct=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),Pct=(0,s._)("option",{value:"all",selected:""},"All",-1),Act=["value"],$ct={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Wct=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Delivery",-1),qct=(0,s._)("option",{value:"all",selected:""},"All",-1),Oct=["value"],Ect={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Tct=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Upsell",-1),Vct=(0,s._)("option",{value:"all",selected:""},"All",-1),Ict=(0,s._)("option",{value:"oui",class:"tw-capitalize"},"Yes",-1),Fct=(0,s._)("option",{value:"non",class:"tw-capitalize"},"Non",-1),Rct=[Vct,Ict,Fct],jct={class:"tw-col-span-12 tw-flex tw-justify-end tw-gap-2"},Nct=(0,s._)("svg",{class:"tw-stroke-gray-500",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59L7.11 5.7A.996.996 0 1 0 5.7 7.11L10.59 12L5.7 16.89a.996.996 0 1 0 1.41 1.41L12 13.41l4.89 4.89a.996.996 0 1 0 1.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"})],-1),Mct=(0,s._)("span",null,"Clear",-1),Hct=[Nct,Mct],Yct=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[(0,s._)("path",{fill:"#fff",d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})],-1),Zct=(0,s._)("span",null,"Filter",-1),Kct=[Yct,Zct];function Bct(t,e,r,i,o,l){const n=(0,s.up)("DateFilter"),d=(0,s.up)("AgentFilter"),w=(0,s.up)("AffectationFilter"),c=(0,s.up)("ProductFilter");return(0,s.wg)(),(0,s.iD)("div",Dct,[Sct,(0,s._)("div",zct,[(0,s.Wm)(n,{from:o.filters.created_from,"onUpdate:from":e[0]||(e[0]=t=>o.filters.created_from=t),to:o.filters.created_to,"onUpdate:to":e[1]||(e[1]=t=>o.filters.created_to=t),label:"Created"},null,8,["from","to"]),(0,s.Wm)(n,{from:o.filters.dropped_from,"onUpdate:from":e[2]||(e[2]=t=>o.filters.dropped_from=t),to:o.filters.dropped_to,"onUpdate:to":e[3]||(e[3]=t=>o.filters.dropped_to=t),label:"Dropped"},null,8,["from","to"]),(0,s.Wm)(d,{filters:o.filters,onUpdate:e[4]||(e[4]=t=>o.filters=t)},null,8,["filters"]),(0,s._)("div",Uct,[Lct,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>o.filters.confirmation=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[Pct,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([[t.text,null==t.value&&"!tw-text-green-500"],"tw-capitalize"]),value:t.value,key:t.id},(0,Q.zw)(t.name),11,Act)))),128))],512),[[a.bM,o.filters.confirmation]])]),(0,s.Wm)(w,{filters:o.filters,onUpdate:e[6]||(e[6]=t=>o.filters=t)},null,8,["filters"]),(0,s._)("div",$ct,[Wct,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>o.filters.delivery=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[qct,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([[t.text,null==t.value&&"!tw-text-gray-500"],"tw-capitalize"]),value:t.value,key:t.id},(0,Q.zw)(t.name),11,Oct)))),128))],512),[[a.bM,o.filters.delivery]])]),(0,s.Wm)(c,{filters:o.filters,onUpdate:e[8]||(e[8]=t=>o.filters=t)},null,8,["filters"]),(0,s._)("div",Ect,[Tct,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>o.filters.upsell=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},Rct,512),[[a.bM,o.filters.upsell]])]),(0,s._)("div",jct,[(0,s._)("button",{onClick:e[10]||(e[10]=(...t)=>l.clear&&l.clear(...t)),class:"tw-flex tw-items-center tw-text-gray-500 tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-transition-colors tw-duration-200 tw-bg-gray-200 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-300 darkx:hover:tw-bg-gray-500 darkx:tw-bg-gray-600"},Hct),(0,s._)("button",{onClick:e[11]||(e[11]=(...t)=>l.filter&&l.filter(...t)),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},Kct)])])])}const Qct={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Gct=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Affectation",-1),Jct=["value"],Xct=(0,s._)("option",{value:"all"},"All",-1),tut=(0,s._)("option",{value:""},"No Delivery",-1),eut=["value"];function rut(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",Qct,[Gct,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...r.filters,affectation:e.target.value})),value:r.filters.affectation,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[Xct,tut,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,eut)))),128))],40,Jct)])}var aut={props:{filters:{required:!0}},data(){return{}},computed:{users(){return this.$store.getters["user/users"]},deliveries(){return this.fetched?this.users.filter((t=>"delivery"==t.role.name)):[]},fetched(){return this.$store.getters["user/fetched"]}}};const sut=(0,d.Z)(aut,[["render",rut]]);var iut=sut;const out={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},lut=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Agent",-1),nut=["value"],dut=(0,s._)("option",{value:"all"},"All",-1),wut=(0,s._)("option",{value:""},"No Agent",-1),cut=["value"];function uut(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",out,[lut,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...r.filters,agente_id:e.target.value})),value:r.filters.agente_id,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[dut,wut,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.agents,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,cut)))),128))],40,nut)])}var put={props:{filters:{required:!0}},data(){return{}},computed:{users(){return this.$store.getters["user/users"]},agents(){return this.fetched?this.users.filter((t=>"agente"==t.role.name)):[]},fetched(){return this.$store.getters["user/fetched"]}}};const mut=(0,d.Z)(put,[["render",uut]]);var hut=mut;const gut={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},fut=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Product",-1),vut=["value"],yut=(0,s._)("option",{value:"all"},"All",-1),xut=["value"];function but(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",gut,[fut,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...r.filters,product_id:e.target.value})),value:r.filters.product_id,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[yut,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.products,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,Q.zw)(t.name),9,xut)))),128))],40,vut)])}var _ut={props:{filters:{required:!0}},data(){return{}},computed:{products(){return this.$store.getters["product/products"]},fetched(){return this.$store.getters["product/fetched"]}}};const kut=(0,d.Z)(_ut,[["render",but]]);var Cut=kut;const Dut={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Sut={for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},zut=(0,s.uE)('<option value="all" selected>All</option><option value="today" class="tw-capitalize">Today</option><option value="yesterday" class="tw-capitalize">Yesterday</option><option value="this-month" class="tw-capitalize">This Month</option><option value="last-month" class="tw-capitalize">Last Month</option><option value="custom" class="tw-capitalize">Custom</option>',6),Uut=[zut],Lut={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Put={for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},Aut=["value"],$ut={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Wut={for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},qut=["value"];function Out(t,e,r,i,o,l){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",Dut,[(0,s._)("label",Sut,(0,Q.zw)(r.label),1),(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.filterBy=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},Uut,512),[[a.bM,o.filterBy]])]),"custom"==o.filterBy?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("div",Lut,[(0,s._)("label",Put,(0,Q.zw)(r.label)+" From",1),(0,s._)("input",{onInput:e[1]||(e[1]=t=>l.handleChange(t,"from")),value:r.from,type:"date",class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,Aut)]),(0,s._)("div",$ut,[(0,s._)("label",Wut,(0,Q.zw)(r.label)+" To",1),(0,s._)("input",{onInput:e[2]||(e[2]=t=>l.handleChange(t,"to")),value:r.to,type:"date",class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,qut)])],64)):(0,s.kq)("",!0)],64)}var Eut={props:{from:{required:!0},to:{required:!0},label:{required:!0}},data(){return{filterBy:"all"}},watch:{filterBy(t){let e=null;switch(t){case"all":this.setFrom(null),this.setTo(null);break;case"today":e=UP()().format("YYYY-MM-DD"),this.setFrom(e),this.setTo(e);break;case"yesterday":e=UP()().subtract(1,"days").format("YYYY-MM-DD"),this.setFrom(e),this.setTo(e);break;case"this-month":var r=UP()().startOf("month").format("YYYY-MM-DD"),a=UP()().endOf("month").format("YYYY-MM-DD");this.setFrom(r),this.setTo(a);break;case"last-month":r=UP()().subtract(1,"months").startOf("month").format("YYYY-MM-DD"),a=UP()().subtract(1,"months").endOf("month").format("YYYY-MM-DD"),this.setFrom(r),this.setTo(a);break;default:break}}},methods:{setFrom(t){this.$emit("update:from",t)},setTo(t){this.$emit("update:to",t)},handleChange(t,e){switch(e){case"from":this.setFrom(t.target.value);break;case"to":this.setTo(t.target.value);break;default:break}}}};const Tut=(0,d.Z)(Eut,[["render",Out]]);var Vut=Tut,Iut={components:{AffectationFilter:iut,AgentFilter:hut,ProductFilter:Cut,DateFilter:Vut},props:{},data(){return{confirmations:Pn,deliveries:Wn,dateFilter:["",""],filters:{}}},watch:{filters:{deep:!0,handler(t){console.log(t)}}},methods:{clear(){this.filters={created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"all",delivery:"all",product_id:"all"}},filter(){this.$emit("update",this.filters),this.$emit("filter")}},mounted(){this.clear(),this.filter()}};const Fut=(0,d.Z)(Iut,[["render",Bct]]);var Rut=Fut;const jut={key:0},Nut={class:"tw-bg-white tw-p-5 tw-grid tw-grid-cols-4 tw-gap-5"};function Mut(t,e,r,a,i,o){const l=(0,s.up)("RevenueCard");return!r.fetching&&r.statistics.revenue?.length>0?((0,s.wg)(),(0,s.iD)("div",jut,[(0,s._)("div",Nut,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.statistics.revenue,(t=>((0,s.wg)(),(0,s.j4)(l,{key:t.id,icon:t.icon,title:t.title,value:t.value,color:t.color},null,8,["icon","title","value","color"])))),128))])])):(0,s.kq)("",!0)}const Hut={class:"tw-bg-white tw-border tw-border-solid tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-fit"},Yut={class:"tw-flex tw-justify-between"},Zut={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},Kut={class:"tw-text-gray-500 tw-uppercase tw-text-xs tw-font-bold"},But={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},Qut={class:"tw-text-gray-700 tw-text-xl tw-font-bold"};function Gut(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",Hut,[(0,s._)("div",Yut,[(0,s._)("div",null,[(0,s._)("div",Zut,[(0,s._)("p",Kut,(0,Q.zw)(r.title),1),void 0!=r.percentage?((0,s.wg)(),(0,s.iD)("span",{key:0,class:"tw-text-sm tw-font-medium tw-rounded tw-px-1 tw-text-white",style:(0,Q.j5)({background:r.color})},(0,Q.zw)(r.percentage.toFixed(2))+"%",5)):(0,s.kq)("",!0)]),(0,s._)("div",But,[(0,s._)("span",Qut,(0,Q.zw)(o.format(r.value)),1)])]),(0,s._)("div",{style:(0,Q.j5)({background:r.color}),class:"tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-text-white"},[(0,s.Wm)(X.t,{style:(0,Q.j5)(["Orders"==r.title&&{color:"#2ee1ff"}]),size:"x-large"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(r.icon),1)])),_:1},8,["style"])],4)])])])}var Jut={props:{icon:{required:!0},title:{required:!0},value:{required:!0},symbol:{default:"",required:!1},percentage:{required:!1},color:{required:!0,default:"#6b7280"}},methods:{format(t){return Intl.NumberFormat("en",{style:"currency",currency:"USD",notation:"compact",compactDisplay:"long"}).format(t)}}};const Xut=(0,d.Z)(Jut,[["render",Gut]]);var tpt=Xut,ept={components:{RevenueCard:tpt},props:{statistics:{required:!0},fetching:{required:!0}}};const rpt=(0,d.Z)(ept,[["render",Mut]]);var apt=rpt,spt={components:{OnlineUsers:Ywt,IndexStatistics:Cct,IndexFilters:Rut,IndexRevenue:apt},data(){return{filters:null,statistics:null,fetching:!0}},computed:{user(){return this.$store.getters["user/user"]}},methods:{handleFilter(){this.fetching=!0,XU.statistics(this.filters).then((t=>{"SUCCESS"==t.data.code&&(this.statistics=t.data.data.statistics,this.fetching=!1)})).catch(this.$handleApiError)}},mounted(){"admin"!=this.user.role&&this.$router.push({name:"404"})}};const ipt=(0,d.Z)(spt,[["render",vwt]]);var opt=ipt,lpt={name:"dashboards",path:"/dashboards",component:sa,meta:{module:"dashboards",gate:"all"},children:[{name:"dashboards/admin",path:"admin",component:opt,meta:{module:"dashboards",subModule:"dashboards/admin",title:"Dashboard",gate:"all"}}]};const npt=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Page not found")])],-1),dpt={class:"py-5 px-5 tw-border bg-white tw-w-full tw-flex tw-items-center tw-justify-center tw-rounded-md tw-min-h-[500px]"},wpt={class:"tw-flex tw-items-center tw-flex-col"},cpt=(0,s._)("div",{class:"md:tw-text-6xl tw-text-4xl tw-font-black text-primary-color"},"404",-1),upt={class:"tw-w-fit tw-flex tw-items-center md:tw-text-2xl tw-text-xl mt-md-5 mt-3 tw-gap-2"},ppt=(0,s._)("div",{class:"tw-max-w-[400px] tw-text-center md:tw-text-lg tw-text-sm mt-5"}," The page you requested was not found or you don't have the permission to access it. ",-1);function mpt(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",null,[npt,(0,s._)("div",dpt,[(0,s._)("div",wpt,[cpt,(0,s._)("div",upt,[(0,s.Wm)(X.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-alert-circle")])),_:1}),(0,s.Uk)(" Oops! Page not found! ")]),ppt])])])}var hpt={};const gpt=(0,d.Z)(hpt,[["render",mpt]]);var fpt=gpt;const vpt={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"};function ypt(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",vpt,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:o.sendRequest,loading:i.isLoading,variant:"flat",color:"primary-color"},{default:(0,s.w5)((()=>[(0,s.Uk)("Send Request")])),_:1},8,["onClick","loading"])])])])}const xpt="api/orders/count",bpt="get";var _pt={name:"Orders from Youcan",sheet_id:"QSDfFsqdDSQDfrsqFDSRHTRzer",sheet_name:"Youcan-Orders",auto_fetch:!0},kpt={data(){return{isLoading:!1,test:_pt}},methods:{async sendRequest(){switch(this.isLoading=!0,await Y.getCookie(),bpt){case"get":M.get(xpt).then((t=>{console.log("---- Success Response ----"),console.log(`---- Code ${t.status} ----`),console.log(t.data)}),(t=>{this.$handleApiError(t),console.log("---- Failed Response ----"),console.log(`---- Code ${t?.response.status} ----`),console.log(t?.response?.data)})).finally((()=>this.isLoading=!1));break;case"post":M.post(xpt,_pt).then((t=>{console.log("---- Success Response ----"),console.log(`---- Code ${t.status} ----`),console.log(t.data)}),(t=>{this.$handleApiError(t),console.log("---- Failed Response ----"),console.log(`---- Code ${t?.response.status} ----`),console.log(t?.response?.data)})).finally((()=>this.isLoading=!1));break;case"delete":M["delete"](xpt).then((t=>{console.log("---- Success Response ----"),console.log(`---- Code ${t.status} ----`),console.log(t.data)}),(t=>{this.$handleApiError(t),console.log("---- Failed Response ----"),console.log(`---- Code ${t?.response.status} ----`),console.log(t?.response?.data)})).finally((()=>this.isLoading=!1));break;default:break}}}};const Cpt=(0,d.Z)(kpt,[["render",ypt]]);var Dpt=Cpt;const Spt=[Vt,Bu,lpt,Yy,Jk,WM,fX,O1,d3,U8,M6,R9,trt,hwt,{name:"default",path:"/test",component:sa,children:[{name:"test",path:"",component:Dpt,meta:{title:"Test abro m3a rasek",module:"test",gate:"all"}}]},{name:"not-found",path:"/404",component:sa,meta:{title:"Not Found"},children:[{name:"404",path:"",component:fpt}]},{name:"catch-all",path:"/:pathMatch(.*)",beforeEnter:(t,e,r)=>r({name:"404"}),meta:{title:"Not Found"}}],zpt=(0,u.p7)({history:(0,u.PO)("/"),routes:Spt});zpt.beforeEach(B);var Upt=zpt,Lpt=(r(9773),r(8957));const Ppt={colors:{"primary-color":"#FF9F43","secondary-color":"#1B2850","primary-indigo":"#1B2850","primary-orange":"#FF9F43","primary-blue":"#00CFE8","primary-green":"#28C76F"}};var Apt=(0,Lpt.Rd)({theme:{defaultTheme:"customTheme",themes:{customTheme:Ppt}}});const $pt={install(t){t.config.globalProperties.$can=function(t){const e=this.$store.getters["user/permissions"];return e.includes(t)}}};var Wpt=$pt;const qpt={install(t){t.config.globalProperties.$alert=function(t){this.$store.dispatch("alert/toggleAlert",t)}}};var Opt=qpt;const Ept={install(t){t.config.globalProperties.$handleApiError=function(e){const r=e?.response?.data?.code;let a="error",s="Something wrong happened. Try again",i=!0;const o=["VALIDATION_ERROR","NOT_ACTIVE_ERROR","INVALID_CREDENTIALS","PERMISSION_DENIED"];switch(o.includes(r)&&(i=!1),console.log(e),"ERR_NETWORK"==e.code&&(s="Network error. Check your connection"),r){case"NOT_ALLOWED":s="Your are not allowed to this resources";break;case"ERROR":s=e?.response?.data.message;break;case"NOT_AUTHENTICATED":s="Your session expired",setTimeout((()=>{t.config.globalProperties.$store.dispatch("user/logout"),t.config.globalProperties.$router.push("/login")}),2e3);break;case"NOT_FOUND":i=!1,t.config.globalProperties.$router.push({name:"404"});break;default:break}return i&&t.config.globalProperties.$alert({type:a,title:s}),e}}};var Tpt=Ept,Vpt=r(7025);const Ipt=t=>((0,s.dD)("data-v-ff4afcd0"),t=t(),(0,s.Cn)(),t),Fpt={class:"tw-min-h-[500px] tw-flex tw-items-center tw-justify-center tw-bg-white tw-rounded-md tw-border"},Rpt=Ipt((()=>(0,s._)("div",{class:"tw-w-[40px] tw-h-[40px] tw-animate-spin loading tw-border-4 tw-border-x-transparent tw-border-t-transparent tw-rounded-full"},null,-1))),jpt=[Rpt];function Npt(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",Fpt,jpt)}var Mpt={};const Hpt=(0,d.Z)(Mpt,[["render",Npt],["__scopeId","data-v-ff4afcd0"]]);var Ypt=Hpt;const Zpt={class:"tw-flex tw-justify-center tw-items-center"},Kpt=(0,s._)("div",{class:"tw-relative tw-w-8 tw-h-8 tw-animate-spin tw-rounded-full tw-bg-gradient-to-r tw-from-purple-400 tw-via-blue-500 tw-to-red-400"},[(0,s._)("div",{class:"tw-absolute tw-top-1/2 tw-left-1/2 tw-transform tw--translate-x-1/2 tw--translate-y-1/2 tw-w-7 tw-h-7 tw-bg-white tw-rounded-full tw-border-2 tw-border-white"})],-1),Bpt=[Kpt];function Qpt(t,e,r,a,i,o){return(0,s.wg)(),(0,s.iD)("div",Zpt,Bpt)}var Gpt={};const Jpt=(0,d.Z)(Gpt,[["render",Qpt]]);var Xpt=Jpt;const tmt={key:0},emt={ref:"popup",class:"tw-fixed tw-top-0 tw-left-0 tw-z-[50999] tw-right-0 tw-bottom-0 tw-flex tw-items-center tw-justify-center"},rmt={name:"body",class:"tw-z-[50999] tw-bg-white md:tw-min-w-[300px] md:tw-max-w-[800px] tw-flex tw-flex-col md:tw-min-h-[170px] tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5"},amt=["innerHTML"],smt={key:1,class:"tw-text-lg tw-text-gray-700"},imt={class:"tw-flex tw-gap-3 tw-justify-end mt-5"};function omt(t,e,r,a,i,o){return r.visible?((0,s.wg)(),(0,s.iD)("div",tmt,[((0,s.wg)(),(0,s.j4)(s.lR,{to:"body"},[(0,s._)("div",null,[(0,s._)("div",emt,[(0,s._)("div",rmt,[(0,s._)("div",{class:(0,Q.C_)(["tw-font-medium tw-text-lg mb-5 tw-text-start",o.currentType.class])},[(0,s.Wm)(X.t,{size:"small",class:"mr-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(o.currentType.icon),1)])),_:1}),(0,s._)("span",null,(0,Q.zw)(r.title),1)],2),r.body?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"tw-text-center tw-text-lg tw-text-gray-700",innerHTML:r.body},null,8,amt)):((0,s.wg)(),(0,s.iD)("div",smt,[(0,s.WI)(t.$slots,"default")])),(0,s.Wm)(er.C),(0,s._)("div",imt,[(0,s.Wm)(G.T,{variant:"flat",color:"grey",onClick:e[0]||(e[0]=t=>o.resolve(!1))},{default:(0,s.w5)((()=>[(0,s.Uk)("Cancel")])),_:1}),r.noConfirm?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(G.T,{key:0,loading:r.loading,variant:"flat",color:r.btnColor?r.btnColor:"red",onClick:e[1]||(e[1]=t=>o.resolve(!0))},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","color"]))])]),(0,s._)("div",{onClick:e[2]||(e[2]=t=>o.resolve(!1)),class:(0,Q.C_)(["tw-duration-300 tw-absolute tw-top-0 tw-left-0 tw-w-full tw-h-full tw-bg-neutral-900/50 tw-opacity-0",{"!tw-opacity-100":r.visible}])},null,2)],512)])]))])):(0,s.kq)("",!0)}var lmt={props:["visible","loading","title","body","type","noConfirm","btnColor"],data(){return{show:!0,types:{warning:{class:"tw-text-orange-400",icon:"mdi-alert-circle-outline"},info:{class:"tw-text-blue-400",icon:"mdi-information-outline"}}}},watch:{visible(t){this.show=t}},methods:{resolve(t){this.$emit("resolved",t)}},computed:{currentType(){return this.types[this.type]}}};const nmt=(0,d.Z)(lmt,[["render",omt]]);var dmt=nmt;const wmt={key:0},cmt={ref:"popup",class:"tw-fixed tw-top-0 tw-left-0 tw-z-[50999] tw-right-0 tw-bottom-0 tw-flex tw-items-center tw-justify-center"};function umt(t,e,r,i,o,l){return r.visible?((0,s.wg)(),(0,s.iD)("div",wmt,[((0,s.wg)(),(0,s.j4)(s.lR,{to:".my-application"},[(0,s._)("div",null,[(0,s._)("div",cmt,[(0,s._)("div",{name:"body",onClick:e[0]||(e[0]=(0,a.iM)((t=>l.resolve(!1)),["self"])),class:"tw-z-[50999] tw-w-full md:tw-min-w-[300px] tw-overflow-y-auto tw-max-h-screen tw-flex tw-flex-col md:tw-min-h-[170px]"},[(0,s.WI)(t.$slots,"default")]),(0,s._)("div",{onClick:e[1]||(e[1]=t=>l.resolve(!1)),class:(0,Q.C_)(["tw-duration-300 tw-absolute tw-top-0 tw-left-0 tw-w-full tw-h-full tw-bg-neutral-900/50 tw-opacity-0",{"!tw-opacity-100":r.visible}])},null,2)],512)])]))])):(0,s.kq)("",!0)}var pmt={props:["visible","loading","title","body","type","noConfirm","btnColor"],data(){return{show:!0,types:{warning:{class:"tw-text-orange-400",icon:"mdi-alert-circle-outline"},info:{class:"tw-text-blue-400",icon:"mdi-information-outline"}}}},watch:{visible(t){this.show=t}},methods:{resolve(t){this.$emit("cancel",t)}},computed:{currentType(){return this.types[this.type]}}};const mmt=(0,d.Z)(pmt,[["render",umt]]);var hmt=mmt,gmt=r(2340),fmt=r(5781),vmt=r.n(fmt);const ymt={key:0},xmt={ref:"popup",class:"tw-fixed tw-top-0 tw-left-0 tw-z-[50999] tw-right-0 tw-bottom-0 tw-flex tw-items-center tw-justify-center"};function bmt(t,e,r,i,o,l){return r.visible?((0,s.wg)(),(0,s.iD)("div",ymt,[((0,s.wg)(),(0,s.j4)(s.lR,{to:"body"},[(0,s._)("div",null,[(0,s._)("div",xmt,[(0,s.Wm)(Ut.Z5,null,{default:(0,s.w5)((()=>[o.showContent?((0,s.wg)(),(0,s.iD)("div",{key:0,onClick:e[0]||(e[0]=(0,a.iM)((t=>l.resolve(!1)),["self"])),class:"tw-z-[50999] tw-w-full md:tw-min-w-[300px] !tw-overflow-auto !tw-max-h-screen"},[(0,s.WI)(t.$slots,"default")])):(0,s.kq)("",!0)])),_:3}),(0,s._)("div",{onClick:e[1]||(e[1]=t=>l.resolve(!1)),class:(0,Q.C_)(["tw-duration-300 tw-absolute tw-top-0 tw-left-0 tw-w-full tw-h-full tw-backdrop-blur-sm tw-bg-black/20 tw-opacity-0",{"!tw-opacity-100":r.visible}])},null,2)],512)])]))])):(0,s.kq)("",!0)}var _mt={props:{visible:{required:!0,default:!1},closeable:{required:!1,default:!0}},data(){return{showContent:!1}},watch:{visible(t){t?setTimeout((()=>{this.showContent=t}),0):this.showContent=t}},methods:{resolve(t){this.closeable&&this.$emit("cancel",t)}},computed:{},mounted(){this.showContent=this.visible},unmounted(){}};const kmt=(0,d.Z)(_mt,[["render",bmt]]);var Cmt=kmt;(0,a.ri)(c).use(Upt).use(T).use(Apt).use(Wpt).use(Opt).use(Tpt).use(Vpt.Z).component("LoadingAnimation",Ypt).component("Loading",Xpt).component("Popup",dmt).component("PopupFull",hmt).component("VueDatePicker",gmt.Z).component("downloadCsv",vmt()).component("popupNew",Cmt).mount("#app")}},e={};function r(a){var s=e[a];if(void 0!==s)return s.exports;var i=e[a]={id:a,loaded:!1,exports:{}};return t[a].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=t,function(){var t=[];r.O=function(e,a,s,i){if(!a){var o=1/0;for(w=0;w<t.length;w++){a=t[w][0],s=t[w][1],i=t[w][2];for(var l=!0,n=0;n<a.length;n++)(!1&i||o>=i)&&Object.keys(r.O).every((function(t){return r.O[t](a[n])}))?a.splice(n--,1):(l=!1,i<o&&(o=i));if(l){t.splice(w--,1);var d=s();void 0!==d&&(e=d)}}return e}i=i||0;for(var w=t.length;w>0&&t[w-1][2]>i;w--)t[w]=t[w-1];t[w]=[a,s,i]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){r.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,a){var s,i,o=a[0],l=a[1],n=a[2],d=0;if(o.some((function(e){return 0!==t[e]}))){for(s in l)r.o(l,s)&&(r.m[s]=l[s]);if(n)var w=n(r)}for(e&&e(a);d<o.length;d++)i=o[d],r.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return r.O(w)},a=self["webpackChunkproduction"]=self["webpackChunkproduction"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=r.O(void 0,[998],(function(){return r(916)}));a=r.O(a)})();
//# sourceMappingURL=app.d0742fb5.js.map