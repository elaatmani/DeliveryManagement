(function(){var t={6700:function(t,e,r){var a={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":6649,"./is.js":6649,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":6956,"./oc-lnc.js":6956,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":9304,"./th.js":9304,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function s(t){var e=i(t);return r(e)}function i(t){if(!r.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}s.keys=function(){return Object.keys(a)},s.resolve=i,t.exports=s,s.id=6700},5155:function(t,e,r){"use strict";r.d(e,{Z:function(){return Lot}});var a=r(9242),s=r(3396),i=r(7718);function l(t,e,r,a,l,o){const n=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(i.q,{class:"my-application"},{default:(0,s.w5)((()=>[(0,s.Wm)(n)])),_:1})}var o=r(7139);const n="https://vldo.shop/",d="https://api.vldo.shop/",w="1.0.0",c="$";var u={name:"App",data:()=>({theme:"light",version:w}),methods:{...(0,o.nv)("user",["setIsLoggedIn","setPermissions"]),checkVersion(){const t=localStorage.getItem("app_version");t!=this.version&&(localStorage.setItem("app_version",this.version),location.reload(!0))}},mounted(){}},p=r(89);const m=(0,p.Z)(u,[["render",l],["__scopeId","data-v-9eba23da"]]);var g=m,h=r(2483);let f={roles:localStorage.getItem("roles")?JSON.parse(localStorage.getItem("roles")):[],user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):[],isLoggedIn:"true"==localStorage.getItem("isLoggedIn"),permissions:localStorage.getItem("permissions")?JSON.parse(localStorage.getItem("permissions")):[],users:[],agents:[],deliveries:[],fetched:!1,fetchedRoles:!1};var v={name:"user",namespaced:!0,state:f,getters:{fetched:t=>t.fetched,fetchedRoles:t=>t.fetchedRoles,isLoggedIn:t=>t.isLoggedIn,permissions:t=>t.permissions,user:t=>t.user,users:t=>t.users,roles:t=>t.roles,agents:t=>t.agents,deliveries:t=>t.deliveries},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_FETCHED_ROLES:(t,e)=>{t.fetchedRoles=e},SET_IS_LOGGED_IN:(t,e)=>{localStorage.setItem("isLoggedIn",e),t.isLoggedIn=e},SET_USER:(t,e)=>{localStorage.setItem("user",JSON.stringify(e)),t.user=e},SET_USERS:(t,e)=>{t.users=e},SET_PERMISSIONS:(t,e)=>{localStorage.setItem("permissions",JSON.stringify(e)),t.permissions=e},SET_ROLES:(t,e)=>{localStorage.setItem("roles",JSON.stringify(e)),t.roles=e},SET_DELIVERIES:(t,e)=>{t.deliveries=e},SET_AGENTS:(t,e)=>{t.agents=e}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setFetchedRoles:({commit:t},e)=>{t("SET_FETCHED_ROLES",e)},setUser:({commit:t},e)=>{t("SET_USER",e)},setUsers:({commit:t},e)=>{t("SET_USERS",e)},setAgents:({commit:t},e)=>{t("SET_AGENTS",e)},setDeliveries:({commit:t},e)=>{t("SET_DELIVERIES",e)},setIsLoggedIn:({commit:t},e)=>{t("SET_IS_LOGGED_IN",e)},setPermissions:({commit:t},e)=>{t("SET_PERMISSIONS",e)},setRoles:({commit:t},e)=>{t("SET_ROLES",e)},logout:({commit:t})=>{t("SET_USER",{}),t("SET_IS_LOGGED_IN",!1),t("SET_PERMISSIONS",[]),t("SET_ROLES",[])}}},y={name:"alert",namespaced:!0,state:{active:!1,alert:{type:"success",title:"Toast",body:"Hello body"}},getters:{alert:t=>t},mutations:{TOGGLE_TOAST:(t,e)=>{t.alert=e,t.active=!0,setTimeout((()=>{t.active=!1}),4500)}},actions:{toggleAlert:({commit:t},e)=>{t("TOGGLE_TOAST",e)}}};r(7658);let x={products:[],fetched:!1};var b={name:"product",namespaced:!0,state:x,getters:{products:t=>t.products,fetched:t=>t.fetched},mutations:{SET_PRODUCTS:(t,e)=>{t.products=e},ADD_PRODUCT:(t,e)=>{t.products.push(e)},SET_FETCHED:(t,e)=>{t.fetched=e}},actions:{setProducts:({commit:t},e)=>{t("SET_PRODUCTS",e)},addProduct:({commit:t},e)=>{t("ADD_PRODUCT",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)}}};r(541);let _={fetched:!1,sales:[],count:0};var k={name:"sale",namespaced:!0,state:_,getters:{sales:t=>t.sales,count:t=>t.count,fetched:t=>t.fetched},mutations:{SET_SALES:(t,e)=>{t.sales=e},SET_COUNT:(t,e)=>{t.count=e},SET_FETCHED:(t,e)=>{t.fetched=e},UPDATE_SALE:(t,e)=>{t.sales=t.sales.map((t=>t.id===e.id?e.sale:t))},ADD_SALE:(t,e)=>{t.sales.unshift(e)},ADD_SALES:(t,e)=>{t.sales=[...e,...t.sales]},UPDATE_CONFIRMATION:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,console.log("sale updated")),t)))},UPDATE_UPSELL:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.upsell=e.upsell,console.log("sale updated")),t)))},UPDATE_AFFECTATION:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.affectation=e.affectation,null!=e.affectation?t.delivery="dispatch":t.delivery=null,console.log("sale updated")),t)))},UPDATE_NOTE:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.note=e.note,console.log("sale updated")),t)))},UPDATE_CONFIRMATION_WITH_NOTE:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,t.note=e.note,console.log("order updated")),t)))},UPDATE_DELIVERY:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.delivery=e.delivery,console.log("sale updated")),t)))},RESET_SALES:(t,e)=>{t.sales=t.sales.map((t=>(e.includes(t.id)&&(t.agente_id=null,t.upsell=null,t.confirmation=null,t.affectation=null,t.note=null,t.note_d=null,t.delivery=null,t.reported_agente_date=null,t.reported_agente_note=null,t.reported_delivery_date=null,t.reported_delivery_note=null),t)))}},actions:{setSales:({commit:t},e)=>{t("SET_SALES",e)},setCount:({commit:t},e)=>{t("SET_COUNT",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},update:({commit:t},e)=>{t("UPDATE_SALE",e)},add:({commit:t},e)=>{t("ADD_SALE",e)},addSales:({commit:t},e)=>{t("ADD_SALES",e)},updateConfirmation:({commit:t},e)=>{t("UPDATE_CONFIRMATION",e)},updateUpsell:({commit:t},e)=>{t("UPDATE_UPSELL",e)},updateAffectation:({commit:t},e)=>{t("UPDATE_AFFECTATION",e)},updateNote:({commit:t},e)=>{t("UPDATE_NOTE",e)},updateConfirmationWithNote:({commit:t},e)=>{t("UPDATE_CONFIRMATION_WITH_NOTE",e)},updateDelivery:({commit:t},e)=>{t("UPDATE_DELIVERY",e)},resetSales:({commit:t},e)=>{t("RESET_SALES",e)}}};let C={orders:[],order:null,all_orders:[],fetched:!1};var D={name:"order",namespaced:!0,state:C,getters:{fetched:t=>t.fetched,orders:t=>t.orders,order:t=>t.order,allOrders:t=>t.all_orders},mutations:{SET_ORDERS:(t,e)=>{t.orders=e},ADD_ORDER:(t,e)=>{t.orders.unshift(e),t.all_orders.unshift(e)},SET_FETCHED:(t,e)=>{t.fetched=e},SET_ALL_ORDERS:(t,e)=>{t.all_orders=e},SET_ORDER:(t,e)=>{t.order=e},UPDATE_ORDER:(t,e)=>{t.orders=t.orders.map((t=>t.id===e.id?e.order:t)),t.all_orders=t.all_orders.map((t=>t.id===e.id?e.order:t))},UPDATE_CONFIRMATION:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,"confirmer"==e.confirmation&&(t.delivery="dispatch"),console.log("order updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,"confirmer"==e.confirmation&&(t.delivery="dispatch"),console.log("order updated")),t)))},UPDATE_CONFIRMATION_WITH_NOTE:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,t.note=e.note,"confirmer"==e.confirmation&&(t.delivery="dispatch"),console.log("order updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,t.note=e.note,"confirmer"==e.confirmation&&(t.delivery="dispatch"),console.log("order updated")),t)))},UPDATE_UPSELL:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.upsell=e.upsell,console.log("sale updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.upsell=e.upsell,console.log("sale updated")),t)))},UPDATE_AFFECTATION:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.affectation=e.affectation,console.log("sale updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.affectation=e.affectation,console.log("sale updated")),t)))},UPDATE_NOTE:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.note=e.note,console.log("sale updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.note=e.note,console.log("sale updated")),t)))},UPDATE_DELIVERY:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.delivery=e.delivery,console.log("sale updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.delivery=e.delivery,console.log("sale updated")),t)))}},actions:{setOrders:({commit:t},e)=>{t("SET_ORDERS",e)},addOrder:({commit:t},e)=>{t("ADD_ORDER",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setAllOrders:({commit:t},e)=>{t("SET_ALL_ORDERS",e)},setOrder:({commit:t},e)=>{t("SET_ORDER",e)},update:({commit:t},e)=>{t("UPDATE_ORDER",e)},updateConfirmation:({commit:t},e)=>{t("UPDATE_CONFIRMATION",e)},updateConfirmationWithNote:({commit:t},e)=>{t("UPDATE_CONFIRMATION_WITH_NOTE",e)},updateUpsell:({commit:t},e)=>{t("UPDATE_UPSELL",e)},updateAffectation:({commit:t},e)=>{t("UPDATE_AFFECTATION",e)},updateNote:({commit:t},e)=>{t("UPDATE_NOTE",e)},updateDelivery:({commit:t},e)=>{t("UPDATE_DELIVERY",e)}}};let S={fetcehd:!1,inventoryList:[],inventoryState:[],inventoryMovements:[]};var z={name:"inventory",namespaced:!0,state:S,getters:{fetched:t=>t.fetched,inventoryList:t=>t.inventoryList,inventoryState:t=>t.inventoryState,inventoryMovements:t=>t.inventoryMovements},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_INVENTORY_LIST:(t,e)=>{t.inventoryList=e},SET_INVENTORY_STATE:(t,e)=>{t.inventoryState=e},SET_INVENTORY_MOVEMENTS:(t,e)=>{t.inventoryMovements=e}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setInventoryList:({commit:t},e)=>{t("SET_INVENTORY_LIST",e)},setInventoryState:({commit:t},e)=>{t("SET_INVENTORY_STATE",e)},setInventoryMovements:({commit:t},e)=>{t("SET_INVENTORY_MOVEMENTS",e)}}},U=r(6943);const L=U.Z.create({baseURL:d}),P=U.Z.create({baseURL:d});P.defaults.withCredentials=!0,P.defaults.headers={"Content-Type":"multipart/form-data",Accept:"application/json"},L.defaults.withCredentials=!0,L.defaults.headers={"Content-Type":"application/json",Accept:"application/json"};var A=L,W=r(680),$={getCookie(){let t=W.Z.get("XSRF-TOKEN");return t?new Promise((t=>{t()})):A.get("sanctum/csrf-cookie")}};class E{async statistics(){return await $.getCookie(),A.post("api/v1/agent/statistics")}async paginate(t="/",e){return await $.getCookie(),A.post("api/v1/agent/orders"+t,e)}async counts(){return await $.getCookie(),A.get("api/v1/agent/orders/counts")}async update(t,e){return await $.getCookie(),A.post("api/v1/agent/orders/"+t+"/update",e)}async toConfirm(){return await $.getCookie(),A.get("api/orders/toconfirmate")}async getOrder(){return await $.getCookie(),A.get("api/orders/add")}}var q=new E;let T={fetched:!1,totalAvailable:0,totalConfirmed:0,totalNotConfirmed:0};var O={name:"agent",namespaced:!0,state:T,getters:{fetched:t=>t.fetched,state:t=>t},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_TOTAL_CONFIRMED:(t,e)=>{t.totalConfirmed=e},SET_TOTAL_NOT_CONFIRMED:(t,e)=>{t.totalNotConfirmed=e},SET_TOTAL_AVAILABLE:(t,e)=>{t.totalAvailable=e}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setTotalConfirmed:({commit:t},e)=>{t("SET_TOTAL_CONFIRMED",e)},setTotalNotConfirmed:({commit:t},e)=>{t("SET_TOTAL_NOT_CONFIRMED",e)},setTotalAvailable:({commit:t},e)=>{t("SET_TOTAL_AVAILABLE",e)},refreshCounts:t=>{t.commit("SET_FETCHED",!1),console.log(t),q.counts().then((e=>{if("SUCCESS"==e?.data.code){const r=e.data.data;t.commit("SET_TOTAL_CONFIRMED",r.confirmed),t.commit("SET_TOTAL_NOT_CONFIRMED",r.not_confirmed),t.commit("SET_TOTAL_AVAILABLE",r.available),t.commit("SET_FETCHED",!0)}}))}}};const V=localStorage.getItem("cities");let I={fetched:!1,cities:V?JSON.parse(V):[]};var F={name:"city",namespaced:!0,state:I,getters:{cities:t=>t.cities,fetched:t=>t.fetched},mutations:{SET_CITIES:(t,e)=>{localStorage.setItem("cities",JSON.stringify(e)),t.cities=e},SET_FETCHED:(t,e)=>{t.fetched=e}},actions:{setCities:({commit:t},e)=>{t("SET_CITIES",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)}}};let R={shops:[]};var j={name:"shop",namespaced:!0,state:R,getters:{shops:t=>t.shops},mutations:{SET_SHOPS:(t,e)=>{t.shops=e}},actions:{setShops:({commit:t},e)=>{t("SET_SHOPS",e)}}};let N={fetched:!1,notifications:{productStockAlert:[],reportedSale:[],reportedOrderAgente:[],reportedOrderDelivery:[]}};var M={name:"notification",namespaced:!0,state:N,getters:{notifications:t=>t.notifications,fetched:t=>t.fetched},mutations:{SET_NOTIFICATIONS:(t,e)=>{t.notifications=e},SET_FETCHED:(t,e)=>{t.fetched=e}},actions:{setNotifications:({commit:t},e)=>{t("SET_NOTIFICATIONS",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)}}};let H={fetched:!1,warehouses:[]};var Y={name:"warehouse",namespaced:!0,state:H,getters:{fetched:t=>t.fetched,warehouses:t=>t.warehouses},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_WAREHOUSES:(t,e)=>{t.warehouses=e},ADD_WAREHOUSE:(t,e)=>{t.warehouses.push(e)},DELETE_WAREHOUSE:(t,e)=>{t.warehouses=t.warehouses.filter((t=>t.id!=e))},UPDATE_WAREHOUSE:(t,e)=>{t.warehouses=t.warehouses.map((t=>t.id==e.id?{...e}:t))}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setWarehouses:({commit:t},e)=>{t("SET_WAREHOUSES",e)},addWarehouse:({commit:t},e)=>{t("ADD_WAREHOUSE",e)},update:({commit:t},e)=>{t("UPDATE_WAREHOUSE",e)},delete:({commit:t},e)=>{t("DELETE_WAREHOUSE",e)}}};let Z={fetched:!1,factorisations:[]};var K={name:"factorisation",namespaced:!0,state:Z,getters:{fetched:t=>t.fetched,factorisations:t=>t.factorisations},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_FACTORISATIONS:(t,e)=>{t.factorisations=e},ADD_FACTORISATION:(t,e)=>{t.factorisations.push(e)},DELETE_FACTORISATION:(t,e)=>{t.factorisations=t.factorisations.filter((t=>t.id!=e))},UPDATE_FACTORISATION:(t,e)=>{t.factorisations=t.factorisations.map((t=>t.id==e.id?{...e}:t))}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setFactorisations:({commit:t},e)=>{t("SET_FACTORISATIONS",e)},addFactorisation:({commit:t},e)=>{t("ADD_FACTORISATION",e)},update:({commit:t},e)=>{t("UPDATE_FACTORISATION",e)},delete:({commit:t},e)=>{t("DELETE_FACTORISATION",e)}}};let B={fetched:!1,sheets:[]};var Q={name:"sheet",namespaced:!0,state:B,getters:{fetched:t=>t.fetched,sheets:t=>t.sheets},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_SHEETS:(t,e)=>{t.sheets=e},ADD_SHEET:(t,e)=>{t.sheets.push(e)},DELETE_SHEET:(t,e)=>{t.sheets=t.sheets.filter((t=>t.id!=e))},UPDATE_SHEET:(t,e)=>{t.sheets=t.sheets.map((t=>t.id==e.id?{...e}:t))}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setSheets:({commit:t},e)=>{t("SET_SHEETS",e)},addSheet:({commit:t},e)=>{t("ADD_SHEET",e)},update:({commit:t},e)=>{t("UPDATE_SHEET",e)},delete:({commit:t},e)=>{t("DELETE_SHEET",e)}}},G=(0,o.MT)({state:{},getters:{},mutations:{},actions:{},modules:{user:v,product:b,alert:y,sale:k,order:D,inventory:z,city:F,agent:O,shop:j,notification:M,warehouse:Y,factorisation:K,sheet:Q}});class J{async login(t){return await $.getCookie(),A.post("api/auth/login",{email:t.email,password:t.password})}async register(t){return await $.getCookie(),A.post("api/users/new",{email:t.email,password:t.password,phone:t.phone,status:t.status,role:t.role,firstname:t.firstname,lastname:t.lastname,product_id:t.product_id,city:t?.city,deliverycity:t?.deliveryCities,having_all:t.having_all})}async update(t,e){return await $.getCookie(),A.post("api/users/update/"+t.id,{email:t.email,password:t.password,phone:t.phone,status:t.status,firstname:t.firstname,lastname:t.lastname,product_id:t.product_id,role:t.role,city:t?.city,deliverycity:t?.deliveryCities,updatePassword:e,having_all:t.having_all})}async updateProfile(t,e){return await $.getCookie(),A.post("api/users/profile",{password:t.password,phone:t.phone,firstname:t.firstname,lastname:t.lastname,updatePassword:e})}async online(){return await $.getCookie(),A.get("api/user")}async profile(){return await $.getCookie(),A.get("api/users/profile")}async logout(){return await $.getCookie(),A.get("api/auth/logout")}async clear(){return await $.getCookie(),A.get("api/auth/clear")}async permession(){return await $.getCookie(),A.get("api/auth/permission")}async roles(){return await $.getCookie(),A.get("api/auth/roles")}async all(){return await $.getCookie(),A.get("api/users")}async updateStatus({id:t,status:e}){return await $.getCookie(),A.post("api/users/status/"+t,{status:e})}async delete(t){return await $.getCookie(),A["delete"]("api/users/delete/"+t)}async getUser(t){return await $.getCookie(),A.get("api/users/"+t)}async createRole({name:t,permissions:e}){return await $.getCookie(),A.post("api/roles/new",{name:t,permissions:e})}async updateRole(t,{name:e,permissions:r}){return await $.getCookie(),A.post("api/roles/update/"+t,{name:e,permissions:r})}async deleteRole(t){return await $.getCookie(),A["delete"]("api/roles/delete/"+t)}async getRole(t){return await $.getCookie(),A.get("api/roles/"+t)}async agents(){return await $.getCookie(),A.get("api/agents")}async deliveries(){return await $.getCookie(),A.get("api/delevries")}async allDeliveries(){return await $.getCookie(),A.get("api/deliveries")}async cities(){return await $.getCookie(),A.get("api/cities")}}var X=new J;function tt(t,e,r){if(document.title=t.meta?.title+" | Vldo Shop",!G.getters["user/isLoggedIn"])return"/login"==t.path||{name:"login"};if(X.online().catch(Lot.$handleApiError),"/login"==t.path)return{name:"404"};const{gate:a}=t.meta,s=G.getters["user/permissions"];return"all"===a||((a||"/404"===t.path)&&!(!s.includes(a)&&"/404"!==t.path)||{name:"404"})}var et=r(2268),rt=r(7312),at=r(3369),st=r(3289),it=r(165);const lt={class:"tw-min-h-screen tw-overflow-auto tw-bg-slate-50"},ot={class:"tw-grid tw-h-fit tw-overflow-hidden md:tw-grid-cols-2 tw-grid-cols-1"},nt={class:"py-md-5 py-10 pb-0 tw-flex tw-justify-center md:tw-items-center"},dt={class:"px-md-10 tw-w-full"},wt={class:"tw-w-[150px]"},ct=["src"],ut={class:"mt-md-10 mt-15 pt-5 px-md-5 px-lg-16 tw-w-full d-felx justify-center align-center"},pt={class:"pa-5 py-7 tw-border bg-white tw-rounded-lg tw-mx-auto tw-max-w-[450px]"},mt=(0,s._)("h1",{class:"text-h5 font-weight-medium !tw-text-gray-600"},"Login",-1),gt=(0,s._)("p",{class:"text-body-1 mt-2 !tw-text-gray-500"},"Please login to your account",-1),ht={key:0,class:"text-body-2 mt-2 !tw-text-red-500"},ft={class:"mt-5"},vt=(0,s._)("p",{class:"mb-1"},"Email",-1),yt=(0,s._)("p",{class:"mb-1"},"Password",-1),xt={class:"mt-5"},bt=(0,s._)("span",{class:"text-capitalize text-white"},"Login",-1),_t={class:"bg-primary-color tw-min-h-screen tw-hidden md:tw-flex tw-items-center tw-justify-center"},kt=["src"];function Ct(t,e,r,i,l,o){const n=(0,s.up)("Alert");return(0,s.wg)(),(0,s.iD)("div",lt,[(0,s.Wm)(n),(0,s._)("div",ot,[(0,s._)("div",nt,[(0,s.Wm)(at.K,{class:"py-0"},{default:(0,s.w5)((()=>[(0,s._)("div",dt,[(0,s._)("div",wt,[(0,s._)("img",{class:"tw-w-full",src:l.localUrl+"assets/img/logo.png"},null,8,ct)]),(0,s._)("div",ut,[(0,s._)("div",pt,[mt,gt,l.error.active?((0,s.wg)(),(0,s.iD)("p",ht,(0,et.zw)(l.error.message),1)):(0,s.kq)("",!0),(0,s._)("div",ft,[(0,s._)("div",null,[vt,(0,s.Wm)(it.hw,{name:"email",onKeyup:e[0]||(e[0]=t=>o.resetError("email")),modelValue:l.email,"onUpdate:modelValue":e[1]||(e[1]=t=>l.email=t),error:!l.emailStatus.valid,"error-messages":l.emailStatus.valid?"":l.emailStatus.message,autofocus:"",onBlur:e[2]||(e[2]=t=>l.emailFocus=!1),onFocus:e[3]||(e[3]=t=>l.emailFocus=!0),color:"primary-color",variant:"outlined",class:"tw-w-full",density:"compact"},{"append-inner":(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:l.emailFocus?l.emailStatus.valid?"primary-color":"error":"grey-darken-3"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-email-outline")])),_:1},8,["color"])])),_:1},8,["modelValue","error","error-messages"])]),(0,s._)("div",null,[yt,(0,s.Wm)(it.hw,{name:"password",onKeyup:(0,a.D2)(o.login,["enter"]),modelValue:l.password,"onUpdate:modelValue":e[5]||(e[5]=t=>l.password=t),error:!l.passwordStatus.valid,"error-messages":l.passwordStatus.valid?"":l.passwordStatus.message,type:l.showPassword?"text":"password",onBlur:e[6]||(e[6]=t=>l.passwordFocus=!1),onFocus:e[7]||(e[7]=t=>l.passwordFocus=!0),color:"primary-color",variant:"outlined",class:"tw-w-full",density:"compact"},{"append-inner":(0,s.w5)((()=>[(0,s.Wm)(st.t,{onClick:e[4]||(e[4]=t=>l.showPassword=!l.showPassword),class:"tw-relative tw-z-50 tw-cursor-pointer",color:l.passwordFocus?l.passwordStatus.valid?"primary-color":"error":"grey-darken-3"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,et.zw)(l.showPassword?"mdi-eye-off-outline":"mdi-eye-outline"),1)])),_:1},8,["color"])])),_:1},8,["onKeyup","modelValue","error","error-messages","type"])]),(0,s._)("div",xt,[(0,s.Wm)(rt.T,{disabled:l.isLoading||!l.cookiesCleared,loading:l.isLoading||!l.cookiesCleared,onClick:o.login,block:"",size:"large",color:"primary-color",variant:"flat",class:"!tw-text-white disabled:!tw-bg-gray-200"},{default:(0,s.w5)((()=>[bt])),_:1},8,["disabled","loading","onClick"])])])])])])])),_:1})]),(0,s._)("div",_t,[(0,s._)("img",{src:l.localUrl+"assets/img/login.jpg",class:"tw-w-full tw-h-full tw-object-cover",alt:""},null,8,kt)])])])}function Dt(t){var e=/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/;return t?new RegExp(e).test(t)?{valid:!0}:{valid:!1,message:"Email is not valid."}:{valid:!1,message:"Email is required."}}function St(t){return t?t.length<=4||t.length>=16?{valid:!1,message:"Password length must be between 4 and 16."}:{valid:!0}:{valid:!1,message:"This field is required"}}function zt(t,e="This field"){return t?{valid:!0}:{valid:!1,message:`${e} is required`}}function Ut(t,e="This field"){return t?isNaN(t)?{valid:!1,message:`${e} must be a valid number`}:{valid:!0}:{valid:!1,message:`${e} is required`}}function Lt(t,e){return t?t!==e?{valid:!1,message:"Passwords doesn't match"}:{valid:!0}:{valid:!1,message:"This field is required."}}function Pt(t){return t.length?{valid:!0}:{valid:!1,message:"You need at least one variant to create a product !"}}function At(t){return t.length?{valid:!0}:{valid:!1,message:"You need at least one permission to create a role !"}}var Wt=r(7771),$t=r(8952);const Et={key:0,class:"pa-2 tw-absolute !tw-z-[510000]"},qt={class:"tw-text-sm"};function Tt(t,e,r,a,i,l){return(0,s.wg)(),(0,s.j4)(s.lR,{to:"body"},[(0,s.Wm)($t.V,null,{default:(0,s.w5)((()=>[l.state.active?((0,s.wg)(),(0,s.iD)("div",Et,[(0,s.Wm)(Wt.w,{closable:"",density:"compact",variant:"flat",type:l.state.alert.type,position:"fixed",location:"bottom right",class:"ma-2"},{default:(0,s.w5)((()=>[(0,s._)("div",qt,(0,et.zw)(l.state.alert.title),1)])),_:1},8,["type"])])):(0,s.kq)("",!0)])),_:1})])}var Ot={computed:{state(){return this.$store.getters["alert/alert"]}}};const Vt=(0,p.Z)(Ot,[["render",Tt]]);var It=Vt,Ft={components:{Alert:It},data(){return{localUrl:n,isLoading:!1,cookiesCleared:!1,error:{active:!1,message:""},email:"",password:"",emailStatus:{valid:!0,message:""},passwordStatus:{valid:!0,message:""},emailFocus:!1,passwordFocus:!1,showPassword:!1}},methods:{...(0,o.nv)("user",["setIsLoggedIn","setPermissions","setUser"]),validateForm(){return this.emailStatus=Dt(this.email),this.passwordStatus=St(this.password),this.passwordStatus.valid&&this.emailStatus.valid},login(){this.validateForm()&&(this.isLoading=!0,this.error={active:!1,message:""},X.login({email:this.email,password:this.password}).then((t=>{if("AUTHENTICATION_SUCCESSFUL"==t.data.code){this.setUser(t.data.data.user),this.setIsLoggedIn(!0);const e=t.data.data.user.permissions;this.setPermissions(e),this.$router.push("/")}})).catch((t=>{this.$handleApiError(t),"INVALID_CREDENTIALS"==t.response?.data.code&&(this.error={active:!0,message:t.response.data.message}),"NOT_ACTIVE_ERROR"==t.response?.data.code&&(this.error={active:!0,message:t.response.data.message}),"VALIDATION_ERROR"==t.response?.data.code&&(this.emailStatus={valid:!1,message:t.response.data.error["email"][0]},this.passwordStatus={valid:!1,message:t.response.data.error["password"][0]})})).finally((()=>{this.isLoading=!1})),console.log("login..."))},resetError(t){"email"==t&&(this.emailStatus={valid:!0,message:""}),"password"==t&&(this.passwordStatus={valid:!0,message:""})}},mounted(){X.clear().then((()=>{this.cookiesCleared=!0}))}};const Rt=(0,p.Z)(Ft,[["render",Ct]]);var jt=Rt,Nt={name:"login",path:"/login",component:jt,meta:{title:"Login"}},Mt=r(4454),Ht=r(3140);function Yt(t,e,r,a,i,l){const o=(0,s.up)("AppSidebar"),n=(0,s.up)("AppHeader"),d=(0,s.up)("Alert"),w=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)("div",null,[l.isLoggedIn?((0,s.wg)(),(0,s.j4)(Mt.s,{key:0,"full-height":!0},{default:(0,s.w5)((()=>[(0,s.Wm)(o,{active:i.drawer},null,8,["active"]),(0,s.Wm)(n,{onToggleSidebar:l.toggleSidebar},null,8,["onToggleSidebar"]),(0,s.Wm)(d),(0,s.Wm)(Ht.O,{class:"tw-bg-gray-50 tw-min-h-screen tw-overflow-y-auto"},{default:(0,s.w5)((()=>[(0,s.Wm)(at.K,{fluid:"",class:"py-6 px-6"},{default:(0,s.w5)((()=>[(0,s.Wm)(w)])),_:1})])),_:1}),i.showScrollUpButton?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:e[0]||(e[0]=(...t)=>l.scrollToTop&&l.scrollToTop(...t)),class:"tw-fixed tw-shadow tw-text-sm tw-bottom-5 tw-right-3 tw-w-10 tw-h-10 tw-z-10 tw-rounded-full tw-bg-orange-400 tw-text-white"},[(0,s.Wm)(st.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-transfer-up")])),_:1})])):(0,s.kq)("",!0)])),_:1})):(0,s.kq)("",!0)])}var Zt=r(6439),Kt=r(9156);const Bt={class:"tw-flex tw-items-center tw-gap-2"};function Qt(t,e,r,i,l,o){const n=(0,s.up)("Notification"),d=(0,s.up)("HeaderMenu");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(Zt.L,{color:"white",density:"default",elevation:"0",class:"tw-border-b-0 !tw-shadow-lg !tw-shadow-gray-400/10 tw-top-0 !tw-fixed tw-overflow-visible",absolute:!1},(0,s.Nv)({append:(0,s.w5)((()=>[(0,s._)("div",Bt,[(0,s.Wm)(n),(0,s.Wm)(d)])])),default:(0,s.w5)((()=>[(0,s.Wm)(Kt.g,{variant:"text",onClick:e[0]||(e[0]=(0,a.iM)((t=>o.handleClick()),["stop"]))})])),_:2},[void 0]),1024)])}var Gt=r(652),Jt=r(4075),Xt=r(8694),te=r(8793);const ee={class:"tw-relative"},re=(0,s._)("div",{class:"tw-absolute tw-bottom-0 tw-border-2 tw-border-solid tw-border-white tw-right-0 tw-w-3 tw-h-3 tw-rounded-full tw-bg-green-500"},null,-1),ae={key:0,class:"!tw-duration-100"},se={class:"tw-absolute tw-bg-white tw-border tw-border-solid tw-border-neutral-200 tw-rounded-md tw-bordesr !tw-shadow-lg !tw-shadow-gray-400/10 tw-top-14 tw-right-0 tw-w-[200px] tw-min-h-[50px]"},ie={class:"pa-2 d-flex tw-items-center tw-gap-2 tw-border-b tw-border-b-neutral-100"},le={class:"d-flex flex-column justify-center"},oe={class:"tw-text-sm tw-text-neutral-800 text-capitalize"},ne={class:"tw-text-xs tw-rounded-lg tw-text-green-500 text-capitalize"},de=(0,s._)("span",{class:"text-capitalize tw-text-neutral-700 tw-text-xs"}," Profile ",-1),we={class:"d-flex tw-items-center tw-gap-2"},ce=(0,s._)("span",{class:"text-capitalize tw-text-red-700 tw-text-xs"}," Logout ",-1);function ue(t,e,r,a,i,l){return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",ee,[(0,s.Wm)(rt.T,{onClick:l.toggleMenu,icon:"","max-width":"35","max-height":"35"},{default:(0,s.w5)((()=>[(0,s.Wm)(Gt.V,{size:"32"},{default:(0,s.w5)((()=>[(0,s.Wm)(Xt.f,{src:i.localUrl+"assets/img/profiles/avatar.webp"},null,8,["src"])])),_:1}),re])),_:1},8,["onClick"]),(0,s.Wm)($t.Z5,null,{default:(0,s.w5)((()=>[i.isActive?((0,s.wg)(),(0,s.iD)("div",ae,[(0,s._)("div",se,[(0,s._)("div",ie,[(0,s.Wm)(Gt.V,{size:"35"},{default:(0,s.w5)((()=>[(0,s.Wm)(Xt.f,{eager:"",src:i.localUrl+"assets/img/profiles/avatar.webp"},null,8,["src"])])),_:1}),(0,s._)("div",le,[(0,s._)("div",oe,(0,et.zw)(l.user.firstname)+" "+(0,et.zw)(l.user.lastname),1),(0,s._)("div",ne,(0,et.zw)(l.user.role),1)])]),(0,s.Wm)(Jt.J),(0,s._)("div",{onClick:e[0]||(e[0]=(...t)=>l.closeMenu&&l.closeMenu(...t)),class:"d-flex tw-items-center tw-gap-2"},[(0,s.Wm)(rt.T,{block:"",class:"justify-start",variant:"text",color:"gray",ripple:!1},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{class:"mr-2 tw-text-neutral-700"},{default:(0,s.w5)((()=>[(0,s.Uk)(" mdi-account-outline ")])),_:1}),de])),_:1})]),(0,s.Wm)(Jt.J),(0,s._)("div",we,[(0,s.Wm)(rt.T,{onClick:l.logout,block:"",class:"justify-start",variant:"text",color:"gray",ripple:!1},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{class:(0,et.C_)([{"tw-animate-pulse":i.loginOut},"mr-2 tw-text-red-700"])},{default:(0,s.w5)((()=>[(0,s.Uk)((0,et.zw)(i.loginOut?"mdi-power-settings":"mdi-power"),1)])),_:1},8,["class"]),ce])),_:1},8,["onClick"])])])])):(0,s.kq)("",!0)])),_:1})])),[[te.L,l.closeMenu]])}var pe={data(){return{localUrl:n,isActive:!1,loginOut:!1}},methods:{toggleMenu(){this.isActive=!this.isActive},closeMenu(){this.isActive=!1},logout(){this.loginOut=!0,X.logout().then((()=>{this.$store.dispatch("user/logout"),this.$router.push("/login")})).finally((()=>{this.loginOut=!1}))}},computed:{user(){return this.$store.getters["user/user"]}}};const me=(0,p.Z)(pe,[["render",ue]]);var ge=me;function he(t,e,r,a,i,l){const o=(0,s.up)("AdminNotification"),n=(0,s.up)("UserNotification");return(0,s.wg)(),(0,s.iD)("div",null,["admin"==l.user.role?((0,s.wg)(),(0,s.j4)(o,{key:0})):(0,s.kq)("",!0),["agente","delivery"].includes(l.user.role)?((0,s.wg)(),(0,s.j4)(n,{key:1})):(0,s.kq)("",!0)])}const fe={class:"tw-relative"},ve={key:0,class:"tw-absolute tw-border-2 tw-border-solid tw-border-white tw-top-1 tw-right-1 tw-w-3 tw-h-3 tw-rounded-full tw-bg-red-500"},ye={key:0,class:"!tw-duration-100"},xe={class:"tw-absolute tw-text-sm tw-bg-white tw-border tw-border-solid tw-border-neutral-200 tw-rounded-md tw-bordesr !tw-shadow-lg !tw-shadow-gray-400/10 tw-top-14 tw-right-0 tw-w-[230px] tw-min-h-[50px]"},be=(0,s._)("p",{class:"tw-p-2 tw-text-sm"},"Notifications",-1),_e={key:0},ke={class:"tw-py-10 tw-flex tw-items-center tw-justify-center"},Ce={key:1},De=(0,s._)("p",{class:""},"Stock Alert",-1),Se=(0,s._)("p",{class:""},"Delivery Reported",-1),ze=(0,s._)("p",{class:""},"Confirmation Reported",-1);function Ue(t,e,r,a,i,l){const o=(0,s.up)("router-link");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",fe,[(0,s.Wm)(rt.T,{onClick:l.toggleMenu,icon:"",width:"35",height:"35",class:"tw-relative"},{default:(0,s.w5)((()=>[(0,s.Wm)(Xt.f,{width:"22",height:"22",src:i.localUrl+"assets/img/icons/notification-bing.svg"},null,8,["src"]),l.stockAlert.length||l.reportedDeliveries.length||l.reportedConfirmations.length?((0,s.wg)(),(0,s.iD)("div",ve)):(0,s.kq)("",!0)])),_:1},8,["onClick"]),(0,s.Wm)($t.Z5,null,{default:(0,s.w5)((()=>[i.isActive?((0,s.wg)(),(0,s.iD)("div",ye,[(0,s._)("div",xe,[be,i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",_e,[(0,s._)("div",ke,[(0,s.Wm)(st.t,{size:"large",class:"tw-animate-spin",color:"primary-color"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})])])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",Ce,[(0,s.Wm)(o,{to:"/notifications/stock",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-alert-outline")])),_:1}),(0,s._)("div",null,[De,(0,s._)("p",{class:(0,et.C_)([[l.stockAlert.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,et.zw)(l.stockAlert.length)+" "+(0,et.zw)(l.stockAlert.length>1?"products":"product"),3)])])),_:1}),(0,s.Wm)(o,{to:"/sales",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s._)("div",null,[Se,(0,s._)("p",{class:(0,et.C_)([[l.reportedDeliveries.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,et.zw)(l.reportedDeliveries.length)+" today",3)])])),_:1}),(0,s.Wm)(o,{to:"/sales",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s._)("div",null,[ze,(0,s._)("p",{class:(0,et.C_)([[l.reportedConfirmations.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,et.zw)(l.reportedConfirmations.length)+" today",3)])])),_:1})])):(0,s.kq)("",!0)])])):(0,s.kq)("",!0)])),_:1})])),[[te.L,l.closeMenu]])}class Le{async all(){return await $.getCookie(),A.get("api/notifications")}async agente(){return await $.getCookie(),A.get("api/notifications/agente")}async delivery(){return await $.getCookie(),A.get("api/notifications/delivery")}}var Pe=new Le,Ae={data(){return{localUrl:n,isActive:!1,isLoaded:!1}},methods:{toggleMenu(){this.isActive=!this.isActive},closeMenu(){this.isActive=!1},getNotifications(){Pe.all().then((t=>{"SUCCESS"==t.data.code&&(console.log("success"),this.$store.dispatch("notification/setNotifications",t.data.data),this.$store.dispatch("notification/setFetched",!0))}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))}},computed:{user(){return this.$store.getters["user/user"]},notifications(){return this.$store.getters["notification/notifications"]},stockAlert(){return this.notifications["productStockAlert"]||[]},reportedConfirmations(){return this.notifications["reportedOrderAgente"]||[]},reportedDeliveries(){return this.notifications["reportedOrderDelivery"]||[]}},mounted(){this.getNotifications()}};const We=(0,p.Z)(Ae,[["render",Ue]]);var $e=We;const Ee={class:"tw-relative"},qe={key:0,class:"tw-absolute tw-border-2 tw-border-solid tw-border-white tw-top-1 tw-right-1 tw-w-3 tw-h-3 tw-rounded-full tw-bg-red-500"},Te={key:0,class:"!tw-duration-100"},Oe={class:"tw-absolute tw-text-sm tw-bg-white tw-border tw-border-solid tw-border-neutral-200 tw-rounded-md tw-bordesr !tw-shadow-lg !tw-shadow-gray-400/10 tw-top-14 tw-right-0 tw-w-[230px] tw-min-h-[50px]"},Ve=(0,s._)("p",{class:"tw-p-2 tw-text-sm"},"Notifications",-1),Ie={key:0},Fe={class:"tw-py-10 tw-flex tw-items-center tw-justify-center"},Re={key:1},je=(0,s._)("p",{class:""},"Confirmation Reported",-1),Ne=(0,s._)("p",{class:""},"Delivery Reported",-1);function Me(t,e,r,a,i,l){const o=(0,s.up)("router-link");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",Ee,[(0,s.Wm)(rt.T,{onClick:l.toggleMenu,icon:"",width:"35",height:"35",class:"tw-relative"},{default:(0,s.w5)((()=>[(0,s.Wm)(Xt.f,{width:"22",height:"22",src:i.localUrl+"assets/img/icons/notification-bing.svg"},null,8,["src"]),l.reportedDeliveries.length||l.reportedConfirmations.length?((0,s.wg)(),(0,s.iD)("div",qe)):(0,s.kq)("",!0)])),_:1},8,["onClick"]),(0,s.Wm)($t.Z5,null,{default:(0,s.w5)((()=>[i.isActive?((0,s.wg)(),(0,s.iD)("div",Te,[(0,s._)("div",Oe,[Ve,i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Ie,[(0,s._)("div",Fe,[(0,s.Wm)(st.t,{size:"large",class:"tw-animate-spin",color:"primary-color"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})])])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",Re,["agente"==l.user.role?((0,s.wg)(),(0,s.j4)(o,{key:0,to:"/orders",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s._)("div",null,[je,(0,s._)("p",{class:(0,et.C_)([[l.reportedConfirmations.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,et.zw)(l.reportedConfirmations.length)+" today",3)])])),_:1})):(0,s.kq)("",!0),"delivery"==l.user.role?((0,s.wg)(),(0,s.j4)(o,{key:1,to:"/deliveries",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s._)("div",null,[Ne,(0,s._)("p",{class:(0,et.C_)([[l.reportedConfirmations.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,et.zw)(l.reportedConfirmations.length)+" today",3)])])),_:1})):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])])):(0,s.kq)("",!0)])),_:1})])),[[te.L,l.closeMenu]])}var He={data(){return{localUrl:n,isActive:!1,isLoaded:!1}},methods:{toggleMenu(){this.isActive=!this.isActive},closeMenu(){this.isActive=!1},getAgenteNotifications(){Pe.agente().then((t=>{"SUCCESS"==t.data.code&&(console.log("success"),this.$store.dispatch("notification/setNotifications",t.data.data),this.$store.dispatch("notification/setFetched",!0))}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))},getDeliveryNotifications(){Pe.delivery().then((t=>{"SUCCESS"==t.data.code&&(console.log("success"),this.$store.dispatch("notification/setNotifications",t.data.data),this.$store.dispatch("notification/setFetched",!0))}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))}},computed:{user(){return this.$store.getters["user/user"]},notifications(){return this.$store.getters["notification/notifications"]},stockAlert(){return this.notifications["productStockAlert"]||[]},reportedConfirmations(){return this.notifications["reportedOrderAgente"]||[]},reportedDeliveries(){return this.notifications["reportedOrderDelivery"]||[]}},mounted(){"agente"==this.user.role&&this.getAgenteNotifications(),"delivery"==this.user.role&&this.getDeliveryNotifications()}};const Ye=(0,p.Z)(He,[["render",Me]]);var Ze=Ye,Ke={components:{AdminNotification:$e,UserNotification:Ze},computed:{user(){return this.$store.getters["user/user"]}}};const Be=(0,p.Z)(Ke,[["render",he]]);var Qe=Be,Ge={emits:["toggleSidebar"],components:{HeaderMenu:ge,Notification:Qe},data(){return{localUrl:n}},computed:{},methods:{handleClick(){this.$emit("toggleSidebar")}}};const Je=(0,p.Z)(Ge,[["render",Qt]]);var Xe=Je,tr=r(9457),er=r(2329),rr=r(9657);function ar(t,e,r,a,i,l){const o=(0,s.up)("SidebarItem");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(rr.V,{modelValue:i.drawer,"onUpdate:modelValue":e[0]||(e[0]=t=>i.drawer=t),location:"left",absolute:!1,class:"!tw-top-0 !tw-fixed"},{default:(0,s.w5)((()=>[(0,s.Wm)(tr.l,{class:"tw-py-3"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(Xt.f,{width:"140",src:i.localUrl+"assets/img/logo.png"},null,8,["src"])])])),_:1}),(0,s.Wm)(er.i,{class:"mt-2",nav:""},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.links,(t=>((0,s.wg)(),(0,s.j4)(o,{key:t.id,link:t},null,8,["link"])))),128))])),_:1})])),_:1},8,["modelValue"])])}const sr=[4,6,7],ir=[{id:1,title:"Dashboard",module:"dashboard",to:"/",hasChildren:!1,gate:"all",icon:{type:"svg",value:"assets/img/icons/dashboard.svg"}},{id:2,module:"product",title:"Product",hasChildren:!0,gate:"access_to_products",icon:{type:"svg",value:"assets/img/icons/product.svg"},children:[{id:1,title:"Products List",subModule:"product/list",gate:"show_all_products",to:"/products"},{id:2,title:"Add Product",subModule:"product/add",gate:"create_product",to:"/products/add"}]},{id:3,module:"track",title:"Tracking",hasChildren:!0,gate:"none",icon:{type:"icon",value:"mdi-radar"},children:[{id:1,title:"Deliveries",subModule:"track/delivery",gate:"none",to:"/tracking/delivery"}]},{id:4,module:"sale",title:"Sales",hasChildren:!0,gate:"access_to_sales",icon:{type:"icon",value:"mdi-sale"},children:[{id:1,title:"Sales list",subModule:"sale/list",gate:"show_all_sales",to:"/sales"},{id:2,title:"Expidation",subModule:"sale/expidation",gate:"show_all_expidations",to:"/sales/expidation"},{id:3,title:"Shipping",subModule:"sale/shipping",gate:"show_all_expidations",to:"/sales/shipping"},{id:4,title:"Follow Up",subModule:"sale/followup",gate:"show_all_expidations",to:"/sales/followup"}]},{id:5,module:"factorisation",title:"Factorisation",hasChildren:!0,gate:"access_to_factorisations",icon:{type:"icon",value:"mdi-note-multiple"},children:[{id:1,title:"Factorisation list",subModule:"factorisation/list",gate:"show_all_factorisations",to:"/factorisations"}]},{id:6,module:"order",title:"Orders",hasChildren:!0,gate:"access_to_orders",icon:{type:"icon",value:"mdi-barcode-scan"},children:[{id:1,title:"Order",subModule:"order/show",gate:"show_all_orders",to:"/order"},{id:2,title:"My Orders",subModule:"order/list",gate:"show_all_orders",to:"/orders"},{id:3,title:"Confirmed Orders",subModule:"order/confirmed",gate:"show_all_orders",to:"/orders/confirmed"}]},{id:7,module:"delivery",title:"Orders",hasChildren:!0,gate:"access_to_delivery",icon:{type:"icon",value:"mdi-bike"},children:[{id:1,title:"Orders List",subModule:"delivery/list",gate:"show_all_deliveries",to:"/deliveries"},{id:2,title:"Orders Delivered",subModule:"delivery/delivered",gate:"show_all_deliveries",to:"/delivered"}]},{id:8,module:"inventory",title:"Inventory",hasChildren:!0,gate:"access_to_inventory",icon:{type:"icon",value:"mdi-warehouse"},children:[{id:1,title:"Inventory State",gate:"show_all_inventory_states",subModule:"inventory/state",to:"/inventories"},{id:2,title:"Inventory Movements",gate:"show_all_inventory_movements",subModule:"inventory/movements",to:"/inventories/movements"},{id:4,title:"Add Movement",gate:"create_inventory_movement",subModule:"inventory/add",to:"/inventories/add"}]},{id:9,module:"shop",title:"Shop",hasChildren:!0,gate:"access_to_shop",icon:{type:"icon",value:"mdi-store"},children:[{id:1,title:"Shop List",gate:"show_all_shops",subModule:"shop/list",to:"/shops"},{id:2,title:"Add Shop",gate:"create_shop",subModule:"shop/add",to:"/shops/add"}]},{id:10,module:"warehouse",title:"Warehouses",hasChildren:!0,gate:"access_to_warehouse",icon:{type:"icon",value:"mdi-home-group"},children:[{id:1,title:"Warehouses list",subModule:"warehouse/list",gate:"show_all_warehouses",to:"/warehouses"}]},{id:11,title:"Users",module:"user",gate:"access_to_users",hasChildren:!0,icon:{type:"svg",value:"assets/img/icons/users1.svg"},children:[{id:1,title:"Users List",subModule:"user/list",gate:"show_all_users",to:"/users"},{id:2,title:"Add User",subModule:"user/add",gate:"create_user",to:"/users/add"},{id:3,title:"Roles List",subModule:"user/roles",gate:"show_all_roles",to:"/users/roles"},{id:4,title:"Add Role",subModule:"user/addRole",gate:"create_role",to:"/users/addRole"}]},{id:15,title:"Sheets",module:"sheets",to:"/sheets",gate:"access_to_sheets",hasChildren:!1,icon:{type:"icon",value:"mdi-note-text-outline"}},{id:12,title:"Settings",module:"settings",to:"/settings",gate:"access_to_account",hasChildren:!1,icon:{type:"svg",value:"assets/img/icons/settings.svg"}},{id:13,title:"Orders",module:"followup",to:"/followup",hasChildren:!1,gate:"follow_up_orders",icon:{type:"icon",value:"mdi-package-variant-closed"}}];var lr=r(9234),or=r(2127);const nr={key:0},dr={class:"d-flex align-center"},wr={class:"tw-rounded-md tw-bg-gray-50"},cr={class:"tw-h-full py-2"},ur={key:1},pr={key:2},mr={key:3};function gr(t,e,r,a,i,l){const o=(0,s.up)("SidebarSales"),n=(0,s.up)("SidebarDelivery"),d=(0,s.up)("SidebarAgente");return(0,s.wg)(),(0,s.iD)("div",null,[!t.$can(r.link.gate)&&"all"!=r.link.gate||i.disabled_links.includes(r.link.id)?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",nr,[(0,s.Wm)(tr.l,{class:(0,et.C_)(["mx-3 mb-2",{"bg-secondary-color":i.isActive}]),onClick:e[0]||(e[0]=t=>l.handleClick()),density:"comfortable",active:!1,ripple:!1,to:r.link.hasChildren?"":r.link.to,link:""},{default:(0,s.w5)((()=>[(0,s._)("div",dr,["icon"==r.link.icon.type?((0,s.wg)(),(0,s.j4)(st.t,{key:0,icon:r.link.icon.value,color:i.isActive?"white":"grey-darken-2",class:"mr-2",size:"small"},null,8,["icon","color"])):(0,s.kq)("",!0),"svg"==r.link.icon.type?((0,s.wg)(),(0,s.j4)(Xt.f,{key:1,src:i.localUrl+r.link.icon.value,"max-width":"18",class:(0,et.C_)([{active:i.isActive},"mr-2 tw-fill-white"]),size:"small"},null,8,["src","class"])):(0,s.kq)("",!0),(0,s.Wm)(or.V,{class:(0,et.C_)(["text-body-2 font-weight-regular",{"text-white":i.isActive}]),textContent:(0,et.zw)(r.link.title)},null,8,["class","textContent"]),(0,s.Wm)(lr.C),r.link.hasChildren?((0,s.wg)(),(0,s.j4)(st.t,{key:2,class:(0,et.C_)(["item-icon",{activeRotate:i.isActive}]),icon:"mdi-chevron-right"},null,8,["class"])):(0,s.kq)("",!0)])])),_:1},8,["class","to"]),r.link.hasChildren?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,et.C_)([{"!tw-max-h-[1000px] mb-2 mt-n3":i.isActive},"tw-max-h-0 tw-w-auto mx-3 tw-overflow-hidden tw-duration-300"])},[(0,s._)("div",wr,[(0,s.Wm)(er.i,{density:"compact"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allowedChildren,(t=>((0,s.wg)(),(0,s.j4)(tr.l,{key:t.id,link:"",exact:"",active:!1,to:t.to,height:"10",class:"!tw-h-fit !tw-py-0"},{default:(0,s.w5)((()=>[(0,s._)("div",cr,[(0,s.Wm)(st.t,{size:"x-small",class:"mr-2",color:l.isSublinkActive(t)?"primary-color":"secondary-color",icon:l.isSublinkActive(t)?"mdi-chevron-double-right":"mdi-circle-medium"},null,8,["color","icon"]),(0,s._)("span",{class:(0,et.C_)(["tw-text-sm",{"text-primary-color":l.isSublinkActive(t)}])},(0,et.zw)(t.title),3)])])),_:2},1032,["to"])))),128))])),_:1})])],2)):(0,s.kq)("",!0)])),4==r.link.id?((0,s.wg)(),(0,s.iD)("div",ur,[(0,s.Wm)(o)])):(0,s.kq)("",!0),7==r.link.id?((0,s.wg)(),(0,s.iD)("div",pr,[(0,s.Wm)(n)])):(0,s.kq)("",!0),8==r.link.id?((0,s.wg)(),(0,s.iD)("div",mr,[(0,s.Wm)(d)])):(0,s.kq)("",!0)])}const hr={key:0},fr={class:"d-flex align-center"},vr={class:"tw-w-fit tw-h-[24px] tw-flex tw-items-center tw-justify-center tw-px-1 tw-bg-orange-500 tw-text-sm tw-text-white tw-rounded tw-ml-2"},yr={key:1,class:"tw-text-xs"},xr={class:"tw-rounded-md tw-bg-gray-50"},br={class:"tw-h-full py-2"};function _r(t,e,r,a,i,l){return t.$can(i.link.gate)||"all"==i.link.gate?((0,s.wg)(),(0,s.iD)("div",hr,[(0,s.Wm)(tr.l,{class:(0,et.C_)(["mx-3 mb-2",{"bg-secondary-color":i.isActive}]),onClick:e[0]||(e[0]=t=>l.handleClick()),density:"comfortable",active:!1,ripple:!1,to:i.link.hasChildren?"":i.link.to,link:""},{default:(0,s.w5)((()=>[(0,s._)("div",fr,["icon"==i.link.icon.type?((0,s.wg)(),(0,s.j4)(st.t,{key:0,icon:i.link.icon.value,color:i.isActive?"white":"grey-darken-2",class:"mr-2",size:"small"},null,8,["icon","color"])):(0,s.kq)("",!0),"svg"==i.link.icon.type?((0,s.wg)(),(0,s.j4)(Xt.f,{key:1,src:i.localUrl+i.link.icon.value,"max-width":"18",class:(0,et.C_)([{active:i.isActive},"mr-2 tw-fill-white"]),size:"small"},null,8,["src","class"])):(0,s.kq)("",!0),(0,s.Wm)(or.V,{class:(0,et.C_)(["text-body-2 font-weight-regular",{"text-white":i.isActive}]),textContent:(0,et.zw)(i.link.title)},null,8,["class","textContent"]),(0,s._)("div",vr,[(i.isLoaded,(0,s.kq)("",!0)),(i.isLoaded,(0,s.wg)(),(0,s.iD)("p",yr,(0,et.zw)(l.count),1))]),(0,s.Wm)(lr.C),i.link.hasChildren?((0,s.wg)(),(0,s.j4)(st.t,{key:2,class:(0,et.C_)(["item-icon",{activeRotate:i.isActive}]),icon:"mdi-chevron-right"},null,8,["class"])):(0,s.kq)("",!0)])])),_:1},8,["class","to"]),i.link.hasChildren?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,et.C_)([{"!tw-max-h-[1000px] mb-2 mt-n3":i.isActive},"tw-max-h-0 tw-w-auto mx-3 tw-overflow-hidden tw-duration-300"])},[(0,s._)("div",xr,[(0,s.Wm)(er.i,{density:"compact"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allowedChildren,(t=>((0,s.wg)(),(0,s.j4)(tr.l,{key:t.id,link:"",exact:"",active:!1,to:t.to,height:"10",class:"!tw-h-fit !tw-py-0"},{default:(0,s.w5)((()=>[(0,s._)("div",br,[(0,s.Wm)(st.t,{size:"x-small",class:"mr-2",color:l.isSublinkActive(t)?"primary-color":"secondary-color",icon:l.isSublinkActive(t)?"mdi-chevron-double-right":"mdi-circle-medium"},null,8,["color","icon"]),(0,s._)("span",{class:(0,et.C_)(["tw-text-sm",{"text-primary-color":l.isSublinkActive(t)}])},(0,et.zw)(t.title),3)])])),_:2},1032,["to"])))),128))])),_:1})])],2)):(0,s.kq)("",!0)])):(0,s.kq)("",!0)}var kr={props:[],data(){return{localUrl:n,isActive:!1,isLoaded:!1,link:{id:4,module:"sale",title:"Sales",hasChildren:!0,gate:"access_to_sales",icon:{type:"icon",value:"mdi-sale"},children:[{id:4,title:"New Sales list",subModule:"sale/newlist",gate:"show_all_sales",to:"/sales/new"},{id:2,title:"Expidation",subModule:"sale/expidation",gate:"show_all_expidations",to:"/sales/expidation"},{id:3,title:"Shipping",subModule:"sale/shipping",gate:"show_all_expidations",to:"/sales/shipping"},{id:4,title:"Follow Up",subModule:"sale/followup",gate:"show_all_expidations",to:"/sales/followup"}]}}},methods:{handleClick(){this.$route.path!==this.link.to?this.isActive=!this.isActive:this.isActive=!0},isSublinkActive(t){return this.$route.path==t.to},isLinkActive(){return this.link.hasChildren?this.link.module==this.$route.meta.module:this.link.to===this.$route.path}},computed:{allowedChildren(){return this.link?.children.filter((t=>this.$can(t.gate)||"all"===t.gate))},sales(){return this.$store.getters["sale/sales"]},count(){return this.$store.getters["sale/count"]}},watch:{$route(){this.isActive=this.isLinkActive()}},mounted(){this.isActive=this.isLinkActive()}};const Cr=(0,p.Z)(kr,[["render",_r],["__scopeId","data-v-419eeb7c"]]);var Dr=Cr;const Sr={key:0},zr={class:"d-flex align-center"},Ur={class:"tw-w-fit tw-h-[24px] tw-flex tw-items-center tw-justify-center tw-px-1 tw-bg-orange-500 tw-text-sm tw-text-white tw-rounded tw-ml-2"},Lr={key:1,class:"tw-text-xs"};function Pr(t,e,r,a,i,l){return t.$can(i.link.gate)||"all"==i.link.gate?((0,s.wg)(),(0,s.iD)("div",Sr,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.link.children,(r=>((0,s.wg)(),(0,s.j4)(tr.l,{class:(0,et.C_)(["mx-3 mb-2",{"bg-secondary-color":t.$route.path==r.to}]),onClick:e[0]||(e[0]=t=>l.handleClick()),density:"comfortable",active:!1,ripple:!1,to:r.to,link:"",key:r.id},{default:(0,s.w5)((()=>[(0,s._)("div",zr,[(0,s.Wm)(st.t,{icon:r.icon,color:t.$route.path==r.to?"white":"grey-darken-2",class:"mr-2",size:"small"},null,8,["icon","color"]),(0,s.Wm)(or.V,{class:(0,et.C_)(["text-body-2 font-weight-regular",{"text-white":t.$route.path==r.to}]),textContent:(0,et.zw)(r.title)},null,8,["class","textContent"]),(0,s.Wm)(lr.C),(0,s._)("div",Ur,[l.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(st.t,{key:0,color:"white",class:"tw-animate-spin",size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})),l.fetched?((0,s.wg)(),(0,s.iD)("p",Lr,(0,et.zw)(1==r.id?l.orders.length-l.deliveredOrders.length:l.deliveredOrders.length),1)):(0,s.kq)("",!0)])])])),_:2},1032,["class","to"])))),128))])):(0,s.kq)("",!0)}class Ar{async delivery(){return await $.getCookie(),A.get("api/dashboard/delivery")}async agente(){return await $.getCookie(),A.get("api/dashboard/agente")}}var Wr=new Ar,$r={props:[],data(){return{localUrl:n,isActive:!1,isLoaded:!1,link:{id:7,module:"delivery",title:"Orders",hasChildren:!1,gate:"access_to_delivery",icon:{type:"icon",value:"mdi-bike"},children:[{id:1,title:"Orders",subModule:"delivery/list",gate:"show_all_deliveries",to:"/deliveries",icon:"mdi-truck"},{id:2,title:"Delivered Orders",subModule:"delivery/delivered",gate:"show_all_deliveries",to:"/delivered",icon:"mdi-truck-check"}]}}},methods:{handleClick(){this.$route.path!==this.link.to?this.isActive=!this.isActive:this.isActive=!0},isSublinkActive(t){return this.$route.path==t.to},isLinkActive(){return this.link.hasChildren?this.link.module==this.$route.meta.module:this.link.to===this.$route.path},getOrders(){return this.isLoaded=!1,Wr.delivery().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("order/setAllOrders",e),this.$store.dispatch("order/setFetched",!0),this.isLoaded=!0}console.log(t)})).catch(this.$handleApiError)}},computed:{allowedChildren(){return this.link?.children.filter((t=>this.$can(t.gate)||"all"===t.gate))},orders(){return this.$store.getters["order/allOrders"].filter((t=>"confirmer"==t.confirmation))},deliveredOrders(){return this.orders.filter((t=>"livrer"==t.delivery))},fetched(){return this.$store.getters["order/fetched"]}},watch:{$route(){this.isActive=this.isLinkActive()}},mounted(){this.isActive=this.isLinkActive(),this.$can(this.link.gate)&&this.getOrders()}};const Er=(0,p.Z)($r,[["render",Pr],["__scopeId","data-v-69fa82e9"]]);var qr=Er;const Tr={key:0},Or={class:"d-flex align-center"},Vr={key:0,class:"tw-w-fit tw-h-[24px] tw-flex tw-items-center tw-justify-center tw-px-1 tw-bg-orange-500 tw-text-sm tw-text-white tw-rounded tw-ml-2"},Ir={key:1,class:"tw-text-xs"},Fr={key:1,class:"tw-w-fit tw-h-[24px] tw-flex tw-items-center tw-justify-center tw-px-1 tw-bg-orange-500 tw-text-sm tw-text-white tw-rounded tw-ml-2"},Rr={key:1,class:"tw-text-xs"};function jr(t,e,r,a,i,l){return t.$can(i.link.gate)||"all"==i.link.gate?((0,s.wg)(),(0,s.iD)("div",Tr,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.link.children,(r=>((0,s.wg)(),(0,s.j4)(tr.l,{class:(0,et.C_)(["mx-3 mb-2",{"bg-secondary-color":t.$route.path==r.to}]),onClick:e[0]||(e[0]=t=>l.handleClick()),density:"comfortable",active:!1,ripple:!1,to:r.to,link:"",key:r.id},{default:(0,s.w5)((()=>[(0,s._)("div",Or,[(0,s.Wm)(st.t,{icon:r.icon,color:t.$route.path==r.to?"white":"grey-darken-2",class:"mr-2",size:"small"},null,8,["icon","color"]),(0,s.Wm)(or.V,{class:(0,et.C_)(["text-body-2 font-weight-regular",{"text-white":t.$route.path==r.to}]),textContent:(0,et.zw)(r.title)},null,8,["class","textContent"]),(0,s.Wm)(lr.C),1!=r.id?((0,s.wg)(),(0,s.iD)("div",Vr,[l.state.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(st.t,{key:0,color:"white",class:"tw-animate-spin",size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})),l.state.fetched?((0,s.wg)(),(0,s.iD)("p",Ir,(0,et.zw)(4==r.id?l.state.totalNotConfirmed:l.state.totalConfirmed),1)):(0,s.kq)("",!0)])):(0,s.kq)("",!0),1==r.id?((0,s.wg)(),(0,s.iD)("div",Fr,[l.state.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(st.t,{key:0,color:"white",class:"tw-animate-spin",size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})),l.state.fetched?((0,s.wg)(),(0,s.iD)("p",Rr,(0,et.zw)(l.state.totalAvailable),1)):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])])),_:2},1032,["class","to"])))),128))])):(0,s.kq)("",!0)}var Nr={props:[],data(){return{localUrl:n,isActive:!1,isLoaded:!1,link:{id:6,module:"order",title:"Orders",hasChildren:!0,gate:"access_to_orders",icon:{type:"icon",value:"mdi-barcode-scan"},children:[{id:1,title:"Add Order",subModule:"agent/orders/add",gate:"show_all_orders",to:"/agent/orders/add",icon:"mdi-plus-box"},{id:4,title:"Orders",subModule:"agent/orders",gate:"show_all_orders",to:"/agent/orders",icon:"mdi-package-variant-closed"},{id:5,title:"Confirmed Orders",subModule:"agent/orders/confirmed",gate:"show_all_orders",to:"/agent/orders/confirmed",icon:"mdi-checkbox-marked"}]}}},methods:{handleClick(){this.$route.path!==this.link.to?this.isActive=!this.isActive:this.isActive=!0},isSublinkActive(t){return this.$route.path==t.to},isLinkActive(){return this.link.hasChildren?this.link.module==this.$route.meta.module:this.link.to===this.$route.path}},computed:{allowedChildren(){return this.link?.children.filter((t=>this.$can(t.gate)||"all"===t.gate))},state(){return this.$store.getters["agent/state"]},orders(){return this.$store.getters["order/allOrders"]},myOrders(){return this.orders.filter((t=>"confirmer"!=t.confirmation))},confirmedOrders(){return this.orders.filter((t=>"confirmer"==t.confirmation))},fetched(){return this.$store.getters["order/fetched"]}},watch:{$route(){this.isActive=this.isLinkActive()}},mounted(){this.isActive=this.isLinkActive()}};const Mr=(0,p.Z)(Nr,[["render",jr],["__scopeId","data-v-26146d6f"]]);var Hr=Mr,Yr={props:["link"],components:{SidebarSales:Dr,SidebarDelivery:qr,SidebarAgente:Hr},data(){return{localUrl:n,disabled_links:sr,isActive:!1}},methods:{handleClick(){this.$route.path!==this.link.to?this.isActive=!this.isActive:this.isActive=!0},isSublinkActive(t){return this.$route.path==t.to},isLinkActive(){return this.link.hasChildren?this.link.module==this.$route.meta.module:this.link.to===this.$route.path}},computed:{allowedChildren(){return this.link?.children.filter((t=>this.$can(t.gate)||"all"===t.gate))}},watch:{$route(){this.isActive=this.isLinkActive()}},mounted(){this.isActive=this.isLinkActive()}};const Zr=(0,p.Z)(Yr,[["render",gr],["__scopeId","data-v-35ca0437"]]);var Kr=Zr,Br={components:{SidebarItem:Kr},props:["active"],data(){return{localUrl:n,drawer:!0,links:ir}},computed:{},watch:{active(){this.drawer=!this.drawer}},methods:{},mounted(){this.$vuetify.display.mdAndDown&&(this.drawer=!1)}};const Qr=(0,p.Z)(Br,[["render",ar]]);var Gr=Qr,Jr=r(4410),Xr=r.n(Jr),ta=r(6027);class ea{async all(){return await $.getCookie(),A.get("api/sheets")}async create(t){await $.getCookie();const e={name:t.name,sheet_id:t.sheet_id,sheet_name:t.sheet_name,auto_fetch:t.auto_fetch};return A.post("api/sheets",e)}async update(t,e){await $.getCookie();const r={name:e.name,sheet_id:e.sheet_id,sheet_name:e.sheet_name,auto_fetch:e.auto_fetch};return A.post("api/sheets/"+t,r)}async delete(t){return await $.getCookie(),A["delete"]("api/sheets/"+t)}async updateAutoFetch(t,e){return await $.getCookie(),A.post("api/sheets/"+t+"/auto-fetch",{autoFetch:e})}async sync(t){return await $.getCookie(),A.get("api/sync/"+t)}async sync_all(){return await $.getCookie(),A.get("api/sync")}async auto(){return await $.getCookie(),A.post("api/sync")}async saveOrders(t){return await $.getCookie(),A.get("api/sync/"+t+"/save")}}var ra=new ea;class aa{async create(t){await $.getCookie();const e=new FormData;return e.append("name",t.name),e.append("buying_price",t.buyingPrice),e.append("selling_price",t.sellingPrice),e.append("ref",t.reference),e.append("variations",JSON.stringify(t.variants)),e.append("offers",JSON.stringify(t.offers)),e.append("description",t.description),e.append("image",t.image),e.append("deliveries",JSON.stringify(t.selectedDeliveries)),e.append("status",1),P.post("api/products/new",e)}async update(t,e){await $.getCookie();const r=new FormData;return r.append("name",e.name),r.append("buying_price",e.buyingPrice),r.append("selling_price",e.sellingPrice),r.append("ref",e.reference),r.append("variations",JSON.stringify(e.variants)),r.append("offers",JSON.stringify(e.offers)),r.append("description",e.description),r.append("image",e.image),r.append("deliveries",JSON.stringify(e.selectedDeliveries)),r.append("status",1),P.post("api/products/update/"+t,r)}async all(){return await $.getCookie(),A.get("api/products")}async allForOrder(){return await $.getCookie(),A.get("api/products/for-order")}async getProduct(t){return await $.getCookie(),A.get("api/products/"+t)}async delete(t){return await $.getCookie(),A["delete"]("api/products/delete/"+t)}async stockAlert(){return await $.getCookie(),A.get("api/product/stockAlert")}}var sa=new aa;class ia{async all(){return await $.getCookie(),A.get("api/sales")}async delete(t){return await $.getCookie(),A.get("api/sales/delete/"+t)}async update(t,e){return await $.getCookie(),A.post("api/orders/update/"+t,e)}async create(t){return await $.getCookie(),A.post("api/sales/new",t)}async getNewOrders(t){return await $.getCookie(),A.post("api/sales/fresh",{ids:t})}async agenteOrders(){return await $.getCookie(),A.get("api/orders")}async agenteConfirmedOrders(){return await $.getCookie(),A.get("api/orders/confirmer")}async agenteAddOrder(){return await $.getCookie(),A.get("api/orders/add")}async agenteGetOrder(){return await $.getCookie(),A.get("api/orders/toconfirmate")}async agenteUpdateConfirmation(t,e,r={}){return await $.getCookie(),A.post("api/orders/update/confirmation/"+t,{confirmation:e,...r})}async agenteUpdateConfirmationWithNote(t,e,r){return await $.getCookie(),A.post("api/orders/update/confirmationandnote/"+t,{confirmation:e,note:r})}async agenteUpdateUpsell(t,e){return await $.getCookie(),A.post("api/orders/update/upsell/"+t,{upsell:e})}async agenteUpdateAffectaion(t,e){return await $.getCookie(),A.post("api/orders/update/affectation/"+t,{affectation:e})}async agenteUpdateNote(t,e){return await $.getCookie(),A.post("api/orders/update/note/"+t,{note:e})}async deliveryOrders(){return await $.getCookie(),A.get("api/orders/todelivery")}async deliveryDeliveredOrders(){return await $.getCookie(),A.get("api/orders/delivred")}async deliveryUpdateDelivery(t,e,r){return await $.getCookie(),A.post("api/orders/update/delivery/"+t,{delivery:e,...r})}async history(t){return await $.getCookie(),A.get("api/orders/history/show/"+t)}async resetSale(t){return await $.getCookie(),A.post("api/sales/reset",{ids:t})}async scanSale(t){return await $.getCookie(),A.post("api/sales/scan",t)}async availableOrders(){return await $.getCookie(),A.get("api/orders/count")}}var la=new ia,oa={components:{AppHeader:Xe,AppSidebar:Gr,Alert:It},data(){return{drawer:!1,subscribed:!1,fetching:null,delay:6e4,showScrollUpButton:!1,firstFetch:!1}},computed:{isLoggedIn(){return this.$store.getters["user/isLoggedIn"]},cities(){return this.$store.getters["city/cities"]},user(){return this.$store.getters["user/user"]},sales(){return this.$store.getters["sale/sales"]},salesFetched(){return this.$store.getters["sale/fetched"]}},methods:{toggleSidebar(){this.drawer=!this.drawer},checkScroll(){this.showScrollUpButton=window.scrollY>100},scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})},async getCities(){if(0==this.cities.length||1!=localStorage.getItem("update_cities"))return X.cities().then((t=>{const e=t.data.data;this.$store.dispatch("city/setCities",e),localStorage.setItem("update_cities",1)}))},subscribe(){console.log(Xr());const t=new ta.Z({broadcaster:"pusher",key:"ABCDEFG",wsHost:"127.0.0.1",wsPort:6001,forceTLS:!1,disableStats:!0,cluster:"mt1"});window.Echo=t,t.channel("notification").listenToAll((t=>{console.log(t)})),this.subscribed=!0},sync_sheets(){"admin"==this.user.role?ra.sync_all().then((t=>{if("SUCCESS"==t.data.code){const e=[...t.data.data.orders,...this.sales];this.$store.dispatch("sale/setSales",e),t.data.data.orders.length>0&&this.$alert({type:"info",title:t.data.data.orders.length+" New orders has been added"})}})):ra.auto()},getUsers(){X.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),this.$store.dispatch("user/setFetched",!0)}})).catch(this.$handleApiError)},getProducts(){return sa.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))},fetchNewOrders(){if(this.salesFetched||!this.firstFetch){const t=this.sales.map((t=>t.id));return la.getNewOrders(t).then((t=>{if("SUCCESS"==t.data.code){const e=t.data.data.orders,r=t.data.data.count;this.$store.dispatch("sale/setCount",r),e.length>0&&(this.$store.dispatch("sale/addSales",e),this.$alert({type:"info",title:e.length+" New orders has been added"})),this.firstFetch=!0}}))}},getSales(){return this.isLoaded=!1,la.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)}},watch:{$route(){"agente"==this.user.role&&this.$store.dispatch("agent/refreshCounts")}},mounted(){this.getCities(),"admin"==this.user.role&&this.fetchNewOrders(),this.$can("show_all_products")&&this.getProducts(),"agente"==this.user.role&&this.$store.dispatch("agent/refreshCounts"),this.getUsers(),window.addEventListener("scroll",this.checkScroll)},unmounted(){window.removeEventListener("scroll",this.checkScroll)}};const na=(0,p.Z)(oa,[["render",Yt]]);var da=na;const wa={key:0};function ca(t,e,r,a,i,l){return i.exists?((0,s.wg)(),(0,s.iD)("div",wa,[((0,s.wg)(),(0,s.j4)((0,s.LL)(l.dashboard)))])):(0,s.kq)("",!0)}var ua=r(6824),pa=r(8521);const ma={key:0},ga={key:1},ha=(0,s._)("div",{class:"mb-2 mt-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h2",{class:"tw-text-gray-500 tw-text-lg"},"Online")])],-1),fa={class:"py-2 px-2 tw-border bg-white tw-w-full tw-rounded"},va={class:"mb-2 mt-2 tw-flex tw-justify-between tw-items-center tw-w-full"},ya={class:"tw-flex tw-items-center tw-justify-between tw-w-full"},xa=(0,s._)("h2",{class:"tw-text-gray-500 tw-text-lg"},"Statistiques",-1),ba=["disabled"],_a={key:0,class:"tw-flex tw-items-center tw-gap-2"},ka={key:1},Ca=(0,s._)("svg",{"aria-hidden":"true",role:"status",class:"tw-inline tw-w-4 tw-h-4 tw-mr-3 tw-text-white tw-animate-spin",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s._)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"#E5E7EB"}),(0,s._)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentColor"})],-1),Da={class:"px-5 tw-border bg-white tw-w-full tw-rounded-md"};function Sa(t,e,r,a,i,l){const o=(0,s.up)("LoadingAnimation"),n=(0,s.up)("UsersTable"),d=(0,s.up)("FilterTabs"),w=(0,s.up)("DashItem"),c=(0,s.up)("TabSwitcher");return(0,s.wg)(),(0,s.iD)("div",null,[l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",ma,[(0,s.Wm)(o)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",ga,[ha,(0,s._)("div",fa,[(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(n)])),_:1})])),_:1})]),(0,s._)("div",va,[(0,s._)("div",ya,[xa,(0,s._)("button",{disabled:i.updating,onClick:e[0]||(e[0]=(...t)=>l.updateSales&&l.updateSales(...t)),type:"button",class:"tw-text-white tw-w-fit tw-my-2 tw-bg-gradient-to-r tw-from-cyan-500 tw-to-blue-500 hover:tw-bg-gradient-to-bl focus:tw-ring-4 focus:tw-outline-none focus:tw-ring-cyan-300 dark:focus:tw-ring-cyan-800 tw-font-medium tw-rounded-lg tw-text-sm tw-px-5 tw-py-2.5 tw-text-center tw-mr-2 dark:tw-bg-blue-600 dark:hover:tw-bg-blue-700 tw-duration-200 tw-gap-2 tw-pointer-events-auto tw-inline-flex tw-items-center"},[i.updating?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",_a,[(0,s.Wm)(st.t,{class:"tw-text-sm",color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s.Uk)(" Refresh ")])),i.updating?((0,s.wg)(),(0,s.iD)("div",ka,[Ca,(0,s.Uk)(" loading... ")])):(0,s.kq)("",!0)],8,ba)])]),(0,s._)("div",Da,[(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{filters:i.filters,"onUpdate:filters":e[1]||(e[1]=t=>i.filters=t)},null,8,["filters"])])),_:1})])),_:1}),(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{cols:"12",sm:"6",md:"3"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{dash:l.dashChiffreAffaires},null,8,["dash"])])),_:1}),(0,s.Wm)(pa.D,{cols:"12",sm:"6",md:"3"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{dash:l.dashChiffreAffairesVerse},null,8,["dash"])])),_:1}),(0,s.Wm)(pa.D,{cols:"12",sm:"6",md:"3"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{dash:l.dashChiffreAffairesNonVerse},null,8,["dash"])])),_:1}),(0,s.Wm)(pa.D,{cols:"12",sm:"6",md:"3"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{dash:l.dashChiffreAffairesEnCaisse},null,8,["dash"])])),_:1})])),_:1}),(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{"filtered-sales":l.filteredSales},null,8,["filtered-sales"])])),_:1})])),_:1})])])):(0,s.kq)("",!0)])}var za=r(4286);const Ua={class:"tw-flex tw-items-center"},La={class:"tw-flex tw-flex-col tw-h-full tw-text-neutral-600"},Pa={class:"tw-text-lg tw-font-bold"},Aa={class:"tw-text-sm"};function Wa(t,e,r,a,i,l){return(0,s.wg)(),(0,s.j4)(za.C,{class:"tw-rounded-lg tw-border pa-5 py-2",color:"white",height:"fit"},{default:(0,s.w5)((()=>[(0,s._)("div",Ua,[(0,s._)("div",{class:(0,et.C_)([l.bgColor,"pa-3 rounded-circle tw-w-fit tw-mr-3"])},[(0,s.Wm)(st.t,{color:r.dash.color,size:"large",icon:r.dash.icon},null,8,["color","icon"])],2),(0,s._)("div",La,[(0,s._)("p",Pa,(0,et.zw)(r.dash.value),1),(0,s.Wm)(lr.C),(0,s._)("p",Aa,(0,et.zw)(r.dash.title),1)])])])),_:1})}var $a={props:["dash"],computed:{bgColor(){const t={orange:"tw-bg-orange-500/10",green:"tw-bg-green-500/10",blue:"tw-bg-blue-500/10",pink:"tw-bg-pink-500/10",red:"tw-bg-red-500/10",yellow:"tw-bg-yellow-500/10"};return t[this.dash.color]}}};const Ea=(0,p.Z)($a,[["render",Wa]]);var qa=Ea;const Ta={key:0,class:""},Oa={class:"tw-flex tw-items-center tw-flex-wrap tw-gap-2"},Va=(0,s._)("div",{class:"tw-w-[120px] tw-h-[55px] tw-bg-neutral-300/10 tw-animate-pulse tw-rounded tw-border tw-grid tw-grid-cols-12"},null,-1),Ia=[Va],Fa={key:1,class:"tw-min-h-[50px]"},Ra={class:"tw-flex tw-items-center tw-flex-wrap tw-gap-2"},ja={class:"py-2 px-3 tw-rounded tw-border tw-grid tw-grid-cols-12"},Na={class:"tw-col-span-12 tw-font-medium tw-capitalize tw-text-sm tw-text-neutral-600 tw-whitespace-nowrap"},Ma={class:"tw-col-span-12 tw-whitespace-nowrap tw-text-xs"},Ha={key:0,class:"tw-text-red-500 tw-flex tw-items-center tw-gap-2"},Ya=(0,s._)("div",{class:"tw-p-1 tw-rounded-full tw-bg-red-400"},null,-1),Za={key:1},Ka={key:0,class:"tw-text-green-500 tw-flex tw-items-center tw-gap-2"},Ba=(0,s._)("div",{class:"tw-p-1 tw-rounded-full tw-bg-green-500"},null,-1),Qa={key:1,class:"tw-flex tw-items-center tw-gap-2"},Ga=(0,s._)("div",{class:"tw-p-1 tw-rounded-full tw-bg-yellow-400"},null,-1);function Ja(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Ta,[(0,s._)("div",Oa,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(4,(t=>(0,s._)("div",{key:t},Ia))),64))])])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",Fa,[(0,s._)("div",Ra,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.users,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t.id},[(0,s._)("div",ja,[(0,s._)("div",Na,(0,et.zw)(t.firstname)+" "+(0,et.zw)(t.lastname),1),(0,s._)("div",Ma,[t.last_action?((0,s.wg)(),(0,s.iD)("div",Za,[1==l.isOnline(l.lastSeen(t.last_action))?((0,s.wg)(),(0,s.iD)("div",Ka,[Ba,(0,s.Uk)(" Online ")])):((0,s.wg)(),(0,s.iD)("div",Qa,[Ga,(0,s.Uk)(" "+(0,et.zw)(l.lastSeen(t.last_action)),1)]))])):((0,s.wg)(),(0,s.iD)("div",Ha,[Ya,(0,s.Uk)(" Never Connected ")]))])])])))),128))]),(0,s.kq)("",!0)])):(0,s.kq)("",!0)])}var Xa=r(8777),ts={components:{},data(){return{isLoaded:!1}},computed:{users(){return this.$store.getters["user/users"].filter((t=>"admin"!=t.role_name))}},methods:{getUsers(){X.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),console.log(t),this.isLoaded=!0}})).catch(this.$handleApiError)},lastSeen(t){let e=Date.parse(t.replace("-","/"))/1e3;return(0,Xa.x)(e)},isOnline(t){let e=["Just Now","1 minute ago","2 minute ago"];return e.includes(t)}},mounted(){this.getUsers()}};const es=(0,p.Z)(ts,[["render",Ja]]);var rs=es,as=r(1489),ss=r(3144),is=r(9870),ls=r(6161),os=r(4722);function ns(t,e,r,a,i,l){return(0,s.wg)(),(0,s.j4)(as._,{flat:""},{default:(0,s.w5)((()=>[(0,s.Wm)(ss.d,{modelValue:i.tab,"onUpdate:modelValue":e[0]||(e[0]=t=>i.tab=t),color:"primary-color","align-tabs":"start",density:"compact"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.tabs,(t=>((0,s.wg)(),(0,s.j4)(is.L,{key:t.id,value:t.id},{default:(0,s.w5)((()=>[(0,s.Uk)((0,et.zw)(t.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"]),(0,s.Wm)(ls.Oo,{class:"tw-mt-0",modelValue:i.tab,"onUpdate:modelValue":e[1]||(e[1]=t=>i.tab=t)},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.tabs,(t=>((0,s.wg)(),(0,s.j4)(os.H,{key:t.id,value:t.id,transition:"fade-transition","reverse-transition":"fade-transition"},{default:(0,s.w5)((()=>[((0,s.wg)(),(0,s.j4)((0,s.LL)(t.component),{"filtered-sales":r.filteredSales},null,8,["filtered-sales"]))])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})}const ds={class:"tw-grid tw-mb-5 tw-grid-cols-4 md:tw-grid-cols-4 lg:tw-grid-cols-4 tw-gap-2 py-5"},ws={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},cs={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},us={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},ps={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},ms={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},gs={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},hs={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"};function fs(t,e,r,a,i,l){const o=(0,s.up)("DashItemTwo");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",ds,[(0,s._)("div",ws,[(0,s.Wm)(o,{dash:l.totalSales},null,8,["dash"])]),(0,s._)("div",cs,[(0,s.Wm)(o,{dash:l.deliveredSales},null,8,["dash"])]),(0,s._)("div",us,[(0,s.Wm)(o,{dash:l.shippedSales},null,8,["dash"])]),(0,s._)("div",ps,[(0,s.Wm)(o,{dash:l.reportedSales},null,8,["dash"])]),(0,s._)("div",ms,[(0,s.Wm)(o,{dash:l.noanswerSales},null,8,["dash"])]),(0,s._)("div",gs,[(0,s.Wm)(o,{dash:l.canceledSales},null,8,["dash"])]),(0,s._)("div",hs,[(0,s.Wm)(o,{dash:l.transferSales},null,8,["dash"])])])])}const vs={class:"tw-flex tw-justify-between tw-items-center tw-w-full tw-h-full pa-3 px-4"},ys={class:"tw-flex tw-flex-col tw-justify-center tw-w-full tw-h-full tw-text-white"},xs={class:"tw-text-xl tw-font-bold"},bs={class:"tw-flex tw-items-center tw-gap-1 tw-w-full tw-h-full tw-text-white"},_s={class:"tw-text-sm"},ks={class:"rounded-circle tw-w-fit tw-mr-3"};function Cs(t,e,r,a,i,l){const o=(0,s.up)("number");return(0,s.wg)(),(0,s.j4)(za.C,{class:"tw-rounded-lg",color:r.dash.color,height:"70"},{default:(0,s.w5)((()=>[(0,s._)("div",vs,[(0,s._)("div",ys,[(0,s._)("p",xs,(0,et.zw)(isNaN(r.dash.pourcentage)?"0.00%":r.dash.pourcentage)+" "+(0,et.zw)(r.symbol),1),(0,s._)("span",bs,[r.numbers?((0,s.wg)(),(0,s.j4)(o,{key:0,class:"tw-font-bold",ref:"number1",from:0,to:r.dash.value,duration:1,delay:0,easing:"Power.easeOut"},null,8,["to"])):(0,s.kq)("",!0),(0,s._)("p",_s,(0,et.zw)(r.dash.title),1)])]),(0,s._)("div",ks,[(0,s.Wm)(st.t,{color:"white",size:"large",class:"md:tw-scale-[1.8] tw-scale-[1.3]",icon:r.dash.icon},null,8,["icon"])])])])),_:1},8,["color"])}var Ds={props:{dash:{required:!0},symbol:{required:!1,default:"%"},numbers:{required:!1,default:!0}}};const Ss=(0,p.Z)(Ds,[["render",Cs]]);var zs=Ss,Us={components:{DashItemTwo:zs},props:["filteredSales"],data(){return{isLoaded:!1}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},sales(){return this.filteredSales},totalSales(){return{id:1,title:"Total",value:this.sales.filter((t=>"confirmer"==t.confirmation)).length,pourcentage:100*this.sales.filter((t=>"confirmer"==t.confirmation)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length,color:"deep-purple-accent-2",icon:"mdi mdi-all-inclusive"}},deliveredSales(){return{id:2,title:"Delivered",value:this.sales.filter((t=>"livrer"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"livrer"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"primary-green",icon:"mdi-account-check-outline"}},toProcess(){return{id:3,title:"Process",value:this.sales.filter((t=>!!t.confirmation&&!["confirmer","livrer","expidier"].includes(t.delivery))).length,color:"primary-orange",icon:"mdi-reload"}},shippedSales(){return{id:4,title:"Shipped",value:this.sales.filter((t=>"expidier"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"expidier"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"primary-orange",icon:"mdi-truck"}},transferSales(){return{id:8,title:"Transferred",value:this.sales.filter((t=>"transfer"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"transfer"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"purple-darken-1",icon:"mdi-truck"}},reportedSales(){return{id:5,title:"Reported",value:this.sales.filter((t=>"reporter"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"reporter"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"primary-blue",icon:"mdi mdi-clock-outline"}},canceledSales(){return{id:6,title:"Canceled",value:this.sales.filter((t=>"annuler"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"annuler"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"red-accent-3",icon:"mdi mdi-cancel"}},noanswerSales(){return{id:6,title:"No Answer",value:this.sales.filter((t=>"pas-de-reponse"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"pas-de-reponse"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"yellow-darken-3",icon:"mdi mdi-headphones-off"}}},mounted(){la.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;console.log(t.data),this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)}};const Ls=(0,p.Z)(Us,[["render",fs]]);var Ps=Ls;const As={class:"tw-grid tw-mb-5 tw-grid-cols-4 md:tw-grid-cols-4 lg:tw-grid-cols-4 tw-gap-2 py-5"},Ws={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},$s={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Es={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},qs={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Ts={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Os={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Vs={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Is={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"};function Fs(t,e,r,a,i,l){const o=(0,s.up)("DashItemTwo");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",As,[(0,s._)("div",Ws,[(0,s.Wm)(o,{dash:l.totalSales},null,8,["dash"])]),(0,s._)("div",$s,[(0,s.Wm)(o,{dash:l.confirmedSales},null,8,["dash"])]),(0,s._)("div",Es,[(0,s.Wm)(o,{dash:l.newSales},null,8,["dash"])]),(0,s._)("div",qs,[(0,s.Wm)(o,{dash:l.reportedSales},null,8,["dash"])]),(0,s._)("div",Ts,[(0,s.Wm)(o,{dash:l.noanswerSales},null,8,["dash"])]),(0,s._)("div",Os,[(0,s.Wm)(o,{dash:l.canceledSales},null,8,["dash"])]),(0,s._)("div",Vs,[(0,s.Wm)(o,{dash:l.doubledSales},null,8,["dash"])]),(0,s._)("div",Is,[(0,s.Wm)(o,{dash:l.wrongNumberSales},null,8,["dash"])])])])}var Rs={components:{DashItemTwo:zs},props:["filteredSales"],data(){return{isLoaded:!1}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},sales(){return this.filteredSales},totalSales(){return{id:1,title:"Total",pourcentage:100,value:this.sales.length,color:"deep-purple-accent-2",icon:"mdi mdi-all-inclusive"}},newSales(){return{id:2,title:"New",value:this.sales.filter((t=>!t.confirmation)).length,pourcentage:(100*this.sales.filter((t=>!t.confirmation)).length/this.sales.length).toFixed(2),color:"grey",icon:"mdi mdi-new-box"}},toProcess(){return{id:3,title:"Process",value:this.sales.filter((t=>!!t.confirmation&&!["confirmer","livrer","expidier"].includes(t.confirmation))).length,pourcentage:(100*this.sales.filter((t=>!!t.confirmation&&!["confirmer","livrer","expidier"].includes(t.confirmation))).length/this.sales.length).toFixed(2),color:"primary-orange",icon:"mdi-reload"}},confirmedSales(){return{id:4,title:"Confirmed",value:this.sales.filter((t=>"confirmer"==t.confirmation)).length,pourcentage:(100*this.sales.filter((t=>"confirmer"==t.confirmation)).length/this.sales.length).toFixed(2),color:"primary-green",icon:"mdi-phone-check"}},reportedSales(){return{id:5,title:"Reported",value:this.sales.filter((t=>"reporter"==t.confirmation)).length,pourcentage:(100*this.sales.filter((t=>"reporter"==t.confirmation)).length/this.sales.length).toFixed(2),color:"primary-blue",icon:"mdi mdi-clock-outline"}},canceledSales(){return{id:6,title:"Canceled",value:this.sales.filter((t=>"annuler"==t.confirmation)).length,pourcentage:(100*this.sales.filter((t=>"annuler"==t.confirmation)).length/this.sales.length).toFixed(2),color:"red-accent-3",icon:"mdi mdi-cancel"}},noanswerSales(){return{id:6,title:"No Answer",value:this.sales.filter((t=>["day-one-call-one","day-one-call-two","day-one-call-three","day-two-call-one","day-two-call-two","day-two-call-three","day-three-call-one","day-three-call-two","day-three-call-three"].includes(t.confirmation))).length,pourcentage:(100*this.sales.filter((t=>["day-one-call-one","day-one-call-two","day-one-call-three","day-two-call-one","day-two-call-two","day-two-call-three","day-three-call-one","day-three-call-two","day-three-call-three"].includes(t.confirmation))).length/this.sales.length).toFixed(2),color:"yellow-darken-3",icon:"mdi mdi-headphones-off"}},doubledSales(){return{id:8,title:"Doubled",pourcentage:(100*this.sales.filter((t=>"double"==t.confirmation)).length/this.sales.length).toFixed(2),value:this.sales.filter((t=>"double"==t.confirmation)).length,color:"purple-accent-4",icon:"mdi mdi-selection-multiple"}},wrongNumberSales(){return{id:9,title:"Wrong Number",pourcentage:(100*this.sales.filter((t=>"wrong-number"==t.confirmation)).length/this.sales.length).toFixed(2),value:this.sales.filter((t=>"wrong-number"==t.confirmation)).length,color:"purple-lighten-1",icon:"mdi mdi-phone-remove"}}},mounted(){la.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;console.log(t.data),this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)}};const js=(0,p.Z)(Rs,[["render",Fs]]);var Ns=js,Ms={components:{DeliveryTab:Ps,ConfirmationTab:Ns},props:["filteredSales"],data(){return{tab:1,tabs:[{id:1,name:"Confirmation",component:"ConfirmationTab"},{id:2,name:"Delivery",component:"DeliveryTab"}]}}};const Hs=(0,p.Z)(Ms,[["render",ns]]);var Ys=Hs;const Zs={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4 py-5"},Ks={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},Bs={class:"tw-relative"},Qs={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},Gs={class:"tw-relative"},Js={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},Xs=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Agents",-1),ti={class:"tw-relative"},ei=(0,s._)("option",{value:"all"},"Select",-1),ri=["value"],ai={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},si=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Deliveries",-1),ii={class:"tw-relative"},li=(0,s._)("option",{value:"all"},"Select",-1),oi=["value"],ni={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},di=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Cities",-1),wi={class:"tw-relative"},ci=(0,s._)("option",{value:"all"},"Select",-1),ui=["value"],pi={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},mi=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Products",-1),gi={class:"tw-relative"},hi=(0,s._)("option",{value:"all"},"Select",-1),fi=["value"],vi={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},yi=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Shops",-1),xi={class:"tw-relative"},bi=(0,s._)("select",{class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[(0,s._)("option",{value:"all"},"Select")],-1),_i={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},ki=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Sources",-1),Ci={class:"tw-relative"},Di=(0,s._)("select",{class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[(0,s._)("option",{value:"all"},"Select")],-1),Si={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},zi=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Upsell",-1),Ui={class:"tw-relative"},Li=(0,s._)("option",{value:"all"},"Select",-1),Pi=(0,s._)("option",{value:"oui"},"Oui",-1),Ai=(0,s._)("option",{value:"non"},"Non",-1),Wi=[Li,Pi,Ai];function $i(t,e,r,i,l,o){const n=(0,s.up)("DateFilter");return(0,s.wg)(),(0,s.iD)("div",Zs,[(0,s._)("div",Ks,[(0,s._)("div",Bs,[(0,s.Wm)(n,{name:"Created Date",filter:l.dateFilter,"onUpdate:filter":e[0]||(e[0]=t=>l.dateFilter=t)},null,8,["filter"])])]),(0,s._)("div",Qs,[(0,s._)("div",Gs,[(0,s.Wm)(n,{name:"Dropped Date",filter:l.droppedAtFilter,"onUpdate:filter":e[1]||(e[1]=t=>l.droppedAtFilter=t)},null,8,["filter"])])]),(0,s._)("div",Js,[Xs,(0,s._)("div",ti,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.agentFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[ei,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.agents,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,et.zw)(t.firstname)+" "+(0,et.zw)(t.lastname),9,ri)))),128))],512),[[a.bM,l.agentFilter]]),(0,s.Wm)(st.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",ai,[si,(0,s._)("div",ii,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.deliveryFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[li,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,et.zw)(t.firstname)+" "+(0,et.zw)(t.lastname),9,oi)))),128))],512),[[a.bM,l.deliveryFilter]]),(0,s.Wm)(st.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",ni,[di,(0,s._)("div",wi,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.cityFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[ci,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,et.zw)(t.name),9,ui)))),128))],512),[[a.bM,l.cityFilter]]),(0,s.Wm)(st.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",pi,[mi,(0,s._)("div",gi,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>l.productFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[hi,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.products,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,et.zw)(t.name),9,fi)))),128))],512),[[a.bM,l.productFilter]]),(0,s.Wm)(st.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",vi,[yi,(0,s._)("div",xi,[bi,(0,s.Wm)(st.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",_i,[ki,(0,s._)("div",Ci,[Di,(0,s.Wm)(st.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",Si,[zi,(0,s._)("div",Ui,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>l.upsellFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},Wi,512),[[a.bM,l.upsellFilter]]),(0,s.Wm)(st.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s.kq)("",!0)])}const Ei={class:"tw-text-sm tw-text-neutral-600"},qi=["onClick"];function Ti(t,e,r,a,i,l){const o=(0,s.up)("VueDatePicker");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("span",Ei,(0,et.zw)(r.name),1),(0,s.Wm)(o,{modelValue:i.date,"onUpdate:modelValue":[e[0]||(e[0]=t=>i.date=t),l.onDateRangePicked],onCleared:l.cleared,format:i.dateFilterFormat,range:"","preset-ranges":i.presetRanges},{yearly:(0,s.w5)((({label:t,range:e,presetDateRange:r})=>[(0,s._)("span",{onClick:t=>r(e)},(0,et.zw)(t),9,qi)])),_:1},8,["modelValue","onCleared","onUpdate:modelValue","format","preset-ranges"])])}var Oi=r(1271),Vi=r(2292),Ii=r(1745),Fi=r(4253),Ri=r(4819),ji=r(2143),Ni={props:["name"],data(){return{date:["",""],dateFilterFormat:"yyyy-MM-dd",formattedStartDate:"",formattedEndDate:"",presetRanges:[{label:"Today",range:[new Date,new Date]},{label:"Yesterday",range:[(0,Oi.Z)(new Date,1),(0,Oi.Z)(new Date,1)]},{label:"This month",range:[(0,Vi.Z)(new Date),(0,Ii.Z)(new Date)]},{label:"Last month",range:[(0,Vi.Z)((0,Fi.Z)(new Date,1)),(0,Ii.Z)((0,Fi.Z)(new Date,1))]},{label:"This year",range:[(0,Ri.Z)(new Date),(0,ji.Z)(new Date)]}]}},watch:{date(){this.$emit("update:filter",[this.formattedStartDate,this.formattedEndDate])}},methods:{onDateRangePicked(t){t?(this.formattedStartDate=t[0],this.formattedEndDate=t[1]):(this.formattedStartDate=null,this.formattedEndDate=null)},cleared(){this.date=["",""]}}};const Mi=(0,p.Z)(Ni,[["render",Ti]]);var Hi=Mi,Yi={components:{DateFilter:Hi},props:["filters"],data(){return{deliveryFilter:"all",agentFilter:"all",productFilter:"all",cityFilter:"all",upsellFilter:"all",dateFilter:["",""],droppedAtFilter:["",""],isLoaded:!1,dashItems:[{id:1,title:"Total Chiffres d'affaire",value:1200,icon:"mdi-currency-usd",color:"green"},{id:2,title:"Chiffres d'affaire vers",value:"35000 DH",icon:"mdi mdi-credit-card-check-outline",color:"orange"},{id:3,title:"Chiffres d'affaire non vers",value:600,icon:"mdi mdi-credit-card-remove-outline",color:"red"},{id:4,title:"Chiffres d'affaire en caisse",value:543,icon:"mdi mdi-bank",color:"pink"}],filledDashItems:[{id:1,title:"Customers",value:2300,color:"primary-orange",icon:"mdi-account-outline"},{id:2,title:"Suppliers",value:300,color:"primary-blue",icon:"mdi-account-check-outline"},{id:3,title:"Purchase Invoice",value:1100,color:"primary-indigo",icon:"mdi-file-document-outline"},{id:4,title:"Agents",value:10,color:"primary-green",icon:"mdi-moped-outline"}]}},watch:{agentFilter(t){this.$emit("update:filters",{...this.filters,agentFilter:t})},deliveryFilter(t){this.$emit("update:filters",{...this.filters,deliveryFilter:t})},productFilter(t){this.$emit("update:filters",{...this.filters,productFilter:t})},cityFilter(t){this.$emit("update:filters",{...this.filters,cityFilter:t})},upsellFilter(t){this.$emit("update:filters",{...this.filters,upsellFilter:t})},dateFilter:{deep:!0,handler(t){this.$emit("update:filters",{...this.filters,dateFilter:t})}},droppedAtFilter:{deep:!0,handler(t){this.$emit("update:filters",{...this.filters,droppedAtFilter:t})}}},computed:{agents(){return this.$store.getters["user/agents"]},deliveries(){return this.$store.getters["user/deliveries"]},products(){return this.$store.getters["product/products"]},cities(){return this.$store.getters["city/cities"]}},mounted(){X.deliveries().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data;console.log(t.data),this.$store.dispatch("user/setDeliveries",e),this.isLoaded=!0}})).catch(this.$handleApiError),sa.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.products;console.log(t.data),this.$store.dispatch("product/setProducts",e),this.isLoaded=!0}})).catch(this.$handleApiError),X.cities().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data;console.log(t.data),this.$store.dispatch("city/setCities",e),this.isLoaded=!0}})).catch(this.$handleApiError),X.agents().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data;console.log(t.data),this.$store.dispatch("user/setAgents",e),this.isLoaded=!0}})).catch(this.$handleApiError)}};const Zi=(0,p.Z)(Yi,[["render",$i]]);var Ki=Zi;const Bi=t=>{if(!t)return 0;const e=t.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return(parseFloat(t.price?t.price:0)+parseFloat(e)).toFixed(2)},Qi=t=>t?t.split("api/")[1]:null;var Gi={components:{DashItem:qa,UsersTable:rs,TabSwitcher:Ys,FilterTabs:Ki},data(){return{updating:!1,filters:{deliveryFilter:"all",agentFilter:"all",productFilter:"all",cityFilter:"all",upsellFilter:"all",dateFilter:["",""],droppedAtFilter:["",""]}}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},sales(){return this.$store.getters["sale/sales"]},isLoaded(){return this.$store.getters["sale/fetched"]},filteredSales(){const t=this.filters.agentFilter,e=this.filters.deliveryFilter,r=this.filters.productFilter,a=this.filters.cityFilter,s=this.filters.upsellFilter,i=this.filters.dateFilter[0],l=this.filters.dateFilter[1],o=this.filters.droppedAtFilter[0],n=this.filters.droppedAtFilter[1];return this.sales.filter((d=>{if("all"!==t&&parseInt(d.agente_id)!=parseInt(t))return!1;if("all"!==e&&parseInt(d.affectation)!=parseInt(e))return!1;if("all"!==s&&d.upsell!=s)return!1;if("all"!==r&&!d.items.some((t=>parseInt(t.product_id)==parseInt(r))))return!1;if("all"!==a&&d.city?.toLocaleLowerCase()!=a?.toLocaleLowerCase())return!1;const w=new Date(d.created_at),c=w.getDate(),u=w.getMonth(),p=w.getFullYear();if(i){const t=i.getDate(),e=i.getMonth(),r=i.getFullYear();if(p<r||p===r&&u<e||p===r&&u===e&&c<t)return!1}if(l){const t=l.getDate(),e=l.getMonth(),r=l.getFullYear();if(p>r||p===r&&u>e||p===r&&u===e&&c>t)return!1}const m=new Date(d.dropped_at),g=m.getDate(),h=m.getMonth(),f=w.getFullYear();if(o){const t=o.getDate(),e=o.getMonth(),r=o.getFullYear();if(f<r||f===r&&h<e||f===r&&h===e&&g<t)return!1}if(n){const t=n.getDate(),e=n.getMonth(),r=n.getFullYear();if(f>r||f===r&&h>e||f===r&&h===e&&g>t)return!1}return!0}))},dashChiffreAffaires(){return{id:1,title:"Total Chiffres d'affaire",value:this.getChiffresDaffaire().toFixed(2),icon:"mdi-currency-usd",color:"green"}},dashChiffreAffairesVerse(){return{id:2,title:"Chiffres d'affaire vers",value:this.getChiffresDaffaireVerse().toFixed(2),icon:"mdi mdi-credit-card-check-outline",color:"orange"}},dashChiffreAffairesNonVerse(){return{id:3,title:"Chiffres d'affaire non vers",value:this.getChiffresDaffaireNonVerse().toFixed(2),icon:"mdi mdi-credit-card-remove-outline",color:"red"}},dashChiffreAffairesEnCaisse(){return{id:4,title:"Chiffres d'affaire en caisse",value:this.getChiffresDaffaireEnCaise().toFixed(2),icon:"mdi mdi-bank",color:"yellow"}},newSales(){return{id:1,title:"New",value:this.sales.filter((t=>!t.confirmation)).length,color:"primary-green",icon:"mdi mdi-new-box"}},toProcess(){return{id:2,title:"Process",value:this.sales.filter((t=>!!t.confirmation&&!["confirmer","livre","expidier"].includes(t.confirmation))).length,color:"primary-orange",icon:"mdi-reload"}},confirmedSales(){return{id:3,title:"Confirmed",value:this.sales.filter((t=>"confirmer"==t.confirmation)).length,color:"deep-purple-accent-2",icon:"mdi-phone-check"}},deliveredSales(){return{id:4,title:"Delivered",value:this.sales.filter((t=>"livre"==t.confirmation)).length,color:"primary-blue",icon:"mdi-account-check-outline"}},shippedSales(){return{id:5,title:"Shipped",value:this.sales.filter((t=>"expidier"==t.confirmation)).length,color:"red",icon:"mdi-truck"}}},methods:{getSales(){la.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0)}})).catch(this.$handleApiError)},updateSales(){this.updating=!0,la.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("sale/setSales",e),this.updating}})).catch(this.$handleApiError).finally((()=>{this.updating=!1}))},getChiffresDaffaire(){let t=0;return this.filteredSales.forEach((e=>{t+=Bi(e)})),t},getChiffresDaffaireVerse(){let t=0;return this.filteredSales.forEach((e=>{null!=e.factorisations&&e.factorisations.paid&&(t+=Bi(e))})),t},getChiffresDaffaireNonVerse(){let t=0;return this.filteredSales.forEach((e=>{null==e.factorisations||e.factorisations.paid||(t+=Bi(e))})),t},getChiffresDaffaireEnCaise(){return this.getChiffresDaffaire()-this.getChiffresDaffaireVerse()}},mounted(){}};const Ji=(0,p.Z)(Gi,[["render",Sa]]);var Xi=Ji;const tl=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Dashboard")])],-1),el={key:0},rl={key:1},al={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},sl={class:"tw-grid tw-mb-5 tw-grid-cols-4 md:tw-grid-cols-4 lg:tw-grid-cols-5 tw-gap-2"},il={class:"lg:tw-col-span-1 md:tw-col-span-1 tw-col-span-4"},ll={class:"lg:tw-col-span-1 md:tw-col-span-1 tw-col-span-4"},ol={class:"lg:tw-col-span-1 md:tw-col-span-1 tw-col-span-4"},nl={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},dl={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-5"},wl={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"};function cl(t,e,r,a,i,l){const o=(0,s.up)("LoadingAnimation"),n=(0,s.up)("DashItemTwo");return(0,s.wg)(),(0,s.iD)("div",null,[tl,i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",el,[(0,s.Wm)(o)])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",rl,[(0,s._)("div",al,[(0,s._)("div",sl,[(0,s._)("div",il,[(0,s.Wm)(n,{dash:l.earningsDash,symbol:"DH",numbers:!1},null,8,["dash"])]),(0,s._)("div",ll,[(0,s.Wm)(n,{dash:l.totalSales},null,8,["dash"])]),(0,s._)("div",ol,[(0,s.Wm)(n,{dash:l.deliveredSales},null,8,["dash"])]),(0,s._)("div",nl,[(0,s.Wm)(n,{dash:l.reportedSales},null,8,["dash"])]),(0,s._)("div",dl,[(0,s.Wm)(n,{dash:l.shippedSales},null,8,["dash"])]),(0,s._)("div",wl,[(0,s.Wm)(n,{dash:l.canceledSales},null,8,["dash"])])])])])):(0,s.kq)("",!0)])}var ul={components:{DashItemTwo:zs},data(){return{isLoaded:!0,orders:[],cities:[]}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},sales(){return this.$store.getters["sale/sales"]},totalSales(){return{id:1,title:"Total Orders",value:this.orders.length,pourcentage:100,color:"deep-purple-accent-2",icon:"mdi mdi-all-inclusive"}},deliveredSales(){return{id:2,title:"Delivered",value:this.filterByStatus("livrer").length,pourcentage:100*this.filterByStatus("livrer").length/this.orders.length,color:"primary-green",icon:"mdi-account-check-outline"}},toProcess(){return{id:3,title:"Process",value:231,color:"primary-orange",icon:"mdi-reload"}},shippedSales(){return{id:4,title:"Shipped",value:this.filterByStatus("expidier").length,pourcentage:100*this.filterByStatus("expidier").length/this.orders.length,color:"primary-orange",icon:"mdi-truck"}},reportedSales(){return{id:5,title:"Reported",value:this.filterByStatus("reporter").length,pourcentage:100*this.filterByStatus("reporter").length/this.orders.length,color:"primary-blue",icon:"mdi mdi-clock-outline"}},canceledSales(){return{id:6,title:"Canceled",value:this.filterByStatus("annuler").length,pourcentage:100*this.filterByStatus("annuler").length/this.orders.length,color:"red-accent-3",icon:"mdi mdi-cancel"}},earningsDash(){return{id:2,title:"Earnings",pourcentage:this.earnings,color:"green-darken-4",icon:"mdi-currency-usd"}},earnings(){return this.orders.reduce(((t,e)=>null==e.factorisations||e.factorisations.paid||e.factorisations.close?t:t+e.factorisations.price),0)}},methods:{filterByStatus(t){return this.orders.filter((e=>e.delivery==t))},getOrders(){this.isLoaded=!1,Wr.delivery().then((t=>{"SUCCESS"==t.data.code&&(this.orders=t.data.data.orders)})).finally((()=>{this.isLoaded=!0}))}},mounted(){this.getOrders()}};const pl=(0,p.Z)(ul,[["render",cl]]);var ml=pl;const gl=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Dashboard ")])],-1),hl={key:0},fl={key:1},vl={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},yl={class:"tw-grid tw-mb-5 tw-grid-cols-4 md:tw-grid-cols-4 lg:tw-grid-cols-5 tw-gap-2"},xl={class:"lg:tw-col-span-1 md:tw-col-span-1 tw-col-span-4"},bl={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},_l={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},kl={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Cl={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Dl={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Sl={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"};function zl(t,e,r,a,i,l){const o=(0,s.up)("LoadingAnimation"),n=(0,s.up)("DashItemTwo");return(0,s.wg)(),(0,s.iD)("div",null,[gl,i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",hl,[(0,s.Wm)(o)])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",fl,[(0,s._)("div",vl,[(0,s._)("div",yl,[(0,s._)("div",xl,[(0,s.Wm)(n,{dash:l.earningsDash,symbol:i.currency,numbers:!1},null,8,["dash","symbol"])]),(0,s._)("div",bl,[(0,s.Wm)(n,{dash:l.totalSales},null,8,["dash"])]),(0,s._)("div",_l,[(0,s.Wm)(n,{dash:l.confirmedSales},null,8,["dash"])]),(0,s._)("div",kl,[(0,s.Wm)(n,{dash:l.reportedSales},null,8,["dash"])]),(0,s._)("div",Cl,[(0,s.Wm)(n,{dash:l.noanswerSales},null,8,["dash"])]),(0,s._)("div",Dl,[(0,s.Wm)(n,{dash:l.canceledSales},null,8,["dash"])]),(0,s._)("div",Sl,[(0,s.Wm)(n,{dash:l.upsellSales},null,8,["dash"])])])])])):(0,s.kq)("",!0)])}var Ul={components:{DashItemTwo:zs},data(){return{currency:c,isLoaded:!0,orders:[]}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},totalSales(){return{id:1,title:"Total",pourcentage:0===this.orders.length?0:100,value:this.orders.filter((t=>"double"!=t.confirmation)).length,color:"deep-purple-accent-2",icon:"mdi mdi-all-inclusive"}},newSales(){return{id:2,title:"New",value:this.orders.filter((t=>!t.confirmation)).length,pourcentage:(100*this.orders.filter((t=>!t.confirmation)).length/this.orders.length).toFixed(2),color:"grey",icon:"mdi mdi-new-box"}},confirmedSales(){return{id:4,title:"Confirmed",value:this.orders.filter((t=>"confirmer"==t.confirmation)).length,pourcentage:(100*this.orders.filter((t=>"confirmer"==t.confirmation)).length/this.orders.length).toFixed(2),color:"primary-green",icon:"mdi-phone-check"}},reportedSales(){return{id:5,title:"Reported",value:this.orders.filter((t=>"reporter"==t.confirmation)).length,pourcentage:(100*this.orders.filter((t=>"reporter"==t.confirmation)).length/this.orders.length).toFixed(2),color:"primary-blue",icon:"mdi mdi-clock-outline"}},canceledSales(){return{id:6,title:"Canceled",value:this.orders.filter((t=>"annuler"==t.confirmation)).length,pourcentage:(100*this.orders.filter((t=>"annuler"==t.confirmation)).length/this.orders.length).toFixed(2),color:"red-accent-3",icon:"mdi mdi-cancel"}},upsellSales(){return{id:6,title:"Upsell",value:this.orders.filter((t=>"oui"==t.upsell)).length,pourcentage:(100*this.orders.filter((t=>"oui"==t.upsell)).length/this.orders.length).toFixed(2),color:"#2563eb",icon:"mdi mdi-transfer-up"}},earningsDash(){return{id:2,title:"Earnings",pourcentage:.7*this.orders.filter((t=>"oui"==t.upsell&&"livrer"==t.delivery)).length,color:"green-darken-4",icon:"mdi-currency-usd"}},noanswerSales(){return{id:6,title:"No Answer",value:this.orders.filter((t=>["day-one-call-one","day-one-call-two","day-one-call-three","day-two-call-one","day-two-call-two","day-two-call-three","day-three-call-one","day-three-call-two","day-three-call-three"].includes(t.confirmation))).length,pourcentage:(100*this.orders.filter((t=>["day-one-call-one","day-one-call-two","day-one-call-three","day-two-call-one","day-two-call-two","day-two-call-three","day-three-call-one","day-three-call-two","day-three-call-three"].includes(t.confirmation))).length/this.orders.length).toFixed(2),color:"yellow-darken-3",icon:"mdi mdi-headphones-off"}}},methods:{filterByStatus(t){return this.orders.filter((e=>e.confirmation==t))},getOrders(){this.isLoaded=!1,Wr.agente().then((t=>{"SUCCESS"==t.data.code&&(this.orders=t.data.data.orders)})).finally((()=>{this.isLoaded=!0}))}},mounted(){this.getOrders()}};const Ll=(0,p.Z)(Ul,[["render",zl]]);var Pl=Ll;const Al=(0,s._)("div",{class:"tw-w-full tw-rounded-lg tw-py-5 tw-px-5 tw-flex tw-flex-center tw-justify-center"},[(0,s._)("h1",{class:"tw-text-lg"},"Welcome to Dashboard !")],-1),Wl=[Al];function $l(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",null,Wl)}var El={components:{},data(){return{dashItems:[{id:1,title:"Orders",value:1200,icon:"mdi-package-variant-closed",color:"orange"},{id:2,title:"Total Sales",value:"35000 DH",icon:"mdi-currency-usd",color:"green"},{id:3,title:"Orders Confirmed",value:600,icon:"mdi-phone-check-outline",color:"blue"},{id:4,title:"Orders Delivered",value:543,icon:"mdi-truck-check-outline",color:"pink"}],filledDashItems:[{id:1,title:"Customers",value:2300,color:"primary-orange",icon:"mdi-account-outline"},{id:2,title:"Suppliers",value:300,color:"primary-blue",icon:"mdi-account-check-outline"},{id:3,title:"Purchase Invoice",value:1100,color:"primary-indigo",icon:"mdi-file-document-outline"},{id:4,title:"Agents",value:10,color:"primary-green",icon:"mdi-moped-outline"}]}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role}}};const ql=(0,p.Z)(El,[["render",$l]]);var Tl=ql;const Ol={class:"tw-w-full tw-grid tw-gap-2 lg:tw-grid-cols-4 sm:tw-grid-cols-2 tw-grid-cols-1"},Vl=(0,s.uE)('<div class="tw-flex tw-justify-between tw-w-full"><div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-2.5 tw-bg-gray-200 tw-rounded-full tw-w-[50px] tw-mb-4"></div></div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-4 tw-bg-gray-200 tw-rounded-full tw-w-[30px] tw-mb-4"></div></div></div><div class="tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-bg-gray-200 tw-text-white"><div class="tw-bg-white tw-w-[25px] tw-h-[25px] tw-rounded"></div></div></div>',1),Il=[Vl];function Fl(t,e,r,a,i,l){const o=(0,s.up)("DashCard");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",Ol,[i.fetching?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},(0,s.Ko)(4,(t=>(0,s._)("div",{key:t,class:"tw-bg-white tw-animate-pulse tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-[90px]"},Il))),64)):((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(i.dashes,(t=>((0,s.wg)(),(0,s.j4)(o,{key:t.id,color:t.color,icon:t.icon,title:t.title,symbol:t.symbol,percentage:t.percentage,value:t.value},null,8,["color","icon","title","symbol","percentage","value"])))),128))])])}const Rl={class:"tw-bg-white tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-fit"},jl={class:"tw-flex tw-justify-between"},Nl={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},Ml={class:"tw-text-gray-400 tw-uppercase tw-text-xs tw-font-medium"},Hl={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},Yl={class:"tw-text-gray-700 tw-text-xl tw-font-bold"};function Zl(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",Rl,[(0,s._)("div",jl,[(0,s._)("div",null,[(0,s._)("div",Nl,[(0,s._)("p",Ml,(0,et.zw)(r.title),1),r.percentage?((0,s.wg)(),(0,s.iD)("span",{key:0,class:"tw-text-xs tw-font-medium tw-rounded tw-px-1 tw-text-white",style:(0,et.j5)({background:r.color})},(0,et.zw)(r.percentage.toFixed(2))+"%",5)):(0,s.kq)("",!0)]),(0,s._)("div",Hl,[(0,s._)("span",Yl,(0,et.zw)(r.value),1)])]),(0,s._)("div",{style:(0,et.j5)({background:r.color}),class:"tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-text-white"},[(0,s.Wm)(st.t,{style:(0,et.j5)(["Orders"==r.title&&{color:"#2ee1ff"}]),size:"x-large"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,et.zw)(r.icon),1)])),_:1},8,["style"])],4)])])])}var Kl={props:{icon:{required:!0},title:{required:!0},value:{required:!0},symbol:{default:"",required:!1},percentage:{required:!1},color:{required:!0,default:"#6b7280"}}};const Bl=(0,p.Z)(Kl,[["render",Zl]]);var Ql=Bl;class Gl{async statistics(){return await $.getCookie(),A.post("api/v1/followup/statistics")}async paginate(t="/",e){return await $.getCookie(),A.post("api/v1/followup/orders"+t,e)}async update(t,e){return await $.getCookie(),A.post("api/v1/followup/orders/"+t+"/update",e)}async create(t){return await $.getCookie(),A.post("api/v1/followup/orders/create",t)}}var Jl=new Gl,Xl={components:{DashCard:Ql},data(){return{fetching:!0,dashes:[]}},mounted(){Jl.statistics().then((t=>{console.log(t.data.data),this.dashes=t.data.data.statistics,this.fetching=!1}))}};const to=(0,p.Z)(Xl,[["render",Fl]]);var eo=to,ro={components:{admin:Xi,delivery:ml,agente:Pl,default:Tl,"follow-up":eo},data(){return{localUrl:n,exists:!1}},computed:{user(){return this.$store.getters["user/user"]},dashboard(){return["admin","delivery","agente","follow-up"].includes(this.user.role)?this.user.role:"default"}},methods:{check(){switch(this.user.role){case"admin":this.$router.push({name:"dashboards/admin"});break;case"agente":this.$router.push({name:"dashboards/agent"});break;default:this.exists=!0;break}}},created(){this.check()}};const ao=(0,p.Z)(ro,[["render",ca]]);var so=ao,io=r(3104);const lo=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Settings ")],-1),oo={key:0},no={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},wo={class:"tw-w-full"},co=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," First Name ",-1),uo={class:"tw-w-full"},po=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Last Name",-1),mo={class:"tw-w-full"},go=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Email",-1),ho={class:"tw-w-full"},fo=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Phone Number ",-1),vo={class:"tw-w-full tw-flex tw-gap-10 tw-items-center"},yo=(0,s._)("span",null,"Update Password: ",-1),xo={class:"tw-w-full"},bo=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Password",-1),_o={class:"tw-w-full"},ko=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Confirm Password ",-1),Co={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Do=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),So=(0,s._)("span",{class:"text-white text-capitalize"},"Update",-1);function zo(t,e,r,a,i,l){const o=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[lo,l.isFormReady?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",oo,[(0,s.Wm)(o)])),l.isFormReady?((0,s.wg)(),(0,s.iD)("div",no,[(0,s._)("div",null,[(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",wo,[co,(0,s.Wm)(it.hw,{"error-messages":i.formStatus.firstname.message,modelValue:i.firstname,"onUpdate:modelValue":e[0]||(e[0]=t=>i.firstname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",uo,[po,(0,s.Wm)(it.hw,{"error-messages":i.formStatus.lastname.message,modelValue:i.lastname,"onUpdate:modelValue":e[1]||(e[1]=t=>i.lastname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",mo,[go,(0,s.Wm)(it.hw,{"error-messages":i.formStatus.email.message,modelValue:i.email,"onUpdate:modelValue":e[2]||(e[2]=t=>i.email=t),readonly:"",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",ho,[fo,(0,s.Wm)(it.hw,{"error-messages":i.formStatus.phone.message,modelValue:i.phone,"onUpdate:modelValue":e[3]||(e[3]=t=>i.phone=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-0",cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",vo,[yo,(0,s.Wm)(io.G,{modelValue:i.updatePassword,"onUpdate:modelValue":e[4]||(e[4]=t=>i.updatePassword=t),color:"primary-color","hide-details":!0},null,8,["modelValue"])])])),_:1}),i.updatePassword?((0,s.wg)(),(0,s.j4)(pa.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",xo,[bo,(0,s.Wm)(it.hw,{"error-messages":i.formStatus.password.message,modelValue:i.password,"onUpdate:modelValue":e[5]||(e[5]=t=>i.password=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1})):(0,s.kq)("",!0),i.updatePassword?((0,s.wg)(),(0,s.j4)(pa.D,{key:1,class:"!tw-py-2 tw-pt-0",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",_o,[ko,(0,s.Wm)(it.hw,{"error-messages":i.formStatus.confirmPassword.message,modelValue:i.confirmPassword,"onUpdate:modelValue":e[6]||(e[6]=t=>i.confirmPassword=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1})])),_:1})]),(0,s._)("div",Co,[(0,s.Wm)(rt.T,{link:"",to:{name:"user/list"},color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[Do])),_:1}),t.$can("update_account")?((0,s.wg)(),(0,s.j4)(rt.T,{key:0,onClick:l.update,loading:i.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[So])),_:1},8,["onClick","loading"])):(0,s.kq)("",!0)])])):(0,s.kq)("",!0)])}var Uo={data(){return{serverUrl:d,isFetched:!1,isUserFetched:!1,isLoading:!1,updatePassword:!1,formStatus:{firstname:{valid:!0,message:""},lastname:{valid:!0,message:""},phone:{valid:!0,message:""},email:{valid:!0,message:""},password:{valid:!0,message:""},confirmPassword:{valid:!0,message:""}},id:null,firstname:"",lastname:"",phone:"",email:"",password:"",confirmPassword:""}},computed:{isFormReady(){return this.isFetched},user(){return{id:this.id,firstname:this.firstname,lastname:this.lastname,phone:this.phone,password:this.password}}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,X.updateProfile(this.user,this.updatePassword).then((t=>{"USER_UPDATED"==t.data.code&&this.$alert({type:"success",title:t.data.message})})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;switch(console.log(t),e?.code){case"VALIDATION_ERROR":for(let t in e.error)this.formStatus[t]={valid:!1,message:e.error[t][0]};break}return t})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1}))},validate(){this.formStatus["firstname"]=zt(this.firstname),this.formStatus["lastname"]=zt(this.lastname),this.formStatus["phone"]=zt(this.phone),this.formStatus["password"]=St(this.password),this.formStatus["confirmPassword"]=Lt(this.password,this.confirmPassword);const t=this.formStatus["firstname"].valid,e=this.formStatus["lastname"].valid,r=this.formStatus["phone"].valid;if(this.updatePassword){const a=this.formStatus["password"].valid,s=this.formStatus["confirmPassword"].valid;return t&&e&&a&&s&&r}return t&&e&&r},async getUser(){return X.profile().then((t=>{if("USER_SUCCESS"==t?.data.code){const e=t.data.data.user;this.id=e.id,this.firstname=e.firstname,this.lastname=e.lastname,this.email=e.email,this.phone=e.phone,this.isUserFetched=!0}})).catch(this.$handleApiError)}},async mounted(){Promise.allSettled([this.getUser()]).then((()=>this.isFetched=!0),(t=>this.$handleApiError(t)))}};const Lo=(0,p.Z)(Uo,[["render",zo]]);var Po=Lo;const Ao=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Notifications")])],-1),Wo={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},$o={class:"!tw-capitalize"};function Eo(t,e,r,a,i,l){(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[Ao,(0,s.kq)("",!0),((0,s.wg)(),(0,s.iD)("div",Wo,[(0,s.Wm)(as._,{flat:""},{default:(0,s.w5)((()=>[(0,s.Wm)(ss.d,{modelValue:i.tab,"onUpdate:modelValue":e[0]||(e[0]=t=>i.tab=t),color:"primary-color","align-tabs":"start",density:"compact"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.tabs,(t=>((0,s.wg)(),(0,s.j4)(is.L,{class:"!tw-capitalize !tw-text-neutral-600",key:t.id,value:t.id},{default:(0,s.w5)((()=>[(0,s._)("span",$o,(0,et.zw)(t.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"]),(0,s.Wm)(ls.Oo,{class:"tw-mt-5",modelValue:i.tab,"onUpdate:modelValue":e[1]||(e[1]=t=>i.tab=t)},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.tabs,(t=>((0,s.wg)(),(0,s.j4)(os.H,{key:t.id,value:t.id},{default:(0,s.w5)((()=>[((0,s.wg)(),(0,s.j4)((0,s.LL)(t.component)))])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})]))])}const qo={key:0};function To(t,e,r,a,i,l){const o=(0,s.up)("SalesTable");return l.fetched?((0,s.wg)(),(0,s.iD)("div",qo,[((0,s.wg)(),(0,s.j4)(o,{key:l.sales.length,columns:i.columns,sales:l.sales},null,8,["columns","sales"]))])):(0,s.kq)("",!0)}const Oo={class:"tw-grid tw-grid-cols-12 tw-mb-5"},Vo={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-items-center"},Io=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"}," Show per page: ",-1),Fo=["value"],Ro={class:"tw-relative tw-pb-5 tw-overflow-x-auto tw-min-h-[400px] tw-overflow-y-visible sm:tw-rounded-lg"},jo={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},No={scope:"col",class:"tw-p-4"},Mo={class:"tw-flex tw-items-center"},Ho=(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox",-1),Yo={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},Zo={class:"tw-w-4 tw-p-4 tw-relative"},Ko={class:"tw-flex tw-items-center"},Bo=["onChange","checked"],Qo=(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox",-1),Go={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},Jo={class:"tw-px-6 tw-py-4 tw-relative"},Xo={key:0},tn={class:"tw-px-6 tw-py-4"},en=["title"],rn={class:"tw-px-6 tw-py-4 tw-relative"},an={class:"tw-pb-2"},sn={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},ln={key:0},on={key:1},nn={class:"tw-absolute tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-text-xs"},dn={key:0,class:"tw-bg-emerald-500/10 tw-text-emerald-500 tw-px-2 tw-rounded-t"},wn={key:1,class:"tw-bg-blue-500/10 tw-text-blue-500 tw-px-2 tw-rounded-t"},cn={class:"tw-px-6 tw-py-4"},un={class:"tw-px-6 tw-py-4 tw-relative"},pn={class:"tw-flex tw-items-center tw-justify-center"},mn={class:"tw-flex tw-gap-1"},gn={key:0},hn={class:"tw-px-6 tw-py-4"},fn={class:"tw-px-6 tw-py-4 tw-relative"},vn={class:"tw-flex tw-items-center tw-justify-center"},yn={class:"tw-flex tw-gap-1"},xn={key:0},bn={class:"tw-px-6 tw-py-4"},_n={class:"tw-px-6 tw-py-4"},kn={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},Cn={class:"tw-col-span-12 md:tw-col-span-12 d-flex tw-justify-end tw-flex-wrap align-center"},Dn={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},Sn={class:"tw-flex tw-flex-wrap tw-gap-2"},zn={class:"tw-text-white"};function Un(t,e,r,i,l,o){const n=(0,s.up)("SaleConfirmation"),d=(0,s.up)("SaleAffectation"),w=(0,s.up)("SaleDelivery"),c=(0,s.up)("SaleActions");return(0,s.wg)(),(0,s.iD)("div",{key:o.items.length},[(0,s._)("div",Oo,[(0,s._)("div",Vo,[Io,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,et.zw)(t),9,Fo)))),128))],512),[[a.bM,l.paginationLimit]])])]),(0,s._)("div",Ro,[((0,s.wg)(),(0,s.iD)("table",{key:o.reportedForToday.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,s._)("thead",jo,[(0,s._)("tr",null,[(0,s._)("th",No,[(0,s._)("div",Mo,[(0,s.wy)((0,s._)("input",{onClick:e[1]||(e[1]=(...t)=>o.handleSelectAll&&o.handleSelectAll(...t)),"onUpdate:modelValue":e[2]||(e[2]=t=>l.isAllSelected=t),id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"},null,512),[[a.e8,l.isAllSelected]]),Ho])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t,class:(0,et.C_)([["city"==t&&"!tw-max-w-[150px]"],"tw-px-6 tw-py-3 tw-truncate"]),scope:"col"},[(0,s._)("div",Yo,(0,et.zw)(t),1)],2)))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.items,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:(0,et.C_)([[[t.confirmation,t.delivery].includes("reporter")&&"tw-relative",o.isReportedToday(t)&&"!tw-border tw-border-red-400"],"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"])},[(0,s._)("td",Zo,[(0,s._)("div",Ko,[(0,s._)("input",{onChange:e=>o.handleSelect(e,t.id),checked:o.isSelected(t.id),id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"},null,40,Bo),Qo])]),(0,s._)("td",Go,(0,et.zw)(t.id),1),(0,s._)("td",Jo,[(0,s.Uk)((0,et.zw)(t?.created_at?.split("T")[0])+" ",1),"reporter"==t.confirmation||"reporter"==t.delivery?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,et.C_)([o.isReportedToday(t)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[o.isReportedToday(t)?((0,s.wg)(),(0,s.iD)("span",Xo," Reported for today ")):(0,s.kq)("",!0)],2)):(0,s.kq)("",!0)]),(0,s._)("td",tn,[(0,s._)("div",{title:t.city,class:"!tw-max-w-[200px] tw-truncate"},(0,et.zw)(t.city),9,en)]),(0,s._)("td",rn,[(0,s._)("div",an,[(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.items,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,s.Uk)(" - "),(0,s._)("span",sn,(0,et.zw)(t.quantity)+" X ",1),(0,s.Uk)((0,et.zw)(t.product.name)+" ",1),t.product_variation.size?((0,s.wg)(),(0,s.iD)("span",ln,"| "+(0,et.zw)(t.product_variation.size),1)):(0,s.kq)("",!0),t.product_variation.color?((0,s.wg)(),(0,s.iD)("span",on,"| "+(0,et.zw)(t.product_variation.color),1)):(0,s.kq)("",!0)])))),128))]),(0,s._)("div",nn,[t.counts_from_warehouse?((0,s.wg)(),(0,s.iD)("p",dn," warehouse ")):(0,s.kq)("",!0),t.counts_from_warehouse?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",wn," delivery "))])])]),(0,s._)("td",cn,(0,et.zw)(t.fullname),1),(0,s._)("td",un,[(0,s._)("div",pn,[((0,s.wg)(),(0,s.j4)(n,{class:(0,et.C_)("reporter"==t.confirmation&&"tw-mb-1"),sale:t,id:t.id,confirmation:t.confirmation,key:t.confirmation},null,8,["class","sale","id","confirmation"])),"reporter"==t.confirmation?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,et.C_)([o.isReportedToday(t)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[(0,s._)("span",mn,["reporter"==t.confirmation?((0,s.wg)(),(0,s.iD)("span",gn,[(0,s.Wm)(st.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s._)("span",null,(0,et.zw)(t?.reported_agente_date?.split("T")[0]),1)])):(0,s.kq)("",!0)])],2)):(0,s.kq)("",!0)])]),(0,s._)("td",hn,["confirmer"==t.confirmation?((0,s.wg)(),(0,s.j4)(d,{sale:t,affectation:t.affectation,id:t.id,key:t.affectation},null,8,["sale","affectation","id"])):(0,s.kq)("",!0)]),(0,s._)("td",fn,[(0,s._)("div",vn,[((0,s.wg)(),(0,s.j4)(w,{class:(0,et.C_)("reporter"==t.delivery&&"tw-mb-1"),sale:t,id:t.id,key:t.delivery,delivery:t.delivery},null,8,["class","sale","id","delivery"])),"reporter"==t.delivery?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,et.C_)([o.isReportedToday(t)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[(0,s._)("span",yn,["reporter"==t.delivery?((0,s.wg)(),(0,s.iD)("span",xn,[(0,s.Wm)(st.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s._)("span",null,(0,et.zw)(t.reported_delivery_date),1)])):(0,s.kq)("",!0)])],2)):(0,s.kq)("",!0)])]),(0,s._)("td",bn,(0,et.zw)(o.getPrice(t)),1),(0,s._)("td",_n,[((0,s.wg)(),(0,s.j4)(c,{id:t.id,key:t.delivery,sale:t},null,8,["id","sale"]))])],2)))),128))])]))]),(0,s._)("div",kn,[(0,s._)("div",Cn,[(0,s._)("div",Dn,(0,et.zw)(o.prevRange+1)+" - "+(0,et.zw)(l.currentPage==o.pageCount?r.sales.length:o.nextRange)+" of "+(0,et.zw)(r.sales.length)+" items ",1),(0,s._)("div",Sn,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pageCount,(t=>((0,s.wg)(),(0,s.j4)(rt.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",zn,(0,et.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const Ln={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},Pn=["onClick"],An={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},Wn=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter note",-1),$n={class:"tw-flex tw-justify-end tw-mt-2"};function En(t,e,r,i,l,o){const n=(0,s.up)("popup-full"),d=(0,s.up)("SaleConfirmationReporting");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:r.confirmation,class:"tw-relative tw-min-w-[100px]"},[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>o.toggle&&o.toggle(...t)),class:(0,et.C_)([[o.selected.text,o.selected.bg,o.selected.ring],"focus:tw-ring-4 tw-min-w-[100px] focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between"]),type:"button"},[(0,s.Uk)((0,et.zw)(o.selected.name)+" ",1),l.isLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(st.t,{key:0,class:"tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,et.zw)(l.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),l.isLoading?((0,s.wg)(),(0,s.j4)(st.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)],2),(0,s._)("div",{class:(0,et.C_)([{"tw-hidden":!l.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,s._)("ul",Ln,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.options,(t=>((0,s.wg)(),(0,s.iD)("li",{onClick:e=>o.handleChange(t),key:t.id},[(0,s._)("a",{class:(0,et.C_)(["tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100",[t.text,t.bg]])},(0,et.zw)(t.name),3)],8,Pn)))),128))])],2),(0,s.Wm)(n,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>l.showPopup=!1),visible:l.showPopup},{default:(0,s.w5)((()=>[(0,s._)("div",An,[Wn,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"3",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[a.nr,l.note]]),(0,s._)("div",$n,[(0,s.Wm)(rt.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleClick},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"]),(0,s.Wm)(d,{order:r.sale,visible:l.showPopupReporter,onCancel:e[3]||(e[3]=t=>l.showPopupReporter=!1)},null,8,["order","visible"])])),[[te.L,o.close]])}const qn=[{id:0,value:null,name:"New",text:"tw-text-white",textLight:"tw-text-emerald-800",bg:"tw-bg-green-500",bgLight:"tw-bg-emerald-100",ring:"tw-ring-green-300"},{id:1,value:"day-one-call-one",name:"No reply 1 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-700",bg:"tw-bg-rose-200/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-200"},{id:2,value:"day-one-call-two",name:"No reply 2 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-800",bg:"tw-bg-rose-400/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-300"},{id:3,value:"day-one-call-three",name:"No reply 3 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-900",bg:"tw-bg-rose-600/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-400"},{id:4,value:"day-two-call-one",name:"No reply 1 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-700",bg:"tw-bg-indigo-200/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-200"},{id:5,value:"day-two-call-two",name:"No reply 2 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-800",bg:"tw-bg-indigo-400/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-300"},{id:6,value:"day-two-call-three",name:"No reply 3 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-900",bg:"tw-bg-indigo-600/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-400"},{id:7,value:"day-three-call-one",name:"No reply 1 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-700",bg:"tw-bg-blue-200/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-200"},{id:8,value:"day-three-call-two",name:"No reply 2 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-800",bg:"tw-bg-blue-400/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-300"},{id:9,value:"day-three-call-three",name:"No reply 3 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-900",bg:"tw-bg-blue-600/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-400"},{id:10,value:"reporter",name:"Reported",text:"tw-text-teal-500",textLight:"tw-text-teal-800",bg:"tw-bg-teal-500/10",bgLight:"tw-bg-teal-100",ring:"tw-ring-teal-300"},{id:11,value:"annuler",name:"Canceled",text:"tw-text-red-500",textLight:"tw-text-red-800",bg:"tw-bg-red-500/10",bgLight:"tw-bg-red-100",ring:"tw-ring-red-300"},{id:12,value:"wrong-number",name:"Wrong number",text:"tw-text-fuchsia-500",textLight:"tw-text-fuchsia-800",bg:"tw-bg-fuchsia-500/10",bgLight:"tw-bg-fuchsia-100",ring:"tw-ring-fuchsia-300"},{id:13,value:"confirmer",name:"Confirmed",text:"tw-text-green-500",textLight:"tw-text-green-800",bg:"tw-bg-green-500/10",bgLight:"tw-bg-green-100",ring:"tw-ring-green-300"},{id:14,value:"double",name:"Double",text:"tw-text-purple-500",textLight:"tw-text-purple-800",bg:"tw-bg-purple-500/10",bgLight:"tw-bg-purple-100",ring:"tw-ring-purple-300"}],Tn=[{id:0,value:null,name:"New",text:"tw-text-white",textLight:"tw-text-emerald-800",bg:"tw-bg-green-500",bgLight:"tw-bg-emerald-100",ring:"tw-ring-green-300"},{id:1,value:"day-one-call-one",name:"No reply 1 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-700",bg:"tw-bg-rose-200/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-200"},{id:2,value:"day-one-call-two",name:"No reply 2 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-800",bg:"tw-bg-rose-400/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-300"},{id:3,value:"day-one-call-three",name:"No reply 3 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-900",bg:"tw-bg-rose-600/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-400"},{id:4,value:"day-two-call-one",name:"No reply 1 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-700",bg:"tw-bg-indigo-200/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-200"},{id:5,value:"day-two-call-two",name:"No reply 2 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-800",bg:"tw-bg-indigo-400/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-300"},{id:6,value:"day-two-call-three",name:"No reply 3 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-900",bg:"tw-bg-indigo-600/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-400"},{id:7,value:"day-three-call-one",name:"No reply 1 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-700",bg:"tw-bg-blue-200/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-200"},{id:8,value:"day-three-call-two",name:"No reply 2 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-800",bg:"tw-bg-blue-400/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-300"},{id:9,value:"day-three-call-three",name:"No reply 3 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-900",bg:"tw-bg-blue-600/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-400"},{id:10,value:"reporter",name:"Reported",text:"tw-text-teal-500",textLight:"tw-text-teal-800",bg:"tw-bg-teal-500/10",bgLight:"tw-bg-teal-100",ring:"tw-ring-teal-300"},{id:11,value:"annuler",name:"Canceled",text:"tw-text-red-500",textLight:"tw-text-red-800",bg:"tw-bg-red-500/10",bgLight:"tw-bg-red-100",ring:"tw-ring-red-300"},{id:13,value:"reconfirmer",name:"Reconfirmed",text:"tw-text-cyan-500",textLight:"tw-text-cyan-800",bg:"tw-bg-cyan-500/10",bgLight:"tw-bg-cyan-100",ring:"tw-ring-cyan-300"}],On=[{id:0,value:null,name:"Select",text:"tw-text-neutral-600",bg:"tw-bg-neutral-500/10",ring:"tw-ring-neutral-300"},{id:1,value:"oui",name:"Oui",text:"tw-text-green-500",bg:"tw-bg-green-500/10",ring:"tw-ring-green-300"},{id:2,value:"non",name:"Non",text:"tw-text-pink-500",bg:"tw-bg-pink-500/10",ring:"tw-ring-pink-300"}],Vn=[{id:0,value:null,name:"Select",text:"tw-text-gray-500",textLight:"tw-text-gray-800",bg:"tw-bg-gray-500/10",bgLight:"tw-bg-gray-100",ring:"tw-ring-gray-300"},{id:1,value:"dispatch",name:"Dispatched",text:"tw-text-yellow-500",textLight:"tw-text-yellow-800",bg:"tw-bg-yellow-500/10",bgLight:"tw-bg-yellow-100",ring:"tw-ring-yellow-300"},{id:2,value:"expidier",name:"Shipped",text:"tw-text-fuchsia-500",textLight:"tw-text-fuchsia-800",bg:"tw-bg-fuchsia-500/10",bgLight:"tw-bg-fuchsia-100",ring:"tw-ring-fuchsia-300"},{id:3,value:"livrer",name:"Delivered",text:"tw-text-green-500",bg:"tw-bg-green-500/10",textLight:"tw-text-green-800",bgLight:"tw-bg-green-100",ring:"tw-ring-green-300"},{id:4,value:"reporter",name:"Reported",text:"tw-text-orange-500",bg:"tw-bg-orange-500/10",textLight:"tw-text-orange-800",bgLight:"tw-bg-orange-100",ring:"tw-ring-orange-300"},{id:5,value:"refuser",name:"Refused",text:"tw-text-pink-500",bg:"tw-bg-pink-500/10",textLight:"tw-text-pink-800",bgLight:"tw-bg-pink-100",ring:"tw-ring-pink-300"},{id:6,value:"annuler",name:"Canceled",text:"tw-text-red-500",bg:"tw-bg-red-500/10",textLight:"tw-text-red-800",bgLight:"tw-bg-red-100",ring:"tw-ring-red-300"},{id:9,value:"pas-de-reponse",name:"No Answer",text:"tw-text-yellow-500",bg:"tw-bg-yellow-500/10",textLight:"tw-text-yellow-800",bgLight:"tw-bg-yellow-100",ring:"tw-ring-yellow-300"},{id:10,value:"retourner",name:"Retourned",text:"tw-text-purple-500",bg:"tw-bg-purple-500/10",textLight:"tw-text-purple-800",bgLight:"tw-bg-purple-100",ring:"tw-ring-purple-300"},{id:11,value:"reconfirmer",name:"Reconfirmed",text:"tw-text-indigo-500",bg:"tw-bg-indigo-500/10",textLight:"tw-text-indigo-800",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-300"},{id:12,value:"paid",name:"Paid",text:"tw-text-emerald-500",bg:"tw-bg-emerald-500/10",textLight:"tw-text-emerald-800",bgLight:"tw-bg-emerald-100",ring:"tw-ring-emerald-300"},{id:13,value:"transfer",name:"Transferd",text:"tw-text-violet-500",bg:"tw-bg-violet-500/10",textLight:"tw-text-violet-800",bgLight:"tw-bg-violet-100",ring:"tw-ring-violet-300"},{id:14,value:"livrer-et-retourner",name:"Delivered & Return",text:"tw-text-cyan-500",bg:"tw-bg-cyan-500/10",textLight:"tw-text-cyan-800",bgLight:"tw-bg-cyan-100",ring:"tw-ring-cyan-300"},{id:15,value:"reconfirmer",name:"Reconfirmed",text:"tw-text-emerald-500",bg:"tw-bg-emerald-500/10",textLight:"tw-text-emerald-800",bgLight:"tw-bg-emerald-100",ring:"tw-ring-emerald-300"}],In=[null,"expidier","paid","transfer","dispatch"],Fn={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},Rn=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),jn=(0,s._)("br",null,null,-1),Nn=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),Mn={class:"tw-flex tw-justify-end tw-mt-2"};function Hn(t,e,r,i,l,o){const n=(0,s.up)("VueDatePicker"),d=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",{key:r.order.id},[(0,s.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>o.cancel()),visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",Fn,[Rn,(0,s.Wm)(n,{modelValue:l.date,"onUpdate:modelValue":e[0]||(e[0]=t=>l.date=t),format:o.format},null,8,["modelValue","format"]),jn,Nn,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[a.nr,l.note]]),(0,s._)("div",Mn,[(0,s.Wm)(rt.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleConfirm},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var Yn={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_agente_date=this.realDate,t.reported_agente_note=this.note,t.confirmation="reporter",this.isLoading=!0,la.agenteUpdateConfirmation(t.id,"reporter",t).then((e=>{console.log(e.data),this.$alert({type:"success",title:"Order reported successfully"}),this.$store.dispatch("sale/update",{id:t.id,sale:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},format(t){const e=t.getDate(),r=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,s=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();return this.realDate=`${i}-${s}-${r}`,`${r}/${s}/${i}`},cancel(){this.$emit("cancel")}},mounted(){}};const Zn=(0,p.Z)(Yn,[["render",Hn]]);var Kn=Zn,Bn={props:["confirmation","id","sale"],components:{SaleConfirmationReporting:Kn},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",noteReporter:"",selectedId:0,allOptions:qn,showPopupReporter:!1}},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleResolved(t){t?(this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))):this.showPopup=!1},handleClick(){this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))},handleClickReporter(){this.showPopupReporter=!1},async handleChange(t){if(t.id===this.selectedId)return!1;"confirmer"!==t.value&&"reporter"!==t.value?(this.selectedId=t.id,this.updateOrder()):"reporter"===t.value?this.showPopupReporter=!0:(this.nextOption=t.id,this.showPopup=!0),this.close()},async updateOrder(){return this.isLoading=!0,la.agenteUpdateConfirmation(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmation(this.id,this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},async updateOrderWithNote(){return this.isLoading=!0,la.agenteUpdateConfirmationWithNote(this.id,this.selected.value,this.note).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmationNote(this.id,this.selected.value,this.note),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateConfirmation(t,e){this.$store.dispatch("sale/updateConfirmation",{id:t,confirmation:e})},updateConfirmationNote(t,e,r){this.$store.dispatch("sale/updateConfirmationWithNote",{id:t,confirmation:e,note:r})}},mounted(){this.availableOptions.includes(this.confirmation)?this.selectedId=this.allOptions.find((t=>t.value==this.confirmation)).id:this.selectedId=0}};const Qn=(0,p.Z)(Bn,[["render",En]]);var Gn=Qn;const Jn={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},Xn=["onClick"],td={class:"tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100"},ed={key:1,class:"tw-relative tw-min-w-[100px] tw-flex tw-items-center"};function rd(t,e,r,a,i,l){return l.fetched?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:r.affectation,class:"tw-relative tw-min-w-[100px]"},[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>l.toggle&&l.toggle(...t)),class:"tw-whitespace-nowrap focus:tw-ring-4 tw-ring-neutral-200 tw-bg-neutral-600/10 tw-text-neutral-800 focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center",type:"button"},[(0,s.Uk)((0,et.zw)(l.selected.firstname)+" "+(0,et.zw)(l.selected.lastname)+" ",1),i.isLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(st.t,{key:0,class:"tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,et.zw)(i.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),i.isLoading?((0,s.wg)(),(0,s.j4)(st.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)]),(0,s._)("div",{class:(0,et.C_)([{"tw-hidden":!i.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,s._)("ul",Jn,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.options,(t=>((0,s.wg)(),(0,s.iD)("li",{onClick:e=>l.handleChange(t),key:t.id},[(0,s._)("a",td,(0,et.zw)(t.firstname)+" "+(0,et.zw)(t.lastname),1)],8,Xn)))),128))])],2)])),[[te.L,l.close]]):((0,s.wg)(),(0,s.iD)("div",ed,[(0,s.Wm)(st.t,{class:"tw-animate-spin tw-ml-1 tw-text-orange-500"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})]))}var ad={props:["affectation","id","sale"],data(){return{isOpen:!1,isLoading:!1,selectedId:null,old:null}},computed:{options(){return[{id:null,firstname:"select",lastname:""},...this.deliveries]},selected(){const t=[...this.deliveries.map((t=>parseInt(t.id)))];return null!=this.selectedId&&t.includes(parseInt(this.selectedId))?this.options.filter((t=>t.id==this.selectedId))[0]:{id:null,firstname:"select",lastname:""}},users(){return this.$store.getters["user/users"]},allDeliveries(){return this.users.filter((t=>"delivery"==t.role_name))},fetched(){return this.$store.getters["user/fetched"]},deliveries(){return this.allDeliveries.filter((t=>t.delivery_products.some((t=>this.sale.items.some((e=>e.product_id==t.product_id))))))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(this.old=this.affectation,t.id===this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()},updateOrder(){la.agenteUpdateAffectaion(this.id,this.selectedId).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateAffectation(this.id,this.selected.id),this.isLoading=!1)}),(t=>{this.$handleApiError(t),this.isLoading=!1,this.selectedId=this.old}))},updateAffectation(t,e){this.$store.dispatch("sale/updateAffectation",{id:t,affectation:e})}},mounted(){this.selectedId=this.affectation}};const sd=(0,p.Z)(ad,[["render",rd]]);var id=sd;const ld={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},od=["onClick"];function nd(t,e,r,a,i,l){const o=(0,s.up)("SaleDeliveryReporting");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:r.delivery,class:"tw-relative tw-min-w-[100px]"},[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>l.toggle&&l.toggle(...t)),class:(0,et.C_)([[l.selected.text,l.selected.bg,l.selected.ring],"focus:tw-ring-4 tw-min-w-[100px] focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between"]),type:"button"},[(0,s.Uk)((0,et.zw)(l.selected.name)+" ",1),i.isLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(st.t,{key:0,class:"tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,et.zw)(i.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),i.isLoading?((0,s.wg)(),(0,s.j4)(st.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)],2),(0,s._)("div",{class:(0,et.C_)([{"tw-hidden":!i.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,s._)("ul",ld,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.options,(t=>((0,s.wg)(),(0,s.iD)("li",{onClick:e=>l.handleChange(t),key:t.id},[(0,s._)("a",{class:(0,et.C_)(["tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100",[t.text,t.bg]])},(0,et.zw)(t.name),3)],8,od)))),128))])],2),(0,s.Wm)(o,{order:r.sale,visible:i.showPopupReporter,onCancel:e[1]||(e[1]=t=>i.showPopupReporter=!1)},null,8,["order","visible"])])),[[te.L,l.close]])}const dd={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},wd=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),cd=(0,s._)("br",null,null,-1),ud=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),pd={class:"tw-flex tw-justify-end tw-mt-2"};function md(t,e,r,i,l,o){const n=(0,s.up)("VueDatePicker"),d=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",{key:r.order.id},[(0,s.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>o.cancel()),visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",dd,[wd,(0,s.Wm)(n,{modelValue:l.date,"onUpdate:modelValue":e[0]||(e[0]=t=>l.date=t),format:o.format},null,8,["modelValue","format"]),cd,ud,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[a.nr,l.note]]),(0,s._)("div",pd,[(0,s.Wm)(rt.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleConfirm},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var gd={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_delivery_date=this.realDate,t.reported_delivery_note=this.note,t.delivery="reporter",this.isLoading=!0,la.deliveryUpdateDelivery(t.id,"reporter",t).then((()=>{this.$alert({type:"success",title:"Order reported successfully"}),this.$store.dispatch("sale/update",{id:t.id,sale:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},format(t){const e=t.getDate(),r=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,s=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();return this.realDate=`${i}-${s}-${r}`,`${r}/${s}/${i}`},cancel(){this.$emit("cancel")}},mounted(){}};const hd=(0,p.Z)(gd,[["render",md]]);var fd=hd,vd={props:["delivery","id","sale"],components:{SaleDeliveryReporting:fd},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",selectedId:0,allOptions:Vn,showPopupReporter:!1}},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){return t.id!==this.selectedId&&("reporter"!==t.value?(this.selectedId=t.id,this.updateOrder(),this.close(),!0):void("reporter"==t.value&&(this.showPopupReporter=!0,this.close())))},async updateOrder(){return this.isLoading=!0,la.deliveryUpdateDelivery(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateDelivery(this.id,this.selected.value),this.isLoading=!1),"QUANTITY_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.message})}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateDelivery(t,e){this.$store.dispatch("sale/updateDelivery",{id:t,delivery:e})}},mounted(){this.availableOptions.includes(this.delivery)?this.selectedId=this.allOptions.find((t=>t.value==this.delivery)).id:this.selectedId=0}};const yd=(0,p.Z)(vd,[["render",nd]]);var xd=yd;const bd={key:0};function _d(t,e,r,a,i,l){const o=(0,s.up)("SaleHistory"),n=(0,s.up)("popup-full"),d=(0,s.up)("UpdateSale");return r.sale?((0,s.wg)(),(0,s.iD)("div",bd,[(0,s.Wm)(rt.T,{link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+r.sale.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"]),t.$can("update_sale")?((0,s.wg)(),(0,s.j4)(rt.T,{key:0,onClick:e[0]||(e[0]=t=>i.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),(t.$can("view_sale"),(0,s.kq)("",!0)),(t.$can("delete_sale"),(0,s.kq)("",!0)),(0,s.Wm)(rt.T,{onClick:e[2]||(e[2]=t=>i.showHistoryPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"teal",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-sort-clock-ascending-outline")])),_:1})])),_:1}),(0,s.Wm)(n,{visible:i.showHistoryPopup,onCancel:e[4]||(e[4]=t=>i.showHistoryPopup=!1)},{default:(0,s.w5)((()=>[i.showHistoryPopup?((0,s.wg)(),(0,s.j4)(o,{key:0,onCancel:e[3]||(e[3]=t=>i.showHistoryPopup=!1),sale:r.sale},null,8,["sale"])):(0,s.kq)("",!0)])),_:1},8,["visible"]),(0,s.Wm)(d,{visible:i.showUpdatePopup,"onUpdate:visible":e[5]||(e[5]=t=>i.showUpdatePopup=t),order:r.sale},null,8,["visible","order"])])):(0,s.kq)("",!0)}var kd=r(7103),Cd=r(795),Dd=r(2773);const Sd={class:"md:tw-w-[50%] tw-max-h-full tw-relative tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},zd={key:0,class:"tw-w-full tw-h-full"},Ud={key:1,class:"tw-p-5"},Ld={class:"d-flextw-flex-col justify-space-between flex-grow-1"},Pd={class:"tw-flex tw-items-center tw-gap-2 tw-my-2"},Ad={class:"tw-text-sm tw-capitalize tw-text-neutral-600"},Wd={class:"flex-shrink-0 tw-text-neutral-500 tw-flex tw-items-center tw-gap-2 tw-text-sm"},$d={class:"d-flextw-flex-col justify-space-between flex-grow-1"},Ed={class:"tw-flex tw-flex-col tw-my-2"},qd=(0,s._)("div",null," New Order Created ",-1),Td={class:"flex-shrink-0 tw-flex tw-items-center tw-gap-2 tw-text-sm"};function Od(t,e,r,a,i,l){const o=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",Sd,[i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",zd,[(0,s.Wm)(o,{class:"text-primary-color"})])),(0,s.Wm)(rt.T,{onClick:l.cancel,icon:"mdi-close",variant:"flat",size:"w-small",color:"red",class:"tw-absolute tw-top-3 tw-z-10 tw-right-3"},null,8,["onClick"]),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",Ud,[(0,s.Wm)(Cd.R,{density:"compact",side:"end"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.events,(t=>((0,s.wg)(),(0,s.j4)(Dd.N,{key:t.id,class:"mb-4","dot-color":l.eventColor(t.type),size:"x-small"},{default:(0,s.w5)((()=>[(0,s._)("div",Ld,[(0,s._)("div",Pd,[(0,s.Wm)(kd.v,{class:"ms-0 tw-capitalize tw-w-fit",color:l.eventColor(t.type),label:"",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,et.zw)(t.type),1)])),_:2},1032,["color"]),"responsibility"!=t.type?((0,s.wg)(),(0,s.j4)(st.t,{key:0,size:"x-small",color:"grey"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-arrow-right")])),_:1})):(0,s.kq)("",!0),"responsibility"!=t.type?((0,s.wg)(),(0,s.j4)(kd.v,{key:1,class:"ms-0 tw-capitalize tw-w-fit",color:"green",label:"",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,et.zw)(t.historique),1)])),_:2},1024)):(0,s.kq)("",!0)]),(0,s._)("div",Ad,(0,et.zw)(t.users.firstname)+" "+(0,et.zw)(t.users.lastname),1),(0,s._)("div",Wd,[(0,s._)("span",null,(0,et.zw)(t.created_at?.split("T")[0]),1),(0,s._)("span",null,(0,et.zw)(t.created_at?.split("T")[1].split(".")[0]),1)])])])),_:2},1032,["dot-color"])))),128)),(0,s.Wm)(Dd.N,{class:"mb-4","dot-color":"green",size:"x-small"},{default:(0,s.w5)((()=>[(0,s._)("div",$d,[(0,s._)("div",Ed,[(0,s.Wm)(kd.v,{class:"ms-0 tw-capitalize tw-w-fit",color:"green",label:"",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Order Created ")])),_:1}),qd]),(0,s._)("div",Td,[(0,s._)("span",null,(0,et.zw)(r.sale.created_at?.split("T")[0]),1),(0,s._)("span",null,(0,et.zw)(r.sale.created_at?.split("T")[1].split(".")[0]),1)])])])),_:1})])),_:1})])):(0,s.kq)("",!0)])}var Vd={props:["sale"],data(){return{isLoaded:!1,allEvents:[]}},computed:{events(){return[...this.allEvents].reverse()}},methods:{cancel(){this.$emit("cancel")},getHistory(){this.isLoaded=!1,la.history(this.sale.id).then((t=>{console.log(t.data),this.allEvents=t.data.data.orders}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))},eventColor(t){let e={confirmation:"primary-color",delivery:"blue",upsell:"purple",affectation:"cyan"};return["confirmation","delivery","upsell","affectation"].includes(t)?e[t]:"primary-color"}},mounted(){this.getHistory()}};const Id=(0,p.Z)(Vd,[["render",Od]]);var Fd=Id;const Rd={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},jd={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[950px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},Nd=(0,s._)("h1",{class:"tw-text-lg"},"Update Order",-1),Md={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},Hd={class:"md:tw-col-span-6 tw-col-span-12"},Yd=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),Zd={class:"md:tw-col-span-6 tw-col-span-12"},Kd=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),Bd={class:"md:tw-col-span-6 tw-col-span-12"},Qd=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),Gd=["value"],Jd=["value"],Xd={class:"md:tw-col-span-6 tw-col-span-12"},tw=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),ew={class:"md:tw-col-span-12 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},rw=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Confirmation",-1),aw={class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},sw={class:"tw-col-span-12"},iw=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note:",-1),lw={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},ow={class:"tw-col-span-12 md:tw-col-span-4"},nw=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Date:",-1),dw={class:"tw-col-span-12 md:tw-col-span-8"},ww=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Note:",-1),cw={class:"md:tw-col-span-6 tw-col-span-12"},uw=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Affectation",-1),pw={class:"md:tw-col-span-6 tw-col-span-12"},mw=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Upsell",-1),gw=["value"],hw={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-4"},fw={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},vw={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit -tw-rotate-90 tw-scale-75"},yw=(0,s._)("div",{class:"tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),xw={class:"tw-flex tw-flex-col tw-justify-center"},bw=(0,s._)("p",{class:"tw-col-span-12 tw-mt-5 tw-mb-2"},"Order Items",-1),_w={key:1,class:"tw-col-span-12 tw-rounded tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},kw={key:2,class:"md:tw-col-span-12 tw-col-span-12"},Cw={class:"tw-max-w-full tw-overflow-auto"},Dw={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},Sw={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},zw={class:"tw-mx-auto tw-w-[50px] tw-h-[35px] tw-shadow tw-shadow-gray-200 tw-rounded tw-overflow-hidden tw-cursor-pointer"},Uw=["src"],Lw={scope:"row",class:"tw-pr-6 tw-py-2 tw-font-medium tw-text-gray-900"},Pw=["onUpdate:modelValue"],Aw=(0,s._)("option",{value:0},"Select",-1),Ww=["value"],$w={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Ew=["disabled","onUpdate:modelValue"],qw=(0,s._)("option",{value:0},"Select",-1),Tw=["value"],Ow={key:0},Vw={key:1},Iw={key:2},Fw={key:3},Rw=["value"],jw={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Nw={class:"md:tw-col-span-6 tw-col-span-12"},Mw=["onUpdate:modelValue"],Hw={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Yw={key:0},Zw={key:1,class:"md:tw-col-span-6 tw-col-span-12"},Kw=["onUpdate:modelValue"],Bw={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Qw={class:"tw-w-full tw-col-span-12 tw-flex tw-justify-end tw-mt-3"},Gw=(0,s._)("span",{class:"!tw-text-sm !tw-capitalize"},"Add",-1),Jw={class:"md:tw-col-span-12 tw-col-span-12"},Xw={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},tc=(0,s._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),ec={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},rc=(0,s._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-mb-2 tw-whitespace-nowrap"},"Price: ",-1),ac={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},sc=(0,s._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),ic={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},lc=(0,s._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-whitespace-nowrap"},"Total Price: ",-1),oc={class:"tw-text-xl tw-text-green-500 tw-font-bold tw-px-2 tw-py-1 tw-rounded tw-bg-green-100"},nc={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},dc=(0,s._)("span",{class:"text-white"}," Cancel ",-1),wc=(0,s._)("span",{class:"text-white"}," Update ",-1);function cc(t,e,r,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("AddOrderConfirmation"),w=(0,s.up)("AddOrderAffectation"),c=(0,s.up)("ProductOffers"),u=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(u,{onCancel:e[14]||(e[14]=e=>t.$emit("update:visible",!1)),visible:r.visible},{default:(0,s.w5)((()=>[o.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Rd,[(0,s.Wm)(n)])),o.isLoaded?((0,s.wg)(),(0,s.iD)("div",jd,[Nd,(0,s._)("div",Md,[(0,s._)("div",Hd,[Yd,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.fullname]])]),(0,s._)("div",Zd,[Kd,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.phone]])]),(0,s._)("div",Bd,[Qd,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[(0,s._)("option",{disabled:"",value:l.sale.city},(0,et.zw)(l.sale.city),9,Gd),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,et.zw)(t.name),9,Jd)))),128))],512),[[a.bM,l.sale.city]])]),(0,s._)("div",Xd,[tw,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>l.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.adresse]])]),(0,s._)("div",ew,[rw,(0,s.Wm)(d,{order:l.sale,id:l.sale.id,confirmation:l.sale.confirmation,"onUpdate:confirmation":e[4]||(e[4]=t=>l.sale.confirmation=t),onConfirmed:e[5]||(e[5]=t=>l.sale.note=t),onReported:o.handleReported,onChange:o.handleConfirmationChange},null,8,["order","id","confirmation","onReported","onChange"]),(0,s._)("div",aw,[(0,s._)("div",sw,[iw,(0,s.wy)((0,s._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[6]||(e[6]=t=>l.sale.note=t)},null,512),[[a.nr,l.sale.note]])])]),"reporter"==l.sale.confirmation&&l.sale.reported_agente_date?((0,s.wg)(),(0,s.iD)("div",lw,[(0,s._)("div",ow,[nw,(0,s._)("div",null,(0,et.zw)(l.sale.reported_agente_date.split("T")[0]),1)]),(0,s._)("div",dw,[ww,(0,s.wy)((0,s._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[7]||(e[7]=t=>l.sale.reported_agente_note=t)},null,512),[[a.nr,l.sale.reported_agente_note]])])])):(0,s.kq)("",!0)]),(0,s._)("div",cw,[uw,(0,s.Wm)(w,{"product-ids":o.product_ids,items:l.items,"onUpdate:items":e[8]||(e[8]=t=>l.items=t),order:l.sale,confirmation:l.sale.confirmation,affectation:l.sale.affectation,"onUpdate:affectation":e[9]||(e[9]=t=>l.sale.affectation=t),id:l.sale.id},null,8,["product-ids","items","order","confirmation","affectation","id"])]),(0,s._)("div",pw,[mw,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>l.sale.upsell=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.upsells,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,key:t.id},(0,et.zw)(t.name),9,gw)))),128))],512),[[a.bM,l.sale.upsell]])]),(0,s.kq)("",!0),(0,s._)("div",hw,[(0,s._)("div",fw,[(0,s._)("label",vw,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=t=>l.sale.counts_from_warehouse=t),class:"tw-sr-only tw-peer"},null,512),[[a.e8,l.sale.counts_from_warehouse]]),yw]),(0,s._)("label",xw,[(0,s._)("span",{class:(0,et.C_)([[l.sale.counts_from_warehouse?"tw-text-orange-500":"tw-text-neutral-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Warehouse",2),(0,s._)("span",{class:(0,et.C_)([[l.sale.counts_from_warehouse?"tw-text-neutral-500":"tw-text-orange-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Delivery",2)])])]),bw,l.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",_w," No Order items ")),l.items.length?((0,s.wg)(),(0,s.iD)("div",kw,[(0,s._)("div",Cw,[((0,s.wg)(),(0,s.iD)("table",{key:l.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,s._)("thead",Dw,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,s._)("th",{class:(0,et.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",Sw,(0,et.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.items,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:t.product.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[((0,s.wg)(),(0,s.iD)("th",{scope:"row",class:"tw-px-2 tw-py-2",key:t.product.id},[(0,s._)("div",zw,[o.product_images[e]?((0,s.wg)(),(0,s.iD)("img",{key:0,class:"tw-w-full tw-h-full tw-object-contain",src:l.serverUrl+"storage/"+o.product_images[e]},null,8,Uw)):(0,s.kq)("",!0)])])),(0,s._)("th",Lw,[(0,s._)("div",null,[(0,s._)("div",null,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e=>t.product.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[Aw,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.filtredProducts,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,et.zw)(t.name),9,Ww)))),128))],8,Pw),[[a.bM,t.product.id]])])])]),(0,s._)("th",$w,[(0,s._)("div",null,[0!=t.product.id?(0,s.wy)(((0,s.wg)(),(0,s.iD)("select",{key:0,disabled:1==o.getVariations(t.product)?.variations?.length,"onUpdate:modelValue":e=>t.product_variation.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[qw,o.getVariations(t.product)?.variations?.length>1?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(o.getVariations(t.product)?.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},[t.size||t.color?t.size&&"-"!=t.size&&t.color&&"-"!=t.color?((0,s.wg)(),(0,s.iD)("p",Vw,(0,et.zw)(t.size)+" / "+(0,et.zw)(t.color),1)):t.size&&"-"!=t.size?((0,s.wg)(),(0,s.iD)("p",Iw,(0,et.zw)(t.size),1)):t.color?((0,s.wg)(),(0,s.iD)("p",Fw,(0,et.zw)(t.color),1)):(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",Ow,"-"))],8,Tw)))),128)):((0,s.wg)(),(0,s.iD)("option",{key:1,value:o.getVariations(t.product)?.variations[0]?.id}," Default ",8,Rw))],8,Ew)),[[a.bM,t.product_variation.id]]):(0,s.kq)("",!0)])]),(0,s._)("th",jw,[(0,s._)("div",Nw,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,Mw),[[a.nr,t.quantity]])])]),(0,s._)("th",Hw,[(0,s._)("div",null,[null==t.price?((0,s.wg)(),(0,s.iD)("div",Yw," - ")):((0,s.wg)(),(0,s.iD)("div",Zw,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e=>t.price=e,placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,Kw),[[a.nr,t.price]])]))])]),(0,s._)("th",Bw,[(0,s._)("div",null,[(0,s.Wm)(rt.T,{onClick:e=>o.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])]))])])):(0,s.kq)("",!0),(0,s._)("div",Qw,[(0,s._)("div",null,[(0,s.Wm)(rt.T,{onClick:o.addNewRow,class:"mr-2 !tw-px-1 !tw-py-1 !tw-pr-2 tw-flex tw-items-center tw-gap-2","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1}),Gw])),_:1},8,["onClick"])])]),(0,s._)("div",Jw,[(0,s.Wm)(c,{"product-ids":o.product_ids},null,8,["product-ids"])]),(0,s._)("div",Xw,[tc,(0,s._)("div",ec,[rc,(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e[13]||(e[13]=t=>l.sale.price=t),class:"tw-py-1 tw-max-w-[100px] tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.price]])])]),(0,s._)("div",ac,[sc,(0,s._)("div",ic,[lc,(0,s._)("div",oc,(0,et.zw)(l.currency)+" "+(0,et.zw)(o.total_price),1)])])]),(0,s._)("div",nc,[(0,s.Wm)(rt.T,{onClick:o.handleCancel,color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[dc])),_:1},8,["onClick"]),(0,s.Wm)(rt.T,{loading:l.isLoading,onClick:o.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[wc])),_:1},8,["loading","onClick"])])])):(0,s.kq)("",!0)])),_:1},8,["visible"])])}const uc={class:"tw-relative"},pc=["value"],mc={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},gc=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter note",-1),hc={class:"tw-flex tw-justify-end tw-mt-2"};function fc(t,e,r,i,l,o){const n=(0,s.up)("popup-full"),d=(0,s.up)("AddOrderReporting");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:r.confirmation,class:"tw-relative tw-min-w-[100px] tw-w-full"},[(0,s._)("div",null,[(0,s._)("div",uc,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.confirmationValue=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allOptions,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,et.C_)([t.text,!t.value&&"!tw-text-gray-700"]),key:t.id,value:t.value},(0,et.zw)(t.name),11,pc)))),128))],512),[[a.bM,o.confirmationValue]]),(0,s.Wm)(st.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s.Wm)(n,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>l.showPopup=!1),visible:l.showPopup},{default:(0,s.w5)((()=>[(0,s._)("div",mc,[gc,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"3",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[a.nr,l.note]]),(0,s._)("div",hc,[(0,s.Wm)(rt.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleClick},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"]),(0,s.Wm)(d,{order:r.order,onConfirm:o.handleReportedDate,visible:l.showPopupReporter,onCancel:e[3]||(e[3]=t=>l.showPopupReporter=!1)},null,8,["order","onConfirm","visible"])])),[[te.L,o.close]])}const vc={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},yc=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),xc=(0,s._)("br",null,null,-1),bc=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),_c={class:"tw-flex tw-justify-end tw-mt-2"};function kc(t,e,r,i,l,o){const n=(0,s.up)("VueDatePicker"),d=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",{key:r.order.id},[(0,s.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>o.cancel()),visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",vc,[yc,(0,s.Wm)(n,{modelValue:l.date,"onUpdate:modelValue":e[0]||(e[0]=t=>l.date=t),format:o.format},null,8,["modelValue","format"]),xc,bc,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[a.nr,l.note]]),(0,s._)("div",_c,[(0,s.Wm)(rt.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleConfirm},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var Cc={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_agente_date=this.realDate,t.reported_agente_note=this.note,t.confirmation="reporter",this.$emit("confirm",{reported_agente_date:this.realDate,reported_agente_note:this.note}),this.isLoading=!0},format(t){const e=t.getDate(),r=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,s=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();return this.realDate=`${i}-${s}-${r}`,`${r}/${s}/${i}`},cancel(){this.$emit("cancel")}}};const Dc=(0,p.Z)(Cc,[["render",kc]]);var Sc=Dc,zc={props:["confirmation","id","order"],components:{AddOrderReporting:Sc},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",selectedId:0,allOptions:qn,reported_agente_date:null,reported_agente_note:"",showPopupReporter:!1}},watch:{},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},confirmationValue:{get(){return this.confirmation},set(t){switch(t){case"reporter":this.showPopupReporter=!0;break;case"confirmer":this.showPopup=!0;break;default:this.$emit("update:confirmation",t);break}}},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleResolved(t){t?(this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))):this.showPopup=!1},handleReportedDate(t){this.reported_agente_date=t.reported_agente_date,this.reported_agente_note=t.reported_agente_note,this.$emit("update:confirmation","reporter"),this.$emit("reported",t),this.showPopupReporter=!1},handleClick(){this.showPopup=!1,this.$emit("update:confirmation","confirmer"),this.$emit("confirmed",this.note)},async handleChange(t){if(t.id===this.selectedId)return!1;"confirmer"!==t.value&&"reporter"!==t.value?(this.selectedId=t.id,this.updateOrder()):"reporter"===t.value?this.showPopupReporter=!0:(this.nextOption=t.id,this.showPopup=!0),this.close()},async updateOrder(){return this.isLoading=!0,la.agenteUpdateConfirmation(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmation(this.id,this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t)))},async updateOrderWithNote(){return this.isLoading=!0,la.agenteUpdateConfirmationWithNote(this.id,this.selected.value,this.note).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmationWithNote(this.id,this.selected.value,this.note),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateConfirmation(t,e){this.$store.dispatch("order/updateConfirmation",{id:t,confirmation:e}),this.$emit("update",e)},updateConfirmationWithNote(t,e,r){this.$store.dispatch("order/updateConfirmationWithNote",{id:t,confirmation:e,note:r}),this.$emit("update",e)}},mounted(){this.availableOptions.includes(this.confirmation)?this.selectedId=this.allOptions.find((t=>t.value==this.confirmation)).id:this.selectedId=0}};const Uc=(0,p.Z)(zc,[["render",fc]]);var Lc=Uc;const Pc={class:"tw-relative"},Ac=["disabled"],Wc=["value"],$c={key:1,class:"tw-relative tw-min-w-[100px] tw-flex tw-items-center"};function Ec(t,e,r,i,l,o){return l.fetched?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:r.affectation,class:"tw-relative tw-min-w-[100px]"},[(0,s._)("div",null,[(0,s._)("div",Pc,[(0,s.wy)((0,s._)("select",{disabled:"confirmer"!=r.confirmation,"onUpdate:modelValue":e[0]||(e[0]=t=>o.affectationValue=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.options,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.id},(0,et.zw)(t.firstname+" "+t.lastname),9,Wc)))),128))],8,Ac),[[a.bM,o.affectationValue]]),(0,s.Wm)(st.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])),[[te.L,o.close]]):((0,s.wg)(),(0,s.iD)("div",$c,[(0,s.Wm)(st.t,{class:"tw-animate-spin tw-ml-1 tw-text-orange-500"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})]))}var qc={props:["affectation","id","order","confirmation","items","productIds"],data(){return{isOpen:!1,isLoading:!1,selectedId:null,fetched:!1}},computed:{options(){return[{id:null,firstname:"select",lastname:""},...this.deliveries]},order_items(){return this.items},affectationValue:{get(){return this.affectation},set(t){this.$emit("update:affectation",t)}},selected(){const t=[...this.deliveries.map((t=>parseInt(t.id)))];return null!=this.selectedId&&t.includes(parseInt(this.selectedId))?this.options.filter((t=>t.id==this.selectedId))[0]:{id:null,firstname:"select",lastname:""}},users(){return this.$store.getters["user/users"]},allDeliveries(){return this.users.filter((t=>"delivery"==t.role_name))},deliveries(){return this.allDeliveries.filter((t=>t.delivery_products.some((t=>this.productIds.includes(t.product_id)))))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(t.id===this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()},getUsers(){this.fetched=!1,X.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),this.$store.dispatch("user/setFetched",!0),this.fetched=!0}})).catch(this.$handleApiError)}},mounted(){this.selectedId=this.affectation,this.getUsers()}};const Tc=(0,p.Z)(qc,[["render",Ec]]);var Oc=Tc;const Vc=(0,s._)("h1",{class:"tw-mb-2 tw-font-medium"},"Offers",-1),Ic={class:"tw-relative tw-overflow-x-auto tw-border-b sm:tw-rounded"},Fc={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Rc=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-bg-gray-50"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Product Name"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Quantity"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Price"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Note")])],-1),jc={class:"tw-px-6 tw-py-4"},Nc={class:"tw-px-6 tw-py-4"},Mc={class:"tw-px-6 tw-py-4"},Hc={class:"tw-px-6 tw-py-4"},Yc={class:"tw-max-w-[250px] tw-text-sm"},Zc={key:0},Kc=(0,s._)("td",{colspan:"5"},[(0,s._)("p",{class:"tw-text-center tw-p-5"}," No Offers ")],-1),Bc=[Kc];function Qc(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[Vc,(0,s._)("div",null,[(0,s._)("div",Ic,[(0,s._)("table",Fc,[Rc,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.offers,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.key,class:"odd:tw-bg-white even:tw-bg-gray-50 tw-border-b"},[(0,s._)("td",jc,(0,et.zw)(l.getProduct(t.product_id)?.name),1),(0,s._)("td",Nc,(0,et.zw)(t.quantity),1),(0,s._)("td",Mc,(0,et.zw)(t.price)+" "+(0,et.zw)(i.currency),1),(0,s._)("td",Hc,[(0,s._)("p",Yc,(0,et.zw)(t.note),1)])])))),128)),0==l.offers.length?((0,s.wg)(),(0,s.iD)("tr",Zc,Bc)):(0,s.kq)("",!0)])])])])])}var Gc={props:["productIds"],data(){return{currency:c}},computed:{products(){return this.$store.getters["product/products"]},offers(){return this.products.filter((t=>this.productIds.includes(t.id))).flatMap((t=>t.offers))}},methods:{getProduct(t){return this.products.find((e=>e.id==t))}}};const Jc=(0,p.Z)(Gc,[["render",Qc]]);var Xc=Jc,tu={components:{AddOrderConfirmation:Lc,AddOrderAffectation:Oc,ProductOffers:Xc},props:["visible","order"],data(){return{upsells:On,serverUrl:d,currency:c,isLoading:!1,isAddItem:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],reported_date:null,price:0,sale:{fullname:"",phone:"",city:"",adresse:"",price:0,upsell:null,confirmation:null,counts_from_warehouse:!1}}},watch:{product_id(){this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0},"sale.confirmation":{deep:!0,handler(t){"confirmer"!=t&&(this.sale.affectation=null,this.sale.delivery=null)}},product_ids:{deep:!0,handler(t,e){this.items.map(((r,a)=>{if(0==r.product.id)return r;const s=this.getVariations(r.product)?.variations;return e[a]==t[r]||s.some((t=>t.id==r.product_variation.id))||(r.product_variation={id:0},r.product_variation_id=0),1==s?.length&&(r.product_variation=s[0],r.product_variation_id=s[0].id),r}))}}},computed:{products(){return this.$store.getters["product/products"]},product_images(){return this.items.map((t=>0==t.product.id?null:this.products.find((e=>e.id==t.product.id))?.image))},product_ids(){return this.items.map((t=>t.product.id))},isLoaded(){return this.$store.getters["product/fetched"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,r)=>e.indexOf(t.id)===r))},filtredProducts(){return this.products},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},selectedProduct(){return this.products.find((t=>t.id==this.product_id))},total_price:{get(){const t=this.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(this.sale.price?this.sale.price:0)+parseFloat(t)}},isItemsValid(){if(0==this.items.length)return!1;const t=this.items.some((t=>0==t.product.id||0==t.product_variation_id||0==t.quantity));return!t},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city}},methods:{deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},handleConfirmationChange(){"confirmer"!=this.sale.confirmation&&(this.sale.affectation=null)},addNewRow(){const t={id:this.item_id,product_id:0,product_ref:null,product:{id:0},product_variation:{id:0},product_variation_id:0,order_id:this.order.id,quantity:0,price:0};this.items.push(t)},getVariations(t){return this.products.find((e=>e.id==t.id))},formatItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const r=e.variations.find((e=>e.id==t.product_variation.id));return r?{...t,product:e,product_id:e.id,product_variation:r,product_variation_id:r.id,product_ref:e.ref}:t}));return this.items=t,t},addItem(){if([this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),r={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:this.price};this.items.push(r),this.product_id=0,this.product_variation_id=0,this.price=0,this.item_id+=1},update(){if(this.formatItems(),!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;if("annuler"==this.sale.confirmation&&!this.sale.note)return this.$alert({type:"warning",title:"Add Cancellation note."}),!1;if(!this.isItemsValid)return this.$alert({type:"warning",title:"Order Items are not valid"}),!1;this.isLoading=!0;const t={id:this.sale.id,fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,upsell:this.sale.upsell,counts_from_warehouse:this.sale.counts_from_warehouse,orderItems:this.items,confirmation:this.sale.confirmation,note:this.sale.note,affectation:this.sale.affectation,reported_agente_note:this.sale.reported_agente_note,reported_agente_date:this.sale.reported_agente_date};"confirmer"!=t.confirmation&&(t.affectation=null,t.delivery=null),this.isLoading=!0,la.update(t.id,t).then((e=>{"SUCCESS"==e.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"Order updated"}),this.$store.dispatch("sale/update",{id:t.id,sale:e.data.data.sale}),this.$emit("update:visible",!1),this.$emit("updateOrder",e.data.data.sale))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},handleCancel(){this.sale={...this.order},this.items=[...this.order.items],this.$emit("update:visible",!1)},handleReported(t){this.sale.reported_agente_note=t.reported_agente_note,this.sale.reported_agente_date=t.reported_agente_date},checkVariant(t,e){const r=this.products.find((e=>e.id==t));if(!r)return{exists:!1};let a=r.variations.find((t=>t.id==e));return a||(a=r.variations.length>0?r.variations[0]:null),{exists:!0,variation:a}},getProducts(){return sa.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.sale={...this.order},this.items=[...this.order.items]}};const eu=(0,p.Z)(tu,[["render",cc]]);var ru=eu,au={props:["sale"],name:"saleActions",components:{SaleHistory:Fd,UpdateSale:ru},data(){return{showPopup:!1,showUpdatePopup:!1,showHistoryPopup:!1,isLoading:!1}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{}};const su=(0,p.Z)(au,[["render",_d]]);var iu=su,lu={props:{sales:{required:!0},selectedReset:{required:!1,default:[]}},components:{SaleConfirmation:Gn,SaleAffectation:id,SaleDelivery:xd,SaleActions:iu},data(){return{allowedLimit:[5,10,20,50,100,300,500],currentPage:1,paginationLimit:50,todayDate:null,selected:[],isAllSelected:!1,columns:["id","date","city","products","client","confirmation","affectation","delivery","price","actions"]}},watch:{selectedReset(t){this.selected=t,0==this.selected.length&&(this.isAllSelected=!1)},paginationLimit(){this.currentPage=1},selected(t){this.$emit("selected",t)}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.sales.length/this.paginationLimit)},items(){const t=[...this.reportedForToday,...this.sales.filter((t=>!this.isReportedToday(t)))];return t.slice(this.prevRange,this.nextRange)},reportedForToday(){return this.sales.filter(this.isReportedToday)}},methods:{getPrice(t){return Bi(t)},isReportedToday(t){return this.isConfirmationReportedToday(t)||this.isDeliveryReportedToday(t)},isDeliveryReportedToday(t){return"reporter"==t.delivery&&t.reported_delivery_date?.split("T")[0]==this.todayDate},isConfirmationReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date?.split("T")[0]==this.todayDate},handleSelect(t,e){t.target.checked?this.selected=[...this.selected,e]:this.selected=this.selected.filter((t=>t!=e))},isSelected(t){return this.selected.includes(t)},handleSelectAll(t){t.target.checked?this.selected=[...this.items.map((t=>t.id))]:this.selected=[]}},mounted(){const t=new Date,e=t.getDate(),r=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,s=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();this.todayDate=`${i}-${s}-${r}`}};const ou=(0,p.Z)(lu,[["render",Un]]);var nu=ou,du={components:{SalesTable:nu},data(){return{columns:[{prop:"id",name:"#"},{prop:"city",name:"City"},{prop:"date",name:"Date"},{prop:"client",name:"Client"},{prop:"product",name:"Product"},{prop:"upsell",name:"Upsell"},{prop:"confirmation",name:"Confirmation"},{prop:"affectation",name:"Affected"},{prop:"delivery",name:"Delivery"},{prop:"quantity",name:"Qty"},{prop:"price",name:"Price"},{prop:"actions",name:"Actions"}]}},computed:{sales(){return this.$store.getters["notification/notifications"]["reportedOrderAgente"]||[]},fetched(){return this.$store.getters["notification/fetched"]}}};const wu=(0,p.Z)(du,[["render",To]]);var cu=wu;const uu={key:0};function pu(t,e,r,a,i,l){const o=(0,s.up)("SalesTable");return l.fetched?((0,s.wg)(),(0,s.iD)("div",uu,[((0,s.wg)(),(0,s.j4)(o,{key:l.sales.length,columns:i.columns,sales:l.sales},null,8,["columns","sales"]))])):(0,s.kq)("",!0)}var mu={components:{SalesTable:nu},data(){return{columns:[{prop:"id",name:"#"},{prop:"city",name:"City"},{prop:"date",name:"Date"},{prop:"client",name:"Client"},{prop:"product",name:"Product"},{prop:"upsell",name:"Upsell"},{prop:"confirmation",name:"Confirmation"},{prop:"affectation",name:"Affected"},{prop:"delivery",name:"Delivery"},{prop:"quantity",name:"Qty"},{prop:"price",name:"Price"},{prop:"actions",name:"Actions"}]}},computed:{sales(){return this.$store.getters["notification/notifications"]["reportedOrderDelivery"]||[]},fetched(){return this.$store.getters["notification/fetched"]}}};const gu=(0,p.Z)(mu,[["render",pu]]);var hu=gu;function fu(t,e,r,a,i,l){const o=(0,s.up)("ProductsTable");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(o,{columns:i.columns,products:l.products},null,8,["columns","products"])])}const vu={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},yu={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},xu={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},bu=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),_u={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},ku=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),Cu={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},Du={class:"tw-px-6 tw-py-4"},Su={class:"tw-px-6 tw-py-4"},zu={class:"tw-px-6 tw-py-4"},Uu={class:"tw-px-6 tw-py-4"},Lu={class:"tw-px-6 tw-py-4"},Pu={class:"tw-px-6 tw-py-4"},Au={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},Wu={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},$u={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},Eu=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),qu=["value"],Tu={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},Ou={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},Vu={class:"tw-text-white"};function Iu(t,e,r,i,l,o){const n=(0,s.up)("ProductActions");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",vu,[(0,s._)("table",yu,[(0,s._)("thead",xu,[(0,s._)("tr",null,[bu,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",_u,(0,et.zw)(t.name),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.products,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[ku,(0,s._)("th",Cu,(0,et.zw)(t.id),1),(0,s._)("td",Du,(0,et.zw)(t.ref),1),(0,s._)("td",Su,(0,et.zw)(t.name),1),(0,s._)("td",zu,(0,et.zw)(t.buying_price)+" "+(0,et.zw)(l.currency),1),(0,s._)("td",Uu,(0,et.zw)(t.selling_price)+" "+(0,et.zw)(l.currency),1),(0,s._)("td",Lu,(0,et.zw)(o.calculQty(t.variations)),1),(0,s._)("td",Pu,(0,et.zw)(t.created_at.split("T")[0]),1),(0,s._)("td",Au,[(0,s.Wm)(n,{product:t},null,8,["product"])])])))),128))])])]),(0,s._)("div",Wu,[(0,s._)("div",$u,[Eu,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,et.zw)(t),9,qu)))),128))],512),[[a.bM,l.paginationLimit]])]),(0,s._)("div",Tu,[(0,s._)("div",Ou,(0,et.zw)(o.prevRange+1)+" - "+(0,et.zw)(l.currentPage==o.pageCount?r.products.length:o.nextRange)+" of "+(0,et.zw)(r.products.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pageCount,(t=>((0,s.wg)(),(0,s.j4)(rt.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",Vu,(0,et.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const Fu={class:"tw-flex tw-items-center tw-gap-1"};function Ru(t,e,r,a,i,l){const o=(0,s.up)("popup");return(0,s.wg)(),(0,s.iD)("div",Fu,[t.$can("update_product")?((0,s.wg)(),(0,s.j4)(rt.T,{key:0,to:"/products/update/"+r.product.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1},8,["to"])):(0,s.kq)("",!0),t.$can("view_product")?((0,s.wg)(),(0,s.j4)(rt.T,{key:1,to:"/products/"+r.product.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-eye-outline")])),_:1})])),_:1},8,["to"])):(0,s.kq)("",!0),t.$can("delete_product")?((0,s.wg)(),(0,s.j4)(rt.T,{key:2,onClick:e[0]||(e[0]=t=>i.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this product?</p> You won't be able to revert this!",loading:i.isLoading,visible:i.showPopup,onResolved:l.handleResolved},null,8,["loading","visible","onResolved"])])}var ju={props:["rowIndex","product"],name:"productActions",data(){return{showPopup:!1,isLoading:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,sa["delete"](this.product.id).then((t=>{"PRODUCT_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Product Deleted Successfully"})),sa.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("product/setProducts",t.data.data.products)})).catch(this.$handleApiError)})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const Nu=(0,p.Z)(ju,[["render",Ru]]);var Mu=Nu,Hu={props:["columns","products"],components:{ProductActions:Mu},data(){return{currency:c,allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.products.length/this.paginationLimit)},items(){return this.products.slice(this.prevRange,this.nextRange)}},methods:{calculQty(t){let e=0;return t.forEach((t=>{e+=t.quantity})),e}}};const Yu=(0,p.Z)(Hu,[["render",Iu]]);var Zu=Yu,Ku={components:{ProductsTable:Zu},data(){return{columns:[{prop:"id",name:"#"},{prop:"ref",name:"Ref"},{prop:"name",name:"Name"},{prop:"buying_price",name:"Buying Price"},{prop:"selling_price",name:"Selling Price"},{prop:"quantity",name:"Qty"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{products(){return this.$store.getters["notification/notifications"]["productStockAlert"]||[]},fetched(){return this.$store.getters["notification/fetched"]}}};const Bu=(0,p.Z)(Ku,[["render",fu]]);var Qu=Bu,Gu={components:{StockAlertView:Qu,ReportedDelivery:hu,ReportedConfirmation:cu},data(){return{tab:1,fullTabs:[{id:1,name:"Stock Alert",component:"StockAlertView",permissions:["admin"]},{id:2,name:"Deliveries",component:"ReportedDelivery",permissions:["admin..","delivery"]},{id:3,name:"Confirmations",component:"ReportedConfirmation",permissions:["admin..","agente"]}]}},computed:{tabs(){return this.fullTabs.filter((t=>t.permissions.includes(this.user.role)))},tabName(){return this.$route.params.tab},user(){return this.$store.getters["user/user"]}},watch:{tabName(){this.handleChange()}},methods:{handleChange(){switch(this.tabName){case"stock":this.tab=1;break;case"delivery":this.tab=2;break;case"confirmation":this.tab=3;break;default:this.tab=this.tabs[0].id||1;break}}},mounted(){this.handleChange()}};const Ju=(0,p.Z)(Gu,[["render",Eo]]);var Xu=Ju,tp={path:"/",name:"home",component:da,meta:{module:"dashboard"},children:[{path:"",name:"dashboard",component:so,meta:{module:"dashboard",title:"Dashboard",gate:"all"}},{path:"/notifications/:tab",name:"notifications",component:Xu,meta:{module:"notification",title:"Notifications",gate:"all"}},{path:"/settings",name:"settings",component:Po,meta:{module:"settings",title:"Settings",gate:"all"}}]};const ep={class:"mb-5 tw-flex tw-justify-between tw-items-center"},rp=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Product List"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your products")],-1),ap={key:0},sp=(0,s._)("span",{class:"text-white"}," Add Product ",-1),ip={key:0},lp={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},op={class:"mb-5 tw-flex"},np={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},dp={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},wp={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},cp=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),up={class:"tw-relative"},pp={class:""};function mp(t,e,r,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("ProductsTable");return(0,s.wg)(),(0,s.iD)("div",{key:o.products.length},[(0,s._)("div",ep,[rp,t.$can("create_product")?((0,s.wg)(),(0,s.iD)("div",ap,[(0,s.Wm)(rt.T,{color:"primary-color",link:"",to:{name:"product/add"},variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{icon:"mdi-plus",class:"mr-2 text-white"}),sp])),_:1})])):(0,s.kq)("",!0)]),o.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",ip,[(0,s.Wm)(n)])),o.fetched?((0,s.wg)(),(0,s.iD)("div",lp,[(0,s._)("div",op,[(0,s.Wm)(rt.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",np,[(0,s.Wm)(Xt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,l.search]])])]),(0,s._)("div",{class:(0,et.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,s._)("div",dp,[(0,s._)("div",wp,[cp,(0,s._)("div",up,[(0,s.wy)((0,s._)("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=t=>l.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[a.nr,l.date]])])])])],2),(0,s._)("div",pp,[(0,s.Wm)(d,{columns:l.columns,products:o.filteredProducts},null,8,["columns","products"])])])):(0,s.kq)("",!0)])}var gp={components:{ProductsTable:Zu},data(){return{localUrl:n,confirmations:qn,showFilters:!1,date:null,search:"",columns:[{prop:"id",name:"#"},{prop:"ref",name:"Ref"},{prop:"name",name:"Name"},{prop:"buying_price",name:"Buying Price"},{prop:"selling_price",name:"Selling Price"},{prop:"quantity",name:"Qty"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{products(){return this.$store.getters["product/products"]},fetched(){return this.$store.getters["product/fetched"]},filteredProducts(){const t=this.date;return this.products.filter((e=>(!t||e?.created_at.split("T")[0]===t)&&!!(e.ref.toLowerCase().includes(this.search.toLowerCase())||e.name.toLowerCase().includes(this.search.toLowerCase())||e.description.toLowerCase().includes(this.search.toLowerCase()))))}},methods:{getProducts(){sa.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.fetched||this.getProducts()}};const hp=(0,p.Z)(gp,[["render",mp]]);var fp=hp,vp=r(240),yp=r(4842);const xp=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Add Product "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create new product")],-1),bp={key:0},_p={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},kp={class:"tw-w-full"},Cp=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Product Name ",-1),Dp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Sp={class:"tw-w-full"},zp=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reference",-1),Up={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Lp={class:"tw-w-full"},Pp={class:"mb-1 text-body-2 tw-text-zinc-700"},Ap={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Wp={class:"mb-1 text-body-2 tw-text-zinc-700"},$p={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Ep=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Description ",-1),qp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Tp={class:"tw-w-full tw-flex tw-gap-10 tw-items-center"},Op=(0,s._)("span",null,"Add Variants: ",-1),Vp={class:"tw-h-fit tw-mb-"},Ip=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Warehouse",-1),Fp={class:"tw-relative"},Rp=(0,s._)("option",{value:0},"Select",-1),jp=["value"],Np={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Mp={key:0},Hp={class:"md:tw-col-span-3 tw-col-span-12"},Yp=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),Zp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Kp={class:"md:tw-col-span-3 tw-col-span-12"},Bp=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Stock Alert",-1),Qp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Gp={key:1},Jp={class:"tw-grid tw-grid-cols-12 md:tw-gap-3"},Xp={class:"md:tw-col-span-3 tw-col-span-12"},tm=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Size",-1),em={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},rm={class:"md:tw-col-span-3 tw-col-span-12"},am=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Color",-1),sm={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},im={class:"md:tw-col-span-3 tw-col-span-12"},lm=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),om=(0,s._)("div",{class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},null,-1),nm={class:"md:tw-col-span-3 tw-col-span-12"},dm=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Stock Alert",-1),wm={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},cm={class:"tw-col-span-12 tw-flex tw-justify-end"},um=["disabled"],pm=(0,s._)("span",{class:"tw-text-white"},"Add",-1),mm={class:""},gm={class:"tw-flex tw-justify-between tw-items-center tw-mt-5"},hm=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variants",-1),fm={class:"mb-1 text-body-2 tw-text-zinc-700"},vm={key:1,class:"tw-max-w-full tw-overflow-x-auto"},ym={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},xm={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},bm={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},_m={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},km={class:"tw-px-6 tw-py-2"},Cm={class:"tw-px-6 tw-py-2"},Dm={class:"tw-px-6 tw-py-2"},Sm={class:"tw-flex tw-items-center tw-px-6 tw-py-2 tw-space-x-3"},zm=(0,s._)("h1",{class:"tw-font-medium"},"Deliveries",-1),Um={class:"tw-mt-2"},Lm=(0,s._)("h1",{class:"tw-font-medium"},"Image",-1),Pm={class:"tw-grid tw-grid-cols-12 tw-gap-5 tw-mt-2"},Am={class:"md:tw-col-span-6 tw-col-span-12 tw-relative tw-h-fit"},Wm={title:"Click to upload",for:"button2",class:"tw-cursor-pointer tw-flex tw-items-center tw-gap-4 tw-px-6 tw-py-4 before:border-gray-400/60 hover:before:tw-border-gray-300 group dark:before:bg-darker dark:hover:before:tw-border-gray-500 before:tw-bg-gray-100 dark:before:tw-border-gray-600 before:tw-absolute before:tw-inset-0 before:tw-rounded-lg before:tw-border before:tw-border-dashed before:tw-transition-transform before:tw-duration-300 hover:before:tw-scale-100 active:tw-duration-75 active:before:tw-scale-95"},$m={class:"tw-w-max tw-relative"},Em=(0,s._)("div",{class:"tw-relative"},[(0,s._)("span",{class:"tw-block tw-text-base tw-font-semibold tw-relative tw-text-orange-600"}," Upload a file "),(0,s._)("span",{class:"tw-mt-0.5 tw-block tw-text-sm tw-text-gray-500 dark:tw-text-gray-400"},"Max 2 MB")],-1),qm={class:"md:tw-col-span-6 tw-col-span-12"},Tm={class:"image-preview tw-w-full tw-flex tw-items-center tw-justify-center tw-h-full border rounded p-4"},Om=(0,s._)("span",null,"No image available",-1),Vm=[Om],Im={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Fm=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),Rm=(0,s._)("span",{class:"text-white text-capitalize"},"Create",-1);function jm(t,e,r,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("VariantActions"),w=(0,s.up)("ProductOffers");return(0,s.wg)(),(0,s.iD)("div",null,[xp,l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",bp,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",_p,[(0,s._)("div",null,[(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",kp,[Cp,(0,s.Wm)(it.hw,{error:!l.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>o.resetError("name")),"hide-details":!0,modelValue:l.product.name,"onUpdate:modelValue":e[1]||(e[1]=t=>l.product.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",Dp,(0,et.zw)(l.formStatus.name.message),1)])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",Sp,[zp,(0,s.Wm)(it.hw,{error:!l.formStatus.reference.valid,onKeyup:e[2]||(e[2]=t=>o.resetError("reference")),"hide-details":!0,modelValue:l.product.reference,"onUpdate:modelValue":e[3]||(e[3]=t=>l.product.reference=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",Up,(0,et.zw)(l.formStatus.reference.message),1)])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",Lp,[(0,s._)("div",Pp," Buying Price ("+(0,et.zw)(l.currency)+") ",1),(0,s.Wm)(it.hw,{type:"number",onChange:o.handleBuyingPriceChange,error:!l.formStatus.buyingPrice.valid,onKeyup:e[4]||(e[4]=t=>o.resetError("buyingPrice")),"hide-details":!0,modelValue:l.product.buyingPrice,"onUpdate:modelValue":e[5]||(e[5]=t=>l.product.buyingPrice=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",Ap,(0,et.zw)(l.formStatus.buyingPrice.message),1)])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",Wp," Selling Price ("+(0,et.zw)(l.currency)+") ",1),(0,s.Wm)(it.hw,{type:"number",onChange:o.handleSellingPriceChange,error:!l.formStatus.sellingPrice.valid,onKeyup:e[6]||(e[6]=t=>o.resetError("sellingPrice")),"hide-details":!0,modelValue:l.product.sellingPrice,"onUpdate:modelValue":e[7]||(e[7]=t=>l.product.sellingPrice=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",$p,(0,et.zw)(l.formStatus.sellingPrice.message),1)])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[Ep,(0,s.Wm)(yp.z,{error:!l.formStatus.description.valid,onKeyup:e[8]||(e[8]=t=>o.resetError("description")),"hide-details":!0,modelValue:l.product.description,"onUpdate:modelValue":e[9]||(e[9]=t=>l.product.description=t),variant:"outlined",density:"compact",color:"primary-color"},null,8,["error","modelValue"]),(0,s._)("div",qp,(0,et.zw)(l.formStatus.description.message),1)])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-0",cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",Tp,[Op,(0,s.Wm)(io.G,{modelValue:l.addVariants,"onUpdate:modelValue":e[10]||(e[10]=t=>l.addVariants=t),color:"primary-color","hide-details":!0},null,8,["modelValue"])])])),_:1})])),_:1})])),_:1}),(0,s.Wm)(pa.D,{cols:"12",md:"6",class:"tw-border-l tw-border-r-neutral-700 tw-py-2"},{default:(0,s.w5)((()=>[(0,s._)("div",Vp,[Ip,(0,s._)("div",Fp,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[11]||(e[11]=t=>l.warehouse=t),onChange:e[12]||(e[12]=t=>o.resetError("warehouse")),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-400 tw-outline-0 tw-text-sm"},[Rp,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.warehouses,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.id},(0,et.zw)(t.name),9,jp)))),128))],544),[[a.bM,l.warehouse]]),(0,s.Wm)(st.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})]),(0,s._)("div",Np,(0,et.zw)(l.formStatus.warehouse.message),1)]),l.addVariants?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Mp,[(0,s._)("div",Hp,[Yp,(0,s.Wm)(it.hw,{onChange:o.handleQuantityChange,type:"number",error:!l.formStatus.quantity.valid,onKeyup:e[13]||(e[13]=t=>o.resetError("quantity")),"hide-details":!0,modelValue:l.quantity,"onUpdate:modelValue":e[14]||(e[14]=t=>l.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",Zp,(0,et.zw)(l.formStatus.quantity.message),1)]),(0,s._)("div",Kp,[Bp,(0,s.Wm)(it.hw,{onChange:o.handleStockAlertChange,type:"number",error:!l.formStatus.stockAlert.valid,onKeyup:e[15]||(e[15]=t=>o.resetError("stockAlert")),"hide-details":!0,modelValue:l.stockAlert,"onUpdate:modelValue":e[16]||(e[16]=t=>l.stockAlert=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",Qp,(0,et.zw)(l.formStatus.stockAlert.message),1)])])),l.addVariants?((0,s.wg)(),(0,s.iD)("div",Gp,[(0,s._)("div",Jp,[(0,s._)("div",Xp,[tm,(0,s.Wm)(it.hw,{error:!l.formStatus.size.valid,onKeyup:e[17]||(e[17]=t=>o.resetError("size")),"hide-details":!0,modelValue:l.size,"onUpdate:modelValue":e[18]||(e[18]=t=>l.size=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",em,(0,et.zw)(l.formStatus.size.message),1)]),(0,s._)("div",rm,[am,(0,s.Wm)(it.hw,{error:!l.formStatus.color.valid,onKeyup:e[19]||(e[19]=t=>o.resetError("color")),"hide-details":!0,modelValue:l.color,"onUpdate:modelValue":e[20]||(e[20]=t=>l.color=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",sm,(0,et.zw)(l.formStatus.color.message),1)]),(0,s._)("div",im,[lm,(0,s.Wm)(it.hw,{onChange:o.handleQuantityChange,type:"number",error:!l.formStatus.quantity.valid&&!1,onKeyup:e[21]||(e[21]=t=>o.resetError("quantity")),"hide-details":!0,modelValue:l.quantity,"onUpdate:modelValue":e[22]||(e[22]=t=>l.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),om]),(0,s._)("div",nm,[dm,(0,s.Wm)(it.hw,{onChange:o.handleStockAlertChange,type:"number",error:!l.formStatus.stockAlert.valid,onKeyup:e[23]||(e[23]=t=>o.resetError("stockAlert")),"hide-details":!0,modelValue:l.stockAlert,"onUpdate:modelValue":e[24]||(e[24]=t=>l.stockAlert=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",wm,(0,et.zw)(l.formStatus.stockAlert.message),1)])]),(0,s._)("div",null,[(0,s._)("div",cm,[(0,s._)("button",{disabled:!l.quantity,class:(0,et.C_)([{"bg-primary-color":l.quantity},"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"]),onClick:e[25]||(e[25]=(...t)=>o.addVariant&&o.addVariant(...t))},[(0,s.Wm)(st.t,{size:"small",color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1}),pm],10,um)])]),(0,s._)("div",mm,[(0,s._)("div",gm,[hm,(0,s._)("div",fm," Quantity Total: "+(0,et.zw)(o.qtyTotal),1)]),0==l.variants.length?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,et.C_)([{"tw-bg-neutral-100 tw-text-neutral-500":l.formStatus.variants.valid,"tw-bg-red-100 tw-text-red-500":!l.formStatus.variants.valid},"tw-text-center tw-mb-6 tw-w-full tw-py-3 tw-rounded-lg"])},(0,et.zw)(l.formStatus.variants.valid?"No Variants yet":l.formStatus.variants.message),3)):((0,s.wg)(),(0,s.iD)("div",vm,[(0,s._)("table",ym,[(0,s._)("thead",xm,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["size","color","qty","stockAlert","actions"],(t=>(0,s._)("th",{class:(0,et.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",bm,(0,et.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.variants,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,s._)("th",_m,(0,et.zw)(t.size),1),(0,s._)("td",km,(0,et.zw)(t.color),1),(0,s._)("td",Cm,(0,et.zw)(t.quantity),1),(0,s._)("td",Dm,(0,et.zw)(t.stockAlert),1),(0,s._)("td",Sm,[(0,s._)("div",null,[(0,s.Wm)(d,{onDelete:o.deleteVariant,variant:t},null,8,["onDelete","variant"])])])])))),128))])])]))])])):(0,s.kq)("",!0)])),_:1})])),_:1}),(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[zm,(0,s._)("div",Um,[(0,s.Wm)(vp.r,{modelValue:l.selectedDeliveries,"onUpdate:modelValue":e[26]||(e[26]=t=>l.selectedDeliveries=t),items:o.deliveries,"item-title":"fullname","item-value":"id","hide-details":!0,chips:"",multiple:"",variant:"outlined"},null,8,["modelValue","items"])])])])),_:1}),(0,s.Wm)(pa.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(w,{offers:l.offers,"onUpdate:offers":e[27]||(e[27]=t=>l.offers=t)},null,8,["offers"])])])),_:1}),(0,s.Wm)(pa.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[Lm,(0,s._)("div",Pm,[(0,s._)("div",Am,[(0,s._)("label",Wm,[(0,s._)("div",$m,[(0,s.Wm)(st.t,{class:"tw-text-6xl tw-text-orange-500"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-progress-upload")])),_:1})]),Em]),(0,s._)("input",{onChange:e[28]||(e[28]=(...t)=>o.handleImageChange&&o.handleImageChange(...t)),class:"tw-hidden",type:"file",name:"button2",id:"button2"},null,32)]),(0,s._)("div",qm,[(0,s._)("div",Tm,[(0,s._)("img",{class:(0,et.C_)([{"tw-hidden":!l.image},"w-full h-full tw-object-contain"]),ref:"image",id:"image-preview",alt:"Image Preview"},null,2),(0,s._)("div",{class:(0,et.C_)([{"tw-hidden":!!l.image},"bg-gray-300 h-48 flex items-center justify-center"])},Vm,2)])])])])])),_:1})])),_:1})]),(0,s._)("div",Im,[(0,s.Wm)(rt.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[Fm])),_:1}),(0,s.Wm)(rt.T,{onClick:o.create,loading:l.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[Rm])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}function Nm(t,e,r,a,i,l){const o=(0,s.up)("popup"),n=(0,s.up)("UpdateProductVariant"),d=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(rt.T,{onClick:e[0]||(e[0]=t=>i.visible=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1}),(0,s.Wm)(rt.T,{onClick:e[1]||(e[1]=t=>i.deletePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1}),(0,s.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this product?</p> You won't be able to revert this!",visible:i.deletePopup,onResolved:l.handleDelete},null,8,["visible","onResolved"]),(0,s.Wm)(d,{visible:i.visible,onCancel:l.cancel},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{onUpdate:l.update,variant:r.variant,onCancel:l.cancel},null,8,["onUpdate","variant","onCancel"])])),_:1},8,["visible","onCancel"])])}const Mm={class:"md:tw-w-[400px] tw-w-[95%] tw-bg-white tw-rounded-lg tw-p-5 tw-mx-auto"},Hm={class:"tw-grid tw-grid-cols-12 md:tw-gap-3"},Ym={class:"tw-col-span-12"},Zm=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Size",-1),Km={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Bm={class:"tw-col-span-12"},Qm=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Color",-1),Gm={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Jm={class:"tw-col-span-12"},Xm=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),tg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},eg={class:"tw-col-span-12"},rg=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Stock Alert",-1),ag={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},sg={class:"tw-col-span-12 tw-flex tw-gap-2 tw-justify-end"},ig=(0,s._)("span",{class:"tw-text-white"},"Cancel",-1),lg=[ig],og=["disabled"],ng=(0,s._)("span",{class:"tw-text-white"},"Save",-1),dg=[ng];function wg(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",Mm,[(0,s._)("div",Hm,[(0,s._)("div",Ym,[Zm,(0,s.Wm)(it.hw,{error:!i.formStatus.size.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("size")),"hide-details":!0,modelValue:i.size,"onUpdate:modelValue":e[1]||(e[1]=t=>i.size=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",Km,(0,et.zw)(i.formStatus.size.message),1)]),(0,s._)("div",Bm,[Qm,(0,s.Wm)(it.hw,{error:!i.formStatus.color.valid,onKeyup:e[2]||(e[2]=t=>l.resetError("color")),"hide-details":!0,modelValue:i.color,"onUpdate:modelValue":e[3]||(e[3]=t=>i.color=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",Gm,(0,et.zw)(i.formStatus.color.message),1)]),(0,s._)("div",Jm,[Xm,(0,s.Wm)(it.hw,{onChange:l.handleQuantityChange,type:"number",error:!i.formStatus.quantity.valid,onKeyup:e[4]||(e[4]=t=>l.resetError("quantity")),"hide-details":!0,modelValue:i.quantity,"onUpdate:modelValue":e[5]||(e[5]=t=>i.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",tg,(0,et.zw)(i.formStatus.quantity.message),1)]),(0,s._)("div",eg,[rg,(0,s.Wm)(it.hw,{onChange:l.handleStockAlertChange,type:"number",error:!i.formStatus.stockAlert.valid,onKeyup:e[6]||(e[6]=t=>l.resetError("stockAlert")),"hide-details":!0,modelValue:i.stockAlert,"onUpdate:modelValue":e[7]||(e[7]=t=>i.stockAlert=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",ag,(0,et.zw)(i.formStatus.stockAlert.message),1)])]),(0,s._)("div",null,[(0,s._)("div",sg,[(0,s._)("button",{onClick:e[8]||(e[8]=(...t)=>l.cancel&&l.cancel(...t)),class:"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"},lg),(0,s._)("button",{disabled:!i.quantity,class:(0,et.C_)([{"tw-bg-orange-500":i.quantity},"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"]),onClick:e[9]||(e[9]=(...t)=>l.updateVariant&&l.updateVariant(...t))},dg,10,og)])])])}var cg={props:["variant"],data(){return{size:"",color:"",quantity:0,stockAlert:0,newVariant:null,formStatus:{quantity:{valid:!0,message:""},size:{valid:!0,message:""},color:{valid:!0,message:""},stockAlert:{valid:!0,message:""}}}},methods:{updateVariant(){console.log("updated");const t=this.quantity-this.newVariant.quantity;this.newVariant.size=this.size?this.size.toLocaleUpperCase():"",this.newVariant.color=this.color?this.color.toLocaleUpperCase():"",this.newVariant.quantity=this.quantity,this.newVariant.stockAlert=this.stockAlert,this.newVariant.available_quantity=parseInt(this.newVariant.available_quantity)+parseInt(t),this.cancel()},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},handleStockAlertChange(){this.stockAlert<=0&&(this.stockAlert=0)},cancel(){this.$emit("cancel")},resetError(t){this.formStatus[t]={valid:!0,message:""}}},mounted(){this.size=this.variant.size,this.color=this.variant.color,this.quantity=this.variant.quantity,this.stockAlert=this.variant.stockAlert,this.newVariant=this.variant}};const ug=(0,p.Z)(cg,[["render",wg]]);var pg=ug,mg={components:{UpdateProductVariant:pg},props:["variant"],data(){return{visible:!1,deletePopup:!1}},methods:{cancel(){this.visible=!1},update(t){console.log("from actions: ",t)},handleDelete(t){t&&this.$emit("delete",this.variant.id),this.deletePopup=!1}}};const gg=(0,p.Z)(mg,[["render",Nm]]);var hg=gg;class fg{async create(t){return await $.getCookie(),A.post("api/warehouses/new",{name:t.name})}async update(t,e){return await $.getCookie(),A.post("api/warehouses/update/"+t,{name:e.name})}async all(){return await $.getCookie(),A.get("api/warehouses")}async getWarehouse(t){return await $.getCookie(),A.get("api/warehouses/"+t)}async delete(t){return await $.getCookie(),A["delete"]("api/warehouses/delete/"+t)}}var vg=new fg;const yg=(0,s._)("h1",{class:"tw-font-medium"},"Offers",-1),xg={class:"tw-grid tw-grid-cols-12 tw-mb-5 tw-mt-3 tw-gap-3"},bg={class:"md:tw-col-span-3 tw-col-span-12"},_g=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),kg={class:"md:tw-col-span-3 tw-col-span-12"},Cg=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Price",-1),Dg={class:"md:tw-col-span-5 tw-col-span-12"},Sg=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note",-1),zg={class:"md:tw-col-span-1 tw-col-span-12"},Ug=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-transparent"},"Note",-1),Lg={class:"tw-mt-2"},Pg={class:"tw-relative tw-overflow-x-auto tw-shadow sm:tw-rounded"},Ag={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Wg=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Quantity"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Price"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Note"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-24"},"Action")])],-1),$g={class:"tw-px-6 tw-py-4"},Eg={class:"tw-px-6 tw-py-4"},qg={class:"tw-px-6 tw-py-4"},Tg={class:"tw-max-w-[250px] tw-text-sm"},Og={class:"tw-px-6 tw-py-4"},Vg={key:0},Ig=(0,s._)("td",{colspan:"5"},[(0,s._)("p",{class:"tw-text-center tw-p-5"}," No Offers ")],-1),Fg=[Ig];function Rg(t,e,r,a,i,l){const o=(0,s.up)("popup");return(0,s.wg)(),(0,s.iD)("div",null,[yg,(0,s._)("div",xg,[(0,s._)("div",bg,[_g,(0,s.Wm)(it.hw,{type:"number","hide-details":!0,modelValue:i.quantity,"onUpdate:modelValue":e[0]||(e[0]=t=>i.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"])]),(0,s._)("div",kg,[Cg,(0,s.Wm)(it.hw,{type:"number","hide-details":!0,modelValue:i.price,"onUpdate:modelValue":e[1]||(e[1]=t=>i.price=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"])]),(0,s._)("div",Dg,[Sg,(0,s.Wm)(it.hw,{type:"text","hide-details":!0,modelValue:i.note,"onUpdate:modelValue":e[2]||(e[2]=t=>i.note=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"])]),(0,s._)("div",zg,[Ug,(0,s.Wm)(rt.T,{onClick:l.handleAdd,class:"mx-auto !tw-px-0 !tw-py-0","min-height":"40px","min-width":"40",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1})])),_:1},8,["onClick"])])]),(0,s._)("div",Lg,[(0,s._)("div",Pg,[(0,s._)("table",Ag,[Wg,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.offers,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.key,class:"odd:tw-bg-white even:tw-bg-gray-50 tw-border-b"},[(0,s._)("td",$g,(0,et.zw)(t.quantity),1),(0,s._)("td",Eg,(0,et.zw)(t.price)+" "+(0,et.zw)(i.currency),1),(0,s._)("td",qg,[(0,s._)("p",Tg,(0,et.zw)(t.note),1)]),(0,s._)("td",Og,[(0,s.Wm)(rt.T,{onClick:e=>l.handleDeleteClicked(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])))),128)),0==r.offers.length?((0,s.wg)(),(0,s.iD)("tr",Vg,Fg)):(0,s.kq)("",!0)])])])]),(0,s.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this offer?</p> You won't be able to revert this!",visible:i.deletePopup,onResolved:l.handleDelete},null,8,["visible","onResolved"])])}var jg={props:["offers"],data(){return{currency:c,deletePopup:!1,toDeleteID:null,quantity:1,price:0,note:""}},methods:{handleDeleteClicked(t){this.toDeleteID=t,this.deletePopup=!0},handleDelete(t){if(this.deletePopup=!1,!t)return!1;this.$emit("update:offers",this.offers.filter((t=>t.id!=this.toDeleteID)))},handleAdd(){const t=this.offers.length>0?this.offers[this.offers.length-1].id:0,e=t+1,r={id:e,quantity:this.quantity,price:this.price,note:this.note};this.$emit("update:offers",[...this.offers,r]),this.quantity=1,this.price=0,this.note=""}}};const Ng=(0,p.Z)(jg,[["render",Rg]]);var Mg=Ng,Hg={components:{VariantActions:hg,ProductOffers:Mg},data(){return{currency:c,isLoading:!1,isLoaded:!1,addVariants:!1,variantId:1,variants:[],image:"",imageFile:null,color:"",size:"",quantity:0,warehouse:0,stockAlert:0,offers:[],product:{name:"",reference:"",buyingPrice:0,sellingPrice:0,description:""},selectedDeliveries:[],formStatus:{name:{valid:!0,message:""},reference:{valid:!0,message:""},buyingPrice:{valid:!0,message:""},sellingPrice:{valid:!0,message:""},quantity:{valid:!0,message:""},size:{valid:!0,message:""},color:{valid:!0,message:""},stockAlert:{valid:!0,message:""},description:{valid:!0,message:""},warehouse:{valid:!0,message:""},variants:{valid:!0,message:""}}}},computed:{qtyTotal(){let t=0;return this.variants.forEach((e=>t+=parseInt(e.quantity))),t},warehouses(){return this.$store.getters["warehouse/warehouses"]},users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>"delivery"==t.role?.name)).map((t=>({...t,fullname:t.firstname+" "+t.lastname})))}},methods:{create(){if(!this.validate())return!1;this.isLoading=!0;let t=this.product;if(t.addVariants=this.addVariants,t.image=this.image,t.offers=this.offers,t.selectedDeliveries=this.selectedDeliveries.map((t=>({delivery_id:t}))),this.addVariants)t.variants=this.variants;else{const e=[{id:this.variantId,color:null,size:null,quantity:this.quantity,warehouse_id:this.warehouse,stockAlert:this.stockAlert}];t.variants=e}sa.create(t).then((t=>{"PRODUCT_CREATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.product={name:"",reference:"",buyingPrice:0,sellingPrice:0,description:""},this.offers=[],this.selectedDeliveries=[],this.variants=[],this.$store.dispatch("product/addProduct",t.data.data.product)),"VALIDATION_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.errors.ref})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},handleImageChange(t){const e=t.target.files[0];this.image=e;const r=this.$refs.image;if(e){const t=new FileReader;t.addEventListener("load",(function(){r.src=this.result})),t.readAsDataURL(e)}},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=zt(this.product.name,"Product name"),this.formStatus.reference=zt(this.product.reference,"Reference"),this.formStatus.buyingPrice=zt(this.product.buyingPrice,"Buying price"),this.formStatus.quantity=zt(this.quantity,"Quantity"),this.formStatus.sellingPrice=zt(this.product.sellingPrice,"Selling price"),this.formStatus.description=zt(this.product.description,"Description"),this.formStatus.variants=Pt(this.variants),this.addVariants||(this.formStatus.warehouse={valid:0!=this.warehouse,message:0!=this.warehouse?"":"Please select a warehouse"}),this.formStatus.name.valid&&this.formStatus.buyingPrice.valid&&this.formStatus.reference.valid&&this.formStatus.sellingPrice&&this.formStatus.description.valid&&(!this.addVariants||this.formStatus.variants.valid)&&(!!this.addVariants||this.formStatus.quantity.valid)&&(!!this.addVariants||this.formStatus.warehouse.valid)},addVariant(){if(this.formStatus.warehouse={valid:0!=this.warehouse,message:0!=this.warehouse?"":"Please select a warehouse"},!this.formStatus.warehouse.valid)return!1;const t={id:this.variantId,color:this.color.toUpperCase(),size:this.size.toUpperCase(),quantity:this.quantity,warehouse_id:this.warehouse,stockAlert:this.stockAlert};this.variants.push(t),this.variantId++,this.stockAlert=0,this.color="",this.size="",this.quantity=0},deleteVariant(t){this.variants=this.variants.filter((e=>e.id!==t))},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},handleStockAlertChange(){this.stockAlert<=0&&(this.stockAlert=0)},handleSellingPriceChange(){this.product.sellingPrice<=0&&(this.product.sellingPrice=0)},handleBuyingPriceChange(){this.product.buyingPrice<=0&&(this.product.buyingPrice=0)},getWarhouses(){return this.isLoaded=!1,vg.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("warehouse/setWarehouses",t.data.data.warehouses),this.isLoaded=!0)}),this.$handleApiError)}},mounted(){this.getWarhouses()}};const Yg=(0,p.Z)(Hg,[["render",jm]]);var Zg=Yg;const Kg=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Update Product "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Update product informations")],-1),Bg={key:0},Qg={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Gg={class:"tw-flex tw-gap-2 tw-text-neutral-800 tw-items-center tw-mb-5"},Jg={class:"tw-block tw-py-1 tw-px-2 tw-rounded-md text-primary-color"},Xg={class:"tw-w-full"},th=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Product Name ",-1),eh={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},rh={class:"tw-w-full"},ah=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reference",-1),sh={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},ih={class:"tw-w-full"},lh={class:"mb-1 text-body-2 tw-text-zinc-700"},oh={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},nh={class:"mb-1 text-body-2 tw-text-zinc-700"},dh={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},wh=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Description ",-1),ch={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},uh={class:"tw-h-fit tw-mb-"},ph=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Warehouse",-1),mh={class:"tw-relative"},gh=(0,s._)("option",{value:0},"Select",-1),hh=["value"],fh={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},vh={class:"tw-grid tw-grid-cols-12 md:tw-gap-3"},yh={class:"md:tw-col-span-3 tw-col-span-12"},xh=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Size",-1),bh={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},_h={class:"md:tw-col-span-3 tw-col-span-12"},kh=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Color",-1),Ch={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Dh={class:"md:tw-col-span-3 tw-col-span-12"},Sh=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),zh={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Uh={class:"md:tw-col-span-3 tw-col-span-12"},Lh=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Stock Alert ",-1),Ph={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Ah={class:"tw-col-span-12 tw-flex tw-justify-end"},Wh=["disabled"],$h=(0,s._)("span",{class:"tw-text-white"},"Add",-1),Eh={class:""},qh={class:"tw-flex tw-justify-between tw-items-center tw-mt-5"},Th=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variants",-1),Oh={class:"mb-1 text-body-2 tw-text-zinc-700"},Vh={key:1,class:"tw-max-w-full tw-overflow-x-auto"},Ih={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Fh={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},Rh={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},jh={class:"tw-px-6 tw-py-2 tw-capitalize"},Nh={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Mh={class:"tw-px-6 tw-py-2"},Hh={class:"tw-px-6 tw-py-2"},Yh={class:"tw-flex tw-flex-col"},Zh={key:0,class:"tw-text-xs tw-text-green-500"},Kh={class:"tw-px-6 tw-py-2"},Bh={class:"tw-flex tw-items-center tw-px-6 tw-py-2 tw-space-x-3"},Qh=(0,s._)("h1",null,"Deliveries",-1),Gh={class:"tw-mt-2"},Jh=(0,s._)("h1",null,"Image",-1),Xh={class:"tw-grid tw-grid-cols-12 tw-gap-5 tw-mt-2"},tf={class:"md:tw-col-span-6 tw-col-span-12 tw-relative tw-h-fit"},ef={title:"Click to upload",for:"button2",class:"tw-cursor-pointer tw-flex tw-items-center tw-gap-4 tw-px-6 tw-py-4 before:border-gray-400/60 hover:before:tw-border-gray-300 group dark:before:bg-darker dark:hover:before:tw-border-gray-500 before:tw-bg-gray-100 dark:before:tw-border-gray-600 before:tw-absolute before:tw-inset-0 before:tw-rounded-lg before:tw-border before:tw-border-dashed before:tw-transition-transform before:tw-duration-300 hover:before:tw-scale-100 active:tw-duration-75 active:before:tw-scale-95"},rf={class:"tw-w-max tw-relative"},af=(0,s._)("div",{class:"tw-relative"},[(0,s._)("span",{class:"tw-block tw-text-base tw-font-semibold tw-relative tw-text-orange-600"}," Upload a file "),(0,s._)("span",{class:"tw-mt-0.5 tw-block tw-text-sm tw-text-gray-500 dark:tw-text-gray-400"},"Max 2 MB")],-1),sf={class:"md:tw-col-span-6 tw-col-span-12"},lf={class:"image-preview tw-w-full tw-flex tw-items-center tw-justify-center tw-h-full border rounded p-4"},of=["src"],nf=(0,s._)("span",null,"No image available",-1),df=[nf],wf={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},cf=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),uf=(0,s._)("span",{class:"text-white text-capitalize"},"Update",-1);function pf(t,e,r,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("UpdateVariantActions"),w=(0,s.up)("ProductOffers");return(0,s.wg)(),(0,s.iD)("div",null,[Kg,l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Bg,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",Qg,[(0,s._)("div",Gg,[(0,s.Uk)(" Product ID: "),(0,s._)("span",Jg,(0,et.zw)(o.id),1)]),(0,s._)("div",null,[(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",Xg,[th,(0,s.Wm)(it.hw,{error:!l.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>o.resetError("name")),"hide-details":!0,modelValue:l.product.name,"onUpdate:modelValue":e[1]||(e[1]=t=>l.product.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",eh,(0,et.zw)(l.formStatus.name.message),1)])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",rh,[ah,(0,s.Wm)(it.hw,{error:!l.formStatus.quantity.valid,onKeyup:e[2]||(e[2]=t=>o.resetError("quantity")),"hide-details":!0,modelValue:l.product.reference,"onUpdate:modelValue":e[3]||(e[3]=t=>l.product.reference=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",sh,(0,et.zw)(l.formStatus.quantity.message),1)])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",ih,[(0,s._)("div",lh," Buying Price ("+(0,et.zw)(l.currency)+") ",1),(0,s.Wm)(it.hw,{type:"number",onChange:o.handleBuyingPriceChange,error:!l.formStatus.buyingPrice.valid,onKeyup:e[4]||(e[4]=t=>o.resetError("buyingPrice")),"hide-details":!0,modelValue:l.product.buyingPrice,"onUpdate:modelValue":e[5]||(e[5]=t=>l.product.buyingPrice=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",oh,(0,et.zw)(l.formStatus.buyingPrice.message),1)])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",nh," Selling Price ("+(0,et.zw)(l.currency)+") ",1),(0,s.Wm)(it.hw,{type:"number",onChange:o.handleSellingPriceChange,error:!l.formStatus.sellingPrice.valid,onKeyup:e[6]||(e[6]=t=>o.resetError("sellingPrice")),"hide-details":!0,modelValue:l.product.sellingPrice,"onUpdate:modelValue":e[7]||(e[7]=t=>l.product.sellingPrice=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",dh,(0,et.zw)(l.formStatus.sellingPrice.message),1)])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[wh,(0,s.Wm)(yp.z,{error:!l.formStatus.description.valid,onKeyup:e[8]||(e[8]=t=>o.resetError("description")),"hide-details":!0,modelValue:l.product.description,"onUpdate:modelValue":e[9]||(e[9]=t=>l.product.description=t),variant:"outlined",density:"compact",color:"primary-color"},null,8,["error","modelValue"]),(0,s._)("div",ch,(0,et.zw)(l.formStatus.description.message),1)])])),_:1})])),_:1})])),_:1}),(0,s.Wm)(pa.D,{cols:"12",md:"12",class:"tw-border-t tw-border-t-neutral-300 tw-py-2"},{default:(0,s.w5)((()=>[(0,s._)("div",uh,[ph,(0,s._)("div",mh,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>l.warehouse=t),onChange:e[11]||(e[11]=t=>o.resetError("warehouse")),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-400 tw-outline-0 tw-text-sm"},[gh,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.warehouses,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.id},(0,et.zw)(t.name),9,hh)))),128))],544),[[a.bM,l.warehouse]]),(0,s.Wm)(st.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})]),(0,s._)("div",fh,(0,et.zw)(l.formStatus.warehouse.message),1)]),(0,s._)("div",null,[(0,s._)("div",vh,[(0,s._)("div",yh,[xh,(0,s.Wm)(it.hw,{error:!l.formStatus.size.valid,onKeyup:e[12]||(e[12]=t=>o.resetError("size")),"hide-details":!0,modelValue:l.size,"onUpdate:modelValue":e[13]||(e[13]=t=>l.size=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",bh,(0,et.zw)(l.formStatus.size.message),1)]),(0,s._)("div",_h,[kh,(0,s.Wm)(it.hw,{error:!l.formStatus.color.valid,onKeyup:e[14]||(e[14]=t=>o.resetError("color")),"hide-details":!0,modelValue:l.color,"onUpdate:modelValue":e[15]||(e[15]=t=>l.color=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",Ch,(0,et.zw)(l.formStatus.color.message),1)]),(0,s._)("div",Dh,[Sh,(0,s.Wm)(it.hw,{onChange:o.handleQuantityChange,type:"number",error:!l.formStatus.quantity.valid,onKeyup:e[16]||(e[16]=t=>o.resetError("quantity")),"hide-details":!0,modelValue:l.quantity,"onUpdate:modelValue":e[17]||(e[17]=t=>l.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",zh,(0,et.zw)(l.formStatus.quantity.message),1)]),(0,s._)("div",Uh,[Lh,(0,s.Wm)(it.hw,{onChange:o.handleStockAlertChange,type:"number",error:!l.formStatus.stockAlert.valid,onKeyup:e[18]||(e[18]=t=>o.resetError("stockAlert")),"hide-details":!0,modelValue:l.stockAlert,"onUpdate:modelValue":e[19]||(e[19]=t=>l.stockAlert=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",Ph,(0,et.zw)(l.formStatus.stockAlert.message),1)])]),(0,s._)("div",null,[(0,s._)("div",Ah,[(0,s._)("button",{disabled:!l.quantity,class:(0,et.C_)([{"bg-primary-color":l.quantity},"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"]),onClick:e[20]||(e[20]=(...t)=>o.addVariant&&o.addVariant(...t))},[(0,s.Wm)(st.t,{size:"small",color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1}),$h],10,Wh)])]),(0,s._)("div",Eh,[(0,s._)("div",qh,[Th,(0,s._)("div",Oh," Quantity Total: "+(0,et.zw)(o.qtyTotal),1)]),0==l.variants.length?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,et.C_)([{"tw-bg-neutral-100 tw-text-neutral-500":l.formStatus.variants.valid,"tw-bg-red-100 tw-text-red-500":!l.formStatus.variants.valid},"tw-text-center tw-mb-6 tw-w-full tw-py-3 tw-rounded-lg"])},(0,et.zw)(l.formStatus.variants.valid?"No Variants yet":l.formStatus.variants.message),3)):((0,s.wg)(),(0,s.iD)("div",Vh,[(0,s._)("table",Ih,[(0,s._)("thead",Fh,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["warehouse","size","color","qty","Stock Alert","actions"],(t=>(0,s._)("th",{class:(0,et.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",Rh,(0,et.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.variants,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,s._)("td",jh,(0,et.zw)(t.warehouse.name),1),(0,s._)("td",Nh,(0,et.zw)(t.size),1),(0,s._)("td",Mh,(0,et.zw)(t.color),1),(0,s._)("td",Hh,[(0,s._)("div",Yh,[(0,s._)("span",null,(0,et.zw)(t.quantity),1),t.created_at?((0,s.wg)(),(0,s.iD)("span",Zh,(0,et.zw)(t.available_quantity),1)):(0,s.kq)("",!0)])]),(0,s._)("td",Kh,(0,et.zw)(t.stockAlert),1),(0,s._)("td",Bh,[(0,s._)("div",null,[(0,s.Wm)(d,{onDelete:o.deleteVariant,variant:t},null,8,["onDelete","variant"])])])])))),128))])])]))])])])),_:1})])),_:1}),(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[Qh,(0,s._)("div",Gh,[(0,s.Wm)(vp.r,{modelValue:l.selectedDeliveries,"onUpdate:modelValue":e[21]||(e[21]=t=>l.selectedDeliveries=t),items:o.deliveries,"item-title":"fullname","item-value":"id","hide-details":!0,chips:"",multiple:"",variant:"outlined"},null,8,["modelValue","items"])])])])),_:1}),(0,s.Wm)(pa.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(w,{offers:l.offers,"onUpdate:offers":e[22]||(e[22]=t=>l.offers=t)},null,8,["offers"])])])),_:1}),(0,s.Wm)(pa.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[Jh,(0,s._)("div",Xh,[(0,s._)("div",tf,[(0,s._)("label",ef,[(0,s._)("div",rf,[(0,s.Wm)(st.t,{class:"tw-text-6xl tw-text-orange-500"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-progress-upload")])),_:1})]),af]),(0,s._)("input",{onChange:e[23]||(e[23]=(...t)=>o.handleImageChange&&o.handleImageChange(...t)),class:"tw-hidden",type:"file",name:"button2",id:"button2"},null,32)]),(0,s._)("div",sf,[(0,s._)("div",lf,[(0,s._)("img",{class:(0,et.C_)([{"tw-hidden":!l.image},"w-full h-full tw-object-contain"]),ref:"image",src:l.serverUrl+"storage/"+l.image,id:"image-preview",alt:"Image Preview"},null,10,of),(0,s._)("div",{class:(0,et.C_)([{"tw-hidden":!!l.image},"bg-gray-300 h-48 flex items-center justify-center"])},df,2)])])])])])),_:1})])),_:1})]),(0,s._)("div",wf,[(0,s.Wm)(rt.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[cf])),_:1}),(0,s.Wm)(rt.T,{onClick:o.update,loading:l.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[uf])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}const mf={class:"md:tw-w-[400px] tw-w-[95%] tw-bg-white tw-rounded-lg tw-p-5 tw-mx-auto"},gf={class:"tw-w-full"},hf=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Add quantity",-1),ff={class:"tw-col-span-12 tw-flex tw-gap-2 tw-justify-end tw-mt-3"},vf=(0,s._)("span",{class:"tw-text-white"},"Cancel",-1),yf=[vf],xf=["disabled"],bf=(0,s._)("span",{class:"tw-text-white"},"Add",-1),_f=[bf];function kf(t,e,r,a,i,l){const o=(0,s.up)("popup"),n=(0,s.up)("UpdateProductVariant"),d=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[r.variant.created_at?((0,s.wg)(),(0,s.j4)(rt.T,{key:0,onClick:e[0]||(e[0]=t=>i.visibleAdd=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1})])),_:1})):(0,s.kq)("",!0),void 0===r.variant.on_hold||r.variant.available_quantity==r.variant.quantity?((0,s.wg)(),(0,s.j4)(rt.T,{key:1,onClick:e[1]||(e[1]=t=>i.deletePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(rt.T,{onClick:e[2]||(e[2]=t=>i.visible=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1}),(0,s.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this product?</p> You won't be able to revert this!",visible:i.deletePopup,onResolved:l.handleDelete},null,8,["visible","onResolved"]),(0,s.Wm)(d,{visible:i.visible,onCancel:l.cancel},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{onUpdate:l.update,variant:r.variant,onCancel:l.cancel},null,8,["onUpdate","variant","onCancel"])])),_:1},8,["visible","onCancel"]),(0,s.Wm)(d,{visible:i.visibleAdd,onCancel:l.cancelAdd},{default:(0,s.w5)((()=>[(0,s._)("div",mf,[(0,s._)("div",gf,[hf,(0,s.Wm)(it.hw,{"hide-details":!0,modelValue:i.quantity,"onUpdate:modelValue":e[3]||(e[3]=t=>i.quantity=t),clearable:"",type:"number","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"])]),(0,s._)("div",ff,[(0,s._)("button",{onClick:e[4]||(e[4]=(...t)=>l.cancelAdd&&l.cancelAdd(...t)),class:"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"},yf),(0,s._)("button",{disabled:!i.quantity||0==i.quantity,class:(0,et.C_)([{"!tw-bg-green-500":0!=i.quantity},"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"]),onClick:e[5]||(e[5]=(...t)=>l.addQuantity&&l.addQuantity(...t))},_f,10,xf)])])])),_:1},8,["visible","onCancel"])])}var Cf={components:{UpdateProductVariant:pg},props:["variant"],data(){return{visible:!1,visibleAdd:!1,deletePopup:!1,quantity:1,newVariant:null}},methods:{cancel(){this.visible=!1},cancelAdd(){this.visibleAdd=!1},update(t){console.log("from actions: ",t)},addQuantity(){this.newVariant.quantity=parseInt(this.newVariant.quantity)+parseInt(this.quantity),this.newVariant.available_quantity=parseInt(this.newVariant.available_quantity)+parseInt(this.quantity),this.quantity=1,this.cancelAdd()},handleDelete(t){t&&this.$emit("delete",this.variant.id),this.deletePopup=!1}},mounted(){this.newVariant=this.variant}};const Df=(0,p.Z)(Cf,[["render",kf]]);var Sf=Df,zf={components:{UpdateVariantActions:Sf,ProductOffers:Mg},data(){return{currency:c,serverUrl:d,isLoading:!1,isLoaded:!1,variantId:1,variants:[],color:"",size:"",quantity:0,stockAlert:0,image:"",imageFile:null,offers:[],warehouse:0,product:{name:"",reference:"",buyingPrice:0,sellingPrice:0,description:""},selectedDeliveries:[],formStatus:{name:{valid:!0,message:""},buyingPrice:{valid:!0,message:""},sellingPrice:{valid:!0,message:""},quantity:{valid:!0,message:""},size:{valid:!0,message:""},color:{valid:!0,message:""},stockAlert:{valid:!0,message:""},description:{valid:!0,message:""},variants:{valid:!0,message:""},warehouse:{valid:!0,message:""}}}},computed:{qtyTotal(){let t=0;return this.variants.forEach((e=>t+=parseInt(e.quantity))),t},id(){return this.$route.params.id},warehouses(){return this.$store.getters["warehouse/warehouses"]},users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>"delivery"==t.role?.name)).map((t=>({...t,fullname:t.firstname+" "+t.lastname})))}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0;let t=this.product;t.variants=this.variants,t.image=this.image,t.offers=this.offers,t.selectedDeliveries=this.selectedDeliveries.map((t=>({delivery_id:t,product_id:this.id}))),sa.update(this.$route.params.id,t).then((t=>{"PRODUCT_UPDATED"==t.data.code&&this.$alert({type:"success",title:t.data.message}),"PRODUCT_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message}),"QUANTITY_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},handleImageChange(t){const e=t.target.files[0];this.image=e;const r=this.$refs.image;if(e){const t=new FileReader;t.addEventListener("load",(function(){r.src=this.result})),t.readAsDataURL(e)}},resetError(t){this.formStatus[t]={valid:!0,message:""}},getLastVariantId(t){return Math.max(...t.map((t=>t.id)))+1},validate(){return this.formStatus.name=zt(this.product.name,"Product name"),this.formStatus.buyingPrice=zt(this.product.buyingPrice,"Buying price"),this.formStatus.sellingPrice=zt(this.product.sellingPrice,"Selling price"),this.formStatus.description=zt(this.product.description,"Description"),this.formStatus.variants=Pt(this.variants),this.formStatus.name.valid&&this.formStatus.buyingPrice.valid&&this.formStatus.sellingPrice&&this.formStatus.description.valid&&this.formStatus.variants.valid},addVariant(){if(0==this.warehouse)return this.$alert({type:"warning",title:"Select warehouse"}),!1;const t={id:this.variantId,color:this.color.toUpperCase(),size:this.size.toUpperCase(),quantity:this.quantity,warehouse_id:this.warehouse,warehouse:this.warehouses.find((t=>t.id==this.warehouse)),stockAlert:this.stockAlert};this.variants.push(t),this.variantId++,this.color="",this.size="",this.quantity=0,this.stockAlert=0},deleteVariant(t){this.variants=this.variants.filter((e=>e.id!==t))},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},handleStockAlertChange(){this.quantity<=0&&(this.quantity=0)},handleSellingPriceChange(){this.product.sellingPrice<=0&&(this.product.sellingPrice=0)},handleBuyingPriceChange(){this.product.buyingPrice<=0&&(this.product.buyingPrice=0)},getWarhouses(){return vg.all().then((t=>("SUCCESS"==t.data.code&&this.$store.dispatch("warehouse/setWarehouses",t.data.data.warehouses),t)),this.$handleApiError)},getProduct(){return sa.getProduct(this.$route.params.id).then((t=>{if("SUCCESS"==t.data.code){const{variations:e,buying_price:r,selling_price:a,ref:s,name:i,description:l,deliveries:o,image:n,offers:d}=t.data.data.products;return this.variants=e,this.product.buyingPrice=r,this.product.sellingPrice=a,this.product.name=i,this.product.reference=s,this.product.description=l,this.image=n,this.offers=d,this.variantId=this.getLastVariantId(e),this.selectedDeliveries=o.map((t=>t.delivery_id)),this.isLoaded=!0,t}}),this.$handleApiError)},getData(){this.isLoaded=!1,Promise.allSettled([this.getWarhouses(),this.getProduct()]).then((t=>{t.every((t=>"fulfilled"==t.status))&&(this.isLoaded=!0)}),this.$handleApiError)}},mounted(){this.getData()}};const Uf=(0,p.Z)(zf,[["render",pf]]);var Lf=Uf;const Pf={class:"tw-pb-14"},Af=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Product"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Show product informations")],-1),Wf={key:0},$f={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Ef={class:"tw-grid tw-grid-cols-12 tw-gap-2"},qf={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},Tf=(0,s._)("p",{class:"tw-font-light tw-text-neutral-500"},"Name:",-1),Of={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},Vf={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},If=(0,s._)("p",{class:"tw-font-light tw-text-neutral-500"},"Reference:",-1),Ff={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},Rf={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},jf=(0,s._)("p",{class:"tw-font-light tw-text-neutral-500"},"Buying Price:",-1),Nf={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},Mf={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},Hf=(0,s._)("p",{class:"tw-font-light tw-text-neutral-500"},"Selling Price:",-1),Yf={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},Zf={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},Kf=(0,s._)("p",{class:"tw-font-light tw-text-neutral-500"},"Total Delivered:",-1),Bf={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},Qf={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},Gf=(0,s._)("p",{class:"tw-font-light tw-text-neutral-500"},"Total Sent:",-1),Jf={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},Xf={class:"tw-col-span-12 md:tw-col-span-12 tw-flex tw-gap-2 tw-flex-col tw-flex-wrap"},tv=(0,s._)("p",{class:"tw-font-light tw-text-neutral-500"},"Description:",-1),ev={class:"tw-text-neutral-800 tw-font-medium"},rv={key:2,class:"tw-text-neutral-700 tw-font-bold tw-mb-1 tw-mt-5"},av={key:3,class:"tw-border bg-white tw-w-full tw-rounded-md"},sv={key:4,class:"tw-text-neutral-700 tw-font-bold tw-mt-5 tw-mb-1"},iv={key:5,class:"tw-overflow-hidden tw-border bg-white tw-w-full tw-rounded-md"},lv={class:"tw-max-w-full tw-overflow-auto"},ov={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},nv={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},dv={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},wv={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},cv={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},uv={class:"tw-px-6 tw-py-2"},pv={class:"tw-px-6 tw-py-2"},mv={class:"tw-flex tw-flex-col"},gv={class:"tw-px-6 tw-py-2"},hv={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},fv=(0,s._)("th",{scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},null,-1),vv=(0,s._)("th",{scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},null,-1),yv=(0,s._)("td",{class:"tw-px-6 tw-py-2"},null,-1),xv={class:"tw-px-6 tw-py-2"},bv={class:"tw-flex tw-flex-col tw-font-medium"},_v=(0,s._)("td",{class:"tw-px-6 tw-py-2"},null,-1);function kv(t,e,r,a,i,l){const o=(0,s.up)("LoadingAnimation"),n=(0,s.up)("ProductTracking");return(0,s.wg)(),(0,s.iD)("div",Pf,[Af,i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Wf,[(0,s.Wm)(o)])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",$f,[(0,s._)("div",null,[(0,s._)("div",null,[(0,s._)("div",Ef,[(0,s._)("div",qf,[Tf,(0,s._)("p",Of,(0,et.zw)(i.product.name),1)]),(0,s._)("div",Vf,[If,(0,s._)("p",Ff,(0,et.zw)(i.product.ref),1)]),(0,s._)("div",Rf,[jf,(0,s._)("p",Nf,(0,et.zw)(i.product.buying_price)+" "+(0,et.zw)(i.currency),1)]),(0,s._)("div",Mf,[Hf,(0,s._)("p",Yf,(0,et.zw)(i.product.selling_price)+" "+(0,et.zw)(i.currency),1)]),(0,s._)("div",Zf,[Kf,(0,s._)("p",Bf,(0,et.zw)(l.qtyTotalDelivered),1)]),(0,s._)("div",Qf,[Gf,(0,s._)("p",Jf,(0,et.zw)(l.qtyTotalSent),1)]),(0,s._)("div",Xf,[tv,(0,s._)("p",ev,(0,et.zw)(i.product.description),1)])])])])])):(0,s.kq)("",!0),i.isLoaded?((0,s.wg)(),(0,s.iD)("h1",rv,"Tracking")):(0,s.kq)("",!0),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",av,[(0,s.Wm)(n,{product:i.product},null,8,["product"])])):(0,s.kq)("",!0),i.isLoaded?((0,s.wg)(),(0,s.iD)("h1",sv,"Variations")):(0,s.kq)("",!0),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",iv,[(0,s._)("div",null,[(0,s._)("div",null,[(0,s._)("div",lv,[(0,s._)("table",ov,[(0,s._)("thead",nv,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["id","size","color","qty","Stock Alert"],(t=>(0,s._)("th",{class:(0,et.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",dv,(0,et.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.product.variations,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,s._)("th",wv,(0,et.zw)(t.id),1),(0,s._)("th",cv,(0,et.zw)(t.size),1),(0,s._)("td",uv,(0,et.zw)(t.color),1),(0,s._)("td",pv,[(0,s._)("div",mv,[(0,s._)("span",null,"Initial: "+(0,et.zw)(t.quantity),1)])]),(0,s._)("td",gv,(0,et.zw)(t.stockAlert),1)])))),128)),(0,s._)("tr",hv,[fv,vv,yv,(0,s._)("td",xv,[(0,s._)("div",bv,[(0,s._)("span",null,"Total: "+(0,et.zw)(l.qtyTotal),1)])]),_v])])])])])])])):(0,s.kq)("",!0)])}const Cv={class:"tw-flex tw-items-ce tw-gap-1 tw-border-b tw-border-solid tw-border-neutral-200"},Dv=["onClick"];function Sv(t,e,r,a,i,l){const o=(0,s.up)("ProductTrackingTable");return(0,s.wg)(),(0,s.j4)(as._,{flat:"",class:"tw-p-1"},{default:(0,s.w5)((()=>[(0,s._)("div",Cv,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.tabs,(t=>((0,s.wg)(),(0,s.iD)("button",{key:t.id,onClick:e=>i.tab=t.id,class:(0,et.C_)(["tw-px-4 tw-py-2 tw-rounded-t hover:tw-border-orange-500/50 tw-duration-300 tw-border tw-border-solid tw-border-neutral-200 tw-text-neutral-500 tw-border-b-0",{"tw-bg-orange-500 !tw-text-white tw-border-transparent":t.id==i.tab}])},(0,et.zw)(t.name),11,Dv)))),128))]),(0,s.kq)("",!0),(0,s.Wm)(ls.Oo,{class:"tw-mt-0",modelValue:i.tab,"onUpdate:modelValue":e[1]||(e[1]=t=>i.tab=t)},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.tabs,(t=>((0,s.wg)(),(0,s.j4)(os.H,{key:t.id,value:t.id},{default:(0,s.w5)((()=>[(0,s.Wm)(o,{product:r.product,source:t.source},null,8,["product","source"])])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})}const zv={class:"tw-mt-5"},Uv={class:"tw-max-w-full tw-overflow-auto"},Lv={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Pv={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},Av={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"};function Wv(t,e,r,a,i,l){const o=(0,s.up)("ProductTrackingRow");return(0,s.wg)(),(0,s.iD)("div",zv,[(0,s._)("div",Uv,[(0,s._)("table",Lv,[(0,s._)("thead",Pv,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["id","name","quantity","actions"],(t=>(0,s._)("th",{class:(0,et.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",Av,(0,et.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.items,(t=>((0,s.wg)(),(0,s.j4)(o,{item:t,key:t.id,source:r.source},null,8,["item","source"])))),128))])])])])}const $v={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},Ev={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},qv={class:"tw-flex tw-items-start tw-h-full"},Tv={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Ov={class:"tw-px-6 tw-py-2"},Vv={key:0},Iv={class:"tw-w-fit tw-min-w-[200px] tw-flex tw-items-center"},Fv={key:0,class:"tw-h-fit tw-py-2"},Rv=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-emerald-100 tw-border tw-text-emerald-500"}," Received: ",-1),jv={class:"tw-px-3 tw-py-1 tw-border tw-text-emerald-500"},Nv=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-red-100 tw-text-red-500 tw-border"}," Not Received: ",-1),Mv={class:"tw-px-3 tw-py-1 tw-border tw-text-red-500"},Hv=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-purple-100 tw-border tw-text-purple-500"}," Shipped: ",-1),Yv={class:"tw-px-3 tw-py-1 tw-border tw-text-purple-500"},Zv=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-blue-100 tw-border tw-text-blue-500"}," Delivered: ",-1),Kv={class:"tw-px-3 tw-py-1 tw-border tw-text-blue-500"},Bv={key:1},Qv={class:"tw-w-fit tw-min-w-[200px] tw-flex tw-items-center"},Gv={key:0,class:"tw-h-fit tw-py-2"},Jv=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-emerald-100 tw-border tw-text-emerald-500"}," Received: ",-1),Xv={class:"tw-px-3 tw-py-1 tw-border tw-text-emerald-500"},ty=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-red-100 tw-text-red-500 tw-border"}," Not Received: ",-1),ey={class:"tw-px-3 tw-py-1 tw-border tw-text-red-500"},ry=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-purple-100 tw-border tw-text-purple-500"}," Shipped: ",-1),ay={class:"tw-px-3 tw-py-1 tw-border tw-text-purple-500"},sy=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-blue-100 tw-border tw-text-blue-500"}," Delivered: ",-1),iy={class:"tw-px-3 tw-py-1 tw-border tw-text-blue-500"},ly={class:"tw-px-6 tw-py-2 tw-space-x-3"};function oy(t,e,r,a,i,l){const o=(0,s.up)("ShowProductVariantActions");return(0,s.wg)(),(0,s.iD)("tr",$v,[(0,s._)("th",Ev,[(0,s._)("div",qv,(0,et.zw)(r.item.id),1)]),(0,s._)("th",Tv,(0,et.zw)(r.item.name),1),(0,s._)("td",Ov,["warehouses"==r.source?((0,s.wg)(),(0,s.iD)("div",Vv,[(0,s._)("div",Iv,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.showDetails=!i.showDetails),class:"tw-bg-blue-400/10 tw-py-1 tw-px-4 tw-rounded tw-text-blue-400 tw-flex tw-gap-2 tw-items-center tw-justify-between"},[(0,s._)("p",null,"Total: "+(0,et.zw)(l.get_total_quantity(r.item.product_variations)),1),(0,s.Wm)(st.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,et.zw)(i.showDetails?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})])]),(0,s.Wm)($t.Fx,null,{default:(0,s.w5)((()=>[i.showDetails?((0,s.wg)(),(0,s.iD)("div",Fv,[(0,s._)("table",null,[(0,s._)("tbody",null,[(0,s._)("tr",null,[Rv,(0,s._)("td",jv,(0,et.zw)(l.get_total_quantity(r.item.product_variations,"movements_total_confirmed_quantity")),1)]),(0,s._)("tr",null,[Nv,(0,s._)("td",Mv,(0,et.zw)(l.get_total_quantity(r.item.product_variations,"movements_total_not_confirmed_quantity")),1)]),(0,s._)("tr",null,[Hv,(0,s._)("td",Yv,(0,et.zw)(l.get_total_quantity(r.item.product_variations,"total_shipped_quantity")),1)]),(0,s._)("tr",null,[Zv,(0,s._)("td",Kv,(0,et.zw)(l.get_total_quantity(r.item.product_variations,"total_delivered_quantity")),1)])])])])):(0,s.kq)("",!0)])),_:1})])):(0,s.kq)("",!0),"deliveries"==r.source?((0,s.wg)(),(0,s.iD)("div",Bv,[(0,s._)("div",Qv,[(0,s._)("button",{onClick:e[1]||(e[1]=t=>i.showDetails=!i.showDetails),class:"tw-bg-blue-400/10 tw-py-1 tw-px-4 tw-rounded tw-text-blue-400 tw-flex tw-gap-2 tw-items-center tw-justify-between"},[(0,s._)("p",null,"Total: "+(0,et.zw)(l.get_total_quantity(r.item.product_variations)),1),(0,s.Wm)(st.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,et.zw)(i.showDetails?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})])]),(0,s.Wm)($t.Fx,null,{default:(0,s.w5)((()=>[i.showDetails?((0,s.wg)(),(0,s.iD)("div",Gv,[(0,s._)("table",null,[(0,s._)("tbody",null,[(0,s._)("tr",null,[Jv,(0,s._)("td",Xv,(0,et.zw)(l.get_total_quantity(r.item.product_variations,"movements_total_confirmed_quantity")),1)]),(0,s._)("tr",null,[ty,(0,s._)("td",ey,(0,et.zw)(l.get_total_quantity(r.item.product_variations,"movements_total_not_confirmed_quantity")),1)]),(0,s._)("tr",null,[ry,(0,s._)("td",ay,(0,et.zw)(l.get_total_quantity(r.item.product_variations,"total_shipped_quantity")),1)]),(0,s._)("tr",null,[sy,(0,s._)("td",iy,(0,et.zw)(l.get_total_quantity(r.item.product_variations,"total_delivered_quantity")),1)])])])])):(0,s.kq)("",!0)])),_:1})])):(0,s.kq)("",!0)]),(0,s._)("td",ly,[(0,s._)("div",null,[(0,s.Wm)(o,{type:r.source,source:r.item},null,8,["type","source"])])])])}function ny(t,e,r,a,i,l){const o=(0,s.up)("ProductVariantDetails");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(rt.T,{onClick:e[0]||(e[0]=t=>i.visible=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue-lighten-2",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-eye")])),_:1})])),_:1}),(0,s.Wm)(o,{visible:i.visible,onCancel:l.cancel,type:r.type,source:r.source},null,8,["visible","onCancel","type","source"])])}const dy={class:"md:tw-w-[50%] tw-relative tw-max-h-full tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},wy={class:"tw-p-5"},cy={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500 tw-rounded-md tw-overflow-hidden"},uy=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},"SIZE"),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"},"COLOR"),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY ")])],-1);function py(t,e,r,a,i,l){const o=(0,s.up)("ProductVariantDetailsRow"),n=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(n,{visible:r.visible,onCancel:l.cancel},{default:(0,s.w5)((()=>[(0,s._)("div",dy,[(0,s.Wm)(rt.T,{onClick:l.cancel,icon:"mdi-close",variant:"flat",size:"w-small",color:"red",class:"tw-absolute tw-top-3 tw-z-10 tw-right-3"},null,8,["onClick"]),(0,s._)("div",wy,[(0,s._)("table",cy,[uy,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.source.product_variations,(t=>((0,s.wg)(),(0,s.j4)(o,{key:t.id,item:t,type:r.type},null,8,["item","type"])))),128))])]),(0,s.kq)("",!0)])])])),_:1},8,["visible","onCancel"])])}const my={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},gy={class:"tw-w-4 tw-px-2 tw-py-1"},hy={class:"tw-w-4 tw-px-2 tw-py-1"},fy={class:"tw-w-4 tw-px-2 tw-py-1"},vy={class:"tw-w-4 tw-px-2 tw-py-1"},yy={class:"tw-w-fit tw-min-w-[200px] tw-flex tw-items-center"},xy={key:0,class:"tw-h-fit tw-py-2"},by=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-emerald-100 tw-border tw-text-emerald-500"}," Received: ",-1),_y={class:"tw-px-3 tw-py-1 tw-border tw-text-emerald-500"},ky=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-red-100 tw-text-red-500 tw-border"}," Not Received: ",-1),Cy={class:"tw-px-3 tw-py-1 tw-border tw-text-red-500"},Dy=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-purple-100 tw-border tw-text-purple-500"}," Shipped: ",-1),Sy={class:"tw-px-3 tw-py-1 tw-border tw-text-purple-500"},zy=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-blue-100 tw-border tw-text-blue-500"}," Delivered: ",-1),Uy={class:"tw-px-3 tw-py-1 tw-border tw-text-blue-500"};function Ly(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("tr",my,[(0,s._)("td",gy,(0,et.zw)(r.item.id),1),(0,s._)("td",hy,(0,et.zw)(r.item.size),1),(0,s._)("td",fy,(0,et.zw)(r.item.color),1),(0,s._)("td",vy,[(0,s._)("div",null,[(0,s._)("div",yy,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.showDetails=!i.showDetails),class:"tw-bg-blue-400/10 tw-py-1 tw-px-4 tw-rounded tw-text-blue-400 tw-flex tw-gap-2 tw-items-center tw-justify-between"},[(0,s._)("p",null," Total: "+(0,et.zw)(r.item.on_hand_quantity),1),(0,s.Wm)(st.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,et.zw)(i.showDetails?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})])]),(0,s.Wm)($t.Fx,null,{default:(0,s.w5)((()=>[i.showDetails?((0,s.wg)(),(0,s.iD)("div",xy,[(0,s._)("table",null,[(0,s._)("tbody",null,[(0,s._)("tr",null,[by,(0,s._)("td",_y,(0,et.zw)(r.item.movements_total_confirmed_quantity),1)]),(0,s._)("tr",null,[ky,(0,s._)("td",Cy,(0,et.zw)(r.item.movements_total_not_confirmed_quantity),1)]),(0,s._)("tr",null,[Dy,(0,s._)("td",Sy,(0,et.zw)(r.item.total_shipped_quantity),1)]),(0,s._)("tr",null,[zy,(0,s._)("td",Uy,(0,et.zw)(r.item.total_delivered_quantity),1)])])])])):(0,s.kq)("",!0)])),_:1})])])])}var Py={props:["type","item"],data(){return{showDetails:!1}}};const Ay=(0,p.Z)(Py,[["render",Ly]]);var Wy=Ay,$y={props:["visible","source","type"],components:{ProductVariantDetailsRow:Wy},methods:{cancel(){this.$emit("cancel")}},mounted(){}};const Ey=(0,p.Z)($y,[["render",py]]);var qy=Ey,Ty={props:["product","source","type"],components:{ProductVariantDetails:qy},data(){return{visible:!1,quantity:1,newVariant:null}},methods:{cancel(){this.visible=!1}},mounted(){console.log(this.source)}};const Oy=(0,p.Z)(Ty,[["render",ny]]);var Vy=Oy,Iy={components:{ShowProductVariantActions:Vy},props:["source","item"],data(){return{showDetails:!1}},methods:{get_total_quantity(t,e="on_hand_quantity"){let r=0;return t.forEach((t=>{r+=t[e]})),r}}};const Fy=(0,p.Z)(Iy,[["render",oy]]);var Ry=Fy,jy={props:["product","source"],components:{ProductTrackingRow:Ry},computed:{items(){return this.product.tracking[this.source]}},methods:{},mounted(){}};const Ny=(0,p.Z)(jy,[["render",Wv]]);var My=Ny,Hy={components:{ProductTrackingTable:My},props:["product"],data(){return{tab:1,tabs:[{id:1,name:"Deliveries",source:"deliveries"},{id:2,name:"Warehouses",source:"warehouses"}]}}};const Yy=(0,p.Z)(Hy,[["render",Sv]]);var Zy=Yy,Ky={components:{ProductTracking:Zy},data(){return{currency:c,isLoading:!1,isLoaded:!1,variantId:1,variants:[],product:{name:"",reference:"",buyingPrice:0,sellingPrice:0,description:""}}},computed:{qtyTotalDelivered(){let t=0;return this.product.tracking.deliveries.forEach((e=>{e.product_variations.forEach((e=>{t+=e.total_delivered_quantity}))})),this.product.tracking.warehouses.forEach((e=>{e.product_variations.forEach((e=>{t+=e.total_delivered_quantity}))})),t},qtyTotalSent(){let t=0;return this.product.tracking.warehouses.forEach((e=>{e.product_variations.forEach((e=>{t+=e.movements_total_confirmed_quantity,t+=e.movements_total_not_confirmed_quantity}))})),t},qtyTotal(){if(this.isLoaded){let t=0;return this.product.variations.forEach((e=>{t+=e.quantity})),t}return 0}},methods:{getProduct(){const t=this.$route.params.id;sa.getProduct(t).then((t=>{"SUCCESS"==t.data.code&&(this.product=t.data.data.products,this.isLoaded=!0)}),this.$handleApiError)}},mounted(){this.getProduct()}};const By=(0,p.Z)(Ky,[["render",kv]]);var Qy=By,Gy={name:"products",path:"/products",component:da,meta:{module:"product"},children:[{name:"product/list",path:"",component:fp,meta:{module:"product",subModule:"product/list",title:"Products List",gate:"show_all_products"}},{name:"product/add",path:"add",component:Zg,meta:{module:"product",subModule:"product/add",title:"Add Product",gate:"create_product"}},{name:"product/update",path:"update/:id",component:Lf,meta:{module:"product",subModule:"product/update",title:"Update Product",gate:"update_product"}},{name:"product/show",path:":id",component:Qy,meta:{module:"product",subModule:"product/show",title:"Product Informations",gate:"view_product"}}]};const Jy={class:"mb-5 tw-flex tw-justify-between tw-items-center"},Xy=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Users List"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage all users")],-1),tx={key:0},ex=(0,s._)("span",{class:"text-white"}," Add User ",-1),rx={key:0},ax={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},sx={class:"mb-5 tw-flex"},ix={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},lx={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},ox={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},nx=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Role",-1),dx={class:"tw-relative"},wx=["value"],cx={class:""};function ux(t,e,r,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("UsersTable");return(0,s.wg)(),(0,s.iD)("div",{key:o.users.length},[(0,s._)("div",Jy,[Xy,t.$can("create_user")?((0,s.wg)(),(0,s.iD)("div",tx,[(0,s.Wm)(rt.T,{color:"primary-color",link:"",to:{name:"user/add"},variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{icon:"mdi-plus",class:"mr-2 text-white"}),ex])),_:1})])):(0,s.kq)("",!0)]),o.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",rx,[(0,s.Wm)(n)])),o.fetched?((0,s.wg)(),(0,s.iD)("div",ax,[(0,s._)("div",sx,[(0,s.Wm)(rt.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",ix,[(0,s.Wm)(Xt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,l.search]])])]),(0,s._)("div",{class:(0,et.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,s._)("div",lx,[(0,s._)("div",ox,[nx,(0,s._)("div",dx,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.role=t),class:"tw-w-full focus:tw-border-orange-400 tw-capitalize tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.roles,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t,value:t},(0,et.zw)(t),9,wx)))),128))],512),[[a.bM,l.role]]),(0,s.Wm)(st.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])],2),(0,s._)("div",cx,[(0,s.Wm)(d,{users:o.filteredUsers,columns:l.columns},null,8,["users","columns"])])])):(0,s.kq)("",!0)])}const px={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},mx={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},gx={class:"tw-text-xs tw-text-gray-700 tw- tw-bg-gray-50"},hx=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),fx={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},vx=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),yx={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},xx={class:"tw-px-6 tw-py-4"},bx={class:"tw-px-6 tw-py-4"},_x={class:"tw-px-6 tw-py-4"},kx={class:"tw-px-6 tw-py-4"},Cx={class:"tw-px-6 tw-py-4"},Dx={key:0,class:"tw-text-red-500"},Sx={key:1},zx={key:0,class:"tw-text-green-500 tw-flex tw-items-center tw-gap-2"},Ux=(0,s._)("div",{class:"tw-p-1 tw-rounded-full tw-bg-green-500"},null,-1),Lx={key:1,class:"tw-text-neutral-700"},Px={class:"tw-px-6 tw-py-4"},Ax={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},Wx={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},$x={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},Ex=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),qx=["value"],Tx={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},Ox={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},Vx={class:"tw-text-white"};function Ix(t,e,r,i,l,o){const n=(0,s.up)("RoleName"),d=(0,s.up)("UserStatus"),w=(0,s.up)("UserActions");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",px,[(0,s._)("table",mx,[(0,s._)("thead",gx,[(0,s._)("tr",null,[hx,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",fx,(0,et.zw)(t.name),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.items,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[vx,(0,s._)("th",yx,(0,et.zw)(e.id),1),(0,s._)("td",xx,(0,et.zw)(e.firstname)+" "+(0,et.zw)(e.lastname),1),(0,s._)("td",bx,[(0,s.Wm)(n,{role:e.role_name},null,8,["role"])]),(0,s._)("td",_x,(0,et.zw)(e.email),1),(0,s._)("td",kx,(0,et.zw)(e.phone),1),(0,s._)("td",Cx,[e.last_action?((0,s.wg)(),(0,s.iD)("div",Sx,[1==o.isOnline(o.lastSeen(e.last_action))?((0,s.wg)(),(0,s.iD)("div",zx,[Ux,(0,s.Uk)(" Online ")])):((0,s.wg)(),(0,s.iD)("div",Lx,(0,et.zw)(o.lastSeen(e.last_action)),1))])):((0,s.wg)(),(0,s.iD)("div",Dx," Never Connected "))]),(0,s._)("td",Px,[t.$can("update_user_status")?((0,s.wg)(),(0,s.j4)(d,{key:0,user:e},null,8,["user"])):(0,s.kq)("",!0)]),(0,s._)("td",Ax,[(0,s.Wm)(w,{user:e},null,8,["user"])])])))),128))])])]),(0,s._)("div",Wx,[(0,s._)("div",$x,[Ex,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,et.zw)(t),9,qx)))),128))],512),[[a.bM,l.paginationLimit]])]),(0,s._)("div",Tx,[(0,s._)("div",Ox,(0,et.zw)(o.prevRange+1)+" - "+(0,et.zw)(l.currentPage==o.pageCount?r.users.length:o.nextRange)+" of "+(0,et.zw)(r.users.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pageCount,(t=>((0,s.wg)(),(0,s.j4)(rt.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",Vx,(0,et.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}function Fx(t,e,r,a,i,l){const o=(0,s.up)("popup");return(0,s.wg)(),(0,s.iD)("div",null,[t.$can("update_user")?((0,s.wg)(),(0,s.j4)(rt.T,{key:0,to:"/users/update/"+r.user.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1},8,["to"])):(0,s.kq)("",!0),t.$can("view_user")?((0,s.wg)(),(0,s.j4)(rt.T,{key:1,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-eye-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),t.$can("delete_user")&&"admin"!==r.user.role_name?((0,s.wg)(),(0,s.j4)(rt.T,{key:2,onClick:e[0]||(e[0]=t=>i.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this user?</p> You won't be able to revert this!",loading:i.isLoading,visible:i.showPopup,onResolved:l.handleResolved},null,8,["loading","visible","onResolved"])])}var Rx={props:["rowIndex","user"],name:"userActions",data(){return{showPopup:!1,isLoading:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,X["delete"](this.user.id).then((t=>{"USER_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"User Deleted Successfully"})),X.all().then((t=>{"SHOW_ALL_USERS"==t.data.code&&this.$store.dispatch("user/setUsers",t.data.data.users)})).catch(this.$handleApiError)})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const jx=(0,p.Z)(Rx,[["render",Fx]]);var Nx=jx;const Mx={key:0,class:"tw-flex tw-items-center"};function Hx(t,e,r,a,i,l){return"admin"!==r.user.role_name?((0,s.wg)(),(0,s.iD)("div",Mx,[(0,s.Wm)(io.G,{disabled:i.isLoading,loading:i.isLoading,onChange:l.handleChange,color:"primary-color",flat:!0,modelValue:i.checked,"onUpdate:modelValue":e[0]||(e[0]=t=>i.checked=t),density:"compact","hide-details":!0},null,8,["disabled","loading","onChange","modelValue"])])):(0,s.kq)("",!0)}var Yx={props:["rowIndex","prop","user"],data(){return{isLoading:!1,checked:!1}},watch:{},methods:{handleChange(){const t={id:this.user.id,status:this.checked?"true":"false"};this.isLoading=!0,X.updateStatus(t).then((t=>{"STATUS_USER_UPDATED"==t.data.code&&(this.$alert({type:"success",title:"Status updated"}),this.setUpdatedUser(this.user.id,this.checked))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},setUpdatedUser(t,e){let r=localStorage.getItem("updatedUsers"),a={};r?(a=JSON.parse(r),a[t]=e):a[t]=e,localStorage.setItem("updatedUsers",JSON.stringify(a))},getUpdatedUsers(){let t=localStorage.getItem("updatedUsers");if(!t)return{};let e=JSON.parse(t);return e}},mounted(){const t=this.getUpdatedUsers();Object.keys(t).includes(`${this.user.id}`)?this.checked=1==t[this.model.id]:this.checked=1==this.user.status}};const Zx=(0,p.Z)(Yx,[["render",Hx]]);var Kx=Zx;const Bx={class:"tw-flex tw-items-center tw-h-full"};function Qx(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",Bx,[(0,s._)("div",{class:(0,et.C_)([l.current.bg,"tw-px-2 tw-py-1 tw-rounded-lg"])},[(0,s._)("div",{class:(0,et.C_)([l.current.text,"tw-text-sm tw-uppercase"])},(0,et.zw)(r.role),3)],2)])}var Gx={props:["role"],data(){return{variants:{default:{bg:"tw-bg-neutral-500/10",text:"tw-text-neutral-500"},admin:{bg:"tw-bg-pink-500/10",text:"tw-text-pink-500"},agente:{bg:"tw-bg-green-500/10",text:"tw-text-green-500"},delivery:{bg:"tw-bg-blue-500/10",text:"tw-text-blue-500"}}}},computed:{current(){return["admin","delivery","agente"].includes(this.role)?this.variants[this.role]:this.variants["default"]}}};const Jx=(0,p.Z)(Gx,[["render",Qx]]);var Xx=Jx,tb={props:["columns","users"],components:{UserActions:Nx,UserStatus:Kx,RoleName:Xx},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.users.length/this.paginationLimit)},items(){return this.users.slice(this.prevRange,this.nextRange)}},methods:{lastSeen(t){let e=Date.parse(t.replace("-","/"))/1e3;return(0,Xa.x)(e)},isOnline(t){let e=["Just Now","one minute ago","2 minutes ago","3 minutes ago"];return e.includes(t)}}};const eb=(0,p.Z)(tb,[["render",Ix]]);var rb=eb,ab={components:{UsersTable:rb},data(){return{localUrl:n,isLoaded:!1,showFilters:!1,role:"All",search:"",columns:[{prop:"id",name:"#"},{prop:"fullname",name:"Name"},{prop:"role_name",name:"Role"},{prop:"email",name:"Email"},{prop:"phone",name:"Phone Number"},{prop:"last_seen",name:"Last Seen"},{prop:"status",name:"Active"},{name:"Acions",prop:"users"}]}},computed:{fetched(){return this.$store.getters["user/fetched"]},users(){return this.$store.getters["user/users"]},roles(){let t=new Set(["All",...this.users.map((t=>t.role_name))]);return t},filteredUsers(){const t=this.role,e=this.search;return this.users.filter((r=>("all"===t.toLocaleLowerCase()||t.toLocaleLowerCase()===r.role_name)&&!!(r.firstname.toLowerCase().includes(e.toLowerCase())||r.lastname.toLowerCase().includes(e.toLowerCase())||r.role_name.toLowerCase().includes(e.toLowerCase())||r.email.toLowerCase().includes(e.toLowerCase())||r.phone.toLowerCase().includes(e.toLowerCase()))))}},methods:{getRoles(){X.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.isFormReady=!0}})).catch(this.$handleApiError)},getUsers(){X.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),this.$store.dispatch("user/setFetched",!0)}})).catch(this.$handleApiError)}},mounted(){localStorage.removeItem("updatedUsers"),this.fetched||this.getUsers()}};const sb=(0,p.Z)(ab,[["render",ux]]);var ib=sb,lb=r(988);const ob=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Add User "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create new user")],-1),nb={key:0},db={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},wb={class:"tw-w-full"},cb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," First Name ",-1),ub={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},pb={class:"tw-w-full"},mb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Last Name",-1),gb={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},hb={class:"tw-w-full"},fb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Email",-1),vb={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},yb={class:"tw-w-full"},xb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Phone Number ",-1),bb={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},_b=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Product",-1),kb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),Cb=["value"],Db=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery cities",-1),Sb=["value"],zb=(0,s._)("div",{class:"mb-1 my-2 text-body-2 tw-text-zinc-700"},"Fee",-1),Ub=(0,s._)("span",{class:"text-white"},"Add",-1),Lb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Role",-1),Pb={class:"tw-flex tw-gap-10 tw-h-full tw-items-center"},Ab=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Status:",-1),Wb={class:"tw-w-full"},$b=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Password",-1),Eb={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},qb={class:"tw-w-full"},Tb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Confirm Password ",-1),Ob={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Vb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery cities",-1),Ib={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Fb=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),Rb=(0,s._)("span",{class:"text-white text-capitalize"},"Create",-1);function jb(t,e,r,i,l,o){const n=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[ob,l.isFormReady?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",nb,[(0,s.Wm)(n)])),l.isFormReady?((0,s.wg)(),(0,s.iD)("div",db,[(0,s._)("div",null,[(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",wb,[cb,(0,s.Wm)(it.hw,{error:!l.formStatus.firstname.valid,"hide-details":!0,onKeyup:e[0]||(e[0]=t=>o.resetError("firstname")),modelValue:l.user.firstname,"onUpdate:modelValue":e[1]||(e[1]=t=>l.user.firstname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",ub,(0,et.zw)(l.formStatus.firstname.message),1)])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",pb,[mb,(0,s.Wm)(it.hw,{error:!l.formStatus.lastname.valid,"hide-details":!0,onKeyup:e[2]||(e[2]=t=>o.resetError("lastname")),modelValue:l.user.lastname,"onUpdate:modelValue":e[3]||(e[3]=t=>l.user.lastname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",gb,(0,et.zw)(l.formStatus.lastname.message),1)])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",hb,[fb,(0,s.Wm)(it.hw,{error:!l.formStatus.email.valid,"hide-details":!0,onKeyup:e[4]||(e[4]=t=>o.resetError("email")),modelValue:l.user.email,"onUpdate:modelValue":e[5]||(e[5]=t=>l.user.email=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",vb,(0,et.zw)(l.formStatus.email.message),1)])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",yb,[xb,(0,s.Wm)(it.hw,{error:!l.formStatus.phone.valid,"hide-details":!0,onKeyup:e[6]||(e[6]=t=>o.resetError("phone")),modelValue:l.user.phone,"onUpdate:modelValue":e[7]||(e[7]=t=>l.user.phone=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",bb,(0,et.zw)(l.formStatus.phone.message),1)])])),_:1}),o.isAgente?((0,s.wg)(),(0,s.j4)(pa.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",null,[(0,s.Wm)(io.G,{modelValue:l.isHavingAllProducts,"onUpdate:modelValue":e[8]||(e[8]=t=>l.isHavingAllProducts=t),color:"primary-color",label:"All Products"},null,8,["modelValue"])]),_b,(0,s._)("div",null,[(0,s.Wm)(lb.f,{disabled:l.isHavingAllProducts,modelValue:l.selectedProducts,"onUpdate:modelValue":e[9]||(e[9]=t=>l.selectedProducts=t),"filter-keys":"name",density:"compact","item-value":"id","item-title":"name",variant:"outlined",color:"primary-color",chips:"",items:o.selectProducts,multiple:""},null,8,["disabled","modelValue","items"])])])])),_:1})):(0,s.kq)("",!0),o.isDelivery?((0,s.wg)(),(0,s.j4)(pa.D,{key:1,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[kb,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>l.city=t),class:"tw-w-full tw-py-[7px] focus:tw-border-orange-500 tw-px-4 tw-border tw-outline-orange-500 tw-border-neutral-400 tw-border-solid tw-rounded-md"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,et.zw)(t.name),9,Cb)))),128))],512),[[a.bM,l.city]])])])),_:1})):(0,s.kq)("",!0),o.isDelivery?((0,s.wg)(),(0,s.j4)(pa.D,{key:2,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[Db,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[11]||(e[11]=t=>l.deliveryCity=t),class:"tw-w-full tw-py-[7px] focus:tw-border-orange-500 tw-px-4 tw-border tw-outline-orange-500 tw-border-neutral-400 tw-border-solid tw-rounded-md"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,et.zw)(t.name),9,Sb)))),128))],512),[[a.bM,l.deliveryCity]]),zb,(0,s.Wm)(it.hw,{"hide-details":!0,modelValue:l.deliveryCityFee,"onUpdate:modelValue":e[12]||(e[12]=t=>l.deliveryCityFee=t),clearable:"",type:"number","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"]),(0,s.Wm)(rt.T,{onClick:o.handleAddCity,class:"tw-text-white tw-my-3",variant:"flat",color:"primary-color",block:""},{default:(0,s.w5)((()=>[Ub])),_:1},8,["onClick"])])])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1}),(0,s.Wm)(pa.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[Lb,(0,s.Wm)(vp.r,{class:"text-capitalize",items:o.roles,"item-title":"name","item-value":"id",modelValue:l.role,"onUpdate:modelValue":e[13]||(e[13]=t=>l.role=t),variant:"outlined",color:"primary-color",density:"compact"},null,8,["items","modelValue"])])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",Pb,[Ab,(0,s.Wm)(io.G,{modelValue:l.user.status,"onUpdate:modelValue":e[14]||(e[14]=t=>l.user.status=t),color:"primary-color","hide-details":!0,flat:""},null,8,["modelValue"])])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",Wb,[$b,(0,s.Wm)(it.hw,{error:!l.formStatus.password.valid,"hide-details":!0,onKeyup:e[15]||(e[15]=t=>o.resetError("password")),modelValue:l.user.password,"onUpdate:modelValue":e[16]||(e[16]=t=>l.user.password=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",Eb,(0,et.zw)(l.formStatus.password.message),1)])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",qb,[Tb,(0,s.Wm)(it.hw,{error:!l.formStatus.confirmPassword.valid,"hide-details":!0,onKeyup:e[17]||(e[17]=t=>o.resetError("confirmPassword")),modelValue:l.user.confirmPassword,"onUpdate:modelValue":e[18]||(e[18]=t=>l.user.confirmPassword=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",Ob,(0,et.zw)(l.formStatus.confirmPassword.message),1)])])),_:1}),o.isDelivery?((0,s.wg)(),(0,s.j4)(pa.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[Vb,(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveryCities,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"tw-flex tw-items-center tw-gap-2",key:t},[(0,s._)("div",null,(0,et.zw)(o.cities.filter((e=>e.id==t.city_id))[0]?.name),1),(0,s._)("div",null,(0,et.zw)(t.fee)+" "+(0,et.zw)(l.currency),1),(0,s._)("div",null,[(0,s.Wm)(st.t,{color:"red",onClick:e=>o.removeCity(t.id),size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete")])),_:2},1032,["onClick"])])])))),128))])])])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1})])),_:1})]),(0,s._)("div",Ib,[(0,s.Wm)(rt.T,{link:"",to:"/",color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[Fb])),_:1}),(0,s.Wm)(rt.T,{onClick:o.create,loading:l.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[Rb])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}var Nb={data(){return{localUrl:n,currency:c,isFormReady:!1,isLoading:!1,city:1,isMultipleProducts:!1,isHavingAllProducts:!1,id:1,deliveryCity:1,deliveryCityFee:0,deliveryCities:[],product:0,selectedProducts:[],formStatus:{firstname:{valid:!0,message:""},lastname:{valid:!0,message:""},phone:{valid:!0,message:""},email:{valid:!0,message:""},password:{valid:!0,message:""},confirmPassword:{valid:!0,message:""}},user:{firstname:"",lastname:"",phone:"",email:"",password:"",confirmPassword:"",status:!0},role:3}},computed:{roles(){return this.$store.getters["user/roles"]},rolesFetched(){return this.$store.getters["user/fetchedRoles"]},cities(){return this.$store.getters["city/cities"]},citiesFetched(){return this.$store.getters["city/fetched"]},products(){return this.$store.getters["product/products"]},productsFethched(){return this.$store.getters["product/fetched"]},isAgente(){return 2===this.role},isDelivery(){return 3===this.role},selectProducts(){return this.isMultipleProducts,[...this.products]},userProducts(){return this.selectedProducts}},watch:{},methods:{removeCity(t){this.deliveryCities=this.deliveryCities.filter((e=>e.id!==t))},handleAddCity(){if(this.deliveryCityFee<=0)return!1;this.deliveryCities.push({id:this.id,city_id:this.deliveryCity,fee:this.deliveryCityFee}),this.id+=1,this.deliveryCity=1,this.deliveryCityFee=0},create(){if(!this.validate())return!1;this.isLoading=!0;const t={...this.user,role:this.role,product_id:this.userProducts,city:this.city,deliveryCities:this.deliveryCities,having_all:this.isHavingAllProducts};X.register(t).then((t=>{"USER_CREATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.user={firstname:"",lastname:"",phone:"",email:"",password:"",confirmPassword:"",status:!0},this.role=3,this.product_id=null,this.deliveryCities=[],this.id=1)})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;if("VALIDATION_ERROR"==e?.code)for(let r in e.error)this.formStatus[r]={valid:!1,message:e.error[r][0]}})).finally((()=>{this.isLoading=!1}))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){this.formStatus.email=Dt(this.user.email),this.formStatus.firstname=zt(this.user.firstname),this.formStatus.lastname=zt(this.user.lastname),this.formStatus.phone=zt(this.user.phone),this.formStatus.password=St(this.user.password),this.formStatus.confirmPassword=Lt(this.user.password,this.user.confirmPassword);const t=this.formStatus.email.valid,e=this.formStatus.firstname.valid,r=this.formStatus.lastname.valid,a=this.formStatus.phone.valid,s=this.formStatus.password.valid,i=this.formStatus.confirmPassword.valid;return t&&e&&r&&s&&i&&a},getRoles(){return this.rolesFetched?new Promise((t=>t())):X.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.$store.dispatch("user/setFetchedRoles",!0)}})).catch(this.$handleApiError)},async getCities(){return this.citiesFetched?new Promise((t=>t())):X.cities().then((t=>{this.$store.dispatch("city/cities",t.data.data),this.$store.dispatch("city/setFetched",!0)}))},async getProducts(){return this.productsFethched?new Promise((t=>t())):sa.all().then((t=>{this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0)}),(t=>this.$handleApiError(t)))}},mounted(){Promise.allSettled([this.getRoles(),this.getCities(),this.getProducts()]).then((t=>{console.log(t),this.isFormReady=!0}),(t=>this.$handleApiError(t)))}};const Mb=(0,p.Z)(Nb,[["render",jb]]);var Hb=Mb;const Yb=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Update User "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Update user informations")],-1),Zb={key:0},Kb={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Bb={class:"tw-flex tw-gap-2 tw-text-neutral-800 tw-items-center tw-mb-5"},Qb={class:"tw-block tw-py-1 tw-px-2 tw-rounded-md text-primary-color"},Gb={class:"tw-w-full"},Jb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," First Name ",-1),Xb={class:"tw-w-full"},t_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Last Name",-1),e_={class:"tw-w-full"},r_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Email",-1),a_={class:"tw-w-full"},s_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Phone Number ",-1),i_={class:"tw-w-full tw-flex tw-gap-10 tw-items-center"},l_=(0,s._)("span",null,"Update Password: ",-1),o_={class:"tw-w-full"},n_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Password",-1),d_={class:"tw-w-full"},w_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Confirm Password ",-1),c_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Role",-1),u_={class:"tw-flex tw-gap-10 tw-h-full tw-items-center"},p_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Status:",-1),m_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Product",-1),g_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),h_=["value"],f_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery cities",-1),v_=["value"],y_=(0,s._)("div",{class:"mb-1 my-2 text-body-2 tw-text-zinc-700"},"Fee",-1),x_=(0,s._)("span",{class:"text-white"},"Add",-1),b_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery cities",-1),__={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},k_=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),C_=(0,s._)("span",{class:"text-white text-capitalize"},"Update",-1);function D_(t,e,r,i,l,o){const n=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[Yb,o.isFormReady?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Zb,[(0,s.Wm)(n)])),o.isFormReady?((0,s.wg)(),(0,s.iD)("div",Kb,[(0,s._)("div",Bb,[(0,s.Uk)(" User ID: "),(0,s._)("span",Qb,(0,et.zw)(l.id),1)]),(0,s._)("div",null,[(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",Gb,[Jb,(0,s.Wm)(it.hw,{"error-messages":l.formStatus.firstname.message,modelValue:l.firstname,"onUpdate:modelValue":e[0]||(e[0]=t=>l.firstname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",Xb,[t_,(0,s.Wm)(it.hw,{"error-messages":l.formStatus.lastname.message,modelValue:l.lastname,"onUpdate:modelValue":e[1]||(e[1]=t=>l.lastname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",e_,[r_,(0,s.Wm)(it.hw,{"error-messages":l.formStatus.email.message,modelValue:l.email,"onUpdate:modelValue":e[2]||(e[2]=t=>l.email=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",a_,[s_,(0,s.Wm)(it.hw,{"error-messages":l.formStatus.phone.message,modelValue:l.phone,"onUpdate:modelValue":e[3]||(e[3]=t=>l.phone=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-0",cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",i_,[l_,(0,s.Wm)(io.G,{modelValue:l.updatePassword,"onUpdate:modelValue":e[4]||(e[4]=t=>l.updatePassword=t),color:"primary-color","hide-details":!0},null,8,["modelValue"])])])),_:1}),l.updatePassword?((0,s.wg)(),(0,s.j4)(pa.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",o_,[n_,(0,s.Wm)(it.hw,{"error-messages":l.formStatus.password.message,modelValue:l.password,"onUpdate:modelValue":e[5]||(e[5]=t=>l.password=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1})):(0,s.kq)("",!0),l.updatePassword?((0,s.wg)(),(0,s.j4)(pa.D,{key:1,class:"!tw-py-2 tw-pt-0",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",d_,[w_,(0,s.Wm)(it.hw,{"error-messages":l.formStatus.confirmPassword.message,modelValue:l.confirmPassword,"onUpdate:modelValue":e[6]||(e[6]=t=>l.confirmPassword=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1}),(0,s.Wm)(pa.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[c_,(0,s.Wm)(vp.r,{class:"text-capitalize","error-messages":l.formStatus.role,items:o.roles,"item-title":"name","item-value":"id",modelValue:l.role,"onUpdate:modelValue":e[7]||(e[7]=t=>l.role=t),variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","items","modelValue"])])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",u_,[p_,(0,s.Wm)(io.G,{modelValue:l.status,"onUpdate:modelValue":e[8]||(e[8]=t=>l.status=t),color:"primary-color","hide-details":!0,flat:""},null,8,["modelValue"])])])),_:1}),o.isAgente?((0,s.wg)(),(0,s.j4)(pa.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",null,[(0,s.Wm)(io.G,{modelValue:l.isHavingAllProducts,"onUpdate:modelValue":e[9]||(e[9]=t=>l.isHavingAllProducts=t),color:"primary-color",label:"All Products"},null,8,["modelValue"])]),m_,(0,s._)("div",null,[(0,s.Wm)(lb.f,{disabled:l.isHavingAllProducts,modelValue:l.selectedProducts,"onUpdate:modelValue":e[10]||(e[10]=t=>l.selectedProducts=t),"filter-keys":"name",density:"compact","item-value":"id","item-title":"name",variant:"outlined",color:"primary-color",chips:"",items:o.selectProducts,multiple:""},null,8,["disabled","modelValue","items"])])])])),_:1})):(0,s.kq)("",!0),o.isDelivery?((0,s.wg)(),(0,s.j4)(pa.D,{key:1,class:"!tw-py-2",cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[g_,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[11]||(e[11]=t=>l.city=t),class:"tw-w-full tw-py-[7px] focus:tw-border-orange-500 tw-px-4 tw-border tw-outline-orange-500 tw-border-neutral-400 tw-border-solid tw-rounded-md"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,et.zw)(t.name),9,h_)))),128))],512),[[a.bM,l.city]])])])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1}),o.isDelivery?((0,s.wg)(),(0,s.j4)(pa.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[f_,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[12]||(e[12]=t=>l.deliveryCity=t),class:"tw-w-full tw-py-[7px] focus:tw-border-orange-500 tw-px-4 tw-border tw-outline-orange-500 tw-border-neutral-400 tw-border-solid tw-rounded-md"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,et.zw)(t.name),9,v_)))),128))],512),[[a.bM,l.deliveryCity]]),y_,(0,s.Wm)(it.hw,{"hide-details":!0,modelValue:l.deliveryCityFee,"onUpdate:modelValue":e[13]||(e[13]=t=>l.deliveryCityFee=t),clearable:"",type:"number","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"]),(0,s.Wm)(rt.T,{onClick:o.handleAddCity,class:"tw-text-white tw-my-3",variant:"flat",color:"primary-color",block:""},{default:(0,s.w5)((()=>[x_])),_:1},8,["onClick"])])])),_:1})):(0,s.kq)("",!0),o.isDelivery?((0,s.wg)(),(0,s.j4)(pa.D,{key:1,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[b_,(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveryCities,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"tw-flex tw-items-center tw-gap-2",key:t},[(0,s._)("div",null,(0,et.zw)(l.cities.filter((e=>e.id==t.city_id))[0]?.name),1),(0,s._)("div",null,(0,et.zw)(t.fee)+" DH ",1),(0,s._)("div",null,[(0,s.Wm)(st.t,{color:"red",onClick:e=>o.removeCity(t.id),size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete")])),_:2},1032,["onClick"])])])))),128))])])])),_:1})):(0,s.kq)("",!0)])),_:1})]),(0,s._)("div",__,[(0,s.Wm)(rt.T,{link:"",to:{name:"user/list"},color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[k_])),_:1}),(0,s.Wm)(rt.T,{onClick:o.update,loading:l.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[C_])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}var S_={data(){return{serverUrl:d,isFetched:!1,isRolesFetched:!1,isUserFetched:!1,isProductsFetched:!1,isLoading:!1,updatePassword:!1,autoId:1,cities:[],deliveryCity:1,deliveryCityFee:0,city:1,deliveryCities:[],formStatus:{firstname:{valid:!0,message:""},lastname:{valid:!0,message:""},phone:{valid:!0,message:""},email:{valid:!0,message:""},password:{valid:!0,message:""},confirmPassword:{valid:!0,message:""}},id:null,firstname:"",lastname:"",phone:"",email:"",password:"",confirmPassword:"",role:"",user_image:null,status:!1,product:null,products:[],selectedProducts:[],isMultipleProducts:!1,isHavingAllProducts:!1}},computed:{roles(){return this.$store.getters["user/roles"]},isFormReady(){return this.isFetched},isAgente(){return 2===this.role},isDelivery(){return 3===this.role},user(){return{id:this.id,firstname:this.firstname,lastname:this.lastname,phone:this.phone,email:this.email,password:this.password,product_id:this.product,deliveryCities:this.deliveryCities,city:this.city,role:this.role,status:this.status?1:0}},selectProducts(){return this.isMultipleProducts,[...this.products]},userProducts(){return this.selectedProducts}},watch:{role(t){console.log("changed"),2===t&&0===this.products.length&&(this.isProductsFetched=!1)}},methods:{update(){if(!this.validate())return!1;const t={...this.user,role:this.role,product_id:this.userProducts,city:this.city,deliveryCities:this.deliveryCities,having_all:this.isHavingAllProducts};this.isLoading=!0,X.update(t,this.updatePassword).then((t=>{"USER_UPDATED"==t.data.code&&this.$alert({type:"success",title:t.data.message})})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;switch(console.log(t),e?.code){case"VALIDATION_ERROR":for(let t in e.error)this.formStatus[t]={valid:!1,message:e.error[t][0]};break}return t})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1}))},validate(){this.formStatus["email"]=Dt(this.email),this.formStatus["firstname"]=zt(this.firstname),this.formStatus["lastname"]=zt(this.lastname),this.formStatus["phone"]=zt(this.phone),this.formStatus["password"]=St(this.password),this.formStatus["confirmPassword"]=Lt(this.password,this.confirmPassword);const t=this.formStatus["email"].valid,e=this.formStatus["firstname"].valid,r=this.formStatus["lastname"].valid,a=this.formStatus["phone"].valid;if(this.updatePassword){const s=this.formStatus["password"].valid,i=this.formStatus["confirmPassword"].valid;return t&&e&&r&&s&&i&&a}return t&&e&&r&&a},removeCity(t){this.deliveryCities=this.deliveryCities.filter((e=>e.id!==t))},handleAddCity(){if(this.deliveryCityFee<=0)return!1;this.deliveryCities.push({id:this.autoId,city_id:this.deliveryCity,fee:this.deliveryCityFee}),this.autoId+=1,this.deliveryCity=1,this.deliveryCityFee=0},async getRoles(){await X.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.isRolesFetched=!0}})).catch(this.$handleApiError)},async getUser(){return X.getUser(this.$route.params.id).then((t=>{if("USER_SUCCESS"==t?.data.code){const e=t.data.data.user;if(this.id=e.id,this.firstname=e.firstname,this.lastname=e.lastname,this.email=e.email,this.phone=e.phone,this.role=e.role,2==e.role&&(this.isHavingAllProducts=1==e.having_all,this.selectedProducts=e?.product),this.user_image=e.photo,this.status=1==e.status,this.isUserFetched=!0,3==e.role){console.log("this is delivery"),this.city=e?.city?.id;let t=0;this.deliveryCities=e.deliveryPlaces.map((e=>(parseInt(e.id)>=t&&(t=parseInt(e.id)+1),{id:e.id,city_id:e.city_id,fee:parseInt(e.fee)}))),this.autoId=t}}})).catch(this.$handleApiError)},async getProducts(){return sa.all().then((t=>{this.products=t.data.data.products,this.products.length>0?this.product=this.user.product_id:this.product=null,this.isProductsFetched=!0}),(t=>this.$handleApiError(t)))},async getCities(){return X.cities().then((t=>{console.log(t.data),this.cities=t.data.data}))}},async mounted(){0==this.roles.length?await this.getRoles():this.isRolesFetched=!0,Promise.allSettled([this.getRoles(),this.getProducts(),this.getCities(),this.getUser()]).then((()=>{this.selectedProducts.length==this.products.length&&(this.product=0,this.isMultipleProducts=!1),this.isFetched=!0}),(t=>this.$handleApiError(t)))}};const z_=(0,p.Z)(S_,[["render",D_]]);var U_=z_;const L_=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Add New Role "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create new Role")],-1),P_={key:0},A_={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},W_={class:"md:tw-w-1/2 tw-w-full"},$_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Role Name",-1),E_={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},q_={class:"mb-3 text-body-2 tw-text-zinc-700"},T_={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-text-xs"},O_={class:"tw-flex tw-flex-wrap tw-gap-2 tw-mt-5"},V_=["onClick"],I_={key:0},F_={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},R_=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),j_=(0,s._)("span",{class:"text-white text-capitalize"},"Create",-1);function N_(t,e,r,a,i,l){const o=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[L_,i.isFormReady?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",P_,[(0,s.Wm)(o)])),i.isFormReady?((0,s.wg)(),(0,s.iD)("div",A_,[(0,s._)("div",null,[(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",W_,[$_,(0,s.Wm)(it.hw,{error:!i.formStatus.name.valid,"hide-details":!0,onKeyup:e[0]||(e[0]=t=>l.resetError("firstname")),modelValue:i.name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",E_,(0,et.zw)(i.formStatus.name.message),1)])])),_:1}),(0,s.Wm)(pa.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",q_,[(0,s.Uk)(" Select Permissions: "),(0,s._)("div",T_,(0,et.zw)(i.formStatus.permissions.message),1)]),(0,s._)("div",O_,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.permissions,(t=>((0,s.wg)(),(0,s.iD)("div",{onClick:e=>l.handleClick(t),class:(0,et.C_)([{"!tw-bg-orange-500 !tw-text-white":i.selectedPermissions.includes(t)},"tw-py-1 tw-px-2 tw-bg-gray-900/10 tw-text-gray-900 tw-rounded-lg tw-cursor-pointer"]),key:t},[(0,s._)("span",null,(0,et.zw)(t),1)],10,V_)))),128))])])])),_:1})])),_:1})])),_:1}),(0,s.Wm)(pa.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[i.show?((0,s.wg)(),(0,s.iD)("div",I_,(0,et.zw)(i.selectedPermissions),1)):(0,s.kq)("",!0)])),_:1})])),_:1})]),(0,s._)("div",F_,[(0,s.Wm)(rt.T,{link:"",to:"/",color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[R_])),_:1}),(0,s.Wm)(rt.T,{onClick:l.create,loading:i.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[j_])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}var M_={data(){return{localUrl:n,isFormReady:!1,isLoading:!1,show:!1,formStatus:{name:{valid:!0,message:""},permissions:{valid:!0,message:""}},name:"",permissions:[],selectedPermissions:[]}},computed:{roles(){return this.$store.getters["user/roles"]}},methods:{create(){if(!this.validate())return!1;this.isLoading=!0,X.createRole({name:this.name,permissions:this.selectedPermissions}).then((t=>{"ROLE_ADDED"===t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.getRoles(),this.name="",this.selectedPermissions=[])})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;if("VALIDATION_ERROR"==e?.code)for(let r in e.error)this.formStatus[r]={valid:!1,message:e.error[r][0]}})).finally((()=>{this.isLoading=!1}))},handleClick(t){this.selectedPermissions.includes(t)?this.selectedPermissions=this.selectedPermissions.filter((e=>e!==t)):this.selectedPermissions.push(t)},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=zt(this.name,"Name"),this.formStatus.permissions=At(this.selectedPermissions),this.formStatus.name.valid&&this.formStatus.permissions.valid},getRoles(){X.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.isFormReady=!0}})).catch(this.$handleApiError)}},async mounted(){0==this.roles.length?await this.getRoles():this.isFormReady=!0,this.permissions=this.$store.getters["user/permissions"]}};const H_=(0,p.Z)(M_,[["render",N_]]);var Y_=H_;const Z_={class:"mb-5 tw-flex tw-justify-between tw-items-center"},K_=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Roles List"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage all Roles")],-1),B_={key:0},Q_=(0,s._)("span",{class:"text-white"}," Add Role ",-1),G_={key:0},J_={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},X_={class:"mb-5 tw-flex"},tk={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},ek={class:""};function rk(t,e,r,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("RolesTable");return(0,s.wg)(),(0,s.iD)("div",{key:o.roles.length},[(0,s._)("div",Z_,[K_,t.$can("create_role")?((0,s.wg)(),(0,s.iD)("div",B_,[(0,s.Wm)(rt.T,{color:"primary-color",link:"",to:{name:"user/addRole"},variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{icon:"mdi-plus",class:"mr-2 text-white"}),Q_])),_:1})])):(0,s.kq)("",!0)]),o.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",G_,[(0,s.Wm)(n)])),o.fetched?((0,s.wg)(),(0,s.iD)("div",J_,[(0,s._)("div",X_,[(0,s.Wm)(rt.T,{icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white !tw-w-0 !tw-overflow-hidden"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",tk,[(0,s.Wm)(Xt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,l.search]])])]),(0,s._)("div",ek,[(0,s.Wm)(d,{roles:o.filteredRoles,columns:l.columns},null,8,["roles","columns"])])])):(0,s.kq)("",!0)])}const ak={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},sk={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},ik={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},lk=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),ok={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},nk=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),dk={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},wk={class:"tw-px-6 tw-py-4 tw-uppercase"},ck={class:"tw-px-6 tw-py-4"},uk={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},pk={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},mk={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},gk=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),hk=["value"],fk={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},vk={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},yk={class:"tw-text-white"};function xk(t,e,r,i,l,o){const n=(0,s.up)("RolePermissions"),d=(0,s.up)("RoleActions");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",ak,[(0,s._)("table",sk,[(0,s._)("thead",ik,[(0,s._)("tr",null,[lk,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",ok,(0,et.zw)(t.name),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.items,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[nk,(0,s._)("th",dk,(0,et.zw)(t.id),1),(0,s._)("td",wk,(0,et.zw)(t.name),1),(0,s._)("td",ck,[(0,s.Wm)(n,{role:t},null,8,["role"])]),(0,s._)("td",uk,[(0,s.Wm)(d,{role:t},null,8,["role"])])])))),128))])])]),(0,s._)("div",pk,[(0,s._)("div",mk,[gk,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,et.zw)(t),9,hk)))),128))],512),[[a.bM,l.paginationLimit]])]),(0,s._)("div",fk,[(0,s._)("div",vk,(0,et.zw)(o.prevRange+1)+" - "+(0,et.zw)(l.currentPage==o.pageCount?r.roles.length:o.nextRange)+" of "+(0,et.zw)(r.roles.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pageCount,(t=>((0,s.wg)(),(0,s.j4)(rt.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",yk,(0,et.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const bk={key:0},_k={class:"tw-flex tw-flex-wrap tw-gap-2"};function kk(t,e,r,a,i,l){const o=(0,s.up)("popup");return["admin","agente","delivery"].includes(r.role.name)?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",bk,[t.$can("update_role")?((0,s.wg)(),(0,s.j4)(rt.T,{key:0,to:"/users/roles/update/"+r.role.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1},8,["to"])):(0,s.kq)("",!0),t.$can("delete_role")&&"admin"!==r.role.name?((0,s.wg)(),(0,s.j4)(rt.T,{key:1,onClick:e[0]||(e[0]=t=>i.showPopupDelete=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this Role?</p> You won't be able to revert this!",loading:i.isLoadingDelete,visible:i.showPopupDelete,onResolved:l.handleResolvedDelete},null,8,["loading","visible","onResolved"]),(0,s.Wm)(o,{noConfirm:!0,type:"info",title:"Permissions",loading:i.isLoadingShow,visible:i.showPopupShow,onResolved:l.handleResolvedShow},{default:(0,s.w5)((()=>[(0,s._)("div",_k,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.permissions,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"tw-py-1 tw-px-2 tw-bg-gray-900/10 tw-text-gray-900 tw-rounded-lg tw-cursor-pointer",key:t},(0,et.zw)(t),1)))),128))])])),_:1},8,["loading","visible","onResolved"])]))}var Ck={props:["rowIndex","prop","role"],name:"roleActions",data(){return{showPopupDelete:!1,showPopupShow:!1,isLoadingDelete:!1,isLoadingShow:!1,permissions:["create_user","delete_user","update_user","show_user"]}},methods:{handleResolvedDelete(t){t?(this.isLoadingDelete=!0,X.deleteRole(this.role.id).then((t=>{"ROLE_DELETED"==t.data.code&&(this.isLoadingDelete=!1,this.$alert({type:"success",title:"Role Deleted Successfully"})),X.roles().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("user/setRoles",t.data.data.roles)})).catch(this.$handleApiError)})).catch(this.$handleApiError).finally((()=>{this.isLoadingDelete=!1,this.showPopupDelete=!1}))):this.showPopupDelete=!1},handleResolvedShow(t){t?console.log(t):this.showPopupShow=!1}}};const Dk=(0,p.Z)(Ck,[["render",kk]]);var Sk=Dk;const zk={class:"tw-h-100 tw-flex tw-items-center tw-max-w-[750px] tw-flex-wrap tw-gap-2"},Uk=["title"];function Lk(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",zk,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.permissions,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"tw-py-0 tw-px-2 tw-text-xs tw-h-5 tw-bg-gray-900/10 tw-text-gray-900 tw-rounded-lg",title:t.description,key:t.name},(0,et.zw)(t.name),9,Uk)))),128))])}var Pk={props:["role"],name:"rolePermissions",data(){return{}},computed:{permissions(){return this.role.permissions.map((t=>t))}}};const Ak=(0,p.Z)(Pk,[["render",Lk]]);var Wk=Ak,$k={props:["columns","roles"],components:{RoleActions:Sk,RolePermissions:Wk},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.roles.length/this.paginationLimit)},items(){return this.roles.slice(this.prevRange,this.nextRange)}},methods:{}};const Ek=(0,p.Z)($k,[["render",xk]]);var qk=Ek,Tk={components:{RolesTable:qk},data(){return{localUrl:n,search:"",columns:[{prop:"id",name:"#"},{prop:"name",name:"Role Name"},{prop:"permissions",name:"Permissions"},{name:"Acions",prop:"roles"}]}},computed:{roles(){return this.$store.getters["user/roles"]},fetched(){return this.$store.getters["user/fetchedRoles"]},filteredRoles(){return this.roles.filter((t=>{const e=t.permissions.map((t=>t.name));return!!(""===this.search||t.name.toLocaleLowerCase().includes(this.search.toLocaleLowerCase())||e.includes(this.search.toLocaleLowerCase())||e.some((t=>t.toLowerCase().includes(this.search.toLocaleLowerCase()))))}))}},methods:{getRoles(){return X.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.$store.dispatch("user/setFetchedRoles",!0)}})).catch(this.$handleApiError)}},mounted(){this.rolesFetched||this.getRoles()}};const Ok=(0,p.Z)(Tk,[["render",rk]]);var Vk=Ok;const Ik=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Update Role "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Update existing role")],-1),Fk={key:0},Rk={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},jk={class:"md:tw-w-1/2 tw-w-full"},Nk=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Role Name ",-1),Mk={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Hk={class:"mb-3 text-body-2 tw-text-zinc-700"},Yk={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-text-xs"},Zk={class:"tw-flex tw-flex-wrap tw-gap-2 tw-mt-5"},Kk=["onClick"],Bk={key:0},Qk={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Gk=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),Jk=(0,s._)("span",{class:"text-white text-capitalize"},"Update",-1);function Xk(t,e,r,a,i,l){const o=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[Ik,i.isFormReady?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Fk,[(0,s.Wm)(o)])),i.isFormReady?((0,s.wg)(),(0,s.iD)("div",Rk,[(0,s._)("div",null,[(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",jk,[Nk,(0,s.Wm)(it.hw,{error:!i.formStatus.name.valid,"hide-details":!0,onKeyup:e[0]||(e[0]=t=>l.resetError("firstname")),modelValue:i.name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",Mk,(0,et.zw)(i.formStatus.name.message),1)])])),_:1}),(0,s.Wm)(pa.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",Hk,[(0,s.Uk)(" Select Permissions: "),(0,s._)("div",Yk,(0,et.zw)(i.formStatus.permissions.message),1)]),(0,s._)("div",Zk,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.permissions,(t=>((0,s.wg)(),(0,s.iD)("div",{onClick:e=>l.handleClick(t),class:(0,et.C_)([{"!tw-bg-orange-500 !tw-text-white":i.selectedPermissions.includes(t)},"tw-py-1 tw-px-2 tw-bg-gray-900/10 tw-text-gray-900 tw-rounded-lg tw-cursor-pointer"]),key:t},(0,et.zw)(t),11,Kk)))),128))])])])),_:1})])),_:1})])),_:1}),(0,s.Wm)(pa.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[i.show?((0,s.wg)(),(0,s.iD)("div",Bk,(0,et.zw)(i.selectedPermissions),1)):(0,s.kq)("",!0)])),_:1})])),_:1})]),(0,s._)("div",Qk,[(0,s.Wm)(rt.T,{link:"",to:"/users/roles",color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[Gk])),_:1}),(0,s.Wm)(rt.T,{onClick:l.update,loading:i.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[Jk])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}var tC={data(){return{localUrl:n,isFormReady:!1,isLoading:!1,show:!1,formStatus:{name:{valid:!0,message:""},permissions:{valid:!0,message:""}},name:"",permissions:[],selectedPermissions:[]}},computed:{roles(){return this.$store.getters["user/roles"]}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,X.updateRole(this.$route.params.id,{name:this.name,permissions:this.selectedPermissions}).then((t=>{"ROLE_UPDATED"===t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.getRoles())})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;if("VALIDATION_ERROR"==e?.code)for(let r in e.error)this.formStatus[r]={valid:!1,message:e.error[r][0]}})).finally((()=>{this.isLoading=!1}))},handleClick(t){this.selectedPermissions.includes(t)?this.selectedPermissions=this.selectedPermissions.filter((e=>e!==t)):this.selectedPermissions.push(t)},addPermissions(t){return t},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=zt(this.name,"Name"),this.formStatus.permissions=At(this.selectedPermissions),this.formStatus.name.valid&&this.formStatus.permissions.valid},getRole(){X.getRole(this.$route.params.id).then((t=>{this.name=t.data.data.role,this.selectedPermissions=[...t.data.data.permission],this.isFormReady=!0}))},getRoles(){X.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.isFormReady=!0}})).catch(this.$handleApiError)}},async mounted(){await this.getRole(),this.permissions=this.$store.getters["user/permissions"]}};const eC=(0,p.Z)(tC,[["render",Xk]]);var rC=eC,aC={name:"users",path:"/users",component:da,meta:{module:"user"},children:[{name:"user/list",path:"",component:ib,meta:{module:"user",subModule:"user/list",title:"Users List",gate:"show_all_users"}},{name:"user/add",path:"add",component:Hb,meta:{module:"user",subModule:"user/add",title:"Add User",gate:"create_user"}},{name:"user/update",path:"update/:id",component:U_,meta:{module:"user",subModule:"user/update",title:"Update User",gate:"update_user"}},{name:"user/addRole",path:"addRole",component:Y_,meta:{module:"user",subModule:"user/addRole",title:"Add Role",gate:"create_role"}},{name:"user/roles",path:"roles",component:Vk,meta:{module:"user",subModule:"user/roles",title:"Roles List",gate:"show_all_roles"}},{name:"user/updateRole",path:"roles/update/:id",component:rC,meta:{module:"user",subModule:"user/updateRole",title:"Update Role",gate:"view_role"}}]};const sC={class:"mb-5 tw-flex tw-justify-between tw-items-center"},iC=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Sales List "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your sales")],-1),lC={key:0},oC=(0,s._)("span",{class:"text-white"}," Add Sale ",-1),nC={key:0},dC={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},wC={class:"mb-5 tw-flex"},cC={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},uC={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},pC={class:""};function mC(t,e,r,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("SalesAnalytics"),w=(0,s.up)("IndexFilter"),c=(0,s.up)("SalesTable"),u=(0,s.up)("AddSale"),p=(0,s.up)("NewAddSale");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",sC,[iC,t.$can("create_sale")&&o.fetched?((0,s.wg)(),(0,s.iD)("div",lC,[(0,s.Wm)(rt.T,{color:"primary-color",onClick:e[0]||(e[0]=t=>l.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{icon:"mdi-plus",class:"mr-2 text-white"}),oC])),_:1})])):(0,s.kq)("",!0)]),o.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",nC,[(0,s.Wm)(n)])),o.fetched?((0,s.wg)(),(0,s.iD)("div",dC,[(0,s.Wm)(d,{sales:o.sales},null,8,["sales"]),(0,s._)("div",wC,[(0,s.Wm)(rt.T,{onClick:e[1]||(e[1]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",cC,[(0,s.Wm)(Xt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by client, phone..."},null,512),[[a.nr,l.search]])]),(0,s._)("div",uC,[(0,s.Wm)(st.t,{class:"tw-text-gray-500",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pound")])),_:1}),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.searchId=t),type:"number",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search By ID"},null,512),[[a.nr,l.searchId]])]),(0,s.Wm)(lr.C),(0,s.Wm)(rt.T,{onClick:o.handleReset,icon:"",rounded:"lg",variant:"flat",size:"small",disabled:l.isButtonDisabled,loading:l.isLoadingReset,color:"red",class:"text-white tw-mr-2"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white",icon:"mdi-restart-alert",size:"xx-large"})])),_:1},8,["onClick","disabled","loading"]),(0,s.Wm)(rt.T,{onClick:o.getSales,icon:"",rounded:"lg",variant:"flat",size:"small",color:"blue",class:"text-white tw-mr-2"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white",icon:"mdi-autorenew",size:"xx-large"})])),_:1},8,["onClick"])]),(0,s._)("div",{class:(0,et.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[1000px] !tw-overflow-visible":l.showFilters}])},[(0,s.Wm)(w,{sales:o.sales,search:l.search,"search-id":l.searchId,filtered:l.filteredSales,"onUpdate:filtered":e[4]||(e[4]=t=>l.filteredSales=t),selected:o.selectedSales},null,8,["sales","search","search-id","filtered","selected"])],2),(0,s._)("div",pC,[((0,s.wg)(),(0,s.j4)(c,{onSelected:o.handleSelected,"selected-reset":l.selected,key:l.filteredSales.length,sales:l.filteredSales},null,8,["onSelected","selected-reset","sales"]))]),(0,s.Wm)(u,{onCancel:e[5]||(e[5]=t=>l.showPopup=!1),visible:!1}),(0,s.Wm)(p,{onCancel:e[6]||(e[6]=t=>l.showPopup=!1),visible:l.showPopup,"onUpdate:visible":e[7]||(e[7]=t=>l.showPopup=t)},null,8,["visible"])])):(0,s.kq)("",!0)])}const gC={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},hC={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},fC=(0,s._)("h1",{class:"tw-text-lg"},"Create Order",-1),vC={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},yC={class:"md:tw-col-span-6 tw-col-span-12"},xC=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),bC={class:"md:tw-col-span-6 tw-col-span-12"},_C=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),kC={class:"md:tw-col-span-6 tw-col-span-12"},CC=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),DC=["value"],SC={class:"md:tw-col-span-6 tw-col-span-12"},zC=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),UC={class:"md:tw-col-span-12 tw-col-span-12"},LC=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Price",-1),PC={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},AC=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Warehouse",-1),WC=(0,s._)("option",{value:0}," Select ",-1),$C=["value"],EC={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},qC=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Product",-1),TC=(0,s._)("option",{value:0}," Select ",-1),OC=["value"],VC={class:"md:tw-col-span-6 tw-col-span-12"},IC=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variations",-1),FC=(0,s._)("option",{value:0}," Select ",-1),RC=["value"],jC={class:"md:tw-col-span-6 tw-col-span-12"},NC=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),MC={class:"md:tw-col-span-6 tw-col-span-12"},HC={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},YC={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit -tw-rotate-90 tw-scale-75"},ZC=(0,s._)("div",{class:"tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),KC={class:"tw-flex tw-flex-col tw-justify-center"},BC={class:"md:tw-col-span-6 tw-col-span-12"},QC={key:0,class:"md:tw-col-span-12 tw-col-span-12"},GC={class:"tw-max-w-full tw-overflow-auto"},JC={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},XC={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},tD={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},eD={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},rD={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},aD={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},sD={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},iD={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},lD={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},oD=(0,s._)("span",{class:"text-white"}," Cancel ",-1),nD=(0,s._)("span",{class:"text-white"}," Save ",-1);function dD(t,e,r,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(d,{onCancel:e[12]||(e[12]=e=>t.$emit("cancel")),visible:r.visible},{default:(0,s.w5)((()=>[l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",gC,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",hC,[fC,(0,s._)("div",vC,[(0,s._)("div",yC,[xC,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.fullname]])]),(0,s._)("div",bC,[_C,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.phone]])]),(0,s._)("div",kC,[CC,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,et.zw)(t.name),9,DC)))),128))],512),[[a.bM,l.sale.city]])]),(0,s._)("div",SC,[zC,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>l.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.adresse]])]),(0,s._)("div",UC,[LC,(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=t=>l.sale.price=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.price]])]),(0,s._)("div",PC,[AC,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>l.warehouse_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[WC,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.warehouses,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,et.zw)(t.name),9,$C)))),128))],512),[[a.bM,l.warehouse_id]])]),(0,s._)("div",EC,[qC,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>l.product_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[TC,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.filtredProducts,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,et.zw)(t.name),9,OC)))),128))],512),[[a.bM,l.product_id]])]),(0,s._)("div",VC,[IC,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>l.product_variation_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[FC,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,et.zw)(t.size)+" / "+(0,et.zw)(t.color),9,RC)))),128))],512),[[a.bM,l.product_variation_id]])]),(0,s._)("div",jC,[NC,(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e[8]||(e[8]=t=>l.quantity=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.quantity]])]),(0,s._)("div",MC,[(0,s._)("div",HC,[(0,s._)("label",YC,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=t=>l.sale.counts_from_warehouse=t),class:"tw-sr-only tw-peer"},null,512),[[a.e8,l.sale.counts_from_warehouse]]),ZC]),(0,s._)("label",KC,[(0,s._)("span",{class:(0,et.C_)([[l.sale.counts_from_warehouse?"tw-text-orange-500":"tw-text-neutral-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Warehouse",2),(0,s._)("span",{class:(0,et.C_)([[l.sale.counts_from_warehouse?"tw-text-neutral-500":"tw-text-orange-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Delivery",2)])])]),(0,s._)("div",BC,[(0,s._)("button",{onClick:e[10]||(e[10]=(...t)=>o.addItem&&o.addItem(...t)),class:"tw-block tw-ml-auto tw-py-1 tw-px-4 tw-rounded tw-bg-emerald-500 tw-text-white"}," Add ")]),l.items.length?((0,s.wg)(),(0,s.iD)("div",QC,[(0,s._)("div",GC,[(0,s._)("table",JC,[(0,s._)("thead",XC,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["product","variation","quantity","warehouse","actions"],(t=>(0,s._)("th",{class:(0,et.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",tD,(0,et.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.items,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,s._)("th",eD,(0,et.zw)(t.product.name),1),(0,s._)("th",rD,(0,et.zw)(t.product_variation.size)+" / "+(0,et.zw)(t.product_variation.color),1),(0,s._)("th",aD,(0,et.zw)(t.quantity),1),(0,s._)("th",sD,(0,et.zw)(t.product_variation.warehouse.name),1),(0,s._)("th",iD,[(0,s._)("div",null,[(0,s.Wm)(rt.T,{onClick:e=>o.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])])])])):(0,s.kq)("",!0)]),(0,s._)("div",lD,[(0,s.Wm)(rt.T,{onClick:e[11]||(e[11]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[oD])),_:1}),(0,s.Wm)(rt.T,{loading:l.isLoading,onClick:o.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[nD])),_:1},8,["loading","onClick"])])])):(0,s.kq)("",!0)])),_:1},8,["visible"])])}var wD={props:["visible"],data(){return{isLoading:!1,isLoaded:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],sale:{fullname:"",phone:"",city:"",adresse:"",price:0,counts_from_warehouse:!0}}},watch:{product_id(){this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0}},computed:{products(){return this.$store.getters["product/products"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,r)=>e.indexOf(t.id)===r))},filtredProducts(){return 0==this.warehouse_id?[]:this.products.filter((t=>t.variations.some((t=>t.warehouse_id==this.warehouse_id))))},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city}},methods:{create(){if(!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;this.isLoading=!0;const t={fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,orderItems:this.items,counts_from_warehouse:!0};la.create(t).then((t=>{"SALE_ADDED"==t.data.code&&(this.$emit("cancel"),this.$alert({type:"success",title:"Sale created successfully"}),this.$store.dispatch("sale/add",t.data.data.sale))}),this.$handleApiError).finally((()=>this.isLoading=!1))},deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},addItem(){if([this.warehouse_id,this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),r={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:0};this.items.push(r),this.product_id=0,this.product_variation_id=0,this.item_id+=1},getProducts(){sa.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("product/setProducts",t.data.data.products)}),(t=>{this.$handleApiError(t)})).finally((()=>this.isLoaded=!0))}},mounted(){this.getProducts(),this.sale.city=this.cities[0].name||1}};const cD=(0,p.Z)(wD,[["render",dD]]);var uD=cD;const pD={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},mD={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[950px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},gD=(0,s._)("h1",{class:"tw-text-lg"},"Update Order",-1),hD={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},fD={class:"md:tw-col-span-6 tw-col-span-12"},vD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),yD={class:"md:tw-col-span-6 tw-col-span-12"},xD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),bD={class:"md:tw-col-span-6 tw-col-span-12"},_D=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),kD=["value"],CD=["value"],DD={class:"md:tw-col-span-6 tw-col-span-12"},SD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),zD={class:"md:tw-col-span-12 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},UD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Confirmation",-1),LD={class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},PD={class:"tw-col-span-12"},AD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note:",-1),WD={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},$D={class:"tw-col-span-12 md:tw-col-span-4"},ED=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Date:",-1),qD={class:"tw-col-span-12 md:tw-col-span-8"},TD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Note:",-1),OD={class:"md:tw-col-span-6 tw-col-span-12"},VD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Affectation",-1),ID={class:"md:tw-col-span-6 tw-col-span-12"},FD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Upsell",-1),RD=["value"],jD={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-4"},ND={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},MD={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit -tw-rotate-90 tw-scale-75"},HD=(0,s._)("div",{class:"tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),YD={class:"tw-flex tw-flex-col tw-justify-center"},ZD=(0,s._)("p",{class:"tw-col-span-12 tw-mt-5 tw-mb-2"},"Order Items",-1),KD={key:1,class:"tw-col-span-12 tw-rounded tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},BD={key:2,class:"md:tw-col-span-12 tw-col-span-12"},QD={class:"tw-max-w-full tw-overflow-auto"},GD={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},JD={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},XD={class:"tw-mx-auto tw-w-[50px] tw-h-[35px] tw-shadow tw-shadow-gray-200 tw-rounded tw-overflow-hidden tw-cursor-pointer"},tS=["src"],eS={scope:"row",class:"tw-pr-6 tw-py-2 tw-font-medium tw-text-gray-900"},rS=["onUpdate:modelValue"],aS=(0,s._)("option",{value:0},"Select",-1),sS=["value"],iS={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},lS=["disabled","onUpdate:modelValue"],oS=(0,s._)("option",{value:0},"Select",-1),nS=["value"],dS={key:0},wS={key:1},cS={key:2},uS={key:3},pS=["value"],mS={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},gS={class:"md:tw-col-span-6 tw-col-span-12"},hS=["onUpdate:modelValue"],fS={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},vS={key:0},yS={key:1,class:"md:tw-col-span-6 tw-col-span-12"},xS=["onUpdate:modelValue"],bS={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},_S={class:"tw-w-full tw-col-span-12 tw-flex tw-justify-end tw-mt-3"},kS=(0,s._)("span",{class:"!tw-text-sm !tw-capitalize"},"Add",-1),CS={class:"md:tw-col-span-12 tw-col-span-12"},DS={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},SS=(0,s._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),zS={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},US=(0,s._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-mb-2 tw-whitespace-nowrap"},"Price: ",-1),LS={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},PS=(0,s._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),AS={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},WS=(0,s._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-whitespace-nowrap"},"Total Price: ",-1),$S={class:"tw-text-xl tw-text-green-500 tw-font-bold tw-px-2 tw-py-1 tw-rounded tw-bg-green-100"},ES={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},qS=(0,s._)("span",{class:"text-white"}," Cancel ",-1),TS=(0,s._)("span",{class:"text-white"}," Create ",-1);function OS(t,e,r,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("AddOrderConfirmation"),w=(0,s.up)("AddOrderAffectation"),c=(0,s.up)("ProductOffers"),u=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(u,{onCancel:e[14]||(e[14]=e=>t.$emit("update:visible",!1)),visible:r.visible},{default:(0,s.w5)((()=>[o.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",pD,[(0,s.Wm)(n)])),o.isLoaded?((0,s.wg)(),(0,s.iD)("div",mD,[gD,(0,s._)("div",hD,[(0,s._)("div",fD,[vD,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.fullname]])]),(0,s._)("div",yD,[xD,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.phone]])]),(0,s._)("div",bD,[_D,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[(0,s._)("option",{disabled:"",value:l.sale.city},(0,et.zw)(l.sale.city),9,kD),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,et.zw)(t.name),9,CD)))),128))],512),[[a.bM,l.sale.city]])]),(0,s._)("div",DD,[SD,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>l.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.adresse]])]),(0,s._)("div",zD,[UD,(0,s.Wm)(d,{order:l.sale,id:l.sale.id,confirmation:l.sale.confirmation,"onUpdate:confirmation":e[4]||(e[4]=t=>l.sale.confirmation=t),onConfirmed:e[5]||(e[5]=t=>l.sale.note=t),onReported:o.handleReported,onChange:o.handleConfirmationChange},null,8,["order","id","confirmation","onReported","onChange"]),(0,s._)("div",LD,[(0,s._)("div",PD,[AD,(0,s.wy)((0,s._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[6]||(e[6]=t=>l.sale.note=t)},null,512),[[a.nr,l.sale.note]])])]),"reporter"==l.sale.confirmation&&l.sale.reported_agente_date?((0,s.wg)(),(0,s.iD)("div",WD,[(0,s._)("div",$D,[ED,(0,s._)("div",null,(0,et.zw)(l.sale.reported_agente_date.split("T")[0]),1)]),(0,s._)("div",qD,[TD,(0,s.wy)((0,s._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[7]||(e[7]=t=>l.sale.reported_agente_note=t)},null,512),[[a.nr,l.sale.reported_agente_note]])])])):(0,s.kq)("",!0)]),(0,s._)("div",OD,[VD,(0,s.Wm)(w,{"product-ids":o.product_ids,items:l.items,"onUpdate:items":e[8]||(e[8]=t=>l.items=t),order:l.sale,confirmation:l.sale.confirmation,affectation:l.sale.affectation,"onUpdate:affectation":e[9]||(e[9]=t=>l.sale.affectation=t),id:l.sale.id},null,8,["product-ids","items","order","confirmation","affectation","id"])]),(0,s._)("div",ID,[FD,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>l.sale.upsell=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.upsells,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,key:t.id},(0,et.zw)(t.name),9,RD)))),128))],512),[[a.bM,l.sale.upsell]])]),(0,s.kq)("",!0),(0,s._)("div",jD,[(0,s._)("div",ND,[(0,s._)("label",MD,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=t=>l.sale.counts_from_warehouse=t),class:"tw-sr-only tw-peer"},null,512),[[a.e8,l.sale.counts_from_warehouse]]),HD]),(0,s._)("label",YD,[(0,s._)("span",{class:(0,et.C_)([[l.sale.counts_from_warehouse?"tw-text-orange-500":"tw-text-neutral-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Warehouse",2),(0,s._)("span",{class:(0,et.C_)([[l.sale.counts_from_warehouse?"tw-text-neutral-500":"tw-text-orange-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Delivery",2)])])]),ZD,l.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",KD," No Order items ")),l.items.length?((0,s.wg)(),(0,s.iD)("div",BD,[(0,s._)("div",QD,[((0,s.wg)(),(0,s.iD)("table",{key:l.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,s._)("thead",GD,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,s._)("th",{class:(0,et.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",JD,(0,et.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.items,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:t.product.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[((0,s.wg)(),(0,s.iD)("th",{scope:"row",class:"tw-px-2 tw-py-2",key:t.product.id},[(0,s._)("div",XD,[o.product_images[e]?((0,s.wg)(),(0,s.iD)("img",{key:0,class:"tw-w-full tw-h-full tw-object-contain",src:l.serverUrl+"storage/"+o.product_images[e]},null,8,tS)):(0,s.kq)("",!0)])])),(0,s._)("th",eS,[(0,s._)("div",null,[(0,s._)("div",null,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e=>t.product.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[aS,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.filtredProducts,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,et.zw)(t.name),9,sS)))),128))],8,rS),[[a.bM,t.product.id]])])])]),(0,s._)("th",iS,[(0,s._)("div",null,[0!=t.product.id?(0,s.wy)(((0,s.wg)(),(0,s.iD)("select",{key:0,disabled:1==o.getVariations(t.product)?.variations?.length,"onUpdate:modelValue":e=>t.product_variation.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[oS,o.getVariations(t.product)?.variations?.length>1?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(o.getVariations(t.product)?.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},[t.size||t.color?t.size&&"-"!=t.size&&t.color&&"-"!=t.color?((0,s.wg)(),(0,s.iD)("p",wS,(0,et.zw)(t.size)+" / "+(0,et.zw)(t.color),1)):t.size&&"-"!=t.size?((0,s.wg)(),(0,s.iD)("p",cS,(0,et.zw)(t.size),1)):t.color?((0,s.wg)(),(0,s.iD)("p",uS,(0,et.zw)(t.color),1)):(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",dS,"-"))],8,nS)))),128)):((0,s.wg)(),(0,s.iD)("option",{key:1,value:o.getVariations(t.product)?.variations[0]?.id}," Default ",8,pS))],8,lS)),[[a.bM,t.product_variation.id]]):(0,s.kq)("",!0)])]),(0,s._)("th",mS,[(0,s._)("div",gS,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,hS),[[a.nr,t.quantity]])])]),(0,s._)("th",fS,[(0,s._)("div",null,[null==t.price?((0,s.wg)(),(0,s.iD)("div",vS," - ")):((0,s.wg)(),(0,s.iD)("div",yS,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e=>t.price=e,placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,xS),[[a.nr,t.price]])]))])]),(0,s._)("th",bS,[(0,s._)("div",null,[(0,s.Wm)(rt.T,{onClick:e=>o.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])]))])])):(0,s.kq)("",!0),(0,s._)("div",_S,[(0,s._)("div",null,[(0,s.Wm)(rt.T,{onClick:o.addNewRow,class:"mr-2 !tw-px-1 !tw-py-1 !tw-pr-2 tw-flex tw-items-center tw-gap-2","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1}),kS])),_:1},8,["onClick"])])]),(0,s._)("div",CS,[(0,s.Wm)(c,{"product-ids":o.product_ids},null,8,["product-ids"])]),(0,s._)("div",DS,[SS,(0,s._)("div",zS,[US,(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e[13]||(e[13]=t=>l.sale.price=t),class:"tw-py-1 tw-max-w-[100px] tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.price]])])]),(0,s._)("div",LS,[PS,(0,s._)("div",AS,[WS,(0,s._)("div",$S,(0,et.zw)(l.currency)+" "+(0,et.zw)(o.total_price),1)])])]),(0,s._)("div",ES,[(0,s.Wm)(rt.T,{onClick:o.handleCancel,color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[qS])),_:1},8,["onClick"]),(0,s.Wm)(rt.T,{loading:l.isLoading,onClick:o.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[TS])),_:1},8,["loading","onClick"])])])):(0,s.kq)("",!0)])),_:1},8,["visible"])])}var VS={components:{AddOrderConfirmation:Lc,AddOrderAffectation:Oc,ProductOffers:Xc},props:["visible","order"],data(){return{upsells:On,serverUrl:d,currency:c,isLoading:!1,isAddItem:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],reported_date:null,price:0,sale:{fullname:"",phone:"",city:"",adresse:"",price:0,upsell:null,confirmation:null,counts_from_warehouse:!0}}},watch:{product_id(){this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0},"sale.confirmation":{deep:!0,handler(t){"confirmer"!=t&&(this.sale.affectation=null,this.sale.delivery=null)}},product_ids:{deep:!0,handler(t,e){this.items.map(((r,a)=>{if(0==r.product.id)return r;const s=this.getVariations(r.product)?.variations;return e[a]==t[r]||s.some((t=>t.id==r.product_variation.id))||(r.product_variation={id:0},r.product_variation_id=0),1==s?.length&&(r.product_variation=s[0],r.product_variation_id=s[0].id),r}))}}},computed:{products(){return this.$store.getters["product/products"]},product_images(){return this.items.map((t=>0==t.product.id?null:this.products.find((e=>e.id==t.product.id))?.image))},product_ids(){return this.items.map((t=>t.product.id))},isLoaded(){return this.$store.getters["product/fetched"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,r)=>e.indexOf(t.id)===r))},filtredProducts(){return this.products},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},selectedProduct(){return this.products.find((t=>t.id==this.product_id))},total_price:{get(){const t=this.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(this.sale.price?this.sale.price:0)+parseFloat(t)}},isItemsValid(){if(0==this.items.length)return!1;const t=this.items.some((t=>0==t.product.id||0==t.product_variation_id||0==t.quantity));return!t},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city}},methods:{deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},handleConfirmationChange(){"confirmer"!=this.sale.confirmation&&(this.sale.affectation=null)},addNewRow(){const t={id:this.item_id,product_id:0,product_ref:null,product:{id:0},product_variation:{id:0},product_variation_id:0,quantity:0,price:0};this.items.push(t)},getVariations(t){return this.products.find((e=>e.id==t.id))},formatItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const r=e.variations.find((e=>e.id==t.product_variation.id));return r?{...t,product:e,product_id:e.id,product_variation:r,product_variation_id:r.id,product_ref:e.ref}:t}));return this.items=t,t},addItem(){if([this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),r={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:this.price};this.items.push(r),this.product_id=0,this.product_variation_id=0,this.price=0,this.item_id+=1},create(){if(this.formatItems(),!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;if("annuler"==this.sale.confirmation&&!this.sale.note)return this.$alert({type:"warning",title:"Add Cancellation note."}),!1;if(!this.isItemsValid)return this.$alert({type:"warning",title:"Order Items are not valid"}),!1;this.isLoading=!0;const t={fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,upsell:this.sale.upsell,counts_from_warehouse:this.sale.counts_from_warehouse,orderItems:this.items,confirmation:this.sale.confirmation,note:this.sale.note,affectation:this.sale.affectation,reported_agente_note:this.sale.reported_agente_note,reported_agente_date:this.sale.reported_agente_date};this.isLoading=!0,la.create(t).then((t=>{"SALE_ADDED"==t.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"New Order Added"}),this.$store.dispatch("sale/add",t.data.data.sale),this.$emit("update:visible",!1))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},handleCancel(){this.$emit("update:visible",!1)},handleReported(t){this.sale.reported_agente_note=t.reported_agente_note,this.sale.reported_agente_date=t.reported_agente_date},checkVariant(t,e){const r=this.products.find((e=>e.id==t));if(!r)return{exists:!1};let a=r.variations.find((t=>t.id==e));return a||(a=r.variations.length>0?r.variations[0]:null),{exists:!0,variation:a}},getProducts(){return sa.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){}};const IS=(0,p.Z)(VS,[["render",OS]]);var FS=IS;const RS={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},jS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},NS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},MS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},HS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},YS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},ZS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},KS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},BS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"};function QS(t,e,r,a,i,l){const o=(0,s.up)("DateFilter"),n=(0,s.up)("UpsellFilter"),d=(0,s.up)("ConfirmationFilter"),w=(0,s.up)("AffectationFilter"),c=(0,s.up)("AgenteFilter"),u=(0,s.up)("DeliveryFilter"),p=(0,s.up)("ProductFilter"),m=(0,s.up)("ExcelExport");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",RS,[(0,s._)("div",jS,[(0,s.Wm)(o,{filter:i.config.dateFilter,"onUpdate:filter":e[0]||(e[0]=t=>i.config.dateFilter=t)},null,8,["filter"])]),(0,s._)("div",NS,[(0,s.Wm)(n,{filter:i.config.upsellFilter,"onUpdate:filter":e[1]||(e[1]=t=>i.config.upsellFilter=t)},null,8,["filter"])]),(0,s._)("div",MS,[(0,s.Wm)(d,{filter:i.config.confirmationFilter,"onUpdate:filter":e[2]||(e[2]=t=>i.config.confirmationFilter=t)},null,8,["filter"])]),(0,s._)("div",HS,[(0,s.Wm)(w,{filter:i.config.affectationFilter,"onUpdate:filter":e[3]||(e[3]=t=>i.config.affectationFilter=t)},null,8,["filter"])]),(0,s._)("div",YS,[(0,s.Wm)(c,{filter:i.config.agenteFilter,"onUpdate:filter":e[4]||(e[4]=t=>i.config.agenteFilter=t)},null,8,["filter"])]),(0,s._)("div",ZS,[(0,s.Wm)(u,{filter:i.config.deliveryFilter,"onUpdate:filter":e[5]||(e[5]=t=>i.config.deliveryFilter=t)},null,8,["filter"])]),(0,s._)("div",KS,[(0,s.Wm)(p,{filter:i.config.productFilter,"onUpdate:filter":e[6]||(e[6]=t=>i.config.productFilter=t)},null,8,["filter"])]),(0,s._)("div",BS,[(0,s.Wm)(m,{selected:r.selected,filtered:r.filtered,sales:r.sales},null,8,["selected","filtered","sales"])])])])}const GS=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),JS=["onClick"];function XS(t,e,r,a,i,l){const o=(0,s.up)("VueDatePicker");return(0,s.wg)(),(0,s.iD)("div",null,[GS,(0,s.Wm)(o,{modelValue:i.date,"onUpdate:modelValue":[e[0]||(e[0]=t=>i.date=t),l.onDateRangePicked],onCleared:l.cleared,format:i.dateFilterFormat,range:"","preset-ranges":i.presetRanges},{yearly:(0,s.w5)((({label:t,range:e,presetDateRange:r})=>[(0,s._)("span",{onClick:t=>r(e)},(0,et.zw)(t),9,JS)])),_:1},8,["modelValue","onCleared","onUpdate:modelValue","format","preset-ranges"])])}var tz={data(){return{date:["",""],dateFilterFormat:"yyyy-MM-dd",formattedStartDate:"",formattedEndDate:"",presetRanges:[{label:"Today",range:[new Date,new Date]},{label:"Yesterday",range:[(0,Oi.Z)(new Date,1),(0,Oi.Z)(new Date,1)]},{label:"This month",range:[(0,Vi.Z)(new Date),(0,Ii.Z)(new Date)]},{label:"Last month",range:[(0,Vi.Z)((0,Fi.Z)(new Date,1)),(0,Ii.Z)((0,Fi.Z)(new Date,1))]},{label:"This year",range:[(0,Ri.Z)(new Date),(0,ji.Z)(new Date)]}]}},watch:{date(){this.$emit("update:filter",[this.formattedStartDate,this.formattedEndDate])}},methods:{onDateRangePicked(t){t?(this.formattedStartDate=t[0],this.formattedEndDate=t[1]):(this.formattedStartDate=null,this.formattedEndDate=null)},cleared(){this.date=["",""]}}};const ez=(0,p.Z)(tz,[["render",XS]]);var rz=ez;const az=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Upsell",-1),sz={class:"tw-relative"},iz=(0,s._)("option",{value:"all"},"Select",-1),lz=(0,s._)("option",{value:"oui"},"Oui",-1),oz=(0,s._)("option",{value:"non"},"Non",-1),nz=[iz,lz,oz];function dz(t,e,r,i,l,o){return(0,s.wg)(),(0,s.iD)("div",null,[az,(0,s._)("div",sz,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.value=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},nz,512),[[a.bM,l.value]]),(0,s.Wm)(st.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])}var wz={data(){return{value:"all"}},watch:{value(t){this.$emit("update:filter",t)}}};const cz=(0,p.Z)(wz,[["render",dz]]);var uz=cz;const pz=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Delivery",-1),mz={class:"tw-relative"},gz=["value"];function hz(t,e,r,i,l,o){return(0,s.wg)(),(0,s.iD)("div",null,[pz,(0,s._)("div",mz,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.deliveryFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveryStatus,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value?t.value:"all",key:t.id},(0,et.zw)(t.value?t.name:"Select"),9,gz)))),128))],512),[[a.bM,l.deliveryFilter]]),(0,s.Wm)(st.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])}var fz={props:["filter"],data(){return{deliveryFilter:"all",deliveryStatus:Vn}},watch:{deliveryFilter(t){this.$emit("update:filter",t)}}};const vz=(0,p.Z)(fz,[["render",hz]]);var yz=vz;const xz=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Confirmation",-1),bz={class:"tw-relative"},_z=(0,s._)("option",{value:"all"}," Select ",-1),kz=["value"];function Cz(t,e,r,i,l,o){return(0,s.wg)(),(0,s.iD)("div",null,[xz,(0,s._)("div",bz,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.confirmationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[_z,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.value},(0,et.zw)(t.name),9,kz)))),128))],512),[[a.bM,l.confirmationFilter]]),(0,s.Wm)(st.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])}var Dz={props:["filter"],data(){return{confirmationFilter:"all",confirmations:qn}},watch:{confirmationFilter(t){this.$emit("update:filter",t)}}};const Sz=(0,p.Z)(Dz,[["render",Cz]]);var zz=Sz;const Uz=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Affect",-1),Lz={class:"tw-relative"},Pz=(0,s._)("option",{value:"all"},"Select",-1),Az=(0,s._)("option",{value:null},"Without delivery",-1),Wz=["value"];function $z(t,e,r,i,l,o){return(0,s.wg)(),(0,s.iD)("div",null,[Uz,(0,s._)("div",Lz,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.affectationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[Pz,Az,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,et.zw)(t.firstname)+" "+(0,et.zw)(t.lastname),9,Wz)))),128))],512),[[a.bM,l.affectationFilter]]),(0,s.Wm)(st.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])}var Ez={props:["filter"],data(){return{affectationFilter:"all"}},computed:{users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>3==t.role.id))}},watch:{affectationFilter(t){this.$emit("update:filter",t)}}};const qz=(0,p.Z)(Ez,[["render",$z]]);var Tz=qz;const Oz=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Agente",-1),Vz={class:"tw-relative"},Iz=(0,s._)("option",{value:"all"},"Select",-1),Fz=(0,s._)("option",{value:null},"Without agente",-1),Rz=["value"];function jz(t,e,r,i,l,o){return(0,s.wg)(),(0,s.iD)("div",null,[Oz,(0,s._)("div",Vz,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.agenteFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[Iz,Fz,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.agentes,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,et.zw)(t.firstname)+" "+(0,et.zw)(t.lastname),9,Rz)))),128))],512),[[a.bM,l.agenteFilter]]),(0,s.Wm)(st.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])}var Nz={props:["filter"],data(){return{agenteFilter:"all"}},computed:{users(){return this.$store.getters["user/users"]},agentes(){return this.users.filter((t=>2==t.role.id))}},watch:{agenteFilter(t){this.$emit("update:filter",t)}}};const Mz=(0,p.Z)(Nz,[["render",jz]]);var Hz=Mz;const Yz=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Product",-1),Zz={key:0},Kz={key:1,class:"tw-relative"},Bz=(0,s._)("option",{value:"all"},"Select",-1),Qz=["value"];function Gz(t,e,r,i,l,o){return(0,s.wg)(),(0,s.iD)("div",null,[Yz,o.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Zz,[(0,s._)("div",null,[(0,s.Wm)(st.t,{class:"tw-text-orange-500 tw-animate-spin tw-text-lg tw-"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})])])),o.fetched?((0,s.wg)(),(0,s.iD)("div",Kz,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.productFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[Bz,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.products,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,et.zw)(t.name),9,Qz)))),128))],512),[[a.bM,l.productFilter]]),(0,s.Wm)(st.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])):(0,s.kq)("",!0)])}var Jz={props:["filter"],data(){return{productFilter:"all"}},computed:{products(){return this.$store.getters["product/products"]},fetched(){return this.$store.getters["product/fetched"]}},watch:{productFilter(t){this.$emit("update:filter",t)}},methods:{getProducts(){sa.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.fetched||this.getProducts(),console.log(this.products)}};const Xz=(0,p.Z)(Jz,[["render",Gz]]);var tU=Xz;function eU(t,e,r,{confirmationFilter:a,affectationFilter:s,upsellFilter:i,deliveryFilter:l,agenteFilter:o,dateFilter:n,productFilter:d}){const w=n[0],c=n[1];return t.filter((t=>{const n=new Date(t.created_at);if(""!=r&&r!=t.id)return!1;if("all"!==a&&t.confirmation!==a)return!1;if("all"!==s&&t.affectation!=s)return!1;if("all"!==i&&t.upsell!=i)return!1;if("all"!==l&&t.delivery!=l)return!1;if("all"!==o&&t.agente_id!=o)return!1;const u=((t,e)=>{for(const r in t)if(!["created_at","updated_at","sheets_id","reported_agente_note","reported_agente_note","reported_agente_date","reported_delivery_note","reported_delivery_date"].includes(r)&&String(t[r]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(t,e);if(!u)return!1;if("all"!==d&&!t.items.some((t=>t.product_id==d)))return!1;const p=n.getDate(),m=n.getMonth(),g=n.getFullYear();if(w){const t=w.getDate(),e=w.getMonth(),r=w.getFullYear();if(g<r||g===r&&m<e||g===r&&m===e&&p<t)return!1}if(c){const t=c.getDate(),e=c.getMonth(),r=c.getFullYear();if(g>r||g===r&&m>e||g===r&&m===e&&p>t)return!1}return!0}))}function rU(t){return{id:1,title:"New",value:t.filter((t=>!t.confirmation||"new"==t.confirmation)).length,pourcentage:(100*t.filter((t=>!t.confirmation||"new"==t.confirmation)).length/t.length).toFixed(2),color:"primary-green",icon:"mdi mdi-new-box"}}function aU(t){return{id:3,title:"Confirmed",value:t.filter((t=>"confirmer"==t.confirmation)).length,pourcentage:(100*t.filter((t=>"confirmer"==t.confirmation)).length/t.length).toFixed(2),color:"deep-purple-accent-2",icon:"mdi-phone-check"}}function sU(t){return{id:4,title:"Delivered",value:t.filter((t=>"livrer"==t.delivery)).length,pourcentage:(100*t.filter((t=>"livrer"==t.delivery)).length/t.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"primary-blue",icon:"mdi-account-check-outline"}}function iU(t){return{id:5,title:"Shipped",value:t.filter((t=>"expidier"==t.delivery)).length,pourcentage:(100*t.filter((t=>"expidier"==t.delivery)).length/t.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"red",icon:"mdi-truck"}}const lU=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Export",-1),oU={class:"tw-relative tw-flex tw-items-center tw-gap-2 tw-justify-between"},nU={class:"tw-relative tw-w-full"},dU=(0,s._)("option",{value:"all"},"All Sales",-1),wU=(0,s._)("option",{value:"selected"},"Selected Sales",-1),cU=(0,s._)("option",{value:"filtered"},"Filtered Sales",-1),uU=[dU,wU,cU];function pU(t,e,r,i,l,o){const n=(0,s.up)("download-csv");return(0,s.wg)(),(0,s.iD)("div",null,[lU,(0,s._)("div",oU,[(0,s._)("div",nU,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.selection=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},uU,512),[[a.bM,l.selection]]),(0,s.Wm)(st.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})]),(0,s.Wm)(n,{delimiter:";",data:o.toImport},{default:(0,s.w5)((()=>[(0,s.Wm)(rt.T,{onClick:o.handleImport,icon:"",rounded:"lg",variant:"flat",size:"x-small",color:"green",class:"text-white tw-mr-2"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white",icon:"mdi-download",size:"x-large"})])),_:1},8,["onClick"])])),_:1},8,["data"])])])}var mU={props:["selected","filtered","sales"],data(){return{selection:"all"}},computed:{toImport(){const t=this.data.map((t=>({...t}))),e=t.map((t=>{const e=Object.keys(t);return e.forEach((e=>{t[e]=t[e]?t[e]:"NONE"})),t})),r=",",a=e.map((t=>(delete t["factorisation_id"],delete t["note_d"],delete t["cmd"],delete t["product_name"],delete t["is_done"],delete t["factorisation"],delete t["doubles"],delete t["is_double"],delete t["has_doubles"],delete t["double"],{...t,products:t.items.map((t=>`id=${t.id}${r}price=${t.price?t.price:0}${r}name=${t.product?.name}${r}ref=${t.product?.ref}${r}variation_id=${t.product_variation_id}${r}size=${t.product_variation.size?t.product_variation.size:"DEFAULT"}${r}color=${t.product_variation.color?t.product_variation.color:"DEFAULT"}${r}`))})));return a.map((t=>(delete t["items"],t)))},data(){switch(this.selection){case"selected":return this.selected;case"filtered":return this.filtered;default:return this.sales}}},methods:{handleImport(){0==this.data.length&&this.$alert({title:"No Data To Export",type:"warning"})}}};const gU=(0,p.Z)(mU,[["render",pU]]);var hU=gU,fU={components:{DateFilter:rz,UpsellFilter:uz,DeliveryFilter:yz,ConfirmationFilter:zz,AffectationFilter:Tz,AgenteFilter:Hz,ProductFilter:tU,ExcelExport:hU},props:["sales","filtered","search","searchId","selected"],data(){return{config:{confirmationFilter:"all",affectationFilter:"all",upsellFilter:"all",deliveryFilter:"all",agenteFilter:"all",productFilter:"all",dateFilter:[null,null]}}},computed:{results(){return eU(this.sales,this.search,this.searchId,this.config)}},watch:{results(t){this.$emit("update:filtered",t)}},mounted(){this.$emit("update:filtered",this.sales)}};const vU=(0,p.Z)(fU,[["render",QS]]);var yU=vU;const xU={class:"mb-5 tw-border-b tw-border-solid tw-pb-5 tw-border-neutral-200"},bU={class:"tw-grid tw-grid-cols-4 lg:tw-grid-cols-4 tw-gap-2"},_U={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-2"},kU={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-2"},CU={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-2"},DU={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-4"};function SU(t,e,r,a,i,l){const o=(0,s.up)("DashItem");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",xU,[(0,s._)("div",bU,[(0,s._)("div",_U,[(0,s.Wm)(o,{dash:l.newSales},null,8,["dash"])]),(0,s._)("div",kU,[(0,s.Wm)(o,{dash:l.confirmedSales},null,8,["dash"])]),(0,s._)("div",CU,[(0,s.Wm)(o,{dash:l.deliveredSales},null,8,["dash"])]),(0,s._)("div",DU,[(0,s.Wm)(o,{dash:l.shippedSales},null,8,["dash"])])])])])}const zU={class:"tw-flex tw-justify-between tw-items-center tw-w-full tw-h-full pa-3 px-4"},UU={class:"tw-flex tw-flex-col tw-justify-center tw-w-full tw-h-full tw-text-white"},LU={class:"tw-text-xl tw-font-bold"},PU={class:"tw-flex tw-items-center tw-gap-1 tw-w-full tw-h-full tw-text-white"},AU={class:"tw-text-sm"},WU={class:"rounded-circle tw-w-fit tw-mr-3"};function $U(t,e,r,a,i,l){const o=(0,s.up)("number");return(0,s.wg)(),(0,s.j4)(za.C,{class:"tw-rounded-lg",color:r.dash.color,height:"70"},{default:(0,s.w5)((()=>[(0,s._)("div",zU,[(0,s._)("div",UU,[(0,s._)("p",LU,(0,et.zw)(isNaN(r.dash.pourcentage)?"0.00":r.dash.pourcentage)+" "+(0,et.zw)(r.symbol),1),(0,s._)("span",PU,[r.numbers?((0,s.wg)(),(0,s.j4)(o,{key:0,class:"tw-font-bold",ref:"number1",from:0,to:r.dash.value,duration:1,delay:0,easing:"Power.easeOut"},null,8,["to"])):(0,s.kq)("",!0),(0,s._)("p",AU,(0,et.zw)(r.dash.title),1)])]),(0,s._)("div",WU,[(0,s.Wm)(st.t,{color:"white",size:"large",class:"md:tw-scale-[1.8] tw-scale-[1.3]",icon:r.dash.icon},null,8,["icon"])])])])),_:1},8,["color"])}var EU={props:{dash:{required:!0},symbol:{required:!1,default:"%"},numbers:{required:!1,default:!0}}};const qU=(0,p.Z)(EU,[["render",$U]]);var TU=qU,OU={components:{DashItem:TU},props:["sales"],computed:{newSales(){return rU(this.sales)},confirmedSales(){return aU(this.sales)},deliveredSales(){return sU(this.sales)},shippedSales(){return iU(this.sales)}}};const VU=(0,p.Z)(OU,[["render",SU]]);var IU=VU,FU={components:{SalesTable:nu,AddSale:uD,SalesAnalytics:IU,IndexFilter:yU,NewAddSale:FS},data(){return{localUrl:n,isLoaded:!1,isLoadingReset:!1,showFilters:!1,isButtonDisabled:!0,filteredSales:[],search:"",searchId:"",selected:[],showPopup:!1}},computed:{fetched(){return this.$store.getters["sale/fetched"]},users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>3==t.role.id))},agentes(){return this.users.filter((t=>2==t.role.id))},sales(){return this.$store.getters["sale/sales"]},cities(){return this.$store.getters["city/cities"]},selectedSales(){return this.sales.filter((t=>this.selected.includes(t.id)))}},methods:{handleSelected(t){this.selected=t,this.selected.length>0?this.isButtonDisabled=!1:this.isButtonDisabled=!0},async getDeliveries(){await X.deliveries().then((t=>{this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)},async getUsers(){await X.all().then((t=>{this.$store.dispatch("user/setUsers",t.data.data.users)}),this.$handleApiError)},getSales(){return la.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0)}})).catch(this.$handleApiError)},getProducts(){return sa.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))},getCities(){if(0==this.cities.length)return X.cities().then((t=>{const e=t.data.data;this.$store.dispatch("city/setCities",e)}))},handleReset(){this.isLoadingReset=!0,0!=this.selected.length&&la.resetSale(this.selected).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.$store.dispatch("sale/resetSales",this.selected),this.selected=[])})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoadingReset=!1))}},async mounted(){0==this.deliveries.length&&(await this.getDeliveries(),this.getUsers()),this.fetched&&(this.isLoaded=!0),this.fetched&&(this.getProducts(),this.getCities())}};const RU=(0,p.Z)(FU,[["render",mC]]);var jU=RU;const NU={class:"py-5 px-2 tw-border tw-bg-white tw-w-full tw-rounded-md tw-mb-5"},MU={class:"tw-px-3"},HU={class:"tw-flex tw-items-center tw-justify-between tw-flex-wrap"},YU={class:"tw-flex tw-items-center tw-gap-x-3"},ZU=(0,s._)("h2",{class:"tw-text-lg tw-font-medium tw-text-gray-800 darkx:tw-text-white"}," Orders ",-1),KU={class:"tw-px-3 tw-py-1 tw-text-xs tw-text-emerald-600 tw-bg-emerald-100 tw-rounded-full darkx:tw-bg-gray-800 darkx:tw-text-orange-400"},BU=(0,s._)("p",{class:"tw-mt-1 tw-text-sm tw-text-gray-500 darkx:tw-text-gray-300"}," These orders have needs to reconfirmed. ",-1),QU={class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-3"},GU=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",width:"16",height:"16",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),JU=(0,s._)("span",null,"Create",-1),XU=[GU,JU],tL={class:"tw-overflow-hidden tw-col-span-1"},eL={key:0};function rL(t,e,r,a,i,l){const o=(0,s.up)("IndexFilters"),n=(0,s.up)("BulkActions"),d=(0,s.up)("IndexTable"),w=(0,s.up)("CreatePopup");return(0,s.wg)(),(0,s.iD)("div",NU,[(0,s._)("section",MU,[(0,s._)("div",HU,[(0,s._)("div",null,[(0,s._)("div",YU,[ZU,(0,s._)("span",KU,(0,et.zw)(i.totalOrders)+" order",1)]),BU]),(0,s._)("div",QU,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.create_popup=!0),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},XU)])]),(0,s.Wm)(o,{search:i.search,"onUpdate:search":e[1]||(e[1]=t=>i.search=t),filters:i.filters,"onUpdate:filters":e[2]||(e[2]=t=>i.filters=t),onFilter:e[3]||(e[3]=t=>l.handlePerPageChange(i.per_page)),onClear:l.handleClearFilters,onPerPageChange:l.handlePerPageChange,onFresh:l.paginateOrders,loading:i.fetching,statistics:i.statistics,"per-page":i.per_page,"active-statistics":""},null,8,["search","filters","onClear","onPerPageChange","onFresh","loading","statistics","per-page"]),(0,s._)("div",{class:(0,et.C_)([[i.selected.length>0?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",tL,[(0,s.Wm)(n,{onUpdate:l.handleBulkUpdate,selected:i.selected,"onUpdate:selected":e[4]||(e[4]=t=>i.selected=t)},null,8,["onUpdate","selected"])])],2),(0,s._)("div",null,[(0,s.Wm)(d,{selected:i.selected,"onUpdate:selected":e[5]||(e[5]=t=>i.selected=t),onUpdate:l.handleItemUpdate,onPageChange:l.handlePageChange,onSortOrder:l.handleSortOrderChange,loading:i.fetching,from:i.from,to:i.to,"last-page":i.last_page,"per-page":i.per_page,total:i.total,"current-page":i.current_page,items:i.items,deliveries:i.deliveries},null,8,["selected","onUpdate","onPageChange","onSortOrder","loading","from","to","last-page","per-page","total","current-page","items","deliveries"])]),i.create_popup?((0,s.wg)(),(0,s.iD)("div",eL,[(0,s.Wm)(w,{visible:i.create_popup,"onUpdate:visible":e[6]||(e[6]=t=>i.create_popup=t)},null,8,["visible"])])):(0,s.kq)("",!0)])])}class aL{async statistics(t){return await $.getCookie(),A.post("api/v1/admin/statistics",t)}async paginate(t="/",e){return await $.getCookie(),A.post("api/v1/admin/orders"+t,e)}async update(t,e){return await $.getCookie(),A.post("api/v1/admin/orders/"+t+"/update",e)}async create(t){return await $.getCookie(),A.post("api/v1/admin/orders/create",t)}async export(t={}){return await $.getCookie(),A.post("api/v1/admin/orders/export",t)}}var sL=new aL;const iL={class:"tw-flex tw-flex-col"},lL={class:"tw-overflow-x-auto"},oL={class:"tw-inline-block tw-min-w-full tw-align-middle"},nL={class:"tw-border tw-overflow-auto tw-border-gray-200 darkx:tw-border-gray-700 md:tw-rounded-lg"},dL={class:"tw-min-w-full tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700"},wL={class:"tw-bg-gray-50 darkx:tw-bg-gray-800"},cL={scope:"col",class:"rtl:tw-text-right tw-px-2 tw-text-sm tw-font-medium tw-whitespace-nowrap tw-text-gray-500 darkx:tw-text-gray-400"},uL={class:"tw-max-w-[25px]"},pL={class:"tw-inline-flex tw-items-center"},mL={class:"tw-relative tw-flex tw-cursor-pointer tw-items-center tw-rounded-full tw-p-3",for:"checkbox","data-ripple-dark":"true"},gL=["checked"],hL=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-top-2/4 tw-left-2/4 -tw-translate-y-2/4 -tw-translate-x-2/4 tw-text-white tw-opacity-0 tw-transition-opacity peer-checked:tw-opacity-100"},[(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"tw-h-3.5 tw-w-3.5",viewBox:"0 0 20 20",fill:"currentColor",stroke:"currentColor","stroke-width":"1"},[(0,s._)("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])],-1),fL=(0,s._)("th",{scope:"col",class:"tw-py-3.5 tw-px-4 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"},[(0,s._)("span",null,"ID")],-1),vL={scope:"col",class:"tw-py-3.5 tw-px-4 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"},yL=(0,s._)("span",null,"Created",-1),xL=(0,s._)("svg",{class:"tw-h-3",viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s._)("path",{d:"M2.13347 0.0999756H2.98516L5.01902 4.79058H3.86226L3.45549 3.79907H1.63772L1.24366 4.79058H0.0996094L2.13347 0.0999756ZM2.54025 1.46012L1.96822 2.92196H3.11227L2.54025 1.46012Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,s._)("path",{d:"M0.722656 9.60832L3.09974 6.78633H0.811638V5.87109H4.35819V6.78633L2.01925 9.60832H4.43446V10.5617H0.722656V9.60832Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,s._)("path",{d:"M8.45558 7.25664V7.40664H8.60558H9.66065C9.72481 7.40664 9.74667 7.42274 9.75141 7.42691C9.75148 7.42808 9.75146 7.42993 9.75116 7.43262C9.75001 7.44265 9.74458 7.46304 9.72525 7.49314C9.72522 7.4932 9.72518 7.49326 9.72514 7.49332L7.86959 10.3529L7.86924 10.3534C7.83227 10.4109 7.79863 10.418 7.78568 10.418C7.77272 10.418 7.73908 10.4109 7.70211 10.3534L7.70177 10.3529L5.84621 7.49332C5.84617 7.49325 5.84612 7.49318 5.84608 7.49311C5.82677 7.46302 5.82135 7.44264 5.8202 7.43262C5.81989 7.42993 5.81987 7.42808 5.81994 7.42691C5.82469 7.42274 5.84655 7.40664 5.91071 7.40664H6.96578H7.11578V7.25664V0.633865C7.11578 0.42434 7.29014 0.249976 7.49967 0.249976H8.07169C8.28121 0.249976 8.45558 0.42434 8.45558 0.633865V7.25664Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.3"})],-1),bL=[yL,xL],_L=(0,s._)("th",{scope:"col",class:"tw-px-3 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Client ",-1),kL=(0,s._)("th",{scope:"col",class:"tw-px-3 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," City ",-1),CL=(0,s._)("th",{scope:"col",class:"tw-px-3 !tw-w-5 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Phone ",-1),DL=(0,s._)("th",{scope:"col",class:"tw-px-3 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Product ",-1),SL=(0,s._)("th",{scope:"col",class:"tw-w-10 tw-px-3 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Confirmation ",-1),zL=(0,s._)("th",{scope:"col",class:"tw-px-3 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Affected ",-1),UL=(0,s._)("th",{scope:"col",class:"tw-w-10 tw-px-3 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Delivery ",-1),LL=(0,s._)("th",{scope:"col",class:"tw-relative tw-py-3.5 tw-px-4"},[(0,s._)("span",{class:"tw-sr-only"},"Actions")],-1),PL={key:0,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},AL={key:1,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},WL=(0,s._)("tr",null,[(0,s._)("td",{colspan:"8"},[(0,s._)("div",{class:"tw-p-5 tw-text-center tw-text-gray-600 tw-font-medium"}," No Order was found ! ")])],-1),$L=[WL],EL={key:2,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},qL={colspan:"11"},TL={role:"status",class:"tw-w-full tw-p-4 tw-space-y-4 tw-border-gray-200 tw-divide-y tw-divide-gray-200 tw-rounded tw-shadow tw-animate-pulse dark:tw-divide-gray-300 md:tw-p-6 dark:tw-border-gray-300"},OL=(0,s._)("div",{class:"tw-flex tw-items-center tw-justify-between"},[(0,s._)("div",null,[(0,s._)("div",{class:"tw-w-32 tw-h-2 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-200"})]),(0,s._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-200 tw-w-12"})],-1),VL=(0,s._)("div",null,[(0,s._)("div",{class:"tw-w-32 tw-h-2 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-200"})],-1),IL=(0,s._)("div",{class:"tw-h-2.5 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-200 tw-w-12"},null,-1),FL=[VL,IL],RL={class:"tw-mt-6"};function jL(t,e,r,a,i,l){const o=(0,s.up)("TableRow"),n=((0,s.up)("loading"),(0,s.up)("TablePaginationNoNums"));return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",iL,[(0,s._)("div",lL,[(0,s._)("div",oL,[(0,s._)("div",nL,[(0,s._)("table",dL,[(0,s._)("thead",wL,[(0,s._)("tr",null,[(0,s._)("th",cL,[(0,s._)("div",uL,[(0,s._)("div",pL,[(0,s._)("label",mL,[(0,s._)("input",{type:"checkbox",checked:i.isAllSelected,onChange:e[0]||(e[0]=(...t)=>l.handleSelectedAllChange&&l.handleSelectedAllChange(...t)),class:"before:tw-content[''] tw-border-solid tw-bg-white tw-peer tw-relative tw-h-5 tw-w-5 tw-cursor-pointer tw-appearance-none tw-rounded-md tw-border tw-border-blue-gray-200 tw-transition-all before:tw-absolute before:tw-top-2/4 before:tw-left-2/4 before:tw-block before:tw-h-12 before:tw-w-12 before:-tw-translate-y-2/4 before:-tw-translate-x-2/4 before:tw-rounded-full before:bg-blue-gray-500 before:tw-opacity-0 before:tw-transition-opacity checked:tw-border-orange-500 checked:tw-bg-orange-500 checked:before:tw-bg-orange-500 hover:before:tw-opacity-10",id:"checkbox-all"},null,40,gL),hL])])])]),fL,(0,s._)("th",vL,[(0,s._)("button",{onClick:e[1]||(e[1]=e=>t.$emit("sortOrder",{name:"created_at"})),class:"tw-flex tw-items-center tw-gap-x-3 focus:tw-outline-none"},bL)]),_L,kL,CL,DL,SL,zL,UL,LL])]),!r.loading&&r.items.length>0?((0,s.wg)(),(0,s.iD)("tbody",PL,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.items,((a,i,n)=>((0,s.wg)(),(0,s.j4)(o,{selected:l.selectedOrders,"onUpdate:selected":e[2]||(e[2]=t=>l.selectedOrders=t),deliveries:r.deliveries,onUpdate:e[3]||(e[3]=e=>t.$emit("update",e)),all:n,index:i,key:a.id,item:a},null,8,["selected","deliveries","all","index","item"])))),128))])):(0,s.kq)("",!0),r.loading||0!=r.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("tbody",AL,$L)),r.loading?((0,s.wg)(),(0,s.iD)("tbody",EL,[(0,s._)("tr",null,[(0,s.kq)("",!0),(0,s._)("td",qL,[(0,s._)("div",TL,[OL,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.perPage-1,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"tw-flex tw-items-center tw-justify-between tw-pt-4"},FL)))),128))])])])])):(0,s.kq)("",!0)])])])])]),(0,s._)("div",RL,[(0,s.Wm)(n,{from:r.from,to:r.to,"last-page":r.lastPage,"per-page":r.perPage,total:r.total,"current-page":r.currentPage,onPageChange:e[4]||(e[4]=e=>t.$emit("pageChange",e))},null,8,["from","to","last-page","per-page","total","current-page"])])])}const NL={class:"sm:tw-flex sm:tw-items-center sm:tw-justify-between"},ML={class:"tw-text-sm tw-text-gray-500 darkx:tw-text-gray-400"},HL={class:"tw-font-medium tw-text-gray-700 darkx:tw-text-gray-100"},YL={class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-4 sm:tw-mt-0"},ZL=["disabled"],KL=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5 rtl:tw--scale-x-100"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18"})],-1),BL=(0,s._)("span",null," previous ",-1),QL=[KL,BL],GL=["disabled"],JL=(0,s._)("span",null," Next ",-1),XL=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5 rtl:tw--scale-x-100"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"})],-1),tP=[JL,XL];function eP(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",NL,[(0,s._)("div",ML,[(0,s.Uk)(" Page "),(0,s._)("span",HL,(0,et.zw)(r.currentPage)+" of "+(0,et.zw)(r.lastPage),1)]),(0,s._)("div",YL,[(0,s._)("button",{disabled:r.currentPage<=1,onClick:e[0]||(e[0]=t=>l.changePage(r.currentPage-1)),class:(0,et.C_)([[r.currentPage<=1&&"tw-cursor-not-allowed"],"tw-flex tw-items-center tw-justify-center tw-w-1/2 tw-px-5 tw-py-2 tw-text-sm tw-text-gray-700 tw-capitalize tw-transition-colors tw-duration-200 tw-bg-white tw-border tw-border-solid tw-rounded-md sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-100 darkx:tw-bg-gray-900 darkx:tw-text-gray-200 darkx:tw-border-gray-700 darkx:hover:tw-bg-gray-800"])},QL,10,ZL),(0,s._)("button",{disabled:r.currentPage>=l.totalPages,onClick:e[1]||(e[1]=t=>l.changePage(r.currentPage+1)),class:(0,et.C_)([[r.currentPage>=l.totalPages&&"tw-cursor-not-allowed"],"tw-flex tw-items-center tw-justify-center tw-w-1/2 tw-px-5 tw-py-2 tw-text-sm tw-text-gray-700 tw-capitalize tw-transition-colors tw-duration-200 tw-bg-white tw-border tw-border-solid tw-rounded-md sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-100 darkx:tw-bg-gray-900 darkx:tw-text-gray-200 darkx:tw-border-gray-700 darkx:hover:tw-bg-gray-800"])},tP,10,GL)])])])}var rP={props:{from:{type:Number,default:1},to:{type:Number,default:1},perPage:{type:Number,default:1},total:{type:Number,default:1},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1}},data(){return{totalItems:100,itemsPerPage:5}},computed:{totalPages(){return this.lastPage},showEllipsisStart(){return this.currentPage>3},showEllipsisEnd(){return this.currentPage<this.totalPages-2},visiblePages(){let t=Math.max(1,this.currentPage-1),e=Math.min(this.totalPages,this.currentPage+1);const r=[];for(let a=t;a<=e;a++)r.push(a);return r}},methods:{changePage(t){this.$emit("pageChange",t)}}};const aP=(0,p.Z)(rP,[["render",eP]]);var sP=aP;const iP={class:"tw-p-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},lP={class:"tw-max-w-[25px]"},oP={class:"tw-inline-flex tw-items-center"},nP={class:"tw-relative tw-flex tw-cursor-pointer tw-items-center tw-rounded-full tw-p-3",for:"checkbox","data-ripple-dark":"true"},dP=["checked","id"],wP=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-top-2/4 tw-left-2/4 -tw-translate-y-2/4 -tw-translate-x-2/4 tw-text-white tw-opacity-0 tw-transition-opacity peer-checked:tw-opacity-100"},[(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"tw-h-3.5 tw-w-3.5",viewBox:"0 0 20 20",fill:"currentColor",stroke:"currentColor","stroke-width":"1"},[(0,s._)("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])],-1),cP={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},uP={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white"},pP={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},mP={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-flex tw-items-center tw-gap-2"},gP={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},hP={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-font-[cairo] tw-max-w-[150px] tw-truncate"},fP={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},vP={class:"tw-font-medium tw-max-w-[100px] tw-truncate tw-text-gray-800 darkx:tw-text-white tw-font-[cairo]"},yP={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},xP={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-font-[cairo] tw-max-w-[120px] tw-truncate"},bP={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},_P={class:"tw-space-y-1"},kP={class:"tw-font-bold tw-text-green-500"},CP={class:"tw-block tw-max-w-[150px] tw-truncate"},DP={key:0,class:"tw-font-bold tw-text-orange-500 tw-bg-orange-100 tw-rounded-lg tw-px-2 tw-text-sm"},SP={key:1,class:"tw-font-bold tw-text-orange-500 tw-bg-orange-100 tw-rounded-lg tw-px-2 tw-text-sm"},zP={class:"tw-px-2 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},UP={class:"tw-px-2 tw-py-2 tw-text-sm tw-whitespace-nowrap"},LP={class:"tw-px-2 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},PP={class:"tw-px-4 tw-py-2 tw-text-sm tw-whitespace-nowrap"};function AP(t,e,r,a,i,l){const o=(0,s.up)("TableRowAffectation"),n=(0,s.up)("TableActions");return(0,s.wg)(),(0,s.iD)("tr",{class:(0,et.C_)(["hover:tw-bg-gray-50",[null!=r.item.reported_diff&&"reporter"==r.item.confirmation&&r.item.reported_diff<=0&&" !tw-shadow-sm !tw-border !tw-border-emerald-300"]])},[(0,s._)("td",iP,[(0,s._)("div",lP,[(0,s._)("div",oP,[(0,s._)("label",nP,[(0,s._)("input",{type:"checkbox",checked:l.isSelected,onChange:e[0]||(e[0]=(...t)=>l.handleSelected&&l.handleSelected(...t)),class:"before:tw-content[''] tw-border-solid tw-bg-white tw-peer tw-relative tw-h-5 tw-w-5 tw-cursor-pointer tw-appearance-none tw-rounded-md tw-border tw-border-blue-gray-200 tw-transition-all before:tw-absolute before:tw-top-2/4 before:tw-left-2/4 before:tw-block before:tw-h-12 before:tw-w-12 before:-tw-translate-y-2/4 before:-tw-translate-x-2/4 before:tw-rounded-full before:bg-blue-gray-500 before:tw-opacity-0 before:tw-transition-opacity checked:tw-border-orange-500 checked:tw-bg-orange-500 checked:before:tw-bg-orange-500 hover:before:tw-opacity-10",id:"checkbox-"+r.item.id},null,40,dP),wP])])])]),(0,s._)("td",cP,[(0,s._)("div",null,[(0,s._)("h2",uP,(0,et.zw)(r.item.id),1)])]),(0,s._)("td",pP,[(0,s._)("div",null,[(0,s._)("h2",mP,[(0,s._)("p",null,(0,et.zw)(i.moment(r.item.created_at).format("DD[/]MM[/]YY")),1),(0,s.kq)("",!0)])])]),(0,s._)("td",gP,[(0,s._)("div",null,[(0,s._)("h2",hP,(0,et.zw)(r.item.fullname),1)])]),(0,s._)("td",fP,[(0,s._)("div",null,[(0,s._)("h2",vP,(0,et.zw)(r.item.city),1)])]),(0,s._)("td",yP,[(0,s._)("div",null,[(0,s._)("h2",xP,(0,et.zw)(r.item.phone),1)])]),(0,s._)("td",bP,[(0,s._)("div",null,[(0,s._)("ul",_P,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.item.items,(t=>((0,s.wg)(),(0,s.iD)("li",{dir:"rtl",class:"tw-font-[cairo] tw-flex tw-items-center tw-gap-1",key:t.id},[(0,s._)("span",kP,(0,et.zw)(t.quantity)+" x ",1),(0,s._)("span",CP,(0,et.zw)(t.product.name),1),t.product_variation.color&&!["/","-"].includes(t.product_variation.color)?((0,s.wg)(),(0,s.iD)("span",DP,(0,et.zw)(t.product_variation.color),1)):(0,s.kq)("",!0),t.product_variation.size&&!["/","-"].includes(t.product_variation.size)?((0,s.wg)(),(0,s.iD)("span",SP,(0,et.zw)(t.product_variation.size),1)):(0,s.kq)("",!0)])))),128))])])]),(0,s._)("td",zP,[(0,s._)("div",null,[(0,s._)("span",{class:(0,et.C_)([[l.confirmation.bgLight,l.confirmation.textLight],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},(0,et.zw)(l.confirmation.name),3)])]),(0,s._)("td",UP,[(0,s._)("div",null,[(0,s.Wm)(o,{onUpdate:e[1]||(e[1]=e=>t.$emit("update",e)),deliveries:r.deliveries,item:r.item},null,8,["deliveries","item"])]),(0,s.kq)("",!0)]),(0,s._)("td",LP,[(0,s._)("div",null,[(0,s._)("span",{class:(0,et.C_)([[l.deliveryState.bgLight,l.deliveryState.textLight],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},(0,et.zw)(l.deliveryState.value?l.deliveryState.name:"Not Selected"),3)])]),(0,s._)("td",PP,[(0,s._)("div",null,[(0,s.Wm)(n,{onUpdate:e[2]||(e[2]=e=>t.$emit("update",e)),item:r.item},null,8,["item"])])])],2)}var WP=r(6797),$P=r.n(WP);const EP={class:"tw-h-full"},qP={class:"tw-flex tw-items-center tw-gap-2"},TP=["href"],OP={key:0},VP={key:1};function IP(t,e,r,a,i,l){const o=(0,s.up)("UpdatePopup"),n=(0,s.up)("HistoryPopup");return(0,s.wg)(),(0,s.iD)("div",EP,[(0,s._)("div",qP,[(0,s._)("a",{target:"_blank",href:"https://api.whatsapp.com/send?phone="+r.item.phone.replace("+","").replace("-","").replace(" ",""),class:"tw-bg-whites tw-shadow-sm tw-px-2 tw-py-1 tw-w-[30px] tw-h-[30px] tw-border tw-border-solid tw-border-green-500/20 hover:tw-bg-green-500/10 hover:tw-border-green-500/70 tw-duration-300 tw-text-green-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(st.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-whatsapp")])),_:1})],8,TP),(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.update=!0),class:"tw-bg-whites tw-shadow-sm tw-px-2 tw-py-1 tw-w-[30px] tw-h-[30px] tw-border tw-border-solid tw-border-orange-500/20 hover:tw-bg-orange-500/10 hover:tw-border-orange-500/70 tw-duration-300 tw-text-orange-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(st.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})]),(0,s._)("button",{onClick:e[1]||(e[1]=t=>i.history=!0),class:"tw-bg-whites tw-shadow-sm tw-px-2 tw-py-1 tw-w-[30px] tw-h-[30px] tw-border tw-border-solid tw-border-purple-500/20 hover:tw-bg-purple-500/10 hover:tw-border-purple-500/70 tw-duration-300 tw-text-purple-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(st.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-sort-clock-descending")])),_:1})])]),i.update?((0,s.wg)(),(0,s.iD)("div",OP,[(0,s.Wm)(o,{onUpdate:e[2]||(e[2]=e=>t.$emit("update",e)),visible:i.update,"onUpdate:visible":e[3]||(e[3]=t=>i.update=t),item:r.item},null,8,["visible","item"])])):(0,s.kq)("",!0),i.history?((0,s.wg)(),(0,s.iD)("div",VP,[(0,s.Wm)(n,{visible:i.history,"onUpdate:visible":e[4]||(e[4]=t=>i.history=t),item:r.item},null,8,["visible","item"])])):(0,s.kq)("",!0)])}const FP={class:"tw-mx-auto tw-w-[95%] md:tw-max-w-[800px] tw-overflow-hidden tw-h-fit dark:tw-bg-neutral-900 tw-bg-white tw-border tw-border-solid dark:tw-border-neutral-700 tw-border-neutral-300 tw-shadow-md tw-my-5 tw-rounded-lg"},RP=(0,s._)("div",{class:"tw-p-4 tw-text-lg tw-border-b tw-border-solid tw-font-medium tw-flex dark:tw-text-neutral-400 tw-text-neutral-500 tw-items-center tw-gap-4 dark:tw-bg-neutral-800 tw-bg-gray-50"}," Order Informations ",-1),jP={class:"tw-bg-white tw-p-4"},NP={class:"tw-grid tw-gap-6 tw-gap-y-5 tw-grid-cols-1 md:tw-grid-cols-2"},MP={class:"tw-col-span-2 md:tw-col-span-1"},HP=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Client Name",-1),YP={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},ZP={class:"tw-col-span-2 md:tw-col-span-1"},KP=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Phone Number",-1),BP={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},QP={class:"tw-col-span-2 md:tw-col-span-1"},GP=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"City",-1),JP={class:"tw-relative"},XP=(0,s._)("option",{value:null,disabled:""},"Choose a City",-1),tA=["value"],eA=["value"],rA=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),aA={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},sA={class:"tw-col-span-2 md:tw-col-span-1"},iA=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Address",-1),lA={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},oA={class:"tw-col-span-2"},nA=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),dA={class:"tw-relative"},wA=["value"],cA=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),uA={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},pA={key:0,class:"md:tw-col-span-1 tw-col-span-2"},mA=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Date",-1),gA={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},hA={key:1,class:"md:tw-col-span-1 tw-col-span-2"},fA=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Note",-1),vA={class:"tw-col-span-2"},yA=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Note",-1),xA={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},bA={class:"md:tw-col-span-1 tw-col-span-2"},_A={class:"tw-col-span-1"},kA=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Delivery",-1),CA={class:"tw-relative"},DA=["value"],SA=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),zA={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},UA={class:"md:tw-col-span-1 tw-col-span-2"},LA=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Upsell",-1),PA={class:"tw-relative"},AA=["value"],WA=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),$A={class:"tw-col-span-2"},EA={class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},qA={key:0,class:"tw-text-red-400 tw-text-xs"},TA={key:2,class:"tw-col-span-2"},OA={class:"tw-flex tw-justify-end tw-items-center tw-p-4 tw-gap-3 dark:tw-bg-neutral-900 tw-bg-gray-50 tw-border-t tw-border-solid"},VA=["disabled"],IA=(0,s._)("span",null,"Update",-1);function FA(t,e,r,i,l,o){const n=(0,s.up)("OrderAffectation"),d=(0,s.up)("OrderItems"),w=(0,s.up)("ProductOffersTable"),c=(0,s.up)("popup-new");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(c,{visible:r.visible,closeable:!1,onCancel:o.cancel},{default:(0,s.w5)((()=>[(0,s._)("div",FP,[RP,(0,s._)("div",jP,[(0,s._)("div",NP,[(0,s._)("div",MP,[HP,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.itemCopy.fullname=t),onInput:e[1]||(e[1]=t=>l.errors.fullname=null),type:"text",class:(0,et.C_)([[l.errors.fullname&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),placeholder:"John",required:""},null,34),[[a.nr,l.itemCopy.fullname]]),l.errors.fullname?((0,s.wg)(),(0,s.iD)("label",YP,(0,et.zw)(l.errors.fullname),1)):(0,s.kq)("",!0)]),(0,s._)("div",ZP,[KP,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.itemCopy.phone=t),onInput:e[3]||(e[3]=t=>l.errors.phone=null),class:(0,et.C_)([[l.errors.phone&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"123-45-678",required:""},null,34),[[a.nr,l.itemCopy.phone]]),l.errors.phone?((0,s.wg)(),(0,s.iD)("label",BP,(0,et.zw)(l.errors.phone),1)):(0,s.kq)("",!0)]),(0,s._)("div",QP,[GP,(0,s._)("div",JP,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.itemCopy.city=t),onChange:e[5]||(e[5]=t=>l.errors.city=null),class:(0,et.C_)([[l.errors.city&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 tw-pr-7"])},[XP,(0,s._)("option",{value:l.itemCopy.city,disabled:""},(0,et.zw)(l.itemCopy.city),9,tA),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,et.zw)(t.name),9,eA)))),128))],34),[[a.bM,l.itemCopy.city]]),rA]),l.errors.city?((0,s.wg)(),(0,s.iD)("label",aA,(0,et.zw)(l.errors.city),1)):(0,s.kq)("",!0)]),(0,s._)("div",sA,[iA,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>l.itemCopy.adresse=t),onInput:e[7]||(e[7]=t=>l.errors.adresse=null),class:(0,et.C_)([[l.errors.adresse&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"Address",required:""},null,34),[[a.nr,l.itemCopy.adresse]]),l.errors.adresse?((0,s.wg)(),(0,s.iD)("label",lA,(0,et.zw)(l.errors.adresse),1)):(0,s.kq)("",!0)]),(0,s._)("div",oA,[nA,(0,s._)("div",dA,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>l.itemCopy.confirmation=t),onChange:e[9]||(e[9]=t=>l.errors.confirmation=null),class:(0,et.C_)([[l.errors.confirmation&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,class:(0,et.C_)([t.text,!t.value&&"!tw-text-green-500"]),key:t.id},(0,et.zw)(t.name),11,wA)))),128))],34),[[a.bM,l.itemCopy.confirmation]]),cA]),l.errors.confirmation?((0,s.wg)(),(0,s.iD)("label",uA,(0,et.zw)(l.errors.confirmation),1)):(0,s.kq)("",!0)]),"reporter"==l.itemCopy.confirmation?((0,s.wg)(),(0,s.iD)("div",pA,[mA,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>l.itemCopy.reported_agente_date=t),onInput:e[11]||(e[11]=t=>l.errors.reported_agente_date=null),class:(0,et.C_)([[l.errors.reported_agente_date&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"date",required:""},null,34),[[a.nr,l.itemCopy.reported_agente_date]]),l.errors.reported_agente_date?((0,s.wg)(),(0,s.iD)("label",gA,(0,et.zw)(l.errors.reported_agente_date),1)):(0,s.kq)("",!0)])):(0,s.kq)("",!0),"reporter"==l.itemCopy.confirmation?((0,s.wg)(),(0,s.iD)("div",hA,[fA,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[12]||(e[12]=t=>l.itemCopy.reported_agente_note=t),rows:"1",class:"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500",placeholder:"Enter a note"},null,512),[[a.nr,l.itemCopy.reported_agente_note]])])):(0,s.kq)("",!0),(0,s._)("div",vA,[yA,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[13]||(e[13]=t=>l.itemCopy.note=t),onInput:e[14]||(e[14]=t=>l.errors.note=null),class:(0,et.C_)([[l.errors.note&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),rows:"3",placeholder:"Enter a note"},null,34),[[a.nr,l.itemCopy.note]]),l.errors.note?((0,s.wg)(),(0,s.iD)("label",xA,(0,et.zw)(l.errors.note),1)):(0,s.kq)("",!0)]),(0,s._)("div",bA,[(0,s.Wm)(n,{item:l.itemCopy,error:l.errors.affectation,"onUpdate:error":e[15]||(e[15]=t=>l.errors.affectation=t),affectation:l.itemCopy.affectation,"onUpdate:affectation":e[16]||(e[16]=t=>l.itemCopy.affectation=t)},null,8,["item","error","affectation"])]),(0,s._)("div",_A,[kA,(0,s._)("div",CA,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[17]||(e[17]=t=>l.itemCopy.delivery=t),onChange:e[18]||(e[18]=t=>l.errors.delivery=null),class:(0,et.C_)([[l.errors.delivery&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveryStatus,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,class:(0,et.C_)([t.text,!t.value&&"!tw-text-green-500"]),key:t.id},(0,et.zw)(t.name),11,DA)))),128))],34),[[a.bM,l.itemCopy.delivery]]),SA]),l.errors.delivery?((0,s.wg)(),(0,s.iD)("label",zA,(0,et.zw)(l.errors.delivery),1)):(0,s.kq)("",!0)]),(0,s._)("div",UA,[LA,(0,s._)("div",PA,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[19]||(e[19]=t=>l.itemCopy.upsell=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.upsells,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,et.C_)([t.text]),value:t.value,key:t.id},(0,et.zw)(t.name),11,AA)))),128))],512),[[a.bM,l.itemCopy.upsell]]),WA])]),(0,s._)("div",$A,[(0,s._)("label",EA,[(0,s.Uk)("Order Items "),l.errors.items?((0,s.wg)(),(0,s.iD)("span",qA," # "+(0,et.zw)(l.errors.items),1)):(0,s.kq)("",!0)]),(0,s._)("div",null,[(0,s.Wm)(d,{order:l.itemCopy,error:l.errors.items,products:l.products,"products-fetched":l.products_fetched,items:l.itemCopy.items,"onUpdate:items":e[20]||(e[20]=t=>l.itemCopy.items=t)},null,8,["order","error","products","products-fetched","items"])])]),l.products_fetched?((0,s.wg)(),(0,s.iD)("div",TA,[(0,s.Wm)(w,{products:l.products,item:l.itemCopy},null,8,["products","item"])])):(0,s.kq)("",!0)])]),(0,s._)("div",OA,[(0,s._)("button",{onClick:e[21]||(e[21]=(...t)=>o.cancel&&o.cancel(...t)),class:"tw-py-2 tw-px-7 tw-rounded tw-text-sm tw-border tw-border-solid tw-border-tansparent dark:tw-border-neutral-900 hover:tw-border-neutral-400 dark:hover:tw-border-neutral-500 hover:tw-bg-gray-300 tw-bg-gray-200 dark:tw-bg-neutral-600 tw-duration-300 tw-text-neutral-900 dark:tw-text-neutral-300"}," Cancel "),(0,s._)("button",{onClick:e[22]||(e[22]=(...t)=>o.handleUpdate&&o.handleUpdate(...t)),disabled:l.isLoading,class:"tw-py-2 tw-px-7 tw-flex tw-items-center tw-rounded tw-text-sm tw-bg-orange-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-orange-600 dark:tw-border-neutral-900 dark:hover:tw-border-orange-500 hover:tw-bg-orange-500/80 dark:hover:tw-bg-orange-400 tw-duration-300 tw-text-white"},[(0,s.Wm)(st.t,{size:"small",class:(0,et.C_)(["tw-duration-300 tw-animate-spin tw-overflow-hidden tw-max-w-0 tw-mr-0",[l.isLoading&&"!tw-max-w-[50px] !tw-mr-3"]])},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1},8,["class"]),IA],8,VA)])])])),_:1},8,["visible","onCancel"])])}const RA=(t,e)=>e.fullname?e.phone?e.adresse?e.note||"annuler"!=e.confirmation?e.affectation&&"confirmer"!=e.confirmation?(t.errors.affectation="Cannot update affectation: Order not confirmed.",!1):!!jA(t,e.items):(t.errors.note="Add Cancelation note !",!1):(t.errors.adresse="Address is required",!1):(t.errors.phone="Phone Number is required",!1):(t.errors.fullname="Client Name is required",!1),jA=(t,e)=>{if(!e.length)return t.errors.items="You should add one order item at least.",!1;let r=!0;return e.forEach((e=>0==e.product_id?(t.errors.items="Product is required for order item",r=!1,!1):0==e.product_variation_id?(t.errors.items="Select a product variation",r=!1,!1):0==e.quantity?(t.errors.items="Items quantity cannot be 0",r=!1,!1):void 0)),r},NA=(t,e)=>{t.$alert({title:"Updated Successfully",type:"success"});const r=e.data.order;t.$emit("update",r),t.isLoading=!1,t.cancel(),t.errors={}},MA=(t,e)=>{t.$alert({title:e.message,type:"error"}),"VALIDATION_ERROR"==e.code&&(t.errors=e.errors),t.isLoading=!1},HA=(t,e)=>{t.isLoading=!0,t.errors={},sL.update(e.id,e).then((e=>NA(t,e.data))).catch((e=>MA(t,e.response.data))).finally((()=>t.isLoading=!1))},YA={key:0},ZA=(0,s._)("p",{class:"tw-col-span-12 tw-rounded-lg tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"}," No Order items ",-1),KA={class:"tw-flex tw-justify-end tw-items-center tw-py-3"},BA=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),QA=(0,s._)("span",null,"Add Item",-1),GA=[BA,QA],JA={key:1,class:"md:tw-col-span-12 tw-col-span-12"},XA={class:"tw-max-w-full tw-overflow-auto"},tW={class:"tw-text-xs tw-text-gray-700 tw-uppercase !tw-rounded-t-lg tw-border tw-border-solid"},eW={class:"tw-bg-gray-50"},rW={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},aW={key:0},sW={colspan:"6"},iW={class:"tw-flex tw-justify-end tw-items-center tw-py-3"},lW=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),oW=(0,s._)("span",null,"Add Item",-1),nW=[lW,oW],dW=(0,s._)("td",{colspan:"4"},null,-1),wW=(0,s._)("td",null,null,-1),cW={colspan:"1",class:"tw-p-2"},uW={class:"tw-p-2 tw-py-1 tw-text-lg tw-font-['cairo'] tw-text-green-500 tw-w-24 tw-font-bold tw-tracking-wide tw-block focus:tw-outline-none tw-shadow-sm tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},pW={key:1},mW={colspan:"6"},gW={class:"tw-scale-75 tw-p-5"};function hW(t,e,r,a,i,l){const o=(0,s.up)("ItemRow"),n=(0,s.up)("loading");return(0,s.wg)(),(0,s.iD)("div",null,[r.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",YA,[ZA,(0,s._)("div",KA,[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>l.addItem&&l.addItem(...t)),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-400 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},GA)])])),r.items.length?((0,s.wg)(),(0,s.iD)("div",JA,[(0,s._)("div",XA,[((0,s.wg)(),(0,s.iD)("table",{key:r.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,s._)("thead",tW,[(0,s._)("tr",eW,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,s._)("th",{class:(0,et.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",rW,(0,et.zw)(t),1)],2))),64))])]),r.productsFetched?((0,s.wg)(),(0,s.iD)("tbody",aW,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.items,(t=>((0,s.wg)(),(0,s.j4)(o,{key:t.id,item:t,products:r.products,onDelete:l.deleteItem,onUpdate:l.updateItem},null,8,["item","products","onDelete","onUpdate"])))),128)),(0,s._)("tr",null,[(0,s._)("td",sW,[(0,s._)("div",iW,[(0,s._)("button",{onClick:e[1]||(e[1]=(...t)=>l.addItem&&l.addItem(...t)),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-400 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},nW)])])]),(0,s._)("tr",null,[dW,wW,(0,s._)("td",cW,[(0,s._)("div",uW,[(0,s._)("p",null,(0,et.zw)(i.currency)+" "+(0,et.zw)(l.price),1)])])])])):((0,s.wg)(),(0,s.iD)("tbody",pW,[(0,s._)("tr",null,[(0,s._)("td",mW,[(0,s._)("div",gW,[(0,s.Wm)(n)])])])]))]))])])):(0,s.kq)("",!0)])}const fW=(0,s._)("td",null,null,-1),vW={class:"tw-p-2"},yW={class:"tw-relative"},xW=["value"],bW=(0,s._)("option",{value:0,selected:""},"Choose Product",-1),_W=["value"],kW=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),CW={class:"tw-p-2"},DW={key:0,class:"tw-relative"},SW=["value"],zW=(0,s._)("option",{value:"",disabled:""},"Choose Variation",-1),UW=["value"],LW={key:1,class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},PW=(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})],-1),AW=[PW],WW={class:"tw-p-2"},$W=["value"],EW={class:"tw-p-2"},qW=["value"],TW={class:"tw-flex tw-justify-center"};function OW(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("tr",null,[fW,(0,s._)("td",null,[(0,s._)("div",vW,[(0,s._)("div",yW,[(0,s._)("select",{onChange:e[0]||(e[0]=(...t)=>l.handleProductChange&&l.handleProductChange(...t)),value:r.item.product_id,class:"tw-block tw-border-solid focus:tw-outline-none tw-w-full tw-p-2 tw-pr-6 tw-text-xs tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},[bW,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.products,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.id},(0,et.zw)(t.name),9,_W)))),128))],40,xW),kW])])]),(0,s._)("td",null,[(0,s._)("div",CW,[r.item.product_id?((0,s.wg)(),(0,s.iD)("div",DW,[l.product.variations.length>1?((0,s.wg)(),(0,s.iD)("select",{key:0,onChange:e[1]||(e[1]=(...t)=>l.handleVariationChange&&l.handleVariationChange(...t)),value:r.item.product_variation_id,class:"tw-block tw-border-solid focus:tw-outline-none tw-w-full tw-p-2 tw-pr-6 tw-text-xs tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},[zW,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.product.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.id},(0,et.zw)(t.color)+" "+(0,et.zw)(t.size),9,UW)))),128))],40,SW)):(0,s.kq)("",!0),l.product.variations.length>1?((0,s.wg)(),(0,s.iD)("div",LW,AW)):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])]),(0,s._)("td",null,[(0,s._)("div",WW,[(0,s._)("input",{onInput:e[2]||(e[2]=e=>t.$emit("update",{...r.item,quantity:parseInt(e.target.value)>=0?parseInt(e.target.value):0})),value:r.item.quantity,min:"0",type:"number",class:"focus:tw-outline-none tw-border-solid tw-block tw-w-24 tw-p-2 tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded-lg tw-bg-gray-50 sm:tw-text-xs focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},null,40,$W)])]),(0,s._)("td",null,[(0,s._)("div",EW,[(0,s._)("input",{onInput:e[3]||(e[3]=e=>t.$emit("update",{...r.item,price:parseFloat(e.target.value)})),value:r.item.price,min:"0",type:"number",class:"focus:tw-outline-none tw-border-solid tw-block tw-w-24 tw-p-2 tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded-lg tw-bg-gray-50 sm:tw-text-xs focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},null,40,qW)])]),(0,s._)("td",null,[(0,s._)("div",TW,[(0,s._)("button",{onClick:e[4]||(e[4]=(...t)=>l.handleDelete&&l.handleDelete(...t)),class:"tw-px-2 tw-py-1 tw-w-[25px] tw-h-[25px] tw-border tw-border-solid tw-border-red-500/20 hover:tw-bg-red-500/10 hover:tw-border-red-500/70 tw-duration-300 tw-text-red-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(st.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])])])])}var VW={props:{item:{required:!0},products:{required:!0}},computed:{product(){return 0==this.item.product_id?null:this.products.find((t=>t.id==this.item.product_id))}},methods:{handleProductChange(t){const e=parseInt(t.target.value);if(!e)return!1;const r=this.products.find((t=>t.id==e));console.log(r.variations.length>0?r.variations[0].id:null);const a={...this.item,product_id:e,product:r,product_ref:r.ref,product_variation_id:r.variations.length>0?r.variations[0].id:null,product_variation:r.variations.length>0?r.variations[0]:null};this.$emit("update",a)},handleVariationChange(t){this.$emit("update",{...this.item,product_variation:this.product.variations.find((e=>e.id==parseInt(t.target.value))),product_variation_id:parseInt(t.target.value)})},handleDelete(){this.$emit("delete",this.item.id)}},mounted(){}};const IW=(0,p.Z)(VW,[["render",OW]]);var FW=IW,RW={components:{ItemRow:FW},props:{items:{required:!0,default:[]},error:{required:!1,default:null},products:{required:!0},productsFetched:{required:!0},order:{required:!0}},data(){return{currency:c}},computed:{price(){return Bi(this.order)}},methods:{updateItem(t){const e=this.items.map((e=>e.id==t.id?t:e));this.$emit("update:items",e)},deleteItem(t){const e=this.items.filter((e=>e.id!=t));this.$emit("update:items",e)},addItem(){const t=this.items.length>0?this.items[this.items.length-1].id:1,e=t?t+1:1,r={id:e,quantity:0,price:0,product_variation_id:0,product_id:0},a=[...this.items,r];this.$emit("update:items",a)}},mounted(){}};const jW=(0,p.Z)(RW,[["render",hW]]);var NW=jW;const MW=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Affectation",-1),HW={key:0,class:"tw-relative"},YW=["value","disabled"],ZW=(0,s._)("option",{value:""},"Choose a Delivery",-1),KW=["value"],BW=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),QW={key:1,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},GW={key:2,class:"tw-relative"},JW={class:"tw-absolute tw-scale-75 tw-left-1/2 tw-top-1/2 -tw-translate-x-1/2 -tw-translate-y-1/2 tw-z-10"},XW=(0,s._)("select",{disabled:"",class:"tw-opacity-30 tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[(0,s._)("option",{value:null,selected:""},"Loading...")],-1),t$=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},null,-1);function e$(t,e,r,a,i,l){const o=(0,s.up)("loading");return(0,s.wg)(),(0,s.iD)("div",null,[MW,i.fetched?((0,s.wg)(),(0,s.iD)("div",HW,[(0,s._)("select",{value:r.affectation,onChange:e[0]||(e[0]=(...t)=>l.handleChange&&l.handleChange(...t)),disabled:"confirmer"!=r.item.confirmation,class:(0,et.C_)([[r.error&&"!tw-border-red-400","confirmer"!=r.item.confirmation&&"tw-cursor-not-allowed"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[ZW,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.availableDeliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,et.zw)(t.name),9,KW)))),128))],42,YW),BW])):(0,s.kq)("",!0),i.fetched&&r.error?((0,s.wg)(),(0,s.iD)("label",QW,(0,et.zw)(r.error),1)):(0,s.kq)("",!0),i.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",GW,[(0,s._)("div",JW,[(0,s.Wm)(o)]),XW,t$]))])}var r$={props:{affectation:{required:!0},error:{required:!1,default:null},item:{required:!0}},data(){return{deliveries:[],fetched:!1}},computed:{availableDeliveries(){return this.deliveries.filter((t=>t.has.some((t=>this.item.items.some((e=>e.product_id==t))))))},delivery(){return this.deliveries.find((t=>t.id==this.affectation))}},watch:{"item.confirmation":{deep:!0,handler(){this.$emit("update:affectation",null)}},"item.items":{deep:!0,handler(){if(!this.affectation)return!1;this.delivery.has.some((t=>this.item.items.some((e=>e.product_id==t))))||this.$emit("update:affectation",null)}}},methods:{getDeliveries(){this.fetched=!1,X.allDeliveries().then((t=>{"SUCCESS"==t?.data.code&&(this.deliveries=t.data.data.deliveries,this.fetched=!0)})).catch(this.$handleApiError)},handleChange(t){this.$emit("update:affectation",t.target.value),this.$emit("update:error",null)}},mounted(){this.getDeliveries()}};const a$=(0,p.Z)(r$,[["render",e$]]);var s$=a$;const i$={key:0},l$=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Offers",-1),o$={class:"md:tw-col-span-12 tw-col-span-12"},n$={class:"tw-max-w-full tw-overflow-auto"},d$={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},w$=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 !tw-rounded-t-lg tw-border tw-border-solid"},[(0,s._)("tr",{class:"tw-bg-gray-50"},[(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Product Name"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Quantity"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Price"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Note")])],-1),c$={class:"tw-px-3 tw-py-2"},u$={class:"tw-px-3 tw-py-2"},p$={class:"tw-px-3 tw-py-2"},m$={class:"tw-px-3 tw-py-2"},g$={class:"tw-max-w-[250px] tw-text-sm"};function h$(t,e,r,a,i,l){return l.offers.length?((0,s.wg)(),(0,s.iD)("div",i$,[l$,(0,s._)("div",o$,[(0,s._)("div",n$,[(0,s._)("table",d$,[w$,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.offers,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"odd:tw-bg-white even:tw-bg-gray-50 tw-border-b"},[(0,s._)("td",c$,(0,et.zw)(l.getProduct(t.product_id)?.name),1),(0,s._)("td",u$,(0,et.zw)(t.quantity),1),(0,s._)("td",p$,(0,et.zw)(t.price)+" "+(0,et.zw)(i.currency),1),(0,s._)("td",m$,[(0,s._)("p",g$,(0,et.zw)(t.note),1)])])))),128))])])])])])):(0,s.kq)("",!0)}var f$={props:{products:{required:!0},item:{required:!0}},data(){return{currency:c}},computed:{offers(){return this.products.filter((t=>this.item.items.map((t=>t.product_id)).includes(t.id))).flatMap((t=>t.offers))}},methods:{getProduct(t){return this.products.find((e=>e.id==t))}},mounted(){}};const v$=(0,p.Z)(f$,[["render",h$]]);var y$=v$,x$={components:{OrderItems:NW,OrderAffectation:s$,ProductOffersTable:y$},props:{visible:{required:!0},item:{required:!0}},data(){return{confirmations:qn,deliveryStatus:Vn,upsells:On,isLoading:!1,products_fetched:null,products:null,itemCopy:null,errors:{fullname:null,phone:null,city:null,adresse:null,note:null,reported_agente_date:null,affectation:null,items:null}}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{handleUpdate(){const t=RA(this,this.itemCopy);if(!t)return!1;HA(this,this.itemCopy)},cancel(){if(this.isLoading)return!1;this.$emit("update:visible",!1)},getProducts(){this.products_fetched=!1,sa.allForOrder().then((t=>{"SUCCESS"==t.data.code?this.products=t.data.data.products:this.products=[],this.products_fetched=!0})).catch(this.$handleApiError)}},mounted(){this.itemCopy=JSON.parse(JSON.stringify(this.item)),this.getProducts()}};const b$=(0,p.Z)(x$,[["render",FA]]);var _$=b$;const k$={class:"tw-mx-auto tw-w-[95%] md:tw-max-w-[800px] tw-overflow-hidden tw-h-fit dark:tw-bg-neutral-900 tw-bg-white tw-border tw-border-solid dark:tw-border-neutral-700 tw-border-neutral-300 tw-shadow-md tw-my-5 tw-rounded-lg"},C$=(0,s._)("div",{class:"tw-p-4 tw-text-lg tw-border-b tw-border-solid tw-font-medium tw-flex dark:tw-text-neutral-400 tw-text-neutral-500 tw-items-center tw-gap-4 dark:tw-bg-neutral-800 tw-bg-gray-50"}," Order History ",-1),D$={class:"tw-bg-white tw-p-4"},S$={key:0},z$={key:1,class:"tw-p-5"},U$={class:"d-flextw-flex-col justify-space-between flex-grow-1"},L$={class:"tw-flex tw-items-center tw-gap-2 tw-my-2"},P$={class:"tw-text-sm tw-capitalize tw-text-gray-500 tw-flex tw-items-center tw-mt-2 tw-gap-2 tw-font-bold tw-font-['cairo']"},A$={class:"flex-shrink-0 tw-text-neutral-500 tw-flex tw-items-center tw-gap-2 tw-text-sm"},W$={class:"d-flextw-flex-col justify-space-between flex-grow-1"},$$={class:"tw-flex tw-flex-col tw-my-2"},E$=(0,s._)("div",null,"New Order Created",-1),q$={class:"flex-shrink-0 tw-flex tw-items-center tw-gap-2 tw-text-sm"},T$={class:"tw-flex tw-justify-end tw-items-center tw-p-4 tw-gap-3 dark:tw-bg-neutral-900 tw-bg-gray-50 tw-border-t tw-border-solid"};function O$(t,e,r,a,i,l){const o=(0,s.up)("loading"),n=(0,s.up)("popup-new");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(n,{visible:r.visible,closeable:!0,onCancel:l.cancel},{default:(0,s.w5)((()=>[(0,s._)("div",k$,[C$,(0,s._)("div",D$,[i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",S$,[(0,s.Wm)(o)])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",z$,[(0,s.Wm)(Cd.R,{density:"compact",side:"end"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.events,(t=>((0,s.wg)(),(0,s.j4)(Dd.N,{key:t.id,class:"mb-4","dot-color":l.eventColor(t.type),size:"x-small"},{default:(0,s.w5)((()=>[(0,s._)("div",U$,[(0,s._)("div",L$,[(0,s.Wm)(kd.v,{class:"ms-0 tw-capitalize tw-w-fit",color:l.eventColor(t.type),label:"",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,et.zw)(t.type),1)])),_:2},1032,["color"]),"responsibility"!=t.type?((0,s.wg)(),(0,s.j4)(st.t,{key:0,size:"x-small",color:"grey"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-arrow-right")])),_:1})):(0,s.kq)("",!0),"responsibility"!=t.type?((0,s.wg)(),(0,s.j4)(kd.v,{key:1,class:"ms-0 tw-capitalize tw-w-fit",color:"green",label:"",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,et.zw)(!t.historique&&["affectation","delivery","confirmation"].includes(t.type)?"confirmation"==t.type?"New":"Select":t.historique),1)])),_:2},1024)):(0,s.kq)("",!0)]),(0,s._)("div",P$,[(0,s.Wm)(st.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-account")])),_:1}),(0,s._)("span",null,(0,et.zw)(t.users.firstname)+" "+(0,et.zw)(t.users.lastname),1)]),(0,s._)("div",A$,[(0,s._)("span",null,(0,et.zw)(t.created_at?.split("T")[0]),1),(0,s._)("span",null,(0,et.zw)(t.created_at?.split("T")[1].split(".")[0]),1)])])])),_:2},1032,["dot-color"])))),128)),(0,s.Wm)(Dd.N,{class:"mb-4","dot-color":"green",size:"x-small"},{default:(0,s.w5)((()=>[(0,s._)("div",W$,[(0,s._)("div",$$,[(0,s.Wm)(kd.v,{class:"ms-0 tw-capitalize tw-w-fit",color:"green",label:"",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Order Created ")])),_:1}),E$]),(0,s._)("div",q$,[(0,s._)("span",null,(0,et.zw)(r.item.created_at?.split("T")[0]),1),(0,s._)("span",null,(0,et.zw)(r.item.created_at?.split("T")[1].split(".")[0]),1)])])])),_:1})])),_:1})])):(0,s.kq)("",!0)]),(0,s._)("div",T$,[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>l.cancel&&l.cancel(...t)),class:"tw-py-2 tw-px-7 tw-rounded tw-text-sm tw-border tw-border-solid tw-border-tansparent dark:tw-border-neutral-900 hover:tw-border-neutral-400 dark:hover:tw-border-neutral-500 hover:tw-bg-gray-300 tw-bg-gray-200 dark:tw-bg-neutral-600 tw-duration-300 tw-text-neutral-900 dark:tw-text-neutral-300"}," Cancel ")])])])),_:1},8,["visible","onCancel"])])}var V$={components:{},props:{visible:{required:!0},item:{required:!0}},data(){return{allEvents:[],isLoaded:!1}},computed:{events(){return[...this.allEvents].reverse()}},methods:{cancel(){this.$emit("update:visible",!1)},getHistory(){this.isLoaded=!1,la.history(this.item.id).then((t=>{this.allEvents=t.data.data.orders}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))},eventColor(t){let e={confirmation:"primary-color",delivery:"blue",upsell:"purple",affectation:"cyan"};return["confirmation","delivery","upsell","affectation"].includes(t)?e[t]:"primary-color"}},mounted(){this.getHistory()}};const I$=(0,p.Z)(V$,[["render",O$]]);var F$=I$,R$={components:{UpdatePopup:_$,HistoryPopup:F$},props:{item:{required:!0}},data(){return{update:!1,history:!1,isLoading:!1}},methods:{handle(){}}};const j$=(0,p.Z)(R$,[["render",IP]]);var N$=j$;const M$={key:0},H$={key:0,class:"tw-relative tw-inline-block tw-text-left"},Y$={key:0},Z$=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"#4ade80",d:"M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41L9 16.17z"})],-1),K$=[Z$],B$={class:"tw-w-full tw-truncate tw-text-start tw-text-gray-500"},Q$={key:0,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},G$=(0,s.uE)('<g fill="none" stroke="#4ade80" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" stroke-opacity=".3" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="1.3s" values="60;0"></animate></path><path stroke-dasharray="15" stroke-dashoffset="15" d="M12 3C16.9706 3 21 7.02944 21 12"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="15;0"></animate><animateTransform attributeName="transform" dur="1.5s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"></animateTransform></path></g>',1),J$=[G$],X$={key:0,class:"tw-text-xs tw-mt-2 tw-max-w-[150px] tw-text-red-400 tw-whitespace-normal"},tE={key:0,class:"tw-absolute tw-right-0 tw-z-10 tw-mt-2 tw-w-56 tw-origin-top-right tw-rounded-md tw-bg-white tw-shadow-lg tw-ring-1 tw-ring-black tw-ring-opacity-5 focus:tw-outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",tabindex:"-1"},eE={class:"tw-py-1",role:"none"},rE=["onClick"],aE={key:1},sE={class:"tw-p-2 tw-scale-75"};function iE(t,e,r,a,i,l){const o=(0,s.up)("loading");return"confirmer"==r.item.confirmation?((0,s.wg)(),(0,s.iD)("div",M$,[r.deliveries.fetched?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",H$,[(0,s._)("div",null,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.visible=!i.visible),type:"button",class:"tw-inline-flex tw-w-[150px] tw-truncate tw-relative tw-items-center tw-gap-x-1.5 tw-rounded-md tw-bg-white tw-px-3 tw-py-1 tw-text-sm tw-font-semibold tw-text-gray-900 tw-shadow-none hover:tw-shadow-sm tw-ring-1 tw-ring-inset tw-ring-gray-200",id:"menu-button","aria-expanded":"true","aria-haspopup":"true"},[l.selected.id?((0,s.wg)(),(0,s.iD)("div",Y$,K$)):(0,s.kq)("",!0),(0,s._)("p",B$,(0,et.zw)(l.selected.name),1),(0,s._)("div",null,[i.isLoading?((0,s.wg)(),(0,s.iD)("svg",Q$,J$)):(0,s.kq)("",!0)])]),i.errors.affectation?((0,s.wg)(),(0,s.iD)("p",X$,(0,et.zw)(i.errors.affectation),1)):(0,s.kq)("",!0)]),(0,s.Wm)($t.cu,null,{default:(0,s.w5)((()=>[i.visible?((0,s.wg)(),(0,s.iD)("div",tE,[(0,s._)("div",eE,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.availableDeliveries,(t=>((0,s.wg)(),(0,s.iD)("button",{onClick:e=>l.handleChange(t.id),key:t.id,class:"hover:tw-bg-gray-100 tw-items-center tw-w-full tw-text-start hover:tw-text-gray-700 tw-text-gray-700 tw-flex tw-gap-2 tw-px-4 tw-py-2 tw-text-sm",role:"menuitem"},[(0,s._)("span",null,(0,et.zw)(t.name),1)],8,rE)))),128))])])):(0,s.kq)("",!0)])),_:1})])),[[te.L,l.handleClickOutside]]):((0,s.wg)(),(0,s.iD)("div",aE,[(0,s._)("div",sE,[(0,s.Wm)(o)])]))])):(0,s.kq)("",!0)}var lE={props:{deliveries:{required:!0},item:{required:!0}},data(){return{visible:!1,isLoading:!1,errors:{}}},computed:{availableDeliveries(){return[{id:null,name:"Select"},...this.deliveries.items.filter((t=>t.has.some((t=>this.item.items.some((e=>e.product_id==t))))))]},selected(){return this.availableDeliveries.find((t=>t.id==this.item.affectation))}},methods:{handleClickOutside(){this.visible&&(this.visible=!1)},handleChange(t){this.visible=!1,this.errors={};const e={...this.item,affectation:t};HA(this,e,!1)}}};const oE=(0,p.Z)(lE,[["render",iE]]);var nE=oE,dE={components:{TableActions:N$,TableRowAffectation:nE},props:{item:{required:!0},selected:{required:!0},deliveries:{required:!0},all:{required:!0},index:{required:!0}},data(){return{moment:$P()}},computed:{confirmation(){return qn.find((t=>t.value==this.item.confirmation))},deliveryState(){return Vn.find((t=>t.value==this.item.delivery))},isSelected(){return this.selected.includes(this.item.id)}},methods:{handleSelected(t){if(t.target.checked){const t=[...this.selected];return t.push(this.item.id),this.$emit("update:selected",t),!1}const e=this.selected.filter((t=>t!=this.item.id));this.$emit("update:selected",e)}},mounted(){}};const wE=(0,p.Z)(dE,[["render",AP]]);var cE=wE,uE={components:{TablePaginationNoNums:sP,TableRow:cE},props:{items:{default:[]},loading:{type:Boolean,default:!0},from:{type:Number,default:1},to:{type:Number,default:1},perPage:{type:Number,default:10},total:{type:Number,default:0},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1},selected:{required:!0},deliveries:{required:!0}},data(){return{isAllSelected:!1}},computed:{selectedOrders:{get(){return this.selected},set(t){this.$emit("update:selected",t)}}},watch:{selected(t){0==t.length&&(this.isAllSelected=!1)}},methods:{handleSelectedAllChange(t){t.target.checked?(this.$emit("update:selected",[...this.items.map((t=>t.id))]),this.isAllSelected=!0):(this.$emit("update:selected",[]),this.isAllSelected=!1)}}};const pE=(0,p.Z)(uE,[["render",jL]]);var mE=pE;const gE={class:"tw-mt-6 tw-mb-4 md:tw-flex md:tw-items-center md:tw-justify-between"},hE={class:"tw-inline-flex tw-overflow-hidden tw-bg-white tw-border tw-divide-x tw-rounded-lg darkx:tw-bg-gray-900 rtl:tw-flex-row-reverse darkx:tw-border-gray-700 darkx:tw-divide-gray-700"},fE=["disabled"],vE=["disabled"],yE=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M9 5a1 1 0 1 0 0 2a1 1 0 0 0 0-2zM6.17 5a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 0 1 0-2h1.17zM15 11a1 1 0 1 0 0 2a1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-1.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h7.17zM9 17a1 1 0 1 0 0 2a1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h1.17z"})],-1),xE=[yE],bE=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M10 2c-.6 0-1 .4-1 1v18c0 .6.4 1 1 1s1-.4 1-1V3c0-.6-.4-1-1-1zM5 12c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1s1-.4 1-1v-8c0-.6-.4-1-1-1zm10-4c-.6 0-1 .4-1 1v12c0 .6.4 1 1 1s1-.4 1-1V9c0-.6-.4-1-1-1zm5 8c-.6 0-1 .4-1 1v4c0 .6.4 1 1 1s1-.4 1-1v-4c0-.6-.4-1-1-1z"})],-1),_E=[bE],kE=["disabled"],CE=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M15.9 1C12.1 1.1 9 4.2 9 8c0 3.9 3.1 7 7 7s7-3.1 7-7s-3.1-7-7.1-7c.1 0 0 0 0 0m.1 2c2.8 0 5 2.2 5 5s-2.2 5-5 5s-5-2.2-5-5s2.2-5 5-5m-1 1v5l3.6 2.2l.8-1.2l-2.9-1.7V4H15M4.6 12.8c1.4 2.8 3.8 5.2 6.6 6.6l2.2-2.2c.3-.3.7-.4 1-.2c1.1.4 2.3.6 3.6.6c.5 0 1 .5 1 1V22c0 .5-.5 1-1 1C8.6 23 1 15.4 1 6c0-.6.5-1 1-1h3.5c.6 0 1 .4 1 1c0 1.2.2 2.4.6 3.6c.1.4 0 .7-.2 1l-2.3 2.2"})],-1),DE=[CE],SE=["disabled"],zE=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 16 16"},[(0,s._)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4.75 10.75h-3m12.5-2c0 3-2.798 5.5-6.25 5.5c-3.75 0-6.25-3.5-6.25-3.5v3.5m9.5-9h3m-12.5 2c0-3 2.798-5.5 6.25-5.5c3.75 0 6.25 3.5 6.25 3.5v-3.5"})],-1),UE=[zE],LE=["disabled"],PE=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"m16.2 20.5l2.8-2.8V20h1v-4h-4v1h2.3l-2.8 2.8l.7.7ZM5 21q-.825 0-1.413-.588T3 19V5q0-.825.588-1.413T5 3h14q.825 0 1.413.588T21 5v6.7q-.475-.225-.975-.388T19 11.075V5H5v14h6.05q.075.55.238 1.05t.387.95H5Zm0-3v1V5v6.075V11v7Zm2-1h4.075q.075-.525.238-1.025t.362-.975H7v2Zm0-4h6.1q.8-.75 1.787-1.25T17 11.075V11H7v2Zm0-4h10V7H7v2Zm11 14q-2.075 0-3.538-1.463T13 18q0-2.075 1.463-3.538T18 13q2.075 0 3.538 1.463T23 18q0 2.075-1.463 3.538T18 23Z"})],-1),AE=[PE],WE={class:"tw-relative"},$E=["value"],EE=(0,s.uE)('<option value="5">5</option><option value="10">10</option><option value="20">20</option><option value="50">50</option><option value="100">100</option><option value="250">250</option><option value="500">500</option>',7),qE=[EE],TE=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),OE={class:"tw-relative tw-flex tw-items-center tw-mt-4 md:tw-mt-0"},VE=["value"],IE={class:"tw-overflow-hidden tw-col-span-1"},FE={class:"tw-overflow-hidden tw-col-span-1"},RE={class:"tw-overflow-hidden tw-col-span-1"};function jE(t,e,r,i,l,o){const n=(0,s.up)("FiltersWrapper"),d=(0,s.up)("IndexExport"),w=(0,s.up)("IndexStatistics");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",gE,[(0,s._)("div",hE,[(0,s._)("button",{class:(0,et.C_)([[l.showAll&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 hover:tw-bg-gray-100 sm:tw-text-sm darkx:tw-bg-gray-800 darkx:tw-text-gray-300"]),disabled:l.showAll,onClick:e[0]||(e[0]=t=>o.filterToday(!1))}," View all ",10,fE),(0,s._)("button",{title:"Orders Created Today",class:(0,et.C_)([[l.showToday&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"]),disabled:l.showToday,onClick:e[1]||(e[1]=t=>o.filterToday(!0))}," Today ",10,vE),(0,s._)("button",{title:"Show Filters Tab",onClick:e[2]||(e[2]=t=>l.showFilters=!l.showFilters),class:(0,et.C_)([[l.showFilters&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"])},xE,2),r.activeStatistics&&r.statistics?((0,s.wg)(),(0,s.iD)("button",{key:0,title:"Show Statistics Tab",onClick:e[3]||(e[3]=t=>l.showStatistics=!l.showStatistics),class:(0,et.C_)([[l.showStatistics&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"])},_E,2)):(0,s.kq)("",!0),(0,s._)("button",{title:"Show Reported Orders First",onClick:e[4]||(e[4]=(...t)=>o.showReportedFirst&&o.showReportedFirst(...t)),disabled:r.loading,class:(0,et.C_)([[r.filters.reported_first&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"])},DE,10,kE),(0,s._)("button",{title:"Refresh",onClick:e[5]||(e[5]=e=>t.$emit("fresh")),disabled:r.loading,class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},UE,8,SE),(0,s._)("button",{title:"Show Export Options",onClick:e[6]||(e[6]=t=>l.showExport=!l.showExport),class:(0,et.C_)([[l.showExport&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"]),disabled:r.loading},AE,10,LE),(0,s._)("div",WE,[(0,s._)("select",{onChange:e[7]||(e[7]=(...t)=>o.handlePerPageChange&&o.handlePerPageChange(...t)),value:r.perPage,class:"tw-h-full tw-px-5 tw-py-2 tw-w-20 focus:tw-outline-none tw-text-xs tw-font-medium tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},qE,40,$E),TE])]),(0,s._)("div",OE,[(0,s._)("input",{type:"text",placeholder:"Search",value:r.search,onInput:e[8]||(e[8]=e=>t.$emit("update:search",e.target.value)),onKeyup:e[9]||(e[9]=(0,a.D2)((e=>t.$emit("filter")),["enter"])),class:"tw-block tw-w-full tw-py-1.5 tw-pl-5 tw-text-gray-700 tw-bg-white tw-border tw-border-solid tw-border-gray-200 tw-rounded-lg md:tw-w-80 placeholder-gray-400/70 tw-pr-11 rtl:tw-pr-11 rtl:tw-pl-5 darkx:tw-bg-gray-900 darkx:tw-text-gray-300 darkx:tw-border-gray-600 focus:tw-border-orange-400 darkx:focus:tw-border-orange-300 focus:tw-ring-orange-300 focus:tw-outline-none focus:tw-ring focus:tw-ring-opacity-40"},null,40,VE),(0,s._)("button",{onClick:e[10]||(e[10]=e=>t.$emit("filter")),class:"tw-absolute tw-right-0 tw-px-2 tw-py-1 tw-w-[38px] tw-h-[36px] tw-border-solid tw-rounded-r-lg tw-border-l tw-text-orange-500/80 tw-border-orange-500/20 hover:tw-bg-orange-500/10 hover:tw-border-orange-500/70 tw-duration-300 tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(st.t,{size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-magnify")])),_:1})])])]),(0,s._)("div",{class:(0,et.C_)([[l.showFilters?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",IE,[(0,s.Wm)(n,{onClear:e[11]||(e[11]=e=>t.$emit("clear")),onFilter:e[12]||(e[12]=e=>t.$emit("filter")),filters:r.filters,onUpdate:e[13]||(e[13]=e=>t.$emit("update:filters",e))},null,8,["filters"])])],2),(0,s._)("div",{class:(0,et.C_)([[l.showExport?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",FE,[(0,s.Wm)(d,{filters:r.filters},null,8,["filters"])])],2),r.statistics?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,et.C_)([[l.showStatistics?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",RE,[(0,s.Wm)(w,{statistics:r.statistics},null,8,["statistics"])])],2)):(0,s.kq)("",!0)])}const NE={class:"tw-mb-4"},ME={class:"tw-grid tw-grid-cols-12 tw-gap-4"},HE={class:"tw-h-full tw-w-full tw-p-3 tw-rounded tw-space-y-2 tw-border tw-border-solid"},YE={class:"tw-flex tw-items-center tw-justify-between"},ZE={class:"tw-text-xl tw-font-bold tw-text-gray-900"},KE={class:"tw-px-2 tw-py-1 tw-font-medium tw-text-sm tw-rounded tw-bg-white tw-text-gray-900"};function BE(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",NE,[(0,s._)("div",ME,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.visible,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"md:tw-col-span-3 tw-col-span-12"},[(0,s._)("div",HE,[(0,s._)("p",{class:(0,et.C_)(["tw-text-sm tw-font-bold tw-w-fit tw-h-fit tw-px-2 tw-rounded",[l.getConfirmation(t.confirmation).textLight,l.getConfirmation(t.confirmation).bgLight]])},(0,et.zw)(t.name),3),(0,s._)("div",YE,[(0,s._)("span",ZE,(0,et.zw)(t.total),1),(0,s._)("span",KE,(0,et.zw)(t.percent)+"%",1)])])])))),128))])])}var QE={props:{statistics:{required:!0}},computed:{visible(){return this.statistics.show.includes("*")?this.statistics.data:this.statistics.data.filter((t=>this.statistics.show.includes(t.followup_confirmation)))}},methods:{getConfirmation(t){return qn.find((e=>e.value==t))}}};const GE=(0,p.Z)(QE,[["render",BE]]);var JE=GE;const XE={class:"tw-mb-4"},tq={class:"tw-flex tw-items-center tw-gap-2"},eq=["disabled"],rq=(0,s._)("span",null,"Select Filtered",-1),aq={class:"tw-flex tw-justify-end"},sq=["disabled"];function iq(t,e,r,a,i,l){const o=(0,s.up)("download-csv");return(0,s.wg)(),(0,s.iD)("div",XE,[(0,s._)("div",tq,[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>l.handleExportFiltered&&l.handleExportFiltered(...t)),disabled:i.isLoadingFiltered,class:"tw-py-2 tw-px-7 tw-flex tw-items-center tw-rounded tw-text-sm tw-bg-orange-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-orange-600 dark:tw-border-neutral-900 dark:hover:tw-border-orange-500 hover:tw-bg-orange-500/80 dark:hover:tw-bg-orange-400 tw-duration-300 tw-text-white"},[(0,s.Wm)(st.t,{size:"small",class:(0,et.C_)(["tw-duration-300 tw-animate-spin tw-overflow-hidden tw-max-w-0 tw-mr-0",[i.isLoadingFiltered&&"!tw-max-w-[50px] !tw-mr-3"]])},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1},8,["class"]),rq],8,eq)]),(0,s._)("div",aq,[(0,s._)("button",{disabled:i.readyToDownload,class:(0,et.C_)([[!i.readyToDownload&&"!tw-bg-gray-200 !tw-cursor-not-allowed hover:tw-bg-gray-200 !tw-text-gray-600"],"tw-py-2 tw-px-7 tw-flex tw-items-center tw-cursor-pointer tw-rounded tw-text-sm tw-bg-emerald-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-emerald-600 dark:tw-border-neutral-900 dark:hover:tw-border-emerald-500 hover:tw-bg-emerald-500/80 dark:hover:tw-bg-emerald-400 tw-duration-300 tw-text-white"])},[(0,s.Wm)(o,{delimiter:";",data:i.toImport},{default:(0,s.w5)((()=>[(0,s.Uk)(" Download ")])),_:1},8,["data"])],10,sq)])])}var lq={props:{filters:{required:!0}},data(){return{isLoadingFiltered:!1,isLoading:!1,toImport:[],readyToDownload:!1}},watch:{filters:{deep:!0,handler(){this.readyToDownload=!1}}},methods:{handleExportFiltered(){this.isLoadingFiltered=!0,this.readyToDownload=!1,sL["export"]({filters:this.filters}).then((t=>{if("SUCCESS"==t.data.code){const e=t.data.data.orders;this.importOrders(e),this.readyToDownload=!0}})).catch(this.$handleApiError).finally((()=>{this.isLoadingFiltered=!1}))},importOrders(t){const e=t.map((t=>{const e=Object.keys(t);return e.forEach((e=>{t[e]=t[e]?t[e]:"NONE"})),t})),r=",",a=e.map((t=>(delete t["factorisation_id"],delete t["note_d"],delete t["cmd"],delete t["product_name"],delete t["is_done"],delete t["factorisation"],delete t["doubles"],delete t["is_double"],delete t["has_doubles"],delete t["double"],{...t,products:t.items.map((t=>`id=${t.id}${r}price=${t.price?t.price:0}${r}name=${t.product?.name}${r}ref=${t.product?.ref}${r}variation_id=${t.product_variation_id}${r}size=${t.product_variation.size?t.product_variation.size:"DEFAULT"}${r}color=${t.product_variation.color?t.product_variation.color:"DEFAULT"}${r}`))})));this.toImport=a.map((t=>(delete t["items"],t)))}}};const oq=(0,p.Z)(lq,[["render",iq]]);var nq=oq;const dq={class:"tw-mb-4"},wq={class:"tw-grid tw-grid-cols-12 tw-gap-4 tw-p-1"},cq={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},uq=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Created From",-1),pq=["value"],mq={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},gq=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Created To",-1),hq=["value"],fq={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},vq=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Dropped From",-1),yq=["value"],xq={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},bq=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Dropped To",-1),_q=["value"],kq={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Cq=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),Dq=["value"],Sq=(0,s._)("option",{value:"all",selected:""},"All",-1),zq=["value"],Uq={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Lq=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Delivery",-1),Pq=["value"],Aq=(0,s._)("option",{value:"all",selected:""},"All",-1),Wq=["value"],$q={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Eq=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Upsell",-1),qq=["value"],Tq=(0,s._)("option",{value:"all",selected:""},"All",-1),Oq=(0,s._)("option",{value:"oui",class:"tw-capitalize"},"Yes",-1),Vq=(0,s._)("option",{value:"non",class:"tw-capitalize"},"Non",-1),Iq=[Tq,Oq,Vq],Fq={class:"tw-col-span-12 tw-flex tw-justify-end tw-gap-2"},Rq=(0,s._)("svg",{class:"tw-stroke-gray-500",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59L7.11 5.7A.996.996 0 1 0 5.7 7.11L10.59 12L5.7 16.89a.996.996 0 1 0 1.41 1.41L12 13.41l4.89 4.89a.996.996 0 1 0 1.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"})],-1),jq=(0,s._)("span",null,"Clear",-1),Nq=[Rq,jq],Mq=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[(0,s._)("path",{fill:"#fff",d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})],-1),Hq=(0,s._)("span",null,"Filter",-1),Yq=[Mq,Hq];function Zq(t,e,r,a,i,l){(0,s.up)("DateFilter");const o=(0,s.up)("ProductFilter"),n=(0,s.up)("AgentFilter"),d=(0,s.up)("AffectationFilter");return(0,s.wg)(),(0,s.iD)("div",dq,[(0,s._)("div",wq,[(0,s.kq)("",!0),(0,s._)("div",cq,[uq,(0,s._)("input",{value:r.filters.created_from,type:"date",onChange:e[1]||(e[1]=e=>t.$emit("update",{...r.filters,created_from:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,pq)]),(0,s._)("div",mq,[gq,(0,s._)("input",{value:r.filters.created_to,type:"date",onChange:e[2]||(e[2]=e=>t.$emit("update",{...r.filters,created_to:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,hq)]),(0,s._)("div",fq,[vq,(0,s._)("input",{value:r.filters.dropped_from,type:"date",onChange:e[3]||(e[3]=e=>t.$emit("update",{...r.filters,dropped_from:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,yq)]),(0,s._)("div",xq,[bq,(0,s._)("input",{value:r.filters.dropped_to,type:"date",onChange:e[4]||(e[4]=e=>t.$emit("update",{...r.filters,dropped_to:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,_q)]),(0,s.Wm)(o,{filters:r.filters,onUpdate:e[5]||(e[5]=e=>t.$emit("update",e))},null,8,["filters"]),(0,s.Wm)(n,{filters:r.filters,onUpdate:e[6]||(e[6]=e=>t.$emit("update",e))},null,8,["filters"]),(0,s._)("div",kq,[Cq,(0,s._)("select",{value:r.filters.confirmation,onChange:e[7]||(e[7]=e=>t.$emit("update",{...r.filters,confirmation:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[Sq,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,et.C_)([[t.text,null==t.value&&"!tw-text-green-500"],"tw-capitalize"]),value:t.value?t.value:"",key:t.value},(0,et.zw)(t.name),11,zq)))),128))],40,Dq)]),(0,s.Wm)(d,{filters:r.filters,onUpdate:e[8]||(e[8]=e=>t.$emit("update",e))},null,8,["filters"]),(0,s._)("div",Uq,[Lq,(0,s._)("select",{onChange:e[9]||(e[9]=e=>t.$emit("update",{...r.filters,delivery:e.target.value})),value:r.filters.delivery,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[Aq,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,et.C_)([[t.text,null==t.value&&"!tw-text-gray-500"],"tw-capitalize"]),value:t.value?t.value:"",key:t.id},(0,et.zw)(t.name),11,Wq)))),128))],40,Pq)]),(0,s._)("div",$q,[Eq,(0,s._)("select",{value:r.filters.upsell,onChange:e[10]||(e[10]=e=>t.$emit("update",{...r.filters,upsell:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},Iq,40,qq)]),(0,s._)("div",Fq,[(0,s._)("button",{onClick:e[11]||(e[11]=e=>t.$emit("clear")),class:"tw-flex tw-items-center tw-text-gray-500 tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-transition-colors tw-duration-200 tw-bg-gray-200 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-300 darkx:hover:tw-bg-gray-500 darkx:tw-bg-gray-600"},Nq),(0,s._)("button",{onClick:e[12]||(e[12]=e=>t.$emit("filter")),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},Yq)])])])}const Kq={class:"tw-text-sm tw-text-neutral-600"},Bq=["onClick"];function Qq(t,e,r,a,i,l){const o=(0,s.up)("VueDatePicker");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("span",Kq,(0,et.zw)(r.name),1),(0,s.Wm)(o,{modelValue:i.date,"onUpdate:modelValue":[e[0]||(e[0]=t=>i.date=t),l.onDateRangePicked],onCleared:l.cleared,format:i.dateFilterFormat,range:"","preset-ranges":i.presetRanges},{yearly:(0,s.w5)((({label:t,range:e,presetDateRange:r})=>[(0,s._)("span",{onClick:t=>r(e)},(0,et.zw)(t),9,Bq)])),_:1},8,["modelValue","onCleared","onUpdate:modelValue","format","preset-ranges"])])}var Gq={props:["name"],data(){return{date:["",""],dateFilterFormat:"yyyy-MM-dd",formattedStartDate:"",formattedEndDate:"",presetRanges:[{label:"Today",range:[new Date,new Date]},{label:"Yesterday",range:[(0,Oi.Z)(new Date,1),(0,Oi.Z)(new Date,1)]},{label:"This month",range:[(0,Vi.Z)(new Date),(0,Ii.Z)(new Date)]},{label:"Last month",range:[(0,Vi.Z)((0,Fi.Z)(new Date,1)),(0,Ii.Z)((0,Fi.Z)(new Date,1))]},{label:"This year",range:[(0,Ri.Z)(new Date),(0,ji.Z)(new Date)]}]}},watch:{date(){this.$emit("update:filter",[this.formattedStartDate,this.formattedEndDate])}},methods:{onDateRangePicked(t){t?(this.formattedStartDate=t[0],this.formattedEndDate=t[1]):(this.formattedStartDate=null,this.formattedEndDate=null)},cleared(){this.date=["",""]}}};const Jq=(0,p.Z)(Gq,[["render",Qq]]);var Xq=Jq;const tT={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},eT=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Affectation",-1),rT=["value"],aT=(0,s._)("option",{value:"all"},"All",-1),sT=(0,s._)("option",{value:""},"No Delivery",-1),iT=["value"];function lT(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",tT,[eT,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...r.filters,affectation:e.target.value})),value:r.filters.affectation,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[aT,sT,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,et.zw)(t.firstname)+" "+(0,et.zw)(t.lastname),9,iT)))),128))],40,rT)])}var oT={props:{filters:{required:!0}},data(){return{}},computed:{users(){return this.$store.getters["user/users"]},deliveries(){return this.fetched?this.users.filter((t=>"delivery"==t.role.name)):[]},fetched(){return this.$store.getters["user/fetched"]}}};const nT=(0,p.Z)(oT,[["render",lT]]);var dT=nT;const wT={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},cT=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Agent",-1),uT=["value"],pT=(0,s._)("option",{value:"all"},"All",-1),mT=(0,s._)("option",{value:""},"No Agent",-1),gT=["value"];function hT(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",wT,[cT,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...r.filters,agente_id:e.target.value})),value:r.filters.agente_id,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[pT,mT,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.agents,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,et.zw)(t.firstname)+" "+(0,et.zw)(t.lastname),9,gT)))),128))],40,uT)])}var fT={props:{filters:{required:!0}},data(){return{}},computed:{users(){return this.$store.getters["user/users"]},agents(){return this.fetched?this.users.filter((t=>"agente"==t.role.name)):[]},fetched(){return this.$store.getters["user/fetched"]}}};const vT=(0,p.Z)(fT,[["render",hT]]);var yT=vT;const xT={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},bT=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Product",-1),_T=["value"],kT=(0,s._)("option",{value:"all"},"All",-1),CT=["value"];function DT(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",xT,[bT,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...r.filters,product_id:e.target.value})),value:r.filters.product_id,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[kT,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.products,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,et.zw)(t.name),9,CT)))),128))],40,_T)])}var ST={props:{filters:{required:!0}},data(){return{}},computed:{products(){return this.$store.getters["product/products"]},fetched(){return this.$store.getters["product/fetched"]}},methods:{getProducts(){return sa.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}}};const zT=(0,p.Z)(ST,[["render",DT]]);var UT=zT,LT={components:{DateFilter:Xq,AffectationFilter:dT,AgentFilter:yT,ProductFilter:UT},props:{filters:{required:!0,default:{}}},data(){return{confirmations:qn,deliveries:Vn,dateFilter:["",""]}}};const PT=(0,p.Z)(LT,[["render",Zq]]);var AT=PT,WT={components:{IndexStatistics:JE,FiltersWrapper:AT,IndexExport:nq},props:{perPage:{type:Number},statistics:{default:null},activeStatistics:{type:Boolean,default:!1},loading:{default:!0},search:{default:""},filters:{required:!0}},data(){return{showFilters:!1,showStatistics:!1,showExport:!1,showAll:!0,showToday:!1}},methods:{handlePerPageChange(t){this.$emit("perPageChange",t.target.value)},showReportedFirst(){this.$emit("update:filters",{...this.filters,reported_first:!this.filters.reported_first}),this.$emit("filter")},filterToday(t){var e=null;t?(this.showAll=!1,this.showToday=!0,e=$P()(),e=e.format("YYYY-MM-DD")):(this.showAll=!0,this.showToday=!1),this.$emit("update:filters",{...this.filters,created_from:e,created_to:e}),this.$emit("filter")}},mounted(){}};const $T=(0,p.Z)(WT,[["render",jE]]);var ET=$T;const qT={class:"tw-mx-auto tw-w-[95%] md:tw-max-w-[800px] tw-overflow-hidden tw-h-fit dark:tw-bg-neutral-900 tw-bg-white tw-border tw-border-solid dark:tw-border-neutral-700 tw-border-neutral-300 tw-shadow-md tw-my-5 tw-rounded-lg"},TT=(0,s._)("div",{class:"tw-p-4 tw-text-lg tw-border-b tw-border-solid tw-font-medium tw-flex dark:tw-text-neutral-400 tw-text-neutral-500 tw-items-center tw-gap-4 dark:tw-bg-neutral-800 tw-bg-gray-50"}," Order Informations ",-1),OT={class:"tw-bg-white tw-p-4"},VT={class:"tw-grid tw-gap-6 tw-gap-y-5 tw-grid-cols-1 md:tw-grid-cols-2"},IT={class:"tw-col-span-2 md:tw-col-span-1"},FT=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Client Name",-1),RT={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},jT={class:"tw-col-span-2 md:tw-col-span-1"},NT=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Phone Number",-1),MT={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},HT={class:"tw-col-span-2 md:tw-col-span-1"},YT=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"City",-1),ZT={class:"tw-relative"},KT=(0,s._)("option",{value:null,disabled:""},"Choose a City",-1),BT=["value"],QT=["value"],GT=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),JT={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},XT={class:"tw-col-span-2 md:tw-col-span-1"},tO=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Address",-1),eO={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},rO={class:"tw-col-span-2"},aO=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),sO={class:"tw-relative"},iO=["value"],lO=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),oO={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},nO={key:0,class:"md:tw-col-span-1 tw-col-span-2"},dO=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Date",-1),wO={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},cO={key:1,class:"md:tw-col-span-1 tw-col-span-2"},uO=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Note",-1),pO={class:"tw-col-span-2"},mO=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Note",-1),gO={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},hO={class:"md:tw-col-span-1 tw-col-span-2"},fO={class:"md:tw-col-span-1 tw-col-span-2"},vO=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Upsell",-1),yO={class:"tw-relative"},xO=["value"],bO=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),_O={class:"tw-col-span-2"},kO={class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},CO={key:0,class:"tw-text-red-400 tw-text-xs"},DO={class:"tw-flex tw-justify-end tw-items-center tw-p-4 tw-gap-3 dark:tw-bg-neutral-900 tw-bg-gray-50 tw-border-t tw-border-solid"},SO=["disabled"],zO=(0,s._)("span",null,"Create",-1);function UO(t,e,r,i,l,o){const n=(0,s.up)("OrderAffectation"),d=(0,s.up)("OrderItems"),w=(0,s.up)("popup-new");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(w,{visible:r.visible,closeable:!1,onCancel:o.cancel},{default:(0,s.w5)((()=>[(0,s._)("div",qT,[TT,(0,s._)("div",OT,[(0,s._)("div",VT,[(0,s._)("div",IT,[FT,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.itemCopy.fullname=t),onInput:e[1]||(e[1]=t=>l.errors.fullname=null),type:"text",class:(0,et.C_)([[l.errors.fullname&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),placeholder:"John",required:""},null,34),[[a.nr,l.itemCopy.fullname]]),l.errors.fullname?((0,s.wg)(),(0,s.iD)("label",RT,(0,et.zw)(l.errors.fullname),1)):(0,s.kq)("",!0)]),(0,s._)("div",jT,[NT,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.itemCopy.phone=t),onInput:e[3]||(e[3]=t=>l.errors.phone=null),class:(0,et.C_)([[l.errors.phone&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"123-45-678",required:""},null,34),[[a.nr,l.itemCopy.phone]]),l.errors.phone?((0,s.wg)(),(0,s.iD)("label",MT,(0,et.zw)(l.errors.phone),1)):(0,s.kq)("",!0)]),(0,s._)("div",HT,[YT,(0,s._)("div",ZT,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.itemCopy.city=t),onChange:e[5]||(e[5]=t=>l.errors.city=null),class:(0,et.C_)([[l.errors.city&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 tw-pr-7"])},[KT,(0,s._)("option",{value:l.itemCopy.city,disabled:""},(0,et.zw)(l.itemCopy.city),9,BT),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,et.zw)(t.name),9,QT)))),128))],34),[[a.bM,l.itemCopy.city]]),GT]),l.errors.city?((0,s.wg)(),(0,s.iD)("label",JT,(0,et.zw)(l.errors.city),1)):(0,s.kq)("",!0)]),(0,s._)("div",XT,[tO,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>l.itemCopy.adresse=t),onInput:e[7]||(e[7]=t=>l.errors.adresse=null),class:(0,et.C_)([[l.errors.adresse&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"Address",required:""},null,34),[[a.nr,l.itemCopy.adresse]]),l.errors.adresse?((0,s.wg)(),(0,s.iD)("label",eO,(0,et.zw)(l.errors.adresse),1)):(0,s.kq)("",!0)]),(0,s._)("div",rO,[aO,(0,s._)("div",sO,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>l.itemCopy.confirmation=t),onChange:e[9]||(e[9]=t=>l.errors.confirmation=null),class:(0,et.C_)([[l.errors.confirmation&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,class:(0,et.C_)([t.text,!t.value&&"!tw-text-green-500"]),key:t.id},(0,et.zw)(t.name),11,iO)))),128))],34),[[a.bM,l.itemCopy.confirmation]]),lO]),l.errors.confirmation?((0,s.wg)(),(0,s.iD)("label",oO,(0,et.zw)(l.errors.confirmation),1)):(0,s.kq)("",!0)]),"reporter"==l.itemCopy.confirmation?((0,s.wg)(),(0,s.iD)("div",nO,[dO,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>l.itemCopy.reported_agente_date=t),onInput:e[11]||(e[11]=t=>l.errors.reported_agente_date=null),class:(0,et.C_)([[l.errors.reported_agente_date&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"date",required:""},null,34),[[a.nr,l.itemCopy.reported_agente_date]]),l.errors.reported_agente_date?((0,s.wg)(),(0,s.iD)("label",wO,(0,et.zw)(l.errors.reported_agente_date),1)):(0,s.kq)("",!0)])):(0,s.kq)("",!0),"reporter"==l.itemCopy.confirmation?((0,s.wg)(),(0,s.iD)("div",cO,[uO,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[12]||(e[12]=t=>l.itemCopy.reported_agente_note=t),rows:"1",class:"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500",placeholder:"Enter a note"},null,512),[[a.nr,l.itemCopy.reported_agente_note]])])):(0,s.kq)("",!0),(0,s._)("div",pO,[mO,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[13]||(e[13]=t=>l.itemCopy.note=t),onInput:e[14]||(e[14]=t=>l.errors.note=null),class:(0,et.C_)([[l.errors.note&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),rows:"3",placeholder:"Enter a note"},null,34),[[a.nr,l.itemCopy.note]]),l.errors.note?((0,s.wg)(),(0,s.iD)("label",gO,(0,et.zw)(l.errors.note),1)):(0,s.kq)("",!0)]),(0,s._)("div",hO,[(0,s.Wm)(n,{item:l.itemCopy,error:l.errors.affectation,"onUpdate:error":e[15]||(e[15]=t=>l.errors.affectation=t),affectation:l.itemCopy.affectation,"onUpdate:affectation":e[16]||(e[16]=t=>l.itemCopy.affectation=t)},null,8,["item","error","affectation"])]),(0,s._)("div",fO,[vO,(0,s._)("div",yO,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[17]||(e[17]=t=>l.itemCopy.upsell=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.upsells,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,et.C_)([t.text]),value:t.value,key:t.id},(0,et.zw)(t.name),11,xO)))),128))],512),[[a.bM,l.itemCopy.upsell]]),bO])]),(0,s._)("div",_O,[(0,s._)("label",kO,[(0,s.Uk)("Order Items "),l.errors.items?((0,s.wg)(),(0,s.iD)("span",CO," # "+(0,et.zw)(l.errors.items),1)):(0,s.kq)("",!0)]),(0,s._)("div",null,[(0,s.Wm)(d,{order:l.itemCopy,error:l.errors.items,products:l.products,"products-fetched":l.products_fetched,items:l.itemCopy.items,"onUpdate:items":e[18]||(e[18]=t=>l.itemCopy.items=t)},null,8,["order","error","products","products-fetched","items"])])])])]),(0,s._)("div",DO,[(0,s._)("button",{onClick:e[19]||(e[19]=(...t)=>o.cancel&&o.cancel(...t)),class:"tw-py-2 tw-px-7 tw-rounded tw-text-sm tw-border tw-border-solid tw-border-tansparent dark:tw-border-neutral-900 hover:tw-border-neutral-400 dark:hover:tw-border-neutral-500 hover:tw-bg-gray-300 tw-bg-gray-200 dark:tw-bg-neutral-600 tw-duration-300 tw-text-neutral-900 dark:tw-text-neutral-300"}," Cancel "),(0,s._)("button",{onClick:e[20]||(e[20]=(...t)=>o.handleCreate&&o.handleCreate(...t)),disabled:l.isLoading,class:"tw-py-2 tw-px-7 tw-flex tw-items-center tw-rounded tw-text-sm tw-bg-orange-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-orange-600 dark:tw-border-neutral-900 dark:hover:tw-border-orange-500 hover:tw-bg-orange-500/80 dark:hover:tw-bg-orange-400 tw-duration-300 tw-text-white"},[(0,s.Wm)(st.t,{size:"small",class:(0,et.C_)(["tw-duration-300 tw-animate-spin tw-overflow-hidden tw-max-w-0 tw-mr-0",[l.isLoading&&"!tw-max-w-[50px] !tw-mr-3"]])},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1},8,["class"]),zO],8,SO)])])])),_:1},8,["visible","onCancel"])])}const LO=(t,e)=>{t.$alert({title:"Created Successfully",type:"success"}),console.log(e),t.isLoading=!1,t.cancel(),t.errors={}},PO=(t,e)=>{t.$alert({title:e.message,type:"error"}),"VALIDATION_ERROR"==e.code&&(t.errors=e.errors),t.isLoading=!1},AO=(t,e)=>{t.isLoading=!0,t.errors={},sL.create(e).then((e=>LO(t,e.data))).catch((e=>PO(t,e.response.data))).finally((()=>t.isLoading=!1))};var WO={components:{OrderItems:NW,OrderAffectation:s$},props:{visible:{required:!0}},data(){return{confirmations:qn,upsells:On,isLoading:!1,products_fetched:null,products:null,itemCopy:null,errors:{fullname:null,phone:null,city:null,adresse:null,note:null,reported_agente_date:null,affectation:null,items:null}}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{handleCreate(){const t=RA(this,this.itemCopy);if(!t)return!1;AO(this,this.itemCopy)},cancel(){if(this.isLoading)return!1;this.$emit("update:visible",!1)},getProducts(){this.products_fetched=!1,sa.allForOrder().then((t=>{"SUCCESS"==t.data.code?this.products=t.data.data.products:this.products=[],this.products_fetched=!0})).catch(this.$handleApiError)}},mounted(){this.itemCopy={confirmation:null,upsell:null,items:[]},this.getProducts()}};const $O=(0,p.Z)(WO,[["render",UO]]);var EO=$O;const qO={class:"tw-mb-4"},TO={class:"tw-w-full tw-p-3 tw-py-2 tw-rounded-lg tw-bg-gray-50 tw-border tw-border-solid"},OO={class:"tw-flex tw-items-center tw-gap-2 tw-justify-between"},VO={class:"tw-flex tw-items-center tw-gap-2"},IO={class:"tw-text-sm tw-px-2 tw-w-fit tw-bg-orange-500 tw-aspect-auto tw-text-white tw-rounded"},FO=(0,s._)("p",{class:"tw-font-bold tw-text-sm"}," Selected",-1),RO={class:"tw-flex tw-items-center tw-gap-2"},jO=(0,s._)("svg",{class:"tw-stroke-gray-400",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59L7.11 5.7A.996.996 0 1 0 5.7 7.11L10.59 12L5.7 16.89a.996.996 0 1 0 1.41 1.41L12 13.41l4.89 4.89a.996.996 0 1 0 1.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"})],-1),NO=(0,s._)("span",null," Clear Selection ",-1),MO=[jO,NO],HO=(0,s._)("svg",{class:"tw-stroke-gray-400",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 20 20"},[(0,s._)("g",{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"},[(0,s._)("path",{d:"M8.232 11.768A2.493 2.493 0 0 0 10 12.5c.672 0 1.302-.267 1.768-.732A2.493 2.493 0 0 0 12.5 10c0-.672-.267-1.302-.732-1.768A2.493 2.493 0 0 0 10 7.5c-.672 0-1.302.267-1.768.732A2.493 2.493 0 0 0 7.5 10c0 .672.267 1.302.732 1.768Zm2.829-.707c-.28.28-.657.439-1.061.439c-.404 0-.78-.16-1.06-.44S8.5 10.405 8.5 10s.16-.78.44-1.06s.656-.44 1.06-.44s.78.16 1.06.44s.44.656.44 1.06s-.16.78-.44 1.06Z"}),(0,s._)("path",{d:"m14.216 3.773l-1.27.714a6.213 6.213 0 0 0-1.166-.48l-.47-1.414a.5.5 0 0 0-.474-.343H9.06a.5.5 0 0 0-.481.365l-.392 1.403a6.214 6.214 0 0 0-1.164.486L5.69 3.835a.5.5 0 0 0-.578.094L3.855 5.185a.5.5 0 0 0-.082.599l.714 1.27c-.199.37-.36.76-.48 1.166l-1.414.47a.5.5 0 0 0-.343.474v1.777a.5.5 0 0 0 .365.481l1.403.392c.122.405.285.794.486 1.164l-.669 1.333a.5.5 0 0 0 .094.578l1.256 1.256a.5.5 0 0 0 .599.082l1.27-.714c.37.199.76.36 1.166.48l.47 1.414a.5.5 0 0 0 .474.343h1.777a.5.5 0 0 0 .481-.365l.392-1.403a6.21 6.21 0 0 0 1.164-.486l1.333.669a.5.5 0 0 0 .578-.093l1.256-1.257a.5.5 0 0 0 .082-.599l-.714-1.27c.199-.37.36-.76.48-1.166l1.414-.47a.5.5 0 0 0 .343-.474V9.06a.5.5 0 0 0-.365-.481l-1.403-.392a6.208 6.208 0 0 0-.486-1.164l.669-1.333a.5.5 0 0 0-.093-.578l-1.257-1.256a.5.5 0 0 0-.599-.082Zm-1.024 1.724l1.184-.667l.733.733l-.627 1.25a.5.5 0 0 0 .019.482c.265.44.464.918.59 1.418a.5.5 0 0 0 .35.36l1.309.366v1.037l-1.327.44a.5.5 0 0 0-.328.354a5.216 5.216 0 0 1-.585 1.42a.5.5 0 0 0-.007.502l.667 1.184l-.733.733l-1.25-.627a.5.5 0 0 0-.482.019c-.44.265-.918.464-1.418.59a.5.5 0 0 0-.36.35l-.366 1.309H9.525l-.44-1.327a.5.5 0 0 0-.355-.328a5.217 5.217 0 0 1-1.42-.585a.5.5 0 0 0-.502-.007l-1.184.667l-.733-.733l.627-1.25a.5.5 0 0 0-.019-.482a5.216 5.216 0 0 1-.59-1.418a.5.5 0 0 0-.35-.36l-1.309-.366V9.525l1.327-.44a.5.5 0 0 0 .327-.355c.125-.5.323-.979.586-1.42a.5.5 0 0 0 .007-.502L4.83 5.624l.733-.733l1.25.627a.5.5 0 0 0 .482-.019c.44-.265.918-.464 1.418-.59a.5.5 0 0 0 .36-.35l.366-1.309h1.037l.44 1.327a.5.5 0 0 0 .354.327c.5.125.979.323 1.42.586a.5.5 0 0 0 .502.007Z"})])],-1),YO=(0,s._)("span",null," Actions ",-1),ZO=[HO,YO],KO={key:0};function BO(t,e,r,a,i,l){const o=(0,s.up)("BulkPopup");return(0,s.wg)(),(0,s.iD)("div",qO,[(0,s._)("div",TO,[(0,s._)("div",OO,[(0,s._)("div",VO,[(0,s._)("div",IO,(0,et.zw)(r.selected.length),1),FO]),(0,s._)("div",RO,[(0,s._)("button",{onClick:e[0]||(e[0]=e=>t.$emit("update:selected",[])),class:"tw-bg-white tw-flex tw-items-center tw-gap-1 tw-py-1.5 hover:tw-shadow-none tw-duration-200 tw-px-3 tw-text-sm tw-rounded tw-border tw-border-solid tw-border-gray-300 tw-shadow-sm"},MO),(0,s._)("button",{onClick:e[1]||(e[1]=t=>i.popup=!0),class:"tw-bg-white tw-flex tw-items-center tw-gap-1 tw-py-1.5 hover:tw-shadow-none tw-duration-200 tw-px-3 tw-text-sm tw-rounded tw-border tw-border-solid tw-border-gray-300 tw-shadow-sm"},ZO)])])]),i.popup?((0,s.wg)(),(0,s.iD)("div",KO,[(0,s.Wm)(o,{selected:r.selected,onUpdate:l.handleUpdate,visible:i.popup,"onUpdate:visible":e[2]||(e[2]=t=>i.popup=t)},null,8,["selected","onUpdate","visible"])])):(0,s.kq)("",!0)])}const QO={class:"tw-mx-auto tw-w-[95%] md:tw-max-w-[800px] tw-overflow-hidden tw-h-fit dark:tw-bg-neutral-900 tw-bg-white tw-border tw-border-solid dark:tw-border-neutral-700 tw-border-neutral-300 tw-shadow-md tw-my-5 tw-rounded-lg"},GO={class:"tw-p-4 tw-text-lg tw-border-b tw-border-solid tw-font-medium tw-flex dark:tw-text-neutral-400 tw-text-neutral-500 tw-items-center tw-gap-4 dark:tw-bg-neutral-800 tw-bg-gray-50"},JO=(0,s._)("span",null,"Quick Actions",-1),XO={class:"tw-px-2 tw-w-fit tw-bg-orange-500 tw-aspect-auto tw-text-white tw-rounded"},tV={class:"tw-bg-white tw-p-4"},eV={class:"tw-grid tw-gap-6 tw-gap-y-5 tw-grid-cols-1 md:tw-grid-cols-2"},rV={class:"tw-col-span-2 md:tw-col-span-1"},aV={key:0,class:"tw-col-span-2 md:tw-col-span-1"},sV={class:"tw-flex tw-justify-end tw-items-center tw-p-4 tw-gap-3 dark:tw-bg-neutral-900 tw-bg-gray-50 tw-border-t tw-border-solid"},iV=(0,s._)("span",null,"Apply",-1);function lV(t,e,r,a,i,l){const o=(0,s.up)("BulkSelectAction"),n=(0,s.up)("BulkDeliveryAction"),d=(0,s.up)("popup-new");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(d,{visible:r.visible,closeable:!i.isLoading,onCancel:l.cancel},{default:(0,s.w5)((()=>[(0,s._)("div",QO,[(0,s._)("div",GO,[JO,(0,s._)("span",XO,(0,et.zw)(r.selected.length),1)]),(0,s._)("div",tV,[(0,s._)("div",eV,[(0,s._)("div",rV,[(0,s.Wm)(o,{action:i.action,"onUpdate:action":e[0]||(e[0]=t=>i.action=t)},null,8,["action"])]),2==i.action?((0,s.wg)(),(0,s.iD)("div",aV,[(0,s.Wm)(n,{value:i.value,"onUpdate:value":e[1]||(e[1]=t=>i.value=t)},null,8,["value"])])):(0,s.kq)("",!0)])]),(0,s._)("div",sV,[(0,s._)("button",{onClick:e[2]||(e[2]=(...t)=>l.cancel&&l.cancel(...t)),class:"tw-py-2 tw-px-7 tw-rounded tw-text-sm tw-border tw-border-solid tw-border-tansparent dark:tw-border-neutral-900 hover:tw-border-neutral-400 dark:hover:tw-border-neutral-500 hover:tw-bg-gray-300 tw-bg-gray-200 dark:tw-bg-neutral-600 tw-duration-300 tw-text-neutral-900 dark:tw-text-neutral-300"}," Cancel "),(0,s._)("button",{onClick:e[3]||(e[3]=(...t)=>l.execute&&l.execute(...t)),class:"tw-py-2 tw-px-7 tw-flex tw-items-center tw-rounded tw-text-sm tw-bg-orange-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-orange-600 dark:tw-border-neutral-900 dark:hover:tw-border-orange-500 hover:tw-bg-orange-500/80 dark:hover:tw-bg-orange-400 tw-duration-300 tw-text-white"},[(0,s.Wm)(st.t,{size:"small",class:(0,et.C_)(["tw-duration-300 tw-animate-spin tw-overflow-hidden tw-max-w-0 tw-mr-0",[i.isLoading&&"!tw-max-w-[50px] !tw-mr-3"]])},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1},8,["class"]),iV])])])])),_:1},8,["visible","closeable","onCancel"])])}const oV=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Action",-1),nV={class:"tw-relative"},dV=["value"],wV=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1);function cV(t,e,r,i,l,o){return(0,s.wg)(),(0,s.iD)("div",null,[oV,(0,s._)("div",nV,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.vaction=t),class:(0,et.C_)([[!1],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 tw-pr-7"])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.actions,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,et.zw)(t.name),9,dV)))),128))],512),[[a.bM,o.vaction]]),wV]),(0,s.kq)("",!0)])}var uV={props:{action:{required:!0}},data(){return{actions:[{id:1,name:"Select Action"},{id:2,name:"Delivery Status"}]}},computed:{vaction:{get(){return this.action},set(t){this.$emit("update:action",t)}}}};const pV=(0,p.Z)(uV,[["render",cV]]);var mV=pV;const gV=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Value",-1),hV={class:"tw-relative"},fV=(0,s._)("option",{disabled:"",value:"not-selected"},"Select a value",-1),vV=["value"],yV=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1);function xV(t,e,r,i,l,o){return(0,s.wg)(),(0,s.iD)("div",null,[gV,(0,s._)("div",hV,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.vvalue=t),class:(0,et.C_)([[!1],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 tw-pr-7"])},[fV,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.statuses,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,et.C_)([t.text]),value:t.value,key:t.id},(0,et.zw)(t.name),11,vV)))),128))],512),[[a.bM,o.vvalue]]),yV]),(0,s.kq)("",!0)])}var bV={props:{value:{required:!0}},data(){return{statuses:Vn}},computed:{vvalue:{get(){return this.value},set(t){this.$emit("update:value",t)}}}};const _V=(0,p.Z)(bV,[["render",xV]]);var kV=_V;class CV{async execute(t){return await $.getCookie(),A.post("api/v1/bulk/execute",t)}}var DV=new CV,SV=(t,e)=>{t.isLoading=!0,DV.execute(e).then((e=>zV(t,e.data))).catch(t.$handleApiError).finally((()=>{t.isLoading=!1}))};const zV=(t,e)=>{"SUCCESS"==e.code&&(t.$alert({title:"Updated Successfully",type:"success"}),t.$emit("update:visible",!1),t.$emit("update"))};var UV={components:{BulkSelectAction:mV,BulkDeliveryAction:kV},props:{visible:{required:!0},selected:{required:!0}},data(){return{isLoading:!1,action:1,value:"not-selected"}},watch:{action(){this.value="not-selected"}},methods:{cancel(){this.$emit("update:visible",!1)},execute(){if(1==this.action)return this.$alert({title:"Select action",type:"info"}),!1;if("not-selected"==this.value)return this.$alert({title:"Select value",type:"info"}),!1;const t={action:this.action,value:this.value,selected:this.selected};SV(this,t)}}};const LV=(0,p.Z)(UV,[["render",lV]]);var PV=LV,AV={components:{BulkPopup:PV},props:{selected:{required:!0}},data(){return{popup:!1}},methods:{handleUpdate(){this.$emit("update")}}};const WV=(0,p.Z)(AV,[["render",BO]]);var $V=WV,EV={components:{IndexTable:mE,IndexFilters:ET,CreatePopup:EO,BulkActions:$V},data(){return{fetching:!0,create_popup:!1,items:[],selected:[],deliveries:{fetched:!1,items:[]},statistics:null,first_page_url:null,lase_page_url:null,next_page_url:null,prev_page_url:null,last_page:1,from:1,to:1,total:0,totalOrders:0,links:null,search:"",sort_by:"created_at",sort_order:"desc",per_page:10,current_page:1,filters:{created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"all",product_id:"all",delivery:"all",reported_first:!1}}},methods:{paginateOrders(){const t="?page="+this.current_page,e={sort_by:this.sort_by,sort_order:this.sort_order,per_page:this.per_page,current_page:this.current_page,search:this.search,filters:this.filters};return this.fetching=!0,sL.paginate(t,e).then((({data:t})=>{const e=t.data.orders;this.setOptions(e),this.statistics=this.search?this.statistics:t.data.statistics})).then((()=>{this.fetching=!1}))},setOptions(t){this.items=t.data,this.first_page_url=Qi(t.first_page_url),this.lase_page_url=Qi(t.last_page_url),this.next_page_url=Qi(t.next_page_url),this.prev_page_url=Qi(t.prev_page_url),this.last_page=parseInt(t.last_page),this.from=parseInt(t.from),this.to=parseInt(t.to),this.per_page=parseInt(t.per_page),this.total=parseInt(t.total),this.totalOrders=this.search?this.totalOrders:parseInt(t.total),this.links=t.links},handleClearFilters(){this.filters={created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"all",product_id:"all",delivery:"all",reported_first:!1},this.handlePageChange(1)},handleBulkUpdate(){this.selected=[],this.paginateOrders()},handleItemUpdate(t){this.items=this.items.map((e=>e.id==t.id?t:e))},handlePageChange(t){this.current_page=t,this.paginateOrders()},handlePerPageChange(t){this.per_page=parseInt(t),this.handlePageChange(1)},handleSortOrderChange(){this.sort_order="asc"==this.sort_order?"desc":"asc",this.paginateOrders()},getDeliveries(){this.deliveries.fetched=!1,X.allDeliveries().then((t=>{"SUCCESS"==t?.data.code&&(this.deliveries.items=t.data.data.deliveries,this.deliveries.fetched=!0)})).catch(this.$handleApiError)}},mounted(){this.paginateOrders(),this.getDeliveries()}};const qV=(0,p.Z)(EV,[["render",rL]]);var TV=qV;const OV={class:"py-5 px-2 tw-border tw-bg-white tw-w-full tw-rounded-md tw-mb-5"},VV={class:"tw-px-3"},IV={class:"tw-flex tw-items-center tw-justify-between tw-flex-wrap"},FV={class:"tw-flex tw-items-center tw-gap-x-3"},RV=(0,s._)("h2",{class:"tw-text-lg tw-font-medium tw-text-gray-800 darkx:tw-text-white"}," Orders ",-1),jV={class:"tw-px-3 tw-py-1 tw-text-xs tw-text-emerald-600 tw-bg-emerald-100 tw-rounded-full darkx:tw-bg-gray-800 darkx:tw-text-orange-400"},NV=(0,s._)("p",{class:"tw-mt-1 tw-text-sm tw-text-gray-500 darkx:tw-text-gray-300"}," These orders have needs to reconfirmed. ",-1),MV={class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-3"},HV=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",width:"16",height:"16",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),YV=(0,s._)("span",null,"Create",-1),ZV=[HV,YV],KV={class:"tw-overflow-hidden tw-col-span-1"},BV={key:0};function QV(t,e,r,a,i,l){const o=(0,s.up)("IndexFilters"),n=(0,s.up)("BulkActions"),d=(0,s.up)("IndexTable"),w=(0,s.up)("CreatePopup");return(0,s.wg)(),(0,s.iD)("div",OV,[(0,s._)("section",VV,[(0,s._)("div",IV,[(0,s._)("div",null,[(0,s._)("div",FV,[RV,(0,s._)("span",jV,(0,et.zw)(i.totalOrders)+" order",1)]),NV]),(0,s._)("div",MV,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.create_popup=!0),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},ZV)])]),(0,s.Wm)(o,{search:i.search,"onUpdate:search":e[1]||(e[1]=t=>i.search=t),filters:i.filters,"onUpdate:filters":e[2]||(e[2]=t=>i.filters=t),onFilter:e[3]||(e[3]=t=>l.handlePerPageChange(i.per_page)),onClear:l.handleClearFilters,onPerPageChange:l.handlePerPageChange,onFresh:l.paginateOrders,loading:i.fetching,statistics:i.statistics,"per-page":i.per_page,"active-statistics":""},null,8,["search","filters","onClear","onPerPageChange","onFresh","loading","statistics","per-page"]),(0,s._)("div",{class:(0,et.C_)([[i.selected.length>0?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",KV,[(0,s.Wm)(n,{onUpdate:l.handleBulkUpdate,selected:i.selected,"onUpdate:selected":e[4]||(e[4]=t=>i.selected=t)},null,8,["onUpdate","selected"])])],2),(0,s._)("div",null,[(0,s.Wm)(d,{selected:i.selected,"onUpdate:selected":e[5]||(e[5]=t=>i.selected=t),onUpdate:l.handleItemUpdate,onPageChange:l.handlePageChange,onSortOrder:l.handleSortOrderChange,loading:i.fetching,from:i.from,to:i.to,"last-page":i.last_page,"per-page":i.per_page,total:i.total,"current-page":i.current_page,items:i.items,deliveries:i.deliveries},null,8,["selected","onUpdate","onPageChange","onSortOrder","loading","from","to","last-page","per-page","total","current-page","items","deliveries"])]),i.create_popup?((0,s.wg)(),(0,s.iD)("div",BV,[(0,s.Wm)(w,{visible:i.create_popup,"onUpdate:visible":e[6]||(e[6]=t=>i.create_popup=t)},null,8,["visible"])])):(0,s.kq)("",!0)])])}var GV={components:{IndexTable:mE,IndexFilters:ET,CreatePopup:EO,BulkActions:$V},data(){return{fetching:!0,create_popup:!1,items:[],selected:[],deliveries:{fetched:!1,items:[]},statistics:null,first_page_url:null,lase_page_url:null,next_page_url:null,prev_page_url:null,last_page:1,from:1,to:1,total:0,totalOrders:0,links:null,search:"",sort_by:"created_at",sort_order:"desc",per_page:10,current_page:1,filters:{created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"confirmer",product_id:"all",delivery:"dispatch",reported_first:!1}}},methods:{paginateOrders(){const t="?page="+this.current_page,e={sort_by:this.sort_by,sort_order:this.sort_order,per_page:this.per_page,current_page:this.current_page,search:this.search,filters:this.filters};return this.fetching=!0,sL.paginate(t,e).then((({data:t})=>{const e=t.data.orders;this.setOptions(e),this.statistics=this.search?this.statistics:t.data.statistics})).then((()=>{this.fetching=!1}))},setOptions(t){this.items=t.data,this.first_page_url=Qi(t.first_page_url),this.lase_page_url=Qi(t.last_page_url),this.next_page_url=Qi(t.next_page_url),this.prev_page_url=Qi(t.prev_page_url),this.last_page=parseInt(t.last_page),this.from=parseInt(t.from),this.to=parseInt(t.to),this.per_page=parseInt(t.per_page),this.total=parseInt(t.total),this.totalOrders=this.search?this.totalOrders:parseInt(t.total),this.links=t.links},handleClearFilters(){this.filters={created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"confirmer",product_id:"all",delivery:"dispatch",reported_first:!1},this.handlePageChange(1)},handleBulkUpdate(){this.selected=[],this.paginateOrders()},handleItemUpdate(t){this.items=this.items.map((e=>e.id==t.id?t:e))},handlePageChange(t){this.current_page=t,this.paginateOrders()},handlePerPageChange(t){this.per_page=parseInt(t),this.handlePageChange(1)},handleSortOrderChange(){this.sort_order="asc"==this.sort_order?"desc":"asc",this.paginateOrders()},getDeliveries(){this.deliveries.fetched=!1,X.allDeliveries().then((t=>{"SUCCESS"==t?.data.code&&(this.deliveries.items=t.data.data.deliveries,this.deliveries.fetched=!0)})).catch(this.$handleApiError)}},mounted(){this.paginateOrders(),this.getDeliveries()}};const JV=(0,p.Z)(GV,[["render",QV]]);var XV=JV;const tI={class:"py-5 px-2 tw-border tw-bg-white tw-w-full tw-rounded-md tw-mb-5"},eI={class:"tw-px-3"},rI={class:"tw-flex tw-items-center tw-justify-between tw-flex-wrap"},aI={class:"tw-flex tw-items-center tw-gap-x-3"},sI=(0,s._)("h2",{class:"tw-text-lg tw-font-medium tw-text-gray-800 darkx:tw-text-white"}," Orders ",-1),iI={class:"tw-px-3 tw-py-1 tw-text-xs tw-text-emerald-600 tw-bg-emerald-100 tw-rounded-full darkx:tw-bg-gray-800 darkx:tw-text-orange-400"},lI=(0,s._)("p",{class:"tw-mt-1 tw-text-sm tw-text-gray-500 darkx:tw-text-gray-300"}," These orders have needs to reconfirmed. ",-1),oI={class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-3"},nI=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",width:"16",height:"16",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),dI=(0,s._)("span",null,"Create",-1),wI=[nI,dI],cI={class:"tw-overflow-hidden tw-col-span-1"},uI={key:0};function pI(t,e,r,a,i,l){const o=(0,s.up)("IndexFilters"),n=(0,s.up)("BulkActions"),d=(0,s.up)("IndexTable"),w=(0,s.up)("CreatePopup");return(0,s.wg)(),(0,s.iD)("div",tI,[(0,s._)("section",eI,[(0,s._)("div",rI,[(0,s._)("div",null,[(0,s._)("div",aI,[sI,(0,s._)("span",iI,(0,et.zw)(i.totalOrders)+" order",1)]),lI]),(0,s._)("div",oI,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.create_popup=!0),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},wI)])]),(0,s.Wm)(o,{search:i.search,"onUpdate:search":e[1]||(e[1]=t=>i.search=t),filters:i.filters,"onUpdate:filters":e[2]||(e[2]=t=>i.filters=t),onFilter:e[3]||(e[3]=t=>l.handlePerPageChange(i.per_page)),onClear:l.handleClearFilters,onPerPageChange:l.handlePerPageChange,onFresh:l.paginateOrders,loading:i.fetching,statistics:i.statistics,"per-page":i.per_page,"active-statistics":""},null,8,["search","filters","onClear","onPerPageChange","onFresh","loading","statistics","per-page"]),(0,s._)("div",{class:(0,et.C_)([[i.selected.length>0?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",cI,[(0,s.Wm)(n,{onUpdate:l.handleBulkUpdate,selected:i.selected,"onUpdate:selected":e[4]||(e[4]=t=>i.selected=t)},null,8,["onUpdate","selected"])])],2),(0,s._)("div",null,[(0,s.Wm)(d,{selected:i.selected,"onUpdate:selected":e[5]||(e[5]=t=>i.selected=t),onUpdate:l.handleItemUpdate,onPageChange:l.handlePageChange,onSortOrder:l.handleSortOrderChange,loading:i.fetching,from:i.from,to:i.to,"last-page":i.last_page,"per-page":i.per_page,total:i.total,"current-page":i.current_page,items:i.items,deliveries:i.deliveries},null,8,["selected","onUpdate","onPageChange","onSortOrder","loading","from","to","last-page","per-page","total","current-page","items","deliveries"])]),i.create_popup?((0,s.wg)(),(0,s.iD)("div",uI,[(0,s.Wm)(w,{visible:i.create_popup,"onUpdate:visible":e[6]||(e[6]=t=>i.create_popup=t)},null,8,["visible"])])):(0,s.kq)("",!0)])])}var mI={components:{IndexTable:mE,IndexFilters:ET,CreatePopup:EO,BulkActions:$V},data(){return{fetching:!0,create_popup:!1,items:[],selected:[],deliveries:{fetched:!1,items:[]},statistics:null,first_page_url:null,lase_page_url:null,next_page_url:null,prev_page_url:null,last_page:1,from:1,to:1,total:0,totalOrders:0,links:null,search:"",sort_by:"created_at",sort_order:"desc",per_page:10,current_page:1,filters:{created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"confirmer",product_id:"all",delivery:"expidier",reported_first:!1}}},methods:{paginateOrders(){const t="?page="+this.current_page,e={sort_by:this.sort_by,sort_order:this.sort_order,per_page:this.per_page,current_page:this.current_page,search:this.search,filters:this.filters};return this.fetching=!0,sL.paginate(t,e).then((({data:t})=>{const e=t.data.orders;this.setOptions(e),this.statistics=this.search?this.statistics:t.data.statistics})).then((()=>{this.fetching=!1}))},setOptions(t){this.items=t.data,this.first_page_url=Qi(t.first_page_url),this.lase_page_url=Qi(t.last_page_url),this.next_page_url=Qi(t.next_page_url),this.prev_page_url=Qi(t.prev_page_url),this.last_page=parseInt(t.last_page),this.from=parseInt(t.from),this.to=parseInt(t.to),this.per_page=parseInt(t.per_page),this.total=parseInt(t.total),this.totalOrders=this.search?this.totalOrders:parseInt(t.total),this.links=t.links},handleClearFilters(){this.filters={created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"confirmer",product_id:"all",delivery:"expidier",reported_first:!1},this.handlePageChange(1)},handleBulkUpdate(){this.selected=[],this.paginateOrders()},handleItemUpdate(t){this.items=this.items.map((e=>e.id==t.id?t:e))},handlePageChange(t){this.current_page=t,this.paginateOrders()},handlePerPageChange(t){this.per_page=parseInt(t),this.handlePageChange(1)},handleSortOrderChange(){this.sort_order="asc"==this.sort_order?"desc":"asc",this.paginateOrders()},getDeliveries(){this.deliveries.fetched=!1,X.allDeliveries().then((t=>{"SUCCESS"==t?.data.code&&(this.deliveries.items=t.data.data.deliveries,this.deliveries.fetched=!0)})).catch(this.$handleApiError)}},mounted(){this.paginateOrders(),this.getDeliveries()}};const gI=(0,p.Z)(mI,[["render",pI]]);var hI=gI;const fI={class:"py-5 px-2 tw-border tw-bg-white tw-w-full tw-rounded-md tw-mb-5"},vI={class:"tw-px-3"},yI={class:"tw-flex tw-items-center tw-justify-between tw-flex-wrap"},xI={class:"tw-flex tw-items-center tw-gap-x-3"},bI=(0,s._)("h2",{class:"tw-text-lg tw-font-medium tw-text-gray-800 darkx:tw-text-white"}," Orders ",-1),_I={class:"tw-px-3 tw-py-1 tw-text-xs tw-text-emerald-600 tw-bg-emerald-100 tw-rounded-full darkx:tw-bg-gray-800 darkx:tw-text-orange-400"},kI=(0,s._)("p",{class:"tw-mt-1 tw-text-sm tw-text-gray-500 darkx:tw-text-gray-300"}," These orders have needs to reconfirmed. ",-1),CI={class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-3"},DI=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",width:"16",height:"16",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),SI=(0,s._)("span",null,"Create",-1),zI=[DI,SI],UI={class:"tw-overflow-hidden tw-col-span-1"},LI={key:0};function PI(t,e,r,a,i,l){const o=(0,s.up)("IndexFilters"),n=(0,s.up)("BulkActions"),d=(0,s.up)("IndexTable"),w=(0,s.up)("CreatePopup");return(0,s.wg)(),(0,s.iD)("div",fI,[(0,s._)("section",vI,[(0,s._)("div",yI,[(0,s._)("div",null,[(0,s._)("div",xI,[bI,(0,s._)("span",_I,(0,et.zw)(i.totalOrders)+" order",1)]),kI]),(0,s._)("div",CI,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.create_popup=!0),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},zI)])]),(0,s.Wm)(o,{search:i.search,"onUpdate:search":e[1]||(e[1]=t=>i.search=t),filters:i.filters,"onUpdate:filters":e[2]||(e[2]=t=>i.filters=t),onFilter:e[3]||(e[3]=t=>l.handlePerPageChange(i.per_page)),onClear:l.handleClearFilters,onPerPageChange:l.handlePerPageChange,onFresh:l.paginateOrders,loading:i.fetching,statistics:i.statistics,"per-page":i.per_page,"active-statistics":""},null,8,["search","filters","onClear","onPerPageChange","onFresh","loading","statistics","per-page"]),(0,s._)("div",{class:(0,et.C_)([[i.selected.length>0?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",UI,[(0,s.Wm)(n,{onUpdate:l.handleBulkUpdate,selected:i.selected,"onUpdate:selected":e[4]||(e[4]=t=>i.selected=t)},null,8,["onUpdate","selected"])])],2),(0,s._)("div",null,[(0,s.Wm)(d,{selected:i.selected,"onUpdate:selected":e[5]||(e[5]=t=>i.selected=t),onUpdate:l.handleItemUpdate,onPageChange:l.handlePageChange,onSortOrder:l.handleSortOrderChange,loading:i.fetching,from:i.from,to:i.to,"last-page":i.last_page,"per-page":i.per_page,total:i.total,"current-page":i.current_page,items:i.items,deliveries:i.deliveries},null,8,["selected","onUpdate","onPageChange","onSortOrder","loading","from","to","last-page","per-page","total","current-page","items","deliveries"])]),i.create_popup?((0,s.wg)(),(0,s.iD)("div",LI,[(0,s.Wm)(w,{visible:i.create_popup,"onUpdate:visible":e[6]||(e[6]=t=>i.create_popup=t)},null,8,["visible"])])):(0,s.kq)("",!0)])])}const AI={class:"tw-flex tw-flex-col"},WI={class:"tw-overflow-x-auto"},$I={class:"tw-inline-block tw-min-w-full tw-align-middle"},EI={class:"tw-border tw-overflow-auto tw-border-gray-200 darkx:tw-border-gray-700 md:tw-rounded-lg"},qI={class:"tw-min-w-full tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700"},TI={class:"tw-bg-gray-50 darkx:tw-bg-gray-800"},OI={scope:"col",class:"rtl:tw-text-right tw-px-2 tw-text-sm tw-font-medium tw-whitespace-nowrap tw-text-gray-500 darkx:tw-text-gray-400"},VI={class:"tw-max-w-[25px]"},II={class:"tw-inline-flex tw-items-center"},FI={class:"tw-relative tw-flex tw-cursor-pointer tw-items-center tw-rounded-full tw-p-3",for:"checkbox","data-ripple-dark":"true"},RI=["checked"],jI=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-top-2/4 tw-left-2/4 -tw-translate-y-2/4 -tw-translate-x-2/4 tw-text-white tw-opacity-0 tw-transition-opacity peer-checked:tw-opacity-100"},[(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"tw-h-3.5 tw-w-3.5",viewBox:"0 0 20 20",fill:"currentColor",stroke:"currentColor","stroke-width":"1"},[(0,s._)("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])],-1),NI=(0,s._)("th",{scope:"col",class:"tw-py-3.5 tw-px-4 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"},[(0,s._)("span",null,"ID")],-1),MI={scope:"col",class:"tw-py-3.5 tw-px-4 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"},HI=(0,s._)("span",null,"Created",-1),YI=(0,s._)("svg",{class:"tw-h-3",viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s._)("path",{d:"M2.13347 0.0999756H2.98516L5.01902 4.79058H3.86226L3.45549 3.79907H1.63772L1.24366 4.79058H0.0996094L2.13347 0.0999756ZM2.54025 1.46012L1.96822 2.92196H3.11227L2.54025 1.46012Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,s._)("path",{d:"M0.722656 9.60832L3.09974 6.78633H0.811638V5.87109H4.35819V6.78633L2.01925 9.60832H4.43446V10.5617H0.722656V9.60832Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,s._)("path",{d:"M8.45558 7.25664V7.40664H8.60558H9.66065C9.72481 7.40664 9.74667 7.42274 9.75141 7.42691C9.75148 7.42808 9.75146 7.42993 9.75116 7.43262C9.75001 7.44265 9.74458 7.46304 9.72525 7.49314C9.72522 7.4932 9.72518 7.49326 9.72514 7.49332L7.86959 10.3529L7.86924 10.3534C7.83227 10.4109 7.79863 10.418 7.78568 10.418C7.77272 10.418 7.73908 10.4109 7.70211 10.3534L7.70177 10.3529L5.84621 7.49332C5.84617 7.49325 5.84612 7.49318 5.84608 7.49311C5.82677 7.46302 5.82135 7.44264 5.8202 7.43262C5.81989 7.42993 5.81987 7.42808 5.81994 7.42691C5.82469 7.42274 5.84655 7.40664 5.91071 7.40664H6.96578H7.11578V7.25664V0.633865C7.11578 0.42434 7.29014 0.249976 7.49967 0.249976H8.07169C8.28121 0.249976 8.45558 0.42434 8.45558 0.633865V7.25664Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.3"})],-1),ZI=[HI,YI],KI=(0,s._)("th",{scope:"col",class:"tw-px-3 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Client ",-1),BI=(0,s._)("th",{scope:"col",class:"tw-px-3 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," City ",-1),QI=(0,s._)("th",{scope:"col",class:"tw-px-3 !tw-w-5 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Phone ",-1),GI=(0,s._)("th",{scope:"col",class:"tw-px-3 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Product ",-1),JI=(0,s._)("th",{scope:"col",class:"tw-w-10 tw-px-3 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Confirmation ",-1),XI=(0,s._)("th",{scope:"col",class:"tw-px-3 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Affected ",-1),tF=(0,s._)("th",{scope:"col",class:"tw-w-10 tw-px-3 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Delivery ",-1),eF=(0,s._)("th",{scope:"col",class:"tw-relative tw-py-3.5 tw-px-4"},[(0,s._)("span",{class:"tw-sr-only"},"Actions")],-1),rF={key:0,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},aF={key:1,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},sF=(0,s._)("tr",null,[(0,s._)("td",{colspan:"8"},[(0,s._)("div",{class:"tw-p-5 tw-text-center tw-text-gray-600 tw-font-medium"}," No Order was found ! ")])],-1),iF=[sF],lF={key:2,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},oF={colspan:"11"},nF={role:"status",class:"tw-w-full tw-p-4 tw-space-y-4 tw-border-gray-200 tw-divide-y tw-divide-gray-200 tw-rounded tw-shadow tw-animate-pulse dark:tw-divide-gray-300 md:tw-p-6 dark:tw-border-gray-300"},dF=(0,s._)("div",{class:"tw-flex tw-items-center tw-justify-between"},[(0,s._)("div",null,[(0,s._)("div",{class:"tw-w-32 tw-h-2 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-200"})]),(0,s._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-200 tw-w-12"})],-1),wF=(0,s._)("div",null,[(0,s._)("div",{class:"tw-w-32 tw-h-2 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-200"})],-1),cF=(0,s._)("div",{class:"tw-h-2.5 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-200 tw-w-12"},null,-1),uF=[wF,cF],pF={class:"tw-mt-6"};function mF(t,e,r,a,i,l){const o=(0,s.up)("TableRow"),n=((0,s.up)("loading"),(0,s.up)("TablePaginationNoNums"));return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",AI,[(0,s._)("div",WI,[(0,s._)("div",$I,[(0,s._)("div",EI,[(0,s._)("table",qI,[(0,s._)("thead",TI,[(0,s._)("tr",null,[(0,s._)("th",OI,[(0,s._)("div",VI,[(0,s._)("div",II,[(0,s._)("label",FI,[(0,s._)("input",{type:"checkbox",checked:i.isAllSelected,onChange:e[0]||(e[0]=(...t)=>l.handleSelectedAllChange&&l.handleSelectedAllChange(...t)),class:"before:tw-content[''] tw-border-solid tw-bg-white tw-peer tw-relative tw-h-5 tw-w-5 tw-cursor-pointer tw-appearance-none tw-rounded-md tw-border tw-border-blue-gray-200 tw-transition-all before:tw-absolute before:tw-top-2/4 before:tw-left-2/4 before:tw-block before:tw-h-12 before:tw-w-12 before:-tw-translate-y-2/4 before:-tw-translate-x-2/4 before:tw-rounded-full before:bg-blue-gray-500 before:tw-opacity-0 before:tw-transition-opacity checked:tw-border-orange-500 checked:tw-bg-orange-500 checked:before:tw-bg-orange-500 hover:before:tw-opacity-10",id:"checkbox-all"},null,40,RI),jI])])])]),NI,(0,s._)("th",MI,[(0,s._)("button",{onClick:e[1]||(e[1]=e=>t.$emit("sortOrder",{name:"created_at"})),class:"tw-flex tw-items-center tw-gap-x-3 focus:tw-outline-none"},ZI)]),KI,BI,QI,GI,JI,XI,tF,eF])]),!r.loading&&r.items.length>0?((0,s.wg)(),(0,s.iD)("tbody",rF,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.items,((a,i,n)=>((0,s.wg)(),(0,s.j4)(o,{selected:l.selectedOrders,"onUpdate:selected":e[2]||(e[2]=t=>l.selectedOrders=t),deliveries:r.deliveries,onUpdate:e[3]||(e[3]=e=>t.$emit("update",e)),all:n,index:i,key:a.id,item:a},null,8,["selected","deliveries","all","index","item"])))),128))])):(0,s.kq)("",!0),r.loading||0!=r.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("tbody",aF,iF)),r.loading?((0,s.wg)(),(0,s.iD)("tbody",lF,[(0,s._)("tr",null,[(0,s.kq)("",!0),(0,s._)("td",oF,[(0,s._)("div",nF,[dF,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.perPage-1,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"tw-flex tw-items-center tw-justify-between tw-pt-4"},uF)))),128))])])])])):(0,s.kq)("",!0)])])])])]),(0,s._)("div",pF,[(0,s.Wm)(n,{from:r.from,to:r.to,"last-page":r.lastPage,"per-page":r.perPage,total:r.total,"current-page":r.currentPage,onPageChange:e[4]||(e[4]=e=>t.$emit("pageChange",e))},null,8,["from","to","last-page","per-page","total","current-page"])])])}const gF={class:"sm:tw-flex sm:tw-items-center sm:tw-justify-between"},hF={class:"tw-text-sm tw-text-gray-500 darkx:tw-text-gray-400"},fF={class:"tw-font-medium tw-text-gray-700 darkx:tw-text-gray-100"},vF={class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-4 sm:tw-mt-0"},yF=["disabled"],xF=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5 rtl:tw--scale-x-100"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18"})],-1),bF=(0,s._)("span",null," previous ",-1),_F=[xF,bF],kF=["disabled"],CF=(0,s._)("span",null," Next ",-1),DF=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5 rtl:tw--scale-x-100"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"})],-1),SF=[CF,DF];function zF(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",gF,[(0,s._)("div",hF,[(0,s.Uk)(" Page "),(0,s._)("span",fF,(0,et.zw)(r.currentPage)+" of "+(0,et.zw)(r.lastPage),1)]),(0,s._)("div",vF,[(0,s._)("button",{disabled:r.currentPage<=1,onClick:e[0]||(e[0]=t=>l.changePage(r.currentPage-1)),class:(0,et.C_)([[r.currentPage<=1&&"tw-cursor-not-allowed"],"tw-flex tw-items-center tw-justify-center tw-w-1/2 tw-px-5 tw-py-2 tw-text-sm tw-text-gray-700 tw-capitalize tw-transition-colors tw-duration-200 tw-bg-white tw-border tw-border-solid tw-rounded-md sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-100 darkx:tw-bg-gray-900 darkx:tw-text-gray-200 darkx:tw-border-gray-700 darkx:hover:tw-bg-gray-800"])},_F,10,yF),(0,s._)("button",{disabled:r.currentPage>=l.totalPages,onClick:e[1]||(e[1]=t=>l.changePage(r.currentPage+1)),class:(0,et.C_)([[r.currentPage>=l.totalPages&&"tw-cursor-not-allowed"],"tw-flex tw-items-center tw-justify-center tw-w-1/2 tw-px-5 tw-py-2 tw-text-sm tw-text-gray-700 tw-capitalize tw-transition-colors tw-duration-200 tw-bg-white tw-border tw-border-solid tw-rounded-md sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-100 darkx:tw-bg-gray-900 darkx:tw-text-gray-200 darkx:tw-border-gray-700 darkx:hover:tw-bg-gray-800"])},SF,10,kF)])])])}var UF={props:{from:{type:Number,default:1},to:{type:Number,default:1},perPage:{type:Number,default:1},total:{type:Number,default:1},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1}},data(){return{totalItems:100,itemsPerPage:5}},computed:{totalPages(){return this.lastPage},showEllipsisStart(){return this.currentPage>3},showEllipsisEnd(){return this.currentPage<this.totalPages-2},visiblePages(){let t=Math.max(1,this.currentPage-1),e=Math.min(this.totalPages,this.currentPage+1);const r=[];for(let a=t;a<=e;a++)r.push(a);return r}},methods:{changePage(t){this.$emit("pageChange",t)}}};const LF=(0,p.Z)(UF,[["render",zF]]);var PF=LF;const AF={class:"tw-p-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},WF={class:"tw-max-w-[25px]"},$F={class:"tw-inline-flex tw-items-center"},EF={class:"tw-relative tw-flex tw-cursor-pointer tw-items-center tw-rounded-full tw-p-3",for:"checkbox","data-ripple-dark":"true"},qF=["checked","id"],TF=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-top-2/4 tw-left-2/4 -tw-translate-y-2/4 -tw-translate-x-2/4 tw-text-white tw-opacity-0 tw-transition-opacity peer-checked:tw-opacity-100"},[(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"tw-h-3.5 tw-w-3.5",viewBox:"0 0 20 20",fill:"currentColor",stroke:"currentColor","stroke-width":"1"},[(0,s._)("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])],-1),OF={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},VF={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white"},IF={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},FF={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-flex tw-items-center tw-gap-2"},RF={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},jF={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-font-[cairo] tw-max-w-[150px] tw-truncate"},NF={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},MF={class:"tw-font-medium tw-max-w-[100px] tw-truncate tw-text-gray-800 darkx:tw-text-white tw-font-[cairo]"},HF={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},YF={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-font-[cairo] tw-max-w-[120px] tw-truncate"},ZF={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},KF={class:"tw-space-y-1"},BF={class:"tw-font-bold tw-text-green-500"},QF={class:"tw-block tw-max-w-[150px] tw-truncate"},GF={key:0,class:"tw-font-bold tw-text-orange-500 tw-bg-orange-100 tw-rounded-lg tw-px-2 tw-text-sm"},JF={key:1,class:"tw-font-bold tw-text-orange-500 tw-bg-orange-100 tw-rounded-lg tw-px-2 tw-text-sm"},XF={class:"tw-px-2 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},tR={class:"tw-px-2 tw-py-2 tw-text-sm tw-whitespace-nowrap"},eR={class:"tw-px-2 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},rR={class:"tw-px-4 tw-py-2 tw-text-sm tw-whitespace-nowrap"};function aR(t,e,r,a,i,l){const o=(0,s.up)("TableRowAffectation"),n=(0,s.up)("TableActions");return(0,s.wg)(),(0,s.iD)("tr",{class:(0,et.C_)(["hover:tw-bg-gray-50",[null!=r.item.reported_diff&&"reporter"==r.item.confirmation&&r.item.reported_diff<=0&&" !tw-shadow-sm !tw-border !tw-border-emerald-300"]])},[(0,s._)("td",AF,[(0,s._)("div",WF,[(0,s._)("div",$F,[(0,s._)("label",EF,[(0,s._)("input",{type:"checkbox",checked:l.isSelected,onChange:e[0]||(e[0]=(...t)=>l.handleSelected&&l.handleSelected(...t)),class:"before:tw-content[''] tw-border-solid tw-bg-white tw-peer tw-relative tw-h-5 tw-w-5 tw-cursor-pointer tw-appearance-none tw-rounded-md tw-border tw-border-blue-gray-200 tw-transition-all before:tw-absolute before:tw-top-2/4 before:tw-left-2/4 before:tw-block before:tw-h-12 before:tw-w-12 before:-tw-translate-y-2/4 before:-tw-translate-x-2/4 before:tw-rounded-full before:bg-blue-gray-500 before:tw-opacity-0 before:tw-transition-opacity checked:tw-border-orange-500 checked:tw-bg-orange-500 checked:before:tw-bg-orange-500 hover:before:tw-opacity-10",id:"checkbox-"+r.item.id},null,40,qF),TF])])])]),(0,s._)("td",OF,[(0,s._)("div",null,[(0,s._)("h2",VF,(0,et.zw)(r.item.id),1)])]),(0,s._)("td",IF,[(0,s._)("div",null,[(0,s._)("h2",FF,[(0,s._)("p",null,(0,et.zw)(i.moment(r.item.created_at).format("DD[/]MM[/]YY")),1),(0,s.kq)("",!0)])])]),(0,s._)("td",RF,[(0,s._)("div",null,[(0,s._)("h2",jF,(0,et.zw)(r.item.fullname),1)])]),(0,s._)("td",NF,[(0,s._)("div",null,[(0,s._)("h2",MF,(0,et.zw)(r.item.city),1)])]),(0,s._)("td",HF,[(0,s._)("div",null,[(0,s._)("h2",YF,(0,et.zw)(r.item.phone),1)])]),(0,s._)("td",ZF,[(0,s._)("div",null,[(0,s._)("ul",KF,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.item.items,(t=>((0,s.wg)(),(0,s.iD)("li",{dir:"rtl",class:"tw-font-[cairo] tw-flex tw-items-center tw-gap-1",key:t.id},[(0,s._)("span",BF,(0,et.zw)(t.quantity)+" x ",1),(0,s._)("span",QF,(0,et.zw)(t.product.name),1),t.product_variation.color&&!["/","-"].includes(t.product_variation.color)?((0,s.wg)(),(0,s.iD)("span",GF,(0,et.zw)(t.product_variation.color),1)):(0,s.kq)("",!0),t.product_variation.size&&!["/","-"].includes(t.product_variation.size)?((0,s.wg)(),(0,s.iD)("span",JF,(0,et.zw)(t.product_variation.size),1)):(0,s.kq)("",!0)])))),128))])])]),(0,s._)("td",XF,[(0,s._)("div",null,[(0,s._)("span",{class:(0,et.C_)([[l.confirmation.bgLight,l.confirmation.textLight],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},(0,et.zw)(l.confirmation.name),3)])]),(0,s._)("td",tR,[(0,s._)("div",null,[(0,s.Wm)(o,{onUpdate:e[1]||(e[1]=e=>t.$emit("update",e)),deliveries:r.deliveries,item:r.item},null,8,["deliveries","item"])]),(0,s.kq)("",!0)]),(0,s._)("td",eR,[(0,s._)("div",null,[(0,s._)("span",{class:(0,et.C_)([[l.deliveryState.bgLight,l.deliveryState.textLight],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},(0,et.zw)(l.deliveryState.value?l.deliveryState.name:"Not Selected"),3)])]),(0,s._)("td",rR,[(0,s._)("div",null,[(0,s.Wm)(n,{onUpdate:e[2]||(e[2]=e=>t.$emit("update",e)),item:r.item},null,8,["item"])])])],2)}const sR={class:"tw-h-full"},iR={class:"tw-flex tw-items-center tw-gap-2"},lR=["href"],oR={key:0};function nR(t,e,r,a,i,l){const o=(0,s.up)("UpdatePopup");return(0,s.wg)(),(0,s.iD)("div",sR,[(0,s._)("div",iR,[(0,s._)("a",{target:"_blank",href:"https://api.whatsapp.com/send?phone="+r.item.phone.replace("+","").replace("-","").replace(" ",""),class:"tw-bg-whites tw-shadow-sm tw-px-2 tw-py-1 tw-w-[30px] tw-h-[30px] tw-border tw-border-solid tw-border-green-500/20 hover:tw-bg-green-500/10 hover:tw-border-green-500/70 tw-duration-300 tw-text-green-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(st.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-whatsapp")])),_:1})],8,lR),(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.update=!0),class:"tw-bg-whites tw-shadow-sm tw-px-2 tw-py-1 tw-w-[30px] tw-h-[30px] tw-border tw-border-solid tw-border-orange-500/20 hover:tw-bg-orange-500/10 hover:tw-border-orange-500/70 tw-duration-300 tw-text-orange-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(st.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])]),i.update?((0,s.wg)(),(0,s.iD)("div",oR,[(0,s.Wm)(o,{onUpdate:e[1]||(e[1]=e=>t.$emit("update",e)),visible:i.update,"onUpdate:visible":e[2]||(e[2]=t=>i.update=t),item:r.item},null,8,["visible","item"])])):(0,s.kq)("",!0)])}const dR={class:"tw-mx-auto tw-w-[95%] md:tw-max-w-[800px] tw-overflow-hidden tw-h-fit dark:tw-bg-neutral-900 tw-bg-white tw-border tw-border-solid dark:tw-border-neutral-700 tw-border-neutral-300 tw-shadow-md tw-my-5 tw-rounded-lg"},wR=(0,s._)("div",{class:"tw-p-4 tw-text-lg tw-border-b tw-border-solid tw-font-medium tw-flex dark:tw-text-neutral-400 tw-text-neutral-500 tw-items-center tw-gap-4 dark:tw-bg-neutral-800 tw-bg-gray-50"}," Order Informations ",-1),cR={class:"tw-bg-white tw-p-4"},uR={class:"tw-grid tw-gap-6 tw-gap-y-5 tw-grid-cols-1 md:tw-grid-cols-2"},pR={class:"tw-col-span-2 md:tw-col-span-1"},mR=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Client Name",-1),gR={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},hR={class:"tw-col-span-2 md:tw-col-span-1"},fR=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Phone Number",-1),vR={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},yR={class:"tw-col-span-2 md:tw-col-span-1"},xR=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"City",-1),bR={class:"tw-relative"},_R=(0,s._)("option",{value:null,disabled:""},"Choose a City",-1),kR=["value"],CR=["value"],DR=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),SR={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},zR={class:"tw-col-span-2 md:tw-col-span-1"},UR=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Address",-1),LR={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},PR={class:"tw-col-span-2"},AR=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Reconfirmation",-1),WR={class:"tw-relative"},$R=["value"],ER=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),qR={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},TR={key:0,class:"md:tw-col-span-1 tw-col-span-2"},OR=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Date",-1),VR={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},IR={key:1,class:"md:tw-col-span-1 tw-col-span-2"},FR=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Note",-1),RR={class:"tw-col-span-2"},jR=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Note",-1),NR={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},MR={class:"md:tw-col-span-1 tw-col-span-2"},HR={class:"md:tw-col-span-1 tw-col-span-2"},YR=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Upsell",-1),ZR={class:"tw-relative"},KR=["value"],BR=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),QR={class:"tw-col-span-2"},GR={class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},JR={key:0,class:"tw-text-red-400 tw-text-xs"},XR={key:3,class:"tw-col-span-2"},tj={class:"tw-flex tw-justify-end tw-items-center tw-p-4 tw-gap-3 dark:tw-bg-neutral-900 tw-bg-gray-50 tw-border-t tw-border-solid"},ej=["disabled"],rj=(0,s._)("span",null,"Update",-1);function aj(t,e,r,i,l,o){const n=(0,s.up)("OrderAffectation"),d=(0,s.up)("OrderItems"),w=(0,s.up)("ProductOffersTable"),c=(0,s.up)("popup-new");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(c,{visible:r.visible,closeable:!1,onCancel:o.cancel},{default:(0,s.w5)((()=>[(0,s._)("div",dR,[wR,(0,s._)("div",cR,[(0,s._)("div",uR,[(0,s._)("div",pR,[mR,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.itemCopy.fullname=t),onInput:e[1]||(e[1]=t=>l.errors.fullname=null),type:"text",class:(0,et.C_)([[l.errors.fullname&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),placeholder:"John",required:""},null,34),[[a.nr,l.itemCopy.fullname]]),l.errors.fullname?((0,s.wg)(),(0,s.iD)("label",gR,(0,et.zw)(l.errors.fullname),1)):(0,s.kq)("",!0)]),(0,s._)("div",hR,[fR,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.itemCopy.phone=t),onInput:e[3]||(e[3]=t=>l.errors.phone=null),class:(0,et.C_)([[l.errors.phone&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"123-45-678",required:""},null,34),[[a.nr,l.itemCopy.phone]]),l.errors.phone?((0,s.wg)(),(0,s.iD)("label",vR,(0,et.zw)(l.errors.phone),1)):(0,s.kq)("",!0)]),(0,s._)("div",yR,[xR,(0,s._)("div",bR,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.itemCopy.city=t),onChange:e[5]||(e[5]=t=>l.errors.city=null),class:(0,et.C_)([[l.errors.city&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 tw-pr-7"])},[_R,(0,s._)("option",{value:l.itemCopy.city,disabled:""},(0,et.zw)(l.itemCopy.city),9,kR),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,et.zw)(t.name),9,CR)))),128))],34),[[a.bM,l.itemCopy.city]]),DR]),l.errors.city?((0,s.wg)(),(0,s.iD)("label",SR,(0,et.zw)(l.errors.city),1)):(0,s.kq)("",!0)]),(0,s._)("div",zR,[UR,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>l.itemCopy.adresse=t),onInput:e[7]||(e[7]=t=>l.errors.adresse=null),class:(0,et.C_)([[l.errors.adresse&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"Address",required:""},null,34),[[a.nr,l.itemCopy.adresse]]),l.errors.adresse?((0,s.wg)(),(0,s.iD)("label",LR,(0,et.zw)(l.errors.adresse),1)):(0,s.kq)("",!0)]),(0,s._)("div",PR,[AR,(0,s._)("div",WR,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>l.itemCopy.followup_confirmation=t),onChange:e[9]||(e[9]=t=>l.errors.followup_confirmation=null),class:(0,et.C_)([[l.errors.followup_confirmation&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.followup_confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,class:(0,et.C_)([t.text,!t.value&&"!tw-text-green-500"]),key:t.id},(0,et.zw)(t.name),11,$R)))),128))],34),[[a.bM,l.itemCopy.followup_confirmation]]),ER]),l.errors.followup_confirmation?((0,s.wg)(),(0,s.iD)("label",qR,(0,et.zw)(l.errors.followup_confirmation),1)):(0,s.kq)("",!0)]),"reporter"==l.itemCopy.followup_confirmation?((0,s.wg)(),(0,s.iD)("div",TR,[OR,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>l.itemCopy.followup_reported_date=t),onInput:e[11]||(e[11]=t=>l.errors.followup_reported_date=null),class:(0,et.C_)([[l.errors.followup_reported_date&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"date",required:""},null,34),[[a.nr,l.itemCopy.followup_reported_date]]),l.errors.followup_reported_date?((0,s.wg)(),(0,s.iD)("label",VR,(0,et.zw)(l.errors.followup_reported_date),1)):(0,s.kq)("",!0)])):(0,s.kq)("",!0),"reporter"==l.itemCopy.followup_confirmation?((0,s.wg)(),(0,s.iD)("div",IR,[FR,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[12]||(e[12]=t=>l.itemCopy.followup_reported_note=t),rows:"1",class:"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500",placeholder:"Enter a note"},null,512),[[a.nr,l.itemCopy.followup_reported_note]])])):(0,s.kq)("",!0),(0,s._)("div",RR,[jR,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[13]||(e[13]=t=>l.itemCopy.note=t),onInput:e[14]||(e[14]=t=>l.errors.note=null),class:(0,et.C_)([[l.errors.note&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),rows:"3",placeholder:"Enter a note"},null,34),[[a.nr,l.itemCopy.note]]),l.errors.note?((0,s.wg)(),(0,s.iD)("label",NR,(0,et.zw)(l.errors.note),1)):(0,s.kq)("",!0)]),(0,s._)("div",MR,[(0,s.Wm)(n,{item:l.itemCopy,error:l.errors.affectation,"onUpdate:error":e[15]||(e[15]=t=>l.errors.affectation=t),affectation:l.itemCopy.affectation,"onUpdate:affectation":e[16]||(e[16]=t=>l.itemCopy.affectation=t)},null,8,["item","error","affectation"])]),(0,s.kq)("",!0),(0,s._)("div",HR,[YR,(0,s._)("div",ZR,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[19]||(e[19]=t=>l.itemCopy.upsell=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.upsells,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,et.C_)([t.text]),value:t.value,key:t.id},(0,et.zw)(t.name),11,KR)))),128))],512),[[a.bM,l.itemCopy.upsell]]),BR])]),(0,s._)("div",QR,[(0,s._)("label",GR,[(0,s.Uk)("Order Items "),l.errors.items?((0,s.wg)(),(0,s.iD)("span",JR," # "+(0,et.zw)(l.errors.items),1)):(0,s.kq)("",!0)]),(0,s._)("div",null,[(0,s.Wm)(d,{order:l.itemCopy,error:l.errors.items,products:l.products,"products-fetched":l.products_fetched,items:l.itemCopy.items,"onUpdate:items":e[20]||(e[20]=t=>l.itemCopy.items=t)},null,8,["order","error","products","products-fetched","items"])])]),l.products_fetched?((0,s.wg)(),(0,s.iD)("div",XR,[(0,s.Wm)(w,{products:l.products,item:l.itemCopy},null,8,["products","item"])])):(0,s.kq)("",!0)])]),(0,s._)("div",tj,[(0,s._)("button",{onClick:e[21]||(e[21]=(...t)=>o.cancel&&o.cancel(...t)),class:"tw-py-2 tw-px-7 tw-rounded tw-text-sm tw-border tw-border-solid tw-border-tansparent dark:tw-border-neutral-900 hover:tw-border-neutral-400 dark:hover:tw-border-neutral-500 hover:tw-bg-gray-300 tw-bg-gray-200 dark:tw-bg-neutral-600 tw-duration-300 tw-text-neutral-900 dark:tw-text-neutral-300"}," Cancel "),(0,s._)("button",{onClick:e[22]||(e[22]=(...t)=>o.handleUpdate&&o.handleUpdate(...t)),disabled:l.isLoading,class:"tw-py-2 tw-px-7 tw-flex tw-items-center tw-rounded tw-text-sm tw-bg-orange-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-orange-600 dark:tw-border-neutral-900 dark:hover:tw-border-orange-500 hover:tw-bg-orange-500/80 dark:hover:tw-bg-orange-400 tw-duration-300 tw-text-white"},[(0,s.Wm)(st.t,{size:"small",class:(0,et.C_)(["tw-duration-300 tw-animate-spin tw-overflow-hidden tw-max-w-0 tw-mr-0",[l.isLoading&&"!tw-max-w-[50px] !tw-mr-3"]])},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1},8,["class"]),rj],8,ej)])])])),_:1},8,["visible","onCancel"])])}const sj=(t,e)=>e.fullname?e.phone?e.adresse?e.note||"annuler"!=e.confirmation?e.affectation&&"confirmer"!=e.confirmation?(t.errors.affectation="Cannot update affectation: Order not confirmed.",!1):!!ij(t,e.items):(t.errors.note="Add Cancelation note !",!1):(t.errors.adresse="Address is required",!1):(t.errors.phone="Phone Number is required",!1):(t.errors.fullname="Client Name is required",!1),ij=(t,e)=>{if(!e.length)return t.errors.items="You should add one order item at least.",!1;let r=!0;return e.forEach((e=>0==e.product_id?(t.errors.items="Product is required for order item",r=!1,!1):0==e.product_variation_id?(t.errors.items="Select a product variation",r=!1,!1):0==e.quantity?(t.errors.items="Items quantity cannot be 0",r=!1,!1):void 0)),r},lj=(t,e)=>{t.$alert({title:"Updated Successfully",type:"success"});const r=e.data.order;t.$emit("update",r),t.isLoading=!1,t.cancel(),t.errors={}},oj=(t,e)=>{t.$alert({title:e.message,type:"error"}),"VALIDATION_ERROR"==e.code&&(t.errors=e.errors),t.isLoading=!1},nj=(t,e)=>{t.isLoading=!0,t.errors={},sL.update(e.id,e).then((e=>lj(t,e.data))).catch((e=>oj(t,e.response.data))).finally((()=>t.isLoading=!1))},dj={key:0},wj=(0,s._)("p",{class:"tw-col-span-12 tw-rounded-lg tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"}," No Order items ",-1),cj={class:"tw-flex tw-justify-end tw-items-center tw-py-3"},uj=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),pj=(0,s._)("span",null,"Add Item",-1),mj=[uj,pj],gj={key:1,class:"md:tw-col-span-12 tw-col-span-12"},hj={class:"tw-max-w-full tw-overflow-auto"},fj={class:"tw-text-xs tw-text-gray-700 tw-uppercase !tw-rounded-t-lg tw-border tw-border-solid"},vj={class:"tw-bg-gray-50"},yj={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},xj={key:0},bj={colspan:"6"},_j={class:"tw-flex tw-justify-end tw-items-center tw-py-3"},kj=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),Cj=(0,s._)("span",null,"Add Item",-1),Dj=[kj,Cj],Sj=(0,s._)("td",{colspan:"4"},null,-1),zj=(0,s._)("td",null,null,-1),Uj={colspan:"1",class:"tw-p-2"},Lj={class:"tw-p-2 tw-py-1 tw-text-lg tw-font-['cairo'] tw-text-green-500 tw-w-24 tw-font-bold tw-tracking-wide tw-block focus:tw-outline-none tw-shadow-sm tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},Pj={key:1},Aj={colspan:"6"},Wj={class:"tw-scale-75 tw-p-5"};function $j(t,e,r,a,i,l){const o=(0,s.up)("ItemRow"),n=(0,s.up)("loading");return(0,s.wg)(),(0,s.iD)("div",null,[r.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",dj,[wj,(0,s._)("div",cj,[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>l.addItem&&l.addItem(...t)),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-400 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},mj)])])),r.items.length?((0,s.wg)(),(0,s.iD)("div",gj,[(0,s._)("div",hj,[((0,s.wg)(),(0,s.iD)("table",{key:r.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,s._)("thead",fj,[(0,s._)("tr",vj,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,s._)("th",{class:(0,et.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",yj,(0,et.zw)(t),1)],2))),64))])]),r.productsFetched?((0,s.wg)(),(0,s.iD)("tbody",xj,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.items,(t=>((0,s.wg)(),(0,s.j4)(o,{key:t.id,item:t,products:r.products,onDelete:l.deleteItem,onUpdate:l.updateItem},null,8,["item","products","onDelete","onUpdate"])))),128)),(0,s._)("tr",null,[(0,s._)("td",bj,[(0,s._)("div",_j,[(0,s._)("button",{onClick:e[1]||(e[1]=(...t)=>l.addItem&&l.addItem(...t)),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-400 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},Dj)])])]),(0,s._)("tr",null,[Sj,zj,(0,s._)("td",Uj,[(0,s._)("div",Lj,[(0,s._)("p",null,(0,et.zw)(i.currency)+" "+(0,et.zw)(l.price),1)])])])])):((0,s.wg)(),(0,s.iD)("tbody",Pj,[(0,s._)("tr",null,[(0,s._)("td",Aj,[(0,s._)("div",Wj,[(0,s.Wm)(n)])])])]))]))])])):(0,s.kq)("",!0)])}const Ej=(0,s._)("td",null,null,-1),qj={class:"tw-p-2"},Tj={class:"tw-relative"},Oj=["value"],Vj=(0,s._)("option",{value:0,selected:""},"Choose Product",-1),Ij=["value"],Fj=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),Rj={class:"tw-p-2"},jj={key:0,class:"tw-relative"},Nj=["value"],Mj=(0,s._)("option",{value:"",disabled:""},"Choose Variation",-1),Hj=["value"],Yj={key:1,class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},Zj=(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})],-1),Kj=[Zj],Bj={class:"tw-p-2"},Qj=["value"],Gj={class:"tw-p-2"},Jj=["value"],Xj={class:"tw-flex tw-justify-center"};function tN(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("tr",null,[Ej,(0,s._)("td",null,[(0,s._)("div",qj,[(0,s._)("div",Tj,[(0,s._)("select",{onChange:e[0]||(e[0]=(...t)=>l.handleProductChange&&l.handleProductChange(...t)),value:r.item.product_id,class:"tw-block tw-border-solid focus:tw-outline-none tw-w-full tw-p-2 tw-pr-6 tw-text-xs tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},[Vj,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.products,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.id},(0,et.zw)(t.name),9,Ij)))),128))],40,Oj),Fj])])]),(0,s._)("td",null,[(0,s._)("div",Rj,[r.item.product_id?((0,s.wg)(),(0,s.iD)("div",jj,[l.product.variations.length>1?((0,s.wg)(),(0,s.iD)("select",{key:0,onChange:e[1]||(e[1]=(...t)=>l.handleVariationChange&&l.handleVariationChange(...t)),value:r.item.product_variation_id,class:"tw-block tw-border-solid focus:tw-outline-none tw-w-full tw-p-2 tw-pr-6 tw-text-xs tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},[Mj,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.product.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.id},(0,et.zw)(t.color)+" "+(0,et.zw)(t.size),9,Hj)))),128))],40,Nj)):(0,s.kq)("",!0),l.product.variations.length>1?((0,s.wg)(),(0,s.iD)("div",Yj,Kj)):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])]),(0,s._)("td",null,[(0,s._)("div",Bj,[(0,s._)("input",{onInput:e[2]||(e[2]=e=>t.$emit("update",{...r.item,quantity:parseInt(e.target.value)>=0?parseInt(e.target.value):0})),value:r.item.quantity,min:"0",type:"number",class:"focus:tw-outline-none tw-border-solid tw-block tw-w-24 tw-p-2 tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded-lg tw-bg-gray-50 sm:tw-text-xs focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},null,40,Qj)])]),(0,s._)("td",null,[(0,s._)("div",Gj,[(0,s._)("input",{onInput:e[3]||(e[3]=e=>t.$emit("update",{...r.item,price:parseFloat(e.target.value)})),value:r.item.price,min:"0",type:"number",class:"focus:tw-outline-none tw-border-solid tw-block tw-w-24 tw-p-2 tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded-lg tw-bg-gray-50 sm:tw-text-xs focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},null,40,Jj)])]),(0,s._)("td",null,[(0,s._)("div",Xj,[(0,s._)("button",{onClick:e[4]||(e[4]=(...t)=>l.handleDelete&&l.handleDelete(...t)),class:"tw-px-2 tw-py-1 tw-w-[25px] tw-h-[25px] tw-border tw-border-solid tw-border-red-500/20 hover:tw-bg-red-500/10 hover:tw-border-red-500/70 tw-duration-300 tw-text-red-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(st.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])])])])}var eN={props:{item:{required:!0},products:{required:!0}},computed:{product(){return 0==this.item.product_id?null:this.products.find((t=>t.id==this.item.product_id))}},methods:{handleProductChange(t){const e=parseInt(t.target.value);if(!e)return!1;const r=this.products.find((t=>t.id==e));console.log(r.variations.length>0?r.variations[0].id:null);const a={...this.item,product_id:e,product:r,product_ref:r.ref,product_variation_id:r.variations.length>0?r.variations[0].id:null,product_variation:r.variations.length>0?r.variations[0]:null};this.$emit("update",a)},handleVariationChange(t){this.$emit("update",{...this.item,product_variation:this.product.variations.find((e=>e.id==parseInt(t.target.value))),product_variation_id:parseInt(t.target.value)})},handleDelete(){this.$emit("delete",this.item.id)}},mounted(){}};const rN=(0,p.Z)(eN,[["render",tN]]);var aN=rN,sN={components:{ItemRow:aN},props:{items:{required:!0,default:[]},error:{required:!1,default:null},products:{required:!0},productsFetched:{required:!0},order:{required:!0}},data(){return{currency:c}},computed:{price(){return Bi(this.order)}},methods:{updateItem(t){const e=this.items.map((e=>e.id==t.id?t:e));this.$emit("update:items",e)},deleteItem(t){const e=this.items.filter((e=>e.id!=t));this.$emit("update:items",e)},addItem(){const t=this.items.length>0?this.items[this.items.length-1].id:1,e=t?t+1:1,r={id:e,quantity:0,price:0,product_variation_id:0,product_id:0},a=[...this.items,r];this.$emit("update:items",a)}},mounted(){}};const iN=(0,p.Z)(sN,[["render",$j]]);var lN=iN;const oN=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Affectation",-1),nN={key:0,class:"tw-relative"},dN=["value","disabled"],wN=(0,s._)("option",{value:""},"Choose a Delivery",-1),cN=["value"],uN=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),pN={key:1,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},mN={key:2,class:"tw-relative"},gN={class:"tw-absolute tw-scale-75 tw-left-1/2 tw-top-1/2 -tw-translate-x-1/2 -tw-translate-y-1/2 tw-z-10"},hN=(0,s._)("select",{disabled:"",class:"tw-opacity-30 tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[(0,s._)("option",{value:null,selected:""},"Loading...")],-1),fN=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},null,-1);function vN(t,e,r,a,i,l){const o=(0,s.up)("loading");return(0,s.wg)(),(0,s.iD)("div",null,[oN,i.fetched?((0,s.wg)(),(0,s.iD)("div",nN,[(0,s._)("select",{value:r.affectation,onChange:e[0]||(e[0]=(...t)=>l.handleChange&&l.handleChange(...t)),disabled:"confirmer"!=r.item.confirmation,class:(0,et.C_)([[r.error&&"!tw-border-red-400","confirmer"!=r.item.confirmation&&"tw-cursor-not-allowed"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[wN,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.availableDeliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,et.zw)(t.name),9,cN)))),128))],42,dN),uN])):(0,s.kq)("",!0),i.fetched&&r.error?((0,s.wg)(),(0,s.iD)("label",pN,(0,et.zw)(r.error),1)):(0,s.kq)("",!0),i.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",mN,[(0,s._)("div",gN,[(0,s.Wm)(o)]),hN,fN]))])}var yN={props:{affectation:{required:!0},error:{required:!1,default:null},item:{required:!0}},data(){return{deliveries:[],fetched:!1}},computed:{availableDeliveries(){return this.deliveries.filter((t=>t.has.some((t=>this.item.items.some((e=>e.product_id==t))))))},delivery(){return this.deliveries.find((t=>t.id==this.affectation))}},watch:{"item.confirmation":{deep:!0,handler(){this.$emit("update:affectation",null)}},"item.items":{deep:!0,handler(){if(!this.affectation)return!1;this.delivery.has.some((t=>this.item.items.some((e=>e.product_id==t))))||this.$emit("update:affectation",null)}}},methods:{getDeliveries(){this.fetched=!1,X.allDeliveries().then((t=>{"SUCCESS"==t?.data.code&&(this.deliveries=t.data.data.deliveries,this.fetched=!0)})).catch(this.$handleApiError)},handleChange(t){this.$emit("update:affectation",t.target.value),this.$emit("update:error",null)}},mounted(){this.getDeliveries()}};const xN=(0,p.Z)(yN,[["render",vN]]);var bN=xN;const _N={key:0},kN=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Offers",-1),CN={class:"md:tw-col-span-12 tw-col-span-12"},DN={class:"tw-max-w-full tw-overflow-auto"},SN={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},zN=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 !tw-rounded-t-lg tw-border tw-border-solid"},[(0,s._)("tr",{class:"tw-bg-gray-50"},[(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Product Name"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Quantity"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Price"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Note")])],-1),UN={class:"tw-px-3 tw-py-2"},LN={class:"tw-px-3 tw-py-2"},PN={class:"tw-px-3 tw-py-2"},AN={class:"tw-px-3 tw-py-2"},WN={class:"tw-max-w-[250px] tw-text-sm"};function $N(t,e,r,a,i,l){return l.offers.length?((0,s.wg)(),(0,s.iD)("div",_N,[kN,(0,s._)("div",CN,[(0,s._)("div",DN,[(0,s._)("table",SN,[zN,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.offers,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"odd:tw-bg-white even:tw-bg-gray-50 tw-border-b"},[(0,s._)("td",UN,(0,et.zw)(l.getProduct(t.product_id)?.name),1),(0,s._)("td",LN,(0,et.zw)(t.quantity),1),(0,s._)("td",PN,(0,et.zw)(t.price)+" "+(0,et.zw)(i.currency),1),(0,s._)("td",AN,[(0,s._)("p",WN,(0,et.zw)(t.note),1)])])))),128))])])])])])):(0,s.kq)("",!0)}var EN={props:{products:{required:!0},item:{required:!0}},data(){return{currency:c}},computed:{offers(){return this.products.filter((t=>this.item.items.map((t=>t.product_id)).includes(t.id))).flatMap((t=>t.offers))}},methods:{getProduct(t){return this.products.find((e=>e.id==t))}},mounted(){}};const qN=(0,p.Z)(EN,[["render",$N]]);var TN=qN,ON={components:{OrderItems:lN,OrderAffectation:bN,ProductOffersTable:TN},props:{visible:{required:!0},item:{required:!0}},data(){return{followup_confirmations:Tn,deliveryStatus:Vn,upsells:On,isLoading:!1,products_fetched:null,products:null,itemCopy:null,errors:{fullname:null,phone:null,city:null,adresse:null,note:null,reported_agente_date:null,affectation:null,items:null}}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{handleUpdate(){const t=sj(this,this.itemCopy);if(!t)return!1;nj(this,this.itemCopy)},cancel(){if(this.isLoading)return!1;this.$emit("update:visible",!1)},getProducts(){this.products_fetched=!1,sa.allForOrder().then((t=>{"SUCCESS"==t.data.code?this.products=t.data.data.products:this.products=[],this.products_fetched=!0})).catch(this.$handleApiError)}},mounted(){this.itemCopy=JSON.parse(JSON.stringify(this.item)),this.getProducts()}};const VN=(0,p.Z)(ON,[["render",aj]]);var IN=VN,FN={components:{UpdatePopup:IN},props:{item:{required:!0}},data(){return{update:!1,history:!1,isLoading:!1}},methods:{handle(){}}};const RN=(0,p.Z)(FN,[["render",nR]]);var jN=RN;const NN={key:0},MN={key:0,class:"tw-relative tw-inline-block tw-text-left"},HN={key:0},YN=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"#4ade80",d:"M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41L9 16.17z"})],-1),ZN=[YN],KN={class:"tw-w-full tw-truncate tw-text-start tw-text-gray-500"},BN={key:0,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},QN=(0,s.uE)('<g fill="none" stroke="#4ade80" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" stroke-opacity=".3" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="1.3s" values="60;0"></animate></path><path stroke-dasharray="15" stroke-dashoffset="15" d="M12 3C16.9706 3 21 7.02944 21 12"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="15;0"></animate><animateTransform attributeName="transform" dur="1.5s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"></animateTransform></path></g>',1),GN=[QN],JN={key:0,class:"tw-text-xs tw-mt-2 tw-max-w-[150px] tw-text-red-400 tw-whitespace-normal"},XN={key:0,class:"tw-absolute tw-right-0 tw-z-10 tw-mt-2 tw-w-56 tw-origin-top-right tw-rounded-md tw-bg-white tw-shadow-lg tw-ring-1 tw-ring-black tw-ring-opacity-5 focus:tw-outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",tabindex:"-1"},tM={class:"tw-py-1",role:"none"},eM=["onClick"],rM={key:1},aM={class:"tw-p-2 tw-scale-75"};function sM(t,e,r,a,i,l){const o=(0,s.up)("loading");return"confirmer"==r.item.confirmation?((0,s.wg)(),(0,s.iD)("div",NN,[r.deliveries.fetched?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",MN,[(0,s._)("div",null,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.visible=!i.visible),type:"button",class:"tw-inline-flex tw-w-[150px] tw-truncate tw-relative tw-items-center tw-gap-x-1.5 tw-rounded-md tw-bg-white tw-px-3 tw-py-1 tw-text-sm tw-font-semibold tw-text-gray-900 tw-shadow-none hover:tw-shadow-sm tw-ring-1 tw-ring-inset tw-ring-gray-200",id:"menu-button","aria-expanded":"true","aria-haspopup":"true"},[l.selected.id?((0,s.wg)(),(0,s.iD)("div",HN,ZN)):(0,s.kq)("",!0),(0,s._)("p",KN,(0,et.zw)(l.selected.name),1),(0,s._)("div",null,[i.isLoading?((0,s.wg)(),(0,s.iD)("svg",BN,GN)):(0,s.kq)("",!0)])]),i.errors.affectation?((0,s.wg)(),(0,s.iD)("p",JN,(0,et.zw)(i.errors.affectation),1)):(0,s.kq)("",!0)]),(0,s.Wm)($t.cu,null,{default:(0,s.w5)((()=>[i.visible?((0,s.wg)(),(0,s.iD)("div",XN,[(0,s._)("div",tM,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.availableDeliveries,(t=>((0,s.wg)(),(0,s.iD)("button",{onClick:e=>l.handleChange(t.id),key:t.id,class:"hover:tw-bg-gray-100 tw-items-center tw-w-full tw-text-start hover:tw-text-gray-700 tw-text-gray-700 tw-flex tw-gap-2 tw-px-4 tw-py-2 tw-text-sm",role:"menuitem"},[(0,s._)("span",null,(0,et.zw)(t.name),1)],8,eM)))),128))])])):(0,s.kq)("",!0)])),_:1})])),[[te.L,l.handleClickOutside]]):((0,s.wg)(),(0,s.iD)("div",rM,[(0,s._)("div",aM,[(0,s.Wm)(o)])]))])):(0,s.kq)("",!0)}var iM={props:{deliveries:{required:!0},item:{required:!0}},data(){return{visible:!1,isLoading:!1,errors:{}}},computed:{availableDeliveries(){return[{id:null,name:"Select"},...this.deliveries.items.filter((t=>t.has.some((t=>this.item.items.some((e=>e.product_id==t))))))]},selected(){return this.availableDeliveries.find((t=>t.id==this.item.affectation))}},methods:{handleClickOutside(){this.visible&&(this.visible=!1)},handleChange(t){this.visible=!1,this.errors={};const e={...this.item,affectation:t};nj(this,e,!1)}}};const lM=(0,p.Z)(iM,[["render",sM]]);var oM=lM,nM={components:{TableActions:jN,TableRowAffectation:oM},props:{item:{required:!0},selected:{required:!0},deliveries:{required:!0},all:{required:!0},index:{required:!0}},data(){return{moment:$P()}},computed:{confirmation(){return qn.find((t=>t.value==this.item.confirmation))},deliveryState(){return Vn.find((t=>t.value==this.item.delivery))},isSelected(){return this.selected.includes(this.item.id)}},methods:{handleSelected(t){if(t.target.checked){const t=[...this.selected];return t.push(this.item.id),this.$emit("update:selected",t),!1}const e=this.selected.filter((t=>t!=this.item.id));this.$emit("update:selected",e)}},mounted(){}};const dM=(0,p.Z)(nM,[["render",aR]]);var wM=dM,cM={components:{TablePaginationNoNums:PF,TableRow:wM},props:{items:{default:[]},loading:{type:Boolean,default:!0},from:{type:Number,default:1},to:{type:Number,default:1},perPage:{type:Number,default:10},total:{type:Number,default:0},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1},selected:{required:!0},deliveries:{required:!0}},data(){return{isAllSelected:!1}},computed:{selectedOrders:{get(){return this.selected},set(t){this.$emit("update:selected",t)}}},watch:{selected(t){0==t.length&&(this.isAllSelected=!1)}},methods:{handleSelectedAllChange(t){t.target.checked?(this.$emit("update:selected",[...this.items.map((t=>t.id))]),this.isAllSelected=!0):(this.$emit("update:selected",[]),this.isAllSelected=!1)}}};const uM=(0,p.Z)(cM,[["render",mF]]);var pM=uM;const mM={class:"tw-mt-6 tw-mb-4 md:tw-flex md:tw-items-center md:tw-justify-between"},gM={class:"tw-inline-flex tw-overflow-hidden tw-bg-white tw-border tw-divide-x tw-rounded-lg darkx:tw-bg-gray-900 rtl:tw-flex-row-reverse darkx:tw-border-gray-700 darkx:tw-divide-gray-700"},hM=["disabled"],fM=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M9 5a1 1 0 1 0 0 2a1 1 0 0 0 0-2zM6.17 5a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 0 1 0-2h1.17zM15 11a1 1 0 1 0 0 2a1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-1.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h7.17zM9 17a1 1 0 1 0 0 2a1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h1.17z"})],-1),vM=[fM],yM=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M10 2c-.6 0-1 .4-1 1v18c0 .6.4 1 1 1s1-.4 1-1V3c0-.6-.4-1-1-1zM5 12c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1s1-.4 1-1v-8c0-.6-.4-1-1-1zm10-4c-.6 0-1 .4-1 1v12c0 .6.4 1 1 1s1-.4 1-1V9c0-.6-.4-1-1-1zm5 8c-.6 0-1 .4-1 1v4c0 .6.4 1 1 1s1-.4 1-1v-4c0-.6-.4-1-1-1z"})],-1),xM=[yM],bM=["disabled"],_M=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 16 16"},[(0,s._)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4.75 10.75h-3m12.5-2c0 3-2.798 5.5-6.25 5.5c-3.75 0-6.25-3.5-6.25-3.5v3.5m9.5-9h3m-12.5 2c0-3 2.798-5.5 6.25-5.5c3.75 0 6.25 3.5 6.25 3.5v-3.5"})],-1),kM=[_M],CM={class:"tw-relative"},DM=["value"],SM=(0,s.uE)('<option value="5">5</option><option value="10">10</option><option value="20">20</option><option value="50">50</option><option value="100">100</option><option value="250">250</option><option value="500">500</option>',7),zM=[SM],UM=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),LM={class:"tw-relative tw-flex tw-items-center tw-mt-4 md:tw-mt-0"},PM=["value"],AM={class:"tw-overflow-hidden tw-col-span-1"},WM={class:"tw-overflow-hidden tw-col-span-1"};function $M(t,e,r,i,l,o){const n=(0,s.up)("FiltersWrapper"),d=((0,s.up)("IndexExport"),(0,s.up)("IndexStatistics"));return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",mM,[(0,s._)("div",gM,[(0,s._)("button",{class:(0,et.C_)([[l.showAll&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 hover:tw-bg-gray-100 sm:tw-text-sm darkx:tw-bg-gray-800 darkx:tw-text-gray-300"]),disabled:l.showAll,onClick:e[0]||(e[0]=t=>o.filterToday(!1))}," View all ",10,hM),(0,s.kq)("",!0),(0,s._)("button",{title:"Show Filters Tab",onClick:e[2]||(e[2]=t=>l.showFilters=!l.showFilters),class:(0,et.C_)([[l.showFilters&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"])},vM,2),r.activeStatistics&&r.statistics?((0,s.wg)(),(0,s.iD)("button",{key:1,title:"Show Statistics Tab",onClick:e[3]||(e[3]=t=>l.showStatistics=!l.showStatistics),class:(0,et.C_)([[l.showStatistics&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"])},xM,2)):(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s._)("button",{title:"Refresh",onClick:e[5]||(e[5]=e=>t.$emit("fresh")),disabled:r.loading,class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},kM,8,bM),(0,s.kq)("",!0),(0,s._)("div",CM,[(0,s._)("select",{onChange:e[7]||(e[7]=(...t)=>o.handlePerPageChange&&o.handlePerPageChange(...t)),value:r.perPage,class:"tw-h-full tw-px-5 tw-py-2 tw-w-20 focus:tw-outline-none tw-text-xs tw-font-medium tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},zM,40,DM),UM])]),(0,s._)("div",LM,[(0,s._)("input",{type:"text",placeholder:"Search",value:r.search,onInput:e[8]||(e[8]=e=>t.$emit("update:search",e.target.value)),onKeyup:e[9]||(e[9]=(0,a.D2)((e=>t.$emit("filter")),["enter"])),class:"tw-block tw-w-full tw-py-1.5 tw-pl-5 tw-text-gray-700 tw-bg-white tw-border tw-border-solid tw-border-gray-200 tw-rounded-lg md:tw-w-80 placeholder-gray-400/70 tw-pr-11 rtl:tw-pr-11 rtl:tw-pl-5 darkx:tw-bg-gray-900 darkx:tw-text-gray-300 darkx:tw-border-gray-600 focus:tw-border-orange-400 darkx:focus:tw-border-orange-300 focus:tw-ring-orange-300 focus:tw-outline-none focus:tw-ring focus:tw-ring-opacity-40"},null,40,PM),(0,s._)("button",{onClick:e[10]||(e[10]=e=>t.$emit("filter")),class:"tw-absolute tw-right-0 tw-px-2 tw-py-1 tw-w-[38px] tw-h-[36px] tw-border-solid tw-rounded-r-lg tw-border-l tw-text-orange-500/80 tw-border-orange-500/20 hover:tw-bg-orange-500/10 hover:tw-border-orange-500/70 tw-duration-300 tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(st.t,{size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-magnify")])),_:1})])])]),(0,s._)("div",{class:(0,et.C_)([[l.showFilters?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",AM,[(0,s.Wm)(n,{onClear:e[11]||(e[11]=e=>t.$emit("clear")),onFilter:e[12]||(e[12]=e=>t.$emit("filter")),filters:r.filters,onUpdate:e[13]||(e[13]=e=>t.$emit("update:filters",e))},null,8,["filters"])])],2),(0,s.kq)("",!0),r.statistics?((0,s.wg)(),(0,s.iD)("div",{key:1,class:(0,et.C_)([[l.showStatistics?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",WM,[(0,s.Wm)(d,{statistics:r.statistics},null,8,["statistics"])])],2)):(0,s.kq)("",!0)])}const EM={class:"tw-mb-4"},qM={class:"tw-grid tw-grid-cols-12 tw-gap-4"},TM={class:"tw-h-full tw-w-full tw-p-3 tw-rounded tw-space-y-2 tw-border tw-border-solid"},OM={class:"tw-flex tw-items-center tw-justify-between"},VM={class:"tw-text-xl tw-font-bold tw-text-gray-900"},IM={class:"tw-px-2 tw-py-1 tw-font-medium tw-text-sm tw-rounded tw-bg-white tw-text-gray-900"};function FM(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",EM,[(0,s._)("div",qM,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.visible,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"md:tw-col-span-3 tw-col-span-12"},[(0,s._)("div",TM,[(0,s._)("p",{class:(0,et.C_)(["tw-text-sm tw-font-bold tw-w-fit tw-h-fit tw-px-2 tw-rounded",[l.getConfirmation(t.confirmation).textLight,l.getConfirmation(t.confirmation).bgLight]])},(0,et.zw)(t.name),3),(0,s._)("div",OM,[(0,s._)("span",VM,(0,et.zw)(t.total),1),(0,s._)("span",IM,(0,et.zw)(t.percent)+"%",1)])])])))),128))])])}var RM={props:{statistics:{required:!0}},computed:{visible(){return this.statistics.show.includes("*")?this.statistics.data:this.statistics.data.filter((t=>this.statistics.show.includes(t.followup_confirmation)))}},methods:{getConfirmation(t){return qn.find((e=>e.value==t))}}};const jM=(0,p.Z)(RM,[["render",FM]]);var NM=jM;const MM={class:"tw-mb-4"},HM={class:"tw-flex tw-items-center tw-gap-2"},YM=["disabled"],ZM=(0,s._)("span",null,"Select Filtered",-1),KM={class:"tw-flex tw-justify-end"},BM=["disabled"];function QM(t,e,r,a,i,l){const o=(0,s.up)("download-csv");return(0,s.wg)(),(0,s.iD)("div",MM,[(0,s._)("div",HM,[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>l.handleExportFiltered&&l.handleExportFiltered(...t)),disabled:i.isLoadingFiltered,class:"tw-py-2 tw-px-7 tw-flex tw-items-center tw-rounded tw-text-sm tw-bg-orange-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-orange-600 dark:tw-border-neutral-900 dark:hover:tw-border-orange-500 hover:tw-bg-orange-500/80 dark:hover:tw-bg-orange-400 tw-duration-300 tw-text-white"},[(0,s.Wm)(st.t,{size:"small",class:(0,et.C_)(["tw-duration-300 tw-animate-spin tw-overflow-hidden tw-max-w-0 tw-mr-0",[i.isLoadingFiltered&&"!tw-max-w-[50px] !tw-mr-3"]])},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1},8,["class"]),ZM],8,YM)]),(0,s._)("div",KM,[(0,s._)("button",{disabled:i.readyToDownload,class:(0,et.C_)([[!i.readyToDownload&&"!tw-bg-gray-200 !tw-cursor-not-allowed hover:tw-bg-gray-200 !tw-text-gray-600"],"tw-py-2 tw-px-7 tw-flex tw-items-center tw-cursor-pointer tw-rounded tw-text-sm tw-bg-emerald-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-emerald-600 dark:tw-border-neutral-900 dark:hover:tw-border-emerald-500 hover:tw-bg-emerald-500/80 dark:hover:tw-bg-emerald-400 tw-duration-300 tw-text-white"])},[(0,s.Wm)(o,{delimiter:";",data:i.toImport},{default:(0,s.w5)((()=>[(0,s.Uk)(" Download ")])),_:1},8,["data"])],10,BM)])])}var GM={props:{filters:{required:!0}},data(){return{isLoadingFiltered:!1,isLoading:!1,toImport:[],readyToDownload:!1}},watch:{filters:{deep:!0,handler(){this.readyToDownload=!1}}},methods:{handleExportFiltered(){this.isLoadingFiltered=!0,this.readyToDownload=!1,sL["export"]({filters:this.filters}).then((t=>{if("SUCCESS"==t.data.code){const e=t.data.data.orders;this.importOrders(e),this.readyToDownload=!0}})).catch(this.$handleApiError).finally((()=>{this.isLoadingFiltered=!1}))},importOrders(t){const e=t.map((t=>{const e=Object.keys(t);return e.forEach((e=>{t[e]=t[e]?t[e]:"NONE"})),t})),r=",",a=e.map((t=>(delete t["factorisation_id"],delete t["note_d"],delete t["cmd"],delete t["product_name"],delete t["is_done"],delete t["factorisation"],delete t["doubles"],delete t["is_double"],delete t["has_doubles"],delete t["double"],{...t,products:t.items.map((t=>`id=${t.id}${r}price=${t.price?t.price:0}${r}name=${t.product?.name}${r}ref=${t.product?.ref}${r}variation_id=${t.product_variation_id}${r}size=${t.product_variation.size?t.product_variation.size:"DEFAULT"}${r}color=${t.product_variation.color?t.product_variation.color:"DEFAULT"}${r}`))})));this.toImport=a.map((t=>(delete t["items"],t)))}}};const JM=(0,p.Z)(GM,[["render",QM]]);var XM=JM;const tH={class:"tw-mb-4"},eH={class:"tw-grid tw-grid-cols-12 tw-gap-4 tw-p-1"},rH={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},aH=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Reconfirmation",-1),sH=["value"],iH=(0,s._)("option",{value:"all",selected:""},"All",-1),lH=["value"],oH={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},nH=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Delivery",-1),dH=["value"],wH=(0,s._)("option",{value:"all",selected:""},"All",-1),cH=["value"],uH={class:"tw-col-span-12 tw-flex tw-justify-end tw-gap-2"},pH=(0,s._)("svg",{class:"tw-stroke-gray-500",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59L7.11 5.7A.996.996 0 1 0 5.7 7.11L10.59 12L5.7 16.89a.996.996 0 1 0 1.41 1.41L12 13.41l4.89 4.89a.996.996 0 1 0 1.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"})],-1),mH=(0,s._)("span",null,"Clear",-1),gH=[pH,mH],hH=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[(0,s._)("path",{fill:"#fff",d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})],-1),fH=(0,s._)("span",null,"Filter",-1),vH=[hH,fH];function yH(t,e,r,a,i,l){(0,s.up)("ProductFilter"),(0,s.up)("AgentFilter");const o=(0,s.up)("AffectationFilter");return(0,s.wg)(),(0,s.iD)("div",tH,[(0,s._)("div",eH,[(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s._)("div",rH,[aH,(0,s._)("select",{value:r.filters.followup_confirmation,onChange:e[6]||(e[6]=e=>t.$emit("update",{...r.filters,followup_confirmation:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[iH,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.followup_confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,et.C_)([[t.text,null==t.value&&"!tw-text-green-500"],"tw-capitalize"]),value:t.value?t.value:"",key:t.value},(0,et.zw)(t.name),11,lH)))),128))],40,sH)]),(0,s.Wm)(o,{filters:r.filters,onUpdate:e[7]||(e[7]=e=>t.$emit("update",e))},null,8,["filters"]),(0,s._)("div",oH,[nH,(0,s._)("select",{onChange:e[8]||(e[8]=e=>t.$emit("update",{...r.filters,delivery:e.target.value})),value:r.filters.delivery,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[wH,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,et.C_)([[t.text,null==t.value&&"!tw-text-gray-500"],"tw-capitalize"]),value:t.value?t.value:"",key:t.id},(0,et.zw)(t.name),11,cH)))),128))],40,dH)]),(0,s.kq)("",!0),(0,s._)("div",uH,[(0,s._)("button",{onClick:e[10]||(e[10]=e=>t.$emit("clear")),class:"tw-flex tw-items-center tw-text-gray-500 tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-transition-colors tw-duration-200 tw-bg-gray-200 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-300 darkx:hover:tw-bg-gray-500 darkx:tw-bg-gray-600"},gH),(0,s._)("button",{onClick:e[11]||(e[11]=e=>t.$emit("filter")),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},vH)])])])}const xH={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},bH=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Affectation",-1),_H=["value"],kH=(0,s._)("option",{value:"all"},"All",-1),CH=(0,s._)("option",{value:""},"No Delivery",-1),DH=["value"];function SH(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",xH,[bH,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...r.filters,affectation:e.target.value})),value:r.filters.affectation,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[kH,CH,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,et.zw)(t.firstname)+" "+(0,et.zw)(t.lastname),9,DH)))),128))],40,_H)])}var zH={props:{filters:{required:!0}},data(){return{}},computed:{users(){return this.$store.getters["user/users"]},deliveries(){return this.fetched?this.users.filter((t=>"delivery"==t.role.name)):[]},fetched(){return this.$store.getters["user/fetched"]}}};const UH=(0,p.Z)(zH,[["render",SH]]);var LH=UH;const PH={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},AH=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Agent",-1),WH=["value"],$H=(0,s._)("option",{value:"all"},"All",-1),EH=(0,s._)("option",{value:""},"No Agent",-1),qH=["value"];function TH(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",PH,[AH,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...r.filters,agente_id:e.target.value})),value:r.filters.agente_id,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[$H,EH,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.agents,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,et.zw)(t.firstname)+" "+(0,et.zw)(t.lastname),9,qH)))),128))],40,WH)])}var OH={props:{filters:{required:!0}},data(){return{}},computed:{users(){return this.$store.getters["user/users"]},agents(){return this.fetched?this.users.filter((t=>"agente"==t.role.name)):[]},fetched(){return this.$store.getters["user/fetched"]}}};const VH=(0,p.Z)(OH,[["render",TH]]);var IH=VH;const FH={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},RH=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Product",-1),jH=["value"],NH=(0,s._)("option",{value:"all"},"All",-1),MH=["value"];function HH(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",FH,[RH,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...r.filters,product_id:e.target.value})),value:r.filters.product_id,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[NH,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.products,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,et.zw)(t.name),9,MH)))),128))],40,jH)])}var YH={props:{filters:{required:!0}},data(){return{}},computed:{products(){return this.$store.getters["product/products"]},fetched(){return this.$store.getters["product/fetched"]}},methods:{getProducts(){return sa.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}}};const ZH=(0,p.Z)(YH,[["render",HH]]);var KH=ZH,BH={components:{AffectationFilter:LH,AgentFilter:IH,ProductFilter:KH},props:{filters:{required:!0,default:{}}},data(){return{followup_confirmations:Tn,deliveries:Vn,dateFilter:["",""]}}};const QH=(0,p.Z)(BH,[["render",yH]]);var GH=QH,JH={components:{IndexStatistics:NM,FiltersWrapper:GH,IndexExport:XM},props:{perPage:{type:Number},statistics:{default:null},activeStatistics:{type:Boolean,default:!1},loading:{default:!0},search:{default:""},filters:{required:!0}},data(){return{showFilters:!1,showStatistics:!1,showExport:!1,showAll:!0,showToday:!1}},methods:{handlePerPageChange(t){this.$emit("perPageChange",t.target.value)},showReportedFirst(){this.$emit("update:filters",{...this.filters,reported_first:!this.filters.reported_first}),this.$emit("filter")},filterToday(t){var e=null;t?(this.showAll=!1,this.showToday=!0,e=$P()(),e=e.format("YYYY-MM-DD")):(this.showAll=!0,this.showToday=!1),this.$emit("update:filters",{...this.filters,created_from:e,created_to:e}),this.$emit("filter")}},mounted(){}};const XH=(0,p.Z)(JH,[["render",$M]]);var tY=XH;const eY={class:"tw-mx-auto tw-w-[95%] md:tw-max-w-[800px] tw-overflow-hidden tw-h-fit dark:tw-bg-neutral-900 tw-bg-white tw-border tw-border-solid dark:tw-border-neutral-700 tw-border-neutral-300 tw-shadow-md tw-my-5 tw-rounded-lg"},rY=(0,s._)("div",{class:"tw-p-4 tw-text-lg tw-border-b tw-border-solid tw-font-medium tw-flex dark:tw-text-neutral-400 tw-text-neutral-500 tw-items-center tw-gap-4 dark:tw-bg-neutral-800 tw-bg-gray-50"}," Order Informations ",-1),aY={class:"tw-bg-white tw-p-4"},sY={class:"tw-grid tw-gap-6 tw-gap-y-5 tw-grid-cols-1 md:tw-grid-cols-2"},iY={class:"tw-col-span-2 md:tw-col-span-1"},lY=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Client Name",-1),oY={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},nY={class:"tw-col-span-2 md:tw-col-span-1"},dY=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Phone Number",-1),wY={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},cY={class:"tw-col-span-2 md:tw-col-span-1"},uY=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"City",-1),pY={class:"tw-relative"},mY=(0,s._)("option",{value:null,disabled:""},"Choose a City",-1),gY=["value"],hY=["value"],fY=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),vY={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},yY={class:"tw-col-span-2 md:tw-col-span-1"},xY=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Address",-1),bY={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},_Y={class:"tw-col-span-2"},kY=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Reconfirmation",-1),CY={class:"tw-relative"},DY=["value"],SY=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),zY={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},UY={key:0,class:"md:tw-col-span-1 tw-col-span-2"},LY=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Date",-1),PY={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},AY={key:1,class:"md:tw-col-span-1 tw-col-span-2"},WY=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Note",-1),$Y={class:"tw-col-span-2"},EY=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Note",-1),qY={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},TY={class:"md:tw-col-span-1 tw-col-span-2"},OY={class:"md:tw-col-span-1 tw-col-span-2"},VY=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Upsell",-1),IY={class:"tw-relative"},FY=["value"],RY=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),jY={class:"tw-col-span-2"},NY={class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},MY={key:0,class:"tw-text-red-400 tw-text-xs"},HY={class:"tw-flex tw-justify-end tw-items-center tw-p-4 tw-gap-3 dark:tw-bg-neutral-900 tw-bg-gray-50 tw-border-t tw-border-solid"},YY=["disabled"],ZY=(0,s._)("span",null,"Create",-1);function KY(t,e,r,i,l,o){const n=(0,s.up)("OrderAffectation"),d=(0,s.up)("OrderItems"),w=(0,s.up)("popup-new");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(w,{visible:r.visible,closeable:!1,onCancel:o.cancel},{default:(0,s.w5)((()=>[(0,s._)("div",eY,[rY,(0,s._)("div",aY,[(0,s._)("div",sY,[(0,s._)("div",iY,[lY,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.itemCopy.fullname=t),onInput:e[1]||(e[1]=t=>l.errors.fullname=null),type:"text",class:(0,et.C_)([[l.errors.fullname&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),placeholder:"John",required:""},null,34),[[a.nr,l.itemCopy.fullname]]),l.errors.fullname?((0,s.wg)(),(0,s.iD)("label",oY,(0,et.zw)(l.errors.fullname),1)):(0,s.kq)("",!0)]),(0,s._)("div",nY,[dY,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.itemCopy.phone=t),onInput:e[3]||(e[3]=t=>l.errors.phone=null),class:(0,et.C_)([[l.errors.phone&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"123-45-678",required:""},null,34),[[a.nr,l.itemCopy.phone]]),l.errors.phone?((0,s.wg)(),(0,s.iD)("label",wY,(0,et.zw)(l.errors.phone),1)):(0,s.kq)("",!0)]),(0,s._)("div",cY,[uY,(0,s._)("div",pY,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.itemCopy.city=t),onChange:e[5]||(e[5]=t=>l.errors.city=null),class:(0,et.C_)([[l.errors.city&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 tw-pr-7"])},[mY,(0,s._)("option",{value:l.itemCopy.city,disabled:""},(0,et.zw)(l.itemCopy.city),9,gY),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,et.zw)(t.name),9,hY)))),128))],34),[[a.bM,l.itemCopy.city]]),fY]),l.errors.city?((0,s.wg)(),(0,s.iD)("label",vY,(0,et.zw)(l.errors.city),1)):(0,s.kq)("",!0)]),(0,s._)("div",yY,[xY,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>l.itemCopy.adresse=t),onInput:e[7]||(e[7]=t=>l.errors.adresse=null),class:(0,et.C_)([[l.errors.adresse&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"Address",required:""},null,34),[[a.nr,l.itemCopy.adresse]]),l.errors.adresse?((0,s.wg)(),(0,s.iD)("label",bY,(0,et.zw)(l.errors.adresse),1)):(0,s.kq)("",!0)]),(0,s._)("div",_Y,[kY,(0,s._)("div",CY,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>l.itemCopy.followup_confirmation=t),onChange:e[9]||(e[9]=t=>l.errors.followup_confirmation=null),class:(0,et.C_)([[l.errors.followup_confirmation&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.followup_confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,class:(0,et.C_)([t.text,!t.value&&"!tw-text-green-500"]),key:t.id},(0,et.zw)(t.name),11,DY)))),128))],34),[[a.bM,l.itemCopy.followup_confirmation]]),SY]),l.errors.followup_confirmation?((0,s.wg)(),(0,s.iD)("label",zY,(0,et.zw)(l.errors.followup_confirmation),1)):(0,s.kq)("",!0)]),"reporter"==l.itemCopy.followup_confirmation?((0,s.wg)(),(0,s.iD)("div",UY,[LY,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>l.itemCopy.followup_reported_date=t),onInput:e[11]||(e[11]=t=>l.errors.followup_reported_date=null),class:(0,et.C_)([[l.errors.followup_reported_date&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"date",required:""},null,34),[[a.nr,l.itemCopy.followup_reported_date]]),l.errors.followup_reported_date?((0,s.wg)(),(0,s.iD)("label",PY,(0,et.zw)(l.errors.followup_reported_date),1)):(0,s.kq)("",!0)])):(0,s.kq)("",!0),"reporter"==l.itemCopy.followup_confirmation?((0,s.wg)(),(0,s.iD)("div",AY,[WY,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[12]||(e[12]=t=>l.itemCopy.followup_reported_note=t),rows:"1",class:"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500",placeholder:"Enter a note"},null,512),[[a.nr,l.itemCopy.followup_reported_note]])])):(0,s.kq)("",!0),(0,s._)("div",$Y,[EY,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[13]||(e[13]=t=>l.itemCopy.note=t),onInput:e[14]||(e[14]=t=>l.errors.note=null),class:(0,et.C_)([[l.errors.note&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),rows:"3",placeholder:"Enter a note"},null,34),[[a.nr,l.itemCopy.note]]),l.errors.note?((0,s.wg)(),(0,s.iD)("label",qY,(0,et.zw)(l.errors.note),1)):(0,s.kq)("",!0)]),(0,s._)("div",TY,[(0,s.Wm)(n,{item:l.itemCopy,error:l.errors.affectation,"onUpdate:error":e[15]||(e[15]=t=>l.errors.affectation=t),affectation:l.itemCopy.affectation,"onUpdate:affectation":e[16]||(e[16]=t=>l.itemCopy.affectation=t)},null,8,["item","error","affectation"])]),(0,s._)("div",OY,[VY,(0,s._)("div",IY,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[17]||(e[17]=t=>l.itemCopy.upsell=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.upsells,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,et.C_)([t.text]),value:t.value,key:t.id},(0,et.zw)(t.name),11,FY)))),128))],512),[[a.bM,l.itemCopy.upsell]]),RY])]),(0,s._)("div",jY,[(0,s._)("label",NY,[(0,s.Uk)("Order Items "),l.errors.items?((0,s.wg)(),(0,s.iD)("span",MY," # "+(0,et.zw)(l.errors.items),1)):(0,s.kq)("",!0)]),(0,s._)("div",null,[(0,s.Wm)(d,{order:l.itemCopy,error:l.errors.items,products:l.products,"products-fetched":l.products_fetched,items:l.itemCopy.items,"onUpdate:items":e[18]||(e[18]=t=>l.itemCopy.items=t)},null,8,["order","error","products","products-fetched","items"])])])])]),(0,s._)("div",HY,[(0,s._)("button",{onClick:e[19]||(e[19]=(...t)=>o.cancel&&o.cancel(...t)),class:"tw-py-2 tw-px-7 tw-rounded tw-text-sm tw-border tw-border-solid tw-border-tansparent dark:tw-border-neutral-900 hover:tw-border-neutral-400 dark:hover:tw-border-neutral-500 hover:tw-bg-gray-300 tw-bg-gray-200 dark:tw-bg-neutral-600 tw-duration-300 tw-text-neutral-900 dark:tw-text-neutral-300"}," Cancel "),(0,s._)("button",{onClick:e[20]||(e[20]=(...t)=>o.handleCreate&&o.handleCreate(...t)),disabled:l.isLoading,class:"tw-py-2 tw-px-7 tw-flex tw-items-center tw-rounded tw-text-sm tw-bg-orange-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-orange-600 dark:tw-border-neutral-900 dark:hover:tw-border-orange-500 hover:tw-bg-orange-500/80 dark:hover:tw-bg-orange-400 tw-duration-300 tw-text-white"},[(0,s.Wm)(st.t,{size:"small",class:(0,et.C_)(["tw-duration-300 tw-animate-spin tw-overflow-hidden tw-max-w-0 tw-mr-0",[l.isLoading&&"!tw-max-w-[50px] !tw-mr-3"]])},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1},8,["class"]),ZY],8,YY)])])])),_:1},8,["visible","onCancel"])])}const BY=(t,e)=>{t.$alert({title:"Created Successfully",type:"success"}),console.log(e),t.isLoading=!1,t.cancel(),t.errors={}},QY=(t,e)=>{t.$alert({title:e.message,type:"error"}),"VALIDATION_ERROR"==e.code&&(t.errors=e.errors),t.isLoading=!1},GY=(t,e)=>{t.isLoading=!0,t.errors={},Jl.create(e).then((e=>BY(t,e.data))).catch((e=>QY(t,e.response.data))).finally((()=>t.isLoading=!1))};var JY={components:{OrderItems:lN,OrderAffectation:bN},props:{visible:{required:!0}},data(){return{followup_confirmations:Tn,upsells:On,isLoading:!1,products_fetched:null,products:null,itemCopy:null,errors:{fullname:null,phone:null,city:null,adresse:null,note:null,reported_agente_date:null,affectation:null,items:null}}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{handleCreate(){const t=sj(this,this.itemCopy);if(!t)return!1;GY(this,this.itemCopy)},cancel(){if(this.isLoading)return!1;this.$emit("update:visible",!1)},getProducts(){this.products_fetched=!1,sa.allForOrder().then((t=>{"SUCCESS"==t.data.code?this.products=t.data.data.products:this.products=[],this.products_fetched=!0})).catch(this.$handleApiError)}},mounted(){this.itemCopy={confirmation:"confirmer",upsell:null,items:[]},this.getProducts()}};const XY=(0,p.Z)(JY,[["render",KY]]);var tZ=XY,eZ={components:{IndexTable:pM,IndexFilters:tY,CreatePopup:tZ,BulkActions:$V},data(){return{fetching:!0,create_popup:!1,items:[],selected:[],deliveries:{fetched:!1,items:[]},statistics:null,first_page_url:null,lase_page_url:null,next_page_url:null,prev_page_url:null,last_page:1,from:1,to:1,total:0,totalOrders:0,links:null,search:"",sort_by:"created_at",sort_order:"desc",per_page:10,current_page:1,filters:{created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"all",product_id:"all",delivery:"all",reported_first:!1}}},methods:{paginateOrders(){const t="?page="+this.current_page,e={sort_by:this.sort_by,sort_order:this.sort_order,per_page:this.per_page,current_page:this.current_page,search:this.search,filters:this.filters};return this.fetching=!0,Jl.paginate(t,e).then((({data:t})=>{const e=t.data.orders;this.setOptions(e),this.statistics=this.search?this.statistics:t.data.statistics})).then((()=>{this.fetching=!1}))},setOptions(t){this.items=t.data,this.first_page_url=Qi(t.first_page_url),this.lase_page_url=Qi(t.last_page_url),this.next_page_url=Qi(t.next_page_url),this.prev_page_url=Qi(t.prev_page_url),this.last_page=parseInt(t.last_page),this.from=parseInt(t.from),this.to=parseInt(t.to),this.per_page=parseInt(t.per_page),this.total=parseInt(t.total),this.totalOrders=this.search?this.totalOrders:parseInt(t.total),this.links=t.links},handleClearFilters(){this.filters={created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"all",product_id:"all",delivery:"all",reported_first:!1},this.handlePageChange(1)},handleBulkUpdate(){this.selected=[],this.paginateOrders()},handleItemUpdate(t){this.items=this.items.map((e=>e.id==t.id?t:e))},handlePageChange(t){this.current_page=t,this.paginateOrders()},handlePerPageChange(t){this.per_page=parseInt(t),this.handlePageChange(1)},handleSortOrderChange(){this.sort_order="asc"==this.sort_order?"desc":"asc",this.paginateOrders()},getDeliveries(){this.deliveries.fetched=!1,X.allDeliveries().then((t=>{"SUCCESS"==t?.data.code&&(this.deliveries.items=t.data.data.deliveries,this.deliveries.fetched=!0)})).catch(this.$handleApiError)}},mounted(){this.paginateOrders(),this.getDeliveries()}};const rZ=(0,p.Z)(eZ,[["render",PI]]);var aZ=rZ,sZ={name:"sales",path:"/sales",component:da,meta:{module:"sale"},children:[{name:"sale/list",path:"",component:jU,meta:{module:"sale",subModule:"sale/list",title:"Sales List",gate:"show_all_sales"}},{name:"sale/newlist",path:"new",component:TV,meta:{module:"sale",subModule:"sale/newlist",title:"Sales List",gate:"show_all_sales"}},{name:"sale/expidation",path:"expidation",component:XV,meta:{module:"sale",subModule:"sale/expidation",title:"Expidation",gate:"show_all_expidations"}},{name:"sale/shipping",path:"shipping",component:hI,meta:{module:"sale",subModule:"sale/shipping",title:"Shipping",gate:"show_all_expidations"}},{name:"sale/followup",path:"followup",component:aZ,meta:{module:"followup",subModule:"sale/followup",title:"Follow Up",gate:"show_all_expidations"}}]};const iZ={class:"py-5 px-2 tw-border tw-bg-white tw-w-full tw-rounded-md tw-mb-5"},lZ={class:"tw-px-3"},oZ={class:"tw-flex tw-items-center tw-justify-between tw-flex-wrap"},nZ={class:"tw-flex tw-items-center tw-gap-x-3"},dZ=(0,s._)("h2",{class:"tw-text-lg tw-font-medium tw-text-gray-800 darkx:tw-text-white"},"Orders",-1),wZ={class:"tw-px-3 tw-py-1 tw-text-xs tw-text-emerald-600 tw-bg-emerald-100 tw-rounded-full darkx:tw-bg-gray-800 darkx:tw-text-orange-400"},cZ=(0,s._)("p",{class:"tw-mt-1 tw-text-sm tw-text-gray-500 darkx:tw-text-gray-300"},"Show all orders.",-1);function uZ(t,e,r,a,i,l){const o=(0,s.up)("IndexFilters"),n=(0,s.up)("IndexTable");return(0,s.wg)(),(0,s.iD)("div",iZ,[(0,s._)("section",lZ,[(0,s._)("div",oZ,[(0,s._)("div",null,[(0,s._)("div",nZ,[dZ,(0,s._)("span",wZ,(0,et.zw)(i.totalOrders)+" order",1)]),cZ]),(0,s.kq)("",!0)]),(0,s.Wm)(o,{search:i.search,"onUpdate:search":e[0]||(e[0]=t=>i.search=t),filters:i.filters,"onUpdate:filters":e[1]||(e[1]=t=>i.filters=t),onFilter:e[2]||(e[2]=t=>l.handlePerPageChange(i.per_page)),onPerPageChange:l.handlePerPageChange,onFresh:l.paginateOrders,loading:i.fetching,statistics:i.statistics,"active-statistics":""},null,8,["search","filters","onPerPageChange","onFresh","loading","statistics"]),(0,s._)("div",null,[(0,s.Wm)(n,{onUpdate:l.handleItemUpdate,onPageChange:l.handlePageChange,onSortOrder:l.handleSortOrderChange,loading:i.fetching,from:i.from,to:i.to,"last-page":i.last_page,"per-page":i.per_page,total:i.total,"current-page":i.current_page,items:i.items},null,8,["onUpdate","onPageChange","onSortOrder","loading","from","to","last-page","per-page","total","current-page","items"])])])])}const pZ={class:"tw-flex tw-flex-col"},mZ={class:"tw-overflow-x-auto"},gZ={class:"tw-inline-block tw-min-w-full tw-align-middle"},hZ={class:"tw-overflow-hidden tw-border tw-border-gray-200 darkx:tw-border-gray-700 md:tw-rounded-lg"},fZ={class:"tw-min-w-full tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700"},vZ={class:"tw-bg-gray-50 darkx:tw-bg-gray-800"},yZ=(0,s._)("th",{scope:"col",class:"tw-py-3.5 tw-px-4 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"},[(0,s._)("span",null,"ID")],-1),xZ={scope:"col",class:"tw-py-3.5 tw-px-4 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"},bZ=(0,s._)("span",null,"Created",-1),_Z=(0,s._)("svg",{class:"tw-h-3",viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s._)("path",{d:"M2.13347 0.0999756H2.98516L5.01902 4.79058H3.86226L3.45549 3.79907H1.63772L1.24366 4.79058H0.0996094L2.13347 0.0999756ZM2.54025 1.46012L1.96822 2.92196H3.11227L2.54025 1.46012Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,s._)("path",{d:"M0.722656 9.60832L3.09974 6.78633H0.811638V5.87109H4.35819V6.78633L2.01925 9.60832H4.43446V10.5617H0.722656V9.60832Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,s._)("path",{d:"M8.45558 7.25664V7.40664H8.60558H9.66065C9.72481 7.40664 9.74667 7.42274 9.75141 7.42691C9.75148 7.42808 9.75146 7.42993 9.75116 7.43262C9.75001 7.44265 9.74458 7.46304 9.72525 7.49314C9.72522 7.4932 9.72518 7.49326 9.72514 7.49332L7.86959 10.3529L7.86924 10.3534C7.83227 10.4109 7.79863 10.418 7.78568 10.418C7.77272 10.418 7.73908 10.4109 7.70211 10.3534L7.70177 10.3529L5.84621 7.49332C5.84617 7.49325 5.84612 7.49318 5.84608 7.49311C5.82677 7.46302 5.82135 7.44264 5.8202 7.43262C5.81989 7.42993 5.81987 7.42808 5.81994 7.42691C5.82469 7.42274 5.84655 7.40664 5.91071 7.40664H6.96578H7.11578V7.25664V0.633865C7.11578 0.42434 7.29014 0.249976 7.49967 0.249976H8.07169C8.28121 0.249976 8.45558 0.42434 8.45558 0.633865V7.25664Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.3"})],-1),kZ=[bZ,_Z],CZ=(0,s._)("th",{scope:"col",class:"tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Client ",-1),DZ=(0,s._)("th",{scope:"col",class:"tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Phone ",-1),SZ=(0,s._)("th",{scope:"col",class:"tw-w-10 tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Products ",-1),zZ=(0,s._)("th",{scope:"col",class:"tw-w-10 tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Confirmation ",-1),UZ=(0,s._)("th",{scope:"col",class:"tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Affected ",-1),LZ=(0,s._)("th",{scope:"col",class:"tw-relative tw-py-3.5 tw-px-4"},[(0,s._)("span",{class:"tw-sr-only"},"Actions")],-1),PZ={key:0,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},AZ={key:1,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},WZ=(0,s._)("tr",null,[(0,s._)("td",{colspan:"8"},[(0,s._)("div",{class:"tw-p-5 tw-text-center tw-text-gray-600 tw-font-medium"}," No Order was found ! ")])],-1),$Z=[WZ],EZ={key:2,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},qZ={colspan:"8"},TZ={role:"status",class:"tw-w-full tw-p-4 tw-space-y-4 tw-border-gray-200 tw-divide-y tw-divide-gray-200 tw-rounded tw-shadow tw-animate-pulse dark:tw-divide-gray-700 md:tw-p-6 dark:tw-border-gray-700"},OZ=(0,s._)("div",{class:"tw-flex tw-items-center tw-justify-between"},[(0,s._)("div",null,[(0,s._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-600 tw-w-24 tw-mb-2.5"}),(0,s._)("div",{class:"tw-w-32 tw-h-2 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-700"})]),(0,s._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-700 tw-w-12"})],-1),VZ=(0,s._)("div",null,[(0,s._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-600 tw-w-24 tw-mb-2.5"}),(0,s._)("div",{class:"tw-w-32 tw-h-2 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-700"})],-1),IZ=(0,s._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-700 tw-w-12"},null,-1),FZ=[VZ,IZ],RZ={class:"tw-mt-6"};function jZ(t,e,r,a,i,l){const o=(0,s.up)("TableRow"),n=((0,s.up)("loading"),(0,s.up)("TablePaginationNoNums"));return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",pZ,[(0,s._)("div",mZ,[(0,s._)("div",gZ,[(0,s._)("div",hZ,[(0,s._)("table",fZ,[(0,s._)("thead",vZ,[(0,s._)("tr",null,[yZ,(0,s._)("th",xZ,[(0,s._)("button",{onClick:e[0]||(e[0]=e=>t.$emit("sortOrder",{name:"created_at"})),class:"tw-flex tw-items-center tw-gap-x-3 focus:tw-outline-none"},kZ)]),CZ,DZ,SZ,zZ,UZ,LZ])]),!r.loading&&r.items.length>0?((0,s.wg)(),(0,s.iD)("tbody",PZ,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.items,(r=>((0,s.wg)(),(0,s.j4)(o,{onUpdate:e[1]||(e[1]=e=>t.$emit("update",e)),key:r.id,item:r},null,8,["item"])))),128))])):(0,s.kq)("",!0),r.loading||0!=r.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("tbody",AZ,$Z)),r.loading?((0,s.wg)(),(0,s.iD)("tbody",EZ,[(0,s._)("tr",null,[(0,s.kq)("",!0),(0,s._)("td",qZ,[(0,s._)("div",TZ,[OZ,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.perPage-1,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"tw-flex tw-items-center tw-justify-between tw-pt-4"},FZ)))),128))])])])])):(0,s.kq)("",!0)])])])])]),(0,s._)("div",RZ,[(0,s.Wm)(n,{from:r.from,to:r.to,"last-page":r.lastPage,"per-page":r.perPage,total:r.total,"current-page":r.currentPage,onPageChange:e[2]||(e[2]=e=>t.$emit("pageChange",e))},null,8,["from","to","last-page","per-page","total","current-page"])])])}const NZ={class:"sm:tw-flex sm:tw-items-center sm:tw-justify-between"},MZ={class:"tw-text-sm tw-text-gray-500 darkx:tw-text-gray-400"},HZ={class:"tw-font-medium tw-text-gray-700 darkx:tw-text-gray-100"},YZ={class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-4 sm:tw-mt-0"},ZZ=["disabled"],KZ=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5 rtl:tw--scale-x-100"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18"})],-1),BZ=(0,s._)("span",null," previous ",-1),QZ=[KZ,BZ],GZ=["disabled"],JZ=(0,s._)("span",null," Next ",-1),XZ=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5 rtl:tw--scale-x-100"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"})],-1),tK=[JZ,XZ];function eK(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",NZ,[(0,s._)("div",MZ,[(0,s.Uk)(" Page "),(0,s._)("span",HZ,(0,et.zw)(r.currentPage)+" of "+(0,et.zw)(r.lastPage),1)]),(0,s._)("div",YZ,[(0,s._)("button",{disabled:r.currentPage<=1,onClick:e[0]||(e[0]=t=>l.changePage(r.currentPage-1)),class:(0,et.C_)([[r.currentPage<=1&&"tw-cursor-not-allowed"],"tw-flex tw-items-center tw-justify-center tw-w-1/2 tw-px-5 tw-py-2 tw-text-sm tw-text-gray-700 tw-capitalize tw-transition-colors tw-duration-200 tw-bg-white tw-border tw-border-solid tw-rounded-md sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-100 darkx:tw-bg-gray-900 darkx:tw-text-gray-200 darkx:tw-border-gray-700 darkx:hover:tw-bg-gray-800"])},QZ,10,ZZ),(0,s._)("button",{disabled:r.currentPage>=l.totalPages,onClick:e[1]||(e[1]=t=>l.changePage(r.currentPage+1)),class:(0,et.C_)([[r.currentPage>=l.totalPages&&"tw-cursor-not-allowed"],"tw-flex tw-items-center tw-justify-center tw-w-1/2 tw-px-5 tw-py-2 tw-text-sm tw-text-gray-700 tw-capitalize tw-transition-colors tw-duration-200 tw-bg-white tw-border tw-border-solid tw-rounded-md sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-100 darkx:tw-bg-gray-900 darkx:tw-text-gray-200 darkx:tw-border-gray-700 darkx:hover:tw-bg-gray-800"])},tK,10,GZ)])])])}var rK={props:{from:{type:Number,default:1},to:{type:Number,default:1},perPage:{type:Number,default:1},total:{type:Number,default:1},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1}},data(){return{totalItems:100,itemsPerPage:5}},computed:{totalPages(){return this.lastPage},showEllipsisStart(){return this.currentPage>3},showEllipsisEnd(){return this.currentPage<this.totalPages-2},visiblePages(){let t=Math.max(1,this.currentPage-1),e=Math.min(this.totalPages,this.currentPage+1);const r=[];for(let a=t;a<=e;a++)r.push(a);return r}},methods:{changePage(t){this.$emit("pageChange",t)}}};const aK=(0,p.Z)(rK,[["render",eK]]);var sK=aK;const iK={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},lK={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white"},oK={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},nK={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-flex tw-items-center tw-gap-2"},dK={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},wK={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-font-[cairo]"},cK={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},uK={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-font-[cairo]"},pK={class:"tw-px-12 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},mK={class:"tw-space-y-1"},gK={class:"tw-font-bold tw-text-green-500"},hK={key:0,class:"tw-font-bold tw-text-orange-500 tw-bg-orange-100 tw-rounded-lg tw-px-2 tw-text-sm"},fK={key:1,class:"tw-font-bold tw-text-orange-500 tw-bg-orange-100 tw-rounded-lg tw-px-2 tw-text-sm"},vK={class:"tw-px-12 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},yK={class:"tw-px-12 tw-py-2 tw-text-sm tw-whitespace-nowrap"},xK=(0,s._)("div",{class:"tw-w-1.5 tw-h-1.5 tw-rounded-full tw-bg-emerald-500"},null,-1),bK={key:1},_K={class:"tw-px-4 tw-py-2 tw-text-sm tw-whitespace-nowrap"};function kK(t,e,r,a,i,l){const o=(0,s.up)("TableActions");return(0,s.wg)(),(0,s.iD)("tr",null,[(0,s._)("td",iK,[(0,s._)("div",null,[(0,s._)("h2",lK,(0,et.zw)(r.item.id),1)])]),(0,s._)("td",oK,[(0,s._)("div",null,[(0,s._)("h2",nK,[(0,s._)("p",null,(0,et.zw)(i.moment(r.item.created_at).format("DD[/]MM[/]YY")),1),(0,s.kq)("",!0)])])]),(0,s._)("td",dK,[(0,s._)("div",null,[(0,s._)("h2",wK,(0,et.zw)(r.item.fullname),1)])]),(0,s._)("td",cK,[(0,s._)("div",null,[(0,s._)("h2",uK,(0,et.zw)(r.item.phone),1)])]),(0,s._)("td",pK,[(0,s._)("div",null,[(0,s._)("ul",mK,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.item.items,(t=>((0,s.wg)(),(0,s.iD)("li",{class:"tw-font-[cairo] tw-flex tw-items-center tw-gap-1",key:t.id},[(0,s._)("span",gK,(0,et.zw)(t.quantity)+" x ",1),(0,s.Uk)(),(0,s._)("span",null,(0,et.zw)(t.product.name),1),(0,s.Uk)(),t.product_variation.color&&!["/","-"].includes(t.product_variation.color)?((0,s.wg)(),(0,s.iD)("span",hK,(0,et.zw)(t.product_variation.color),1)):(0,s.kq)("",!0),(0,s.Uk)(),t.product_variation.size&&!["/","-"].includes(t.product_variation.size)?((0,s.wg)(),(0,s.iD)("span",fK,(0,et.zw)(t.product_variation.size),1)):(0,s.kq)("",!0)])))),128))])])]),(0,s._)("td",vK,[(0,s._)("span",{class:(0,et.C_)([[l.confirmation.bgLight,l.confirmation.textLight],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},(0,et.zw)(l.confirmation.name),3)]),(0,s._)("td",yK,[r.item.delivery_fullname?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,et.C_)([["tw-text-emerald-800","tw-bg-emerald-100"],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-pl-1.5 tw-py-0.5 tw-rounded tw-w-fit tw-flex tw-items-center tw-gap-2"])},[xK,(0,s._)("span",null,(0,et.zw)(r.item.delivery_fullname),1)])):((0,s.wg)(),(0,s.iD)("div",bK,[(0,s._)("span",{class:(0,et.C_)([["tw-text-gray-800","tw-bg-gray-100"],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},"No Delivery")]))]),(0,s._)("td",_K,[(0,s._)("div",null,[(0,s.Wm)(o,{onUpdate:e[0]||(e[0]=e=>t.$emit("update",e)),item:r.item},null,8,["item"])])])])}const CK={class:"tw-h-full"},DK={class:"tw-flex tw-items-center tw-gap-2"},SK=["href"],zK={key:0};function UK(t,e,r,a,i,l){const o=(0,s.up)("UpdatePopup");return(0,s.wg)(),(0,s.iD)("div",CK,[(0,s._)("div",DK,[(0,s._)("a",{target:"_blank",href:"https://api.whatsapp.com/send?phone="+r.item.phone.replace("+","").replace("-","").replace(" ",""),class:"tw-px-2 tw-py-1 tw-w-[25px] tw-h-[25px] tw-border tw-border-solid tw-border-green-500/20 hover:tw-bg-green-500/10 hover:tw-border-green-500/70 tw-duration-300 tw-text-green-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(st.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-whatsapp")])),_:1})],8,SK),(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.popup=!0),class:"tw-px-2 tw-py-1 tw-w-[25px] tw-h-[25px] tw-border tw-border-solid tw-border-orange-500/20 hover:tw-bg-orange-500/10 hover:tw-border-orange-500/70 tw-duration-300 tw-text-orange-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(st.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])]),i.popup?((0,s.wg)(),(0,s.iD)("div",zK,[(0,s.Wm)(o,{onUpdate:e[1]||(e[1]=e=>t.$emit("update",e)),visible:i.popup,"onUpdate:visible":e[2]||(e[2]=t=>i.popup=t),item:r.item},null,8,["visible","item"])])):(0,s.kq)("",!0)])}const LK={class:"tw-mx-auto tw-w-[95%] md:tw-max-w-[800px] tw-overflow-hidden tw-h-fit dark:tw-bg-neutral-900 tw-bg-white tw-border tw-border-solid dark:tw-border-neutral-700 tw-border-neutral-300 tw-shadow-md tw-my-5 tw-rounded-lg"},PK=(0,s._)("div",{class:"tw-p-4 tw-text-lg tw-border-b tw-border-solid tw-font-medium tw-flex dark:tw-text-neutral-400 tw-text-neutral-500 tw-items-center tw-gap-4 dark:tw-bg-neutral-800 tw-bg-gray-50"}," Order Informations ",-1),AK={class:"tw-bg-white tw-p-4"},WK={class:"tw-grid tw-gap-6 tw-gap-y-5 tw-grid-cols-1 md:tw-grid-cols-2"},$K={class:"tw-col-span-2 md:tw-col-span-1"},EK=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Client Name",-1),qK={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},TK={class:"tw-col-span-2 md:tw-col-span-1"},OK=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Phone Number",-1),VK={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},IK={class:"tw-col-span-2 md:tw-col-span-1"},FK=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"City",-1),RK={class:"tw-relative"},jK=(0,s._)("option",{value:null,disabled:""},"Choose a City",-1),NK=["value"],MK=["value"],HK=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),YK={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},ZK={class:"tw-col-span-2 md:tw-col-span-1"},KK=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Address",-1),BK={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},QK={class:"tw-col-span-2"},GK=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),JK={class:"tw-relative"},XK=["value"],tB=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),eB={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},rB={key:0,class:"md:tw-col-span-1 tw-col-span-2"},aB=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Date",-1),sB={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},iB={key:1,class:"md:tw-col-span-1 tw-col-span-2"},lB=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Note",-1),oB={class:"tw-col-span-2"},nB=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Note",-1),dB={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},wB={class:"md:tw-col-span-1 tw-col-span-2"},cB={class:"md:tw-col-span-1 tw-col-span-2"},uB=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Upsell",-1),pB={class:"tw-relative"},mB=["value"],gB=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),hB={class:"tw-col-span-2"},fB={class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},vB={key:0,class:"tw-text-red-400 tw-text-xs"},yB={class:"tw-flex tw-justify-end tw-items-center tw-p-4 tw-gap-3 dark:tw-bg-neutral-900 tw-bg-gray-50 tw-border-t tw-border-solid"},xB=["disabled"],bB=(0,s._)("span",null,"Update",-1);function _B(t,e,r,i,l,o){const n=(0,s.up)("OrderAffectation"),d=(0,s.up)("OrderItems"),w=(0,s.up)("popup-new");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(w,{visible:r.visible,closeable:!1,onCancel:o.cancel},{default:(0,s.w5)((()=>[(0,s._)("div",LK,[PK,(0,s._)("div",AK,[(0,s._)("div",WK,[(0,s._)("div",$K,[EK,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.itemCopy.fullname=t),onInput:e[1]||(e[1]=t=>l.errors.fullname=null),type:"text",class:(0,et.C_)([[l.errors.fullname&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),placeholder:"John",required:""},null,34),[[a.nr,l.itemCopy.fullname]]),l.errors.fullname?((0,s.wg)(),(0,s.iD)("label",qK,(0,et.zw)(l.errors.fullname),1)):(0,s.kq)("",!0)]),(0,s._)("div",TK,[OK,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.itemCopy.phone=t),onInput:e[3]||(e[3]=t=>l.errors.phone=null),class:(0,et.C_)([[l.errors.phone&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"123-45-678",required:""},null,34),[[a.nr,l.itemCopy.phone]]),l.errors.phone?((0,s.wg)(),(0,s.iD)("label",VK,(0,et.zw)(l.errors.phone),1)):(0,s.kq)("",!0)]),(0,s._)("div",IK,[FK,(0,s._)("div",RK,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.itemCopy.city=t),onChange:e[5]||(e[5]=t=>l.errors.city=null),class:(0,et.C_)([[l.errors.city&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 tw-pr-7"])},[jK,(0,s._)("option",{value:l.itemCopy.city,disabled:""},(0,et.zw)(l.itemCopy.city),9,NK),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,et.zw)(t.name),9,MK)))),128))],34),[[a.bM,l.itemCopy.city]]),HK]),l.errors.city?((0,s.wg)(),(0,s.iD)("label",YK,(0,et.zw)(l.errors.city),1)):(0,s.kq)("",!0)]),(0,s._)("div",ZK,[KK,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>l.itemCopy.adresse=t),onInput:e[7]||(e[7]=t=>l.errors.adresse=null),class:(0,et.C_)([[l.errors.adresse&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"Address",required:""},null,34),[[a.nr,l.itemCopy.adresse]]),l.errors.adresse?((0,s.wg)(),(0,s.iD)("label",BK,(0,et.zw)(l.errors.adresse),1)):(0,s.kq)("",!0)]),(0,s._)("div",QK,[GK,(0,s._)("div",JK,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>l.itemCopy.confirmation=t),onChange:e[9]||(e[9]=t=>l.errors.confirmation=null),class:(0,et.C_)([[l.errors.confirmation&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,class:(0,et.C_)([t.text,!t.value&&"!tw-text-green-500"]),key:t.id},(0,et.zw)(t.name),11,XK)))),128))],34),[[a.bM,l.itemCopy.confirmation]]),tB]),l.errors.confirmation?((0,s.wg)(),(0,s.iD)("label",eB,(0,et.zw)(l.errors.confirmation),1)):(0,s.kq)("",!0)]),"reporter"==l.itemCopy.confirmation?((0,s.wg)(),(0,s.iD)("div",rB,[aB,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>l.itemCopy.reported_agente_date=t),onInput:e[11]||(e[11]=t=>l.errors.reported_agente_date=null),class:(0,et.C_)([[l.errors.reported_agente_date&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"date",required:""},null,34),[[a.nr,l.itemCopy.reported_agente_date]]),l.errors.reported_agente_date?((0,s.wg)(),(0,s.iD)("label",sB,(0,et.zw)(l.errors.reported_agente_date),1)):(0,s.kq)("",!0)])):(0,s.kq)("",!0),"reporter"==l.itemCopy.confirmation?((0,s.wg)(),(0,s.iD)("div",iB,[lB,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[12]||(e[12]=t=>l.itemCopy.reported_agente_note=t),rows:"1",class:"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500",placeholder:"Enter a note"},null,512),[[a.nr,l.itemCopy.reported_agente_note]])])):(0,s.kq)("",!0),(0,s._)("div",oB,[nB,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[13]||(e[13]=t=>l.itemCopy.note=t),onInput:e[14]||(e[14]=t=>l.errors.note=null),class:(0,et.C_)([[l.errors.note&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),rows:"3",placeholder:"Enter a note"},null,34),[[a.nr,l.itemCopy.note]]),l.errors.note?((0,s.wg)(),(0,s.iD)("label",dB,(0,et.zw)(l.errors.note),1)):(0,s.kq)("",!0)]),(0,s._)("div",wB,[(0,s.Wm)(n,{item:l.itemCopy,error:l.errors.affectation,"onUpdate:error":e[15]||(e[15]=t=>l.errors.affectation=t),affectation:l.itemCopy.affectation,"onUpdate:affectation":e[16]||(e[16]=t=>l.itemCopy.affectation=t)},null,8,["item","error","affectation"])]),(0,s._)("div",cB,[uB,(0,s._)("div",pB,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[17]||(e[17]=t=>l.itemCopy.upsell=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.upsells,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,et.C_)([t.text]),value:t.value,key:t.id},(0,et.zw)(t.name),11,mB)))),128))],512),[[a.bM,l.itemCopy.upsell]]),gB])]),(0,s._)("div",hB,[(0,s._)("label",fB,[(0,s.Uk)("Order Items "),l.errors.items?((0,s.wg)(),(0,s.iD)("span",vB," # "+(0,et.zw)(l.errors.items),1)):(0,s.kq)("",!0)]),(0,s._)("div",null,[(0,s.Wm)(d,{order:l.itemCopy,error:l.errors.items,products:l.products,"products-fetched":l.products_fetched,items:l.itemCopy.items,"onUpdate:items":e[18]||(e[18]=t=>l.itemCopy.items=t)},null,8,["order","error","products","products-fetched","items"])])])])]),(0,s._)("div",yB,[(0,s._)("button",{onClick:e[19]||(e[19]=(...t)=>o.cancel&&o.cancel(...t)),class:"tw-py-2 tw-px-7 tw-rounded tw-text-sm tw-border tw-border-solid tw-border-tansparent dark:tw-border-neutral-900 hover:tw-border-neutral-400 dark:hover:tw-border-neutral-500 hover:tw-bg-gray-300 tw-bg-gray-200 dark:tw-bg-neutral-600 tw-duration-300 tw-text-neutral-900 dark:tw-text-neutral-300"}," Cancel "),(0,s._)("button",{onClick:e[20]||(e[20]=(...t)=>o.handleUpdate&&o.handleUpdate(...t)),disabled:l.isLoading,class:"tw-py-2 tw-px-7 tw-flex tw-items-center tw-rounded tw-text-sm tw-bg-orange-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-orange-600 dark:tw-border-neutral-900 dark:hover:tw-border-orange-500 hover:tw-bg-orange-500/80 dark:hover:tw-bg-orange-400 tw-duration-300 tw-text-white"},[(0,s.Wm)(st.t,{size:"small",class:(0,et.C_)(["tw-duration-300 tw-animate-spin tw-overflow-hidden tw-max-w-0 tw-mr-0",[l.isLoading&&"!tw-max-w-[50px] !tw-mr-3"]])},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1},8,["class"]),bB],8,xB)])])])),_:1},8,["visible","onCancel"])])}const kB=(t,e)=>e.fullname?e.phone?e.adresse?e.note||"annuler"!=e.confirmation?e.affectation&&"confirmer"!=e.confirmation?(t.errors.affectation="Cannot update affectation: Order not confirmed.",!1):!!CB(t,e.items):(t.errors.note="Add Cancelation note !",!1):(t.errors.adresse="Address is required",!1):(t.errors.phone="Phone Number is required",!1):(t.errors.fullname="Client Name is required",!1),CB=(t,e)=>{if(!e.length)return t.errors.items="You should add one order item at least.",!1;let r=!0;return e.forEach((e=>0==e.product_id?(t.errors.items="Product is required for order item",r=!1,!1):0==e.product_variation_id?(t.errors.items="Select a product variation",r=!1,!1):0==e.quantity?(t.errors.items="Items quantity cannot be 0",r=!1,!1):void 0)),r},DB=(t,e)=>{t.$alert({title:"Updated Successfully",type:"success"});const r=e.data.order;t.$emit("update",r),t.isLoading=!1,t.cancel(),t.errors={},t.$store.dispatch("agent/refreshCounts")},SB=(t,e)=>{t.$alert({title:e.message,type:"error"}),"VALIDATION_ERROR"==e.code&&(t.errors=e.errors),t.isLoading=!1},zB=(t,e)=>{t.isLoading=!0,t.errors={},q.update(e.id,e).then((e=>DB(t,e.data))).catch((e=>SB(t,e.response.data))).finally((()=>t.isLoading=!1))},UB={key:0,class:"tw-col-span-12 tw-rounded-lg tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},LB={key:1,class:"md:tw-col-span-12 tw-col-span-12"},PB={class:"tw-max-w-full tw-overflow-auto"},AB={class:"tw-text-xs tw-text-gray-700 tw-uppercase !tw-rounded-t-lg tw-border tw-border-solid"},WB={class:"tw-bg-gray-50"},$B={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},EB={key:0},qB=(0,s._)("td",{colspan:"3"},null,-1),TB=(0,s._)("td",null,[(0,s._)("div",{class:"tw-p-2"},[(0,s._)("p",null,"Total: ")])],-1),OB={colspan:"2",class:"tw-p-2"},VB={class:"tw-p-2 tw-py-1 tw-text-sm tw-text-green-500 tw-w-24 tw-font-medium tw-block focus:tw-outline-none tw-shadow-sm tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},IB={colspan:"6"},FB={class:"tw-flex tw-justify-end tw-items-center tw-py-3"},RB=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),jB=(0,s._)("span",null,"Add Item",-1),NB=[RB,jB],MB={key:1},HB={colspan:"6"},YB={class:"tw-scale-75 tw-p-5"};function ZB(t,e,r,a,i,l){const o=(0,s.up)("ItemRow"),n=(0,s.up)("loading");return(0,s.wg)(),(0,s.iD)("div",null,[r.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",UB," No Order items ")),r.items.length?((0,s.wg)(),(0,s.iD)("div",LB,[(0,s._)("div",PB,[((0,s.wg)(),(0,s.iD)("table",{key:r.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,s._)("thead",AB,[(0,s._)("tr",WB,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,s._)("th",{class:(0,et.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",$B,(0,et.zw)(t),1)],2))),64))])]),r.productsFetched?((0,s.wg)(),(0,s.iD)("tbody",EB,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.items,(t=>((0,s.wg)(),(0,s.j4)(o,{key:t.id,item:t,products:r.products,onDelete:l.deleteItem,onUpdate:l.updateItem},null,8,["item","products","onDelete","onUpdate"])))),128)),(0,s._)("tr",null,[qB,TB,(0,s._)("td",OB,[(0,s._)("div",VB,[(0,s._)("p",null,(0,et.zw)(i.currency)+" "+(0,et.zw)(l.price),1)])])]),(0,s._)("tr",null,[(0,s._)("td",IB,[(0,s._)("div",FB,[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>l.addItem&&l.addItem(...t)),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-400 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},NB)])])])])):((0,s.wg)(),(0,s.iD)("tbody",MB,[(0,s._)("tr",null,[(0,s._)("td",HB,[(0,s._)("div",YB,[(0,s.Wm)(n)])])])]))]))])])):(0,s.kq)("",!0)])}const KB=(0,s._)("td",null,null,-1),BB={class:"tw-p-2"},QB={class:"tw-relative"},GB=["value"],JB=(0,s._)("option",{value:0,selected:""},"Choose Product",-1),XB=["value"],tQ=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),eQ={class:"tw-p-2"},rQ={key:0,class:"tw-relative"},aQ=["value"],sQ=(0,s._)("option",{value:"",disabled:""},"Choose Variation",-1),iQ=["value"],lQ={key:1,class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},oQ=(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})],-1),nQ=[oQ],dQ={class:"tw-p-2"},wQ=["value"],cQ={class:"tw-p-2"},uQ=["value"],pQ={class:"tw-flex tw-justify-center"};function mQ(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("tr",null,[KB,(0,s._)("td",null,[(0,s._)("div",BB,[(0,s._)("div",QB,[(0,s._)("select",{onChange:e[0]||(e[0]=(...t)=>l.handleProductChange&&l.handleProductChange(...t)),value:r.item.product_id,class:"tw-block tw-border-solid focus:tw-outline-none tw-w-full tw-p-2 tw-pr-6 tw-text-xs tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},[JB,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.products,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.id},(0,et.zw)(t.name),9,XB)))),128))],40,GB),tQ])])]),(0,s._)("td",null,[(0,s._)("div",eQ,[r.item.product_id?((0,s.wg)(),(0,s.iD)("div",rQ,[l.product.variations.length>1?((0,s.wg)(),(0,s.iD)("select",{key:0,onChange:e[1]||(e[1]=(...t)=>l.handleVariationChange&&l.handleVariationChange(...t)),value:r.item.product_variation_id,class:"tw-block tw-border-solid focus:tw-outline-none tw-w-full tw-p-2 tw-pr-6 tw-text-xs tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},[sQ,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.product.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.id},(0,et.zw)(t.color)+" "+(0,et.zw)(t.size),9,iQ)))),128))],40,aQ)):(0,s.kq)("",!0),l.product.variations.length>1?((0,s.wg)(),(0,s.iD)("div",lQ,nQ)):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])]),(0,s._)("td",null,[(0,s._)("div",dQ,[(0,s._)("input",{onInput:e[2]||(e[2]=e=>t.$emit("update",{...r.item,quantity:parseInt(e.target.value)>=0?parseInt(e.target.value):0})),value:r.item.quantity,min:"0",type:"number",class:"focus:tw-outline-none tw-border-solid tw-block tw-w-24 tw-p-2 tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded-lg tw-bg-gray-50 sm:tw-text-xs focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},null,40,wQ)])]),(0,s._)("td",null,[(0,s._)("div",cQ,[(0,s._)("input",{onInput:e[3]||(e[3]=e=>t.$emit("update",{...r.item,price:parseFloat(e.target.value)})),value:r.item.price,min:"0",type:"number",class:"focus:tw-outline-none tw-border-solid tw-block tw-w-24 tw-p-2 tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded-lg tw-bg-gray-50 sm:tw-text-xs focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},null,40,uQ)])]),(0,s._)("td",null,[(0,s._)("div",pQ,[(0,s._)("button",{onClick:e[4]||(e[4]=(...t)=>l.handleDelete&&l.handleDelete(...t)),class:"tw-px-2 tw-py-1 tw-w-[25px] tw-h-[25px] tw-border tw-border-solid tw-border-red-500/20 hover:tw-bg-red-500/10 hover:tw-border-red-500/70 tw-duration-300 tw-text-red-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(st.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])])])])}var gQ={props:{item:{required:!0},products:{required:!0}},computed:{product(){return 0==this.item.product_id?null:this.products.find((t=>t.id==this.item.product_id))}},methods:{handleProductChange(t){const e=parseInt(t.target.value);if(!e)return!1;const r=this.products.find((t=>t.id==e));console.log(r.variations.length>0?r.variations[0].id:null);const a={...this.item,product_id:e,product:r,product_ref:r.ref,product_variation_id:r.variations.length>0?r.variations[0].id:null,product_variation:r.variations.length>0?r.variations[0]:null};this.$emit("update",a)},handleVariationChange(t){this.$emit("update",{...this.item,product_variation:this.product.variations.find((e=>e.id==parseInt(t.target.value))),product_variation_id:parseInt(t.target.value)})},handleDelete(){this.$emit("delete",this.item.id)}},mounted(){}};const hQ=(0,p.Z)(gQ,[["render",mQ]]);var fQ=hQ,vQ={components:{ItemRow:fQ},props:{items:{required:!0,default:[]},error:{required:!1,default:null},products:{required:!0},productsFetched:{required:!0,default:!1},order:{required:!0}},data(){return{currency:c}},computed:{price(){return Bi(this.order)}},methods:{updateItem(t){const e=this.items.map((e=>e.id==t.id?t:e));this.$emit("update:items",e)},deleteItem(t){const e=this.items.filter((e=>e.id!=t));this.$emit("update:items",e)},addItem(){const t=this.items.length>0?this.items[this.items.length-1]:1,e=t?t.id+1:1,r={id:e,quantity:0,price:0,product_variation_id:0,product_id:0},a=[...this.items,r];this.$emit("update:items",a)}},mounted(){}};const yQ=(0,p.Z)(vQ,[["render",ZB]]);var xQ=yQ;const bQ=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Affectation",-1),_Q={key:0,class:"tw-relative"},kQ=["value","disabled"],CQ=(0,s._)("option",{value:""},"Choose a Delivery",-1),DQ=["value"],SQ=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),zQ={key:1,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},UQ={key:2,class:"tw-relative"},LQ={class:"tw-absolute tw-scale-75 tw-left-1/2 tw-top-1/2 -tw-translate-x-1/2 -tw-translate-y-1/2 tw-z-10"},PQ=(0,s._)("select",{disabled:"",class:"tw-opacity-30 tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[(0,s._)("option",{value:null,selected:""},"Loading...")],-1),AQ=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},null,-1);function WQ(t,e,r,a,i,l){const o=(0,s.up)("loading");return(0,s.wg)(),(0,s.iD)("div",null,[bQ,i.fetched?((0,s.wg)(),(0,s.iD)("div",_Q,[(0,s._)("select",{value:r.affectation,onChange:e[0]||(e[0]=(...t)=>l.handleChange&&l.handleChange(...t)),disabled:"confirmer"!=r.item.confirmation,class:(0,et.C_)([[r.error&&"!tw-border-red-400","confirmer"!=r.item.confirmation&&"tw-cursor-not-allowed"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[CQ,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.availableDeliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,et.zw)(t.name),9,DQ)))),128))],42,kQ),SQ])):(0,s.kq)("",!0),i.fetched&&r.error?((0,s.wg)(),(0,s.iD)("label",zQ,(0,et.zw)(r.error),1)):(0,s.kq)("",!0),i.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",UQ,[(0,s._)("div",LQ,[(0,s.Wm)(o)]),PQ,AQ]))])}var $Q={props:{affectation:{required:!0},error:{required:!1,default:null},item:{required:!0}},data(){return{deliveries:[],fetched:!1}},computed:{availableDeliveries(){return this.deliveries.filter((t=>t.has.some((t=>this.item.items.some((e=>e.product_id==t))))))},delivery(){return this.deliveries.find((t=>t.id==this.affectation))}},watch:{"item.confirmation":{deep:!0,handler(){this.$emit("update:affectation",null)}},"item.items":{deep:!0,handler(){if(!this.affectation)return!1;this.delivery.has.some((t=>this.item.items.some((e=>e.product_id==t))))||this.$emit("update:affectation",null)}}},methods:{getDeliveries(){this.fetched=!1,X.allDeliveries().then((t=>{"SUCCESS"==t?.data.code&&(this.deliveries=t.data.data.deliveries,this.fetched=!0)})).catch(this.$handleApiError)},handleChange(t){this.$emit("update:affectation",t.target.value),this.$emit("update:error",null)}},mounted(){this.getDeliveries()}};const EQ=(0,p.Z)($Q,[["render",WQ]]);var qQ=EQ,TQ={components:{OrderItems:xQ,OrderAffectation:qQ},props:{visible:{required:!0},item:{required:!0}},data(){return{confirmations:qn,upsells:On,isLoading:!1,products_fetched:null,products:null,itemCopy:null,errors:{fullname:null,phone:null,city:null,adresse:null,note:null,reported_agente_date:null,affectation:null,items:null}}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{handleUpdate(){const t=kB(this,this.itemCopy);if(!t)return!1;zB(this,this.itemCopy)},cancel(){if(this.isLoading)return!1;this.$emit("update:visible",!1)},getProducts(){this.products_fetched=!1,sa.allForOrder().then((t=>{"SUCCESS"==t.data.code?this.products=t.data.data.products:this.products=[],this.products_fetched=!0})).catch(this.$handleApiError)}},mounted(){this.itemCopy=JSON.parse(JSON.stringify(this.item)),this.getProducts()}};const OQ=(0,p.Z)(TQ,[["render",_B]]);var VQ=OQ,IQ={components:{UpdatePopup:VQ},props:{item:{required:!0}},data(){return{popup:!1,isLoading:!1}},methods:{handle(){}}};const FQ=(0,p.Z)(IQ,[["render",UK]]);var RQ=FQ,jQ={components:{TableActions:RQ},props:{item:{required:!0}},data(){return{moment:$P()}},computed:{confirmation(){return qn.find((t=>t.value==this.item.confirmation))},deliveryState(){return Vn.find((t=>t.value==this.item.delivery))}},methods:{}};const NQ=(0,p.Z)(jQ,[["render",kK]]);var MQ=NQ,HQ={components:{TablePaginationNoNums:sK,TableRow:MQ},props:{items:{default:[]},loading:{type:Boolean,default:!0},from:{type:Number,default:1},to:{type:Number,default:1},perPage:{type:Number,default:10},total:{type:Number,default:0},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1}}};const YQ=(0,p.Z)(HQ,[["render",jZ]]);var ZQ=YQ;const KQ={class:"tw-mt-6 tw-mb-4 md:tw-flex md:tw-items-center md:tw-justify-between"},BQ={class:"tw-inline-flex tw-overflow-hidden tw-bg-white tw-border tw-divide-x tw-rounded-lg darkx:tw-bg-gray-900 rtl:tw-flex-row-reverse darkx:tw-border-gray-700 darkx:tw-divide-gray-700"},QQ=(0,s._)("button",{class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 tw-bg-gray-100 sm:tw-text-sm darkx:tw-bg-gray-800 darkx:tw-text-gray-300"}," View all ",-1),GQ=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M9 5a1 1 0 1 0 0 2a1 1 0 0 0 0-2zM6.17 5a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 0 1 0-2h1.17zM15 11a1 1 0 1 0 0 2a1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-1.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h7.17zM9 17a1 1 0 1 0 0 2a1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h1.17z"})],-1),JQ=[GQ],XQ=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M10 2c-.6 0-1 .4-1 1v18c0 .6.4 1 1 1s1-.4 1-1V3c0-.6-.4-1-1-1zM5 12c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1s1-.4 1-1v-8c0-.6-.4-1-1-1zm10-4c-.6 0-1 .4-1 1v12c0 .6.4 1 1 1s1-.4 1-1V9c0-.6-.4-1-1-1zm5 8c-.6 0-1 .4-1 1v4c0 .6.4 1 1 1s1-.4 1-1v-4c0-.6-.4-1-1-1z"})],-1),tG=[XQ],eG=["disabled"],rG=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[(0,s._)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4.75 10.75h-3m12.5-2c0 3-2.798 5.5-6.25 5.5c-3.75 0-6.25-3.5-6.25-3.5v3.5m9.5-9h3m-12.5 2c0-3 2.798-5.5 6.25-5.5c3.75 0 6.25 3.5 6.25 3.5v-3.5"})],-1),aG=[rG],sG={class:"tw-relative"},iG=["value"],lG=(0,s.uE)('<option value="5">5</option><option value="10">10</option><option value="20">20</option><option value="50">50</option><option value="100">100</option><option value="200">200</option>',6),oG=[lG],nG=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),dG={class:"tw-relative tw-flex tw-items-center tw-mt-4 md:tw-mt-0"},wG=["value"],cG={class:"tw-overflow-hidden tw-col-span-1"},uG={class:"tw-overflow-hidden tw-col-span-1"};function pG(t,e,r,i,l,o){const n=(0,s.up)("FiltersWrapper"),d=(0,s.up)("IndexStatistics");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",KQ,[(0,s._)("div",BQ,[QQ,(0,s._)("button",{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},JQ),r.activeStatistics&&r.statistics?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:e[1]||(e[1]=t=>l.showStatistics=!l.showStatistics),class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},tG)):(0,s.kq)("",!0),(0,s._)("button",{onClick:e[2]||(e[2]=e=>t.$emit("fresh")),disabled:r.loading,class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},aG,8,eG),(0,s._)("div",sG,[(0,s._)("select",{onChange:e[3]||(e[3]=e=>t.$emit("perPageChange",e.target.value)),value:r.perPage,class:"tw-h-full tw-px-5 tw-py-2 tw-w-20 focus:tw-outline-none tw-text-xs tw-font-medium tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},oG,40,iG),nG])]),(0,s._)("div",dG,[(0,s._)("input",{type:"text",placeholder:"Search",value:r.search,onInput:e[4]||(e[4]=e=>t.$emit("update:search",e.target.value)),onKeyup:e[5]||(e[5]=(0,a.D2)((e=>t.$emit("filter")),["enter"])),class:"tw-block tw-w-full tw-py-1.5 tw-pl-5 tw-text-gray-700 tw-bg-white tw-border tw-border-solid tw-border-gray-200 tw-rounded-lg md:tw-w-80 placeholder-gray-400/70 tw-pr-11 rtl:tw-pr-11 rtl:tw-pl-5 darkx:tw-bg-gray-900 darkx:tw-text-gray-300 darkx:tw-border-gray-600 focus:tw-border-orange-400 darkx:focus:tw-border-orange-300 focus:tw-ring-orange-300 focus:tw-outline-none focus:tw-ring focus:tw-ring-opacity-40"},null,40,wG),(0,s._)("button",{onClick:e[6]||(e[6]=e=>t.$emit("filter")),class:"tw-absolute tw-right-0 tw-px-2 tw-py-1 tw-w-[38px] tw-h-[36px] tw-border-solid tw-rounded-r-lg tw-border-l tw-text-orange-500/80 tw-border-orange-500/20 hover:tw-bg-orange-500/10 hover:tw-border-orange-500/70 tw-duration-300 tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(st.t,{size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-magnify")])),_:1})])])]),(0,s._)("div",{class:(0,et.C_)([[l.showFilters?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",cG,[(0,s.Wm)(n,{onFilter:e[7]||(e[7]=e=>t.$emit("filter")),filters:r.filters,onUpdate:e[8]||(e[8]=e=>t.$emit("update:filters",e))},null,8,["filters"])])],2),r.statistics?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,et.C_)([[l.showStatistics?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",uG,[(0,s.Wm)(d,{statistics:r.statistics},null,8,["statistics"])])],2)):(0,s.kq)("",!0)])}const mG={class:"tw-mb-4"},gG={class:"tw-grid tw-grid-cols-12 tw-gap-4"},hG={class:"tw-h-full tw-w-full tw-p-3 tw-rounded tw-space-y-2 tw-border tw-border-solid"},fG={class:"tw-flex tw-items-center tw-justify-between"},vG={class:"tw-text-xl tw-font-bold tw-text-gray-900"},yG={class:"tw-px-2 tw-py-1 tw-font-medium tw-text-sm tw-rounded tw-bg-white tw-text-gray-900"};function xG(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",mG,[(0,s._)("div",gG,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.visible,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"md:tw-col-span-3 tw-col-span-12"},[(0,s._)("div",hG,[(0,s._)("p",{class:(0,et.C_)(["tw-text-sm tw-font-bold tw-w-fit tw-h-fit tw-px-2 tw-rounded",[l.getConfirmation(t.confirmation).textLight,l.getConfirmation(t.confirmation).bgLight]])},(0,et.zw)(t.name),3),(0,s._)("div",fG,[(0,s._)("span",vG,(0,et.zw)(t.total),1),(0,s._)("span",yG,(0,et.zw)(t.percent)+"%",1)])])])))),128))])])}var bG={props:{statistics:{required:!0}},computed:{visible(){return this.statistics.show.includes("*")?this.statistics.data:this.statistics.data.filter((t=>this.statistics.show.includes(t.confirmation)))}},methods:{getConfirmation(t){return qn.find((e=>e.value==t))}}};const _G=(0,p.Z)(bG,[["render",xG]]);var kG=_G;const CG={class:"tw-mb-4"},DG={class:"tw-grid tw-grid-cols-12 tw-gap-4 tw-p-1"},SG={class:"md:tw-col-span-4 tw-col-span-12 tw-rounded"},zG=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Created",-1),UG=["value"],LG={class:"md:tw-col-span-4 tw-col-span-12 tw-rounded"},PG=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),AG=["value"],WG=(0,s._)("option",{value:"all",selected:""},"All",-1),$G=["value"],EG=(0,s._)("button",{class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},[(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[(0,s._)("path",{fill:"#fff",d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})]),(0,s._)("span",null,"Filter")],-1),qG=[EG];function TG(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",CG,[(0,s._)("div",DG,[(0,s._)("div",SG,[zG,(0,s._)("input",{value:r.filters.created_at,type:"date",onChange:e[0]||(e[0]=e=>t.$emit("update",{...r.filters,created_at:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,UG)]),(0,s._)("div",LG,[PG,(0,s._)("select",{value:r.filters.confirmation,onChange:e[1]||(e[1]=e=>t.$emit("update",{...r.filters,confirmation:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[WG,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,class:"tw-capitalize",key:t.id},(0,et.zw)(t.name),9,$G)))),128))],40,AG)]),(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s._)("div",{onClick:e[3]||(e[3]=e=>t.$emit("filter")),class:"tw-col-span-12 tw-flex tw-justify-end"},qG)])])}var OG={props:{filters:{required:!0,default:{}}},data(){return{confirmations:qn,deliveryStatus:Vn,deliveries:[{id:1,value:"annuler",name:"Cancelled"},{id:2,value:"pas-de-reponse",name:"No Answer"}]}}};const VG=(0,p.Z)(OG,[["render",TG]]);var IG=VG,FG={components:{IndexStatistics:kG,FiltersWrapper:IG},props:{perPage:{type:Number,default:10},statistics:{default:null},activeStatistics:{type:Boolean,default:!1},loading:{default:!0},search:{default:""},filters:{required:!0}},data(){return{showFilters:!1,showStatistics:!1}}};const RG=(0,p.Z)(FG,[["render",pG]]);var jG=RG,NG={components:{IndexTable:ZQ,IndexFilters:jG},data(){return{fetching:!0,items:[],statistics:null,first_page_url:null,lase_page_url:null,next_page_url:null,prev_page_url:null,last_page:1,from:1,to:1,total:0,totalOrders:0,links:null,search:"",sort_by:"created_at",sort_order:"desc",per_page:10,current_page:1,filters:{confirmation:"all",delivery:"all",created_at:"all"}}},methods:{paginateOrders(){const t="?page="+this.current_page,e={sort_by:this.sort_by,sort_order:this.sort_order,per_page:this.per_page,current_page:this.current_page,search:this.search,filters:this.filters};return this.fetching=!0,q.paginate(t,e).then((({data:t})=>{const e=t.data.orders;this.setOptions(e),this.statistics=this.search?this.statistics:t.data.statistics})).then((()=>{this.fetching=!1}))},setOptions(t){this.items=t.data,this.first_page_url=Qi(t.first_page_url),this.lase_page_url=Qi(t.last_page_url),this.next_page_url=Qi(t.next_page_url),this.prev_page_url=Qi(t.prev_page_url),this.last_page=parseInt(t.last_page),this.from=parseInt(t.from),this.to=parseInt(t.to),this.per_page=parseInt(t.per_page),this.total=parseInt(t.total),this.totalOrders=this.search?this.totalOrders:parseInt(t.total),this.links=t.links},handleNext(){},handlePrev(){},handleItemUpdate(t){this.items=this.items.map((e=>e.id==t.id?t:e))},handlePageChange(t){this.current_page=t,this.paginateOrders()},handlePerPageChange(t){this.per_page=parseInt(t),this.handlePageChange(1)},handleSortOrderChange(){this.sort_order="asc"==this.sort_order?"desc":"asc",this.paginateOrders()}},mounted(){this.paginateOrders()}};const MG=(0,p.Z)(NG,[["render",uZ]]);var HG=MG;const YG={class:"py-5 px-2 tw-border tw-bg-white tw-w-full tw-rounded-md tw-mb-5"},ZG={class:"tw-px-3 tw-h-fit"},KG={class:"tw-flex tw-items-center tw-justify-between tw-flex-wrap"},BG=(0,s._)("div",null,[(0,s._)("div",{class:"tw-flex tw-items-center tw-gap-x-3"},[(0,s._)("h2",{class:"tw-text-lg tw-font-medium tw-text-gray-800 darkx:tw-text-white"},"New Orders")]),(0,s._)("p",{class:"tw-mt-1 tw-text-sm tw-text-gray-500 darkx:tw-text-gray-300"},"take responsibility for new orders.")],-1),QG={class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-3"},GG=["disabled"],JG=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),XG=(0,s._)("span",null,"Get Order",-1),tJ=[JG,XG],eJ={key:0,class:"tw-p-5"},rJ={key:1,class:"tw-mt-5 tw-space-y-5"},aJ={class:"tw-flex tw-items-center tw-justify-end"},sJ={key:2},iJ=(0,s._)("div",{class:"tw-p-5 tw-border tw-border-solid tw-shadow-sm tw-mt-5 tw-text-center tw-font-medium tw-text-xl tw-text-gray-600 tw-bg-gray-100 tw-w-full tw-rounded-lg"}," No Orders ",-1),lJ=[iJ];function oJ(t,e,r,a,i,l){const o=(0,s.up)("loading"),n=(0,s.up)("OrderCard");return(0,s.wg)(),(0,s.iD)("div",YG,[(0,s._)("section",ZG,[(0,s._)("div",KG,[BG,(0,s._)("div",QG,[(0,s._)("button",{disabled:i.fetching,onClick:e[0]||(e[0]=(...t)=>l.getOrder&&l.getOrder(...t)),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},tJ,8,GG)])]),i.fetching?((0,s.wg)(),(0,s.iD)("div",eJ,[(0,s.Wm)(o)])):(0,s.kq)("",!0),!i.fetching&&i.order_exists?((0,s.wg)(),(0,s.iD)("div",rJ,[(0,s.Wm)(n,{order:i.order,onUpdate:e[1]||(e[1]=t=>i.order=t)},null,8,["order"]),i.doubles.length?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(i.doubles,(t=>((0,s.wg)(),(0,s.j4)(n,{double:!0,key:t.id,order:t,onUpdate:e[2]||(e[2]=t=>i.doubles=i.doubles.map((e=>e.id==t.id?t:e)))},null,8,["order"])))),128)):(0,s.kq)("",!0),(0,s._)("div",aJ,[(0,s._)("button",{onClick:e[3]||(e[3]=(...t)=>l.save&&l.save(...t)),type:"button",class:"tw-px-5 tw-py-2 tw-text-sm tw-gap-2 tw-font-medium tw-text-white tw-inline-flex tw-items-center tw-bg-orange-500 hover:tw-bg-orange-600 focus:tw-ring-4 focus:tw-outline-none focus:tw-ring-orange-100 tw-rounded-lg tw-text-center dark:tw-bg-orange-600 dark:hover:tw-bg-orange-700 dark:focus:tw-ring-orange-800"}," Save ")])])):(0,s.kq)("",!0),i.fetching||i.order_exists?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",sJ,lJ))])])}const nJ=t=>{t.fetching=!0,q.toConfirm().then((e=>{const r=e.data;if("NO_ORDER"===r.code)return t.order_exists=!1,!1;"SUCCESS"==r.code&&r.data.orders.length>0&&(t.order=r.data.orders[0],t.order_exists=!0),t.doubles=1==r.data.double?r.data.double_orders.filter((e=>e.id!=t.order?.id)):[]})).catch(t.$handleApiError).finally((()=>{t.fetching=!1}))},dJ=t=>null==t.order.confirmation?(t.$alert({title:"Confirmation Not Changed",type:"warning"}),!1):t.doubles.some((t=>null==t.confirmation))?(t.$alert({title:"Double Order Confirmation Not Changed",type:"warning"}),!1):(t.order_exists=!1,t.order=null,t.doubles=[],void t.$alert({title:"Your changes has been saved !",type:"success"})),wJ=t=>{let e=t.order;if(null!=e&&null==e.confirmation)return t.$alert({type:"warning",title:"Order Not Confirmed"}),!1;t.fetching=!0,q.getOrder().then((e=>{let r=e.data;if("ORDER_NOT_CONFIRMED"==r.code){t.$alert({type:"warning",title:"Order Not Confirmed"});let r=e.data.orders[0];return t.order=JSON.parse(JSON.stringify(r)),t.order_exists=!0,!1}if("SUCCESS"==r.code&&!e.data.orders?.id){let e=r.data.orders;t.order=JSON.parse(JSON.stringify(e)),t.order_exists=!0}if("NO_ORDERS"===r.code)return t.order_exists=!1,!1;t.doubles=1==r.data.double?r.data.double_orders?.filter((e=>e.id!=t.order?.id)):[]})).catch(t.$handleApiError).finally((()=>{t.fetching=!1}))},cJ={class:"tw-bg-gray-50 tw-border tw-shadow-sm tw-rounded-lg tw-relative"},uJ=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"white","fill-rule":"evenodd",d:"M21.455 5.416a.75.75 0 0 1-.096.943l-9.193 9.192a.75.75 0 0 1-.34.195l-3.829 1a.75.75 0 0 1-.915-.915l1-3.828a.778.778 0 0 1 .161-.312L17.47 2.47a.75.75 0 0 1 1.06 0l2.829 2.828a.756.756 0 0 1 .096.118Zm-1.687.412L18 4.061l-8.518 8.518l-.625 2.393l2.393-.625l8.518-8.519Z","clip-rule":"evenodd"}),(0,s._)("path",{fill:"white",d:"M19.641 17.16a44.4 44.4 0 0 0 .261-7.04a.403.403 0 0 1 .117-.3l.984-.984a.198.198 0 0 1 .338.127a45.91 45.91 0 0 1-.21 8.372c-.236 2.022-1.86 3.607-3.873 3.832a47.77 47.77 0 0 1-10.516 0c-2.012-.225-3.637-1.81-3.873-3.832a45.922 45.922 0 0 1 0-10.67c.236-2.022 1.86-3.607 3.873-3.832a47.75 47.75 0 0 1 7.989-.213a.2.2 0 0 1 .128.34l-.993.992a.402.402 0 0 1-.297.117a46.164 46.164 0 0 0-6.66.255a2.89 2.89 0 0 0-2.55 2.516a44.421 44.421 0 0 0 0 10.32a2.89 2.89 0 0 0 2.55 2.516c3.355.375 6.827.375 10.183 0a2.89 2.89 0 0 0 2.55-2.516Z"})],-1),pJ={class:"tw-p-5 tw-flex tw-items-center tw-gap-2"},mJ={class:"tw-text-xl tw-font-bold tw-text-gray-600"},gJ=(0,s._)("span",{class:"tw-text-sm tw-text-gray-500"},null,-1),hJ={key:0,class:"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded tw-bg-purple-100 tw-text-purple-600"},fJ={class:"tw-grid lg:tw-grid-cols-4 md:tw-grid-cols-2 tw-grid-cols-1 tw-gap-5 tw-divide-x-2"},vJ={class:"tw-space-y-2 tw-px-5"},yJ=(0,s.uE)('<div class="tw-flex tw-items-center tw-gap-2"><svg class="tw-stroke-orange-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none" stroke-linecap="round" stroke-width="1.5"><path d="M7 18v-1a5 5 0 0 1 5-5v0a5 5 0 0 1 5 5v1"></path><path stroke-linejoin="round" d="M12 12a3 3 0 1 0 0-6a3 3 0 0 0 0 6Z"></path><path stroke-linejoin="round" d="M21 3.6v16.8a.6.6 0 0 1-.6.6H3.6a.6.6 0 0 1-.6-.6V3.6a.6.6 0 0 1 .6-.6h16.8a.6.6 0 0 1 .6.6Z"></path></g></svg><span class="tw-font-[cairo] tw-text-sm tw-font-medium tw-text-gray-600">Client Name</span></div>',1),xJ={class:"tw-font-[cairo] tw-text-lg tw-font-bold tw-pl-8 tw-text-gray-700"},bJ={class:"tw-space-y-2 tw-px-5"},_J=(0,s._)("div",{class:"tw-flex tw-items-center tw-gap-2"},[(0,s._)("svg",{class:"tw-stroke-orange-500",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M18.118 14.702L14 15.5c-2.782-1.396-4.5-3-5.5-5.5l.77-4.13L7.815 2H4.064c-1.128 0-2.016.932-1.847 2.047c.42 2.783 1.66 7.83 5.283 11.453c3.805 3.805 9.286 5.456 12.302 6.113c1.165.253 2.198-.655 2.198-1.848v-3.584l-3.882-1.479Z"})]),(0,s._)("span",{class:"tw-font-[cairo] tw-text-sm tw-font-medium tw-text-gray-600"},"Phone Number")],-1),kJ={class:"tw-flex tw-items-center tw-gap-2"},CJ={class:"tw-font-[cairo] tw-text-lg tw-font-bold tw-pl-8 tw-text-gray-700"},DJ={class:"tw-space-y-2 tw-px-5"},SJ=(0,s.uE)('<div class="tw-flex tw-items-center tw-gap-2"><svg class="tw-stroke-orange-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none"><path d="M3.75 18a.75.75 0 0 0-1.5 0h1.5Zm-1.5-4a.75.75 0 0 0 1.5 0h-1.5ZM7 8.75c.964 0 1.612.002 2.095.067c.461.062.659.169.789.3l1.06-1.062c-.455-.455-1.022-.64-1.65-.725c-.606-.082-1.372-.08-2.294-.08v1.5ZM11.75 12c0-.922.002-1.688-.08-2.294c-.084-.628-.27-1.195-.726-1.65l-1.06 1.06c.13.13.237.328.3.79c.064.482.066 1.13.066 2.094h1.5ZM7 7.25c-.922 0-1.688-.002-2.294.08c-.628.084-1.195.27-1.65.725l1.06 1.061c.13-.13.328-.237.79-.3c.482-.064 1.13-.066 2.094-.066v-1.5ZM3.75 12c0-.964.002-1.612.067-2.095c.062-.461.169-.659.3-.789l-1.062-1.06c-.455.455-.64 1.022-.725 1.65c-.082.606-.08 1.372-.08 2.294h1.5Zm0 10v-4h-1.5v4h1.5Zm0-8v-2h-1.5v2h1.5Z"></path><path stroke="currentColor" stroke-linecap="round" stroke-width="1.5" d="M7 22v-6c0-1.886 0-2.828.586-3.414C8.172 12 9.114 12 11 12h2c1.886 0 2.828 0 3.414.586c.472.471.564 1.174.582 2.414M17 22v-2.75m4-11.478c0-1.34 0-2.011-.356-2.525c-.356-.514-.984-.75-2.24-1.22c-2.455-.921-3.682-1.381-4.543-.785C13 3.84 13 5.15 13 7.772V12m8 10V12M4 8V6.5c0-.943 0-1.414.293-1.707C4.586 4.5 5.057 4.5 6 4.5h2c.943 0 1.414 0 1.707.293C10 5.086 10 5.557 10 6.5V8M7 4V2m15 20H2m8-7h.5m3.5 0h-1.5M10 18h4"></path></g></svg><span class="tw-font-[cairo] tw-text-sm tw-font-medium tw-text-gray-600">City</span></div>',1),zJ={class:"tw-font-[cairo] tw-text-lg tw-font-bold tw-pl-8 tw-text-gray-700"},UJ={class:"tw-space-y-2 tw-px-5"},LJ=(0,s._)("div",{class:"tw-flex tw-items-center tw-gap-2"},[(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 20 20"},[(0,s._)("path",{fill:"#f97316",d:"m19.799 5.165l-2.375-1.83a1.997 1.997 0 0 0-.521-.237A2.035 2.035 0 0 0 16.336 3H9.5l.801 5h6.035c.164 0 .369-.037.566-.098s.387-.145.521-.236l2.375-1.832c.135-.091.202-.212.202-.334s-.067-.243-.201-.335zM8.5 1h-1a.5.5 0 0 0-.5.5V5H3.664c-.166 0-.37.037-.567.099c-.198.06-.387.143-.521.236L.201 7.165C.066 7.256 0 7.378 0 7.5c0 .121.066.242.201.335l2.375 1.832c.134.091.323.175.521.235c.197.061.401.098.567.098H7v8.5a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-17a.5.5 0 0 0-.5-.5z"})]),(0,s._)("span",{class:"tw-font-[cairo] tw-text-sm tw-font-medium tw-text-gray-600"},"Address")],-1),PJ={class:"tw-font-[cairo] tw-text-lg tw-font-bold tw-pl-8 tw-text-gray-700"},AJ={class:"tw-p-5 tw-py-3 tw-w-full tw-border-t tw-border-solid tw-mt-3"},WJ={class:""},$J=(0,s._)("div",{class:"tw-flex tw-items-center tw-gap-2"},[(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 2048 2048"},[(0,s._)("path",{fill:"#f97316",d:"M1024 1000v959l-64 32l-832-415V536l832-416l832 416v744h-128V680l-640 320zm-64-736L719 384l621 314l245-122l-625-312zm-64 1552v-816L256 680v816l640 320zM335 576l625 312l238-118l-622-314l-241 120zm1073 1216v-128h640v128h-640zm0-384h640v128h-640v-128zm-256 640v-128h128v128h-128zm0-512v-128h128v128h-128zm0 256v-128h128v128h-128zm-128 24h1h-1zm384 232v-128h640v128h-640z"})]),(0,s._)("span",{class:"tw-font-[cairo] tw-text-sm tw-font-medium tw-text-gray-600"},"Product")],-1),EJ={class:"tw-p-3 tw-pl-10 tw-space-y-2"},qJ={class:"tw-font-bold tw-text-green-500"},TJ={key:0,class:"tw-font-bold tw-text-orange-500 tw-bg-orange-100 tw-rounded-lg tw-px-2 tw-text-sm"},OJ={key:1,class:"tw-font-bold tw-text-orange-500 tw-bg-orange-100 tw-rounded-lg tw-px-2 tw-text-sm"},VJ={class:"tw-font-[cairo] tw-mt-2 tw-flex tw-items-center tw-justify-end tw-gap-1 tw-text-2xl tw-text-green-400 tw-font-bold"},IJ={key:0};function FJ(t,e,r,a,i,l){const o=(0,s.up)("UpdatePopup");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",cJ,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.popup=!0),type:"button",class:"tw-px-5 tw-absolute tw-right-3 tw-top-3 tw-z-10 tw-py-2 tw-text-sm tw-gap-2 tw-font-medium tw-text-white tw-inline-flex tw-items-center tw-bg-green-400 hover:tw-bg-green-500 focus:tw-ring-4 focus:tw-outline-none focus:tw-ring-green-100 tw-rounded-lg tw-text-center dark:tw-bg-green-600 dark:hover:tw-bg-green-700 dark:focus:tw-ring-green-800"},[uJ,(0,s.Uk)(" Edit ")]),(0,s._)("div",pJ,[(0,s._)("span",mJ,[gJ,(0,s.Uk)(" ID: "+(0,et.zw)(r.order.id),1)]),(0,s._)("span",{class:(0,et.C_)([[l.confirmation.bgLight,l.confirmation.textLight],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},(0,et.zw)(l.confirmation.name),3),r.double?((0,s.wg)(),(0,s.iD)("span",hJ,"Maybe double")):(0,s.kq)("",!0)]),(0,s._)("div",fJ,[(0,s._)("div",vJ,[yJ,(0,s._)("span",xJ,(0,et.zw)(r.order.fullname),1)]),(0,s._)("div",bJ,[_J,(0,s._)("div",kJ,[(0,s._)("span",CJ,(0,et.zw)(r.order.phone),1),(0,s.Wm)(rt.T,{link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+r.order.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"text",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"green"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])])]),(0,s._)("div",DJ,[SJ,(0,s._)("span",zJ,(0,et.zw)(r.order.city),1)]),(0,s._)("div",UJ,[LJ,(0,s._)("span",PJ,(0,et.zw)(r.order.adresse),1)])]),(0,s._)("div",AJ,[(0,s._)("div",WJ,[$J,(0,s._)("ul",EJ,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.order.items,(t=>((0,s.wg)(),(0,s.iD)("li",{class:"tw-font-[cairo] tw-flex tw-items-center tw-gap-1",key:t.id},[(0,s._)("span",qJ,(0,et.zw)(t.quantity)+" x ",1),(0,s.Uk)(),(0,s._)("span",null,(0,et.zw)(t.product.name),1),(0,s.Uk)(),t.product_variation.color&&!["/","-"].includes(t.product_variation.color)?((0,s.wg)(),(0,s.iD)("span",TJ,(0,et.zw)(t.product_variation.color),1)):(0,s.kq)("",!0),(0,s.Uk)(),t.product_variation.size&&!["/","-"].includes(t.product_variation.size)?((0,s.wg)(),(0,s.iD)("span",OJ,(0,et.zw)(t.product_variation.size),1)):(0,s.kq)("",!0)])))),128)),(0,s._)("li",VJ,[(0,s._)("span",null,(0,et.zw)(i.currency),1),(0,s._)("span",null,(0,et.zw)(l.price),1)])])])])]),i.popup?((0,s.wg)(),(0,s.iD)("div",IJ,[(0,s.Wm)(o,{onUpdate:e[1]||(e[1]=e=>t.$emit("update",e)),visible:i.popup,"onUpdate:visible":e[2]||(e[2]=t=>i.popup=t),item:r.order},null,8,["visible","item"])])):(0,s.kq)("",!0)])}var RJ={components:{UpdatePopup:VQ},props:{order:{required:!0},double:{required:!1}},data(){return{currency:c,popup:!1}},computed:{price(){return Bi(this.order)},confirmation(){return qn.find((t=>t.value==this.order.confirmation))}}};const jJ=(0,p.Z)(RJ,[["render",FJ]]);var NJ=jJ,MJ={components:{OrderCard:NJ},data(){return{fetching:!0,order_exists:!1,doubles:[],order:null}},methods:{toConfirm(){nJ(this)},getOrder(){wJ(this)},save(){dJ(this)}},mounted(){this.toConfirm()}};const HJ=(0,p.Z)(MJ,[["render",oJ]]);var YJ=HJ;const ZJ={class:"py-5 px-2 tw-border tw-bg-white tw-w-full tw-rounded-md tw-mb-5"},KJ={class:"tw-px-3"},BJ={class:"tw-flex tw-items-center tw-justify-between tw-flex-wrap"},QJ={class:"tw-flex tw-items-center tw-gap-x-3"},GJ=(0,s._)("h2",{class:"tw-text-lg tw-font-medium tw-text-gray-800 darkx:tw-text-white"},"Orders",-1),JJ={class:"tw-px-3 tw-py-1 tw-text-xs tw-text-emerald-600 tw-bg-emerald-100 tw-rounded-full darkx:tw-bg-gray-800 darkx:tw-text-orange-400"},XJ=(0,s._)("p",{class:"tw-mt-1 tw-text-sm tw-text-gray-500 darkx:tw-text-gray-300"},"Show all confirmed orders.",-1);function tX(t,e,r,a,i,l){const o=(0,s.up)("IndexFilters"),n=(0,s.up)("IndexTable");return(0,s.wg)(),(0,s.iD)("div",ZJ,[(0,s._)("section",KJ,[(0,s._)("div",BJ,[(0,s._)("div",null,[(0,s._)("div",QJ,[GJ,(0,s._)("span",JJ,(0,et.zw)(i.totalOrders)+" order",1)]),XJ]),(0,s.kq)("",!0)]),(0,s.Wm)(o,{search:i.search,"onUpdate:search":e[0]||(e[0]=t=>i.search=t),filters:i.filters,"onUpdate:filters":e[1]||(e[1]=t=>i.filters=t),onFilter:e[2]||(e[2]=t=>l.handlePerPageChange(i.per_page)),onPerPageChange:l.handlePerPageChange,onFresh:l.paginateOrders,loading:i.fetching,statistics:i.statistics,"active-statistics":""},null,8,["search","filters","onPerPageChange","onFresh","loading","statistics"]),(0,s._)("div",null,[(0,s.Wm)(n,{onUpdate:l.handleItemUpdate,onPageChange:l.handlePageChange,onSortOrder:l.handleSortOrderChange,loading:i.fetching,from:i.from,to:i.to,"last-page":i.last_page,"per-page":i.per_page,total:i.total,"current-page":i.current_page,items:i.items},null,8,["onUpdate","onPageChange","onSortOrder","loading","from","to","last-page","per-page","total","current-page","items"])])])])}var eX={components:{IndexTable:ZQ,IndexFilters:jG},data(){return{fetching:!0,items:[],statistics:null,first_page_url:null,lase_page_url:null,next_page_url:null,prev_page_url:null,last_page:1,from:1,to:1,total:0,totalOrders:0,links:null,search:"",sort_by:"created_at",sort_order:"desc",per_page:10,current_page:1,filters:{confirmation:"all",created_at:"all"}}},methods:{paginateOrders(){const t="?page="+this.current_page,e={sort_by:this.sort_by,sort_order:this.sort_order,per_page:this.per_page,current_page:this.current_page,search:this.search,filters:this.filters,confirmation:"confirmer"};return this.fetching=!0,q.paginate(t,e).then((({data:t})=>{const e=t.data.orders;this.setOptions(e),this.statistics=this.search?this.statistics:t.data.statistics})).then((()=>{this.fetching=!1}))},setOptions(t){this.items=t.data,this.first_page_url=Qi(t.first_page_url),this.lase_page_url=Qi(t.last_page_url),this.next_page_url=Qi(t.next_page_url),this.prev_page_url=Qi(t.prev_page_url),this.last_page=parseInt(t.last_page),this.from=parseInt(t.from),this.to=parseInt(t.to),this.per_page=parseInt(t.per_page),this.total=parseInt(t.total),this.totalOrders=this.search?this.totalOrders:parseInt(t.total),this.links=t.links},handleNext(){},handlePrev(){},handleItemUpdate(t){this.items=this.items.map((e=>e.id==t.id?t:e))},handlePageChange(t){this.current_page=t,this.paginateOrders()},handlePerPageChange(t){this.per_page=parseInt(t),this.handlePageChange(1)},handleSortOrderChange(){this.sort_order="asc"==this.sort_order?"desc":"asc",this.paginateOrders()}},mounted(){this.paginateOrders()}};const rX=(0,p.Z)(eX,[["render",tX]]);var aX=rX,sX={name:"orders",path:"/agent/orders",component:da,meta:{module:"order"},children:[{name:"order/list",path:"",component:HG,meta:{module:"order",subModule:"order/list",title:"Orders List",gate:"show_all_orders"}},{name:"order/show",path:"add",component:YJ,meta:{module:"order",subModule:"order/show",title:"Current Order",gate:"show_all_orders"}},{name:"order/confirmed",path:"confirmed",component:aX,meta:{module:"order",subModule:"order/confirmed",title:"Confirmed Orders",gate:"show_all_orders"}}]};const iX=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Orders")])],-1),lX={key:0},oX={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},nX={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-5"},dX={key:1},wX={class:"tw-min-h-[400px] tw-flex tw-flex-col tw-justify-center tw-items-center"},cX=(0,s._)("p",{class:"tw-font-medium tw-text-neutral-400 tw-text-lg tw-mb-n3"},"No Confirmed orders for now.",-1),uX=["src"];function pX(t,e,r,a,i,l){const o=(0,s.up)("LoadingAnimation"),n=(0,s.up)("OrderCard");return(0,s.wg)(),(0,s.iD)("div",null,[iX,i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",lX,[(0,s.Wm)(o)])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",oX,[l.orders.length>0?((0,s.wg)(),(0,s.iD)("div",nX,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.filteredOrders,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t.id,class:"tw-col-span-12 md:tw-col-span-4"},[((0,s.wg)(),(0,s.j4)(n,{order:t,key:t.id},null,8,["order"]))])))),128))])):((0,s.wg)(),(0,s.iD)("div",dX,[(0,s._)("div",wX,[cX,(0,s._)("img",{src:i.localUrl+"images/delivery.jpg",class:"tw-mt-0 tw-mx-auto tw-max-w-[600px] tw-w-full",alt:""},null,8,uX)])]))])):(0,s.kq)("",!0)])}var mX=r(9875),gX=r(1888),hX=r(1334);const fX={class:"tw-text-sm tw-text-orange-500x tw-bg-orange-500x/10 tw-underline tw-underline-offset-2 tw-px-1 tw-w-fit tw-rounded"},vX={class:"tw-w-full tw-whitespace-normal"},yX=(0,s._)("div",{class:"tw-border-b tw-mb-1 tw-border-dashed"},null,-1),xX={class:"tw-flex tw-items-center"},bX={key:0},_X={key:1},kX={class:"tw-min-w-fit tw-w-[25px] tw-h-[25px] tw-flex tw-items-center tw-justify-center tw-text-md tw-font-bold tw-p-1 tw-rounded tw-text-orange-400 tw-bg-orange-400/10"},CX=(0,s._)("span",{class:"tw-text-sm"},"x",-1),DX={key:0},SX={key:0,class:"tw-px-5 tw-py-2 tw-mt-2 tw-border-neutral-200 tw-border-t tw-border-dashed"},zX=(0,s._)("p",{class:"tw-text-md tw-font-bold tw-text-pink-500"},"NOTE",-1),UX={class:"tw-flex tw-items-center tw-text-gray-500"},LX={class:"tw-flex tw-items-center tw-text-gray-500"};function PX(t,e,r,a,i,l){const o=(0,s.up)("OrderCardDelivery");return(0,s.wg)(),(0,s.j4)(as._,{class:(0,et.C_)(["tw-mx-auto tw-relative tw-border-dashed !tw-shadow-lg !tw-shadow-gray-100/70",[!!r.order.note&&"tw-border-pink-00","livrer"==r.order.delivery&&"tw-border-emerald-400"]]),flat:"",border:""},{default:(0,s.w5)((()=>[(0,s._)("div",{class:(0,et.C_)(["tw-absolute tw-top-0 tw-right-0 tw-py-1 tw-px-2 tw-rounded-bl tw-text-xs",[l.delivery?.bg,l.delivery?.text]])},(0,et.zw)(r.order.delivery),3),(0,s.Wm)(mX._,null,{title:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("p",fX,(0,et.zw)(r.order.city),1),(0,s._)("p",vX,(0,et.zw)(r.order.adresse),1)]),yX])),_:1}),(0,s.Wm)(gX.Z,{class:"py-0"},{default:(0,s.w5)((()=>[(0,s.Wm)(ua.o,{align:"center","no-gutters":""},{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{cols:"12",class:"tw-flex tw-items-center tw-flex-wrap tw-text-gray-500"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{icon:"mdi-account",size:"small",class:"tw-mr-2 tw-text-sm"}),(0,s.Uk)(" "+(0,et.zw)(r.order.fullname)+" ",1),r.order.note?((0,s.wg)(),(0,s.j4)(st.t,{key:0,icon:"mdi-note-outline",size:"small",class:"tw-ml-2 tw-text-sm !tw-text-pink-500"})):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(pa.D,{cols:"12",class:"tw-text-gray-500 tw-space-y-1 tw-mt-2"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.order.items,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"tw-flex tw-items-center tw-gap-3",key:t.id},[(0,s._)("div",xX,[(0,s._)("span",null,[(0,s.Uk)((0,et.zw)(t.product.name)+" ",1),t.product_variation.size?((0,s.wg)(),(0,s.iD)("span",bX,"| "+(0,et.zw)(t.product_variation.size),1)):(0,s.kq)("",!0),(0,s.Uk)(),t.product_variation.size?((0,s.wg)(),(0,s.iD)("span",_X,"| "+(0,et.zw)(t.product_variation.size),1)):(0,s.kq)("",!0)])]),(0,s._)("div",null,[(0,s._)("p",kX,[CX,(0,s.Uk)(" "+(0,et.zw)(t.quantity),1)])])])))),128))])),_:1}),(0,s.Wm)(pa.D,{class:"text-h4 tw-my-3",cols:"12"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,et.zw)(l.getPrice(r.order)),1)])),_:1})])),_:1})])),_:1}),(0,s.kq)("",!0),(0,s.Wm)($t.Fx,null,{default:(0,s.w5)((()=>[t.expand?((0,s.wg)(),(0,s.iD)("div",DX,[r.order.note?((0,s.wg)(),(0,s.iD)("div",SX,[zX,(0,s._)("p",null,(0,et.zw)(r.order.note),1)])):(0,s.kq)("",!0),(0,s.Wm)(er.i,{class:"bg-transparent tw-space-y-2 !tw-px-5 tw-py-3 tw-border-neutral-200 tw-border-dashed tw-border-t tw-mt-5"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",UX,[(0,s.Wm)(st.t,{icon:"mdi-phone",class:"mr-2 tw-text-sm"}),(0,s.Uk)(" "+(0,et.zw)(r.order.phone),1)])]),(0,s._)("div",null,[(0,s._)("div",LX,[(0,s.Wm)(st.t,{icon:"mdi-calendar",class:"mr-2 tw-text-sm"}),(0,s.Uk)(" "+(0,et.zw)(r.order.created_at?.split("T")[0].split("-").reverse().join(".")),1)])])])),_:1})])):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(Jt.J),(0,s.Wm)(hX.h,{class:"tw-flex tw-justify-end tw-gap-2 tw-flex-wrap"},{default:(0,s.w5)((()=>[(0,s.Wm)(rt.T,{class:"tw-capitalize tw-mx-auto tw-bg-orange-500/5 tw-text-orange-500",rounded:"lg",density:"comfortable",icon:"",variant:"flat",onClick:e[0]||(e[0]=e=>t.expand=!t.expand)},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,et.zw)(t.expand?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})])),_:1}),(0,s.Wm)(lr.C),r.order.phone?((0,s.wg)(),(0,s.j4)(rt.T,{key:0,link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+r.order.phone.replace("+","").replace("-","").replace(" ",""),class:"tw-capitalize tw-bg-green-500/5 tw-text-green-500 tw-border tw-border-green-500/30",icon:"",rounded:"lg",variant:"flat",density:"comfortable"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])):(0,s.kq)("",!0),r.order.phone?((0,s.wg)(),(0,s.j4)(rt.T,{key:1,link:"",target:"_blank",href:"tel:"+r.order.phone,class:"tw-capitalize tw-bg-blue-500/5 tw-text-blue-500 tw-border tw-border-blue-500/30",icon:"",rounded:"lg",variant:"flat",density:"comfortable"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-phone")])),_:1})])),_:1},8,["href"])):(0,s.kq)("",!0),(0,s.Wm)(rt.T,{onClick:e[1]||(e[1]=e=>t.confirmPopup=!0),class:"tw-capitalize tw-bg-emerald-500 tw-text-white tw-border tw-border-emerald-500/30",icon:"",rounded:"lg",variant:"flat",density:"comfortable"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-check")])),_:1})])),_:1})])),_:1}),((0,s.wg)(),(0,s.j4)(o,{delivery:r.order.delivery,order:r.order,key:r.order,visible:t.confirmPopup,onCancel:e[2]||(e[2]=e=>t.confirmPopup=!1)},null,8,["delivery","order","visible"]))])),_:1},8,["class"])}const AX={class:"md:tw-w-[80%] tw-overflow-hidden tw-w-[95%] tw-max-w-[550px] tw-mx-auto tw-my-3 tw-min-h-[200px] tw-bg-white tw-rounded-lg tw-shadow-lg"},WX={class:"tw-px-5 tw-pt-5"},$X=(0,s._)("h1",{class:"tw-font-bold tw-text-gray-600"},"Select Status",-1),EX={class:"tw-mt-3 tw-flex tw-gap-3 tw-flex-wrap"},qX=["disabled","onClick"],TX={class:"tw-mt-5 tw-px-5 tw-py-3 tw-bg-gray-50 tw-border-t tw-flex tw-gap-2 tw-justify-end"},OX=(0,s._)("span",{class:"!tw-text-gray-500"},"Cancel",-1),VX=(0,s._)("span",{class:"!tw-text-white"},"Confirm",-1);function IX(t,e,r,a,i,l){const o=(0,s.up)("popup-full"),n=(0,s.up)("OrderReporting");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(o,{onCancel:l.cancel,visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",AX,[(0,s._)("div",WX,[$X,(0,s._)("div",EX,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveryStatus,(e=>((0,s.wg)(),(0,s.iD)("button",{disabled:l.isDisabled(e),onClick:t=>l.handleChange(e),key:e.value,class:(0,et.C_)([[l.isDisabled(e)&&"tw-saturate-0",e.text,e.bg,e.id==t.delivery&&[e.ring,"tw-ring"]],"tw-px-4 tw-py-2 tw-rounded"])},(0,et.zw)(e.name),11,qX)))),128))])]),(0,s._)("div",TX,[(0,s.Wm)(rt.T,{onClick:l.cancel,class:"!tw-capitalize",color:"grey-lighten-3",flat:""},{default:(0,s.w5)((()=>[OX])),_:1},8,["onClick"]),(0,s.Wm)(rt.T,{onClick:l.handleConfirm,loading:t.isLoading,class:"!tw-capitalize",color:"primary-color",flat:""},{default:(0,s.w5)((()=>[VX])),_:1},8,["onClick","loading"])])])])),_:1},8,["onCancel","visible"]),(0,s.Wm)(n,{onOrderReported:l.cancel,order:r.order,visible:t.showPopupReporter,onCancel:e[0]||(e[0]=e=>t.showPopupReporter=!1)},null,8,["onOrderReported","order","visible"])])}const FX={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},RX=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),jX=(0,s._)("br",null,null,-1),NX=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),MX={class:"tw-flex tw-justify-end tw-mt-2"};function HX(t,e,r,i,l,o){const n=(0,s.up)("VueDatePicker"),d=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",{key:r.order.id},[(0,s.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>o.cancel()),visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",FX,[RX,(0,s.Wm)(n,{modelValue:l.date,"onUpdate:modelValue":e[0]||(e[0]=t=>l.date=t),format:o.format},null,8,["modelValue","format"]),jX,NX,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[a.nr,l.note]]),(0,s._)("div",MX,[(0,s.Wm)(rt.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleConfirm},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var YX={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_delivery_date=this.realDate,t.reported_delivery_note=this.note,t.delivery="reporter",this.isLoading=!0,la.deliveryUpdateDelivery(t.id,"reporter",t).then((e=>{console.log(e.data),this.$alert({type:"success",title:"Order reported successfully"}),this.$emit("orderReported"),this.$store.dispatch("order/update",{id:t.id,order:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},format(t){const e=t.getDate(),r=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,s=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();return this.realDate=`${i}-${s}-${r}`,`${r}/${s}/${i}`},cancel(){this.$emit("cancel")}},mounted(){console.log(this.order)}};const ZX=(0,p.Z)(YX,[["render",HX]]);var KX=ZX,BX={props:["visible","order"],components:{OrderReporting:KX},data:()=>({status:Vn,disabled:In,delivery:2,isLoading:!1,note:"",showPopupReporter:!1}),computed:{deliveryStatus(){return this.status.filter((t=>!!t.value))},selected(){return this.status.find((t=>t.id==this.delivery))}},watch:{order:{handler(t){this.delivery=this.getDeliveryId(t.delivery)},deep:!0,immediate:!0}},methods:{cancel(){this.getCurrentStatus(),this.$emit("cancel")},isDisabled(t){return this.disabled.includes(t.value)},handleChange(t){if(this.isDisabled(t))return!1;this.delivery=t.id},handleConfirm(){const t=this.selected;if(t.value===this.order.delivery)return this.cancel(),!1;"reporter"!=t.value&&this.updateOrder().then((()=>{this.cancel()})),"reporter"==t.value&&(this.showPopupReporter=!0)},async updateOrder(){return this.isLoading=!0,la.deliveryUpdateDelivery(this.order.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateDelivery(this.order.id,this.selected.value),this.isLoading=!1,this.cancel())}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateDelivery(t,e){this.$store.dispatch("order/updateDelivery",{id:t,delivery:e})},getDeliveryId(t){return this.status.find((e=>e.value==t)).id||0},getCurrentStatus(){this.delivery=this.getDeliveryId(this.order.delivery)}},mounted(){this.getCurrentStatus()}};const QX=(0,p.Z)(BX,[["render",IX]]);var GX=QX,JX={components:{OrderCardDelivery:GX},props:["order"],data:()=>({deliveryStatus:Vn,expand:!1,confirmPopup:!1,labels:[{name:"Telephone",field:"phone",icon:"mdi-phone"},{name:"Date",field:"created_at",icon:"mdi-calendar"}]}),computed:{delivery(){return this.getDeliveryStatus(this.order.delivery)}},methods:{getDeliveryStatus(t){return this.deliveryStatus.find((e=>e.value==t))||this.deliveryStatus[0]},getPrice(t){return Bi(t)}}};const XX=(0,p.Z)(JX,[["render",PX]]);var t0=XX,e0={components:{OrderCard:t0},data(){return{localUrl:n,deliveryStatus:Vn,isLoaded:!1,showFilters:!1,deliveryFilter:"all",affectationFilter:"all",upsellFilter:"all",search:""}},computed:{orders(){return this.$store.getters["order/orders"].filter((t=>"livrer"!=t.delivery))},filteredOrders(){const t=this.deliveryFilter;return this.orders.filter((e=>{if("all"!==t&&e.delivery!==t)return!1;const r=((t,e)=>{for(const r in t)if(!["created_at","updated_at"].includes(r)&&String(t[r]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(e,this.search);return!!r}))}},methods:{getOrders(){la.deliveryOrders().then((t=>{const e=t.data.data.orders;this.$store.dispatch("order/setOrders",e),this.isLoaded=!0}),this.$handleApiError)}},mounted(){this.$store.dispatch("order/setOrders",[]),this.getOrders()}};const r0=(0,p.Z)(e0,[["render",pX]]);var a0=r0;const s0=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Delivered Orders"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Delivered orders list")])],-1),i0={key:0},l0={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},o0={class:"mb-5 tw-flex"},n0={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},d0={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},w0={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},c0=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Delivery",-1),u0={class:"tw-relative"},p0=["value"],m0={key:0,class:""},g0={key:1},h0=(0,s._)("p",null,"No orders for now",-1),f0=[h0];function v0(t,e,r,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("OrdersTable");return(0,s.wg)(),(0,s.iD)("div",null,[s0,l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",i0,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",l0,[(0,s._)("div",o0,[(0,s.Wm)(rt.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",n0,[(0,s.Wm)(Xt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,l.search]])])]),(0,s._)("div",{class:(0,et.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,s._)("div",d0,[(0,s._)("div",w0,[c0,(0,s._)("div",u0,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.deliveryFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveryStatus,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.value?t.value:"all"},(0,et.zw)(t.name),9,p0)))),128))],512),[[a.bM,l.deliveryFilter]]),(0,s.Wm)(st.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])],2),o.orders.length>0?((0,s.wg)(),(0,s.iD)("div",m0,[(0,s.Wm)(d,{orders:o.filteredOrders},null,8,["orders"])])):((0,s.wg)(),(0,s.iD)("div",g0,f0))])):(0,s.kq)("",!0)])}const y0={class:"tw-relative tw-min-h-[400px] tw-overflow-x-auto tw-overflow-y-visible sm:tw-rounded-lg"},x0={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},b0={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},_0=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),k0={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},C0={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},D0={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},S0=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),z0=["value"],U0={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},L0={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},P0={class:"tw-text-white"};function A0(t,e,r,i,l,o){const n=(0,s.up)("OrderRow");return(0,s.wg)(),(0,s.iD)("div",{key:r.orders.length},[(0,s._)("div",y0,[(0,s._)("table",x0,[(0,s._)("thead",b0,[(0,s._)("tr",null,[_0,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",k0,(0,et.zw)(t),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.orders,(t=>((0,s.wg)(),(0,s.j4)(n,{key:t.id,order:t},null,8,["order"])))),128))])])]),(0,s._)("div",C0,[(0,s._)("div",D0,[S0,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,et.zw)(t),9,z0)))),128))],512),[[a.bM,l.paginationLimit]])]),(0,s._)("div",U0,[(0,s._)("div",L0,(0,et.zw)(o.prevRange+1)+" - "+(0,et.zw)(l.currentPage==o.pageCount?r.orders.length:o.nextRange)+" of "+(0,et.zw)(r.orders.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pageCount,(t=>((0,s.wg)(),(0,s.j4)(rt.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",P0,(0,et.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const W0=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),$0={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},E0={class:"tw-px-6 tw-py-4 tw-relative"},q0={key:0},T0={class:"tw-px-6 tw-py-4"},O0={class:"tw-px-6 tw-py-4"},V0={class:"tw-px-6 tw-py-4"},I0={class:"tw-px-6 tw-py-4"},F0={class:"tw-pb-2"},R0={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},j0={key:0},N0={key:1},M0={class:"tw-px-6 tw-py-4 tw-relative"},H0={class:"tw-flex tw-items-center tw-justify-center"},Y0={class:"tw-flex tw-gap-1"},Z0={key:0},K0={class:"tw-px-6 tw-py-4"},B0={class:"tw-px-6 tw-py-4"},Q0={class:"tw-px-6 tw-py-4"},G0={class:"tw-max-w-[300px] tw-min-w-[150px] tw-whitespace-normal"},J0={class:"tw-px-6 tw-py-4"};function X0(t,e,r,a,i,l){const o=(0,s.up)("OrderDelivery"),n=(0,s.up)("OrderActions");return(0,s.wg)(),(0,s.iD)("tr",{key:r.order.id,class:(0,et.C_)([["reporter"==r.order.delivery&&"tw-relative",l.isReportedToday(r.order)&&"!tw-border tw-border-red-400"],"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"])},[W0,(0,s._)("th",$0,(0,et.zw)(r.order.id),1),(0,s._)("td",E0,[(0,s.Uk)((0,et.zw)(r.order?.created_at?.split("T")[0])+" ",1),"reporter"==r.order.delivery?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,et.C_)([l.isReportedToday(r.order)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[l.isReportedToday(r.order)?((0,s.wg)(),(0,s.iD)("span",q0," Reported for today ")):(0,s.kq)("",!0)],2)):(0,s.kq)("",!0)]),(0,s._)("td",T0,(0,et.zw)(r.order.fullname),1),(0,s._)("td",O0,(0,et.zw)(r.order.adresse),1),(0,s._)("td",V0,(0,et.zw)(r.order.phone),1),(0,s._)("td",I0,[(0,s._)("div",F0,[(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.order.items,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,s.Uk)(" - "),(0,s._)("span",R0,(0,et.zw)(t.quantity)+" X ",1),(0,s.Uk)((0,et.zw)(t.product.name)+" ",1),t.product_variation.size?((0,s.wg)(),(0,s.iD)("span",j0,"| "+(0,et.zw)(t.product_variation.size),1)):(0,s.kq)("",!0),t.product_variation.color?((0,s.wg)(),(0,s.iD)("span",N0,"| "+(0,et.zw)(t.product_variation.color),1)):(0,s.kq)("",!0)])))),128))])])]),(0,s._)("td",M0,[(0,s._)("div",H0,[((0,s.wg)(),(0,s.j4)(o,{class:(0,et.C_)("reporter"==r.order.delivery&&"tw-mb-1"),order:r.order,id:r.order.id,key:r.order.delivery,delivery:r.order.delivery},null,8,["class","order","id","delivery"])),"reporter"==r.order.delivery?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,et.C_)([l.isReportedToday(r.order)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[(0,s._)("span",Y0,["reporter"==r.order.delivery?((0,s.wg)(),(0,s.iD)("span",Z0,[(0,s.Wm)(st.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s._)("span",null,(0,et.zw)(r.order?.reported_delivery_date?.split("T")[0]),1)])):(0,s.kq)("",!0)])],2)):(0,s.kq)("",!0)])]),(0,s._)("td",K0,(0,et.zw)(l.getPrice(r.order)),1),(0,s._)("td",B0,(0,et.zw)(r.order.city),1),(0,s._)("td",Q0,[(0,s._)("div",G0,(0,et.zw)(r.order.note),1)]),(0,s._)("td",J0,[((0,s.wg)(),(0,s.j4)(n,{key:r.order.id,order:r.order},null,8,["order"]))])],2)}const t1={key:0,class:"focus:tw-ring-4 tw-min-w-fit focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between tw-bg-green-500/10 tw-text-green-500"},e1={key:1},r1={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},a1=["onClick"];function s1(t,e,r,a,i,l){const o=(0,s.up)("OrderReporting");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:r.delivery,class:"tw-relative tw-min-w-[100px]"},["livrer"==r.delivery?((0,s.wg)(),(0,s.iD)("div",t1,(0,et.zw)(l.selected.name),1)):(0,s.kq)("",!0),"livrer"!=r.delivery?((0,s.wg)(),(0,s.iD)("div",e1,[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>l.toggle&&l.toggle(...t)),class:(0,et.C_)([[l.selected.text,l.selected.bg,l.selected.ring],"focus:tw-ring-4 tw-min-w-[100px] focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between"]),type:"button"},[(0,s.Uk)((0,et.zw)(l.selected.name)+" ",1),i.isLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(st.t,{key:0,class:"tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,et.zw)(i.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),i.isLoading?((0,s.wg)(),(0,s.j4)(st.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)],2),(0,s._)("div",{class:(0,et.C_)([{"tw-hidden":!i.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,s._)("ul",r1,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.options,(t=>((0,s.wg)(),(0,s.iD)("li",{onClick:e=>!i.disabled.includes(t.value)&&l.handleChange(t),key:t.id},[(0,s._)("a",{class:(0,et.C_)(["tw-block tw-px-4 tw-py-2",[i.disabled.includes(t.value)?"tw-text-neutral-400/80 tw-bg-neutral-400/10":[t.text,t.bg]]])},(0,et.zw)(t.name),3)],8,a1)))),128))])],2),(0,s.Wm)(o,{order:r.order,visible:i.showPopupReporter,onCancel:e[1]||(e[1]=t=>i.showPopupReporter=!1)},null,8,["order","visible"])])):(0,s.kq)("",!0)])),[[te.L,l.close]])}var i1={props:["delivery","id","order"],components:{OrderReporting:KX},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",selectedId:0,allOptions:Vn,disabled:In,showPopupReporter:!1}},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(t.id===this.selectedId)return!1;"reporter"!=t.value&&(this.selectedId=t.id,this.updateOrder(),this.close()),"reporter"==t.value&&(this.showPopupReporter=!0)},async updateOrder(){return this.isLoading=!0,la.deliveryUpdateDelivery(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateDelivery(this.id,this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateDelivery(t,e){this.$store.dispatch("order/updateDelivery",{id:t,delivery:e})}},mounted(){this.availableOptions.includes(this.delivery)?this.selectedId=this.allOptions.find((t=>t.value==this.delivery)).id:this.selectedId=0}};const l1=(0,p.Z)(i1,[["render",s1]]);var o1=l1;const n1={key:0};function d1(t,e,r,a,i,l){return i.newOrder?((0,s.wg)(),(0,s.iD)("div",n1,[(0,s.Wm)(rt.T,{link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+r.order.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])])):(0,s.kq)("",!0)}var w1={props:["order"],name:"orderActions",data(){return{newOrder:null}},computed:{},methods:{},mounted(){this.newOrder={...this.order}}};const c1=(0,p.Z)(w1,[["render",d1]]);var u1=c1,p1={props:["order","showNote"],components:{OrderDelivery:o1,OrderActions:u1},data(){return{showPopup:!1,isLoading:!1,todayDate:null}},methods:{handleClick(){this.showPopup=!0},isReportedToday(t){return"reporter"==t.delivery&&t.reported_delivery_date==this.todayDate},getPrice(t){return Bi(t)}},mounted(){const t=new Date,e=t.getDate(),r=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,s=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();this.todayDate=`${i}-${s}-${r}`}};const m1=(0,p.Z)(p1,[["render",X0]]);var g1=m1,h1={props:["orders"],components:{OrderRow:g1},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10,todayDate:null,columns:["#","Date","Client","Address","Phone","Product","Delivery","Price","City","Note","Actions"]}},computed:{deliveries(){return this.$store.getters["user/deliveries"]},prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.orders.length/this.paginationLimit)},items(){const t=[...this.reportedForToday,...this.orders.filter((t=>!this.isReportedToday(t)))];return t.slice(this.prevRange,this.nextRange)},reportedForToday(){return this.orders.filter(this.isReportedToday)}},methods:{isReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date==this.todayDate}},mounted(){const t=new Date,e=t.getDate(),r=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,s=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();this.todayDate=`${i}-${s}-${r}`}};const f1=(0,p.Z)(h1,[["render",A0]]);var v1=f1,y1={components:{OrdersTable:v1},data(){return{localUrl:n,deliveryStatus:Vn,isLoaded:!1,showFilters:!1,deliveryFilter:"all",affectationFilter:"all",upsellFilter:"all",search:""}},computed:{orders(){return this.$store.getters["order/orders"]},filteredOrders(){const t=this.deliveryFilter;return this.orders.filter((e=>{if("all"!==t&&e.delivery!==t)return!1;const r=((t,e)=>{for(const r in t)if(!["created_at","updated_at"].includes(r)&&String(t[r]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(e,this.search);return!!r}))}},methods:{getOrders(){la.deliveryDeliveredOrders().then((t=>{const e=t.data.data.orders;this.$store.dispatch("order/setOrders",e),this.isLoaded=!0}),this.$handleApiError)}},mounted(){this.$store.dispatch("order/setOrders",[]),this.getOrders()}};const x1=(0,p.Z)(y1,[["render",v0]]);var b1=x1,_1={name:"deliveries",path:"/deliveries",component:da,meta:{module:"delivery"},children:[{name:"delivery/list",path:"",component:a0,meta:{module:"delivery",subModule:"delivery/list",title:"Orders List",gate:"all"}},{name:"delivery/delivered",path:"/delivered",component:b1,meta:{module:"delivery",subModule:"delivery/delivered",title:"Delivered Orders List",gate:"all"}}]};const k1=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Inventory State List "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"See your inventory state")])],-1),C1={key:0},D1={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},S1={class:"mb-5 tw-flex"},z1={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},U1={key:0,class:""};function L1(t,e,r,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("InventoryStateTable");return(0,s.wg)(),(0,s.iD)("div",null,[k1,l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",C1,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",D1,[(0,s._)("div",S1,[(0,s.Wm)(rt.T,{icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white !tw-w-0 !tw-overflow-hidden"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",z1,[(0,s.Wm)(Xt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,l.search]])])]),o.inventoryState.length>0?((0,s.wg)(),(0,s.iD)("div",U1,[(0,s.Wm)(d,{columns:l.columns,states:o.filteredInventoryState},null,8,["columns","states"])])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])}class P1{async inventoryStates(){return await $.getCookie(),A.get("api/inventorystates")}async inventoryMovements(){return await $.getCookie(),A.get("api/inventorymovements")}async getMovement(t){return await $.getCookie(),A.get("api/inventorymovements/"+t)}async inventoryMovementCreate({product_id:t,delivery_id:e,variants:r}){return await $.getCookie(),A.post("api/inventorymovements/new",{product_id:t,delivery_id:e,variations:r})}async inventoryMovementUpdate(t,{product_id:e,delivery_id:r,variants:a,quantity:s}){return await $.getCookie(),A.post("api/inventorymovements/update/"+t,{product_id:e,delivery_id:r,variants:a,quantity:s})}async deliveryUpdateMovement(t,e,r){return await $.getCookie(),A.post("api/delivery/inventorymovements/update/"+t,{is_received:e,note:r})}async delete(t){return await $.getCookie(),A["delete"]("api/inventorymovements/delete/"+t)}}var A1=new P1;const W1={class:"tw-relative tw-min-h-[400px] tw-overflow-x-auto tw-overflow-y-visible sm:tw-rounded-lg"},$1={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},E1={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},q1=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),T1={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},O1=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),V1={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},I1={class:"tw-px-6 tw-py-4 tw-underline tw-underline-offset-1 tw-font-medium"},F1={class:"tw-px-6 tw-py-4"},R1={class:"tw-px-6 tw-py-4"},j1={class:"tw-px-6 tw-py-4 tw-font-bold tw-text-green-500"},N1={class:"tw-px-6 tw-py-4"},M1={class:"tw-px-6 tw-py-4"},H1=(0,s._)("br",null,null,-1),Y1={class:"tw-px-6 tw-py-4"},Z1={class:"mt-5 tw-flex tw-justify-between"},K1={class:"d-flex align-center"},B1=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700"},"Show per page: ",-1),Q1={class:"d-flex align-center"},G1={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},J1={class:"tw-text-white"};function X1(t,e,r,a,i,l){const o=(0,s.up)("router-link"),n=(0,s.up)("InventoryStateActions");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",W1,[(0,s._)("table",$1,[(0,s._)("thead",E1,[(0,s._)("tr",null,[q1,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",T1,(0,et.zw)(t.name),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.items,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:e,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[O1,(0,s._)("th",V1,(0,et.zw)(t.id),1),(0,s._)("td",I1,[(0,s.Wm)(o,{to:"products/"+t.id},{default:(0,s.w5)((()=>[(0,s.Uk)((0,et.zw)(t.name),1)])),_:2},1032,["to"])]),(0,s._)("td",F1,(0,et.zw)(t.buying_price)+" DH ",1),(0,s._)("td",R1,(0,et.zw)(t.selling_price)+" DH ",1),(0,s._)("td",j1,(0,et.zw)(l.availableQuantity(t)),1),(0,s._)("td",N1,(0,et.zw)(t.total_quantity),1),(0,s._)("td",M1,[(0,s.Uk)((0,et.zw)(t.updated_at?.split("T")[0])+" ",1),H1,(0,s.Uk)(" "+(0,et.zw)(t.updated_at?.split("T")[1].split(".")[0]),1)]),(0,s._)("td",Y1,[(0,s.Wm)(n,{state:t},null,8,["state"])])])))),128))])])]),(0,s._)("div",Z1,[(0,s._)("div",K1,[B1,(0,s.Wm)(vp.r,{"hide-details":!0,modelValue:i.paginationLimit,"onUpdate:modelValue":e[0]||(e[0]=t=>i.paginationLimit=t),items:i.allowedLimit,variant:"outlined",density:"compact",color:"primary-color"},null,8,["modelValue","items"])]),(0,s._)("div",Q1,[(0,s._)("div",G1,(0,et.zw)(l.prevRange+1)+" - "+(0,et.zw)(i.currentPage==l.pageCount?r.states.length:l.nextRange)+" of "+(0,et.zw)(r.states.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.pageCount,(t=>((0,s.wg)(),(0,s.j4)(rt.T,{onClick:e=>i.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==i.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",J1,(0,et.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}function t2(t,e,r,a,i,l){const o=(0,s.up)("InventoryStateDetails"),n=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",{key:r.state.id,class:"tw-flex tw-items-center"},[(0,s.Wm)(rt.T,{onClick:e[0]||(e[0]=t=>i.detailsPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-eye-outline")])),_:1})])),_:1}),(0,s.Wm)(n,{visible:i.detailsPopup,onCancel:e[2]||(e[2]=t=>i.detailsPopup=!1)},{default:(0,s.w5)((()=>[i.detailsPopup?((0,s.wg)(),(0,s.j4)(o,{key:0,onCancel:e[1]||(e[1]=t=>i.detailsPopup=!1),state:r.state},null,8,["state"])):(0,s.kq)("",!0)])),_:1},8,["visible"])])}const e2={class:"md:tw-w-[50%] tw-relative tw-max-h-full tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},r2={class:"tw-p-5"},a2={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500 tw-rounded-md tw-overflow-hidden"},s2=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"}," SIZE "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," COLOR "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY ")])],-1),i2={class:"tw-w-4 tw-p-4"},l2={class:"tw-w-4 tw-p-4"},o2={class:"tw-w-4 tw-p-4"},n2={class:"tw-w-4 tw-p-4"},d2={class:"tw-flex tw-items-center tw-gap-1"},w2={class:"tw-text-green-500"},c2={key:0},u2={class:"tw-text-red-400"},p2=(0,s.uE)('<div class="tw-flex tw-gap-3 mt-5"><div class="tw-flex tw-items-center tw-gap-1 tw-text-xs"><div class="tw-w-[10px] tw-h-[10px] tw-rounded-full tw-bg-green-500"></div><span>Available</span></div><div class="tw-flex tw-items-center tw-gap-1 tw-text-xs"><div class="tw-w-[10px] tw-h-[10px] tw-rounded-full tw-bg-neutral-700"></div><span>Initial</span></div><div class="tw-flex tw-items-center tw-gap-1 tw-text-xs"><div class="tw-w-[10px] tw-h-[10px] tw-rounded-full tw-bg-red-400"></div><span>Not Received</span></div></div>',1);function m2(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",e2,[(0,s.Wm)(rt.T,{onClick:l.cancel,icon:"mdi-close",variant:"flat",size:"w-small",color:"red",class:"tw-absolute tw-top-3 tw-z-10 tw-right-3"},null,8,["onClick"]),(0,s._)("div",r2,[(0,s._)("table",a2,[s2,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.state.variations,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,s._)("td",i2,(0,et.zw)(t.id),1),(0,s._)("td",l2,(0,et.zw)(t.size),1),(0,s._)("td",o2,(0,et.zw)(t.color),1),(0,s._)("td",n2,[(0,s._)("div",d2,[(0,s._)("span",w2,(0,et.zw)(t.available_quantity),1),(0,s._)("span",null,"/ "+(0,et.zw)(t.quantity),1),t.on_hold>0?((0,s.wg)(),(0,s.iD)("span",c2,[(0,s.Uk)(" / "),(0,s._)("span",u2,(0,et.zw)(t.on_hold),1)])):(0,s.kq)("",!0)])])])))),128))])]),p2])])}var g2={props:["state"],data(){return{}},computed:{},methods:{cancel(){this.$emit("cancel")}},mounted(){console.log(this.state)}};const h2=(0,p.Z)(g2,[["render",m2]]);var f2=h2,v2={props:["rowIndex","state"],components:{InventoryStateDetails:f2},name:"inventoryStateActions",data(){return{showPopup:!1,confirmPopup:!1,detailsPopup:!1,isConfirmed:!1,note:"",isLoading:!1}},computed:{user(){return this.$store.getters["user/user"]}},methods:{},mounted(){}};const y2=(0,p.Z)(v2,[["render",t2]]);var x2=y2,b2={props:["columns","states"],components:{InventoryStateActions:x2},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.states.length/this.paginationLimit)},items(){return this.states.slice(this.prevRange,this.nextRange)}},methods:{availableQuantity(t){let e=0;return t.variations.forEach((t=>{e+=t.available_quantity})),e}}};const _2=(0,p.Z)(b2,[["render",X1]]);var k2=_2,C2={components:{InventoryStateTable:k2},data(){return{localUrl:n,isLoaded:!1,showFilters:!1,search:"",columns:[{prop:"id",name:"#"},{prop:"product_name",name:"Product Name"},{prop:"buying_price",name:"Buying Price"},{prop:"selling_price",name:"Selling Price"},{prop:"available",name:"Available"},{prop:"quantity",name:"Quantity"},{prop:"updated_at",name:"Updated At"},{prop:"actions",name:"Actions"}]}},computed:{inventoryState(){return this.$store.getters["inventory/inventoryState"]},filteredInventoryState(){return this.inventoryState.filter((t=>!!(t.ref.toLowerCase().includes(this.search.toLowerCase())||t.name.toLowerCase().includes(this.search.toLowerCase())||t.description.toLowerCase().includes(this.search.toLowerCase()))))}},methods:{async getInventoryStates(){await A1.inventoryStates().then((t=>{if(console.log(t.data.data),"SHOW_ALL_INVENTORY_STATES"==t.data.code){const e=t.data.data;this.$store.dispatch("inventory/setInventoryState",e)}}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))}},async mounted(){this.getInventoryStates()}};const D2=(0,p.Z)(C2,[["render",L1]]);var S2=D2;const z2=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Add Inventory Movement"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create New Movement")],-1),U2={key:0},L2={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},P2={class:"tw-w-full"},A2=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery",-1),W2={class:"tw-relative"},$2=["disabled"],E2=["value"],q2={class:"tw-w-full"},T2=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Product Name",-1),O2={class:"tw-relative"},V2=["disabled"],I2=["value"],F2={class:"tw-w-full"},R2=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variation",-1),j2={class:"tw-relative"},N2=["value"],M2={class:"tw-w-full"},H2=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),Y2={class:"tw-w-full tw-h-full tw-flex tw-items-end"},Z2=(0,s._)("span",{class:"text-white text-capitalize"},"Add",-1),K2={class:"tw-max-w-full"},B2={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Q2=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"}," SIZE "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," COLOR "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate tw-max-w-[50px]"}," ACTIONS ")])],-1),G2={class:"tw-w-4 tw-p-4"},J2={class:"tw-w-4 tw-p-4"},X2={class:"tw-w-4 tw-p-4"},t5={class:"tw-w-4 tw-p-4"},e5={class:"tw-w-4 tw-p-4"},r5={class:"tw-w-fit tw-h-full tw-flex tw-items-end"},a5={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},s5=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),i5=(0,s._)("span",{class:"text-white text-capitalize"},"Create",-1);function l5(t,e,r,i,l,o){const n=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[z2,l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",U2,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",L2,[(0,s._)("div",null,[(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",P2,[A2,(0,s._)("div",W2,[(0,s.wy)((0,s._)("select",{disabled:l.selectedVariations.length,"onUpdate:modelValue":e[0]||(e[0]=t=>l.delivery=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-capitalize tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,et.zw)(t.firstname+" "+t.lastname),9,E2)))),128))],8,$2),[[a.bM,l.delivery]]),(0,s.Wm)(st.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",q2,[T2,(0,s._)("div",O2,[(0,s.wy)((0,s._)("select",{disabled:l.selectedVariations.length>0,"onUpdate:modelValue":e[1]||(e[1]=t=>l.product=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.products,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,et.zw)(t.name),9,I2)))),128))],8,V2),[[a.bM,l.product]]),(0,s.Wm)(st.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",F2,[R2,(0,s._)("div",j2,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.variation=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,et.zw)(t.color+" - "+t.size+"  ("+t.available_quantity+" items)"),9,N2)))),128))],512),[[a.bM,l.variation]]),(0,s.Wm)(st.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",sm:"4",md:"4"},{default:(0,s.w5)((()=>[(0,s._)("div",M2,[H2,(0,s._)("div",null,[(0,s.Wm)(it.hw,{type:"number",onChange:o.handleQuantityChange,"hide-details":!0,modelValue:l.quantity,"onUpdate:modelValue":e[3]||(e[3]=t=>l.quantity=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","modelValue"])])])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",sm:"2",md:"2"},{default:(0,s.w5)((()=>[(0,s._)("div",Y2,[(0,s.Wm)(rt.T,{onClick:o.addVariation,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[Z2])),_:1},8,["onClick"])])])),_:1}),(0,s.Wm)(pa.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",K2,[(0,s._)("table",B2,[Q2,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.selectedVariations,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,s._)("td",G2,(0,et.zw)(t.id),1),(0,s._)("td",J2,(0,et.zw)(t.size),1),(0,s._)("td",X2,(0,et.zw)(t.color),1),(0,s._)("td",t5,(0,et.zw)(t.quantity),1),(0,s._)("td",e5,[(0,s._)("div",r5,[(0,s.Wm)(rt.T,{onClick:e=>o.deleteVariation(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])])])])),_:1})])),_:1})]),(0,s._)("div",a5,[(0,s.Wm)(rt.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[s5])),_:1}),(0,s.Wm)(rt.T,{onClick:o.create,loading:l.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[i5])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}var o5={data(){return{isLoading:!1,isLoaded:!1,variationId:0,product:1,delivery:1,quantity:0,variation:0,selectedVariations:[]}},computed:{products(){return this.$store.getters["product/products"]},deliveries(){return this.$store.getters["user/deliveries"]},variations(){return this.products.find((t=>t.id==this.product))?.variations.filter((t=>{let e=!0;return this.selectedVariations.forEach((r=>{t.id==r.id&&(e=!1)})),e}))}},watch:{product(){this.variations.length>0?this.variation=this.variations[0].id:this.variation=null}},methods:{addVariation(){if(0==this.variations.length)return!1;const t=this.variations.find((t=>t.id==this.variation));if(!t)return!1;if(this.quantity>t.available_quantity||0==this.quantity)return this.$alert({type:"warning",title:"Quantity should be between 1 and "+t.available_quantity}),!1;const e={id:t.id,size:t.size,color:t.color,quantity:this.quantity};this.quantity=0,this.selectedVariations.push(e),this.variations.length>0?this.variation=this.variations[0].id:this.variation=null},deleteVariation(t){this.selectedVariations=this.selectedVariations.filter((e=>e.id!==t)),1==this.variations.length&&(this.variation=this.variations[0].id)},create(){if(0==this.selectedVariations.length)return this.$alert({type:"warning",title:"You need to add some variations"}),!1;let t=0;this.selectedVariations.forEach((e=>t+=e.quantity)),this.isLoading=!0,A1.inventoryMovementCreate({product_id:this.product,delivery_id:this.delivery,variants:this.selectedVariations,quantity:this.qty}).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.selectedVariations=[],this.getData()),"ERROR_QUANTITY"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).finally((()=>this.isLoading=!1))},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},async getDeliveries(){await X.deliveries().then((t=>{const e=t.data.data;this.$store.dispatch("user/setDeliveries",e),e.length>0?this.delivery=e[0].id:this.delivery=null}),this.$handleApiError)},getProducts(){return A1.inventoryStates().then((t=>{if("SHOW_ALL_INVENTORY_STATES"==t.data.code){const e=t.data.data;if(this.$store.dispatch("product/setProducts",e),e.length>0){const t=e[0];this.product=t.id,this.variations.length>0&&(this.variation=this.variations[0].id)}else this.product=null}}),(t=>{this.$handleApiError(t)}))},getData(){this.isLoaded=!1,Promise.allSettled([this.getProducts(),this.getDeliveries()]).then((()=>{this.isLoaded=!0}))}},mounted(){this.getData()}};const n5=(0,p.Z)(o5,[["render",l5]]);var d5=n5;const w5=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Update Inventory Movement"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Edit an existing Movement")],-1),c5={key:0},u5={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},p5={class:"tw-w-full"},m5=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery",-1),g5={class:"tw-relative"},h5=["value"],f5={class:"tw-w-full"},v5=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variation",-1),y5={class:"tw-relative"},x5=["value"],b5={class:"tw-w-full"},_5=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),k5={class:"tw-w-full tw-h-full tw-flex tw-items-end"},C5=(0,s._)("span",{class:"text-white text-capitalize"},"Add",-1),D5={class:"tw-max-w-full"},S5={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},z5=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"}," SIZE "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," COLOR "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate tw-max-w-[50px]"}," ACTIONS ")])],-1),U5={class:"tw-w-4 tw-p-4"},L5={class:"tw-w-4 tw-p-4"},P5={class:"tw-w-4 tw-p-4"},A5={class:"tw-w-4 tw-p-4"},W5={class:"tw-w-4 tw-p-4"},$5={class:"tw-w-fit tw-h-full tw-flex tw-items-end"},E5={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},q5=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),T5=(0,s._)("span",{class:"text-white text-capitalize"},"Update",-1);function O5(t,e,r,i,l,o){const n=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[w5,l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",c5,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",u5,[(0,s._)("div",null,[(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",p5,[m5,(0,s._)("div",g5,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.delivery=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-capitalize tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,et.zw)(t.firstname+" "+t.lastname),9,h5)))),128))],512),[[a.bM,l.delivery]]),(0,s.Wm)(st.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",f5,[v5,(0,s._)("div",y5,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.variation=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,et.zw)(t.color+" / "+t.size+" / "+t.quantity),9,x5)))),128))],512),[[a.bM,l.variation]]),(0,s.Wm)(st.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",sm:"4",md:"4"},{default:(0,s.w5)((()=>[(0,s._)("div",b5,[_5,(0,s._)("div",null,[(0,s.Wm)(it.hw,{type:"number",onChange:o.handleQuantityChange,"hide-details":!0,modelValue:l.quantity,"onUpdate:modelValue":e[2]||(e[2]=t=>l.quantity=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","modelValue"])])])])),_:1}),(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",sm:"2",md:"2"},{default:(0,s.w5)((()=>[(0,s._)("div",k5,[(0,s.Wm)(rt.T,{onClick:o.addVariation,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[C5])),_:1},8,["onClick"])])])),_:1}),(0,s.Wm)(pa.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",D5,[(0,s._)("table",S5,[z5,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.selectedVariations,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,s._)("td",U5,(0,et.zw)(t.id),1),(0,s._)("td",L5,(0,et.zw)(t.size),1),(0,s._)("td",P5,(0,et.zw)(t.color),1),(0,s._)("td",A5,(0,et.zw)(t.quantity),1),(0,s._)("td",W5,[(0,s._)("div",$5,[(0,s.Wm)(rt.T,{onClick:e=>o.deleteVariation(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])])])])),_:1})])),_:1})]),(0,s._)("div",E5,[(0,s.Wm)(rt.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[q5])),_:1}),(0,s.Wm)(rt.T,{onClick:o.update,loading:l.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[T5])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}var V5={data(){return{isLoading:!1,isLoaded:!1,movement:null,variationId:0,product:1,delivery:1,quantity:0,variation:0,selectedVariations:[]}},computed:{products(){return this.$store.getters["product/products"]},deliveries(){return this.$store.getters["user/deliveries"]},id(){return this.$route.params.id},variations(){return this.products.find((t=>t.id==this.product))?.variations.filter((t=>{let e=!0;return this.selectedVariations.forEach((r=>{t.id==r.id&&(e=!1)})),e}))}},watch:{product(){this.variations.length>0?this.variation=this.variations[0].id:this.variation=null}},methods:{addVariation(){if(0==this.variations.length)return!1;const t=this.variations.find((t=>t.id==this.variation));if(!t)return!1;if(this.quantity>t.quantity||0==this.quantity)return this.$alert({type:"warning",title:"Quantity should be between 1 and "+t.quantity}),!1;const e={id:t.id,size:t.size,color:t.color,quantity:this.quantity};this.quantity=0,this.selectedVariations.push(e),this.variations.length>0?this.variation=this.variations[0].id:this.variation=null},deleteVariation(t){this.selectedVariations=this.selectedVariations.filter((e=>e.id!==t)),1==this.variations.length&&(this.variation=this.variations[0].id)},update(){if(0==this.selectedVariations.length)return this.$alert({type:"warning",title:"You need to add some variations"}),!1;let t=0;this.selectedVariations.forEach((e=>t+=e.quantity)),this.isLoading=!0,A1.inventoryMovementUpdate(this.id,{product_id:this.product,delivery_id:this.delivery,variants:this.selectedVariations,quantity:this.qty}).then((t=>{"SUCCESS"==t.data.code&&this.$alert({type:"success",title:t.data.message}),"ERROR_QUANTITY"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).finally((()=>this.isLoading=!1))},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},async getDeliveries(){await X.deliveries().then((t=>{const e=t.data.data;this.$store.dispatch("user/setDeliveries",e),e.length>0?this.delivery=e[0].id:this.delivery=null}),this.$handleApiError)},getProducts(){return sa.all().then((t=>{if("SUCCESS"==t.data.code){const e=t.data.data.products;this.$store.dispatch("product/setProducts",e),e.length>0?this.product=e[0].id:this.product=null}}),(t=>{this.$handleApiError(t)}))},getMovement(){return A1.getMovement(this.id).then((t=>{if("SUCCESS"==t.data.code){const e=t.data.data.movement;this.product=e.product.id,this.delivery=e.delivery.id,this.selectedVariations=e.inventory_movement_variations;let r=0;this.selectedVariations.forEach((t=>{r+=t.quantity})),this.quantity_total=r}}),(t=>{this.$handleApiError(t)}))}},mounted(){Promise.allSettled([this.getProducts(),this.getDeliveries(),this.getMovement()]).then((()=>{this.isLoaded=!0}))}};const I5=(0,p.Z)(V5,[["render",O5]]);var F5=I5;const R5=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Inventory State List"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"See your inventory state")])],-1),j5={key:0},N5={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},M5={class:"mb-5 tw-flex"},H5={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},Y5={key:0,class:""};function Z5(t,e,r,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("InventoryMovementsTable");return(0,s.wg)(),(0,s.iD)("div",null,[R5,l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",j5,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",N5,[(0,s._)("div",M5,[(0,s.Wm)(rt.T,{icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white !tw-w-0 !tw-overflow-hidden"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",H5,[(0,s.Wm)(Xt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,l.search]])])]),o.inventoryMovements.length>0?((0,s.wg)(),(0,s.iD)("div",Y5,[(0,s.Wm)(d,{columns:l.columns,movements:o.inventoryMovements},null,8,["columns","movements"])])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])}const K5={class:"tw-relative tw-min-h-[400px] tw-overflow-x-auto tw-overflow-y-visible sm:tw-rounded-lg"},B5={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Q5={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},G5=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),J5={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},X5=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),t4={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},e4={class:"tw-px-6 tw-py-4"},r4=(0,s._)("br",null,null,-1),a4={class:"tw-px-6 tw-py-4"},s4={class:"tw-px-6 tw-py-4"},i4={class:"tw-px-6 tw-py-4"},l4={class:"tw-px-6 tw-py-4"},o4={class:"tw-px-6 tw-py-4"},n4={class:"tw-w-[200px] !tw-whitespace-normal"},d4={class:"tw-px-6 tw-py-4"},w4={class:"tw-px-6 tw-py-4"},c4={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},u4={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},p4=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),m4=["value"],g4={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},h4={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},f4={class:"tw-text-white"};function v4(t,e,r,i,l,o){const n=(0,s.up)("router-link"),d=(0,s.up)("InventoryMovementsActions");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",K5,[(0,s._)("table",B5,[(0,s._)("thead",Q5,[(0,s._)("tr",null,[G5,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",J5,(0,et.zw)(t.name),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.movements,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:e,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[X5,(0,s._)("th",t4,(0,et.zw)(t.id),1),(0,s._)("td",e4,[(0,s.Uk)((0,et.zw)(t.created_at?.split("T")[0])+" ",1),r4,(0,s.Uk)(" "+(0,et.zw)(t.created_at?.split("T")[1].split(".")[0]),1)]),(0,s._)("td",a4,(0,et.zw)(t.delivery.firstname+" "+t.delivery.lastname),1),(0,s._)("td",s4,[(0,s.Wm)(n,{to:"products/"+t.product.id},{default:(0,s.w5)((()=>[(0,s.Uk)((0,et.zw)(t.product.name),1)])),_:2},1032,["to"])]),(0,s._)("td",i4,(0,et.zw)(o.quantityTotal(t.inventory_movement_variations)),1),(0,s._)("td",l4,[(0,s._)("div",{class:(0,et.C_)([[t.is_received?"tw-text-green-500 tw-bg-green-500/10":"tw-text-red-500 tw-bg-red-500/10"],"tw-flex tw-justify-center tw-py-1 tw-rounded-lg tw-items-center"])},[(0,s._)("span",null,(0,et.zw)(t.is_received?"Yes":"No"),1)],2)]),(0,s._)("td",o4,[(0,s._)("div",n4,(0,et.zw)(t.note?t.note:"-"),1)]),(0,s._)("td",d4,(0,et.zw)(t.delivery.city?.name),1),(0,s._)("td",w4,[(0,s.Wm)(d,{movement:t},null,8,["movement"])])])))),128))])])]),(0,s._)("div",c4,[(0,s._)("div",u4,[p4,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,et.zw)(t),9,m4)))),128))],512),[[a.bM,l.paginationLimit]])]),(0,s._)("div",g4,[(0,s._)("div",h4,(0,et.zw)(o.prevRange+1)+" - "+(0,et.zw)(l.currentPage==o.pageCount?r.movements.length:o.nextRange)+" of "+(0,et.zw)(r.movements.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pageCount,(t=>((0,s.wg)(),(0,s.j4)(rt.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",f4,(0,et.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const y4={class:"md:tw-w-[50%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},x4=(0,s._)("h1",{class:"tw-text-lg tw-font-medium tw-text-blue-500"},"Confirmation",-1),b4={class:"mt-3"},_4=(0,s._)("h2",{class:"mb-2"},"Received",-1),k4={class:"tw-mt-3"},C4=(0,s._)("h2",{class:"tw-text-md mb-1"},"Add note",-1),D4={class:"tw-flex tw-gap-2 mt-3 tw-justify-end"},S4=(0,s._)("span",{class:"text-white"}," Cancel ",-1),z4=(0,s._)("span",{class:"text-white"}," Update ",-1);function U4(t,e,r,i,l,o){const n=(0,s.up)("popup-full"),d=(0,s.up)("MovementDetails"),w=(0,s.up)("popup");return(0,s.wg)(),(0,s.iD)("div",{key:r.movement.id,class:"tw-flex tw-items-center"},[["delivery","admin"].includes(o.user.role)?((0,s.wg)(),(0,s.j4)(rt.T,{key:0,onClick:e[0]||(e[0]=t=>l.confirmPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-checkbox-marked-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.kq)("",!0),(t.$can("view_inventory_movement"),(0,s.wg)(),(0,s.j4)(rt.T,{key:2,onClick:e[1]||(e[1]=t=>l.detailsPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-eye-outline")])),_:1})])),_:1})),t.$can("delete_inventory_movement")?((0,s.wg)(),(0,s.j4)(rt.T,{key:3,onClick:e[2]||(e[2]=t=>l.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),t.$can("confirmation_inventory_movement")?((0,s.wg)(),(0,s.j4)(n,{key:4,visible:l.confirmPopup,onCancel:e[6]||(e[6]=t=>l.confirmPopup=!1)},{default:(0,s.w5)((()=>[(0,s._)("div",y4,[x4,(0,s._)("div",b4,[_4,(0,s.Wm)(io.G,{density:"compact","hide-details":!0,modelValue:l.isConfirmed,"onUpdate:modelValue":e[3]||(e[3]=t=>l.isConfirmed=t),color:"blue"},null,8,["modelValue"])]),(0,s._)("div",k4,[C4,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.note=t),cols:"30",rows:"3",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n\r\n              ",512),[[a.nr,l.note]])]),(0,s._)("div",D4,[(0,s.Wm)(rt.T,{onClick:e[5]||(e[5]=t=>l.confirmPopup=!1),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[S4])),_:1}),(0,s.Wm)(rt.T,{loading:l.isLoading,onClick:o.updateMovement,color:"blue",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[z4])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])):(0,s.kq)("",!0),(0,s.Wm)(n,{visible:l.detailsPopup,onCancel:e[8]||(e[8]=t=>l.detailsPopup=!1)},{default:(0,s.w5)((()=>[l.detailsPopup?((0,s.wg)(),(0,s.j4)(d,{key:0,onCancel:e[7]||(e[7]=t=>l.detailsPopup=!1),movement:r.movement},null,8,["movement"])):(0,s.kq)("",!0)])),_:1},8,["visible"]),(0,s.Wm)(w,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this movement?</p> You won't be able to revert this!",loading:l.isLoading,visible:l.showPopup,onResolved:o.handleResolved},null,8,["loading","visible","onResolved"])])}const L4={class:"md:tw-w-[50%] tw-relative tw-max-h-full tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},P4={class:"tw-p-5"},A4={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500 tw-rounded-md tw-overflow-hidden"},W4=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"}," SIZE "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," COLOR "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY ")])],-1),$4={class:"tw-w-4 tw-p-4"},E4={class:"tw-w-4 tw-p-4"},q4={class:"tw-w-4 tw-p-4"},T4={class:"tw-w-4 tw-p-4"};function O4(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",L4,[(0,s.Wm)(rt.T,{onClick:l.cancel,icon:"mdi-close",variant:"flat",size:"w-small",color:"red",class:"tw-absolute tw-top-3 tw-z-10 tw-right-3"},null,8,["onClick"]),(0,s._)("div",P4,[(0,s._)("table",A4,[W4,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.movement.inventory_movement_variations,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,s._)("td",$4,(0,et.zw)(t.id),1),(0,s._)("td",E4,(0,et.zw)(t.product_variation.size),1),(0,s._)("td",q4,(0,et.zw)(t.product_variation.color),1),(0,s._)("td",T4,(0,et.zw)(t.quantity),1)])))),128))])])])])}var V4={props:["movement"],data(){return{}},computed:{},methods:{cancel(){this.$emit("cancel")}},mounted(){}};const I4=(0,p.Z)(V4,[["render",O4]]);var F4=I4,R4={props:["rowIndex","movement"],components:{MovementDetails:F4},name:"inventoryActions",data(){return{showPopup:!1,confirmPopup:!1,detailsPopup:!1,isConfirmed:!1,note:"",isLoading:!1}},computed:{user(){return this.$store.getters["user/user"]}},methods:{handleResolved(t){t?(this.isLoading=!0,A1["delete"](this.movement.id).then((t=>{"SUCCESS"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Inventory Movement Deleted Successfully"})),this.getMovements()})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1},updateMovement(){this.isLoading=!0,A1.deliveryUpdateMovement(this.movement.id,this.isConfirmed?1:0,this.note).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:"Inventory Movement Updated Successfully"}),this.getMovements())}),this.$handleApiError).finally((()=>{this.isLoading=!1,this.confirmPopup=!1}))},getMovements(){A1.inventoryMovements().then((t=>{if("SHOW_ALL_INVENTORY_MOVEMENTS"==t.data.code){const e=t.data.data;this.$store.dispatch("inventory/setInventoryMovements",e)}})).catch(this.$handleApiError)}},mounted(){this.note=this.movement.note,this.isConfirmed=1==this.movement.is_received}};const j4=(0,p.Z)(R4,[["render",U4]]);var N4=j4,M4={props:["columns","movements"],components:{InventoryMovementsActions:N4},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.movements.length/this.paginationLimit)},items(){return this.movements.slice(this.prevRange,this.nextRange)}},methods:{quantityTotal(t){let e=0;return t.forEach((t=>{e+=t.quantity})),e}}};const H4=(0,p.Z)(M4,[["render",v4]]);var Y4=H4,Z4={components:{InventoryMovementsTable:Y4},data(){return{localUrl:n,isLoaded:!1,showFilters:!1,search:"",columns:[{prop:"id",name:"#"},{prop:"created_at",name:"Date"},{prop:"delivery",name:"Delivery"},{prop:"product",name:"Product"},{prop:"quantity",name:"Quantity"},{prop:"received",name:"Received"},{prop:"note",name:"Note"},{prop:"city",name:"City"},{prop:"actions",name:"Actions"}]}},computed:{inventoryMovements(){return this.$store.getters["inventory/inventoryMovements"]},filteredInventoryState(){return this.inventoryMovements.filter((()=>!0))}},methods:{async getInventoryMovements(){await A1.inventoryMovements().then((t=>{if(console.log(t.data.data),"SHOW_ALL_INVENTORY_MOVEMENTS"==t.data.code){const e=t.data.data;this.$store.dispatch("inventory/setInventoryMovements",e),console.log(e)}}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))}},async mounted(){this.getInventoryMovements()}};const K4=(0,p.Z)(Z4,[["render",Z5]]);var B4=K4,Q4={name:"inventory/list",path:"/inventories",component:da,meta:{module:"inventory"},children:[{name:"inventory/state",path:"",component:S2,meta:{module:"inventory",subModule:"inventory/list",title:"Inventory State",gate:"show_all_inventory_states"}},{name:"inventory/movememnts",path:"movements",component:B4,meta:{module:"inventory",subModule:"inventory/movements",title:"Inventory Movements",gate:"show_all_inventory_movements"}},{name:"inventory/add",path:"add",component:d5,meta:{module:"inventory",subModule:"inventory/add",title:"Add Inventory Movement",gate:"create_inventory_movement"}},{name:"inventory/update",path:"update/:id",component:F5,meta:{module:"inventory",subModule:"inventory/update",title:"Update Inventory Movement",gate:"update_inventory_movement"}}]};const G4={class:"mb-5 tw-flex tw-justify-between tw-items-center"},J4=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Shop List"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your shops")],-1),X4={key:0},t3=(0,s._)("span",{class:"text-white"}," Add Shop ",-1),e3={key:0},r3={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},a3={class:"mb-5 tw-flex"},s3={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},i3={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},l3={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},o3=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),n3={class:"tw-relative"},d3={class:""};function w3(t,e,r,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("ShopsTable");return(0,s.wg)(),(0,s.iD)("div",{key:o.shops.length},[(0,s._)("div",G4,[J4,t.$can("create_shop")?((0,s.wg)(),(0,s.iD)("div",X4,[(0,s.Wm)(rt.T,{color:"primary-color",link:"",to:{name:"shop/add"},variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{icon:"mdi-plus",class:"mr-2 text-white"}),t3])),_:1})])):(0,s.kq)("",!0)]),l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",e3,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",r3,[(0,s._)("div",a3,[(0,s.Wm)(rt.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",s3,[(0,s.Wm)(Xt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,l.search]])])]),(0,s._)("div",{class:(0,et.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,s._)("div",i3,[(0,s._)("div",l3,[o3,(0,s._)("div",n3,[(0,s.wy)((0,s._)("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=t=>l.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[a.nr,l.date]])])])])],2),(0,s._)("div",d3,[(0,s.Wm)(d,{columns:l.columns,shops:o.filteredShops},null,8,["columns","shops"])])])):(0,s.kq)("",!0)])}class c3{async create(t){return await $.getCookie(),A.post("api/shops/new",{name:t.name})}async update(t,e){return await $.getCookie(),A.post("api/shops/update/"+t,{name:e.name})}async all(){return await $.getCookie(),A.get("api/shops")}async getShop(t){return await $.getCookie(),A.get("api/shops/"+t)}async delete(t){return await $.getCookie(),A["delete"]("api/shops/delete/"+t)}}var u3=new c3;const p3={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},m3={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},g3={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},h3=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),f3={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},v3=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),y3={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},x3={class:"tw-px-6 tw-py-4"},b3={class:"tw-px-6 tw-py-4"},_3={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},k3={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},C3={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},D3=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),S3=["value"],z3={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},U3={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},L3={class:"tw-text-white"};function P3(t,e,r,i,l,o){const n=(0,s.up)("ShopActions");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",p3,[(0,s._)("table",m3,[(0,s._)("thead",g3,[(0,s._)("tr",null,[h3,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",f3,(0,et.zw)(t.name),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.shops,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[v3,(0,s._)("th",y3,(0,et.zw)(t.id),1),(0,s._)("td",x3,(0,et.zw)(t.name),1),(0,s._)("td",b3,(0,et.zw)(t.created_at.split("T")[0]),1),(0,s._)("td",_3,[(0,s.Wm)(n,{shop:t},null,8,["shop"])])])))),128))])])]),(0,s._)("div",k3,[(0,s._)("div",C3,[D3,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,et.zw)(t),9,S3)))),128))],512),[[a.bM,l.paginationLimit]])]),(0,s._)("div",z3,[(0,s._)("div",U3,(0,et.zw)(o.prevRange+1)+" - "+(0,et.zw)(l.currentPage==o.pageCount?r.shops.length:o.nextRange)+" of "+(0,et.zw)(r.shops.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pageCount,(t=>((0,s.wg)(),(0,s.j4)(rt.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",L3,(0,et.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const A3={class:"tw-flex tw-items-center tw-gap-1"};function W3(t,e,r,a,i,l){const o=(0,s.up)("popup");return(0,s.wg)(),(0,s.iD)("div",A3,[t.$can("update_shop")?((0,s.wg)(),(0,s.j4)(rt.T,{key:0,to:"/shops/update/"+r.shop.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1},8,["to"])):(0,s.kq)("",!0),t.$can("delete_shop")?((0,s.wg)(),(0,s.j4)(rt.T,{key:1,onClick:e[0]||(e[0]=t=>i.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this shop?</p> You won't be able to revert this!",loading:i.isLoading,visible:i.showPopup,onResolved:l.handleResolved},null,8,["loading","visible","onResolved"])])}var $3={props:["rowIndex","shop"],name:"shopActions",data(){return{showPopup:!1,isLoading:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,u3["delete"](this.shop.id).then((t=>{"SHOP_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Shop Deleted Successfully"})),u3.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("shop/setShops",t.data.data.shops)})).catch(this.$handleApiError)})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const E3=(0,p.Z)($3,[["render",W3]]);var q3=E3,T3={props:["columns","shops"],components:{ShopActions:q3},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.shops.length/this.paginationLimit)},items(){return this.shops.slice(this.prevRange,this.nextRange)}},methods:{}};const O3=(0,p.Z)(T3,[["render",P3]]);var V3=O3,I3={components:{ShopsTable:V3},data(){return{localUrl:n,isLoaded:!1,showFilters:!1,date:null,search:"",columns:[{prop:"id",name:"#"},{prop:"name",name:"Name"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{shops(){return this.$store.getters["shop/shops"]},filteredShops(){const t=this.date;return this.shops.filter((e=>(!t||e?.created_at.split("T")[0]===t)&&!!e.name.toLowerCase().includes(this.search.toLowerCase())))}},mounted(){u3.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("shop/setShops",t.data.data.shops)}),(t=>{this.$handleApiError(t)})).finally((()=>this.isLoaded=!0))}};const F3=(0,p.Z)(I3,[["render",w3]]);var R3=F3;const j3=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Add Shop "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create new shop")],-1),N3={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},M3={class:"tw-w-full"},H3=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Shop Name ",-1),Y3={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Z3={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},K3=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),B3=(0,s._)("span",{class:"text-white text-capitalize"},"Create",-1);function Q3(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[j3,(0,s._)("div",N3,[(0,s._)("div",null,[(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",M3,[H3,(0,s.Wm)(it.hw,{error:!i.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("name")),"hide-details":!0,modelValue:i.shop.name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.shop.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",Y3,(0,et.zw)(i.formStatus.name.message),1)])])),_:1})])),_:1})])),_:1})])),_:1})]),(0,s._)("div",Z3,[(0,s.Wm)(rt.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[K3])),_:1}),(0,s.Wm)(rt.T,{onClick:l.create,loading:i.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[B3])),_:1},8,["onClick","loading"])])])])}var G3={components:{},data(){return{isLoading:!1,shop:{name:""},formStatus:{name:{valid:!0,message:""}}}},methods:{create(){if(!this.validate())return!1;this.isLoading=!0;let t=this.shop;u3.create(t).then((t=>{"SHOP_CREATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.shop={name:""}),"VALIDATION_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.errors.ref})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=zt(this.shop.name,"Shop name"),this.formStatus.name.valid}}};const J3=(0,p.Z)(G3,[["render",Q3]]);var X3=J3;const t8=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Update Shop"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Update shop informations")],-1),e8={key:0},r8={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},a8={class:"tw-flex tw-gap-2 tw-text-neutral-800 tw-items-center tw-mb-5"},s8={class:"tw-block tw-py-1 tw-px-2 tw-rounded-md text-primary-color"},i8={class:"tw-w-full"},l8=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Shop Name",-1),o8={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},n8={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},d8=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),w8=(0,s._)("span",{class:"text-white text-capitalize"},"Update",-1);function c8(t,e,r,a,i,l){const o=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[t8,i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",e8,[(0,s.Wm)(o)])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",r8,[(0,s._)("div",a8,[(0,s.Uk)(" Shop ID: "),(0,s._)("span",s8,(0,et.zw)(l.id),1)]),(0,s._)("div",null,[(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(ua.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(pa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",i8,[l8,(0,s.Wm)(it.hw,{error:!i.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("name")),"hide-details":!0,modelValue:i.shop.name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.shop.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",o8,(0,et.zw)(i.formStatus.name.message),1)])])),_:1})])),_:1})])),_:1})])),_:1})]),(0,s._)("div",n8,[(0,s.Wm)(rt.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[d8])),_:1}),(0,s.Wm)(rt.T,{onClick:l.update,loading:i.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[w8])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}var u8={components:{},data(){return{isLoading:!1,isLoaded:!1,shop:{name:""},formStatus:{name:{valid:!0,message:""}}}},computed:{id(){return this.$route.params.id}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0;let t=this.shop;u3.update(this.$route.params.id,t).then((t=>{"SHOP_UPDATED"==t.data.code&&this.$alert({type:"success",title:t.data.message}),"SHOP_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=zt(this.shop.name,"Shop name"),this.formStatus.name.valid}},mounted(){u3.getShop(this.$route.params.id).then((t=>{if("SUCCESS"==t.data.code){const{name:e}=t.data.data.shops;this.shop.name=e,this.isLoaded=!0}}),this.$handleApiError)}};const p8=(0,p.Z)(u8,[["render",c8]]);var m8=p8,g8={name:"shops",path:"/shops",component:da,meta:{module:"shop"},children:[{name:"shop/list",path:"",component:R3,meta:{module:"shop",subModule:"shop/list",title:"Shop List",gate:"show_all_sales"}},{name:"shop/add",path:"add",component:X3,meta:{module:"shop",subModule:"shop/add",title:"Shop Add",gate:"create_shop"}},{name:"shop/update",path:"update/:id",component:m8,meta:{module:"shop",subModule:"shop/update",title:"Update Shop",gate:"update_shop"}}]};const h8={class:"mb-5 tw-flex tw-justify-between tw-items-center"},f8=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Warehouse List"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your warehouses")],-1),v8={key:0},y8=(0,s._)("span",{class:"text-white"}," Add Warehouse ",-1),x8={key:0},b8={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},_8={class:"mb-5 tw-flex"},k8={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},C8={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},D8={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},S8=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),z8={class:"tw-relative"},U8={class:""};function L8(t,e,r,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("WarehousesTable"),w=(0,s.up)("AddWarehouse");return(0,s.wg)(),(0,s.iD)("div",{key:o.warehouses.length},[(0,s._)("div",h8,[f8,t.$can("create_warehouse")?((0,s.wg)(),(0,s.iD)("div",v8,[(0,s.Wm)(rt.T,{color:"primary-color",onClick:e[0]||(e[0]=t=>l.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{icon:"mdi-plus",class:"mr-2 text-white"}),y8])),_:1})])):(0,s.kq)("",!0)]),l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",x8,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",b8,[(0,s._)("div",_8,[(0,s.Wm)(rt.T,{onClick:e[1]||(e[1]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",k8,[(0,s.Wm)(Xt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,l.search]])])]),(0,s._)("div",{class:(0,et.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,s._)("div",C8,[(0,s._)("div",D8,[S8,(0,s._)("div",z8,[(0,s.wy)((0,s._)("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=t=>l.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[a.nr,l.date]])])])])],2),(0,s._)("div",U8,[(0,s.Wm)(d,{columns:l.columns,warehouses:o.filteredWarehouses},null,8,["columns","warehouses"])]),(0,s.Wm)(w,{onCancel:e[4]||(e[4]=t=>l.showPopup=!1),visible:l.showPopup},null,8,["visible"])])):(0,s.kq)("",!0)])}const P8={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},A8={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},W8={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},$8=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),E8={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},q8=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),T8={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},O8={class:"tw-px-6 tw-py-4"},V8={class:"tw-px-6 tw-py-4"},I8={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},F8={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},R8={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},j8=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),N8=["value"],M8={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},H8={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},Y8={class:"tw-text-white"};function Z8(t,e,r,i,l,o){const n=(0,s.up)("WarehouseActions");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",P8,[(0,s._)("table",A8,[(0,s._)("thead",W8,[(0,s._)("tr",null,[$8,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",E8,(0,et.zw)(t.name),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.warehouses,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[q8,(0,s._)("th",T8,(0,et.zw)(t.id),1),(0,s._)("td",O8,(0,et.zw)(t.name),1),(0,s._)("td",V8,(0,et.zw)(t.created_at.split("T")[0]),1),(0,s._)("td",I8,[(0,s.Wm)(n,{warehouse:t},null,8,["warehouse"])])])))),128))])])]),(0,s._)("div",F8,[(0,s._)("div",R8,[j8,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,et.zw)(t),9,N8)))),128))],512),[[a.bM,l.paginationLimit]])]),(0,s._)("div",M8,[(0,s._)("div",H8,(0,et.zw)(o.prevRange+1)+" - "+(0,et.zw)(l.currentPage==o.pageCount?r.warehouses.length:o.nextRange)+" of "+(0,et.zw)(r.warehouses.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pageCount,(t=>((0,s.wg)(),(0,s.j4)(rt.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",Y8,(0,et.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const K8={class:"tw-flex tw-items-center tw-gap-1"};function B8(t,e,r,a,i,l){const o=(0,s.up)("UpdateWarehouse"),n=(0,s.up)("popup");return(0,s.wg)(),(0,s.iD)("div",K8,[t.$can("update_warehouse")?((0,s.wg)(),(0,s.j4)(rt.T,{key:0,onClick:e[0]||(e[0]=t=>i.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),t.$can("delete_warehouse")?((0,s.wg)(),(0,s.j4)(rt.T,{key:1,onClick:e[1]||(e[1]=t=>i.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),((0,s.wg)(),(0,s.j4)(o,{visible:i.showUpdatePopup,onCancel:e[2]||(e[2]=t=>i.showUpdatePopup=!1),key:r.warehouse.id,warehouse:r.warehouse},null,8,["visible","warehouse"])),(0,s.Wm)(n,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this warehouse?</p> You won't be able to revert this!",loading:i.isLoading,visible:i.showPopup,onResolved:l.handleResolved},null,8,["loading","visible","onResolved"])])}const Q8={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[500px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},G8=(0,s._)("h1",{class:"tw-text-lg"},"Update Warehouse",-1),J8={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},X8={class:"tw-w-full tw-col-span-12"},t6=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Warehouse Name",-1),e6={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},r6={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},a6=(0,s._)("span",{class:"text-white"}," Cancel ",-1),s6=(0,s._)("span",{class:"text-white"}," Update ",-1);function i6(t,e,r,a,i,l){const o=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(o,{onCancel:e[3]||(e[3]=e=>t.$emit("cancel")),visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",Q8,[G8,(0,s._)("div",J8,[(0,s._)("div",X8,[t6,(0,s.Wm)(it.hw,{error:!i.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("name")),"hide-details":!0,modelValue:i.Warehouse.name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.Warehouse.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",e6,(0,et.zw)(i.formStatus.name.message),1)])]),(0,s._)("div",r6,[(0,s.Wm)(rt.T,{onClick:e[2]||(e[2]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[a6])),_:1}),(0,s.Wm)(rt.T,{loading:i.isLoading,onClick:l.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[s6])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var l6={components:{},props:["warehouse","visible"],data(){return{isLoading:!1,isLoaded:!1,Warehouse:{name:""},formStatus:{name:{valid:!0,message:""}}}},computed:{},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,vg.update(this.warehouse.id,this.Warehouse).then((t=>{"WAREHOUSE_UPDATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.$store.dispatch("warehouse/update",this.Warehouse),this.$emit("cancel")),"WAREHOUSE_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=zt(this.Warehouse.name,"Warehouse name"),this.formStatus.name.valid}},mounted(){this.Warehouse={...this.warehouse}}};const o6=(0,p.Z)(l6,[["render",i6]]);var n6=o6,d6={components:{UpdateWarehouse:n6},props:["rowIndex","warehouse"],name:"warehouseActions",data(){return{showPopup:!1,isLoading:!1,showUpdatePopup:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,vg["delete"](this.warehouse.id).then((t=>{"WAREHOUSE_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Warehouse Deleted Successfully"}),this.$store.dispatch("warehouse/delete",this.warehouse.id))})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const w6=(0,p.Z)(d6,[["render",B8]]);var c6=w6,u6={props:["columns","warehouses"],components:{WarehouseActions:c6},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.warehouses.length/this.paginationLimit)},items(){return this.warehouses.slice(this.prevRange,this.nextRange)}},methods:{}};const p6=(0,p.Z)(u6,[["render",Z8]]);var m6=p6;const g6={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[500px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},h6=(0,s._)("h1",{class:"tw-text-lg"},"Create Warehouse",-1),f6={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},v6={class:"tw-w-full tw-col-span-12"},y6=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Warehouse Name",-1),x6={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},b6={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},_6=(0,s._)("span",{class:"text-white"}," Cancel ",-1),k6=(0,s._)("span",{class:"text-white"}," Create ",-1);function C6(t,e,r,a,i,l){const o=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(o,{onCancel:e[3]||(e[3]=e=>t.$emit("cancel")),visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",g6,[h6,(0,s._)("div",f6,[(0,s._)("div",v6,[y6,(0,s.Wm)(it.hw,{error:!i.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("name")),"hide-details":!0,modelValue:i.warehouse.name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.warehouse.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",x6,(0,et.zw)(i.formStatus.name.message),1)])]),(0,s._)("div",b6,[(0,s.Wm)(rt.T,{onClick:e[2]||(e[2]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[_6])),_:1}),(0,s.Wm)(rt.T,{loading:i.isLoading,onClick:l.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[k6])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var D6={props:["visible"],components:{},data(){return{isLoading:!1,warehouse:{name:""},formStatus:{name:{valid:!0,message:""}}}},methods:{create(){if(!this.validate())return!1;this.isLoading=!0;let t=this.warehouse;vg.create(t).then((t=>{if("WAREHOUSE_CREATED"==t.data.code){this.$alert({type:"success",title:t.data.message});const e=t.data.data.warehouse;this.$store.dispatch("warehouse/addWarehouse",e),this.$emit("cancel"),this.warehouse={name:""}}"VALIDATION_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.errors.ref})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=zt(this.warehouse.name,"Warehouse name"),this.formStatus.name.valid}}};const S6=(0,p.Z)(D6,[["render",C6]]);var z6=S6,U6={components:{WarehousesTable:m6,AddWarehouse:z6},data(){return{localUrl:n,isLoaded:!1,showFilters:!1,date:null,search:"",showPopup:!1,columns:[{prop:"id",name:"#"},{prop:"name",name:"Name"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{warehouses(){return this.$store.getters["warehouse/warehouses"]},filteredWarehouses(){const t=this.date;return this.warehouses.filter((e=>(!t||e?.created_at.split("T")[0]===t)&&!!e.name.toLowerCase().includes(this.search.toLowerCase())))}},mounted(){vg.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("warehouse/setWarehouses",t.data.data.warehouses)}),(t=>{this.$handleApiError(t)})).finally((()=>this.isLoaded=!0))}};const L6=(0,p.Z)(U6,[["render",L8]]);var P6=L6,A6={name:"warehouses",path:"/warehouses",component:da,meta:{module:"warehouse"},children:[{name:"warehouse/list",path:"",component:P6,meta:{module:"warehouse",subModule:"warehouse/list",title:"Warehouse List",gate:"show_all_warehouses"}}]};const W6=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Factorisation List"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your factorisations")])],-1),$6={key:0},E6={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},q6={class:"mb-5 tw-flex"},T6={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},O6={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},V6={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},I6=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),F6={class:"tw-relative"},R6={class:""};function j6(t,e,r,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("FactorisationsTable");return(0,s.wg)(),(0,s.iD)("div",{key:o.factorisations.length},[W6,l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",$6,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",E6,[(0,s._)("div",q6,[(0,s.Wm)(rt.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",T6,[(0,s.Wm)(Xt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,l.search]])])]),(0,s._)("div",{class:(0,et.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,s._)("div",O6,[(0,s._)("div",V6,[I6,(0,s._)("div",F6,[(0,s.wy)((0,s._)("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=t=>l.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[a.nr,l.date]])])])])],2),(0,s._)("div",R6,[(0,s.Wm)(d,{columns:l.columns,factorisations:o.filteredFactorisations},null,8,["columns","factorisations"])])])):(0,s.kq)("",!0)])}class N6{async update(t,e){return await $.getCookie(),A.post("api/factorisations/update/"+t,{factorisation_id:e.factorisation_id,delivery_id:e.delivery_id,price:e.price,commands_number:e.commands_number})}async updateComment(t,e){return await $.getCookie(),A.post("api/factorisations/update/comment/"+t,{comment:e.comment})}async updatePaid(t,e){return await $.getCookie(),A.post("api/factorisations/update/payment/"+t,{paid:e})}async updateClose(t,e){return await $.getCookie(),A.post("api/factorisations/update/closing/"+t,{close:e})}async all(){return await $.getCookie(),A.get("api/factorisations")}async getFactorisation(t){return await $.getCookie(),A.get("api/factorisations/"+t)}async delete(t){return await $.getCookie(),A["delete"]("api/factorisations/delete/"+t)}}var M6=new N6;const H6={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},Y6={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Z6={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},K6=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),B6={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},Q6={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},G6={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},J6=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"}," Show per page: ",-1),X6=["value"],t7={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},e7={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},r7={class:"tw-text-white"};function a7(t,e,r,i,l,o){const n=(0,s.up)("FactorisationRow");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",H6,[(0,s._)("table",Y6,[(0,s._)("thead",Z6,[(0,s._)("tr",null,[K6,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",B6,(0,et.zw)(t.name),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.factorisations,(t=>((0,s.wg)(),(0,s.j4)(n,{factorisation:t,key:t.id},null,8,["factorisation"])))),128))])])]),(0,s._)("div",Q6,[(0,s._)("div",G6,[J6,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,et.zw)(t),9,X6)))),128))],512),[[a.bM,l.paginationLimit]])]),(0,s._)("div",t7,[(0,s._)("div",e7,(0,et.zw)(o.prevRange+1)+" - "+(0,et.zw)(l.currentPage==o.pageCount?r.factorisations.length:o.nextRange)+" of "+(0,et.zw)(r.factorisations.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pageCount,(t=>((0,s.wg)(),(0,s.j4)(rt.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",r7,(0,et.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const s7={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},i7=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),l7={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},o7={class:"tw-px-6 tw-py-4"},n7={class:"tw-px-6 tw-py-4"},d7={class:"tw-px-6 tw-py-4"},w7={class:"tw-px-6 tw-py-4"},c7={class:"tw-px-6 tw-py-4"},u7={class:"tw-px-6 tw-py-4"},p7={class:"tw-px-6 tw-py-4"},m7={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},g7={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},h7=["disabled"],f7=(0,s._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),v7={class:"tw-px-6 tw-py-4"},y7={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},x7={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},b7=["disabled"],_7=(0,s._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),k7={class:"tw-px-6 tw-py-4"},C7={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"};function D7(t,e,r,i,l,o){const n=(0,s.up)("FactorisationActions");return(0,s.wg)(),(0,s.iD)("tr",s7,[i7,(0,s._)("th",l7,(0,et.zw)(r.factorisation.id),1),(0,s._)("td",o7,[(0,s._)("button",{class:"tw-underline",onClick:e[0]||(e[0]=t=>o.download(r.factorisation.id))},(0,et.zw)(r.factorisation.factorisation_id),1)]),(0,s._)("td",n7,(0,et.zw)(o.deliveryName),1),(0,s._)("td",d7,(0,et.zw)(r.factorisation.commands_number),1),(0,s._)("td",w7,(0,et.zw)(r.factorisation.price),1),(0,s._)("td",c7,(0,et.zw)(r.factorisation.close_at?.split("T")[0]),1),(0,s._)("td",u7,(0,et.zw)(r.factorisation.paid_at?.split("T")[0]),1),(0,s._)("td",p7,[(0,s._)("div",m7,[(0,s._)("label",g7,[(0,s.wy)((0,s._)("input",{disabled:l.isLoadingClose,"onUpdate:modelValue":e[1]||(e[1]=t=>o.close=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,8,h7),[[a.e8,o.close]]),f7]),l.isLoadingClose?((0,s.wg)(),(0,s.j4)(st.t,{key:0,color:"green",size:"small",class:"tw-animate-spin"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)])]),(0,s._)("td",v7,[(0,s._)("div",y7,[(0,s._)("label",x7,[(0,s.wy)((0,s._)("input",{disabled:l.isLoadingPaid,"onUpdate:modelValue":e[2]||(e[2]=t=>o.paid=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,8,b7),[[a.e8,o.paid]]),_7]),l.isLoadingPaid?((0,s.wg)(),(0,s.j4)(st.t,{key:0,color:"green",size:"small",class:"tw-animate-spin"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)])]),(0,s._)("td",k7,(0,et.zw)(r.factorisation.created_at.split("T")[0]),1),(0,s._)("td",C7,[(0,s.Wm)(n,{factorisation:r.factorisation},null,8,["factorisation"])])])}const S7={class:"tw-flex tw-items-center tw-gap-1"};function z7(t,e,r,a,i,l){const o=(0,s.up)("UpdateFactorisation"),n=(0,s.up)("UpdateComment"),d=(0,s.up)("popup");return(0,s.wg)(),(0,s.iD)("div",S7,[t.$can("update_factorisation")?((0,s.wg)(),(0,s.j4)(rt.T,{key:0,onClick:e[0]||(e[0]=t=>i.showUpdateCommentPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-comment-text")])),_:1})])),_:1})):(0,s.kq)("",!0),t.$can("update_factorisation")?((0,s.wg)(),(0,s.j4)(rt.T,{key:1,onClick:e[1]||(e[1]=t=>i.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),t.$can("delete_factorisation")?((0,s.wg)(),(0,s.j4)(rt.T,{key:2,onClick:e[2]||(e[2]=t=>i.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),((0,s.wg)(),(0,s.j4)(o,{visible:i.showUpdatePopup,onCancel:e[3]||(e[3]=t=>i.showUpdatePopup=!1),key:r.factorisation.id,factorisation:r.factorisation},null,8,["visible","factorisation"])),((0,s.wg)(),(0,s.j4)(n,{visible:i.showUpdateCommentPopup,onCancel:e[4]||(e[4]=t=>i.showUpdateCommentPopup=!1),key:r.factorisation.id,factorisation:r.factorisation},null,8,["visible","factorisation"])),(0,s.Wm)(d,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this factorisation?</p> You won't be able to revert this!",loading:i.isLoading,visible:i.showPopup,onResolved:l.handleResolved},null,8,["loading","visible","onResolved"])])}const U7={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},L7=(0,s._)("h1",{class:"tw-text-lg"},"Update Factorisation",-1),P7={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},A7={class:"tw-w-full tw-col-span-6"},W7=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Factorisation Code ",-1),$7={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},E7={class:"tw-w-full tw-col-span-6"},q7=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery",-1),T7={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},O7={class:"tw-w-full tw-col-span-6"},V7=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Total Price",-1),I7={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},F7={class:"tw-w-full tw-col-span-6"},R7=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Nb Commands",-1),j7={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},N7={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},M7=(0,s._)("span",{class:"text-white"}," Cancel ",-1),H7=(0,s._)("span",{class:"text-white"}," Update ",-1);function Y7(t,e,r,a,i,l){const o=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(o,{onCancel:e[9]||(e[9]=e=>t.$emit("cancel")),visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",U7,[L7,(0,s._)("div",P7,[(0,s._)("div",A7,[W7,(0,s.Wm)(it.hw,{error:!i.formStatus.factorisation_id.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("factorisation_id")),"hide-details":!0,modelValue:i.Factorisation.factorisation_id,"onUpdate:modelValue":e[1]||(e[1]=t=>i.Factorisation.factorisation_id=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",$7,(0,et.zw)(i.formStatus.factorisation_id.message),1)]),(0,s._)("div",E7,[q7,(0,s.Wm)(it.hw,{error:!i.formStatus.delivery_id.valid,onKeyup:e[2]||(e[2]=t=>l.resetError("delivery_id")),"hide-details":!0,disabled:!0,modelValue:l.deliveryName,"onUpdate:modelValue":e[3]||(e[3]=t=>l.deliveryName=t),clearable:"",disable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",T7,(0,et.zw)(i.formStatus.delivery_id.message),1)]),(0,s._)("div",O7,[V7,(0,s.Wm)(it.hw,{error:!i.formStatus.price.valid,onKeyup:e[4]||(e[4]=t=>l.resetError("price")),"hide-details":!0,modelValue:i.Factorisation.price,"onUpdate:modelValue":e[5]||(e[5]=t=>i.Factorisation.price=t),disabled:!0,clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",I7,(0,et.zw)(i.formStatus.price.message),1)]),(0,s._)("div",F7,[R7,(0,s.Wm)(it.hw,{error:!i.formStatus.commands_number.valid,disabled:!0,onKeyup:e[6]||(e[6]=t=>l.resetError("commands_number")),"hide-details":!0,modelValue:i.Factorisation.commands_number,"onUpdate:modelValue":e[7]||(e[7]=t=>i.Factorisation.commands_number=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",j7,(0,et.zw)(i.formStatus.commands_number.message),1)])]),(0,s._)("div",N7,[(0,s.Wm)(rt.T,{onClick:e[8]||(e[8]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[M7])),_:1}),(0,s.Wm)(rt.T,{loading:i.isLoading,onClick:l.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[H7])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var Z7={components:{},props:["factorisation","visible"],data(){return{isLoading:!1,isLoaded:!1,Factorisation:{factorisation_id:"",delivery_id:0,price:0,commands_number:0,note:""},formStatus:{factorisation_id:{valid:!0,message:""},delivery_id:{valid:!0,message:""},price:{valid:!0,message:""},commands_number:{valid:!0,message:""}}}},computed:{deliveryName:{get(){return this.Factorisation.delivery.firstname+" "+this.Factorisation.delivery.lastname},set(t){console.log(t)}}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,M6.update(this.factorisation.id,this.Factorisation).then((t=>{"FACTORISATION_UPDATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.$store.dispatch("factorisation/update",this.Factorisation),this.$emit("cancel")),"FACTORISATION_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.factorisation_id=zt(this.Factorisation.factorisation_id,"Factorisation Code"),this.formStatus.price=Ut(this.Factorisation.price,"Factorisation Price"),this.formStatus.commands_number=Ut(this.Factorisation.commands_number,"Factorisation Nb Commands"),this.formStatus.factorisation_id.valid&&this.formStatus.price.valid&&this.formStatus.commands_number.valid}},mounted(){this.Factorisation={...this.factorisation}}};const K7=(0,p.Z)(Z7,[["render",Y7]]);var B7=K7;const Q7={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},G7=(0,s._)("h1",{class:"tw-text-lg"},"Update Factorisation Comment",-1),J7={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},X7={class:"tw-w-full tw-col-span-6"},t9=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Total Price",-1),e9={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},r9={class:"tw-w-full tw-col-span-6"},a9=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Nb Commands",-1),s9={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},i9={class:"tw-w-full tw-col-span-12"},l9=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Comment",-1),o9=["error"],n9={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},d9={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},w9=(0,s._)("span",{class:"text-white"}," Cancel ",-1),c9=(0,s._)("span",{class:"text-white"}," Update ",-1);function u9(t,e,r,i,l,o){const n=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(n,{onCancel:e[7]||(e[7]=e=>t.$emit("cancel")),visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",Q7,[G7,(0,s._)("div",J7,[(0,s._)("div",X7,[t9,(0,s.Wm)(it.hw,{error:!l.formStatus.price.valid,onKeyup:e[0]||(e[0]=t=>o.resetError("price")),"hide-details":!0,modelValue:l.Factorisation.price,"onUpdate:modelValue":e[1]||(e[1]=t=>l.Factorisation.price=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",disabled:"",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",e9,(0,et.zw)(l.formStatus.price.message),1)]),(0,s._)("div",r9,[a9,(0,s.Wm)(it.hw,{error:!l.formStatus.commands_number.valid,onKeyup:e[2]||(e[2]=t=>o.resetError("commands_number")),"hide-details":!0,modelValue:l.Factorisation.commands_number,"onUpdate:modelValue":e[3]||(e[3]=t=>l.Factorisation.commands_number=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",disabled:"",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",s9,(0,et.zw)(l.formStatus.commands_number.message),1)]),(0,s._)("div",i9,[l9,(0,s.wy)((0,s._)("textarea",{error:!l.formStatus.commands_number.valid,onKeyup:e[4]||(e[4]=t=>o.resetError("commands_number")),"hide-details":!0,clearable:"","clear-icon":"mdi-close","onUpdate:modelValue":e[5]||(e[5]=t=>l.Factorisation.comment=t),variant:"outlined",density:"compact",cols:"30",rows:"5",color:"primary-color",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-400 focus:tw-border-orange-500"},"\r\n            ",40,o9),[[a.nr,l.Factorisation.comment]]),(0,s._)("div",n9,(0,et.zw)(l.formStatus.commands_number.message),1)])]),(0,s._)("div",d9,[(0,s.Wm)(rt.T,{onClick:e[6]||(e[6]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[w9])),_:1}),(0,s.Wm)(rt.T,{loading:l.isLoading,onClick:o.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[c9])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var p9={components:{},props:["factorisation","visible"],data(){return{isLoading:!1,isLoaded:!1,Factorisation:{price:0,commands_number:0,comment:""},formStatus:{price:{valid:!0,message:""},commands_number:{valid:!0,message:""},comment:{valid:!0,message:""}}}},computed:{},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,M6.updateComment(this.factorisation.id,this.Factorisation).then((t=>{"FACTORISATION_UPDATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.$store.dispatch("factorisation/update",this.Factorisation),this.$emit("cancel")),"FACTORISATION_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.comment=zt(this.Factorisation.comment,"Factorisation Comment"),this.formStatus.comment.valid}},mounted(){this.Factorisation={...this.factorisation}}};const m9=(0,p.Z)(p9,[["render",u9]]);var g9=m9,h9={components:{UpdateFactorisation:B7,UpdateComment:g9},props:["rowIndex","factorisation"],name:"factorisationActions",data(){return{showPopup:!1,isLoading:!1,showUpdatePopup:!1,showUpdateCommentPopup:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,M6["delete"](this.factorisation.id).then((t=>{"FACTORISATION_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Factorisation Deleted Successfully"}),this.$store.dispatch("factorisation/delete",this.factorisation.id)),"DELETE_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const f9=(0,p.Z)(h9,[["render",z7]]);var v9=f9,y9={props:["factorisation"],components:{FactorisationActions:v9},data(){return{isLoadingPaid:!1,isLoadingClose:!1}},computed:{deliveryName:{get(){return this.factorisation.delivery.firstname+" "+this.factorisation.delivery.lastname},set(t){console.log(t)}},paid:{get(){return 1==this.factorisation.paid},set(t){this.updatePaid(t)}},close:{get(){return 1==this.factorisation.close},set(t){this.updateClose(t)}}},methods:{updatePaid(t){this.isLoadingPaid=!0,M6.updatePaid(this.factorisation.id,t).then((t=>{"FACTORISATION_UPDATED"==t.data.code&&this.$store.dispatch("factorisation/update",t.data.data.factorisation)}),this.$handleApiError).finally((()=>{this.isLoadingPaid=!1}))},updateClose(t){this.isLoadingClose=!0,M6.updateClose(this.factorisation.id,t).then((t=>{"FACTORISATION_UPDATED"==t.data.code&&this.$store.dispatch("factorisation/update",t.data.data.factorisation)}),this.$handleApiError).finally((()=>{this.isLoadingClose=!1}))},download(t){const e=d+"api/factorisations/generate-pdf/"+t,r=document.createElement("a");r.href=e,r.target="_blank",r.setAttribute("download","dd.pdf"),document.body.appendChild(r),r.click(),document.body.removeChild(r)}}};const x9=(0,p.Z)(y9,[["render",D7]]);var b9=x9,_9={props:["columns","factorisations"],components:{FactorisationRow:b9},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.factorisations.length/this.paginationLimit)},items(){return this.factorisations.slice(this.prevRange,this.nextRange)}},methods:{}};const k9=(0,p.Z)(_9,[["render",a7]]);var C9=k9,D9={components:{FactorisationsTable:C9},data(){return{localUrl:n,isLoaded:!1,showFilters:!1,date:null,search:"",showPopup:!1,columns:[{prop:"id",name:"#"},{prop:"factorisation_id",name:"Code"},{prop:"delivery_id",name:"Delivery"},{prop:"commands_number",name:"Nb Commands"},{prop:"price",name:"Total Price"},{prop:"close_at",name:"Closed at"},{prop:"paid_at",name:"Paid at"},{prop:"close",name:"Close"},{prop:"paid",name:"Paid"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{factorisations(){return this.$store.getters["factorisation/factorisations"]},filteredFactorisations(){const t=this.date;return this.factorisations.filter((e=>!t||e?.created_at.split("T")[0]===t))}},mounted(){M6.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("factorisation/setFactorisations",t.data.data.factorisations)}),(t=>{this.$handleApiError(t)})).finally((()=>this.isLoaded=!0))}};const S9=(0,p.Z)(D9,[["render",j6]]);var z9=S9,U9={name:"factorisations",path:"/factorisations",component:da,meta:{module:"factorisation"},children:[{name:"factorisation/list",path:"",component:z9,meta:{module:"factorisation",subModule:"factorisation/list",title:"Factorisations List",gate:"show_all_factorisations"}}]};const L9={class:"mb-5 tw-flex tw-justify-between tw-items-center"},P9=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Google Sheets"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your google sheets")],-1),A9=(0,s._)("span",{class:"text-white"}," Add Sheet ",-1),W9={key:0},$9={key:1,class:"py-5 px-5 tw-mb-5 tw-border bg-white tw-w-full tw-rounded-md"},E9={class:"tw-flex tw-items-center tw-gap-2"},q9=(0,s._)("h1",null,"Application's email",-1),T9={class:"tw-bg-gray-100 tw-border tw-border-gray-300 tw-rounded tw-py-2 tw-px-2 tw-text-sm tw-mt-2 tw-text-gray-700"},O9=(0,s._)("p",{class:"tw-mt-1 tw-text-xs tw-text-gray-400"}," Use this email to give access to Google Sheets ",-1),V9={key:2,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},I9={class:"mb-5 tw-flex"},F9={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},R9={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},j9={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},N9=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),M9={class:"tw-relative"},H9={class:""};function Y9(t,e,r,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("SheetsTable"),w=(0,s.up)("AddSheet");return(0,s.wg)(),(0,s.iD)("div",{key:o.sheets.length},[(0,s._)("div",L9,[P9,(0,s._)("div",null,[t.$can("create_sheet")?((0,s.wg)(),(0,s.j4)(rt.T,{key:0,color:"primary-color",onClick:e[0]||(e[0]=t=>l.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{icon:"mdi-plus",class:"mr-2 text-white"}),A9])),_:1})):(0,s.kq)("",!0)])]),l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",W9,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",$9,[(0,s._)("div",E9,[q9,(0,s._)("button",{onClick:e[1]||(e[1]=(...t)=>o.copy&&o.copy(...t)),class:"tw-bg-gray-100 tw-border tw-border-gray-300 tw-rounded tw-w-[30px] tw-h-[30px] tw-text-gray-500 hover:tw-text-gray-700 tw-duration-300 tw-border-solid hover:tw-border-gray-400"},[(0,s.Wm)(st.t,{class:"tw-text-xs"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-content-copy")])),_:1})])]),(0,s._)("div",T9,(0,et.zw)(l.email),1),O9])):(0,s.kq)("",!0),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",V9,[(0,s._)("div",I9,[(0,s.Wm)(rt.T,{onClick:e[2]||(e[2]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",F9,[(0,s.Wm)(Xt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,l.search]])])]),(0,s._)("div",{class:(0,et.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,s._)("div",R9,[(0,s._)("div",j9,[N9,(0,s._)("div",M9,[(0,s.wy)((0,s._)("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=t=>l.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[a.nr,l.date]])])])])],2),(0,s._)("div",H9,[(0,s.Wm)(d,{sheets:o.sheets},null,8,["sheets"])]),(0,s.Wm)(w,{onCancel:e[5]||(e[5]=t=>l.showPopup=!1),visible:l.showPopup},null,8,["visible"])])):(0,s.kq)("",!0)])}const Z9={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},K9={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},B9={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},Q9=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),G9={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},J9={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},X9={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},ttt=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"}," Show per page: ",-1),ett=["value"],rtt={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},att={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},stt={class:"tw-text-white"};function itt(t,e,r,i,l,o){const n=(0,s.up)("SheetRow");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",Z9,[(0,s._)("table",K9,[(0,s._)("thead",B9,[(0,s._)("tr",null,[Q9,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",G9,(0,et.zw)(t),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.sheets,(t=>((0,s.wg)(),(0,s.j4)(n,{sheet:t,key:t.id},null,8,["sheet"])))),128))])])]),(0,s._)("div",J9,[(0,s._)("div",X9,[ttt,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,et.zw)(t),9,ett)))),128))],512),[[a.bM,l.paginationLimit]])]),(0,s._)("div",rtt,[(0,s._)("div",att,(0,et.zw)(o.prevRange+1)+" - "+(0,et.zw)(l.currentPage==o.pageCount?r.sheets.length:o.nextRange)+" of "+(0,et.zw)(r.sheets.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pageCount,(t=>((0,s.wg)(),(0,s.j4)(rt.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",stt,(0,et.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const ltt={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},ott=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),ntt={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},dtt={class:"tw-px-6 tw-py-4"},wtt={class:"tw-px-6 tw-py-4"},ctt={class:"tw-px-6 tw-py-4"},utt={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},ptt={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},mtt=["disabled"],gtt=(0,s._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),htt={class:"tw-px-6 tw-py-4"},ftt={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"};function vtt(t,e,r,i,l,o){const n=(0,s.up)("SheetActions");return(0,s.wg)(),(0,s.iD)("tr",ltt,[ott,(0,s._)("th",ntt,(0,et.zw)(r.sheet.id),1),(0,s._)("td",dtt,[(0,s._)("div",null,[(0,s._)("span",{class:(0,et.C_)(["tw-inline-block tw-w-[8px] tw-h-[8px] tw-rounded-full tw-mr-1",[1==r.sheet.active&&1==r.sheet.auto_fetch?"tw-bg-emerald-500":"tw-bg-red-500"]])},null,2),(0,s.Uk)(" "+(0,et.zw)(r.sheet.name),1)])]),(0,s._)("td",wtt,[(0,s._)("div",null,(0,et.zw)(r.sheet.sheet_name),1)]),(0,s._)("td",ctt,[(0,s._)("div",utt,[(0,s._)("label",ptt,[(0,s.wy)((0,s._)("input",{disabled:l.isLoadingAuto,"onUpdate:modelValue":e[0]||(e[0]=t=>o.autoFetch=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,8,mtt),[[a.e8,o.autoFetch]]),gtt]),l.isLoadingAuto?((0,s.wg)(),(0,s.j4)(st.t,{key:0,color:"green",size:"small",class:"tw-animate-spin"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)])]),(0,s._)("td",htt,(0,et.zw)(r.sheet.created_at.split("T")[0]),1),(0,s._)("td",ftt,[(0,s.Wm)(n,{sheet:r.sheet},null,8,["sheet"])])])}const ytt={key:0};function xtt(t,e,r,a,i,l){const o=(0,s.up)("UpdateSheet"),n=(0,s.up)("SheetOrders"),d=(0,s.up)("popup");return r.sheet?((0,s.wg)(),(0,s.iD)("div",ytt,[t.$can("update_sheet")?((0,s.wg)(),(0,s.j4)(rt.T,{key:0,onClick:l.sync,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{class:(0,et.C_)([i.isLoadingSheet&&"tw-animate-spin"]),color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1},8,["class"])])),_:1},8,["onClick"])):(0,s.kq)("",!0),t.$can("update_sheet")?((0,s.wg)(),(0,s.j4)(rt.T,{key:1,onClick:e[0]||(e[0]=t=>i.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),t.$can("delete_sheet")?((0,s.wg)(),(0,s.j4)(rt.T,{key:2,onClick:e[1]||(e[1]=t=>i.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(st.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(o,{visible:i.showUpdatePopup,"onUpdate:visible":e[2]||(e[2]=t=>i.showUpdatePopup=t),sheet:r.sheet,onCancel:e[3]||(e[3]=t=>i.showUpdatePopup=!1)},null,8,["visible","sheet"]),(0,s.Wm)(n,{visible:i.showSheetPopup,"onUpdate:visible":e[4]||(e[4]=t=>i.showSheetPopup=t),sheet:r.sheet,orders:i.orders,onCancel:e[5]||(e[5]=t=>i.showSheetPopup=!1)},null,8,["visible","sheet","orders"]),(0,s.Wm)(d,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this sale?</p> You won't be able to revert this!",loading:i.isLoading,visible:i.showPopup,onResolved:l.handleDelete},null,8,["loading","visible","onResolved"])])):(0,s.kq)("",!0)}const btt={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},_tt=(0,s._)("h1",{class:"tw-text-lg"},"Create Sheet",-1),ktt={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},Ctt={class:"md:tw-col-span-6 tw-col-span-12"},Dtt=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Name",-1),Stt={class:"md:tw-col-span-6 tw-col-span-12"},ztt=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Sheet Name",-1),Utt={class:"md:tw-col-span-12 tw-col-span-12"},Ltt=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Sheet ID",-1),Ptt={class:"md:tw-col-span-6 tw-col-span-12"},Att=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Auto Fetch",-1),Wtt={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},$tt=(0,s._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),Ett={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},qtt=(0,s._)("span",{class:"text-white"}," Cancel ",-1),Ttt=(0,s._)("span",{class:"text-white"}," Save ",-1);function Ott(t,e,r,i,l,o){const n=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(n,{onCancel:e[5]||(e[5]=e=>t.$emit("cancel")),visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",btt,[_tt,(0,s._)("div",ktt,[(0,s._)("div",Ctt,[Dtt,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.newSheet.name=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.newSheet.name]])]),(0,s._)("div",Stt,[ztt,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.newSheet.sheet_name=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.newSheet.sheet_name]])]),(0,s._)("div",Utt,[Ltt,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>l.newSheet.sheet_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.newSheet.sheet_id]])]),(0,s._)("div",Ptt,[Att,(0,s._)("label",Wtt,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.newSheet.auto_fetch=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,512),[[a.e8,l.newSheet.auto_fetch]]),$tt])])]),(0,s._)("div",Ett,[(0,s.Wm)(rt.T,{onClick:e[4]||(e[4]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[qtt])),_:1}),(0,s.Wm)(rt.T,{loading:l.isLoading,onClick:o.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[Ttt])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var Vtt={props:["visible","sheet"],data(){return{isLoading:!1,newSheet:{name:"",sheet_id:"",sheet_name:"",auto_fetch:!0}}},watch:{visible(t){t&&(this.newSheet={...this.sheet,auto_fetch:1==this.sheet.auto_fetch})}},computed:{isFormValid(){return!!this.newSheet.name&&!!this.newSheet.sheet_id&&!!this.newSheet.sheet_name}},methods:{update(){if(!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;this.isLoading=!0;const t=this.newSheet;ra.update(this.sheet.id,t).then((t=>{"SUCCESS"==t.data.code&&(this.$emit("cancel"),this.$alert({type:"success",title:"Sheet updated successfully"}),this.$store.dispatch("sheet/update",t.data.data.sheet))}),this.$handleApiError).finally((()=>this.isLoading=!1))}}};const Itt=(0,p.Z)(Vtt,[["render",Ott]]);var Ftt=Itt;const Rtt={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},jtt={key:0},Ntt={class:"tw-flex tw-items-center tw-gap-2 tw-mb-2"},Mtt=(0,s._)("h1",{class:"tw-text-sm tw-font-medium tw-text-neutral-700"},"Sheet's New Orders",-1),Htt={class:"tw-bg-emerald-500 tw-text-white tw-px-1 tw-text-sm tw-rounded"},Ytt={class:"tw-relative tw-overflow-x-auto"},Ztt={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500 tw-border tw-rounded"},Ktt=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50 tw-rounded-t tw-overflow-hidden"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Fullname"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Product"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"SKU"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Qty"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Price")])],-1),Btt={class:"tw-px-6 tw-py-2"},Qtt={class:"tw-px-6 tw-py-2"},Gtt={class:"tw-px-6 tw-py-2"},Jtt={class:"tw-px-6 tw-py-2"},Xtt={class:"tw-px-6 tw-py-2"},tet={class:"tw-flex tw-gap-2 mt-3 tw-justify-end"},eet=(0,s._)("span",{class:"text-white"}," Cancel ",-1),ret=(0,s._)("span",{class:"text-white"}," Save Orders",-1);function aet(t,e,r,a,i,l){const o=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(o,{onCancel:e[1]||(e[1]=e=>t.$emit("cancel")),visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",Rtt,[r.orders.length>0?((0,s.wg)(),(0,s.iD)("div",jtt,[(0,s._)("div",Ntt,[Mtt,(0,s._)("div",Htt,(0,et.zw)(r.orders.length),1)]),(0,s._)("div",null,[(0,s._)("div",Ytt,[(0,s._)("table",Ztt,[Ktt,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.orders,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t,class:"tw-bg-white tw-border-b"},[(0,s._)("td",Btt,(0,et.zw)(t["Full name"]),1),(0,s._)("td",Qtt,[(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t["Product name"].split("\n"),(t=>((0,s.wg)(),(0,s.iD)("p",{key:t},"- "+(0,et.zw)(t),1)))),128))])]),(0,s._)("td",Gtt,[(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t["SKU"].split("\n"),(t=>((0,s.wg)(),(0,s.iD)("p",{key:t},(0,et.zw)(t),1)))),128))])]),(0,s._)("td",Jtt,[(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t["Total quantity"].split("\n"),(t=>((0,s.wg)(),(0,s.iD)("p",{key:t},(0,et.zw)(t),1)))),128))])]),(0,s._)("td",Xtt,(0,et.zw)(t["Total charge"]),1)])))),128))])])])]),(0,s._)("div",tet,[(0,s.Wm)(rt.T,{onClick:e[0]||(e[0]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[eet])),_:1}),(0,s.Wm)(rt.T,{loading:i.isLoading,onClick:l.save,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[ret])),_:1},8,["loading","onClick"])])])):(0,s.kq)("",!0)])])),_:1},8,["visible"])])}var set={props:["visible","sheet","orders"],data(){return{isLoading:!1}},computed:{sales(){return this.$store.getters["sale/sales"]}},methods:{save(){this.isLoading=!0,ra.saveOrders(this.sheet.id).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({title:t.data.data.orders.length+" Order has been added",type:"success"}),this.$store.dispatch("sale/setSales",[...t.data.data.orders,...this.sales]),this.$emit("cancel"))}),(t=>{this.$handleApiError(t),"PERMISSION_DENIED"==t?.response?.data?.code&&this.$alert({title:"Access denied to this sheet",type:"warning"})})).finally((()=>{this.isLoading=!1}))}}};const iet=(0,p.Z)(set,[["render",aet]]);var oet=iet,net={props:["sheet"],name:"sheetActions",components:{UpdateSheet:Ftt,SheetOrders:oet},data(){return{showPopup:!1,showUpdatePopup:!1,showSheetPopup:!1,isLoading:!1,isLoadingSheet:!1,orders:[]}},computed:{},methods:{handleDelete(t){if(console.log(t),!t)return this.showPopup=!1,!1;this.delete()},delete(){this.isLoading=!0,ra["delete"](this.sheet.id).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({title:"Deleted successfully",type:"success"}),this.$store.dispatch("sheet/delete",this.sheet.id),this.showPopup=!1)}),this.$handleApiError).finally((()=>{this.isLoading=!1}))},sync(){this.isLoadingSheet=!0,ra.sync(this.sheet.id).then((t=>{"SUCCESS"==t.data.code&&(0==t.data.data.orders.length?this.$alert({title:"0 Orders found",type:"info"}):(this.orders=t.data.data.orders,this.showSheetPopup=!0),console.log(t.data.data.sheet),this.$store.dispatch("sheet/update",t.data.data.sheet)),console.log(t.data)}),(t=>{this.$handleApiError(t),console.log(t),this.$store.dispatch("sheet/update",t.response.data.data.sheet),"PERMISSION_DENIED"==t?.response?.data?.code&&this.$alert({title:"Access denied to this Google Sheet",type:"error"})})).finally((()=>{this.isLoadingSheet=!1}))}},mounted(){}};const det=(0,p.Z)(net,[["render",xtt]]);var wet=det,cet={props:["sheet"],components:{SheetActions:wet},data(){return{isLoadingAuto:!1}},computed:{autoFetch:{get(){return 1==this.sheet.auto_fetch},set(t){this.updateAutoFetch(t)}}},methods:{updateAutoFetch(t){this.isLoadingAuto=!0,ra.updateAutoFetch(this.sheet.id,t).then((e=>{"SUCCESS"==e.data.code&&(this.$alert({title:t?"Activated":"Disabled",type:"success"}),this.$store.dispatch("sheet/update",e.data.data.sheet))}),this.$handleApiError).finally((()=>{this.isLoadingAuto=!1}))}}};const uet=(0,p.Z)(cet,[["render",vtt]]);var pet=uet,met={props:["sheets"],components:{SheetRow:pet},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10,columns:["id","name","sheet name","auto fetch","created","actions"]}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.sheets.length/this.paginationLimit)},items(){return this.sheets.slice(this.prevRange,this.nextRange)}},methods:{}};const get=(0,p.Z)(met,[["render",itt]]);var het=get;const fet={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},vet=(0,s._)("h1",{class:"tw-text-lg"},"Create Sheet",-1),yet={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},xet={class:"md:tw-col-span-6 tw-col-span-12"},bet=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Name",-1),_et={class:"md:tw-col-span-6 tw-col-span-12"},ket=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Sheet Name",-1),Cet={class:"md:tw-col-span-12 tw-col-span-12"},Det=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Sheet ID",-1),zet={class:"md:tw-col-span-6 tw-col-span-12"},Uet=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Auto Fetch",-1),Let={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},Pet=(0,s._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),Aet={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},Wet=(0,s._)("span",{class:"text-white"}," Cancel ",-1),$et=(0,s._)("span",{class:"text-white"}," Save ",-1);function Eet(t,e,r,i,l,o){const n=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(n,{onCancel:e[5]||(e[5]=e=>t.$emit("cancel")),visible:r.visible},{default:(0,s.w5)((()=>[(0,s._)("div",fet,[vet,(0,s._)("div",yet,[(0,s._)("div",xet,[bet,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.sheet.name=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sheet.name]])]),(0,s._)("div",_et,[ket,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.sheet.sheet_name=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sheet.sheet_name]])]),(0,s._)("div",Cet,[Det,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>l.sheet.sheet_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sheet.sheet_id]])]),(0,s._)("div",zet,[Uet,(0,s._)("label",Let,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.sheet.auto_fetch=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,512),[[a.e8,l.sheet.auto_fetch]]),Pet])])]),(0,s._)("div",Aet,[(0,s.Wm)(rt.T,{onClick:e[4]||(e[4]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[Wet])),_:1}),(0,s.Wm)(rt.T,{loading:l.isLoading,onClick:o.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[$et])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var qet={props:["visible"],data(){return{isLoading:!1,sheet:{name:"",sheet_id:"",sheet_name:"",auto_fetch:!0}}},computed:{isFormValid(){return!!this.sheet.name&&!!this.sheet.sheet_id&&!!this.sheet.sheet_name}},methods:{create(){if(!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;this.isLoading=!0;const t=this.sheet;ra.create(t).then((t=>{"SUCCESS"==t.data.code&&(this.$emit("cancel"),this.$alert({type:"success",title:"Sheet created successfully"}),this.$store.dispatch("sheet/addSheet",t.data.data.sheet))}),this.$handleApiError).finally((()=>this.isLoading=!1))}}};const Tet=(0,p.Z)(qet,[["render",Eet]]);var Oet=Tet,Vet={components:{SheetsTable:het,AddSheet:Oet},data(){return{localUrl:n,isLoaded:!1,showFilters:!1,date:null,search:"",showPopup:!1,email:"new-service-account@testing-379416.iam.gserviceaccount.com"}},computed:{sheets(){return this.$store.getters["sheet/sheets"]}},methods:{getSheets(){return this.isLoaded=!1,ra.all().then((t=>("SUCCESS"==t.data.code&&this.$store.dispatch("sheet/setSheets",t.data.data.sheets),t)),this.$handleApiError).finally((()=>{this.isLoaded=!0}))},copy(){navigator.clipboard.writeText(this.email),this.$alert({title:"Email Copied !",type:"success"})}},mounted(){this.getSheets()}};const Iet=(0,p.Z)(Vet,[["render",Y9]]);var Fet=Iet,Ret={name:"sheets",path:"/sheets",component:da,meta:{module:"sheet"},children:[{name:"sheet/list",path:"",component:Fet,meta:{module:"sheet",subModule:"sheet/list",title:"Google Sheets List",gate:"show_all_sheets"}}]};const jet={class:"py-5 px-2 tw-border tw-bg-white tw-w-full tw-rounded-md tw-mb-5"},Net={class:"tw-px-3"},Met={class:"tw-flex tw-items-center tw-justify-between tw-flex-wrap"},Het={class:"tw-flex tw-items-center tw-gap-x-3"},Yet=(0,s._)("h2",{class:"tw-text-lg tw-font-medium tw-text-gray-800 darkx:tw-text-white"}," Orders ",-1),Zet={class:"tw-px-3 tw-py-1 tw-text-xs tw-text-emerald-600 tw-bg-emerald-100 tw-rounded-full darkx:tw-bg-gray-800 darkx:tw-text-orange-400"},Ket=(0,s._)("p",{class:"tw-mt-1 tw-text-sm tw-text-gray-500 darkx:tw-text-gray-300"}," These orders have needs to reconfirmed. ",-1),Bet={class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-3"},Qet=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",width:"16",height:"16",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),Get=(0,s._)("span",null,"Create",-1),Jet=[Qet,Get],Xet={class:"tw-overflow-hidden tw-col-span-1"},trt={key:0};function ert(t,e,r,a,i,l){const o=(0,s.up)("IndexFilters"),n=(0,s.up)("BulkActions"),d=(0,s.up)("IndexTable"),w=(0,s.up)("CreatePopup");return(0,s.wg)(),(0,s.iD)("div",jet,[(0,s._)("section",Net,[(0,s._)("div",Met,[(0,s._)("div",null,[(0,s._)("div",Het,[Yet,(0,s._)("span",Zet,(0,et.zw)(i.totalOrders)+" order",1)]),Ket]),(0,s._)("div",Bet,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.create_popup=!0),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},Jet)])]),(0,s.Wm)(o,{search:i.search,"onUpdate:search":e[1]||(e[1]=t=>i.search=t),filters:i.filters,"onUpdate:filters":e[2]||(e[2]=t=>i.filters=t),onFilter:e[3]||(e[3]=t=>l.handlePerPageChange(i.per_page)),onClear:l.handleClearFilters,onPerPageChange:l.handlePerPageChange,onFresh:l.paginateOrders,loading:i.fetching,statistics:i.statistics,"per-page":i.per_page,"active-statistics":""},null,8,["search","filters","onClear","onPerPageChange","onFresh","loading","statistics","per-page"]),(0,s._)("div",{class:(0,et.C_)([[i.selected.length>0?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",Xet,[(0,s.Wm)(n,{onUpdate:l.handleBulkUpdate,selected:i.selected,"onUpdate:selected":e[4]||(e[4]=t=>i.selected=t)},null,8,["onUpdate","selected"])])],2),(0,s._)("div",null,[(0,s.Wm)(d,{selected:i.selected,"onUpdate:selected":e[5]||(e[5]=t=>i.selected=t),onUpdate:l.handleItemUpdate,onPageChange:l.handlePageChange,onSortOrder:l.handleSortOrderChange,loading:i.fetching,from:i.from,to:i.to,"last-page":i.last_page,"per-page":i.per_page,total:i.total,"current-page":i.current_page,items:i.items,deliveries:i.deliveries},null,8,["selected","onUpdate","onPageChange","onSortOrder","loading","from","to","last-page","per-page","total","current-page","items","deliveries"])]),i.create_popup?((0,s.wg)(),(0,s.iD)("div",trt,[(0,s.Wm)(w,{visible:i.create_popup,"onUpdate:visible":e[6]||(e[6]=t=>i.create_popup=t)},null,8,["visible"])])):(0,s.kq)("",!0)])])}const rrt={class:"tw-mb-4"},art={class:"tw-w-full tw-p-3 tw-py-2 tw-rounded-lg tw-bg-gray-50 tw-border tw-border-solid"},srt={class:"tw-flex tw-items-center tw-gap-2 tw-justify-between"},irt={class:"tw-flex tw-items-center tw-gap-2"},lrt={class:"tw-text-sm tw-px-2 tw-w-fit tw-bg-orange-500 tw-aspect-auto tw-text-white tw-rounded"},ort=(0,s._)("p",{class:"tw-font-bold tw-text-sm"}," Selected",-1),nrt={class:"tw-flex tw-items-center tw-gap-2"},drt=(0,s._)("svg",{class:"tw-stroke-gray-400",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59L7.11 5.7A.996.996 0 1 0 5.7 7.11L10.59 12L5.7 16.89a.996.996 0 1 0 1.41 1.41L12 13.41l4.89 4.89a.996.996 0 1 0 1.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"})],-1),wrt=(0,s._)("span",null," Clear Selection ",-1),crt=[drt,wrt],urt=(0,s._)("svg",{class:"tw-stroke-gray-400",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 20 20"},[(0,s._)("g",{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"},[(0,s._)("path",{d:"M8.232 11.768A2.493 2.493 0 0 0 10 12.5c.672 0 1.302-.267 1.768-.732A2.493 2.493 0 0 0 12.5 10c0-.672-.267-1.302-.732-1.768A2.493 2.493 0 0 0 10 7.5c-.672 0-1.302.267-1.768.732A2.493 2.493 0 0 0 7.5 10c0 .672.267 1.302.732 1.768Zm2.829-.707c-.28.28-.657.439-1.061.439c-.404 0-.78-.16-1.06-.44S8.5 10.405 8.5 10s.16-.78.44-1.06s.656-.44 1.06-.44s.78.16 1.06.44s.44.656.44 1.06s-.16.78-.44 1.06Z"}),(0,s._)("path",{d:"m14.216 3.773l-1.27.714a6.213 6.213 0 0 0-1.166-.48l-.47-1.414a.5.5 0 0 0-.474-.343H9.06a.5.5 0 0 0-.481.365l-.392 1.403a6.214 6.214 0 0 0-1.164.486L5.69 3.835a.5.5 0 0 0-.578.094L3.855 5.185a.5.5 0 0 0-.082.599l.714 1.27c-.199.37-.36.76-.48 1.166l-1.414.47a.5.5 0 0 0-.343.474v1.777a.5.5 0 0 0 .365.481l1.403.392c.122.405.285.794.486 1.164l-.669 1.333a.5.5 0 0 0 .094.578l1.256 1.256a.5.5 0 0 0 .599.082l1.27-.714c.37.199.76.36 1.166.48l.47 1.414a.5.5 0 0 0 .474.343h1.777a.5.5 0 0 0 .481-.365l.392-1.403a6.21 6.21 0 0 0 1.164-.486l1.333.669a.5.5 0 0 0 .578-.093l1.256-1.257a.5.5 0 0 0 .082-.599l-.714-1.27c.199-.37.36-.76.48-1.166l1.414-.47a.5.5 0 0 0 .343-.474V9.06a.5.5 0 0 0-.365-.481l-1.403-.392a6.208 6.208 0 0 0-.486-1.164l.669-1.333a.5.5 0 0 0-.093-.578l-1.257-1.256a.5.5 0 0 0-.599-.082Zm-1.024 1.724l1.184-.667l.733.733l-.627 1.25a.5.5 0 0 0 .019.482c.265.44.464.918.59 1.418a.5.5 0 0 0 .35.36l1.309.366v1.037l-1.327.44a.5.5 0 0 0-.328.354a5.216 5.216 0 0 1-.585 1.42a.5.5 0 0 0-.007.502l.667 1.184l-.733.733l-1.25-.627a.5.5 0 0 0-.482.019c-.44.265-.918.464-1.418.59a.5.5 0 0 0-.36.35l-.366 1.309H9.525l-.44-1.327a.5.5 0 0 0-.355-.328a5.217 5.217 0 0 1-1.42-.585a.5.5 0 0 0-.502-.007l-1.184.667l-.733-.733l.627-1.25a.5.5 0 0 0-.019-.482a5.216 5.216 0 0 1-.59-1.418a.5.5 0 0 0-.35-.36l-1.309-.366V9.525l1.327-.44a.5.5 0 0 0 .327-.355c.125-.5.323-.979.586-1.42a.5.5 0 0 0 .007-.502L4.83 5.624l.733-.733l1.25.627a.5.5 0 0 0 .482-.019c.44-.265.918-.464 1.418-.59a.5.5 0 0 0 .36-.35l.366-1.309h1.037l.44 1.327a.5.5 0 0 0 .354.327c.5.125.979.323 1.42.586a.5.5 0 0 0 .502.007Z"})])],-1),prt=(0,s._)("span",null," Actions ",-1),mrt=[urt,prt],grt={key:0};function hrt(t,e,r,a,i,l){const o=(0,s.up)("BulkPopup");return(0,s.wg)(),(0,s.iD)("div",rrt,[(0,s._)("div",art,[(0,s._)("div",srt,[(0,s._)("div",irt,[(0,s._)("div",lrt,(0,et.zw)(r.selected.length),1),ort]),(0,s._)("div",nrt,[(0,s._)("button",{onClick:e[0]||(e[0]=e=>t.$emit("update:selected",[])),class:"tw-bg-white tw-flex tw-items-center tw-gap-1 tw-py-1.5 hover:tw-shadow-none tw-duration-200 tw-px-3 tw-text-sm tw-rounded tw-border tw-border-solid tw-border-gray-300 tw-shadow-sm"},crt),(0,s._)("button",{onClick:e[1]||(e[1]=t=>i.popup=!0),class:"tw-bg-white tw-flex tw-items-center tw-gap-1 tw-py-1.5 hover:tw-shadow-none tw-duration-200 tw-px-3 tw-text-sm tw-rounded tw-border tw-border-solid tw-border-gray-300 tw-shadow-sm"},mrt)])])]),i.popup?((0,s.wg)(),(0,s.iD)("div",grt,[(0,s.Wm)(o,{selected:r.selected,onUpdate:l.handleUpdate,visible:i.popup,"onUpdate:visible":e[2]||(e[2]=t=>i.popup=t)},null,8,["selected","onUpdate","visible"])])):(0,s.kq)("",!0)])}const frt={class:"tw-mx-auto tw-w-[95%] md:tw-max-w-[800px] tw-overflow-hidden tw-h-fit dark:tw-bg-neutral-900 tw-bg-white tw-border tw-border-solid dark:tw-border-neutral-700 tw-border-neutral-300 tw-shadow-md tw-my-5 tw-rounded-lg"},vrt={class:"tw-p-4 tw-text-lg tw-border-b tw-border-solid tw-font-medium tw-flex dark:tw-text-neutral-400 tw-text-neutral-500 tw-items-center tw-gap-4 dark:tw-bg-neutral-800 tw-bg-gray-50"},yrt=(0,s._)("span",null,"Quick Actions",-1),xrt={class:"tw-px-2 tw-w-fit tw-bg-orange-500 tw-aspect-auto tw-text-white tw-rounded"},brt={class:"tw-bg-white tw-p-4"},_rt={class:"tw-grid tw-gap-6 tw-gap-y-5 tw-grid-cols-1 md:tw-grid-cols-2"},krt={class:"tw-col-span-2 md:tw-col-span-1"},Crt={key:0,class:"tw-col-span-2 md:tw-col-span-1"},Drt={class:"tw-flex tw-justify-end tw-items-center tw-p-4 tw-gap-3 dark:tw-bg-neutral-900 tw-bg-gray-50 tw-border-t tw-border-solid"},Srt=(0,s._)("span",null,"Apply",-1);function zrt(t,e,r,a,i,l){const o=(0,s.up)("BulkSelectAction"),n=(0,s.up)("BulkDeliveryAction"),d=(0,s.up)("popup-new");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(d,{visible:r.visible,closeable:!i.isLoading,onCancel:l.cancel},{default:(0,s.w5)((()=>[(0,s._)("div",frt,[(0,s._)("div",vrt,[yrt,(0,s._)("span",xrt,(0,et.zw)(r.selected.length),1)]),(0,s._)("div",brt,[(0,s._)("div",_rt,[(0,s._)("div",krt,[(0,s.Wm)(o,{action:i.action,"onUpdate:action":e[0]||(e[0]=t=>i.action=t)},null,8,["action"])]),2==i.action?((0,s.wg)(),(0,s.iD)("div",Crt,[(0,s.Wm)(n,{value:i.value,"onUpdate:value":e[1]||(e[1]=t=>i.value=t)},null,8,["value"])])):(0,s.kq)("",!0)])]),(0,s._)("div",Drt,[(0,s._)("button",{onClick:e[2]||(e[2]=(...t)=>l.cancel&&l.cancel(...t)),class:"tw-py-2 tw-px-7 tw-rounded tw-text-sm tw-border tw-border-solid tw-border-tansparent dark:tw-border-neutral-900 hover:tw-border-neutral-400 dark:hover:tw-border-neutral-500 hover:tw-bg-gray-300 tw-bg-gray-200 dark:tw-bg-neutral-600 tw-duration-300 tw-text-neutral-900 dark:tw-text-neutral-300"}," Cancel "),(0,s._)("button",{onClick:e[3]||(e[3]=(...t)=>l.execute&&l.execute(...t)),class:"tw-py-2 tw-px-7 tw-flex tw-items-center tw-rounded tw-text-sm tw-bg-orange-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-orange-600 dark:tw-border-neutral-900 dark:hover:tw-border-orange-500 hover:tw-bg-orange-500/80 dark:hover:tw-bg-orange-400 tw-duration-300 tw-text-white"},[(0,s.Wm)(st.t,{size:"small",class:(0,et.C_)(["tw-duration-300 tw-animate-spin tw-overflow-hidden tw-max-w-0 tw-mr-0",[i.isLoading&&"!tw-max-w-[50px] !tw-mr-3"]])},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1},8,["class"]),Srt])])])])),_:1},8,["visible","closeable","onCancel"])])}const Urt=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Action",-1),Lrt={class:"tw-relative"},Prt=["value"],Art=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1);function Wrt(t,e,r,i,l,o){return(0,s.wg)(),(0,s.iD)("div",null,[Urt,(0,s._)("div",Lrt,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.vaction=t),class:(0,et.C_)([[!1],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 tw-pr-7"])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.actions,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,et.zw)(t.name),9,Prt)))),128))],512),[[a.bM,o.vaction]]),Art]),(0,s.kq)("",!0)])}var $rt={props:{action:{required:!0}},data(){return{actions:[{id:1,name:"Select Action"},{id:2,name:"Delivery Status"}]}},computed:{vaction:{get(){return this.action},set(t){this.$emit("update:action",t)}}}};const Ert=(0,p.Z)($rt,[["render",Wrt]]);var qrt=Ert;const Trt=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Value",-1),Ort={class:"tw-relative"},Vrt=(0,s._)("option",{disabled:"",value:"not-selected"},"Select a value",-1),Irt=["value"],Frt=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1);function Rrt(t,e,r,i,l,o){return(0,s.wg)(),(0,s.iD)("div",null,[Trt,(0,s._)("div",Ort,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.vvalue=t),class:(0,et.C_)([[!1],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 tw-pr-7"])},[Vrt,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.statuses,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,et.C_)([t.text]),value:t.value,key:t.id},(0,et.zw)(t.name),11,Irt)))),128))],512),[[a.bM,o.vvalue]]),Frt]),(0,s.kq)("",!0)])}var jrt={props:{value:{required:!0}},data(){return{statuses:Vn}},computed:{vvalue:{get(){return this.value},set(t){this.$emit("update:value",t)}}}};const Nrt=(0,p.Z)(jrt,[["render",Rrt]]);var Mrt=Nrt,Hrt=(t,e)=>{t.isLoading=!0,DV.execute(e).then((e=>Yrt(t,e.data))).catch(t.$handleApiError).finally((()=>{t.isLoading=!1}))};const Yrt=(t,e)=>{"SUCCESS"==e.code&&(t.$alert({title:"Updated Successfully",type:"success"}),t.$emit("update:visible",!1),t.$emit("update"))};var Zrt={components:{BulkSelectAction:qrt,BulkDeliveryAction:Mrt},props:{visible:{required:!0},selected:{required:!0}},data(){return{isLoading:!1,action:1,value:"not-selected"}},watch:{action(){this.value="not-selected"}},methods:{cancel(){this.$emit("update:visible",!1)},execute(){if(1==this.action)return this.$alert({title:"Select action",type:"info"}),!1;if("not-selected"==this.value)return this.$alert({title:"Select value",type:"info"}),!1;const t={action:this.action,value:this.value,selected:this.selected};Hrt(this,t)}}};const Krt=(0,p.Z)(Zrt,[["render",zrt]]);var Brt=Krt,Qrt={components:{BulkPopup:Brt},props:{selected:{required:!0}},data(){return{popup:!1}},methods:{handleUpdate(){this.$emit("update")}}};const Grt=(0,p.Z)(Qrt,[["render",hrt]]);var Jrt=Grt,Xrt={components:{IndexTable:pM,IndexFilters:tY,CreatePopup:tZ,BulkActions:Jrt},data(){return{fetching:!0,create_popup:!1,items:[],selected:[],deliveries:{fetched:!1,items:[]},statistics:null,first_page_url:null,lase_page_url:null,next_page_url:null,prev_page_url:null,last_page:1,from:1,to:1,total:0,totalOrders:0,links:null,search:"",sort_by:"created_at",sort_order:"desc",per_page:10,current_page:1,filters:{created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"all",product_id:"all",delivery:"all",reported_first:!1}}},methods:{paginateOrders(){const t="?page="+this.current_page,e={sort_by:this.sort_by,sort_order:this.sort_order,per_page:this.per_page,current_page:this.current_page,search:this.search,filters:this.filters};return this.fetching=!0,Jl.paginate(t,e).then((({data:t})=>{const e=t.data.orders;this.setOptions(e),this.statistics=this.search?this.statistics:t.data.statistics})).then((()=>{this.fetching=!1}))},setOptions(t){this.items=t.data,this.first_page_url=Qi(t.first_page_url),this.lase_page_url=Qi(t.last_page_url),this.next_page_url=Qi(t.next_page_url),this.prev_page_url=Qi(t.prev_page_url),this.last_page=parseInt(t.last_page),this.from=parseInt(t.from),this.to=parseInt(t.to),this.per_page=parseInt(t.per_page),this.total=parseInt(t.total),this.totalOrders=this.search?this.totalOrders:parseInt(t.total),this.links=t.links},handleClearFilters(){this.filters={created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"all",product_id:"all",delivery:"all",reported_first:!1},this.handlePageChange(1)},handleBulkUpdate(){this.selected=[],this.paginateOrders()},handleItemUpdate(t){this.items=this.items.map((e=>e.id==t.id?t:e))},handlePageChange(t){this.current_page=t,this.paginateOrders()},handlePerPageChange(t){this.per_page=parseInt(t),this.handlePageChange(1)},handleSortOrderChange(){this.sort_order="asc"==this.sort_order?"desc":"asc",this.paginateOrders()},getDeliveries(){this.deliveries.fetched=!1,X.allDeliveries().then((t=>{"SUCCESS"==t?.data.code&&(this.deliveries.items=t.data.data.deliveries,this.deliveries.fetched=!0)})).catch(this.$handleApiError)}},mounted(){this.paginateOrders(),this.getDeliveries()}};const tat=(0,p.Z)(Xrt,[["render",ert]]);var eat=tat,rat={path:"/followup",name:"followup",component:da,meta:{module:"dashboard"},children:[{name:"followup/index",path:"",component:eat,meta:{module:"followup",title:"Follow Up Orders",gate:"follow_up_orders"}}]};const aat={class:"tw-pb-40"},sat={class:"tw-space-y-3"};function iat(t,e,r,a,i,l){const o=(0,s.up)("OnlineUsers"),n=(0,s.up)("IndexFilters"),d=(0,s.up)("IndexRevenue"),w=(0,s.up)("IndexStatistics");return(0,s.wg)(),(0,s.iD)("div",aat,[(0,s._)("div",sat,[(0,s.Wm)(o),(0,s.Wm)(n,{onUpdate:e[0]||(e[0]=t=>i.filters=t),onFilter:l.handleFilter},null,8,["onFilter"]),(0,s.Wm)(d,{statistics:i.statistics,fetching:i.fetching},null,8,["statistics","fetching"]),(0,s.Wm)(w,{statistics:i.statistics,fetching:i.fetching},null,8,["statistics","fetching"])])])}const lat={class:"tw-bg-white tw-p-5"},oat={class:"tw-flex tw-items-center tw-justify-between"},nat=(0,s._)("h1",{class:"tw-mb-3 tw-text-xl tw-font-medium"},"Users",-1),dat={class:"tw-relative tw-flex tw-items-center"},wat=(0,s._)("span",{class:"tw-text-xs tw-absolute tw-right-0 tw-top-0 -tw-translate-y-full tw-whitespace-nowrap"},"Show All",-1),cat={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-scale-75"},uat=(0,s._)("div",{class:"tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none peer-focus:tw-ring-4 peer-focus:tw-ring-orange-200 dark:peer-focus:tw-ring-orange-500 tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600 peer-checked:tw-bg-orange-500"},null,-1),pat={key:0,class:""},mat={class:"tw-flex tw-items-center tw-flex-wrap tw-gap-2"},gat=(0,s._)("div",{class:"tw-w-[120px] tw-h-[55px] tw-bg-neutral-300/10 tw-animate-pulse tw-rounded tw-border tw-grid tw-grid-cols-12"},null,-1),hat=[gat],fat={key:1,class:"tw-min-h-[50px]"},vat={class:"tw-flex tw-items-center tw-flex-wrap tw-gap-2"},yat={class:"py-2 px-3 tw-rounded tw-bg-white tw-shadow-sm tw-grid tw-grid-cols-12 tw-relative tw-overflow-hidden"},xat={class:"tw-col-span-12 tw-flex tw-items-center tw-gap-2 tw-font-medium tw-capitalize tw-text-sm tw-text-neutral-600 tw-whitespace-nowrap"},bat={key:0,class:"tw-w-full tw-pt-1 tw-rounded-full tw-bg-red-400 tw-absolute tw-top-0 tw-right-0"},_at={key:1,class:"tw-w-full tw-pt-1 tw-rounded-full tw-bg-green-500 tw-absolute tw-top-0 tw-right-0"},kat={key:2,class:"tw-w-full tw-pt-1 tw-rounded-full tw-bg-yellow-400 tw-absolute tw-top-0 tw-right-0"},Cat={class:"tw-font-bold"},Dat={class:"tw-col-span-12 tw-whitespace-nowrap tw-text-xs tw-mt-1"},Sat={key:0,class:"tw-text-red-500 tw-flex tw-items-center tw-gap-2"},zat={key:1},Uat={key:0,class:"tw-text-green-500 tw-flex tw-items-center tw-gap-2"},Lat={key:1,class:"tw-flex tw-items-center tw-gap-2"};function Pat(t,e,r,i,l,o){return(0,s.wg)(),(0,s.iD)("div",lat,[(0,s._)("div",oat,[nat,(0,s._)("div",dat,[wat,(0,s._)("label",cat,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=t=>l.showAll=t),class:"tw-sr-only tw-peer"},null,512),[[a.e8,l.showAll]]),uat])])]),l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",pat,[(0,s._)("div",mat,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(4,(t=>(0,s._)("div",{key:t},hat))),64))])])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",fat,[(0,s._)("div",vat,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.users,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t.id},[(0,s._)("div",yat,[(0,s._)("div",xat,[t.last_action?1==o.isOnline(o.lastSeen(t.last_action))?((0,s.wg)(),(0,s.iD)("div",_at)):((0,s.wg)(),(0,s.iD)("div",kat)):((0,s.wg)(),(0,s.iD)("div",bat)),(0,s._)("span",Cat,(0,et.zw)(t.firstname)+" "+(0,et.zw)(t.lastname),1)]),(0,s._)("div",Dat,[t.last_action?((0,s.wg)(),(0,s.iD)("div",zat,[1==o.isOnline(o.lastSeen(t.last_action))?((0,s.wg)(),(0,s.iD)("div",Uat," Online ")):((0,s.wg)(),(0,s.iD)("div",Lat,(0,et.zw)(o.lastSeen(t.last_action)),1))])):((0,s.wg)(),(0,s.iD)("div",Sat," Never Connected "))])])])))),128))])])):(0,s.kq)("",!0)])}var Aat={components:{},data(){return{isLoaded:!1,showAll:!1}},computed:{users(){return this.showAll?this.$store.getters["user/users"].filter((t=>"admin"!=t.role_name)).sort(((t,e)=>e.last_action?$P()(t.last_action).isAfter(e.last_action)?-1:1:-1)):this.$store.getters["user/users"].filter((t=>"admin"!=t.role_name)).sort(((t,e)=>e.last_action?$P()(t.last_action).isAfter(e.last_action)?-1:1:-1)).slice(0,8)}},methods:{getUsers(){X.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),this.isLoaded=!0}})).catch(this.$handleApiError)},lastSeen(t){let e=Date.parse(t.replace("-","/"))/1e3;return(0,Xa.x)(e)},isOnline(t){let e=["Just Now","1 minute ago","2 minute ago"];return e.includes(t)}},mounted(){this.getUsers()}};const Wat=(0,p.Z)(Aat,[["render",Pat]]);var $at=Wat;const Eat={class:"tw-bg-white"},qat={class:"tw-flex tw-items-center tw-gap-2 tw-bg-gray-50 tw-p-2 tw-pt-0 tw-rounded-b tw-w-fit"},Tat={class:"tw-p-5"};function Oat(t,e,r,a,i,l){const o=(0,s.up)("ConfirmationTab"),n=(0,s.up)("DeliveryTab");return(0,s.wg)(),(0,s.iD)("div",Eat,[(0,s._)("div",qat,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.active=1),class:(0,et.C_)([[1==i.active?"tw-bg-white tw-shadow-orange-300":"tw-bg-gray-100 hover:tw-bg-white"],"tw-px-5 tw-py-2.5 tw-duration-300 tw-font-medium tw-shadow tw-rounded tw-text-gray-600"])}," Confirmations ",2),(0,s._)("button",{onClick:e[1]||(e[1]=t=>i.active=2),class:(0,et.C_)([[2==i.active?"tw-bg-white tw-shadow-orange-300":"tw-bg-gray-100 hover:tw-bg-white"],"tw-px-5 tw-py-2.5 tw-duration-300 tw-font-medium tw-shadow tw-rounded tw-text-gray-600"])}," Delivery ",2)]),(0,s._)("div",Tat,[1==i.active?((0,s.wg)(),(0,s.j4)(o,{key:0,statistics:r.statistics,fetching:r.fetching},null,8,["statistics","fetching"])):(0,s.kq)("",!0),2==i.active?((0,s.wg)(),(0,s.j4)(n,{key:1,statistics:r.statistics,fetching:r.fetching},null,8,["statistics","fetching"])):(0,s.kq)("",!0)])])}const Vat={key:0,class:"tw-grid tw-gap-2 lg:tw-grid-cols-4 sm:tw-grid-cols-2 tw-grid-cols-1"},Iat=(0,s.uE)('<div class="tw-flex tw-justify-between tw-w-full"><div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-2.5 tw-bg-gray-200 tw-rounded-full tw-w-[50px] tw-mb-4"></div></div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-4 tw-bg-gray-200 tw-rounded-full tw-w-[30px] tw-mb-4"></div></div></div><div class="tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-bg-gray-200 tw-text-white"><div class="tw-bg-white tw-w-[25px] tw-h-[25px] tw-rounded"></div></div></div>',1),Fat=[Iat],Rat={key:1,class:"tw-grid tw-gap-2 lg:tw-grid-cols-4 sm:tw-grid-cols-2 tw-grid-cols-1"};function jat(t,e,r,a,i,l){const o=(0,s.up)("DashboardCard");return(0,s.wg)(),(0,s.iD)("div",null,[r.fetching?((0,s.wg)(),(0,s.iD)("div",Vat,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(4,(t=>(0,s._)("div",{key:t,class:"tw-bg-white tw-animate-pulse tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-[90px]"},Fat))),64))])):((0,s.wg)(),(0,s.iD)("div",Rat,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.statistics.confirmations,(t=>((0,s.wg)(),(0,s.j4)(o,{key:t.id,color:t.color,icon:t.icon,title:t.title,symbol:t.symbol,percentage:t.percentage,value:t.value},null,8,["color","icon","title","symbol","percentage","value"])))),128))]))])}const Nat={class:"tw-flex tw-justify-between"},Mat={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},Hat={class:"tw-text-gray-500 tw-uppercase tw-text-xs tw-font-bold"},Yat={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},Zat={class:"tw-text-gray-700 tw-text-xl tw-font-bold"};function Kat(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",{style:(0,et.j5)({borderColor:r.color}),class:"tw-bg-white tw-border tw-border-dashed tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-fit"},[(0,s._)("div",Nat,[(0,s._)("div",null,[(0,s._)("div",Mat,[(0,s._)("p",Hat,(0,et.zw)(r.title),1),void 0!=r.percentage?((0,s.wg)(),(0,s.iD)("span",{key:0,class:"tw-text-sm tw-font-medium tw-rounded tw-px-1 tw-text-white",style:(0,et.j5)({background:r.color})},(0,et.zw)(r.percentage.toFixed(2))+"%",5)):(0,s.kq)("",!0)]),(0,s._)("div",Yat,[(0,s._)("span",Zat,(0,et.zw)(r.value),1)])]),(0,s._)("div",{style:(0,et.j5)({background:r.color}),class:"tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-text-white"},[(0,s.Wm)(st.t,{style:(0,et.j5)(["Orders"==r.title&&{color:"#2ee1ff"}]),size:"x-large"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,et.zw)(r.icon),1)])),_:1},8,["style"])],4)])],4)])}var Bat={props:{icon:{required:!0},title:{required:!0},value:{required:!0},symbol:{default:"",required:!1},percentage:{required:!1},color:{required:!0,default:"#6b7280"}}};const Qat=(0,p.Z)(Bat,[["render",Kat]]);var Gat=Qat,Jat={components:{DashboardCard:Gat},props:{statistics:{required:!0},fetching:{required:!0}}};const Xat=(0,p.Z)(Jat,[["render",jat]]);var tst=Xat;const est={key:0,class:"tw-grid tw-gap-2 lg:tw-grid-cols-4 sm:tw-grid-cols-2 tw-grid-cols-1"},rst=(0,s.uE)('<div class="tw-flex tw-justify-between tw-w-full"><div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-2.5 tw-bg-gray-200 tw-rounded-full tw-w-[50px] tw-mb-4"></div></div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-4 tw-bg-gray-200 tw-rounded-full tw-w-[30px] tw-mb-4"></div></div></div><div class="tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-bg-gray-200 tw-text-white"><div class="tw-bg-white tw-w-[25px] tw-h-[25px] tw-rounded"></div></div></div>',1),ast=[rst],sst={key:1,class:"tw-grid tw-gap-2 lg:tw-grid-cols-4 sm:tw-grid-cols-2 tw-grid-cols-1"};function ist(t,e,r,a,i,l){const o=(0,s.up)("DashboardCard");return(0,s.wg)(),(0,s.iD)("div",null,[r.fetching?((0,s.wg)(),(0,s.iD)("div",est,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(4,(t=>(0,s._)("div",{key:t,class:"tw-bg-white tw-animate-pulse tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-[90px]"},ast))),64))])):((0,s.wg)(),(0,s.iD)("div",sst,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.statistics.delivery,(t=>((0,s.wg)(),(0,s.j4)(o,{key:t.id,color:t.color,icon:t.icon,title:t.title,symbol:t.symbol,percentage:t.percentage,value:t.value},null,8,["color","icon","title","symbol","percentage","value"])))),128))]))])}var lst={components:{DashboardCard:Gat},props:{statistics:{required:!0},fetching:{required:!0}}};const ost=(0,p.Z)(lst,[["render",ist]]);var nst=ost,dst={components:{ConfirmationTab:tst,DeliveryTab:nst},props:{statistics:{required:!0},fetching:{required:!0}},data(){return{active:1}}};const wst=(0,p.Z)(dst,[["render",Oat]]);var cst=wst;const ust={class:"tw-bg-white tw-p-5"},pst=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-mb-3 tw-text-xl tw-font-medium"},"Filters")],-1),mst={class:"tw-grid tw-grid-cols-12 tw-gap-4 tw-p-1"},gst={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},hst=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),fst=(0,s._)("option",{value:"all",selected:""},"All",-1),vst=["value"],yst={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},xst=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Delivery",-1),bst=(0,s._)("option",{value:"all",selected:""},"All",-1),_st=["value"],kst={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Cst=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Upsell",-1),Dst=(0,s._)("option",{value:"all",selected:""},"All",-1),Sst=(0,s._)("option",{value:"oui",class:"tw-capitalize"},"Yes",-1),zst=(0,s._)("option",{value:"non",class:"tw-capitalize"},"Non",-1),Ust=[Dst,Sst,zst],Lst={class:"tw-col-span-12 tw-flex tw-justify-end tw-gap-2"},Pst=(0,s._)("svg",{class:"tw-stroke-gray-500",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59L7.11 5.7A.996.996 0 1 0 5.7 7.11L10.59 12L5.7 16.89a.996.996 0 1 0 1.41 1.41L12 13.41l4.89 4.89a.996.996 0 1 0 1.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"})],-1),Ast=(0,s._)("span",null,"Clear",-1),Wst=[Pst,Ast],$st=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[(0,s._)("path",{fill:"#fff",d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})],-1),Est=(0,s._)("span",null,"Filter",-1),qst=[$st,Est];function Tst(t,e,r,i,l,o){const n=(0,s.up)("DateFilter"),d=(0,s.up)("AgentFilter"),w=(0,s.up)("AffectationFilter"),c=(0,s.up)("ProductFilter");return(0,s.wg)(),(0,s.iD)("div",ust,[pst,(0,s._)("div",mst,[(0,s.Wm)(n,{from:l.filters.created_from,"onUpdate:from":e[0]||(e[0]=t=>l.filters.created_from=t),to:l.filters.created_to,"onUpdate:to":e[1]||(e[1]=t=>l.filters.created_to=t),label:"Created"},null,8,["from","to"]),(0,s.Wm)(n,{from:l.filters.dropped_from,"onUpdate:from":e[2]||(e[2]=t=>l.filters.dropped_from=t),to:l.filters.dropped_to,"onUpdate:to":e[3]||(e[3]=t=>l.filters.dropped_to=t),label:"Dropped"},null,8,["from","to"]),(0,s.Wm)(d,{filters:l.filters,onUpdate:e[4]||(e[4]=t=>l.filters=t)},null,8,["filters"]),(0,s._)("div",gst,[hst,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>l.filters.confirmation=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[fst,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,et.C_)([[t.text,null==t.value&&"!tw-text-green-500"],"tw-capitalize"]),value:t.value,key:t.id},(0,et.zw)(t.name),11,vst)))),128))],512),[[a.bM,l.filters.confirmation]])]),(0,s.Wm)(w,{filters:l.filters,onUpdate:e[6]||(e[6]=t=>l.filters=t)},null,8,["filters"]),(0,s._)("div",yst,[xst,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>l.filters.delivery=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[bst,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,et.C_)([[t.text,null==t.value&&"!tw-text-gray-500"],"tw-capitalize"]),value:t.value,key:t.id},(0,et.zw)(t.name),11,_st)))),128))],512),[[a.bM,l.filters.delivery]])]),(0,s.Wm)(c,{filters:l.filters,onUpdate:e[8]||(e[8]=t=>l.filters=t)},null,8,["filters"]),(0,s._)("div",kst,[Cst,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>l.filters.upsell=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},Ust,512),[[a.bM,l.filters.upsell]])]),(0,s._)("div",Lst,[(0,s._)("button",{onClick:e[10]||(e[10]=(...t)=>o.clear&&o.clear(...t)),class:"tw-flex tw-items-center tw-text-gray-500 tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-transition-colors tw-duration-200 tw-bg-gray-200 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-300 darkx:hover:tw-bg-gray-500 darkx:tw-bg-gray-600"},Wst),(0,s._)("button",{onClick:e[11]||(e[11]=(...t)=>o.filter&&o.filter(...t)),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},qst)])])])}const Ost={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Vst=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Affectation",-1),Ist=["value"],Fst=(0,s._)("option",{value:"all"},"All",-1),Rst=(0,s._)("option",{value:""},"No Delivery",-1),jst=["value"];function Nst(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",Ost,[Vst,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...r.filters,affectation:e.target.value})),value:r.filters.affectation,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[Fst,Rst,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,et.zw)(t.firstname)+" "+(0,et.zw)(t.lastname),9,jst)))),128))],40,Ist)])}var Mst={props:{filters:{required:!0}},data(){return{}},computed:{users(){return this.$store.getters["user/users"]},deliveries(){return this.fetched?this.users.filter((t=>"delivery"==t.role.name)):[]},fetched(){return this.$store.getters["user/fetched"]}}};const Hst=(0,p.Z)(Mst,[["render",Nst]]);var Yst=Hst;const Zst={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Kst=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Agent",-1),Bst=["value"],Qst=(0,s._)("option",{value:"all"},"All",-1),Gst=(0,s._)("option",{value:""},"No Agent",-1),Jst=["value"];function Xst(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",Zst,[Kst,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...r.filters,agente_id:e.target.value})),value:r.filters.agente_id,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[Qst,Gst,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.agents,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,et.zw)(t.firstname)+" "+(0,et.zw)(t.lastname),9,Jst)))),128))],40,Bst)])}var tit={props:{filters:{required:!0}},data(){return{}},computed:{users(){return this.$store.getters["user/users"]},agents(){return this.fetched?this.users.filter((t=>"agente"==t.role.name)):[]},fetched(){return this.$store.getters["user/fetched"]}}};const eit=(0,p.Z)(tit,[["render",Xst]]);var rit=eit;const ait={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},sit=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Product",-1),iit=["value"],lit=(0,s._)("option",{value:"all"},"All",-1),oit=["value"];function nit(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",ait,[sit,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...r.filters,product_id:e.target.value})),value:r.filters.product_id,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[lit,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.products,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,et.zw)(t.name),9,oit)))),128))],40,iit)])}var dit={props:{filters:{required:!0}},data(){return{}},computed:{products(){return this.$store.getters["product/products"]},fetched(){return this.$store.getters["product/fetched"]}}};const wit=(0,p.Z)(dit,[["render",nit]]);var cit=wit;const uit={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},pit={for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},mit=(0,s.uE)('<option value="all" selected>All</option><option value="today" class="tw-capitalize">Today</option><option value="yesterday" class="tw-capitalize">Yesterday</option><option value="this-month" class="tw-capitalize">This Month</option><option value="last-month" class="tw-capitalize">Last Month</option><option value="custom" class="tw-capitalize">Custom</option>',6),git=[mit],hit={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},fit={for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},vit=["value"],yit={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},xit={for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},bit=["value"];function _it(t,e,r,i,l,o){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",uit,[(0,s._)("label",pit,(0,et.zw)(r.label),1),(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.filterBy=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},git,512),[[a.bM,l.filterBy]])]),"custom"==l.filterBy?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("div",hit,[(0,s._)("label",fit,(0,et.zw)(r.label)+" From",1),(0,s._)("input",{onInput:e[1]||(e[1]=t=>o.handleChange(t,"from")),value:r.from,type:"date",class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,vit)]),(0,s._)("div",yit,[(0,s._)("label",xit,(0,et.zw)(r.label)+" To",1),(0,s._)("input",{onInput:e[2]||(e[2]=t=>o.handleChange(t,"to")),value:r.to,type:"date",class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,bit)])],64)):(0,s.kq)("",!0)],64)}var kit={props:{from:{required:!0},to:{required:!0},label:{required:!0}},data(){return{filterBy:"all"}},watch:{filterBy(t){let e=null;switch(t){case"all":this.setFrom(null),this.setTo(null);break;case"today":e=$P()().format("YYYY-MM-DD"),this.setFrom(e),this.setTo(e);break;case"yesterday":e=$P()().subtract(1,"days").format("YYYY-MM-DD"),this.setFrom(e),this.setTo(e);break;case"this-month":var r=$P()().startOf("month").format("YYYY-MM-DD"),a=$P()().endOf("month").format("YYYY-MM-DD");this.setFrom(r),this.setTo(a);break;case"last-month":r=$P()().subtract(1,"months").startOf("month").format("YYYY-MM-DD"),a=$P()().subtract(1,"months").endOf("month").format("YYYY-MM-DD"),this.setFrom(r),this.setTo(a);break;default:break}}},methods:{setFrom(t){this.$emit("update:from",t)},setTo(t){this.$emit("update:to",t)},handleChange(t,e){switch(e){case"from":this.setFrom(t.target.value);break;case"to":this.setTo(t.target.value);break;default:break}}}};const Cit=(0,p.Z)(kit,[["render",_it]]);var Dit=Cit,Sit={components:{AffectationFilter:Yst,AgentFilter:rit,ProductFilter:cit,DateFilter:Dit},props:{},data(){return{confirmations:qn,deliveries:Vn,dateFilter:["",""],filters:{}}},watch:{filters:{deep:!0,handler(t){console.log(t)}}},methods:{clear(){this.filters={created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"all",delivery:"all",product_id:"all"}},filter(){this.$emit("update",this.filters),this.$emit("filter")}},mounted(){this.clear(),this.filter()}};const zit=(0,p.Z)(Sit,[["render",Tst]]);var Uit=zit;const Lit={key:0},Pit={class:"tw-bg-white tw-p-5 tw-grid tw-grid-cols-4 tw-gap-5"};function Ait(t,e,r,a,i,l){const o=(0,s.up)("RevenueCard");return!r.fetching&&r.statistics.revenue?.length>0?((0,s.wg)(),(0,s.iD)("div",Lit,[(0,s._)("div",Pit,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.statistics.revenue,(t=>((0,s.wg)(),(0,s.j4)(o,{key:t.id,icon:t.icon,title:t.title,value:t.value,color:t.color},null,8,["icon","title","value","color"])))),128))])])):(0,s.kq)("",!0)}const Wit={class:"tw-bg-white tw-border tw-border-solid tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-fit"},$it={class:"tw-flex tw-justify-between"},Eit={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},qit={class:"tw-text-gray-500 tw-uppercase tw-text-xs tw-font-bold"},Tit={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},Oit={class:"tw-text-gray-700 tw-text-xl tw-font-bold"};function Vit(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",Wit,[(0,s._)("div",$it,[(0,s._)("div",null,[(0,s._)("div",Eit,[(0,s._)("p",qit,(0,et.zw)(r.title),1),void 0!=r.percentage?((0,s.wg)(),(0,s.iD)("span",{key:0,class:"tw-text-sm tw-font-medium tw-rounded tw-px-1 tw-text-white",style:(0,et.j5)({background:r.color})},(0,et.zw)(r.percentage.toFixed(2))+"%",5)):(0,s.kq)("",!0)]),(0,s._)("div",Tit,[(0,s._)("span",Oit,(0,et.zw)(l.format(r.value)),1)])]),(0,s._)("div",{style:(0,et.j5)({background:r.color}),class:"tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-text-white"},[(0,s.Wm)(st.t,{style:(0,et.j5)(["Orders"==r.title&&{color:"#2ee1ff"}]),size:"x-large"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,et.zw)(r.icon),1)])),_:1},8,["style"])],4)])])])}var Iit={props:{icon:{required:!0},title:{required:!0},value:{required:!0},symbol:{default:"",required:!1},percentage:{required:!1},color:{required:!0,default:"#6b7280"}},methods:{format(t){return Intl.NumberFormat("en",{style:"currency",currency:"USD",notation:"compact",compactDisplay:"long"}).format(t)}}};const Fit=(0,p.Z)(Iit,[["render",Vit]]);var Rit=Fit,jit={components:{RevenueCard:Rit},props:{statistics:{required:!0},fetching:{required:!0}}};const Nit=(0,p.Z)(jit,[["render",Ait]]);var Mit=Nit,Hit={components:{OnlineUsers:$at,IndexStatistics:cst,IndexFilters:Uit,IndexRevenue:Mit},data(){return{filters:null,statistics:null,fetching:!0}},computed:{user(){return this.$store.getters["user/user"]}},methods:{handleFilter(){this.fetching=!0,sL.statistics(this.filters).then((t=>{"SUCCESS"==t.data.code&&(this.statistics=t.data.data.statistics,this.fetching=!1)})).catch(this.$handleApiError)}},mounted(){"admin"!=this.user.role&&this.$router.push({name:"404"})}};const Yit=(0,p.Z)(Hit,[["render",iat]]);var Zit=Yit;const Kit={class:"tw-w-full tw-grid tw-gap-2 lg:tw-grid-cols-4 sm:tw-grid-cols-2 tw-grid-cols-1"},Bit=(0,s.uE)('<div class="tw-flex tw-justify-between tw-w-full"><div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-2.5 tw-bg-gray-200 tw-rounded-full tw-w-[50px] tw-mb-4"></div></div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-4 tw-bg-gray-200 tw-rounded-full tw-w-[30px] tw-mb-4"></div></div></div><div class="tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-bg-gray-200 tw-text-white"><div class="tw-bg-white tw-w-[25px] tw-h-[25px] tw-rounded"></div></div></div>',1),Qit=[Bit];function Git(t,e,r,a,i,l){const o=(0,s.up)("DashCard");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",Kit,[i.fetching?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},(0,s.Ko)(4,(t=>(0,s._)("div",{key:t,class:"tw-bg-white tw-animate-pulse tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-[90px]"},Qit))),64)):((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(i.dashes,(t=>((0,s.wg)(),(0,s.j4)(o,{key:t.id,color:t.color,icon:t.icon,title:t.title,symbol:t.symbol,percentage:t.percentage,value:t.value},null,8,["color","icon","title","symbol","percentage","value"])))),128))])])}const Jit={class:"tw-bg-white tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-fit"},Xit={class:"tw-flex tw-justify-between"},tlt={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},elt={class:"tw-text-gray-400 tw-uppercase tw-text-xs tw-font-medium"},rlt={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},alt={class:"tw-text-gray-700 tw-text-xl tw-font-bold"};function slt(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",Jit,[(0,s._)("div",Xit,[(0,s._)("div",null,[(0,s._)("div",tlt,[(0,s._)("p",elt,(0,et.zw)(r.title),1),r.percentage?((0,s.wg)(),(0,s.iD)("span",{key:0,class:"tw-text-xs tw-font-medium tw-rounded tw-px-1 tw-text-white",style:(0,et.j5)({background:r.color})},(0,et.zw)(r.percentage.toFixed(2))+"%",5)):(0,s.kq)("",!0)]),(0,s._)("div",rlt,[(0,s._)("span",alt,(0,et.zw)(r.value),1)])]),(0,s._)("div",{style:(0,et.j5)({background:r.color}),class:"tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-text-white"},[(0,s.Wm)(st.t,{style:(0,et.j5)(["Orders"==r.title&&{color:"#2ee1ff"}]),size:"x-large"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,et.zw)(r.icon),1)])),_:1},8,["style"])],4)])])])}var ilt={props:{icon:{required:!0},title:{required:!0},value:{required:!0},symbol:{default:"",required:!1},percentage:{required:!1},color:{required:!0,default:"#6b7280"}}};const llt=(0,p.Z)(ilt,[["render",slt]]);var olt=llt,nlt={components:{DashCard:olt},data(){return{fetching:!0,dashes:[]}},mounted(){q.statistics().then((t=>{this.dashes=t.data.data.statistics,this.fetching=!1}))}};const dlt=(0,p.Z)(nlt,[["render",Git]]);var wlt=dlt,clt={name:"dashboards",path:"/dashboards",component:da,meta:{module:"dashboards",gate:"all"},children:[{name:"dashboards/admin",path:"admin",component:Zit,meta:{module:"dashboards",subModule:"dashboards/admin",title:"Dashboard",gate:"all"}},{name:"dashboards/agent",path:"agent",component:wlt,meta:{module:"dashboards",subModule:"dashboards/agent",title:"Dashboard",gate:"all"}}]};const ult=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Page not found")])],-1),plt={class:"py-5 px-5 tw-border bg-white tw-w-full tw-flex tw-items-center tw-justify-center tw-rounded-md tw-min-h-[500px]"},mlt={class:"tw-flex tw-items-center tw-flex-col"},glt=(0,s._)("div",{class:"md:tw-text-6xl tw-text-4xl tw-font-black text-primary-color"},"404",-1),hlt={class:"tw-w-fit tw-flex tw-items-center md:tw-text-2xl tw-text-xl mt-md-5 mt-3 tw-gap-2"},flt=(0,s._)("div",{class:"tw-max-w-[400px] tw-text-center md:tw-text-lg tw-text-sm mt-5"}," The page you requested was not found or you don't have the permission to access it. ",-1);function vlt(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[ult,(0,s._)("div",plt,[(0,s._)("div",mlt,[glt,(0,s._)("div",hlt,[(0,s.Wm)(st.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-alert-circle")])),_:1}),(0,s.Uk)(" Oops! Page not found! ")]),flt])])])}var ylt={};const xlt=(0,p.Z)(ylt,[["render",vlt]]);var blt=xlt;const _lt={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"};function klt(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",_lt,[(0,s._)("div",null,[(0,s.Wm)(rt.T,{onClick:l.sendRequest,loading:i.isLoading,variant:"flat",color:"primary-color"},{default:(0,s.w5)((()=>[(0,s.Uk)("Send Request")])),_:1},8,["onClick","loading"])])])])}const Clt="api/orders/count",Dlt="get";var Slt={name:"Orders from Youcan",sheet_id:"QSDfFsqdDSQDfrsqFDSRHTRzer",sheet_name:"Youcan-Orders",auto_fetch:!0},zlt={data(){return{isLoading:!1,test:Slt}},methods:{async sendRequest(){switch(this.isLoading=!0,await $.getCookie(),Dlt){case"get":A.get(Clt).then((t=>{console.log("---- Success Response ----"),console.log(`---- Code ${t.status} ----`),console.log(t.data)}),(t=>{this.$handleApiError(t),console.log("---- Failed Response ----"),console.log(`---- Code ${t?.response.status} ----`),console.log(t?.response?.data)})).finally((()=>this.isLoading=!1));break;case"post":A.post(Clt,Slt).then((t=>{console.log("---- Success Response ----"),console.log(`---- Code ${t.status} ----`),console.log(t.data)}),(t=>{this.$handleApiError(t),console.log("---- Failed Response ----"),console.log(`---- Code ${t?.response.status} ----`),console.log(t?.response?.data)})).finally((()=>this.isLoading=!1));break;case"delete":A["delete"](Clt).then((t=>{console.log("---- Success Response ----"),console.log(`---- Code ${t.status} ----`),console.log(t.data)}),(t=>{this.$handleApiError(t),console.log("---- Failed Response ----"),console.log(`---- Code ${t?.response.status} ----`),console.log(t?.response?.data)})).finally((()=>this.isLoading=!1));break;default:break}}}};const Ult=(0,p.Z)(zlt,[["render",klt]]);var Llt=Ult;const Plt=[Nt,tp,clt,Gy,aC,sZ,sX,_1,Q4,g8,A6,U9,Ret,rat,{name:"default",path:"/test",component:da,children:[{name:"test",path:"",component:Llt,meta:{title:"Test abro m3a rasek",module:"test",gate:"all"}}]},{name:"not-found",path:"/404",component:da,meta:{title:"Not Found"},children:[{name:"404",path:"",component:blt}]},{name:"catch-all",path:"/:pathMatch(.*)",beforeEnter:(t,e,r)=>r({name:"404"}),meta:{title:"Not Found"}}],Alt=(0,h.p7)({history:(0,h.PO)("/"),routes:Plt});Alt.beforeEach(((t,e)=>tt(t,e,Alt)));var Wlt=Alt,$lt=(r(9773),r(8957));const Elt={colors:{"primary-color":"#FF9F43","secondary-color":"#1B2850","primary-indigo":"#1B2850","primary-orange":"#FF9F43","primary-blue":"#00CFE8","primary-green":"#28C76F"}};var qlt=(0,$lt.Rd)({theme:{defaultTheme:"customTheme",themes:{customTheme:Elt}}});const Tlt={install(t){t.config.globalProperties.$can=function(t){const e=this.$store.getters["user/permissions"];return e.includes(t)}}};var Olt=Tlt;const Vlt={install(t){t.config.globalProperties.$alert=function(t){this.$store.dispatch("alert/toggleAlert",t)}}};var Ilt=Vlt;const Flt={install(t){t.config.globalProperties.$handleApiError=function(e){const r=e?.response?.data?.code;let a="error",s="Something wrong happened. Try again",i=!0;const l=["VALIDATION_ERROR","NOT_ACTIVE_ERROR","INVALID_CREDENTIALS","PERMISSION_DENIED"];switch(l.includes(r)&&(i=!1),console.log(e),"ERR_NETWORK"==e.code&&(s="Network error. Check your connection"),r){case"NOT_ALLOWED":s="Your are not allowed to this resources";break;case"ERROR":s=e?.response?.data.message;break;case"NOT_AUTHENTICATED":s="Your session expired",setTimeout((()=>{t.config.globalProperties.$store.dispatch("user/logout"),t.config.globalProperties.$router.push("/login")}),2e3);break;case"NOT_FOUND":i=!1,t.config.globalProperties.$router.push({name:"404"});break;case"RELOAD":i=!1,console.log("reload"),location.reload(!0);break;case"HIDE_APP":i=!1,document.getElementById("app").innerHTML="";break;default:break}return i&&t.config.globalProperties.$alert({type:a,title:s}),e}}};var Rlt=Flt,jlt=r(7025);const Nlt=t=>((0,s.dD)("data-v-ff4afcd0"),t=t(),(0,s.Cn)(),t),Mlt={class:"tw-min-h-[500px] tw-flex tw-items-center tw-justify-center tw-bg-white tw-rounded-md tw-border"},Hlt=Nlt((()=>(0,s._)("div",{class:"tw-w-[40px] tw-h-[40px] tw-animate-spin loading tw-border-4 tw-border-x-transparent tw-border-t-transparent tw-rounded-full"},null,-1))),Ylt=[Hlt];function Zlt(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",Mlt,Ylt)}var Klt={};const Blt=(0,p.Z)(Klt,[["render",Zlt],["__scopeId","data-v-ff4afcd0"]]);var Qlt=Blt;const Glt={class:"tw-flex tw-justify-center tw-items-center"},Jlt=(0,s._)("div",{class:"tw-relative tw-w-8 tw-h-8 tw-animate-spin tw-rounded-full tw-bg-gradient-to-r tw-from-purple-400 tw-via-blue-500 tw-to-red-400"},[(0,s._)("div",{class:"tw-absolute tw-top-1/2 tw-left-1/2 tw-transform tw--translate-x-1/2 tw--translate-y-1/2 tw-w-7 tw-h-7 tw-bg-white tw-rounded-full tw-border-2 tw-border-white"})],-1),Xlt=[Jlt];function tot(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",Glt,Xlt)}var eot={};const rot=(0,p.Z)(eot,[["render",tot]]);var aot=rot;const sot={key:0},iot={ref:"popup",class:"tw-fixed tw-top-0 tw-left-0 tw-z-[50999] tw-right-0 tw-bottom-0 tw-flex tw-items-center tw-justify-center"},lot={name:"body",class:"tw-z-[50999] tw-bg-white md:tw-min-w-[300px] md:tw-max-w-[800px] tw-flex tw-flex-col md:tw-min-h-[170px] tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5"},oot=["innerHTML"],not={key:1,class:"tw-text-lg tw-text-gray-700"},dot={class:"tw-flex tw-gap-3 tw-justify-end mt-5"};function wot(t,e,r,a,i,l){return r.visible?((0,s.wg)(),(0,s.iD)("div",sot,[((0,s.wg)(),(0,s.j4)(s.lR,{to:"body"},[(0,s._)("div",null,[(0,s._)("div",iot,[(0,s._)("div",lot,[(0,s._)("div",{class:(0,et.C_)(["tw-font-medium tw-text-lg mb-5 tw-text-start",l.currentType.class])},[(0,s.Wm)(st.t,{size:"small",class:"mr-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,et.zw)(l.currentType.icon),1)])),_:1}),(0,s._)("span",null,(0,et.zw)(r.title),1)],2),r.body?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"tw-text-center tw-text-lg tw-text-gray-700",innerHTML:r.body},null,8,oot)):((0,s.wg)(),(0,s.iD)("div",not,[(0,s.WI)(t.$slots,"default")])),(0,s.Wm)(lr.C),(0,s._)("div",dot,[(0,s.Wm)(rt.T,{variant:"flat",color:"grey",onClick:e[0]||(e[0]=t=>l.resolve(!1))},{default:(0,s.w5)((()=>[(0,s.Uk)("Cancel")])),_:1}),r.noConfirm?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(rt.T,{key:0,loading:r.loading,variant:"flat",color:r.btnColor?r.btnColor:"red",onClick:e[1]||(e[1]=t=>l.resolve(!0))},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","color"]))])]),(0,s._)("div",{onClick:e[2]||(e[2]=t=>l.resolve(!1)),class:(0,et.C_)(["tw-duration-300 tw-absolute tw-top-0 tw-left-0 tw-w-full tw-h-full tw-bg-neutral-900/50 tw-opacity-0",{"!tw-opacity-100":r.visible}])},null,2)],512)])]))])):(0,s.kq)("",!0)}var cot={props:["visible","loading","title","body","type","noConfirm","btnColor"],data(){return{show:!0,types:{warning:{class:"tw-text-orange-400",icon:"mdi-alert-circle-outline"},info:{class:"tw-text-blue-400",icon:"mdi-information-outline"}}}},watch:{visible(t){this.show=t}},methods:{resolve(t){this.$emit("resolved",t)}},computed:{currentType(){return this.types[this.type]}}};const uot=(0,p.Z)(cot,[["render",wot]]);var pot=uot;const mot={key:0},got={ref:"popup",class:"tw-fixed tw-top-0 tw-left-0 tw-z-[50999] tw-right-0 tw-bottom-0 tw-flex tw-items-center tw-justify-center"};function hot(t,e,r,i,l,o){return r.visible?((0,s.wg)(),(0,s.iD)("div",mot,[((0,s.wg)(),(0,s.j4)(s.lR,{to:".my-application"},[(0,s._)("div",null,[(0,s._)("div",got,[(0,s._)("div",{name:"body",onClick:e[0]||(e[0]=(0,a.iM)((t=>o.resolve(!1)),["self"])),class:"tw-z-[50999] tw-w-full md:tw-min-w-[300px] tw-overflow-y-auto tw-max-h-screen tw-flex tw-flex-col md:tw-min-h-[170px]"},[(0,s.WI)(t.$slots,"default")]),(0,s._)("div",{onClick:e[1]||(e[1]=t=>o.resolve(!1)),class:(0,et.C_)(["tw-duration-300 tw-absolute tw-top-0 tw-left-0 tw-w-full tw-h-full tw-bg-neutral-900/50 tw-opacity-0",{"!tw-opacity-100":r.visible}])},null,2)],512)])]))])):(0,s.kq)("",!0)}var fot={props:["visible","loading","title","body","type","noConfirm","btnColor"],data(){return{show:!0,types:{warning:{class:"tw-text-orange-400",icon:"mdi-alert-circle-outline"},info:{class:"tw-text-blue-400",icon:"mdi-information-outline"}}}},watch:{visible(t){this.show=t}},methods:{resolve(t){this.$emit("cancel",t)}},computed:{currentType(){return this.types[this.type]}}};const vot=(0,p.Z)(fot,[["render",hot]]);var yot=vot,xot=r(2340),bot=r(5781),_ot=r.n(bot);const kot={key:0},Cot={ref:"popup",class:"tw-fixed tw-top-0 tw-left-0 tw-z-[50999] tw-right-0 tw-bottom-0 tw-flex tw-items-center tw-justify-center"};function Dot(t,e,r,i,l,o){return r.visible?((0,s.wg)(),(0,s.iD)("div",kot,[((0,s.wg)(),(0,s.j4)(s.lR,{to:"body"},[(0,s._)("div",null,[(0,s._)("div",Cot,[(0,s.Wm)($t.Z5,null,{default:(0,s.w5)((()=>[l.showContent?((0,s.wg)(),(0,s.iD)("div",{key:0,onClick:e[0]||(e[0]=(0,a.iM)((t=>o.resolve(!1)),["self"])),class:"tw-z-[50999] tw-w-full md:tw-min-w-[300px] !tw-overflow-auto !tw-max-h-screen"},[(0,s.WI)(t.$slots,"default")])):(0,s.kq)("",!0)])),_:3}),(0,s._)("div",{onClick:e[1]||(e[1]=t=>o.resolve(!1)),class:(0,et.C_)(["tw-duration-300 tw-absolute tw-top-0 tw-left-0 tw-w-full tw-h-full tw-backdrop-blur-sm tw-bg-black/20 tw-opacity-0",{"!tw-opacity-100":r.visible}])},null,2)],512)])]))])):(0,s.kq)("",!0)}var Sot={props:{visible:{required:!0,default:!1},closeable:{required:!1,default:!0}},data(){return{showContent:!1}},watch:{visible(t){t?setTimeout((()=>{this.showContent=t}),0):this.showContent=t}},methods:{resolve(t){this.closeable&&this.$emit("cancel",t)}},computed:{},mounted(){this.showContent=this.visible},unmounted(){}};const zot=(0,p.Z)(Sot,[["render",Dot]]);var Uot=zot,Lot=(0,a.ri)(g).use(Wlt).use(G).use(qlt).use(Olt).use(Ilt).use(Rlt).use(jlt.Z).component("LoadingAnimation",Qlt).component("Loading",aot).component("Popup",pot).component("PopupFull",yot).component("VueDatePicker",xot.Z).component("downloadCsv",_ot()).component("popupNew",Uot).mount("#app")}},e={};function r(a){var s=e[a];if(void 0!==s)return s.exports;var i=e[a]={id:a,loaded:!1,exports:{}};return t[a].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=t,function(){var t=[];r.O=function(e,a,s,i){if(!a){var l=1/0;for(w=0;w<t.length;w++){a=t[w][0],s=t[w][1],i=t[w][2];for(var o=!0,n=0;n<a.length;n++)(!1&i||l>=i)&&Object.keys(r.O).every((function(t){return r.O[t](a[n])}))?a.splice(n--,1):(o=!1,i<l&&(l=i));if(o){t.splice(w--,1);var d=s();void 0!==d&&(e=d)}}return e}i=i||0;for(var w=t.length;w>0&&t[w-1][2]>i;w--)t[w]=t[w-1];t[w]=[a,s,i]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){r.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,a){var s,i,l=a[0],o=a[1],n=a[2],d=0;if(l.some((function(e){return 0!==t[e]}))){for(s in o)r.o(o,s)&&(r.m[s]=o[s]);if(n)var w=n(r)}for(e&&e(a);d<l.length;d++)i=l[d],r.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return r.O(w)},a=self["webpackChunkproduction"]=self["webpackChunkproduction"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=r.O(void 0,[998],(function(){return r(5155)}));a=r.O(a)})();
//# sourceMappingURL=app.a8d6eba4.js.map