(function(){var t={6700:function(t,e,s){var a={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":6649,"./is.js":6649,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":6956,"./oc-lnc.js":6956,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":9304,"./th.js":9304,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function i(t){var e=r(t);return s(e)}function r(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}i.keys=function(){return Object.keys(a)},i.resolve=r,t.exports=i,i.id=6700},8306:function(t,e,s){"use strict";var a=s(9242),i=s(3396),r=s(7718);function l(t,e,s,a,l,o){const n=(0,i.up)("router-view");return(0,i.wg)(),(0,i.j4)(r.q,{class:"my-application"},{default:(0,i.w5)((()=>[(0,i.Wm)(n)])),_:1})}var o=s(7139),n={name:"App",data:()=>({theme:"light"}),methods:{...(0,o.nv)("user",["setIsLoggedIn","setPermissions"])},mounted(){}},d=s(89);const w=(0,d.Z)(n,[["render",l],["__scopeId","data-v-e47c86e2"]]);var c=w,u=s(2483);let p={roles:localStorage.getItem("roles")?JSON.parse(localStorage.getItem("roles")):[],user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):[],isLoggedIn:"true"==localStorage.getItem("isLoggedIn"),permissions:localStorage.getItem("permissions")?JSON.parse(localStorage.getItem("permissions")):[],users:[],agents:[],deliveries:[],fetched:!1,fetchedRoles:!1};var m={name:"user",namespaced:!0,state:p,getters:{fetched:t=>t.fetched,fetchedRoles:t=>t.fetchedRoles,isLoggedIn:t=>t.isLoggedIn,permissions:t=>t.permissions,user:t=>t.user,users:t=>t.users,roles:t=>t.roles,agents:t=>t.agents,deliveries:t=>t.deliveries},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_FETCHED_ROLES:(t,e)=>{t.fetchedRoles=e},SET_IS_LOGGED_IN:(t,e)=>{localStorage.setItem("isLoggedIn",e),t.isLoggedIn=e},SET_USER:(t,e)=>{localStorage.setItem("user",JSON.stringify(e)),t.user=e},SET_USERS:(t,e)=>{t.users=e},SET_PERMISSIONS:(t,e)=>{localStorage.setItem("permissions",JSON.stringify(e)),t.permissions=e},SET_ROLES:(t,e)=>{localStorage.setItem("roles",JSON.stringify(e)),t.roles=e},SET_DELIVERIES:(t,e)=>{t.deliveries=e},SET_AGENTS:(t,e)=>{t.agents=e}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setFetchedRoles:({commit:t},e)=>{t("SET_FETCHED_ROLES",e)},setUser:({commit:t},e)=>{t("SET_USER",e)},setUsers:({commit:t},e)=>{t("SET_USERS",e)},setAgents:({commit:t},e)=>{t("SET_AGENTS",e)},setDeliveries:({commit:t},e)=>{t("SET_DELIVERIES",e)},setIsLoggedIn:({commit:t},e)=>{t("SET_IS_LOGGED_IN",e)},setPermissions:({commit:t},e)=>{t("SET_PERMISSIONS",e)},setRoles:({commit:t},e)=>{t("SET_ROLES",e)},logout:({commit:t})=>{t("SET_USER",{}),t("SET_IS_LOGGED_IN",!1),t("SET_PERMISSIONS",[]),t("SET_ROLES",[])}}},h={name:"alert",namespaced:!0,state:{active:!1,alert:{type:"success",title:"Toast",body:"Hello body"}},getters:{alert:t=>t},mutations:{TOGGLE_TOAST:(t,e)=>{t.alert=e,t.active=!0,setTimeout((()=>{t.active=!1}),4500)}},actions:{toggleAlert:({commit:t},e)=>{t("TOGGLE_TOAST",e)}}};s(7658);let g={products:[],fetched:!1};var f={name:"product",namespaced:!0,state:g,getters:{products:t=>t.products,fetched:t=>t.fetched},mutations:{SET_PRODUCTS:(t,e)=>{t.products=e},ADD_PRODUCT:(t,e)=>{t.products.push(e)},SET_FETCHED:(t,e)=>{t.fetched=e}},actions:{setProducts:({commit:t},e)=>{t("SET_PRODUCTS",e)},addProduct:({commit:t},e)=>{t("ADD_PRODUCT",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)}}};s(541);let v={fetched:!1,sales:[]};var y={name:"sale",namespaced:!0,state:v,getters:{sales:t=>t.sales,fetched:t=>t.fetched},mutations:{SET_SALES:(t,e)=>{t.sales=e},SET_FETCHED:(t,e)=>{t.fetched=e},UPDATE_SALE:(t,e)=>{t.sales=t.sales.map((t=>t.id===e.id?e.sale:t))},ADD_SALE:(t,e)=>{t.sales.unshift(e)},ADD_SALES:(t,e)=>{t.sales=[...e,...t.sales]},UPDATE_CONFIRMATION:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,console.log("sale updated")),t)))},UPDATE_UPSELL:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.upsell=e.upsell,console.log("sale updated")),t)))},UPDATE_AFFECTATION:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.affectation=e.affectation,null!=e.affectation?t.delivery="dispatch":t.delivery=null,console.log("sale updated")),t)))},UPDATE_NOTE:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.note=e.note,console.log("sale updated")),t)))},UPDATE_CONFIRMATION_WITH_NOTE:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,t.note=e.note,console.log("order updated")),t)))},UPDATE_DELIVERY:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.delivery=e.delivery,console.log("sale updated")),t)))},RESET_SALES:(t,e)=>{t.sales=t.sales.map((t=>(e.includes(t.id)&&(t.agente_id=null,t.upsell=null,t.confirmation=null,t.affectation=null,t.note=null,t.note_d=null,t.delivery=null,t.reported_agente_date=null,t.reported_agente_note=null,t.reported_delivery_date=null,t.reported_delivery_note=null),t)))}},actions:{setSales:({commit:t},e)=>{t("SET_SALES",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},update:({commit:t},e)=>{t("UPDATE_SALE",e)},add:({commit:t},e)=>{t("ADD_SALE",e)},addSales:({commit:t},e)=>{t("ADD_SALES",e)},updateConfirmation:({commit:t},e)=>{t("UPDATE_CONFIRMATION",e)},updateUpsell:({commit:t},e)=>{t("UPDATE_UPSELL",e)},updateAffectation:({commit:t},e)=>{t("UPDATE_AFFECTATION",e)},updateNote:({commit:t},e)=>{t("UPDATE_NOTE",e)},updateConfirmationWithNote:({commit:t},e)=>{t("UPDATE_CONFIRMATION_WITH_NOTE",e)},updateDelivery:({commit:t},e)=>{t("UPDATE_DELIVERY",e)},resetSales:({commit:t},e)=>{t("RESET_SALES",e)}}};let _={orders:[],order:null,all_orders:[],fetched:!1};var x={name:"order",namespaced:!0,state:_,getters:{fetched:t=>t.fetched,orders:t=>t.orders,order:t=>t.order,allOrders:t=>t.all_orders},mutations:{SET_ORDERS:(t,e)=>{t.orders=e},ADD_ORDER:(t,e)=>{t.orders.unshift(e),t.all_orders.unshift(e)},SET_FETCHED:(t,e)=>{t.fetched=e},SET_ALL_ORDERS:(t,e)=>{t.all_orders=e},SET_ORDER:(t,e)=>{t.order=e},UPDATE_ORDER:(t,e)=>{t.orders=t.orders.map((t=>t.id===e.id?e.order:t)),t.all_orders=t.all_orders.map((t=>t.id===e.id?e.order:t))},UPDATE_CONFIRMATION:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,"confirmer"==e.confirmation&&(t.delivery="dispatch"),console.log("order updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,"confirmer"==e.confirmation&&(t.delivery="dispatch"),console.log("order updated")),t)))},UPDATE_CONFIRMATION_WITH_NOTE:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,t.note=e.note,"confirmer"==e.confirmation&&(t.delivery="dispatch"),console.log("order updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,t.note=e.note,"confirmer"==e.confirmation&&(t.delivery="dispatch"),console.log("order updated")),t)))},UPDATE_UPSELL:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.upsell=e.upsell,console.log("sale updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.upsell=e.upsell,console.log("sale updated")),t)))},UPDATE_AFFECTATION:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.affectation=e.affectation,console.log("sale updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.affectation=e.affectation,console.log("sale updated")),t)))},UPDATE_NOTE:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.note=e.note,console.log("sale updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.note=e.note,console.log("sale updated")),t)))},UPDATE_DELIVERY:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.delivery=e.delivery,console.log("sale updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.delivery=e.delivery,console.log("sale updated")),t)))}},actions:{setOrders:({commit:t},e)=>{t("SET_ORDERS",e)},addOrder:({commit:t},e)=>{t("ADD_ORDER",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setAllOrders:({commit:t},e)=>{t("SET_ALL_ORDERS",e)},setOrder:({commit:t},e)=>{t("SET_ORDER",e)},update:({commit:t},e)=>{t("UPDATE_ORDER",e)},updateConfirmation:({commit:t},e)=>{t("UPDATE_CONFIRMATION",e)},updateConfirmationWithNote:({commit:t},e)=>{t("UPDATE_CONFIRMATION_WITH_NOTE",e)},updateUpsell:({commit:t},e)=>{t("UPDATE_UPSELL",e)},updateAffectation:({commit:t},e)=>{t("UPDATE_AFFECTATION",e)},updateNote:({commit:t},e)=>{t("UPDATE_NOTE",e)},updateDelivery:({commit:t},e)=>{t("UPDATE_DELIVERY",e)}}};let b={fetcehd:!1,inventoryList:[],inventoryState:[],inventoryMovements:[]};var k={name:"inventory",namespaced:!0,state:b,getters:{fetched:t=>t.fetched,inventoryList:t=>t.inventoryList,inventoryState:t=>t.inventoryState,inventoryMovements:t=>t.inventoryMovements},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_INVENTORY_LIST:(t,e)=>{t.inventoryList=e},SET_INVENTORY_STATE:(t,e)=>{t.inventoryState=e},SET_INVENTORY_MOVEMENTS:(t,e)=>{t.inventoryMovements=e}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setInventoryList:({commit:t},e)=>{t("SET_INVENTORY_LIST",e)},setInventoryState:({commit:t},e)=>{t("SET_INVENTORY_STATE",e)},setInventoryMovements:({commit:t},e)=>{t("SET_INVENTORY_MOVEMENTS",e)}}};const C=localStorage.getItem("cities");let D={fetched:!1,cities:C?JSON.parse(C):[]};var S={name:"city",namespaced:!0,state:D,getters:{cities:t=>t.cities,fetched:t=>t.fetched},mutations:{SET_CITIES:(t,e)=>{localStorage.setItem("cities",JSON.stringify(e)),t.cities=e},SET_FETCHED:(t,e)=>{t.fetched=e}},actions:{setCities:({commit:t},e)=>{t("SET_CITIES",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)}}};let z={shops:[]};var U={name:"shop",namespaced:!0,state:z,getters:{shops:t=>t.shops},mutations:{SET_SHOPS:(t,e)=>{t.shops=e}},actions:{setShops:({commit:t},e)=>{t("SET_SHOPS",e)}}};let L={fetched:!1,notifications:{productStockAlert:[],reportedSale:[],reportedOrderAgente:[],reportedOrderDelivery:[]}};var P={name:"notification",namespaced:!0,state:L,getters:{notifications:t=>t.notifications,fetched:t=>t.fetched},mutations:{SET_NOTIFICATIONS:(t,e)=>{t.notifications=e},SET_FETCHED:(t,e)=>{t.fetched=e}},actions:{setNotifications:({commit:t},e)=>{t("SET_NOTIFICATIONS",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)}}};let A={fetched:!1,warehouses:[]};var W={name:"warehouse",namespaced:!0,state:A,getters:{fetched:t=>t.fetched,warehouses:t=>t.warehouses},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_WAREHOUSES:(t,e)=>{t.warehouses=e},ADD_WAREHOUSE:(t,e)=>{t.warehouses.push(e)},DELETE_WAREHOUSE:(t,e)=>{t.warehouses=t.warehouses.filter((t=>t.id!=e))},UPDATE_WAREHOUSE:(t,e)=>{t.warehouses=t.warehouses.map((t=>t.id==e.id?{...e}:t))}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setWarehouses:({commit:t},e)=>{t("SET_WAREHOUSES",e)},addWarehouse:({commit:t},e)=>{t("ADD_WAREHOUSE",e)},update:({commit:t},e)=>{t("UPDATE_WAREHOUSE",e)},delete:({commit:t},e)=>{t("DELETE_WAREHOUSE",e)}}};let $={fetched:!1,factorisations:[]};var E={name:"factorisation",namespaced:!0,state:$,getters:{fetched:t=>t.fetched,factorisations:t=>t.factorisations},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_FACTORISATIONS:(t,e)=>{t.factorisations=e},ADD_FACTORISATION:(t,e)=>{t.factorisations.push(e)},DELETE_FACTORISATION:(t,e)=>{t.factorisations=t.factorisations.filter((t=>t.id!=e))},UPDATE_FACTORISATION:(t,e)=>{t.factorisations=t.factorisations.map((t=>t.id==e.id?{...e}:t))}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setFactorisations:({commit:t},e)=>{t("SET_FACTORISATIONS",e)},addFactorisation:({commit:t},e)=>{t("ADD_FACTORISATION",e)},update:({commit:t},e)=>{t("UPDATE_FACTORISATION",e)},delete:({commit:t},e)=>{t("DELETE_FACTORISATION",e)}}};let O={fetched:!1,sheets:[]};var T={name:"sheet",namespaced:!0,state:O,getters:{fetched:t=>t.fetched,sheets:t=>t.sheets},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_SHEETS:(t,e)=>{t.sheets=e},ADD_SHEET:(t,e)=>{t.sheets.push(e)},DELETE_SHEET:(t,e)=>{t.sheets=t.sheets.filter((t=>t.id!=e))},UPDATE_SHEET:(t,e)=>{t.sheets=t.sheets.map((t=>t.id==e.id?{...e}:t))}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setSheets:({commit:t},e)=>{t("SET_SHEETS",e)},addSheet:({commit:t},e)=>{t("ADD_SHEET",e)},update:({commit:t},e)=>{t("UPDATE_SHEET",e)},delete:({commit:t},e)=>{t("DELETE_SHEET",e)}}},V=(0,o.MT)({state:{},getters:{},mutations:{},actions:{},modules:{user:m,product:f,alert:h,sale:y,order:x,inventory:k,city:S,shop:U,notification:P,warehouse:W,factorisation:E,sheet:T}}),q=s(6943);const R="https://vldo.shop/",F="https://api.vldo.shop/",I="$",j=q.Z.create({baseURL:F}),N=q.Z.create({baseURL:F});N.defaults.withCredentials=!0,N.defaults.headers={"Content-Type":"multipart/form-data",Accept:"application/json"},j.defaults.withCredentials=!0,j.defaults.headers={"Content-Type":"application/json",Accept:"application/json"};var M=j,H=s(680),Y={getCookie(){let t=H.Z.get("XSRF-TOKEN");return t?new Promise((t=>{t()})):M.get("sanctum/csrf-cookie")}};class K{async login(t){return await Y.getCookie(),M.post("api/auth/login",{email:t.email,password:t.password})}async register(t){return await Y.getCookie(),M.post("api/users/new",{email:t.email,password:t.password,phone:t.phone,status:t.status,role:t.role,firstname:t.firstname,lastname:t.lastname,product_id:t.product_id,city:t?.city,deliverycity:t?.deliveryCities,having_all:t.having_all})}async update(t,e){return await Y.getCookie(),M.post("api/users/update/"+t.id,{email:t.email,password:t.password,phone:t.phone,status:t.status,firstname:t.firstname,lastname:t.lastname,product_id:t.product_id,role:t.role,city:t?.city,deliverycity:t?.deliveryCities,updatePassword:e,having_all:t.having_all})}async updateProfile(t,e){return await Y.getCookie(),M.post("api/users/profile",{password:t.password,phone:t.phone,firstname:t.firstname,lastname:t.lastname,updatePassword:e})}async online(){return await Y.getCookie(),M.get("api/user")}async profile(){return await Y.getCookie(),M.get("api/users/profile")}async logout(){return await Y.getCookie(),M.get("api/auth/logout")}async clear(){return await Y.getCookie(),M.get("api/auth/clear")}async permession(){return await Y.getCookie(),M.get("api/auth/permission")}async roles(){return await Y.getCookie(),M.get("api/auth/roles")}async all(){return await Y.getCookie(),M.get("api/users")}async updateStatus({id:t,status:e}){return await Y.getCookie(),M.post("api/users/status/"+t,{status:e})}async delete(t){return await Y.getCookie(),M["delete"]("api/users/delete/"+t)}async getUser(t){return await Y.getCookie(),M.get("api/users/"+t)}async createRole({name:t,permissions:e}){return await Y.getCookie(),M.post("api/roles/new",{name:t,permissions:e})}async updateRole(t,{name:e,permissions:s}){return await Y.getCookie(),M.post("api/roles/update/"+t,{name:e,permissions:s})}async deleteRole(t){return await Y.getCookie(),M["delete"]("api/roles/delete/"+t)}async getRole(t){return await Y.getCookie(),M.get("api/roles/"+t)}async agents(){return await Y.getCookie(),M.get("api/agents")}async deliveries(){return await Y.getCookie(),M.get("api/delevries")}async cities(){return await Y.getCookie(),M.get("api/cities")}}var Z=new K;function B(t){if(document.title=t.meta?.title+" | Vldo Shop",console.log(t),!V.getters["user/isLoggedIn"])return"/login"==t.path||{name:"login"};if(Z.online(),"/login"==t.path)return{name:"404"};const{gate:e}=t.meta,s=V.getters["user/permissions"];return"all"===e||((e||"/404"===t.path)&&!(!s.includes(e)&&"/404"!==t.path)||{name:"404"})}var Q=s(2268),G=s(7312),J=s(3369),X=s(3289),tt=s(165);const et={class:"tw-min-h-screen tw-overflow-auto tw-bg-slate-50"},st={class:"tw-grid tw-h-fit tw-overflow-hidden md:tw-grid-cols-2 tw-grid-cols-1"},at={class:"py-md-5 py-10 pb-0 tw-flex tw-justify-center md:tw-items-center"},it={class:"px-md-10 tw-w-full"},rt={class:"tw-w-[150px]"},lt=["src"],ot={class:"mt-md-10 mt-15 pt-5 px-md-5 px-lg-16 tw-w-full d-felx justify-center align-center"},nt={class:"pa-5 py-7 tw-border bg-white tw-rounded-lg tw-mx-auto tw-max-w-[450px]"},dt=(0,i._)("h1",{class:"text-h5 font-weight-medium !tw-text-gray-600"},"Login",-1),wt=(0,i._)("p",{class:"text-body-1 mt-2 !tw-text-gray-500"},"Please login to your account",-1),ct={key:0,class:"text-body-2 mt-2 !tw-text-red-500"},ut={class:"mt-5"},pt=(0,i._)("p",{class:"mb-1"},"Email",-1),mt=(0,i._)("p",{class:"mb-1"},"Password",-1),ht={class:"mt-5"},gt=(0,i._)("span",{class:"text-capitalize text-white"},"Login",-1),ft={class:"bg-primary-color tw-min-h-screen tw-hidden md:tw-flex tw-items-center tw-justify-center"},vt=["src"];function yt(t,e,s,r,l,o){const n=(0,i.up)("Alert");return(0,i.wg)(),(0,i.iD)("div",et,[(0,i.Wm)(n),(0,i._)("div",st,[(0,i._)("div",at,[(0,i.Wm)(J.K,{class:"py-0"},{default:(0,i.w5)((()=>[(0,i._)("div",it,[(0,i._)("div",rt,[(0,i._)("img",{class:"tw-w-full",src:l.localUrl+"assets/img/logo.png"},null,8,lt)]),(0,i._)("div",ot,[(0,i._)("div",nt,[dt,wt,l.error.active?((0,i.wg)(),(0,i.iD)("p",ct,(0,Q.zw)(l.error.message),1)):(0,i.kq)("",!0),(0,i._)("div",ut,[(0,i._)("div",null,[pt,(0,i.Wm)(tt.hw,{name:"email",onKeyup:e[0]||(e[0]=t=>o.resetError("email")),modelValue:l.email,"onUpdate:modelValue":e[1]||(e[1]=t=>l.email=t),error:!l.emailStatus.valid,"error-messages":l.emailStatus.valid?"":l.emailStatus.message,autofocus:"",onBlur:e[2]||(e[2]=t=>l.emailFocus=!1),onFocus:e[3]||(e[3]=t=>l.emailFocus=!0),color:"primary-color",variant:"outlined",class:"tw-w-full",density:"compact"},{"append-inner":(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:l.emailFocus?l.emailStatus.valid?"primary-color":"error":"grey-darken-3"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-email-outline")])),_:1},8,["color"])])),_:1},8,["modelValue","error","error-messages"])]),(0,i._)("div",null,[mt,(0,i.Wm)(tt.hw,{name:"password",onKeyup:(0,a.D2)(o.login,["enter"]),modelValue:l.password,"onUpdate:modelValue":e[5]||(e[5]=t=>l.password=t),error:!l.passwordStatus.valid,"error-messages":l.passwordStatus.valid?"":l.passwordStatus.message,type:l.showPassword?"text":"password",onBlur:e[6]||(e[6]=t=>l.passwordFocus=!1),onFocus:e[7]||(e[7]=t=>l.passwordFocus=!0),color:"primary-color",variant:"outlined",class:"tw-w-full",density:"compact"},{"append-inner":(0,i.w5)((()=>[(0,i.Wm)(X.t,{onClick:e[4]||(e[4]=t=>l.showPassword=!l.showPassword),class:"tw-relative tw-z-50 tw-cursor-pointer",color:l.passwordFocus?l.passwordStatus.valid?"primary-color":"error":"grey-darken-3"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,Q.zw)(l.showPassword?"mdi-eye-off-outline":"mdi-eye-outline"),1)])),_:1},8,["color"])])),_:1},8,["onKeyup","modelValue","error","error-messages","type"])]),(0,i._)("div",ht,[(0,i.Wm)(G.T,{disabled:l.isLoading||!l.cookiesCleared,loading:l.isLoading||!l.cookiesCleared,onClick:o.login,block:"",size:"large",color:"primary-color",variant:"flat",class:"!tw-text-white disabled:!tw-bg-gray-200"},{default:(0,i.w5)((()=>[gt])),_:1},8,["disabled","loading","onClick"])])])])])])])),_:1})]),(0,i._)("div",ft,[(0,i._)("img",{src:l.localUrl+"assets/img/login.jpg",class:"tw-w-full tw-h-full tw-object-cover",alt:""},null,8,vt)])])])}function _t(t){var e=/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/;return t?new RegExp(e).test(t)?{valid:!0}:{valid:!1,message:"Email is not valid."}:{valid:!1,message:"Email is required."}}function xt(t){return t?t.length<=4||t.length>=16?{valid:!1,message:"Password length must be between 4 and 16."}:{valid:!0}:{valid:!1,message:"This field is required"}}function bt(t,e="This field"){return t?{valid:!0}:{valid:!1,message:`${e} is required`}}function kt(t,e="This field"){return t?isNaN(t)?{valid:!1,message:`${e} must be a valid number`}:{valid:!0}:{valid:!1,message:`${e} is required`}}function Ct(t,e){return t?t!==e?{valid:!1,message:"Passwords doesn't match"}:{valid:!0}:{valid:!1,message:"This field is required."}}function Dt(t){return t.length?{valid:!0}:{valid:!1,message:"You need at least one variant to create a product !"}}function St(t){return t.length?{valid:!0}:{valid:!1,message:"You need at least one permission to create a role !"}}var zt=s(7771),Ut=s(8952);const Lt={key:0,class:"pa-2 tw-absolute !tw-z-[510000]"},Pt={class:"tw-text-sm"};function At(t,e,s,a,r,l){return(0,i.wg)(),(0,i.j4)(i.lR,{to:"body"},[(0,i.Wm)(Ut.V,null,{default:(0,i.w5)((()=>[l.state.active?((0,i.wg)(),(0,i.iD)("div",Lt,[(0,i.Wm)(zt.w,{closable:"",density:"compact",variant:"flat",type:l.state.alert.type,position:"fixed",location:"bottom right",class:"ma-2"},{default:(0,i.w5)((()=>[(0,i._)("div",Pt,(0,Q.zw)(l.state.alert.title),1)])),_:1},8,["type"])])):(0,i.kq)("",!0)])),_:1})])}var Wt={computed:{state(){return this.$store.getters["alert/alert"]}}};const $t=(0,d.Z)(Wt,[["render",At]]);var Et=$t,Ot={components:{Alert:Et},data(){return{localUrl:R,isLoading:!1,cookiesCleared:!1,error:{active:!1,message:""},email:"",password:"",emailStatus:{valid:!0,message:""},passwordStatus:{valid:!0,message:""},emailFocus:!1,passwordFocus:!1,showPassword:!1}},methods:{...(0,o.nv)("user",["setIsLoggedIn","setPermissions","setUser"]),validateForm(){return this.emailStatus=_t(this.email),this.passwordStatus=xt(this.password),this.passwordStatus.valid&&this.emailStatus.valid},login(){this.validateForm()&&(this.isLoading=!0,this.error={active:!1,message:""},Z.login({email:this.email,password:this.password}).then((t=>{if("AUTHENTICATION_SUCCESSFUL"==t.data.code){this.setUser(t.data.data.user),this.setIsLoggedIn(!0);const e=t.data.data.user.permissions;this.setPermissions(e),this.$router.push("/")}})).catch((t=>{this.$handleApiError(t),"INVALID_CREDENTIALS"==t.response?.data.code&&(this.error={active:!0,message:t.response.data.message}),"NOT_ACTIVE_ERROR"==t.response?.data.code&&(this.error={active:!0,message:t.response.data.message}),"VALIDATION_ERROR"==t.response?.data.code&&(this.emailStatus={valid:!1,message:t.response.data.error["email"][0]},this.passwordStatus={valid:!1,message:t.response.data.error["password"][0]})})).finally((()=>{this.isLoading=!1})),console.log("login..."))},resetError(t){"email"==t&&(this.emailStatus={valid:!0,message:""}),"password"==t&&(this.passwordStatus={valid:!0,message:""})}},mounted(){Z.clear().then((()=>{this.cookiesCleared=!0}))}};const Tt=(0,d.Z)(Ot,[["render",yt]]);var Vt=Tt,qt={name:"login",path:"/login",component:Vt,meta:{title:"Login"}},Rt=s(4454),Ft=s(3140);function It(t,e,s,a,r,l){const o=(0,i.up)("AppSidebar"),n=(0,i.up)("AppHeader"),d=(0,i.up)("Alert"),w=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",null,[l.isLoggedIn?((0,i.wg)(),(0,i.j4)(Rt.s,{key:0,"full-height":!0},{default:(0,i.w5)((()=>[(0,i.Wm)(o,{active:r.drawer},null,8,["active"]),(0,i.Wm)(n,{onToggleSidebar:l.toggleSidebar},null,8,["onToggleSidebar"]),(0,i.Wm)(d),(0,i.Wm)(Ft.O,{class:"tw-bg-gray-50 tw-min-h-screen tw-overflow-y-auto"},{default:(0,i.w5)((()=>[(0,i.Wm)(J.K,{fluid:"",class:"py-6 px-6"},{default:(0,i.w5)((()=>[(0,i.Wm)(w)])),_:1})])),_:1}),r.showScrollUpButton?((0,i.wg)(),(0,i.iD)("button",{key:0,onClick:e[0]||(e[0]=(...t)=>l.scrollToTop&&l.scrollToTop(...t)),class:"tw-fixed tw-shadow tw-text-sm tw-bottom-5 tw-right-3 tw-w-10 tw-h-10 tw-z-10 tw-rounded-full tw-bg-orange-400 tw-text-white"},[(0,i.Wm)(X.t,null,{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-transfer-up")])),_:1})])):(0,i.kq)("",!0)])),_:1})):(0,i.kq)("",!0)])}var jt=s(6439),Nt=s(9156);const Mt={class:"tw-flex tw-items-center tw-gap-2"};function Ht(t,e,s,r,l,o){const n=(0,i.up)("Notification"),d=(0,i.up)("HeaderMenu");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(jt.L,{color:"white",density:"default",elevation:"0",class:"tw-border-b-0 !tw-shadow-lg !tw-shadow-gray-400/10 tw-top-0 !tw-fixed tw-overflow-visible",absolute:!1},(0,i.Nv)({append:(0,i.w5)((()=>[(0,i._)("div",Mt,[(0,i.Wm)(n),(0,i.Wm)(d)])])),default:(0,i.w5)((()=>[(0,i.Wm)(Nt.g,{variant:"text",onClick:e[0]||(e[0]=(0,a.iM)((t=>o.handleClick()),["stop"]))})])),_:2},[void 0]),1024)])}var Yt=s(652),Kt=s(4075),Zt=s(8694),Bt=s(8793);const Qt={class:"tw-relative"},Gt=(0,i._)("div",{class:"tw-absolute tw-bottom-0 tw-border-2 tw-border-solid tw-border-white tw-right-0 tw-w-3 tw-h-3 tw-rounded-full tw-bg-green-500"},null,-1),Jt={key:0,class:"!tw-duration-100"},Xt={class:"tw-absolute tw-bg-white tw-border tw-border-solid tw-border-neutral-200 tw-rounded-md tw-bordesr !tw-shadow-lg !tw-shadow-gray-400/10 tw-top-14 tw-right-0 tw-w-[200px] tw-min-h-[50px]"},te={class:"pa-2 d-flex tw-items-center tw-gap-2 tw-border-b tw-border-b-neutral-100"},ee={class:"d-flex flex-column justify-center"},se={class:"tw-text-sm tw-text-neutral-800 text-capitalize"},ae={class:"tw-text-xs tw-rounded-lg tw-text-green-500 text-capitalize"},ie=(0,i._)("span",{class:"text-capitalize tw-text-neutral-700 tw-text-xs"}," Profile ",-1),re={class:"d-flex tw-items-center tw-gap-2"},le=(0,i._)("span",{class:"text-capitalize tw-text-red-700 tw-text-xs"}," Logout ",-1);function oe(t,e,s,a,r,l){return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",Qt,[(0,i.Wm)(G.T,{onClick:l.toggleMenu,icon:"","max-width":"35","max-height":"35"},{default:(0,i.w5)((()=>[(0,i.Wm)(Yt.V,{size:"32"},{default:(0,i.w5)((()=>[(0,i.Wm)(Zt.f,{src:r.localUrl+"assets/img/profiles/avatar.webp"},null,8,["src"])])),_:1}),Gt])),_:1},8,["onClick"]),(0,i.Wm)(Ut.Z5,null,{default:(0,i.w5)((()=>[r.isActive?((0,i.wg)(),(0,i.iD)("div",Jt,[(0,i._)("div",Xt,[(0,i._)("div",te,[(0,i.Wm)(Yt.V,{size:"35"},{default:(0,i.w5)((()=>[(0,i.Wm)(Zt.f,{eager:"",src:r.localUrl+"assets/img/profiles/avatar.webp"},null,8,["src"])])),_:1}),(0,i._)("div",ee,[(0,i._)("div",se,(0,Q.zw)(l.user.firstname)+" "+(0,Q.zw)(l.user.lastname),1),(0,i._)("div",ae,(0,Q.zw)(l.user.role),1)])]),(0,i.Wm)(Kt.J),(0,i._)("div",{onClick:e[0]||(e[0]=(...t)=>l.closeMenu&&l.closeMenu(...t)),class:"d-flex tw-items-center tw-gap-2"},[(0,i.Wm)(G.T,{block:"",class:"justify-start",variant:"text",color:"gray",ripple:!1},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{class:"mr-2 tw-text-neutral-700"},{default:(0,i.w5)((()=>[(0,i.Uk)(" mdi-account-outline ")])),_:1}),ie])),_:1})]),(0,i.Wm)(Kt.J),(0,i._)("div",re,[(0,i.Wm)(G.T,{onClick:l.logout,block:"",class:"justify-start",variant:"text",color:"gray",ripple:!1},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{class:(0,Q.C_)([{"tw-animate-pulse":r.loginOut},"mr-2 tw-text-red-700"])},{default:(0,i.w5)((()=>[(0,i.Uk)((0,Q.zw)(r.loginOut?"mdi-power-settings":"mdi-power"),1)])),_:1},8,["class"]),le])),_:1},8,["onClick"])])])])):(0,i.kq)("",!0)])),_:1})])),[[Bt.L,l.closeMenu]])}var ne={data(){return{localUrl:R,isActive:!1,loginOut:!1}},methods:{toggleMenu(){this.isActive=!this.isActive},closeMenu(){this.isActive=!1},logout(){this.loginOut=!0,Z.logout().then((()=>{this.$store.dispatch("user/logout"),this.$router.push("/login")})).finally((()=>{this.loginOut=!1}))}},computed:{user(){return this.$store.getters["user/user"]}}};const de=(0,d.Z)(ne,[["render",oe]]);var we=de;function ce(t,e,s,a,r,l){const o=(0,i.up)("AdminNotification"),n=(0,i.up)("UserNotification");return(0,i.wg)(),(0,i.iD)("div",null,["admin"==l.user.role?((0,i.wg)(),(0,i.j4)(o,{key:0})):(0,i.kq)("",!0),["agente","delivery"].includes(l.user.role)?((0,i.wg)(),(0,i.j4)(n,{key:1})):(0,i.kq)("",!0)])}const ue={class:"tw-relative"},pe={key:0,class:"tw-absolute tw-border-2 tw-border-solid tw-border-white tw-top-1 tw-right-1 tw-w-3 tw-h-3 tw-rounded-full tw-bg-red-500"},me={key:0,class:"!tw-duration-100"},he={class:"tw-absolute tw-text-sm tw-bg-white tw-border tw-border-solid tw-border-neutral-200 tw-rounded-md tw-bordesr !tw-shadow-lg !tw-shadow-gray-400/10 tw-top-14 tw-right-0 tw-w-[230px] tw-min-h-[50px]"},ge=(0,i._)("p",{class:"tw-p-2 tw-text-sm"},"Notifications",-1),fe={key:0},ve={class:"tw-py-10 tw-flex tw-items-center tw-justify-center"},ye={key:1},_e=(0,i._)("p",{class:""},"Stock Alert",-1),xe=(0,i._)("p",{class:""},"Delivery Reported",-1),be=(0,i._)("p",{class:""},"Confirmation Reported",-1);function ke(t,e,s,a,r,l){const o=(0,i.up)("router-link");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",ue,[(0,i.Wm)(G.T,{onClick:l.toggleMenu,icon:"",width:"35",height:"35",class:"tw-relative"},{default:(0,i.w5)((()=>[(0,i.Wm)(Zt.f,{width:"22",height:"22",src:r.localUrl+"assets/img/icons/notification-bing.svg"},null,8,["src"]),l.stockAlert.length||l.reportedDeliveries.length||l.reportedConfirmations.length?((0,i.wg)(),(0,i.iD)("div",pe)):(0,i.kq)("",!0)])),_:1},8,["onClick"]),(0,i.Wm)(Ut.Z5,null,{default:(0,i.w5)((()=>[r.isActive?((0,i.wg)(),(0,i.iD)("div",me,[(0,i._)("div",he,[ge,r.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",fe,[(0,i._)("div",ve,[(0,i.Wm)(X.t,{size:"large",class:"tw-animate-spin",color:"primary-color"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-loading")])),_:1})])])),r.isLoaded?((0,i.wg)(),(0,i.iD)("div",ye,[(0,i.Wm)(o,{to:"/notifications/stock",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-alert-outline")])),_:1}),(0,i._)("div",null,[_e,(0,i._)("p",{class:(0,Q.C_)([[l.stockAlert.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,Q.zw)(l.stockAlert.length)+" "+(0,Q.zw)(l.stockAlert.length>1?"products":"product"),3)])])),_:1}),(0,i.Wm)(o,{to:"/sales",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-autorenew")])),_:1}),(0,i._)("div",null,[xe,(0,i._)("p",{class:(0,Q.C_)([[l.reportedDeliveries.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,Q.zw)(l.reportedDeliveries.length)+" today",3)])])),_:1}),(0,i.Wm)(o,{to:"/sales",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-autorenew")])),_:1}),(0,i._)("div",null,[be,(0,i._)("p",{class:(0,Q.C_)([[l.reportedConfirmations.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,Q.zw)(l.reportedConfirmations.length)+" today",3)])])),_:1})])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0)])),_:1})])),[[Bt.L,l.closeMenu]])}class Ce{async all(){return await Y.getCookie(),M.get("api/notifications")}async agente(){return await Y.getCookie(),M.get("api/notifications/agente")}async delivery(){return await Y.getCookie(),M.get("api/notifications/delivery")}}var De=new Ce,Se={data(){return{localUrl:R,isActive:!1,isLoaded:!1}},methods:{toggleMenu(){this.isActive=!this.isActive},closeMenu(){this.isActive=!1},getNotifications(){De.all().then((t=>{"SUCCESS"==t.data.code&&(console.log("success"),this.$store.dispatch("notification/setNotifications",t.data.data),this.$store.dispatch("notification/setFetched",!0))}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))}},computed:{user(){return this.$store.getters["user/user"]},notifications(){return this.$store.getters["notification/notifications"]},stockAlert(){return this.notifications["productStockAlert"]||[]},reportedConfirmations(){return this.notifications["reportedOrderAgente"]||[]},reportedDeliveries(){return this.notifications["reportedOrderDelivery"]||[]}},mounted(){this.getNotifications()}};const ze=(0,d.Z)(Se,[["render",ke]]);var Ue=ze;const Le={class:"tw-relative"},Pe={key:0,class:"tw-absolute tw-border-2 tw-border-solid tw-border-white tw-top-1 tw-right-1 tw-w-3 tw-h-3 tw-rounded-full tw-bg-red-500"},Ae={key:0,class:"!tw-duration-100"},We={class:"tw-absolute tw-text-sm tw-bg-white tw-border tw-border-solid tw-border-neutral-200 tw-rounded-md tw-bordesr !tw-shadow-lg !tw-shadow-gray-400/10 tw-top-14 tw-right-0 tw-w-[230px] tw-min-h-[50px]"},$e=(0,i._)("p",{class:"tw-p-2 tw-text-sm"},"Notifications",-1),Ee={key:0},Oe={class:"tw-py-10 tw-flex tw-items-center tw-justify-center"},Te={key:1},Ve=(0,i._)("p",{class:""},"Confirmation Reported",-1),qe=(0,i._)("p",{class:""},"Delivery Reported",-1);function Re(t,e,s,a,r,l){const o=(0,i.up)("router-link");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",Le,[(0,i.Wm)(G.T,{onClick:l.toggleMenu,icon:"",width:"35",height:"35",class:"tw-relative"},{default:(0,i.w5)((()=>[(0,i.Wm)(Zt.f,{width:"22",height:"22",src:r.localUrl+"assets/img/icons/notification-bing.svg"},null,8,["src"]),l.reportedDeliveries.length||l.reportedConfirmations.length?((0,i.wg)(),(0,i.iD)("div",Pe)):(0,i.kq)("",!0)])),_:1},8,["onClick"]),(0,i.Wm)(Ut.Z5,null,{default:(0,i.w5)((()=>[r.isActive?((0,i.wg)(),(0,i.iD)("div",Ae,[(0,i._)("div",We,[$e,r.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",Ee,[(0,i._)("div",Oe,[(0,i.Wm)(X.t,{size:"large",class:"tw-animate-spin",color:"primary-color"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-loading")])),_:1})])])),r.isLoaded?((0,i.wg)(),(0,i.iD)("div",Te,["agente"==l.user.role?((0,i.wg)(),(0,i.j4)(o,{key:0,to:"/orders",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-autorenew")])),_:1}),(0,i._)("div",null,[Ve,(0,i._)("p",{class:(0,Q.C_)([[l.reportedConfirmations.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,Q.zw)(l.reportedConfirmations.length)+" today",3)])])),_:1})):(0,i.kq)("",!0),"delivery"==l.user.role?((0,i.wg)(),(0,i.j4)(o,{key:1,to:"/deliveries",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-autorenew")])),_:1}),(0,i._)("div",null,[qe,(0,i._)("p",{class:(0,Q.C_)([[l.reportedConfirmations.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,Q.zw)(l.reportedConfirmations.length)+" today",3)])])),_:1})):(0,i.kq)("",!0)])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0)])),_:1})])),[[Bt.L,l.closeMenu]])}var Fe={data(){return{localUrl:R,isActive:!1,isLoaded:!1}},methods:{toggleMenu(){this.isActive=!this.isActive},closeMenu(){this.isActive=!1},getAgenteNotifications(){De.agente().then((t=>{"SUCCESS"==t.data.code&&(console.log("success"),this.$store.dispatch("notification/setNotifications",t.data.data),this.$store.dispatch("notification/setFetched",!0))}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))},getDeliveryNotifications(){De.delivery().then((t=>{"SUCCESS"==t.data.code&&(console.log("success"),this.$store.dispatch("notification/setNotifications",t.data.data),this.$store.dispatch("notification/setFetched",!0))}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))}},computed:{user(){return this.$store.getters["user/user"]},notifications(){return this.$store.getters["notification/notifications"]},stockAlert(){return this.notifications["productStockAlert"]||[]},reportedConfirmations(){return this.notifications["reportedOrderAgente"]||[]},reportedDeliveries(){return this.notifications["reportedOrderDelivery"]||[]}},mounted(){"agente"==this.user.role&&this.getAgenteNotifications(),"delivery"==this.user.role&&this.getDeliveryNotifications()}};const Ie=(0,d.Z)(Fe,[["render",Re]]);var je=Ie,Ne={components:{AdminNotification:Ue,UserNotification:je},computed:{user(){return this.$store.getters["user/user"]}}};const Me=(0,d.Z)(Ne,[["render",ce]]);var He=Me,Ye={emits:["toggleSidebar"],components:{HeaderMenu:we,Notification:He},data(){return{localUrl:R}},computed:{},methods:{handleClick(){this.$emit("toggleSidebar")}}};const Ke=(0,d.Z)(Ye,[["render",Ht]]);var Ze=Ke,Be=s(9457),Qe=s(2329),Ge=s(9657);function Je(t,e,s,a,r,l){const o=(0,i.up)("SidebarItem");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(Ge.V,{modelValue:r.drawer,"onUpdate:modelValue":e[0]||(e[0]=t=>r.drawer=t),location:"left",absolute:!1,class:"!tw-top-0 !tw-fixed"},{default:(0,i.w5)((()=>[(0,i.Wm)(Be.l,{class:"tw-py-3"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i.Wm)(Zt.f,{width:"140",src:r.localUrl+"assets/img/logo.png"},null,8,["src"])])])),_:1}),(0,i.Wm)(Qe.i,{class:"mt-2",nav:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.links,(t=>((0,i.wg)(),(0,i.j4)(o,{key:t.id,link:t},null,8,["link"])))),128))])),_:1})])),_:1},8,["modelValue"])])}const Xe=[4,6,7],ts=[{id:1,title:"Dashboard",module:"dashboard",to:"/",hasChildren:!1,gate:"all",icon:{type:"svg",value:"assets/img/icons/dashboard.svg"}},{id:2,module:"product",title:"Product",hasChildren:!0,gate:"access_to_products",icon:{type:"svg",value:"assets/img/icons/product.svg"},children:[{id:1,title:"Products List",subModule:"product/list",gate:"show_all_products",to:"/products"},{id:2,title:"Add Product",subModule:"product/add",gate:"create_product",to:"/products/add"}]},{id:3,module:"track",title:"Tracking",hasChildren:!0,gate:"none",icon:{type:"icon",value:"mdi-radar"},children:[{id:1,title:"Deliveries",subModule:"track/delivery",gate:"none",to:"/tracking/delivery"}]},{id:4,module:"sale",title:"Sales",hasChildren:!0,gate:"access_to_sales",icon:{type:"icon",value:"mdi-sale"},children:[{id:1,title:"Sales list",subModule:"sale/list",gate:"show_all_sales",to:"/sales"},{id:2,title:"Expidation",subModule:"sale/expidation",gate:"show_all_expidations",to:"/sales/expidation"},{id:3,title:"Shipping",subModule:"sale/shipping",gate:"show_all_expidations",to:"/sales/shipping"}]},{id:5,module:"factorisation",title:"Factorisation",hasChildren:!0,gate:"access_to_factorisations",icon:{type:"icon",value:"mdi-note-multiple"},children:[{id:1,title:"Factorisation list",subModule:"factorisation/list",gate:"show_all_factorisations",to:"/factorisations"}]},{id:6,module:"order",title:"Orders",hasChildren:!0,gate:"access_to_orders",icon:{type:"icon",value:"mdi-barcode-scan"},children:[{id:1,title:"Order",subModule:"order/show",gate:"show_all_orders",to:"/order"},{id:2,title:"My Orders",subModule:"order/list",gate:"show_all_orders",to:"/orders"},{id:3,title:"Confirmed Orders",subModule:"order/confirmed",gate:"show_all_orders",to:"/orders/confirmed"}]},{id:7,module:"delivery",title:"Orders",hasChildren:!0,gate:"access_to_delivery",icon:{type:"icon",value:"mdi-bike"},children:[{id:1,title:"Orders List",subModule:"delivery/list",gate:"show_all_deliveries",to:"/deliveries"},{id:2,title:"Orders Delivered",subModule:"delivery/delivered",gate:"show_all_deliveries",to:"/delivered"}]},{id:8,module:"inventory",title:"Inventory",hasChildren:!0,gate:"access_to_inventory",icon:{type:"icon",value:"mdi-warehouse"},children:[{id:1,title:"Inventory State",gate:"show_all_inventory_states",subModule:"inventory/state",to:"/inventories"},{id:2,title:"Inventory Movements",gate:"show_all_inventory_movements",subModule:"inventory/movements",to:"/inventories/movements"},{id:4,title:"Add Movement",gate:"create_inventory_movement",subModule:"inventory/add",to:"/inventories/add"}]},{id:9,module:"shop",title:"Shop",hasChildren:!0,gate:"access_to_shop",icon:{type:"icon",value:"mdi-store"},children:[{id:1,title:"Shop List",gate:"show_all_shops",subModule:"shop/list",to:"/shops"},{id:2,title:"Add Shop",gate:"create_shop",subModule:"shop/add",to:"/shops/add"}]},{id:10,module:"warehouse",title:"Warehouses",hasChildren:!0,gate:"access_to_warehouse",icon:{type:"icon",value:"mdi-home-group"},children:[{id:1,title:"Warehouses list",subModule:"warehouse/list",gate:"show_all_warehouses",to:"/warehouses"}]},{id:11,title:"Users",module:"user",gate:"access_to_users",hasChildren:!0,icon:{type:"svg",value:"assets/img/icons/users1.svg"},children:[{id:1,title:"Users List",subModule:"user/list",gate:"show_all_users",to:"/users"},{id:2,title:"Add User",subModule:"user/add",gate:"create_user",to:"/users/add"},{id:3,title:"Roles List",subModule:"user/roles",gate:"show_all_roles",to:"/users/roles"},{id:4,title:"Add Role",subModule:"user/addRole",gate:"create_role",to:"/users/addRole"}]},{id:15,title:"Sheets",module:"sheets",to:"/sheets",gate:"access_to_sheets",hasChildren:!1,icon:{type:"icon",value:"mdi-note-text-outline"}},{id:12,title:"Settings",module:"settings",to:"/settings",gate:"access_to_account",hasChildren:!1,icon:{type:"svg",value:"assets/img/icons/settings.svg"}},{id:13,title:"Orders",module:"followup",to:"/followup",hasChildren:!1,gate:"follow_up_orders",icon:{type:"icon",value:"mdi-package-variant-closed"}}];var es=s(9234),ss=s(2127);const as={key:0},is={class:"d-flex align-center"},rs={class:"tw-rounded-md tw-bg-gray-50"},ls={class:"tw-h-full py-2"},os={key:1},ns={key:2},ds={key:3};function ws(t,e,s,a,r,l){const o=(0,i.up)("SidebarSales"),n=(0,i.up)("SidebarDelivery"),d=(0,i.up)("SidebarAgente");return(0,i.wg)(),(0,i.iD)("div",null,[!t.$can(s.link.gate)&&"all"!=s.link.gate||r.disabled_links.includes(s.link.id)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",as,[(0,i.Wm)(Be.l,{class:(0,Q.C_)(["mx-3 mb-2",{"bg-secondary-color":r.isActive}]),onClick:e[0]||(e[0]=t=>l.handleClick()),density:"comfortable",active:!1,ripple:!1,to:s.link.hasChildren?"":s.link.to,link:""},{default:(0,i.w5)((()=>[(0,i._)("div",is,["icon"==s.link.icon.type?((0,i.wg)(),(0,i.j4)(X.t,{key:0,icon:s.link.icon.value,color:r.isActive?"white":"grey-darken-2",class:"mr-2",size:"small"},null,8,["icon","color"])):(0,i.kq)("",!0),"svg"==s.link.icon.type?((0,i.wg)(),(0,i.j4)(Zt.f,{key:1,src:r.localUrl+s.link.icon.value,"max-width":"18",class:(0,Q.C_)([{active:r.isActive},"mr-2 tw-fill-white"]),size:"small"},null,8,["src","class"])):(0,i.kq)("",!0),(0,i.Wm)(ss.V,{class:(0,Q.C_)(["text-body-2 font-weight-regular",{"text-white":r.isActive}]),textContent:(0,Q.zw)(s.link.title)},null,8,["class","textContent"]),(0,i.Wm)(es.C),s.link.hasChildren?((0,i.wg)(),(0,i.j4)(X.t,{key:2,class:(0,Q.C_)(["item-icon",{activeRotate:r.isActive}]),icon:"mdi-chevron-right"},null,8,["class"])):(0,i.kq)("",!0)])])),_:1},8,["class","to"]),s.link.hasChildren?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,Q.C_)([{"!tw-max-h-[1000px] mb-2 mt-n3":r.isActive},"tw-max-h-0 tw-w-auto mx-3 tw-overflow-hidden tw-duration-300"])},[(0,i._)("div",rs,[(0,i.Wm)(Qe.i,{density:"compact"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allowedChildren,(t=>((0,i.wg)(),(0,i.j4)(Be.l,{key:t.id,link:"",exact:"",active:!1,to:t.to,height:"10",class:"!tw-h-fit !tw-py-0"},{default:(0,i.w5)((()=>[(0,i._)("div",ls,[(0,i.Wm)(X.t,{size:"x-small",class:"mr-2",color:l.isSublinkActive(t)?"primary-color":"secondary-color",icon:l.isSublinkActive(t)?"mdi-chevron-double-right":"mdi-circle-medium"},null,8,["color","icon"]),(0,i._)("span",{class:(0,Q.C_)(["tw-text-sm",{"text-primary-color":l.isSublinkActive(t)}])},(0,Q.zw)(t.title),3)])])),_:2},1032,["to"])))),128))])),_:1})])],2)):(0,i.kq)("",!0)])),4==s.link.id?((0,i.wg)(),(0,i.iD)("div",os,[(0,i.Wm)(o)])):(0,i.kq)("",!0),7==s.link.id?((0,i.wg)(),(0,i.iD)("div",ns,[(0,i.Wm)(n)])):(0,i.kq)("",!0),8==s.link.id?((0,i.wg)(),(0,i.iD)("div",ds,[(0,i.Wm)(d)])):(0,i.kq)("",!0)])}const cs={key:0},us={class:"d-flex align-center"},ps={class:"tw-w-fit tw-h-[24px] tw-flex tw-items-center tw-justify-center tw-px-1 tw-bg-orange-500 tw-text-sm tw-text-white tw-rounded tw-ml-2"},ms={key:1,class:"tw-text-xs"},hs={class:"tw-rounded-md tw-bg-gray-50"},gs={class:"tw-h-full py-2"};function fs(t,e,s,a,r,l){return t.$can(r.link.gate)||"all"==r.link.gate?((0,i.wg)(),(0,i.iD)("div",cs,[(0,i.Wm)(Be.l,{class:(0,Q.C_)(["mx-3 mb-2",{"bg-secondary-color":r.isActive}]),onClick:e[0]||(e[0]=t=>l.handleClick()),density:"comfortable",active:!1,ripple:!1,to:r.link.hasChildren?"":r.link.to,link:""},{default:(0,i.w5)((()=>[(0,i._)("div",us,["icon"==r.link.icon.type?((0,i.wg)(),(0,i.j4)(X.t,{key:0,icon:r.link.icon.value,color:r.isActive?"white":"grey-darken-2",class:"mr-2",size:"small"},null,8,["icon","color"])):(0,i.kq)("",!0),"svg"==r.link.icon.type?((0,i.wg)(),(0,i.j4)(Zt.f,{key:1,src:r.localUrl+r.link.icon.value,"max-width":"18",class:(0,Q.C_)([{active:r.isActive},"mr-2 tw-fill-white"]),size:"small"},null,8,["src","class"])):(0,i.kq)("",!0),(0,i.Wm)(ss.V,{class:(0,Q.C_)(["text-body-2 font-weight-regular",{"text-white":r.isActive}]),textContent:(0,Q.zw)(r.link.title)},null,8,["class","textContent"]),(0,i._)("div",ps,[r.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(X.t,{key:0,color:"white",class:"tw-animate-spin",size:"x-small"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-loading")])),_:1})),r.isLoaded?((0,i.wg)(),(0,i.iD)("p",ms,(0,Q.zw)(l.sales.length),1)):(0,i.kq)("",!0)]),(0,i.Wm)(es.C),r.link.hasChildren?((0,i.wg)(),(0,i.j4)(X.t,{key:2,class:(0,Q.C_)(["item-icon",{activeRotate:r.isActive}]),icon:"mdi-chevron-right"},null,8,["class"])):(0,i.kq)("",!0)])])),_:1},8,["class","to"]),r.link.hasChildren?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,Q.C_)([{"!tw-max-h-[1000px] mb-2 mt-n3":r.isActive},"tw-max-h-0 tw-w-auto mx-3 tw-overflow-hidden tw-duration-300"])},[(0,i._)("div",hs,[(0,i.Wm)(Qe.i,{density:"compact"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allowedChildren,(t=>((0,i.wg)(),(0,i.j4)(Be.l,{key:t.id,link:"",exact:"",active:!1,to:t.to,height:"10",class:"!tw-h-fit !tw-py-0"},{default:(0,i.w5)((()=>[(0,i._)("div",gs,[(0,i.Wm)(X.t,{size:"x-small",class:"mr-2",color:l.isSublinkActive(t)?"primary-color":"secondary-color",icon:l.isSublinkActive(t)?"mdi-chevron-double-right":"mdi-circle-medium"},null,8,["color","icon"]),(0,i._)("span",{class:(0,Q.C_)(["tw-text-sm",{"text-primary-color":l.isSublinkActive(t)}])},(0,Q.zw)(t.title),3)])])),_:2},1032,["to"])))),128))])),_:1})])],2)):(0,i.kq)("",!0)])):(0,i.kq)("",!0)}class vs{async all(){return await Y.getCookie(),M.get("api/sales")}async delete(t){return await Y.getCookie(),M.get("api/sales/delete/"+t)}async update(t,e){return await Y.getCookie(),M.post("api/orders/update/"+t,e)}async create(t){return await Y.getCookie(),M.post("api/sales/new",t)}async getNewOrders(t){return await Y.getCookie(),M.post("api/sales/fresh",{ids:t})}async agenteOrders(){return await Y.getCookie(),M.get("api/orders")}async agenteConfirmedOrders(){return await Y.getCookie(),M.get("api/orders/confirmer")}async agenteAddOrder(){return await Y.getCookie(),M.get("api/orders/add")}async agenteGetOrder(){return await Y.getCookie(),M.get("api/orders/toconfirmate")}async agenteUpdateConfirmation(t,e,s={}){return await Y.getCookie(),M.post("api/orders/update/confirmation/"+t,{confirmation:e,...s})}async agenteUpdateConfirmationWithNote(t,e,s){return await Y.getCookie(),M.post("api/orders/update/confirmationandnote/"+t,{confirmation:e,note:s})}async agenteUpdateUpsell(t,e){return await Y.getCookie(),M.post("api/orders/update/upsell/"+t,{upsell:e})}async agenteUpdateAffectaion(t,e){return await Y.getCookie(),M.post("api/orders/update/affectation/"+t,{affectation:e})}async agenteUpdateNote(t,e){return await Y.getCookie(),M.post("api/orders/update/note/"+t,{note:e})}async deliveryOrders(){return await Y.getCookie(),M.get("api/orders/todelivery")}async deliveryDeliveredOrders(){return await Y.getCookie(),M.get("api/orders/delivred")}async deliveryUpdateDelivery(t,e,s){return await Y.getCookie(),M.post("api/orders/update/delivery/"+t,{delivery:e,...s})}async history(t){return await Y.getCookie(),M.get("api/orders/history/show/"+t)}async resetSale(t){return await Y.getCookie(),M.post("api/sales/reset",{ids:t})}async scanSale(t){return await Y.getCookie(),M.post("api/sales/scan",t)}async availableOrders(){return await Y.getCookie(),M.get("api/orders/count")}}var ys=new vs,_s={props:[],data(){return{localUrl:R,isActive:!1,isLoaded:!1,link:{id:4,module:"sale",title:"Sales",hasChildren:!0,gate:"access_to_sales",icon:{type:"icon",value:"mdi-sale"},children:[{id:1,title:"Sales list",subModule:"sale/list",gate:"show_all_sales",to:"/sales"},{id:2,title:"Expidation",subModule:"sale/expidation",gate:"show_all_expidations",to:"/sales/expidation"},{id:3,title:"Shipping",subModule:"sale/shipping",gate:"show_all_expidations",to:"/sales/shipping"}]}}},methods:{handleClick(){this.$route.path!==this.link.to?this.isActive=!this.isActive:this.isActive=!0},isSublinkActive(t){return this.$route.path==t.to},isLinkActive(){return this.link.hasChildren?this.link.module==this.$route.meta.module:this.link.to===this.$route.path},getSales(){return this.isLoaded=!1,ys.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)}},computed:{allowedChildren(){return this.link?.children.filter((t=>this.$can(t.gate)||"all"===t.gate))},sales(){return this.$store.getters["sale/sales"]}},watch:{$route(){this.isActive=this.isLinkActive()}},mounted(){this.isActive=this.isLinkActive(),this.$can(this.link.gate)&&this.getSales()}};const xs=(0,d.Z)(_s,[["render",fs],["__scopeId","data-v-3ced7c70"]]);var bs=xs;const ks={key:0},Cs={class:"d-flex align-center"},Ds={class:"tw-w-fit tw-h-[24px] tw-flex tw-items-center tw-justify-center tw-px-1 tw-bg-orange-500 tw-text-sm tw-text-white tw-rounded tw-ml-2"},Ss={key:1,class:"tw-text-xs"};function zs(t,e,s,a,r,l){return t.$can(r.link.gate)||"all"==r.link.gate?((0,i.wg)(),(0,i.iD)("div",ks,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.link.children,(s=>((0,i.wg)(),(0,i.j4)(Be.l,{class:(0,Q.C_)(["mx-3 mb-2",{"bg-secondary-color":t.$route.path==s.to}]),onClick:e[0]||(e[0]=t=>l.handleClick()),density:"comfortable",active:!1,ripple:!1,to:s.to,link:"",key:s.id},{default:(0,i.w5)((()=>[(0,i._)("div",Cs,[(0,i.Wm)(X.t,{icon:s.icon,color:t.$route.path==s.to?"white":"grey-darken-2",class:"mr-2",size:"small"},null,8,["icon","color"]),(0,i.Wm)(ss.V,{class:(0,Q.C_)(["text-body-2 font-weight-regular",{"text-white":t.$route.path==s.to}]),textContent:(0,Q.zw)(s.title)},null,8,["class","textContent"]),(0,i.Wm)(es.C),(0,i._)("div",Ds,[l.fetched?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(X.t,{key:0,color:"white",class:"tw-animate-spin",size:"x-small"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-loading")])),_:1})),l.fetched?((0,i.wg)(),(0,i.iD)("p",Ss,(0,Q.zw)(1==s.id?l.orders.length-l.deliveredOrders.length:l.deliveredOrders.length),1)):(0,i.kq)("",!0)])])])),_:2},1032,["class","to"])))),128))])):(0,i.kq)("",!0)}class Us{async delivery(){return await Y.getCookie(),M.get("api/dashboard/delivery")}async agente(){return await Y.getCookie(),M.get("api/dashboard/agente")}}var Ls=new Us,Ps={props:[],data(){return{localUrl:R,isActive:!1,isLoaded:!1,link:{id:7,module:"delivery",title:"Orders",hasChildren:!1,gate:"access_to_delivery",icon:{type:"icon",value:"mdi-bike"},children:[{id:1,title:"Orders",subModule:"delivery/list",gate:"show_all_deliveries",to:"/deliveries",icon:"mdi-truck"},{id:2,title:"Delivered Orders",subModule:"delivery/delivered",gate:"show_all_deliveries",to:"/delivered",icon:"mdi-truck-check"}]}}},methods:{handleClick(){this.$route.path!==this.link.to?this.isActive=!this.isActive:this.isActive=!0},isSublinkActive(t){return this.$route.path==t.to},isLinkActive(){return this.link.hasChildren?this.link.module==this.$route.meta.module:this.link.to===this.$route.path},getOrders(){return this.isLoaded=!1,Ls.delivery().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("order/setAllOrders",e),this.$store.dispatch("order/setFetched",!0),this.isLoaded=!0}console.log(t)})).catch(this.$handleApiError)}},computed:{allowedChildren(){return this.link?.children.filter((t=>this.$can(t.gate)||"all"===t.gate))},orders(){return this.$store.getters["order/allOrders"].filter((t=>"confirmer"==t.confirmation))},deliveredOrders(){return this.orders.filter((t=>"livrer"==t.delivery))},fetched(){return this.$store.getters["order/fetched"]}},watch:{$route(){this.isActive=this.isLinkActive()}},mounted(){this.isActive=this.isLinkActive(),this.$can(this.link.gate)&&this.getOrders()}};const As=(0,d.Z)(Ps,[["render",zs],["__scopeId","data-v-69fa82e9"]]);var Ws=As;const $s={key:0},Es={class:"d-flex align-center"},Os={key:0,class:"tw-w-fit tw-h-[24px] tw-flex tw-items-center tw-justify-center tw-px-1 tw-bg-orange-500 tw-text-sm tw-text-white tw-rounded tw-ml-2"},Ts={key:1,class:"tw-text-xs"},Vs={key:1,class:"tw-w-fit tw-h-[24px] tw-flex tw-items-center tw-justify-center tw-px-1 tw-bg-orange-500 tw-text-sm tw-text-white tw-rounded tw-ml-2"},qs={key:1,class:"tw-text-xs"};function Rs(t,e,s,a,r,l){return t.$can(r.link.gate)||"all"==r.link.gate?((0,i.wg)(),(0,i.iD)("div",$s,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.link.children,(s=>((0,i.wg)(),(0,i.j4)(Be.l,{class:(0,Q.C_)(["mx-3 mb-2",{"bg-secondary-color":t.$route.path==s.to}]),onClick:e[0]||(e[0]=t=>l.handleClick()),density:"comfortable",active:!1,ripple:!1,to:s.to,link:"",key:s.id},{default:(0,i.w5)((()=>[(0,i._)("div",Es,[(0,i.Wm)(X.t,{icon:s.icon,color:t.$route.path==s.to?"white":"grey-darken-2",class:"mr-2",size:"small"},null,8,["icon","color"]),(0,i.Wm)(ss.V,{class:(0,Q.C_)(["text-body-2 font-weight-regular",{"text-white":t.$route.path==s.to}]),textContent:(0,Q.zw)(s.title)},null,8,["class","textContent"]),(0,i.Wm)(es.C),1!=s.id?((0,i.wg)(),(0,i.iD)("div",Os,[l.fetched?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(X.t,{key:0,color:"white",class:"tw-animate-spin",size:"x-small"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-loading")])),_:1})),l.fetched?((0,i.wg)(),(0,i.iD)("p",Ts,(0,Q.zw)(2==s.id?l.myOrders.length:l.confirmedOrders.length),1)):(0,i.kq)("",!0)])):(0,i.kq)("",!0),1==s.id?((0,i.wg)(),(0,i.iD)("div",Vs,[r.isCountLoading?((0,i.wg)(),(0,i.j4)(X.t,{key:0,color:"white",class:"tw-animate-spin",size:"x-small"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-loading")])),_:1})):(0,i.kq)("",!0),r.isCountLoading?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",qs,(0,Q.zw)(r.available),1))])):(0,i.kq)("",!0)])])),_:2},1032,["class","to"])))),128))])):(0,i.kq)("",!0)}var Fs={props:[],data(){return{localUrl:R,isActive:!1,isLoaded:!1,isCountLoading:!1,available:0,link:{id:6,module:"order",title:"Orders",hasChildren:!0,gate:"access_to_orders",icon:{type:"icon",value:"mdi-barcode-scan"},children:[{id:1,title:"Order",subModule:"order/show",gate:"show_all_orders",to:"/order",icon:"mdi-plus-box"},{id:2,title:"My Orders",subModule:"order/list",gate:"show_all_orders",to:"/orders",icon:"mdi-package-variant-closed"},{id:3,title:"Confirmed Orders",subModule:"order/confirmed",gate:"show_all_orders",to:"/orders/confirmed",icon:"mdi-checkbox-marked"}]}}},methods:{handleClick(){this.$route.path!==this.link.to?this.isActive=!this.isActive:this.isActive=!0},isSublinkActive(t){return this.$route.path==t.to},isLinkActive(){return this.link.hasChildren?this.link.module==this.$route.meta.module:this.link.to===this.$route.path},getOrders(){return this.isLoaded=!1,Ls.agente().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("order/setAllOrders",e),this.$store.dispatch("order/setFetched",!0),this.isLoaded=!0}console.log(t)})).catch(this.$handleApiError)},getCountOrders(){this.isCountLoading=!0,ys.availableOrders().then((t=>{console.log(t),"SUCCESS"==t.data.code&&(this.available=t.data.data.availble)}),this.$handleApiError).finally((()=>{this.isCountLoading=!1}))}},computed:{allowedChildren(){return this.link?.children.filter((t=>this.$can(t.gate)||"all"===t.gate))},orders(){return this.$store.getters["order/allOrders"]},myOrders(){return this.orders.filter((t=>"confirmer"!=t.confirmation))},confirmedOrders(){return this.orders.filter((t=>"confirmer"==t.confirmation))},fetched(){return this.$store.getters["order/fetched"]}},watch:{$route(){this.isActive=this.isLinkActive()},orders(){this.getCountOrders()}},mounted(){this.isActive=this.isLinkActive(),this.$can(this.link.gate)&&(this.getOrders(),this.getCountOrders())}};const Is=(0,d.Z)(Fs,[["render",Rs],["__scopeId","data-v-0cd1b9c4"]]);var js=Is,Ns={props:["link"],components:{SidebarSales:bs,SidebarDelivery:Ws,SidebarAgente:js},data(){return{localUrl:R,disabled_links:Xe,isActive:!1}},methods:{handleClick(){this.$route.path!==this.link.to?this.isActive=!this.isActive:this.isActive=!0},isSublinkActive(t){return this.$route.path==t.to},isLinkActive(){return this.link.hasChildren?this.link.module==this.$route.meta.module:this.link.to===this.$route.path}},computed:{allowedChildren(){return this.link?.children.filter((t=>this.$can(t.gate)||"all"===t.gate))}},watch:{$route(){this.isActive=this.isLinkActive()}},mounted(){this.isActive=this.isLinkActive()}};const Ms=(0,d.Z)(Ns,[["render",ws],["__scopeId","data-v-35ca0437"]]);var Hs=Ms,Ys={components:{SidebarItem:Hs},props:["active"],data(){return{localUrl:R,drawer:!0,links:ts}},computed:{},watch:{active(){this.drawer=!this.drawer}},methods:{},mounted(){this.$vuetify.display.mdAndDown&&(this.drawer=!1)}};const Ks=(0,d.Z)(Ys,[["render",Je]]);var Zs=Ks,Bs=s(4410),Qs=s.n(Bs),Gs=s(6027);class Js{async all(){return await Y.getCookie(),M.get("api/sheets")}async create(t){await Y.getCookie();const e={name:t.name,sheet_id:t.sheet_id,sheet_name:t.sheet_name,auto_fetch:t.auto_fetch};return M.post("api/sheets",e)}async update(t,e){await Y.getCookie();const s={name:e.name,sheet_id:e.sheet_id,sheet_name:e.sheet_name,auto_fetch:e.auto_fetch};return M.post("api/sheets/"+t,s)}async delete(t){return await Y.getCookie(),M["delete"]("api/sheets/"+t)}async updateAutoFetch(t,e){return await Y.getCookie(),M.post("api/sheets/"+t+"/auto-fetch",{autoFetch:e})}async sync(t){return await Y.getCookie(),M.get("api/sync/"+t)}async sync_all(){return await Y.getCookie(),M.get("api/sync")}async auto(){return await Y.getCookie(),M.post("api/sync")}async saveOrders(t){return await Y.getCookie(),M.get("api/sync/"+t+"/save")}}var Xs=new Js;class ta{async create(t){await Y.getCookie();const e=new FormData;return e.append("name",t.name),e.append("buying_price",t.buyingPrice),e.append("selling_price",t.sellingPrice),e.append("ref",t.reference),e.append("variations",JSON.stringify(t.variants)),e.append("offers",JSON.stringify(t.offers)),e.append("description",t.description),e.append("image",t.image),e.append("deliveries",JSON.stringify(t.selectedDeliveries)),e.append("status",1),N.post("api/products/new",e)}async update(t,e){await Y.getCookie();const s=new FormData;return s.append("name",e.name),s.append("buying_price",e.buyingPrice),s.append("selling_price",e.sellingPrice),s.append("ref",e.reference),s.append("variations",JSON.stringify(e.variants)),s.append("offers",JSON.stringify(e.offers)),s.append("description",e.description),s.append("image",e.image),s.append("deliveries",JSON.stringify(e.selectedDeliveries)),s.append("status",1),N.post("api/products/update/"+t,s)}async all(){return await Y.getCookie(),M.get("api/products")}async getProduct(t){return await Y.getCookie(),M.get("api/products/"+t)}async delete(t){return await Y.getCookie(),M["delete"]("api/products/delete/"+t)}async stockAlert(){return await Y.getCookie(),M.get("api/product/stockAlert")}}var ea=new ta,sa={components:{AppHeader:Ze,AppSidebar:Zs,Alert:Et},data(){return{drawer:!1,subscribed:!1,fetching:null,delay:6e4,showScrollUpButton:!1}},computed:{isLoggedIn(){return this.$store.getters["user/isLoggedIn"]},cities(){return this.$store.getters["city/cities"]},user(){return this.$store.getters["user/user"]},sales(){return this.$store.getters["sale/sales"]},salesFetched(){return this.$store.getters["sale/fetched"]}},methods:{toggleSidebar(){this.drawer=!this.drawer},checkScroll(){this.showScrollUpButton=window.scrollY>100},scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})},async getCities(){if(0==this.cities.length||1!=localStorage.getItem("update_cities"))return Z.cities().then((t=>{const e=t.data.data;this.$store.dispatch("city/setCities",e),localStorage.setItem("update_cities",1)}))},subscribe(){console.log(Qs());const t=new Gs.Z({broadcaster:"pusher",key:"ABCDEFG",wsHost:"127.0.0.1",wsPort:6001,forceTLS:!1,disableStats:!0,cluster:"mt1"});window.Echo=t,t.channel("notification").listenToAll((t=>{console.log(t)})),this.subscribed=!0},sync_sheets(){"admin"==this.user.role?Xs.sync_all().then((t=>{if("SUCCESS"==t.data.code){const e=[...t.data.data.orders,...this.sales];this.$store.dispatch("sale/setSales",e),t.data.data.orders.length>0&&this.$alert({type:"info",title:t.data.data.orders.length+" New orders has been added"})}})):Xs.auto()},getUsers(){Z.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),this.$store.dispatch("user/setFetched",!0)}})).catch(this.$handleApiError)},getProducts(){return ea.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))},fetchNewOrders(){if(this.salesFetched){const t=this.sales.map((t=>t.id));ys.getNewOrders(t).then((t=>{if("SUCCESS"==t.data.code){const e=t.data.data.orders;e.length>0&&(this.$store.dispatch("sale/addSales",e),this.$alert({type:"info",title:e.length+" New orders has been added"}))}}))}}},mounted(){this.getCities(),"admin"==this.user.role&&(this.fetching=setInterval(this.fetchNewOrders,this.delay)),this.$can("show_all_products")&&this.getProducts(),this.getUsers(),window.addEventListener("scroll",this.checkScroll)},unmounted(){window.removeEventListener("scroll",this.checkScroll)}};const aa=(0,d.Z)(sa,[["render",It]]);var ia=aa;function ra(t,e,s,a,r,l){return(0,i.wg)(),(0,i.iD)("div",null,[((0,i.wg)(),(0,i.j4)((0,i.LL)(l.dashboard)))])}var la=s(6824),oa=s(8521);const na={key:0},da={key:1},wa=(0,i._)("div",{class:"mb-2 mt-5 tw-flex tw-justify-between tw-items-center"},[(0,i._)("div",null,[(0,i._)("h2",{class:"tw-text-gray-500 tw-text-lg"},"Online")])],-1),ca={class:"py-2 px-2 tw-border bg-white tw-w-full tw-rounded"},ua={class:"mb-2 mt-2 tw-flex tw-justify-between tw-items-center tw-w-full"},pa={class:"tw-flex tw-items-center tw-justify-between tw-w-full"},ma=(0,i._)("h2",{class:"tw-text-gray-500 tw-text-lg"},"Statistiques",-1),ha=["disabled"],ga={key:0,class:"tw-flex tw-items-center tw-gap-2"},fa={key:1},va=(0,i._)("svg",{"aria-hidden":"true",role:"status",class:"tw-inline tw-w-4 tw-h-4 tw-mr-3 tw-text-white tw-animate-spin",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,i._)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"#E5E7EB"}),(0,i._)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentColor"})],-1),ya={class:"px-5 tw-border bg-white tw-w-full tw-rounded-md"};function _a(t,e,s,a,r,l){const o=(0,i.up)("LoadingAnimation"),n=(0,i.up)("UsersTable"),d=(0,i.up)("FilterTabs"),w=(0,i.up)("DashItem"),c=(0,i.up)("TabSwitcher");return(0,i.wg)(),(0,i.iD)("div",null,[l.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",na,[(0,i.Wm)(o)])),l.isLoaded?((0,i.wg)(),(0,i.iD)("div",da,[wa,(0,i._)("div",ca,[(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{cols:"12",md:"12"},{default:(0,i.w5)((()=>[(0,i.Wm)(n)])),_:1})])),_:1})]),(0,i._)("div",ua,[(0,i._)("div",pa,[ma,(0,i._)("button",{disabled:r.updating,onClick:e[0]||(e[0]=(...t)=>l.updateSales&&l.updateSales(...t)),type:"button",class:"tw-text-white tw-w-fit tw-my-2 tw-bg-gradient-to-r tw-from-cyan-500 tw-to-blue-500 hover:tw-bg-gradient-to-bl focus:tw-ring-4 focus:tw-outline-none focus:tw-ring-cyan-300 dark:focus:tw-ring-cyan-800 tw-font-medium tw-rounded-lg tw-text-sm tw-px-5 tw-py-2.5 tw-text-center tw-mr-2 dark:tw-bg-blue-600 dark:hover:tw-bg-blue-700 tw-duration-200 tw-gap-2 tw-pointer-events-auto tw-inline-flex tw-items-center"},[r.updating?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",ga,[(0,i.Wm)(X.t,{class:"tw-text-sm",color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-autorenew")])),_:1}),(0,i.Uk)(" Refresh ")])),r.updating?((0,i.wg)(),(0,i.iD)("div",fa,[va,(0,i.Uk)(" loading... ")])):(0,i.kq)("",!0)],8,ha)])]),(0,i._)("div",ya,[(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{cols:"12",md:"12"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{filters:r.filters,"onUpdate:filters":e[1]||(e[1]=t=>r.filters=t)},null,8,["filters"])])),_:1})])),_:1}),(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{cols:"12",sm:"6",md:"3"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{dash:l.dashChiffreAffaires},null,8,["dash"])])),_:1}),(0,i.Wm)(oa.D,{cols:"12",sm:"6",md:"3"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{dash:l.dashChiffreAffairesVerse},null,8,["dash"])])),_:1}),(0,i.Wm)(oa.D,{cols:"12",sm:"6",md:"3"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{dash:l.dashChiffreAffairesNonVerse},null,8,["dash"])])),_:1}),(0,i.Wm)(oa.D,{cols:"12",sm:"6",md:"3"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{dash:l.dashChiffreAffairesEnCaisse},null,8,["dash"])])),_:1})])),_:1}),(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{cols:"12",md:"12"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{"filtered-sales":l.filteredSales},null,8,["filtered-sales"])])),_:1})])),_:1})])])):(0,i.kq)("",!0)])}var xa=s(4286);const ba={class:"tw-flex tw-items-center"},ka={class:"tw-flex tw-flex-col tw-h-full tw-text-neutral-600"},Ca={class:"tw-text-lg tw-font-bold"},Da={class:"tw-text-sm"};function Sa(t,e,s,a,r,l){return(0,i.wg)(),(0,i.j4)(xa.C,{class:"tw-rounded-lg tw-border pa-5 py-2",color:"white",height:"fit"},{default:(0,i.w5)((()=>[(0,i._)("div",ba,[(0,i._)("div",{class:(0,Q.C_)([l.bgColor,"pa-3 rounded-circle tw-w-fit tw-mr-3"])},[(0,i.Wm)(X.t,{color:s.dash.color,size:"large",icon:s.dash.icon},null,8,["color","icon"])],2),(0,i._)("div",ka,[(0,i._)("p",Ca,(0,Q.zw)(s.dash.value),1),(0,i.Wm)(es.C),(0,i._)("p",Da,(0,Q.zw)(s.dash.title),1)])])])),_:1})}var za={props:["dash"],computed:{bgColor(){const t={orange:"tw-bg-orange-500/10",green:"tw-bg-green-500/10",blue:"tw-bg-blue-500/10",pink:"tw-bg-pink-500/10",red:"tw-bg-red-500/10",yellow:"tw-bg-yellow-500/10"};return t[this.dash.color]}}};const Ua=(0,d.Z)(za,[["render",Sa]]);var La=Ua;const Pa={key:0,class:""},Aa={class:"tw-flex tw-items-center tw-flex-wrap tw-gap-2"},Wa=(0,i._)("div",{class:"tw-w-[120px] tw-h-[55px] tw-bg-neutral-300/10 tw-animate-pulse tw-rounded tw-border tw-grid tw-grid-cols-12"},null,-1),$a=[Wa],Ea={key:1,class:"tw-min-h-[50px]"},Oa={class:"tw-flex tw-items-center tw-flex-wrap tw-gap-2"},Ta={class:"py-2 px-3 tw-rounded tw-border tw-grid tw-grid-cols-12"},Va={class:"tw-col-span-12 tw-font-medium tw-capitalize tw-text-sm tw-text-neutral-600 tw-whitespace-nowrap"},qa={class:"tw-col-span-12 tw-whitespace-nowrap tw-text-xs"},Ra={key:0,class:"tw-text-red-500 tw-flex tw-items-center tw-gap-2"},Fa=(0,i._)("div",{class:"tw-p-1 tw-rounded-full tw-bg-red-400"},null,-1),Ia={key:1},ja={key:0,class:"tw-text-green-500 tw-flex tw-items-center tw-gap-2"},Na=(0,i._)("div",{class:"tw-p-1 tw-rounded-full tw-bg-green-500"},null,-1),Ma={key:1,class:"tw-flex tw-items-center tw-gap-2"},Ha=(0,i._)("div",{class:"tw-p-1 tw-rounded-full tw-bg-yellow-400"},null,-1);function Ya(t,e,s,a,r,l){return(0,i.wg)(),(0,i.iD)("div",null,[r.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",Pa,[(0,i._)("div",Aa,[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(4,(t=>(0,i._)("div",{key:t},$a))),64))])])),r.isLoaded?((0,i.wg)(),(0,i.iD)("div",Ea,[(0,i._)("div",Oa,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.users,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.id},[(0,i._)("div",Ta,[(0,i._)("div",Va,(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),1),(0,i._)("div",qa,[t.last_action?((0,i.wg)(),(0,i.iD)("div",Ia,[1==l.isOnline(l.lastSeen(t.last_action))?((0,i.wg)(),(0,i.iD)("div",ja,[Na,(0,i.Uk)(" Online ")])):((0,i.wg)(),(0,i.iD)("div",Ma,[Ha,(0,i.Uk)(" "+(0,Q.zw)(l.lastSeen(t.last_action)),1)]))])):((0,i.wg)(),(0,i.iD)("div",Ra,[Fa,(0,i.Uk)(" Never Connected ")]))])])])))),128))]),(0,i.kq)("",!0)])):(0,i.kq)("",!0)])}var Ka=s(8777),Za={components:{},data(){return{isLoaded:!1}},computed:{users(){return this.$store.getters["user/users"].filter((t=>"admin"!=t.role_name))}},methods:{getUsers(){Z.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),console.log(t),this.isLoaded=!0}})).catch(this.$handleApiError)},lastSeen(t){let e=Date.parse(t.replace("-","/"))/1e3;return(0,Ka.x)(e)},isOnline(t){let e=["Just Now","1 minute ago","2 minute ago"];return e.includes(t)}},mounted(){this.getUsers()}};const Ba=(0,d.Z)(Za,[["render",Ya]]);var Qa=Ba,Ga=s(1489),Ja=s(3144),Xa=s(9870),ti=s(6161),ei=s(4722);function si(t,e,s,a,r,l){return(0,i.wg)(),(0,i.j4)(Ga._,{flat:""},{default:(0,i.w5)((()=>[(0,i.Wm)(Ja.d,{modelValue:r.tab,"onUpdate:modelValue":e[0]||(e[0]=t=>r.tab=t),color:"primary-color","align-tabs":"start",density:"compact"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.tabs,(t=>((0,i.wg)(),(0,i.j4)(Xa.L,{key:t.id,value:t.id},{default:(0,i.w5)((()=>[(0,i.Uk)((0,Q.zw)(t.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"]),(0,i.Wm)(ti.Oo,{class:"tw-mt-0",modelValue:r.tab,"onUpdate:modelValue":e[1]||(e[1]=t=>r.tab=t)},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.tabs,(t=>((0,i.wg)(),(0,i.j4)(ei.H,{key:t.id,value:t.id,transition:"fade-transition","reverse-transition":"fade-transition"},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)((0,i.LL)(t.component),{"filtered-sales":s.filteredSales},null,8,["filtered-sales"]))])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})}const ai={class:"tw-grid tw-mb-5 tw-grid-cols-4 md:tw-grid-cols-4 lg:tw-grid-cols-4 tw-gap-2 py-5"},ii={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},ri={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},li={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},oi={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},ni={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},di={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},wi={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"};function ci(t,e,s,a,r,l){const o=(0,i.up)("DashItemTwo");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",ai,[(0,i._)("div",ii,[(0,i.Wm)(o,{dash:l.totalSales},null,8,["dash"])]),(0,i._)("div",ri,[(0,i.Wm)(o,{dash:l.deliveredSales},null,8,["dash"])]),(0,i._)("div",li,[(0,i.Wm)(o,{dash:l.shippedSales},null,8,["dash"])]),(0,i._)("div",oi,[(0,i.Wm)(o,{dash:l.reportedSales},null,8,["dash"])]),(0,i._)("div",ni,[(0,i.Wm)(o,{dash:l.noanswerSales},null,8,["dash"])]),(0,i._)("div",di,[(0,i.Wm)(o,{dash:l.canceledSales},null,8,["dash"])]),(0,i._)("div",wi,[(0,i.Wm)(o,{dash:l.transferSales},null,8,["dash"])])])])}const ui={class:"tw-flex tw-justify-between tw-items-center tw-w-full tw-h-full pa-3 px-4"},pi={class:"tw-flex tw-flex-col tw-justify-center tw-w-full tw-h-full tw-text-white"},mi={class:"tw-text-xl tw-font-bold"},hi={class:"tw-flex tw-items-center tw-gap-1 tw-w-full tw-h-full tw-text-white"},gi={class:"tw-text-sm"},fi={class:"rounded-circle tw-w-fit tw-mr-3"};function vi(t,e,s,a,r,l){const o=(0,i.up)("number");return(0,i.wg)(),(0,i.j4)(xa.C,{class:"tw-rounded-lg",color:s.dash.color,height:"70"},{default:(0,i.w5)((()=>[(0,i._)("div",ui,[(0,i._)("div",pi,[(0,i._)("p",mi,(0,Q.zw)(isNaN(s.dash.pourcentage)?"0.00%":s.dash.pourcentage)+" "+(0,Q.zw)(s.symbol),1),(0,i._)("span",hi,[s.numbers?((0,i.wg)(),(0,i.j4)(o,{key:0,class:"tw-font-bold",ref:"number1",from:0,to:s.dash.value,duration:1,delay:0,easing:"Power.easeOut"},null,8,["to"])):(0,i.kq)("",!0),(0,i._)("p",gi,(0,Q.zw)(s.dash.title),1)])]),(0,i._)("div",fi,[(0,i.Wm)(X.t,{color:"white",size:"large",class:"md:tw-scale-[1.8] tw-scale-[1.3]",icon:s.dash.icon},null,8,["icon"])])])])),_:1},8,["color"])}var yi={props:{dash:{required:!0},symbol:{required:!1,default:"%"},numbers:{required:!1,default:!0}}};const _i=(0,d.Z)(yi,[["render",vi]]);var xi=_i,bi={components:{DashItemTwo:xi},props:["filteredSales"],data(){return{isLoaded:!1}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},sales(){return this.filteredSales},totalSales(){return{id:1,title:"Total",value:this.sales.filter((t=>"confirmer"==t.confirmation)).length,pourcentage:100*this.sales.filter((t=>"confirmer"==t.confirmation)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length,color:"deep-purple-accent-2",icon:"mdi mdi-all-inclusive"}},deliveredSales(){return{id:2,title:"Delivered",value:this.sales.filter((t=>"livrer"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"livrer"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"primary-green",icon:"mdi-account-check-outline"}},toProcess(){return{id:3,title:"Process",value:this.sales.filter((t=>!!t.confirmation&&!["confirmer","livrer","expidier"].includes(t.delivery))).length,color:"primary-orange",icon:"mdi-reload"}},shippedSales(){return{id:4,title:"Shipped",value:this.sales.filter((t=>"expidier"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"expidier"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"primary-orange",icon:"mdi-truck"}},transferSales(){return{id:8,title:"Transferred",value:this.sales.filter((t=>"transfer"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"transfer"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"purple-darken-1",icon:"mdi-truck"}},reportedSales(){return{id:5,title:"Reported",value:this.sales.filter((t=>"reporter"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"reporter"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"primary-blue",icon:"mdi mdi-clock-outline"}},canceledSales(){return{id:6,title:"Canceled",value:this.sales.filter((t=>"annuler"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"annuler"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"red-accent-3",icon:"mdi mdi-cancel"}},noanswerSales(){return{id:6,title:"No Answer",value:this.sales.filter((t=>"pas-de-reponse"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"pas-de-reponse"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"yellow-darken-3",icon:"mdi mdi-headphones-off"}}},mounted(){ys.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;console.log(t.data),this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)}};const ki=(0,d.Z)(bi,[["render",ci]]);var Ci=ki;const Di={class:"tw-grid tw-mb-5 tw-grid-cols-4 md:tw-grid-cols-4 lg:tw-grid-cols-4 tw-gap-2 py-5"},Si={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},zi={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Ui={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Li={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Pi={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Ai={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Wi={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},$i={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"};function Ei(t,e,s,a,r,l){const o=(0,i.up)("DashItemTwo");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Di,[(0,i._)("div",Si,[(0,i.Wm)(o,{dash:l.totalSales},null,8,["dash"])]),(0,i._)("div",zi,[(0,i.Wm)(o,{dash:l.confirmedSales},null,8,["dash"])]),(0,i._)("div",Ui,[(0,i.Wm)(o,{dash:l.newSales},null,8,["dash"])]),(0,i._)("div",Li,[(0,i.Wm)(o,{dash:l.reportedSales},null,8,["dash"])]),(0,i._)("div",Pi,[(0,i.Wm)(o,{dash:l.noanswerSales},null,8,["dash"])]),(0,i._)("div",Ai,[(0,i.Wm)(o,{dash:l.canceledSales},null,8,["dash"])]),(0,i._)("div",Wi,[(0,i.Wm)(o,{dash:l.doubledSales},null,8,["dash"])]),(0,i._)("div",$i,[(0,i.Wm)(o,{dash:l.wrongNumberSales},null,8,["dash"])])])])}var Oi={components:{DashItemTwo:xi},props:["filteredSales"],data(){return{isLoaded:!1}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},sales(){return this.filteredSales},totalSales(){return{id:1,title:"Total",pourcentage:100,value:this.sales.length,color:"deep-purple-accent-2",icon:"mdi mdi-all-inclusive"}},newSales(){return{id:2,title:"New",value:this.sales.filter((t=>!t.confirmation)).length,pourcentage:(100*this.sales.filter((t=>!t.confirmation)).length/this.sales.length).toFixed(2),color:"grey",icon:"mdi mdi-new-box"}},toProcess(){return{id:3,title:"Process",value:this.sales.filter((t=>!!t.confirmation&&!["confirmer","livrer","expidier"].includes(t.confirmation))).length,pourcentage:(100*this.sales.filter((t=>!!t.confirmation&&!["confirmer","livrer","expidier"].includes(t.confirmation))).length/this.sales.length).toFixed(2),color:"primary-orange",icon:"mdi-reload"}},confirmedSales(){return{id:4,title:"Confirmed",value:this.sales.filter((t=>"confirmer"==t.confirmation)).length,pourcentage:(100*this.sales.filter((t=>"confirmer"==t.confirmation)).length/this.sales.length).toFixed(2),color:"primary-green",icon:"mdi-phone-check"}},reportedSales(){return{id:5,title:"Reported",value:this.sales.filter((t=>"reporter"==t.confirmation)).length,pourcentage:(100*this.sales.filter((t=>"reporter"==t.confirmation)).length/this.sales.length).toFixed(2),color:"primary-blue",icon:"mdi mdi-clock-outline"}},canceledSales(){return{id:6,title:"Canceled",value:this.sales.filter((t=>"annuler"==t.confirmation)).length,pourcentage:(100*this.sales.filter((t=>"annuler"==t.confirmation)).length/this.sales.length).toFixed(2),color:"red-accent-3",icon:"mdi mdi-cancel"}},noanswerSales(){return{id:6,title:"No Answer",value:this.sales.filter((t=>["day-one-call-one","day-one-call-two","day-one-call-three","day-two-call-one","day-two-call-two","day-two-call-three","day-three-call-one","day-three-call-two","day-three-call-three"].includes(t.confirmation))).length,pourcentage:(100*this.sales.filter((t=>["day-one-call-one","day-one-call-two","day-one-call-three","day-two-call-one","day-two-call-two","day-two-call-three","day-three-call-one","day-three-call-two","day-three-call-three"].includes(t.confirmation))).length/this.sales.length).toFixed(2),color:"yellow-darken-3",icon:"mdi mdi-headphones-off"}},doubledSales(){return{id:8,title:"Doubled",pourcentage:(100*this.sales.filter((t=>"double"==t.confirmation)).length/this.sales.length).toFixed(2),value:this.sales.filter((t=>"double"==t.confirmation)).length,color:"purple-accent-4",icon:"mdi mdi-selection-multiple"}},wrongNumberSales(){return{id:9,title:"Wrong Number",pourcentage:(100*this.sales.filter((t=>"wrong-number"==t.confirmation)).length/this.sales.length).toFixed(2),value:this.sales.filter((t=>"wrong-number"==t.confirmation)).length,color:"purple-lighten-1",icon:"mdi mdi-phone-remove"}}},mounted(){ys.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;console.log(t.data),this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)}};const Ti=(0,d.Z)(Oi,[["render",Ei]]);var Vi=Ti,qi={components:{DeliveryTab:Ci,ConfirmationTab:Vi},props:["filteredSales"],data(){return{tab:1,tabs:[{id:1,name:"Confirmation",component:"ConfirmationTab"},{id:2,name:"Delivery",component:"DeliveryTab"}]}}};const Ri=(0,d.Z)(qi,[["render",si]]);var Fi=Ri;const Ii={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4 py-5"},ji={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},Ni={class:"tw-relative"},Mi={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},Hi={class:"tw-relative"},Yi={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},Ki=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Agents",-1),Zi={class:"tw-relative"},Bi=(0,i._)("option",{value:"all"},"Select",-1),Qi=["value"],Gi={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},Ji=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Deliveries",-1),Xi={class:"tw-relative"},tr=(0,i._)("option",{value:"all"},"Select",-1),er=["value"],sr={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},ar=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Cities",-1),ir={class:"tw-relative"},rr=(0,i._)("option",{value:"all"},"Select",-1),lr=["value"],or={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},nr=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Products",-1),dr={class:"tw-relative"},wr=(0,i._)("option",{value:"all"},"Select",-1),cr=["value"],ur={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},pr=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Shops",-1),mr={class:"tw-relative"},hr=(0,i._)("select",{class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[(0,i._)("option",{value:"all"},"Select")],-1),gr={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},fr=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Sources",-1),vr={class:"tw-relative"},yr=(0,i._)("select",{class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[(0,i._)("option",{value:"all"},"Select")],-1),_r={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},xr=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Upsell",-1),br={class:"tw-relative"},kr=(0,i._)("option",{value:"all"},"Select",-1),Cr=(0,i._)("option",{value:"oui"},"Oui",-1),Dr=(0,i._)("option",{value:"non"},"Non",-1),Sr=[kr,Cr,Dr];function zr(t,e,s,r,l,o){const n=(0,i.up)("DateFilter");return(0,i.wg)(),(0,i.iD)("div",Ii,[(0,i._)("div",ji,[(0,i._)("div",Ni,[(0,i.Wm)(n,{name:"Created Date",filter:l.dateFilter,"onUpdate:filter":e[0]||(e[0]=t=>l.dateFilter=t)},null,8,["filter"])])]),(0,i._)("div",Mi,[(0,i._)("div",Hi,[(0,i.Wm)(n,{name:"Dropped Date",filter:l.droppedAtFilter,"onUpdate:filter":e[1]||(e[1]=t=>l.droppedAtFilter=t)},null,8,["filter"])])]),(0,i._)("div",Yi,[Ki,(0,i._)("div",Zi,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.agentFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[Bi,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.agents,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,Qi)))),128))],512),[[a.bM,l.agentFilter]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])]),(0,i._)("div",Gi,[Ji,(0,i._)("div",Xi,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.deliveryFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[tr,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.deliveries,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,er)))),128))],512),[[a.bM,l.deliveryFilter]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])]),(0,i._)("div",sr,[ar,(0,i._)("div",ir,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.cityFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[rr,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.cities,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,lr)))),128))],512),[[a.bM,l.cityFilter]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])]),(0,i._)("div",or,[nr,(0,i._)("div",dr,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>l.productFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[wr,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.products,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,cr)))),128))],512),[[a.bM,l.productFilter]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])]),(0,i._)("div",ur,[pr,(0,i._)("div",mr,[hr,(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])]),(0,i._)("div",gr,[fr,(0,i._)("div",vr,[yr,(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])]),(0,i._)("div",_r,[xr,(0,i._)("div",br,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>l.upsellFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},Sr,512),[[a.bM,l.upsellFilter]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])]),(0,i.kq)("",!0),(0,i.kq)("",!0),(0,i.kq)("",!0)])}const Ur={class:"tw-text-sm tw-text-neutral-600"},Lr=["onClick"];function Pr(t,e,s,a,r,l){const o=(0,i.up)("VueDatePicker");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("span",Ur,(0,Q.zw)(s.name),1),(0,i.Wm)(o,{modelValue:r.date,"onUpdate:modelValue":[e[0]||(e[0]=t=>r.date=t),l.onDateRangePicked],onCleared:l.cleared,format:r.dateFilterFormat,range:"","preset-ranges":r.presetRanges},{yearly:(0,i.w5)((({label:t,range:e,presetDateRange:s})=>[(0,i._)("span",{onClick:t=>s(e)},(0,Q.zw)(t),9,Lr)])),_:1},8,["modelValue","onCleared","onUpdate:modelValue","format","preset-ranges"])])}var Ar=s(1271),Wr=s(2292),$r=s(1745),Er=s(4253),Or=s(4819),Tr=s(2143),Vr={props:["name"],data(){return{date:["",""],dateFilterFormat:"yyyy-MM-dd",formattedStartDate:"",formattedEndDate:"",presetRanges:[{label:"Today",range:[new Date,new Date]},{label:"Yesterday",range:[(0,Ar.Z)(new Date,1),(0,Ar.Z)(new Date,1)]},{label:"This month",range:[(0,Wr.Z)(new Date),(0,$r.Z)(new Date)]},{label:"Last month",range:[(0,Wr.Z)((0,Er.Z)(new Date,1)),(0,$r.Z)((0,Er.Z)(new Date,1))]},{label:"This year",range:[(0,Or.Z)(new Date),(0,Tr.Z)(new Date)]}]}},watch:{date(){this.$emit("update:filter",[this.formattedStartDate,this.formattedEndDate])}},methods:{onDateRangePicked(t){t?(this.formattedStartDate=t[0],this.formattedEndDate=t[1]):(this.formattedStartDate=null,this.formattedEndDate=null)},cleared(){this.date=["",""]}}};const qr=(0,d.Z)(Vr,[["render",Pr]]);var Rr=qr,Fr={components:{DateFilter:Rr},props:["filters"],data(){return{deliveryFilter:"all",agentFilter:"all",productFilter:"all",cityFilter:"all",upsellFilter:"all",dateFilter:["",""],droppedAtFilter:["",""],isLoaded:!1,dashItems:[{id:1,title:"Total Chiffres d'affaire",value:1200,icon:"mdi-currency-usd",color:"green"},{id:2,title:"Chiffres d'affaire vers",value:"35000 DH",icon:"mdi mdi-credit-card-check-outline",color:"orange"},{id:3,title:"Chiffres d'affaire non vers",value:600,icon:"mdi mdi-credit-card-remove-outline",color:"red"},{id:4,title:"Chiffres d'affaire en caisse",value:543,icon:"mdi mdi-bank",color:"pink"}],filledDashItems:[{id:1,title:"Customers",value:2300,color:"primary-orange",icon:"mdi-account-outline"},{id:2,title:"Suppliers",value:300,color:"primary-blue",icon:"mdi-account-check-outline"},{id:3,title:"Purchase Invoice",value:1100,color:"primary-indigo",icon:"mdi-file-document-outline"},{id:4,title:"Agents",value:10,color:"primary-green",icon:"mdi-moped-outline"}]}},watch:{agentFilter(t){this.$emit("update:filters",{...this.filters,agentFilter:t})},deliveryFilter(t){this.$emit("update:filters",{...this.filters,deliveryFilter:t})},productFilter(t){this.$emit("update:filters",{...this.filters,productFilter:t})},cityFilter(t){this.$emit("update:filters",{...this.filters,cityFilter:t})},upsellFilter(t){this.$emit("update:filters",{...this.filters,upsellFilter:t})},dateFilter:{deep:!0,handler(t){this.$emit("update:filters",{...this.filters,dateFilter:t})}},droppedAtFilter:{deep:!0,handler(t){this.$emit("update:filters",{...this.filters,droppedAtFilter:t})}}},computed:{agents(){return this.$store.getters["user/agents"]},deliveries(){return this.$store.getters["user/deliveries"]},products(){return this.$store.getters["product/products"]},cities(){return this.$store.getters["city/cities"]}},mounted(){Z.deliveries().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data;console.log(t.data),this.$store.dispatch("user/setDeliveries",e),this.isLoaded=!0}})).catch(this.$handleApiError),ea.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.products;console.log(t.data),this.$store.dispatch("product/setProducts",e),this.isLoaded=!0}})).catch(this.$handleApiError),Z.cities().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data;console.log(t.data),this.$store.dispatch("city/setCities",e),this.isLoaded=!0}})).catch(this.$handleApiError),Z.agents().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data;console.log(t.data),this.$store.dispatch("user/setAgents",e),this.isLoaded=!0}})).catch(this.$handleApiError)}};const Ir=(0,d.Z)(Fr,[["render",zr]]);var jr=Ir;const Nr=t=>{if(!t)return 0;const e=t.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(t.price?t.price:0)+parseFloat(e)},Mr=t=>t?t.split("api/")[1]:null;var Hr={components:{DashItem:La,UsersTable:Qa,TabSwitcher:Fi,FilterTabs:jr},data(){return{updating:!1,filters:{deliveryFilter:"all",agentFilter:"all",productFilter:"all",cityFilter:"all",upsellFilter:"all",dateFilter:["",""],droppedAtFilter:["",""]}}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},sales(){return this.$store.getters["sale/sales"]},isLoaded(){return this.$store.getters["sale/fetched"]},filteredSales(){const t=this.filters.agentFilter,e=this.filters.deliveryFilter,s=this.filters.productFilter,a=this.filters.cityFilter,i=this.filters.upsellFilter,r=this.filters.dateFilter[0],l=this.filters.dateFilter[1],o=this.filters.droppedAtFilter[0],n=this.filters.droppedAtFilter[1];return this.sales.filter((d=>{if("all"!==t&&parseInt(d.agente_id)!=parseInt(t))return!1;if("all"!==e&&parseInt(d.affectation)!=parseInt(e))return!1;if("all"!==i&&d.upsell!=i)return!1;if("all"!==s&&!d.items.some((t=>parseInt(t.product_id)==parseInt(s))))return!1;if("all"!==a&&d.city?.toLocaleLowerCase()!=a?.toLocaleLowerCase())return!1;const w=new Date(d.created_at),c=w.getDate(),u=w.getMonth(),p=w.getFullYear();if(r){const t=r.getDate(),e=r.getMonth(),s=r.getFullYear();if(p<s||p===s&&u<e||p===s&&u===e&&c<t)return!1}if(l){const t=l.getDate(),e=l.getMonth(),s=l.getFullYear();if(p>s||p===s&&u>e||p===s&&u===e&&c>t)return!1}const m=new Date(d.dropped_at),h=m.getDate(),g=m.getMonth(),f=w.getFullYear();if(o){const t=o.getDate(),e=o.getMonth(),s=o.getFullYear();if(f<s||f===s&&g<e||f===s&&g===e&&h<t)return!1}if(n){const t=n.getDate(),e=n.getMonth(),s=n.getFullYear();if(f>s||f===s&&g>e||f===s&&g===e&&h>t)return!1}return!0}))},dashChiffreAffaires(){return{id:1,title:"Total Chiffres d'affaire",value:this.getChiffresDaffaire().toFixed(2),icon:"mdi-currency-usd",color:"green"}},dashChiffreAffairesVerse(){return{id:2,title:"Chiffres d'affaire vers",value:this.getChiffresDaffaireVerse().toFixed(2),icon:"mdi mdi-credit-card-check-outline",color:"orange"}},dashChiffreAffairesNonVerse(){return{id:3,title:"Chiffres d'affaire non vers",value:this.getChiffresDaffaireNonVerse().toFixed(2),icon:"mdi mdi-credit-card-remove-outline",color:"red"}},dashChiffreAffairesEnCaisse(){return{id:4,title:"Chiffres d'affaire en caisse",value:this.getChiffresDaffaireEnCaise().toFixed(2),icon:"mdi mdi-bank",color:"yellow"}},newSales(){return{id:1,title:"New",value:this.sales.filter((t=>!t.confirmation)).length,color:"primary-green",icon:"mdi mdi-new-box"}},toProcess(){return{id:2,title:"Process",value:this.sales.filter((t=>!!t.confirmation&&!["confirmer","livre","expidier"].includes(t.confirmation))).length,color:"primary-orange",icon:"mdi-reload"}},confirmedSales(){return{id:3,title:"Confirmed",value:this.sales.filter((t=>"confirmer"==t.confirmation)).length,color:"deep-purple-accent-2",icon:"mdi-phone-check"}},deliveredSales(){return{id:4,title:"Delivered",value:this.sales.filter((t=>"livre"==t.confirmation)).length,color:"primary-blue",icon:"mdi-account-check-outline"}},shippedSales(){return{id:5,title:"Shipped",value:this.sales.filter((t=>"expidier"==t.confirmation)).length,color:"red",icon:"mdi-truck"}}},methods:{getSales(){ys.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0)}})).catch(this.$handleApiError)},updateSales(){this.updating=!0,ys.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("sale/setSales",e),this.updating}})).catch(this.$handleApiError).finally((()=>{this.updating=!1}))},getChiffresDaffaire(){let t=0;return this.filteredSales.forEach((e=>{t+=Nr(e)})),t},getChiffresDaffaireVerse(){let t=0;return this.filteredSales.forEach((e=>{null!=e.factorisations&&e.factorisations.paid&&(t+=Nr(e))})),t},getChiffresDaffaireNonVerse(){let t=0;return this.filteredSales.forEach((e=>{null==e.factorisations||e.factorisations.paid||(t+=Nr(e))})),t},getChiffresDaffaireEnCaise(){return this.getChiffresDaffaire()-this.getChiffresDaffaireVerse()}},mounted(){this.isLoaded||this.getSales()}};const Yr=(0,d.Z)(Hr,[["render",_a]]);var Kr=Yr;const Zr=(0,i._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,i._)("div",null,[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Dashboard")])],-1),Br={key:0},Qr={key:1},Gr={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Jr={class:"tw-grid tw-mb-5 tw-grid-cols-4 md:tw-grid-cols-4 lg:tw-grid-cols-5 tw-gap-2"},Xr={class:"lg:tw-col-span-1 md:tw-col-span-1 tw-col-span-4"},tl={class:"lg:tw-col-span-1 md:tw-col-span-1 tw-col-span-4"},el={class:"lg:tw-col-span-1 md:tw-col-span-1 tw-col-span-4"},sl={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},al={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-5"},il={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"};function rl(t,e,s,a,r,l){const o=(0,i.up)("LoadingAnimation"),n=(0,i.up)("DashItemTwo");return(0,i.wg)(),(0,i.iD)("div",null,[Zr,r.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",Br,[(0,i.Wm)(o)])),r.isLoaded?((0,i.wg)(),(0,i.iD)("div",Qr,[(0,i._)("div",Gr,[(0,i._)("div",Jr,[(0,i._)("div",Xr,[(0,i.Wm)(n,{dash:l.earningsDash,symbol:"DH",numbers:!1},null,8,["dash"])]),(0,i._)("div",tl,[(0,i.Wm)(n,{dash:l.totalSales},null,8,["dash"])]),(0,i._)("div",el,[(0,i.Wm)(n,{dash:l.deliveredSales},null,8,["dash"])]),(0,i._)("div",sl,[(0,i.Wm)(n,{dash:l.reportedSales},null,8,["dash"])]),(0,i._)("div",al,[(0,i.Wm)(n,{dash:l.shippedSales},null,8,["dash"])]),(0,i._)("div",il,[(0,i.Wm)(n,{dash:l.canceledSales},null,8,["dash"])])])])])):(0,i.kq)("",!0)])}var ll={components:{DashItemTwo:xi},data(){return{isLoaded:!0,orders:[],cities:[]}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},sales(){return this.$store.getters["sale/sales"]},totalSales(){return{id:1,title:"Total Orders",value:this.orders.length,pourcentage:100,color:"deep-purple-accent-2",icon:"mdi mdi-all-inclusive"}},deliveredSales(){return{id:2,title:"Delivered",value:this.filterByStatus("livrer").length,pourcentage:100*this.filterByStatus("livrer").length/this.orders.length,color:"primary-green",icon:"mdi-account-check-outline"}},toProcess(){return{id:3,title:"Process",value:231,color:"primary-orange",icon:"mdi-reload"}},shippedSales(){return{id:4,title:"Shipped",value:this.filterByStatus("expidier").length,pourcentage:100*this.filterByStatus("expidier").length/this.orders.length,color:"primary-orange",icon:"mdi-truck"}},reportedSales(){return{id:5,title:"Reported",value:this.filterByStatus("reporter").length,pourcentage:100*this.filterByStatus("reporter").length/this.orders.length,color:"primary-blue",icon:"mdi mdi-clock-outline"}},canceledSales(){return{id:6,title:"Canceled",value:this.filterByStatus("annuler").length,pourcentage:100*this.filterByStatus("annuler").length/this.orders.length,color:"red-accent-3",icon:"mdi mdi-cancel"}},earningsDash(){return{id:2,title:"Earnings",pourcentage:this.earnings,color:"green-darken-4",icon:"mdi-currency-usd"}},earnings(){return this.orders.reduce(((t,e)=>null==e.factorisations||e.factorisations.paid||e.factorisations.close?t:t+e.factorisations.price),0)}},methods:{filterByStatus(t){return this.orders.filter((e=>e.delivery==t))},getOrders(){this.isLoaded=!1,Ls.delivery().then((t=>{"SUCCESS"==t.data.code&&(this.orders=t.data.data.orders)})).finally((()=>{this.isLoaded=!0}))}},mounted(){this.getOrders()}};const ol=(0,d.Z)(ll,[["render",rl]]);var nl=ol;const dl=(0,i._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,i._)("div",null,[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Dashboard ")])],-1),wl={key:0},cl={key:1},ul={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},pl={class:"tw-grid tw-mb-5 tw-grid-cols-4 md:tw-grid-cols-4 lg:tw-grid-cols-5 tw-gap-2"},ml={class:"lg:tw-col-span-1 md:tw-col-span-1 tw-col-span-4"},hl={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},gl={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},fl={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},vl={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},yl={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},_l={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"};function xl(t,e,s,a,r,l){const o=(0,i.up)("LoadingAnimation"),n=(0,i.up)("DashItemTwo");return(0,i.wg)(),(0,i.iD)("div",null,[dl,r.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",wl,[(0,i.Wm)(o)])),r.isLoaded?((0,i.wg)(),(0,i.iD)("div",cl,[(0,i._)("div",ul,[(0,i._)("div",pl,[(0,i._)("div",ml,[(0,i.Wm)(n,{dash:l.earningsDash,symbol:r.currency,numbers:!1},null,8,["dash","symbol"])]),(0,i._)("div",hl,[(0,i.Wm)(n,{dash:l.totalSales},null,8,["dash"])]),(0,i._)("div",gl,[(0,i.Wm)(n,{dash:l.confirmedSales},null,8,["dash"])]),(0,i._)("div",fl,[(0,i.Wm)(n,{dash:l.reportedSales},null,8,["dash"])]),(0,i._)("div",vl,[(0,i.Wm)(n,{dash:l.noanswerSales},null,8,["dash"])]),(0,i._)("div",yl,[(0,i.Wm)(n,{dash:l.canceledSales},null,8,["dash"])]),(0,i._)("div",_l,[(0,i.Wm)(n,{dash:l.upsellSales},null,8,["dash"])])])])])):(0,i.kq)("",!0)])}var bl={components:{DashItemTwo:xi},data(){return{currency:I,isLoaded:!0,orders:[]}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},totalSales(){return{id:1,title:"Total",pourcentage:0===this.orders.length?0:100,value:this.orders.filter((t=>"double"!=t.confirmation)).length,color:"deep-purple-accent-2",icon:"mdi mdi-all-inclusive"}},newSales(){return{id:2,title:"New",value:this.orders.filter((t=>!t.confirmation)).length,pourcentage:(100*this.orders.filter((t=>!t.confirmation)).length/this.orders.length).toFixed(2),color:"grey",icon:"mdi mdi-new-box"}},confirmedSales(){return{id:4,title:"Confirmed",value:this.orders.filter((t=>"confirmer"==t.confirmation)).length,pourcentage:(100*this.orders.filter((t=>"confirmer"==t.confirmation)).length/this.orders.length).toFixed(2),color:"primary-green",icon:"mdi-phone-check"}},reportedSales(){return{id:5,title:"Reported",value:this.orders.filter((t=>"reporter"==t.confirmation)).length,pourcentage:(100*this.orders.filter((t=>"reporter"==t.confirmation)).length/this.orders.length).toFixed(2),color:"primary-blue",icon:"mdi mdi-clock-outline"}},canceledSales(){return{id:6,title:"Canceled",value:this.orders.filter((t=>"annuler"==t.confirmation)).length,pourcentage:(100*this.orders.filter((t=>"annuler"==t.confirmation)).length/this.orders.length).toFixed(2),color:"red-accent-3",icon:"mdi mdi-cancel"}},upsellSales(){return{id:6,title:"Upsell",value:this.orders.filter((t=>"oui"==t.upsell)).length,pourcentage:(100*this.orders.filter((t=>"oui"==t.upsell)).length/this.orders.length).toFixed(2),color:"#2563eb",icon:"mdi mdi-transfer-up"}},earningsDash(){return{id:2,title:"Earnings",pourcentage:.7*this.orders.filter((t=>"oui"==t.upsell&&"livrer"==t.delivery)).length,color:"green-darken-4",icon:"mdi-currency-usd"}},noanswerSales(){return{id:6,title:"No Answer",value:this.orders.filter((t=>["day-one-call-one","day-one-call-two","day-one-call-three","day-two-call-one","day-two-call-two","day-two-call-three","day-three-call-one","day-three-call-two","day-three-call-three"].includes(t.confirmation))).length,pourcentage:(100*this.orders.filter((t=>["day-one-call-one","day-one-call-two","day-one-call-three","day-two-call-one","day-two-call-two","day-two-call-three","day-three-call-one","day-three-call-two","day-three-call-three"].includes(t.confirmation))).length/this.orders.length).toFixed(2),color:"yellow-darken-3",icon:"mdi mdi-headphones-off"}}},methods:{filterByStatus(t){return this.orders.filter((e=>e.confirmation==t))},getOrders(){this.isLoaded=!1,Ls.agente().then((t=>{"SUCCESS"==t.data.code&&(this.orders=t.data.data.orders)})).finally((()=>{this.isLoaded=!0}))}},mounted(){this.getOrders()}};const kl=(0,d.Z)(bl,[["render",xl]]);var Cl=kl;const Dl=(0,i._)("div",{class:"tw-w-full tw-rounded-lg tw-py-5 tw-px-5 tw-flex tw-flex-center tw-justify-center"},[(0,i._)("h1",{class:"tw-text-lg"},"Welcome to Dashboard !")],-1),Sl=[Dl];function zl(t,e,s,a,r,l){return(0,i.wg)(),(0,i.iD)("div",null,Sl)}var Ul={components:{},data(){return{dashItems:[{id:1,title:"Orders",value:1200,icon:"mdi-package-variant-closed",color:"orange"},{id:2,title:"Total Sales",value:"35000 DH",icon:"mdi-currency-usd",color:"green"},{id:3,title:"Orders Confirmed",value:600,icon:"mdi-phone-check-outline",color:"blue"},{id:4,title:"Orders Delivered",value:543,icon:"mdi-truck-check-outline",color:"pink"}],filledDashItems:[{id:1,title:"Customers",value:2300,color:"primary-orange",icon:"mdi-account-outline"},{id:2,title:"Suppliers",value:300,color:"primary-blue",icon:"mdi-account-check-outline"},{id:3,title:"Purchase Invoice",value:1100,color:"primary-indigo",icon:"mdi-file-document-outline"},{id:4,title:"Agents",value:10,color:"primary-green",icon:"mdi-moped-outline"}]}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role}}};const Ll=(0,d.Z)(Ul,[["render",zl]]);var Pl=Ll;const Al={class:"tw-w-full tw-grid tw-gap-2 lg:tw-grid-cols-4 sm:tw-grid-cols-2 tw-grid-cols-1"},Wl=(0,i.uE)('<div class="tw-flex tw-justify-between tw-w-full"><div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-2.5 tw-bg-gray-200 tw-rounded-full tw-w-[50px] tw-mb-4"></div></div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-4 tw-bg-gray-200 tw-rounded-full tw-w-[30px] tw-mb-4"></div></div></div><div class="tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-bg-gray-200 tw-text-white"><div class="tw-bg-white tw-w-[25px] tw-h-[25px] tw-rounded"></div></div></div>',1),$l=[Wl];function El(t,e,s,a,r,l){const o=(0,i.up)("DashCard");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Al,[r.fetching?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},(0,i.Ko)(4,(t=>(0,i._)("div",{key:t,class:"tw-bg-white tw-animate-pulse tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-[90px]"},$l))),64)):((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(r.dashes,(t=>((0,i.wg)(),(0,i.j4)(o,{key:t.id,color:t.color,icon:t.icon,title:t.title,symbol:t.symbol,percentage:t.percentage,value:t.value},null,8,["color","icon","title","symbol","percentage","value"])))),128))])])}const Ol={class:"tw-bg-white tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-fit"},Tl={class:"tw-flex tw-justify-between"},Vl={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},ql={class:"tw-text-gray-400 tw-uppercase tw-text-xs tw-font-medium"},Rl={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},Fl={class:"tw-text-gray-700 tw-text-xl tw-font-bold"};function Il(t,e,s,a,r,l){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Ol,[(0,i._)("div",Tl,[(0,i._)("div",null,[(0,i._)("div",Vl,[(0,i._)("p",ql,(0,Q.zw)(s.title),1),s.percentage?((0,i.wg)(),(0,i.iD)("span",{key:0,class:"tw-text-xs tw-font-medium tw-rounded tw-px-1 tw-text-white",style:(0,Q.j5)({background:s.color})},(0,Q.zw)(s.percentage.toFixed(2))+"%",5)):(0,i.kq)("",!0)]),(0,i._)("div",Rl,[(0,i._)("span",Fl,(0,Q.zw)(s.value),1)])]),(0,i._)("div",{style:(0,Q.j5)({background:s.color}),class:"tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-text-white"},[(0,i.Wm)(X.t,{style:(0,Q.j5)(["Orders"==s.title&&{color:"#2ee1ff"}]),size:"x-large"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,Q.zw)(s.icon),1)])),_:1},8,["style"])],4)])])])}var jl={props:{icon:{required:!0},title:{required:!0},value:{required:!0},symbol:{default:"",required:!1},percentage:{required:!1},color:{required:!0,default:"#6b7280"}}};const Nl=(0,d.Z)(jl,[["render",Il]]);var Ml=Nl;class Hl{async statistics(){return await Y.getCookie(),M.post("api/v1/followup/statistics")}async paginate(t="/",e){return await Y.getCookie(),M.post("api/v1/followup/orders"+t,e)}async update(t,e){return await Y.getCookie(),M.post("api/v1/followup/orders/"+t+"/update",e)}}var Yl=new Hl,Kl={components:{DashCard:Ml},data(){return{fetching:!0,dashes:[]}},mounted(){Yl.statistics().then((t=>{console.log(t.data.data),this.dashes=t.data.data.statistics,this.fetching=!1}))}};const Zl=(0,d.Z)(Kl,[["render",El]]);var Bl=Zl,Ql={components:{admin:Kr,delivery:nl,agente:Cl,default:Pl,"follow-up":Bl},data(){return{localUrl:R}},computed:{user(){return this.$store.getters["user/user"]},dashboard(){return["admin","delivery","agente","follow-up"].includes(this.user.role)?this.user.role:"default"}},mounted(){console.log(this.user)}};const Gl=(0,d.Z)(Ql,[["render",ra]]);var Jl=Gl,Xl=s(3104);const to=(0,i._)("div",{class:"mb-5"},[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Settings ")],-1),eo={key:0},so={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},ao={class:"tw-w-full"},io=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," First Name ",-1),ro={class:"tw-w-full"},lo=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Last Name",-1),oo={class:"tw-w-full"},no=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Email",-1),wo={class:"tw-w-full"},co=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Phone Number ",-1),uo={class:"tw-w-full tw-flex tw-gap-10 tw-items-center"},po=(0,i._)("span",null,"Update Password: ",-1),mo={class:"tw-w-full"},ho=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Password",-1),go={class:"tw-w-full"},fo=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Confirm Password ",-1),vo={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},yo=(0,i._)("span",{class:"text-white text-capitalize"},"Cancel",-1),_o=(0,i._)("span",{class:"text-white text-capitalize"},"Update",-1);function xo(t,e,s,a,r,l){const o=(0,i.up)("LoadingAnimation");return(0,i.wg)(),(0,i.iD)("div",null,[to,l.isFormReady?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",eo,[(0,i.Wm)(o)])),l.isFormReady?((0,i.wg)(),(0,i.iD)("div",so,[(0,i._)("div",null,[(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{cols:"12",md:"12"},{default:(0,i.w5)((()=>[(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",ao,[io,(0,i.Wm)(tt.hw,{"error-messages":r.formStatus.firstname.message,modelValue:r.firstname,"onUpdate:modelValue":e[0]||(e[0]=t=>r.firstname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",ro,[lo,(0,i.Wm)(tt.hw,{"error-messages":r.formStatus.lastname.message,modelValue:r.lastname,"onUpdate:modelValue":e[1]||(e[1]=t=>r.lastname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",oo,[no,(0,i.Wm)(tt.hw,{"error-messages":r.formStatus.email.message,modelValue:r.email,"onUpdate:modelValue":e[2]||(e[2]=t=>r.email=t),readonly:"",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",wo,[co,(0,i.Wm)(tt.hw,{"error-messages":r.formStatus.phone.message,modelValue:r.phone,"onUpdate:modelValue":e[3]||(e[3]=t=>r.phone=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-0",cols:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",uo,[po,(0,i.Wm)(Xl.G,{modelValue:r.updatePassword,"onUpdate:modelValue":e[4]||(e[4]=t=>r.updatePassword=t),color:"primary-color","hide-details":!0},null,8,["modelValue"])])])),_:1}),r.updatePassword?((0,i.wg)(),(0,i.j4)(oa.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",mo,[ho,(0,i.Wm)(tt.hw,{"error-messages":r.formStatus.password.message,modelValue:r.password,"onUpdate:modelValue":e[5]||(e[5]=t=>r.password=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1})):(0,i.kq)("",!0),r.updatePassword?((0,i.wg)(),(0,i.j4)(oa.D,{key:1,class:"!tw-py-2 tw-pt-0",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",go,[fo,(0,i.Wm)(tt.hw,{"error-messages":r.formStatus.confirmPassword.message,modelValue:r.confirmPassword,"onUpdate:modelValue":e[6]||(e[6]=t=>r.confirmPassword=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1})):(0,i.kq)("",!0)])),_:1})])),_:1})])),_:1})]),(0,i._)("div",vo,[(0,i.Wm)(G.T,{link:"",to:{name:"user/list"},color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,i.w5)((()=>[yo])),_:1}),t.$can("update_account")?((0,i.wg)(),(0,i.j4)(G.T,{key:0,onClick:l.update,loading:r.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,i.w5)((()=>[_o])),_:1},8,["onClick","loading"])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0)])}var bo={data(){return{serverUrl:F,isFetched:!1,isUserFetched:!1,isLoading:!1,updatePassword:!1,formStatus:{firstname:{valid:!0,message:""},lastname:{valid:!0,message:""},phone:{valid:!0,message:""},email:{valid:!0,message:""},password:{valid:!0,message:""},confirmPassword:{valid:!0,message:""}},id:null,firstname:"",lastname:"",phone:"",email:"",password:"",confirmPassword:""}},computed:{isFormReady(){return this.isFetched},user(){return{id:this.id,firstname:this.firstname,lastname:this.lastname,phone:this.phone,password:this.password}}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,Z.updateProfile(this.user,this.updatePassword).then((t=>{"USER_UPDATED"==t.data.code&&this.$alert({type:"success",title:t.data.message})})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;switch(console.log(t),e?.code){case"VALIDATION_ERROR":for(let t in e.error)this.formStatus[t]={valid:!1,message:e.error[t][0]};break}return t})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1}))},validate(){this.formStatus["firstname"]=bt(this.firstname),this.formStatus["lastname"]=bt(this.lastname),this.formStatus["phone"]=bt(this.phone),this.formStatus["password"]=xt(this.password),this.formStatus["confirmPassword"]=Ct(this.password,this.confirmPassword);const t=this.formStatus["firstname"].valid,e=this.formStatus["lastname"].valid,s=this.formStatus["phone"].valid;if(this.updatePassword){const a=this.formStatus["password"].valid,i=this.formStatus["confirmPassword"].valid;return t&&e&&a&&i&&s}return t&&e&&s},async getUser(){return Z.profile().then((t=>{if("USER_SUCCESS"==t?.data.code){const e=t.data.data.user;this.id=e.id,this.firstname=e.firstname,this.lastname=e.lastname,this.email=e.email,this.phone=e.phone,this.isUserFetched=!0}})).catch(this.$handleApiError)}},async mounted(){Promise.allSettled([this.getUser()]).then((()=>this.isFetched=!0),(t=>this.$handleApiError(t)))}};const ko=(0,d.Z)(bo,[["render",xo]]);var Co=ko;const Do=(0,i._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,i._)("div",null,[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Notifications")])],-1),So={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},zo={class:"!tw-capitalize"};function Uo(t,e,s,a,r,l){(0,i.up)("LoadingAnimation");return(0,i.wg)(),(0,i.iD)("div",null,[Do,(0,i.kq)("",!0),((0,i.wg)(),(0,i.iD)("div",So,[(0,i.Wm)(Ga._,{flat:""},{default:(0,i.w5)((()=>[(0,i.Wm)(Ja.d,{modelValue:r.tab,"onUpdate:modelValue":e[0]||(e[0]=t=>r.tab=t),color:"primary-color","align-tabs":"start",density:"compact"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.tabs,(t=>((0,i.wg)(),(0,i.j4)(Xa.L,{class:"!tw-capitalize !tw-text-neutral-600",key:t.id,value:t.id},{default:(0,i.w5)((()=>[(0,i._)("span",zo,(0,Q.zw)(t.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"]),(0,i.Wm)(ti.Oo,{class:"tw-mt-5",modelValue:r.tab,"onUpdate:modelValue":e[1]||(e[1]=t=>r.tab=t)},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.tabs,(t=>((0,i.wg)(),(0,i.j4)(ei.H,{key:t.id,value:t.id},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)((0,i.LL)(t.component)))])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})]))])}const Lo={key:0};function Po(t,e,s,a,r,l){const o=(0,i.up)("SalesTable");return l.fetched?((0,i.wg)(),(0,i.iD)("div",Lo,[((0,i.wg)(),(0,i.j4)(o,{key:l.sales.length,columns:r.columns,sales:l.sales},null,8,["columns","sales"]))])):(0,i.kq)("",!0)}const Ao={class:"tw-grid tw-grid-cols-12 tw-mb-5"},Wo={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-items-center"},$o=(0,i._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"}," Show per page: ",-1),Eo=["value"],Oo={class:"tw-relative tw-pb-5 tw-overflow-x-auto tw-min-h-[400px] tw-overflow-y-visible sm:tw-rounded-lg"},To={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},Vo={scope:"col",class:"tw-p-4"},qo={class:"tw-flex tw-items-center"},Ro=(0,i._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox",-1),Fo={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},Io={class:"tw-w-4 tw-p-4 tw-relative"},jo={class:"tw-flex tw-items-center"},No=["onChange","checked"],Mo=(0,i._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox",-1),Ho={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},Yo={class:"tw-px-6 tw-py-4 tw-relative"},Ko={key:0},Zo={class:"tw-px-6 tw-py-4"},Bo=["title"],Qo={class:"tw-px-6 tw-py-4 tw-relative"},Go={class:"tw-pb-2"},Jo={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},Xo={key:0},tn={key:1},en={class:"tw-absolute tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-text-xs"},sn={key:0,class:"tw-bg-emerald-500/10 tw-text-emerald-500 tw-px-2 tw-rounded-t"},an={key:1,class:"tw-bg-blue-500/10 tw-text-blue-500 tw-px-2 tw-rounded-t"},rn={class:"tw-px-6 tw-py-4"},ln={class:"tw-px-6 tw-py-4 tw-relative"},on={class:"tw-flex tw-items-center tw-justify-center"},nn={class:"tw-flex tw-gap-1"},dn={key:0},wn={class:"tw-px-6 tw-py-4"},cn={class:"tw-px-6 tw-py-4 tw-relative"},un={class:"tw-flex tw-items-center tw-justify-center"},pn={class:"tw-flex tw-gap-1"},mn={key:0},hn={class:"tw-px-6 tw-py-4"},gn={class:"tw-px-6 tw-py-4"},fn={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},vn={class:"tw-col-span-12 md:tw-col-span-12 d-flex tw-justify-end tw-flex-wrap align-center"},yn={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},_n={class:"tw-flex tw-flex-wrap tw-gap-2"},xn={class:"tw-text-white"};function bn(t,e,s,r,l,o){const n=(0,i.up)("SaleConfirmation"),d=(0,i.up)("SaleAffectation"),w=(0,i.up)("SaleDelivery"),c=(0,i.up)("SaleActions");return(0,i.wg)(),(0,i.iD)("div",{key:o.items.length},[(0,i._)("div",Ao,[(0,i._)("div",Wo,[$o,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allowedLimit,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,Eo)))),128))],512),[[a.bM,l.paginationLimit]])])]),(0,i._)("div",Oo,[((0,i.wg)(),(0,i.iD)("table",{key:o.reportedForToday.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,i._)("thead",To,[(0,i._)("tr",null,[(0,i._)("th",Vo,[(0,i._)("div",qo,[(0,i.wy)((0,i._)("input",{onClick:e[1]||(e[1]=(...t)=>o.handleSelectAll&&o.handleSelectAll(...t)),"onUpdate:modelValue":e[2]||(e[2]=t=>l.isAllSelected=t),id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"},null,512),[[a.e8,l.isAllSelected]]),Ro])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.columns,(t=>((0,i.wg)(),(0,i.iD)("th",{key:t,class:(0,Q.C_)([["city"==t&&"!tw-max-w-[150px]"],"tw-px-6 tw-py-3 tw-truncate"]),scope:"col"},[(0,i._)("div",Fo,(0,Q.zw)(t),1)],2)))),128))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.items,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id,class:(0,Q.C_)([[[t.confirmation,t.delivery].includes("reporter")&&"tw-relative",o.isReportedToday(t)&&"!tw-border tw-border-red-400"],"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"])},[(0,i._)("td",Io,[(0,i._)("div",jo,[(0,i._)("input",{onChange:e=>o.handleSelect(e,t.id),checked:o.isSelected(t.id),id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"},null,40,No),Mo])]),(0,i._)("td",Ho,(0,Q.zw)(t.id),1),(0,i._)("td",Yo,[(0,i.Uk)((0,Q.zw)(t?.created_at?.split("T")[0])+" ",1),"reporter"==t.confirmation||"reporter"==t.delivery?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,Q.C_)([o.isReportedToday(t)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[o.isReportedToday(t)?((0,i.wg)(),(0,i.iD)("span",Ko," Reported for today ")):(0,i.kq)("",!0)],2)):(0,i.kq)("",!0)]),(0,i._)("td",Zo,[(0,i._)("div",{title:t.city,class:"!tw-max-w-[200px] tw-truncate"},(0,Q.zw)(t.city),9,Bo)]),(0,i._)("td",Qo,[(0,i._)("div",Go,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.items,(t=>((0,i.wg)(),(0,i.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,i.Uk)(" - "),(0,i._)("span",Jo,(0,Q.zw)(t.quantity)+" X ",1),(0,i.Uk)((0,Q.zw)(t.product.name)+" ",1),t.product_variation.size?((0,i.wg)(),(0,i.iD)("span",Xo,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,i.kq)("",!0),t.product_variation.color?((0,i.wg)(),(0,i.iD)("span",tn,"| "+(0,Q.zw)(t.product_variation.color),1)):(0,i.kq)("",!0)])))),128))]),(0,i._)("div",en,[t.counts_from_warehouse?((0,i.wg)(),(0,i.iD)("p",sn," warehouse ")):(0,i.kq)("",!0),t.counts_from_warehouse?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",an," delivery "))])])]),(0,i._)("td",rn,(0,Q.zw)(t.fullname),1),(0,i._)("td",ln,[(0,i._)("div",on,[((0,i.wg)(),(0,i.j4)(n,{class:(0,Q.C_)("reporter"==t.confirmation&&"tw-mb-1"),sale:t,id:t.id,confirmation:t.confirmation,key:t.confirmation},null,8,["class","sale","id","confirmation"])),"reporter"==t.confirmation?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,Q.C_)([o.isReportedToday(t)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[(0,i._)("span",nn,["reporter"==t.confirmation?((0,i.wg)(),(0,i.iD)("span",dn,[(0,i.Wm)(X.t,{size:"x-small"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-autorenew")])),_:1}),(0,i._)("span",null,(0,Q.zw)(t?.reported_agente_date?.split("T")[0]),1)])):(0,i.kq)("",!0)])],2)):(0,i.kq)("",!0)])]),(0,i._)("td",wn,["confirmer"==t.confirmation?((0,i.wg)(),(0,i.j4)(d,{sale:t,affectation:t.affectation,id:t.id,key:t.affectation},null,8,["sale","affectation","id"])):(0,i.kq)("",!0)]),(0,i._)("td",cn,[(0,i._)("div",un,[((0,i.wg)(),(0,i.j4)(w,{class:(0,Q.C_)("reporter"==t.delivery&&"tw-mb-1"),sale:t,id:t.id,key:t.delivery,delivery:t.delivery},null,8,["class","sale","id","delivery"])),"reporter"==t.delivery?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,Q.C_)([o.isReportedToday(t)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[(0,i._)("span",pn,["reporter"==t.delivery?((0,i.wg)(),(0,i.iD)("span",mn,[(0,i.Wm)(X.t,{size:"x-small"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-autorenew")])),_:1}),(0,i._)("span",null,(0,Q.zw)(t.reported_delivery_date),1)])):(0,i.kq)("",!0)])],2)):(0,i.kq)("",!0)])]),(0,i._)("td",hn,(0,Q.zw)(o.getPrice(t)),1),(0,i._)("td",gn,[((0,i.wg)(),(0,i.j4)(c,{id:t.id,key:t.delivery,sale:t},null,8,["id","sale"]))])],2)))),128))])]))]),(0,i._)("div",fn,[(0,i._)("div",vn,[(0,i._)("div",yn,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?s.sales.length:o.nextRange)+" of "+(0,Q.zw)(s.sales.length)+" items ",1),(0,i._)("div",_n,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.pageCount,(t=>((0,i.wg)(),(0,i.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,i.w5)((()=>[(0,i._)("span",xn,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const kn={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},Cn=["onClick"],Dn={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},Sn=(0,i._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter note",-1),zn={class:"tw-flex tw-justify-end tw-mt-2"};function Un(t,e,s,r,l,o){const n=(0,i.up)("popup-full"),d=(0,i.up)("SaleConfirmationReporting");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{key:s.confirmation,class:"tw-relative tw-min-w-[100px]"},[(0,i._)("button",{onClick:e[0]||(e[0]=(...t)=>o.toggle&&o.toggle(...t)),class:(0,Q.C_)([[o.selected.text,o.selected.bg,o.selected.ring],"focus:tw-ring-4 tw-min-w-[100px] focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between"]),type:"button"},[(0,i.Uk)((0,Q.zw)(o.selected.name)+" ",1),l.isLoading?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(X.t,{key:0,class:"tw-ml-1"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,Q.zw)(l.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),l.isLoading?((0,i.wg)(),(0,i.j4)(X.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-loading")])),_:1})):(0,i.kq)("",!0)],2),(0,i._)("div",{class:(0,Q.C_)([{"tw-hidden":!l.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,i._)("ul",kn,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.options,(t=>((0,i.wg)(),(0,i.iD)("li",{onClick:e=>o.handleChange(t),key:t.id},[(0,i._)("a",{class:(0,Q.C_)(["tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100",[t.text,t.bg]])},(0,Q.zw)(t.name),3)],8,Cn)))),128))])],2),(0,i.Wm)(n,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>l.showPopup=!1),visible:l.showPopup},{default:(0,i.w5)((()=>[(0,i._)("div",Dn,[Sn,(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"3",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[a.nr,l.note]]),(0,i._)("div",zn,[(0,i.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleClick},{default:(0,i.w5)((()=>[(0,i.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"]),(0,i.Wm)(d,{order:s.sale,visible:l.showPopupReporter,onCancel:e[3]||(e[3]=t=>l.showPopupReporter=!1)},null,8,["order","visible"])])),[[Bt.L,o.close]])}const Ln=[{id:0,value:null,name:"New",text:"tw-text-white",textLight:"tw-text-emerald-800",bg:"tw-bg-green-500",bgLight:"tw-bg-emerald-100",ring:"tw-ring-green-300"},{id:1,value:"day-one-call-one",name:"No reply 1 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-700",bg:"tw-bg-rose-200/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-200"},{id:2,value:"day-one-call-two",name:"No reply 2 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-800",bg:"tw-bg-rose-400/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-300"},{id:3,value:"day-one-call-three",name:"No reply 3 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-900",bg:"tw-bg-rose-600/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-400"},{id:4,value:"day-two-call-one",name:"No reply 1 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-700",bg:"tw-bg-indigo-200/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-200"},{id:5,value:"day-two-call-two",name:"No reply 2 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-800",bg:"tw-bg-indigo-400/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-300"},{id:6,value:"day-two-call-three",name:"No reply 3 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-900",bg:"tw-bg-indigo-600/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-400"},{id:7,value:"day-three-call-one",name:"No reply 1 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-700",bg:"tw-bg-blue-200/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-200"},{id:8,value:"day-three-call-two",name:"No reply 2 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-800",bg:"tw-bg-blue-400/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-300"},{id:9,value:"day-three-call-three",name:"No reply 3 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-900",bg:"tw-bg-blue-600/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-400"},{id:10,value:"reporter",name:"Reported",text:"tw-text-teal-500",textLight:"tw-text-teal-800",bg:"tw-bg-teal-500/10",bgLight:"tw-bg-teal-100",ring:"tw-ring-teal-300"},{id:11,value:"annuler",name:"Canceled",text:"tw-text-red-500",textLight:"tw-text-red-800",bg:"tw-bg-red-500/10",bgLight:"tw-bg-red-100",ring:"tw-ring-red-300"},{id:12,value:"wrong-number",name:"Wrong number",text:"tw-text-fuchsia-500",textLight:"tw-text-fuchsia-800",bg:"tw-bg-fuchsia-500/10",bgLight:"tw-bg-fuchsia-100",ring:"tw-ring-fuchsia-300"},{id:13,value:"confirmer",name:"Confirmed",text:"tw-text-green-500",textLight:"tw-text-green-800",bg:"tw-bg-green-500/10",bgLight:"tw-bg-green-100",ring:"tw-ring-green-300"},{id:14,value:"double",name:"Double",text:"tw-text-purple-500",textLight:"tw-text-purple-800",bg:"tw-bg-purple-500/10",bgLight:"tw-bg-purple-100",ring:"tw-ring-purple-300"}],Pn=[{id:0,value:null,name:"New",text:"tw-text-white",textLight:"tw-text-emerald-800",bg:"tw-bg-green-500",bgLight:"tw-bg-emerald-100",ring:"tw-ring-green-300"},{id:1,value:"day-one-call-one",name:"No reply 1 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-700",bg:"tw-bg-rose-200/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-200"},{id:2,value:"day-one-call-two",name:"No reply 2 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-800",bg:"tw-bg-rose-400/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-300"},{id:3,value:"day-one-call-three",name:"No reply 3 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-900",bg:"tw-bg-rose-600/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-400"},{id:4,value:"day-two-call-one",name:"No reply 1 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-700",bg:"tw-bg-indigo-200/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-200"},{id:5,value:"day-two-call-two",name:"No reply 2 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-800",bg:"tw-bg-indigo-400/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-300"},{id:6,value:"day-two-call-three",name:"No reply 3 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-900",bg:"tw-bg-indigo-600/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-400"},{id:7,value:"day-three-call-one",name:"No reply 1 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-700",bg:"tw-bg-blue-200/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-200"},{id:8,value:"day-three-call-two",name:"No reply 2 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-800",bg:"tw-bg-blue-400/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-300"},{id:9,value:"day-three-call-three",name:"No reply 3 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-900",bg:"tw-bg-blue-600/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-400"},{id:10,value:"reporter",name:"Reported",text:"tw-text-teal-500",textLight:"tw-text-teal-800",bg:"tw-bg-teal-500/10",bgLight:"tw-bg-teal-100",ring:"tw-ring-teal-300"},{id:11,value:"annuler",name:"Canceled",text:"tw-text-red-500",textLight:"tw-text-red-800",bg:"tw-bg-red-500/10",bgLight:"tw-bg-red-100",ring:"tw-ring-red-300"},{id:13,value:"reconfirmer",name:"Reconfirmed",text:"tw-text-cyan-500",textLight:"tw-text-cyan-800",bg:"tw-bg-cyan-500/10",bgLight:"tw-bg-cyan-100",ring:"tw-ring-cyan-300"}],An=[{id:0,value:null,name:"Select",text:"tw-text-neutral-600",bg:"tw-bg-neutral-500/10",ring:"tw-ring-neutral-300"},{id:1,value:"oui",name:"Oui",text:"tw-text-green-500",bg:"tw-bg-green-500/10",ring:"tw-ring-green-300"},{id:2,value:"non",name:"Non",text:"tw-text-pink-500",bg:"tw-bg-pink-500/10",ring:"tw-ring-pink-300"}],Wn=[{id:0,value:null,name:"Select",text:"tw-text-gray-500",textLight:"tw-text-gray-800",bg:"tw-bg-gray-500/10",bgLight:"tw-bg-gray-100",ring:"tw-ring-gray-300"},{id:1,value:"dispatch",name:"Dispatched",text:"tw-text-yellow-500",textLight:"tw-text-yellow-800",bg:"tw-bg-yellow-500/10",bgLight:"tw-bg-yellow-100",ring:"tw-ring-yellow-300"},{id:2,value:"expidier",name:"Shipped",text:"tw-text-fuchsia-500",textLight:"tw-text-fuchsia-800",bg:"tw-bg-fuchsia-500/10",bgLight:"tw-bg-fuchsia-100",ring:"tw-ring-fuchsia-300"},{id:3,value:"livrer",name:"Delivered",text:"tw-text-green-500",bg:"tw-bg-green-500/10",textLight:"tw-text-green-800",bgLight:"tw-bg-green-100",ring:"tw-ring-green-300"},{id:4,value:"reporter",name:"Reported",text:"tw-text-orange-500",bg:"tw-bg-orange-500/10",textLight:"tw-text-orange-800",bgLight:"tw-bg-orange-100",ring:"tw-ring-orange-300"},{id:5,value:"refuser",name:"Refused",text:"tw-text-pink-500",bg:"tw-bg-pink-500/10",textLight:"tw-text-pink-800",bgLight:"tw-bg-pink-100",ring:"tw-ring-pink-300"},{id:6,value:"annuler",name:"Canceled",text:"tw-text-red-500",bg:"tw-bg-red-500/10",textLight:"tw-text-red-800",bgLight:"tw-bg-red-100",ring:"tw-ring-red-300"},{id:9,value:"pas-de-reponse",name:"No Answer",text:"tw-text-yellow-500",bg:"tw-bg-yellow-500/10",textLight:"tw-text-yellow-800",bgLight:"tw-bg-yellow-100",ring:"tw-ring-yellow-300"},{id:10,value:"retourner",name:"Retourned",text:"tw-text-purple-500",bg:"tw-bg-purple-500/10",textLight:"tw-text-purple-800",bgLight:"tw-bg-purple-100",ring:"tw-ring-purple-300"},{id:11,value:"reconfirmer",name:"Reconfirmed",text:"tw-text-indigo-500",bg:"tw-bg-indigo-500/10",textLight:"tw-text-indigo-800",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-300"},{id:12,value:"paid",name:"Paid",text:"tw-text-emerald-500",bg:"tw-bg-emerald-500/10",textLight:"tw-text-emerald-800",bgLight:"tw-bg-emerald-100",ring:"tw-ring-emerald-300"},{id:13,value:"transfer",name:"Transferd",text:"tw-text-violet-500",bg:"tw-bg-violet-500/10",textLight:"tw-text-violet-800",bgLight:"tw-bg-violet-100",ring:"tw-ring-violet-300"},{id:14,value:"livrer-et-retourner",name:"Delivered & Return",text:"tw-text-cyan-500",bg:"tw-bg-cyan-500/10",textLight:"tw-text-cyan-800",bgLight:"tw-bg-cyan-100",ring:"tw-ring-cyan-300"},{id:15,value:"reconfirmer",name:"Reconfirmed",text:"tw-text-emerald-500",bg:"tw-bg-emerald-500/10",textLight:"tw-text-emerald-800",bgLight:"tw-bg-emerald-100",ring:"tw-ring-emerald-300"}],$n=[null,"expidier","paid","transfer","dispatch"],En={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},On=(0,i._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),Tn=(0,i._)("br",null,null,-1),Vn=(0,i._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),qn={class:"tw-flex tw-justify-end tw-mt-2"};function Rn(t,e,s,r,l,o){const n=(0,i.up)("VueDatePicker"),d=(0,i.up)("popup-full");return(0,i.wg)(),(0,i.iD)("div",{key:s.order.id},[(0,i.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>o.cancel()),visible:s.visible},{default:(0,i.w5)((()=>[(0,i._)("div",En,[On,(0,i.Wm)(n,{modelValue:l.date,"onUpdate:modelValue":e[0]||(e[0]=t=>l.date=t),format:o.format},null,8,["modelValue","format"]),Tn,Vn,(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[a.nr,l.note]]),(0,i._)("div",qn,[(0,i.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleConfirm},{default:(0,i.w5)((()=>[(0,i.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var Fn={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_agente_date=this.realDate,t.reported_agente_note=this.note,t.confirmation="reporter",this.isLoading=!0,ys.agenteUpdateConfirmation(t.id,"reporter",t).then((e=>{console.log(e.data),this.$alert({type:"success",title:"Order reported successfully"}),this.$store.dispatch("sale/update",{id:t.id,sale:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},format(t){const e=t.getDate(),s=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,i=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getFullYear();return this.realDate=`${r}-${i}-${s}`,`${s}/${i}/${r}`},cancel(){this.$emit("cancel")}},mounted(){}};const In=(0,d.Z)(Fn,[["render",Rn]]);var jn=In,Nn={props:["confirmation","id","sale"],components:{SaleConfirmationReporting:jn},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",noteReporter:"",selectedId:0,allOptions:Ln,showPopupReporter:!1}},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleResolved(t){t?(this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))):this.showPopup=!1},handleClick(){this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))},handleClickReporter(){this.showPopupReporter=!1},async handleChange(t){if(t.id===this.selectedId)return!1;"confirmer"!==t.value&&"reporter"!==t.value?(this.selectedId=t.id,this.updateOrder()):"reporter"===t.value?this.showPopupReporter=!0:(this.nextOption=t.id,this.showPopup=!0),this.close()},async updateOrder(){return this.isLoading=!0,ys.agenteUpdateConfirmation(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmation(this.id,this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},async updateOrderWithNote(){return this.isLoading=!0,ys.agenteUpdateConfirmationWithNote(this.id,this.selected.value,this.note).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmationNote(this.id,this.selected.value,this.note),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateConfirmation(t,e){this.$store.dispatch("sale/updateConfirmation",{id:t,confirmation:e})},updateConfirmationNote(t,e,s){this.$store.dispatch("sale/updateConfirmationWithNote",{id:t,confirmation:e,note:s})}},mounted(){this.availableOptions.includes(this.confirmation)?this.selectedId=this.allOptions.find((t=>t.value==this.confirmation)).id:this.selectedId=0}};const Mn=(0,d.Z)(Nn,[["render",Un]]);var Hn=Mn;const Yn={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},Kn=["onClick"],Zn={class:"tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100"},Bn={key:1,class:"tw-relative tw-min-w-[100px] tw-flex tw-items-center"};function Qn(t,e,s,a,r,l){return l.fetched?(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{key:s.affectation,class:"tw-relative tw-min-w-[100px]"},[(0,i._)("button",{onClick:e[0]||(e[0]=(...t)=>l.toggle&&l.toggle(...t)),class:"tw-whitespace-nowrap focus:tw-ring-4 tw-ring-neutral-200 tw-bg-neutral-600/10 tw-text-neutral-800 focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center",type:"button"},[(0,i.Uk)((0,Q.zw)(l.selected.firstname)+" "+(0,Q.zw)(l.selected.lastname)+" ",1),r.isLoading?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(X.t,{key:0,class:"tw-ml-1"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,Q.zw)(r.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),r.isLoading?((0,i.wg)(),(0,i.j4)(X.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-loading")])),_:1})):(0,i.kq)("",!0)]),(0,i._)("div",{class:(0,Q.C_)([{"tw-hidden":!r.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,i._)("ul",Yn,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.options,(t=>((0,i.wg)(),(0,i.iD)("li",{onClick:e=>l.handleChange(t),key:t.id},[(0,i._)("a",Zn,(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),1)],8,Kn)))),128))])],2)])),[[Bt.L,l.close]]):((0,i.wg)(),(0,i.iD)("div",Bn,[(0,i.Wm)(X.t,{class:"tw-animate-spin tw-ml-1 tw-text-orange-500"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-loading")])),_:1})]))}var Gn={props:["affectation","id","sale"],data(){return{isOpen:!1,isLoading:!1,selectedId:null,old:null}},computed:{options(){return[{id:null,firstname:"select",lastname:""},...this.deliveries]},selected(){const t=[...this.deliveries.map((t=>parseInt(t.id)))];return null!=this.selectedId&&t.includes(parseInt(this.selectedId))?this.options.filter((t=>t.id==this.selectedId))[0]:{id:null,firstname:"select",lastname:""}},users(){return this.$store.getters["user/users"]},allDeliveries(){return this.users.filter((t=>"delivery"==t.role_name))},fetched(){return this.$store.getters["user/fetched"]},deliveries(){return this.allDeliveries.filter((t=>t.delivery_products.some((t=>this.sale.items.some((e=>e.product_id==t.product_id))))))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(this.old=this.affectation,t.id===this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()},updateOrder(){ys.agenteUpdateAffectaion(this.id,this.selectedId).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateAffectation(this.id,this.selected.id),this.isLoading=!1)}),(t=>{this.$handleApiError(t),this.isLoading=!1,this.selectedId=this.old}))},updateAffectation(t,e){this.$store.dispatch("sale/updateAffectation",{id:t,affectation:e})}},mounted(){this.selectedId=this.affectation}};const Jn=(0,d.Z)(Gn,[["render",Qn]]);var Xn=Jn;const td={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},ed=["onClick"];function sd(t,e,s,a,r,l){const o=(0,i.up)("SaleDeliveryReporting");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{key:s.delivery,class:"tw-relative tw-min-w-[100px]"},[(0,i._)("button",{onClick:e[0]||(e[0]=(...t)=>l.toggle&&l.toggle(...t)),class:(0,Q.C_)([[l.selected.text,l.selected.bg,l.selected.ring],"focus:tw-ring-4 tw-min-w-[100px] focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between"]),type:"button"},[(0,i.Uk)((0,Q.zw)(l.selected.name)+" ",1),r.isLoading?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(X.t,{key:0,class:"tw-ml-1"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,Q.zw)(r.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),r.isLoading?((0,i.wg)(),(0,i.j4)(X.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-loading")])),_:1})):(0,i.kq)("",!0)],2),(0,i._)("div",{class:(0,Q.C_)([{"tw-hidden":!r.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,i._)("ul",td,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.options,(t=>((0,i.wg)(),(0,i.iD)("li",{onClick:e=>l.handleChange(t),key:t.id},[(0,i._)("a",{class:(0,Q.C_)(["tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100",[t.text,t.bg]])},(0,Q.zw)(t.name),3)],8,ed)))),128))])],2),(0,i.Wm)(o,{order:s.sale,visible:r.showPopupReporter,onCancel:e[1]||(e[1]=t=>r.showPopupReporter=!1)},null,8,["order","visible"])])),[[Bt.L,l.close]])}const ad={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},id=(0,i._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),rd=(0,i._)("br",null,null,-1),ld=(0,i._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),od={class:"tw-flex tw-justify-end tw-mt-2"};function nd(t,e,s,r,l,o){const n=(0,i.up)("VueDatePicker"),d=(0,i.up)("popup-full");return(0,i.wg)(),(0,i.iD)("div",{key:s.order.id},[(0,i.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>o.cancel()),visible:s.visible},{default:(0,i.w5)((()=>[(0,i._)("div",ad,[id,(0,i.Wm)(n,{modelValue:l.date,"onUpdate:modelValue":e[0]||(e[0]=t=>l.date=t),format:o.format},null,8,["modelValue","format"]),rd,ld,(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[a.nr,l.note]]),(0,i._)("div",od,[(0,i.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleConfirm},{default:(0,i.w5)((()=>[(0,i.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var dd={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_delivery_date=this.realDate,t.reported_delivery_note=this.note,t.delivery="reporter",this.isLoading=!0,ys.deliveryUpdateDelivery(t.id,"reporter",t).then((()=>{this.$alert({type:"success",title:"Order reported successfully"}),this.$store.dispatch("sale/update",{id:t.id,sale:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},format(t){const e=t.getDate(),s=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,i=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getFullYear();return this.realDate=`${r}-${i}-${s}`,`${s}/${i}/${r}`},cancel(){this.$emit("cancel")}},mounted(){}};const wd=(0,d.Z)(dd,[["render",nd]]);var cd=wd,ud={props:["delivery","id","sale"],components:{SaleDeliveryReporting:cd},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",selectedId:0,allOptions:Wn,showPopupReporter:!1}},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){return t.id!==this.selectedId&&("reporter"!==t.value?(this.selectedId=t.id,this.updateOrder(),this.close(),!0):void("reporter"==t.value&&(this.showPopupReporter=!0,this.close())))},async updateOrder(){return this.isLoading=!0,ys.deliveryUpdateDelivery(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateDelivery(this.id,this.selected.value),this.isLoading=!1),"QUANTITY_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.message})}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateDelivery(t,e){this.$store.dispatch("sale/updateDelivery",{id:t,delivery:e})}},mounted(){this.availableOptions.includes(this.delivery)?this.selectedId=this.allOptions.find((t=>t.value==this.delivery)).id:this.selectedId=0}};const pd=(0,d.Z)(ud,[["render",sd]]);var md=pd;const hd={key:0};function gd(t,e,s,a,r,l){const o=(0,i.up)("SaleHistory"),n=(0,i.up)("popup-full"),d=(0,i.up)("UpdateSale");return s.sale?((0,i.wg)(),(0,i.iD)("div",hd,[(0,i.Wm)(G.T,{link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+s.sale.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"]),t.$can("update_sale")?((0,i.wg)(),(0,i.j4)(G.T,{key:0,onClick:e[0]||(e[0]=t=>r.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,i.kq)("",!0),(t.$can("view_sale"),(0,i.kq)("",!0)),(t.$can("delete_sale"),(0,i.kq)("",!0)),(0,i.Wm)(G.T,{onClick:e[2]||(e[2]=t=>r.showHistoryPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"teal",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-sort-clock-ascending-outline")])),_:1})])),_:1}),(0,i.Wm)(n,{visible:r.showHistoryPopup,onCancel:e[4]||(e[4]=t=>r.showHistoryPopup=!1)},{default:(0,i.w5)((()=>[r.showHistoryPopup?((0,i.wg)(),(0,i.j4)(o,{key:0,onCancel:e[3]||(e[3]=t=>r.showHistoryPopup=!1),sale:s.sale},null,8,["sale"])):(0,i.kq)("",!0)])),_:1},8,["visible"]),(0,i.Wm)(d,{visible:r.showUpdatePopup,"onUpdate:visible":e[5]||(e[5]=t=>r.showUpdatePopup=t),order:s.sale},null,8,["visible","order"])])):(0,i.kq)("",!0)}var fd=s(7103),vd=s(795),yd=s(2773);const _d={class:"md:tw-w-[50%] tw-max-h-full tw-relative tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},xd={key:0,class:"tw-w-full tw-h-full"},bd={key:1,class:"tw-p-5"},kd={class:"d-flextw-flex-col justify-space-between flex-grow-1"},Cd={class:"tw-flex tw-items-center tw-gap-2 tw-my-2"},Dd={class:"tw-text-sm tw-capitalize tw-text-neutral-600"},Sd={class:"flex-shrink-0 tw-text-neutral-500 tw-flex tw-items-center tw-gap-2 tw-text-sm"},zd={class:"d-flextw-flex-col justify-space-between flex-grow-1"},Ud={class:"tw-flex tw-flex-col tw-my-2"},Ld=(0,i._)("div",null," New Order Created ",-1),Pd={class:"flex-shrink-0 tw-flex tw-items-center tw-gap-2 tw-text-sm"};function Ad(t,e,s,a,r,l){const o=(0,i.up)("LoadingAnimation");return(0,i.wg)(),(0,i.iD)("div",_d,[r.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",xd,[(0,i.Wm)(o,{class:"text-primary-color"})])),(0,i.Wm)(G.T,{onClick:l.cancel,icon:"mdi-close",variant:"flat",size:"w-small",color:"red",class:"tw-absolute tw-top-3 tw-z-10 tw-right-3"},null,8,["onClick"]),r.isLoaded?((0,i.wg)(),(0,i.iD)("div",bd,[(0,i.Wm)(vd.R,{density:"compact",side:"end"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.events,(t=>((0,i.wg)(),(0,i.j4)(yd.N,{key:t.id,class:"mb-4","dot-color":l.eventColor(t.type),size:"x-small"},{default:(0,i.w5)((()=>[(0,i._)("div",kd,[(0,i._)("div",Cd,[(0,i.Wm)(fd.v,{class:"ms-0 tw-capitalize tw-w-fit",color:l.eventColor(t.type),label:"",size:"small"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,Q.zw)(t.type),1)])),_:2},1032,["color"]),"responsibility"!=t.type?((0,i.wg)(),(0,i.j4)(X.t,{key:0,size:"x-small",color:"grey"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-arrow-right")])),_:1})):(0,i.kq)("",!0),"responsibility"!=t.type?((0,i.wg)(),(0,i.j4)(fd.v,{key:1,class:"ms-0 tw-capitalize tw-w-fit",color:"green",label:"",size:"small"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,Q.zw)(t.historique),1)])),_:2},1024)):(0,i.kq)("",!0)]),(0,i._)("div",Dd,(0,Q.zw)(t.users.firstname)+" "+(0,Q.zw)(t.users.lastname),1),(0,i._)("div",Sd,[(0,i._)("span",null,(0,Q.zw)(t.created_at?.split("T")[0]),1),(0,i._)("span",null,(0,Q.zw)(t.created_at?.split("T")[1].split(".")[0]),1)])])])),_:2},1032,["dot-color"])))),128)),(0,i.Wm)(yd.N,{class:"mb-4","dot-color":"green",size:"x-small"},{default:(0,i.w5)((()=>[(0,i._)("div",zd,[(0,i._)("div",Ud,[(0,i.Wm)(fd.v,{class:"ms-0 tw-capitalize tw-w-fit",color:"green",label:"",size:"small"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Order Created ")])),_:1}),Ld]),(0,i._)("div",Pd,[(0,i._)("span",null,(0,Q.zw)(s.sale.created_at?.split("T")[0]),1),(0,i._)("span",null,(0,Q.zw)(s.sale.created_at?.split("T")[1].split(".")[0]),1)])])])),_:1})])),_:1})])):(0,i.kq)("",!0)])}var Wd={props:["sale"],data(){return{isLoaded:!1,allEvents:[]}},computed:{events(){return[...this.allEvents].reverse()}},methods:{cancel(){this.$emit("cancel")},getHistory(){this.isLoaded=!1,ys.history(this.sale.id).then((t=>{console.log(t.data),this.allEvents=t.data.data.orders}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))},eventColor(t){let e={confirmation:"primary-color",delivery:"blue",upsell:"purple",affectation:"cyan"};return["confirmation","delivery","upsell","affectation"].includes(t)?e[t]:"primary-color"}},mounted(){this.getHistory()}};const $d=(0,d.Z)(Wd,[["render",Ad]]);var Ed=$d;const Od={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},Td={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[950px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},Vd=(0,i._)("h1",{class:"tw-text-lg"},"Update Order",-1),qd={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},Rd={class:"md:tw-col-span-6 tw-col-span-12"},Fd=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),Id={class:"md:tw-col-span-6 tw-col-span-12"},jd=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),Nd={class:"md:tw-col-span-6 tw-col-span-12"},Md=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),Hd=["value"],Yd=["value"],Kd={class:"md:tw-col-span-6 tw-col-span-12"},Zd=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),Bd={class:"md:tw-col-span-12 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},Qd=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Confirmation",-1),Gd={class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},Jd={class:"tw-col-span-12"},Xd=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note:",-1),tw={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},ew={class:"tw-col-span-12 md:tw-col-span-4"},sw=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Date:",-1),aw={class:"tw-col-span-12 md:tw-col-span-8"},iw=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Note:",-1),rw={class:"md:tw-col-span-6 tw-col-span-12"},lw=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Affectation",-1),ow={class:"md:tw-col-span-6 tw-col-span-12"},nw=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Upsell",-1),dw=["value"],ww={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-4"},cw={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},uw={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit -tw-rotate-90 tw-scale-75"},pw=(0,i._)("div",{class:"tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),mw={class:"tw-flex tw-flex-col tw-justify-center"},hw=(0,i._)("p",{class:"tw-col-span-12 tw-mt-5 tw-mb-2"},"Order Items",-1),gw={key:1,class:"tw-col-span-12 tw-rounded tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},fw={key:2,class:"md:tw-col-span-12 tw-col-span-12"},vw={class:"tw-max-w-full tw-overflow-auto"},yw={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},_w={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},xw={class:"tw-mx-auto tw-w-[50px] tw-h-[35px] tw-shadow tw-shadow-gray-200 tw-rounded tw-overflow-hidden tw-cursor-pointer"},bw=["src"],kw={scope:"row",class:"tw-pr-6 tw-py-2 tw-font-medium tw-text-gray-900"},Cw=["onUpdate:modelValue"],Dw=(0,i._)("option",{value:0},"Select",-1),Sw=["value"],zw={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Uw=["disabled","onUpdate:modelValue"],Lw=(0,i._)("option",{value:0},"Select",-1),Pw=["value"],Aw={key:0},Ww={key:1},$w={key:2},Ew={key:3},Ow=["value"],Tw={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Vw={class:"md:tw-col-span-6 tw-col-span-12"},qw=["onUpdate:modelValue"],Rw={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Fw={key:0},Iw={key:1,class:"md:tw-col-span-6 tw-col-span-12"},jw=["onUpdate:modelValue"],Nw={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Mw={class:"tw-w-full tw-col-span-12 tw-flex tw-justify-end tw-mt-3"},Hw=(0,i._)("span",{class:"!tw-text-sm !tw-capitalize"},"Add",-1),Yw={class:"md:tw-col-span-12 tw-col-span-12"},Kw={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},Zw=(0,i._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),Bw={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},Qw=(0,i._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-mb-2 tw-whitespace-nowrap"},"Price: ",-1),Gw={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},Jw=(0,i._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),Xw={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},tc=(0,i._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-whitespace-nowrap"},"Total Price: ",-1),ec={class:"tw-text-xl tw-text-green-500 tw-font-bold tw-px-2 tw-py-1 tw-rounded tw-bg-green-100"},sc={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},ac=(0,i._)("span",{class:"text-white"}," Cancel ",-1),ic=(0,i._)("span",{class:"text-white"}," Update ",-1);function rc(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation"),d=(0,i.up)("AddOrderConfirmation"),w=(0,i.up)("AddOrderAffectation"),c=(0,i.up)("ProductOffers"),u=(0,i.up)("popup-full");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(u,{onCancel:e[14]||(e[14]=e=>t.$emit("update:visible",!1)),visible:s.visible},{default:(0,i.w5)((()=>[o.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",Od,[(0,i.Wm)(n)])),o.isLoaded?((0,i.wg)(),(0,i.iD)("div",Td,[Vd,(0,i._)("div",qd,[(0,i._)("div",Rd,[Fd,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.fullname]])]),(0,i._)("div",Id,[jd,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.phone]])]),(0,i._)("div",Nd,[Md,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[(0,i._)("option",{disabled:"",value:l.sale.city},(0,Q.zw)(l.sale.city),9,Hd),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.cities,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,Yd)))),128))],512),[[a.bM,l.sale.city]])]),(0,i._)("div",Kd,[Zd,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>l.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.adresse]])]),(0,i._)("div",Bd,[Qd,(0,i.Wm)(d,{order:l.sale,id:l.sale.id,confirmation:l.sale.confirmation,"onUpdate:confirmation":e[4]||(e[4]=t=>l.sale.confirmation=t),onConfirmed:e[5]||(e[5]=t=>l.sale.note=t),onReported:o.handleReported,onChange:o.handleConfirmationChange},null,8,["order","id","confirmation","onReported","onChange"]),(0,i._)("div",Gd,[(0,i._)("div",Jd,[Xd,(0,i.wy)((0,i._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[6]||(e[6]=t=>l.sale.note=t)},null,512),[[a.nr,l.sale.note]])])]),"reporter"==l.sale.confirmation&&l.sale.reported_agente_date?((0,i.wg)(),(0,i.iD)("div",tw,[(0,i._)("div",ew,[sw,(0,i._)("div",null,(0,Q.zw)(l.sale.reported_agente_date.split("T")[0]),1)]),(0,i._)("div",aw,[iw,(0,i.wy)((0,i._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[7]||(e[7]=t=>l.sale.reported_agente_note=t)},null,512),[[a.nr,l.sale.reported_agente_note]])])])):(0,i.kq)("",!0)]),(0,i._)("div",rw,[lw,(0,i.Wm)(w,{"product-ids":o.product_ids,items:l.items,"onUpdate:items":e[8]||(e[8]=t=>l.items=t),order:l.sale,confirmation:l.sale.confirmation,affectation:l.sale.affectation,"onUpdate:affectation":e[9]||(e[9]=t=>l.sale.affectation=t),id:l.sale.id},null,8,["product-ids","items","order","confirmation","affectation","id"])]),(0,i._)("div",ow,[nw,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>l.sale.upsell=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.upsells,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.value,key:t.id},(0,Q.zw)(t.name),9,dw)))),128))],512),[[a.bM,l.sale.upsell]])]),(0,i.kq)("",!0),(0,i._)("div",ww,[(0,i._)("div",cw,[(0,i._)("label",uw,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=t=>l.sale.counts_from_warehouse=t),class:"tw-sr-only tw-peer"},null,512),[[a.e8,l.sale.counts_from_warehouse]]),pw]),(0,i._)("label",mw,[(0,i._)("span",{class:(0,Q.C_)([[l.sale.counts_from_warehouse?"tw-text-orange-500":"tw-text-neutral-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Warehouse",2),(0,i._)("span",{class:(0,Q.C_)([[l.sale.counts_from_warehouse?"tw-text-neutral-500":"tw-text-orange-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Delivery",2)])])]),hw,l.items.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",gw," No Order items ")),l.items.length?((0,i.wg)(),(0,i.iD)("div",fw,[(0,i._)("div",vw,[((0,i.wg)(),(0,i.iD)("table",{key:l.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,i._)("thead",yw,[(0,i._)("tr",null,[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,i._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,i._)("div",_w,(0,Q.zw)(t),1)],2))),64))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.items,((t,e)=>((0,i.wg)(),(0,i.iD)("tr",{key:t.product.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[((0,i.wg)(),(0,i.iD)("th",{scope:"row",class:"tw-px-2 tw-py-2",key:t.product.id},[(0,i._)("div",xw,[o.product_images[e]?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tw-w-full tw-h-full tw-object-contain",src:l.serverUrl+"storage/"+o.product_images[e]},null,8,bw)):(0,i.kq)("",!0)])])),(0,i._)("th",kw,[(0,i._)("div",null,[(0,i._)("div",null,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e=>t.product.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[Dw,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.filtredProducts,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,Sw)))),128))],8,Cw),[[a.bM,t.product.id]])])])]),(0,i._)("th",zw,[(0,i._)("div",null,[0!=t.product.id?(0,i.wy)(((0,i.wg)(),(0,i.iD)("select",{key:0,disabled:1==o.getVariations(t.product)?.variations?.length,"onUpdate:modelValue":e=>t.product_variation.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[Lw,o.getVariations(t.product)?.variations?.length>1?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(o.getVariations(t.product)?.variations,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},[t.size||t.color?t.size&&"-"!=t.size&&t.color&&"-"!=t.color?((0,i.wg)(),(0,i.iD)("p",Ww,(0,Q.zw)(t.size)+" / "+(0,Q.zw)(t.color),1)):t.size&&"-"!=t.size?((0,i.wg)(),(0,i.iD)("p",$w,(0,Q.zw)(t.size),1)):t.color?((0,i.wg)(),(0,i.iD)("p",Ew,(0,Q.zw)(t.color),1)):(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",Aw,"-"))],8,Pw)))),128)):((0,i.wg)(),(0,i.iD)("option",{key:1,value:o.getVariations(t.product)?.variations[0]?.id}," Default ",8,Ow))],8,Uw)),[[a.bM,t.product_variation.id]]):(0,i.kq)("",!0)])]),(0,i._)("th",Tw,[(0,i._)("div",Vw,[(0,i.wy)((0,i._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,qw),[[a.nr,t.quantity]])])]),(0,i._)("th",Rw,[(0,i._)("div",null,[null==t.price?((0,i.wg)(),(0,i.iD)("div",Fw," - ")):((0,i.wg)(),(0,i.iD)("div",Iw,[(0,i.wy)((0,i._)("input",{type:"number","onUpdate:modelValue":e=>t.price=e,placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,jw),[[a.nr,t.price]])]))])]),(0,i._)("th",Nw,[(0,i._)("div",null,[(0,i.Wm)(G.T,{onClick:e=>o.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])]))])])):(0,i.kq)("",!0),(0,i._)("div",Mw,[(0,i._)("div",null,[(0,i.Wm)(G.T,{onClick:o.addNewRow,class:"mr-2 !tw-px-1 !tw-py-1 !tw-pr-2 tw-flex tw-items-center tw-gap-2","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-plus")])),_:1}),Hw])),_:1},8,["onClick"])])]),(0,i._)("div",Yw,[(0,i.Wm)(c,{"product-ids":o.product_ids},null,8,["product-ids"])]),(0,i._)("div",Kw,[Zw,(0,i._)("div",Bw,[Qw,(0,i.wy)((0,i._)("input",{type:"number","onUpdate:modelValue":e[13]||(e[13]=t=>l.sale.price=t),class:"tw-py-1 tw-max-w-[100px] tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.price]])])]),(0,i._)("div",Gw,[Jw,(0,i._)("div",Xw,[tc,(0,i._)("div",ec,(0,Q.zw)(l.currency)+" "+(0,Q.zw)(o.total_price),1)])])]),(0,i._)("div",sc,[(0,i.Wm)(G.T,{onClick:o.handleCancel,color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[ac])),_:1},8,["onClick"]),(0,i.Wm)(G.T,{loading:l.isLoading,onClick:o.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[ic])),_:1},8,["loading","onClick"])])])):(0,i.kq)("",!0)])),_:1},8,["visible"])])}const lc={class:"tw-relative"},oc=["value"],nc={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},dc=(0,i._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter note",-1),wc={class:"tw-flex tw-justify-end tw-mt-2"};function cc(t,e,s,r,l,o){const n=(0,i.up)("popup-full"),d=(0,i.up)("AddOrderReporting");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{key:s.confirmation,class:"tw-relative tw-min-w-[100px] tw-w-full"},[(0,i._)("div",null,[(0,i._)("div",lc,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.confirmationValue=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allOptions,(t=>((0,i.wg)(),(0,i.iD)("option",{class:(0,Q.C_)([t.text,!t.value&&"!tw-text-gray-700"]),key:t.id,value:t.value},(0,Q.zw)(t.name),11,oc)))),128))],512),[[a.bM,o.confirmationValue]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])]),(0,i.Wm)(n,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>l.showPopup=!1),visible:l.showPopup},{default:(0,i.w5)((()=>[(0,i._)("div",nc,[dc,(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"3",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[a.nr,l.note]]),(0,i._)("div",wc,[(0,i.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleClick},{default:(0,i.w5)((()=>[(0,i.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"]),(0,i.Wm)(d,{order:s.order,onConfirm:o.handleReportedDate,visible:l.showPopupReporter,onCancel:e[3]||(e[3]=t=>l.showPopupReporter=!1)},null,8,["order","onConfirm","visible"])])),[[Bt.L,o.close]])}const uc={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},pc=(0,i._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),mc=(0,i._)("br",null,null,-1),hc=(0,i._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),gc={class:"tw-flex tw-justify-end tw-mt-2"};function fc(t,e,s,r,l,o){const n=(0,i.up)("VueDatePicker"),d=(0,i.up)("popup-full");return(0,i.wg)(),(0,i.iD)("div",{key:s.order.id},[(0,i.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>o.cancel()),visible:s.visible},{default:(0,i.w5)((()=>[(0,i._)("div",uc,[pc,(0,i.Wm)(n,{modelValue:l.date,"onUpdate:modelValue":e[0]||(e[0]=t=>l.date=t),format:o.format},null,8,["modelValue","format"]),mc,hc,(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[a.nr,l.note]]),(0,i._)("div",gc,[(0,i.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleConfirm},{default:(0,i.w5)((()=>[(0,i.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var vc={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_agente_date=this.realDate,t.reported_agente_note=this.note,t.confirmation="reporter",this.$emit("confirm",{reported_agente_date:this.realDate,reported_agente_note:this.note}),this.isLoading=!0},format(t){const e=t.getDate(),s=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,i=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getFullYear();return this.realDate=`${r}-${i}-${s}`,`${s}/${i}/${r}`},cancel(){this.$emit("cancel")}}};const yc=(0,d.Z)(vc,[["render",fc]]);var _c=yc,xc={props:["confirmation","id","order"],components:{AddOrderReporting:_c},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",selectedId:0,allOptions:Ln,reported_agente_date:null,reported_agente_note:"",showPopupReporter:!1}},watch:{},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},confirmationValue:{get(){return this.confirmation},set(t){switch(t){case"reporter":this.showPopupReporter=!0;break;case"confirmer":this.showPopup=!0;break;default:this.$emit("update:confirmation",t);break}}},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleResolved(t){t?(this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))):this.showPopup=!1},handleReportedDate(t){this.reported_agente_date=t.reported_agente_date,this.reported_agente_note=t.reported_agente_note,this.$emit("update:confirmation","reporter"),this.$emit("reported",t),this.showPopupReporter=!1},handleClick(){this.showPopup=!1,this.$emit("update:confirmation","confirmer"),this.$emit("confirmed",this.note)},async handleChange(t){if(t.id===this.selectedId)return!1;"confirmer"!==t.value&&"reporter"!==t.value?(this.selectedId=t.id,this.updateOrder()):"reporter"===t.value?this.showPopupReporter=!0:(this.nextOption=t.id,this.showPopup=!0),this.close()},async updateOrder(){return this.isLoading=!0,ys.agenteUpdateConfirmation(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmation(this.id,this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t)))},async updateOrderWithNote(){return this.isLoading=!0,ys.agenteUpdateConfirmationWithNote(this.id,this.selected.value,this.note).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmationWithNote(this.id,this.selected.value,this.note),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateConfirmation(t,e){this.$store.dispatch("order/updateConfirmation",{id:t,confirmation:e}),this.$emit("update",e)},updateConfirmationWithNote(t,e,s){this.$store.dispatch("order/updateConfirmationWithNote",{id:t,confirmation:e,note:s}),this.$emit("update",e)}},mounted(){this.availableOptions.includes(this.confirmation)?this.selectedId=this.allOptions.find((t=>t.value==this.confirmation)).id:this.selectedId=0}};const bc=(0,d.Z)(xc,[["render",cc]]);var kc=bc;const Cc={class:"tw-relative"},Dc=["disabled"],Sc=["value"],zc={key:1,class:"tw-relative tw-min-w-[100px] tw-flex tw-items-center"};function Uc(t,e,s,r,l,o){return l.fetched?(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{key:s.affectation,class:"tw-relative tw-min-w-[100px]"},[(0,i._)("div",null,[(0,i._)("div",Cc,[(0,i.wy)((0,i._)("select",{disabled:"confirmer"!=s.confirmation,"onUpdate:modelValue":e[0]||(e[0]=t=>o.affectationValue=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.options,(t=>((0,i.wg)(),(0,i.iD)("option",{key:t.id,value:t.id},(0,Q.zw)(t.firstname+" "+t.lastname),9,Sc)))),128))],8,Dc),[[a.bM,o.affectationValue]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])])])),[[Bt.L,o.close]]):((0,i.wg)(),(0,i.iD)("div",zc,[(0,i.Wm)(X.t,{class:"tw-animate-spin tw-ml-1 tw-text-orange-500"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-loading")])),_:1})]))}var Lc={props:["affectation","id","order","confirmation","items","productIds"],data(){return{isOpen:!1,isLoading:!1,selectedId:null,fetched:!1}},computed:{options(){return[{id:null,firstname:"select",lastname:""},...this.deliveries]},order_items(){return this.items},affectationValue:{get(){return this.affectation},set(t){this.$emit("update:affectation",t)}},selected(){const t=[...this.deliveries.map((t=>parseInt(t.id)))];return null!=this.selectedId&&t.includes(parseInt(this.selectedId))?this.options.filter((t=>t.id==this.selectedId))[0]:{id:null,firstname:"select",lastname:""}},users(){return this.$store.getters["user/users"]},allDeliveries(){return this.users.filter((t=>"delivery"==t.role_name))},deliveries(){return this.allDeliveries.filter((t=>t.delivery_products.some((t=>this.productIds.includes(t.product_id)))))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(t.id===this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()},getUsers(){this.fetched=!1,Z.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),this.$store.dispatch("user/setFetched",!0),this.fetched=!0}})).catch(this.$handleApiError)}},mounted(){this.selectedId=this.affectation,this.getUsers()}};const Pc=(0,d.Z)(Lc,[["render",Uc]]);var Ac=Pc;const Wc=(0,i._)("h1",{class:"tw-mb-2 tw-font-medium"},"Offers",-1),$c={class:"tw-relative tw-overflow-x-auto tw-border-b sm:tw-rounded"},Ec={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Oc=(0,i._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-bg-gray-50"},[(0,i._)("tr",null,[(0,i._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Product Name"),(0,i._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Quantity"),(0,i._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Price"),(0,i._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Note")])],-1),Tc={class:"tw-px-6 tw-py-4"},Vc={class:"tw-px-6 tw-py-4"},qc={class:"tw-px-6 tw-py-4"},Rc={class:"tw-px-6 tw-py-4"},Fc={class:"tw-max-w-[250px] tw-text-sm"},Ic={key:0},jc=(0,i._)("td",{colspan:"5"},[(0,i._)("p",{class:"tw-text-center tw-p-5"}," No Offers ")],-1),Nc=[jc];function Mc(t,e,s,a,r,l){return(0,i.wg)(),(0,i.iD)("div",null,[Wc,(0,i._)("div",null,[(0,i._)("div",$c,[(0,i._)("table",Ec,[Oc,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.offers,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.key,class:"odd:tw-bg-white even:tw-bg-gray-50 tw-border-b"},[(0,i._)("td",Tc,(0,Q.zw)(l.getProduct(t.product_id)?.name),1),(0,i._)("td",Vc,(0,Q.zw)(t.quantity),1),(0,i._)("td",qc,(0,Q.zw)(t.price)+" "+(0,Q.zw)(r.currency),1),(0,i._)("td",Rc,[(0,i._)("p",Fc,(0,Q.zw)(t.note),1)])])))),128)),0==l.offers.length?((0,i.wg)(),(0,i.iD)("tr",Ic,Nc)):(0,i.kq)("",!0)])])])])])}var Hc={props:["productIds"],data(){return{currency:I}},computed:{products(){return this.$store.getters["product/products"]},offers(){return this.products.filter((t=>this.productIds.includes(t.id))).flatMap((t=>t.offers))}},methods:{getProduct(t){return this.products.find((e=>e.id==t))}}};const Yc=(0,d.Z)(Hc,[["render",Mc]]);var Kc=Yc,Zc={components:{AddOrderConfirmation:kc,AddOrderAffectation:Ac,ProductOffers:Kc},props:["visible","order"],data(){return{upsells:An,serverUrl:F,currency:I,isLoading:!1,isAddItem:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],reported_date:null,price:0,sale:{fullname:"",phone:"",city:"",adresse:"",price:0,upsell:null,confirmation:null,counts_from_warehouse:!1}}},watch:{product_id(){this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0},"sale.confirmation":{deep:!0,handler(t){"confirmer"!=t&&(this.sale.affectation=null,this.sale.delivery=null)}},product_ids:{deep:!0,handler(t,e){this.items.map(((s,a)=>{if(0==s.product.id)return s;const i=this.getVariations(s.product)?.variations;return e[a]==t[s]||i.some((t=>t.id==s.product_variation.id))||(s.product_variation={id:0},s.product_variation_id=0),1==i?.length&&(s.product_variation=i[0],s.product_variation_id=i[0].id),s}))}}},computed:{products(){return this.$store.getters["product/products"]},product_images(){return this.items.map((t=>0==t.product.id?null:this.products.find((e=>e.id==t.product.id))?.image))},product_ids(){return this.items.map((t=>t.product.id))},isLoaded(){return this.$store.getters["product/fetched"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,s)=>e.indexOf(t.id)===s))},filtredProducts(){return this.products},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},selectedProduct(){return this.products.find((t=>t.id==this.product_id))},total_price:{get(){const t=this.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(this.sale.price?this.sale.price:0)+parseFloat(t)}},isItemsValid(){if(0==this.items.length)return!1;const t=this.items.some((t=>0==t.product.id||0==t.product_variation_id||0==t.quantity));return!t},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city}},methods:{deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},handleConfirmationChange(){"confirmer"!=this.sale.confirmation&&(this.sale.affectation=null)},addNewRow(){const t={id:this.item_id,product_id:0,product_ref:null,product:{id:0},product_variation:{id:0},product_variation_id:0,order_id:this.order.id,quantity:0,price:0};this.items.push(t)},getVariations(t){return this.products.find((e=>e.id==t.id))},formatItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const s=e.variations.find((e=>e.id==t.product_variation.id));return s?{...t,product:e,product_id:e.id,product_variation:s,product_variation_id:s.id,product_ref:e.ref}:t}));return this.items=t,t},addItem(){if([this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),s={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:this.price};this.items.push(s),this.product_id=0,this.product_variation_id=0,this.price=0,this.item_id+=1},update(){if(this.formatItems(),!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;if("annuler"==this.sale.confirmation&&!this.sale.note)return this.$alert({type:"warning",title:"Add Cancellation note."}),!1;if(!this.isItemsValid)return this.$alert({type:"warning",title:"Order Items are not valid"}),!1;this.isLoading=!0;const t={id:this.sale.id,fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,upsell:this.sale.upsell,counts_from_warehouse:this.sale.counts_from_warehouse,orderItems:this.items,confirmation:this.sale.confirmation,note:this.sale.note,affectation:this.sale.affectation,reported_agente_note:this.sale.reported_agente_note,reported_agente_date:this.sale.reported_agente_date};"confirmer"!=t.confirmation&&(t.affectation=null,t.delivery=null),this.isLoading=!0,ys.update(t.id,t).then((e=>{"SUCCESS"==e.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"Order updated"}),this.$store.dispatch("sale/update",{id:t.id,sale:e.data.data.sale}),this.$emit("update:visible",!1),this.$emit("updateOrder",e.data.data.sale))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},handleCancel(){this.sale={...this.order},this.items=[...this.order.items],this.$emit("update:visible",!1)},handleReported(t){this.sale.reported_agente_note=t.reported_agente_note,this.sale.reported_agente_date=t.reported_agente_date},checkVariant(t,e){const s=this.products.find((e=>e.id==t));if(!s)return{exists:!1};let a=s.variations.find((t=>t.id==e));return a||(a=s.variations.length>0?s.variations[0]:null),{exists:!0,variation:a}},getProducts(){return ea.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.sale={...this.order},this.items=[...this.order.items]}};const Bc=(0,d.Z)(Zc,[["render",rc]]);var Qc=Bc,Gc={props:["sale"],name:"saleActions",components:{SaleHistory:Ed,UpdateSale:Qc},data(){return{showPopup:!1,showUpdatePopup:!1,showHistoryPopup:!1,isLoading:!1}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{}};const Jc=(0,d.Z)(Gc,[["render",gd]]);var Xc=Jc,tu={props:{sales:{required:!0},selectedReset:{required:!1,default:[]}},components:{SaleConfirmation:Hn,SaleAffectation:Xn,SaleDelivery:md,SaleActions:Xc},data(){return{allowedLimit:[5,10,20,50,100,300,500],currentPage:1,paginationLimit:50,todayDate:null,selected:[],isAllSelected:!1,columns:["id","date","city","products","client","confirmation","affectation","delivery","price","actions"]}},watch:{selectedReset(t){this.selected=t,0==this.selected.length&&(this.isAllSelected=!1)},paginationLimit(){this.currentPage=1},selected(t){this.$emit("selected",t)}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.sales.length/this.paginationLimit)},items(){const t=[...this.reportedForToday,...this.sales.filter((t=>!this.isReportedToday(t)))];return t.slice(this.prevRange,this.nextRange)},reportedForToday(){return this.sales.filter(this.isReportedToday)}},methods:{getPrice(t){return Nr(t)},isReportedToday(t){return this.isConfirmationReportedToday(t)||this.isDeliveryReportedToday(t)},isDeliveryReportedToday(t){return"reporter"==t.delivery&&t.reported_delivery_date?.split("T")[0]==this.todayDate},isConfirmationReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date?.split("T")[0]==this.todayDate},handleSelect(t,e){t.target.checked?this.selected=[...this.selected,e]:this.selected=this.selected.filter((t=>t!=e))},isSelected(t){return this.selected.includes(t)},handleSelectAll(t){t.target.checked?this.selected=[...this.items.map((t=>t.id))]:this.selected=[]}},mounted(){const t=new Date,e=t.getDate(),s=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,i=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getFullYear();this.todayDate=`${r}-${i}-${s}`}};const eu=(0,d.Z)(tu,[["render",bn]]);var su=eu,au={components:{SalesTable:su},data(){return{columns:[{prop:"id",name:"#"},{prop:"city",name:"City"},{prop:"date",name:"Date"},{prop:"client",name:"Client"},{prop:"product",name:"Product"},{prop:"upsell",name:"Upsell"},{prop:"confirmation",name:"Confirmation"},{prop:"affectation",name:"Affected"},{prop:"delivery",name:"Delivery"},{prop:"quantity",name:"Qty"},{prop:"price",name:"Price"},{prop:"actions",name:"Actions"}]}},computed:{sales(){return this.$store.getters["notification/notifications"]["reportedOrderAgente"]||[]},fetched(){return this.$store.getters["notification/fetched"]}}};const iu=(0,d.Z)(au,[["render",Po]]);var ru=iu;const lu={key:0};function ou(t,e,s,a,r,l){const o=(0,i.up)("SalesTable");return l.fetched?((0,i.wg)(),(0,i.iD)("div",lu,[((0,i.wg)(),(0,i.j4)(o,{key:l.sales.length,columns:r.columns,sales:l.sales},null,8,["columns","sales"]))])):(0,i.kq)("",!0)}var nu={components:{SalesTable:su},data(){return{columns:[{prop:"id",name:"#"},{prop:"city",name:"City"},{prop:"date",name:"Date"},{prop:"client",name:"Client"},{prop:"product",name:"Product"},{prop:"upsell",name:"Upsell"},{prop:"confirmation",name:"Confirmation"},{prop:"affectation",name:"Affected"},{prop:"delivery",name:"Delivery"},{prop:"quantity",name:"Qty"},{prop:"price",name:"Price"},{prop:"actions",name:"Actions"}]}},computed:{sales(){return this.$store.getters["notification/notifications"]["reportedOrderDelivery"]||[]},fetched(){return this.$store.getters["notification/fetched"]}}};const du=(0,d.Z)(nu,[["render",ou]]);var wu=du;function cu(t,e,s,a,r,l){const o=(0,i.up)("ProductsTable");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(o,{columns:r.columns,products:l.products},null,8,["columns","products"])])}const uu={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},pu={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},mu={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},hu=(0,i._)("th",{scope:"col",class:"tw-p-4"},[(0,i._)("div",{class:"tw-flex tw-items-center"},[(0,i._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,i._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),gu={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},fu=(0,i._)("td",{class:"tw-w-4 tw-p-4"},[(0,i._)("div",{class:"tw-flex tw-items-center"},[(0,i._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,i._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),vu={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},yu={class:"tw-px-6 tw-py-4"},_u={class:"tw-px-6 tw-py-4"},xu={class:"tw-px-6 tw-py-4"},bu={class:"tw-px-6 tw-py-4"},ku={class:"tw-px-6 tw-py-4"},Cu={class:"tw-px-6 tw-py-4"},Du={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},Su={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},zu={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},Uu=(0,i._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),Lu=["value"],Pu={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},Au={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},Wu={class:"tw-text-white"};function $u(t,e,s,r,l,o){const n=(0,i.up)("ProductActions");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",uu,[(0,i._)("table",pu,[(0,i._)("thead",mu,[(0,i._)("tr",null,[hu,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.columns,(t=>((0,i.wg)(),(0,i.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,i._)("div",gu,(0,Q.zw)(t.name),1)])))),128))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.products,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[fu,(0,i._)("th",vu,(0,Q.zw)(t.id),1),(0,i._)("td",yu,(0,Q.zw)(t.ref),1),(0,i._)("td",_u,(0,Q.zw)(t.name),1),(0,i._)("td",xu,(0,Q.zw)(t.buying_price)+" "+(0,Q.zw)(l.currency),1),(0,i._)("td",bu,(0,Q.zw)(t.selling_price)+" "+(0,Q.zw)(l.currency),1),(0,i._)("td",ku,(0,Q.zw)(o.calculQty(t.variations)),1),(0,i._)("td",Cu,(0,Q.zw)(t.created_at.split("T")[0]),1),(0,i._)("td",Du,[(0,i.Wm)(n,{product:t},null,8,["product"])])])))),128))])])]),(0,i._)("div",Su,[(0,i._)("div",zu,[Uu,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allowedLimit,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,Lu)))),128))],512),[[a.bM,l.paginationLimit]])]),(0,i._)("div",Pu,[(0,i._)("div",Au,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?s.products.length:o.nextRange)+" of "+(0,Q.zw)(s.products.length)+" items ",1),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.pageCount,(t=>((0,i.wg)(),(0,i.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,i.w5)((()=>[(0,i._)("span",Wu,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const Eu={class:"tw-flex tw-items-center tw-gap-1"};function Ou(t,e,s,a,r,l){const o=(0,i.up)("popup");return(0,i.wg)(),(0,i.iD)("div",Eu,[t.$can("update_product")?((0,i.wg)(),(0,i.j4)(G.T,{key:0,to:"/products/update/"+s.product.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-pencil-outline")])),_:1})])),_:1},8,["to"])):(0,i.kq)("",!0),t.$can("view_product")?((0,i.wg)(),(0,i.j4)(G.T,{key:1,to:"/products/"+s.product.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-eye-outline")])),_:1})])),_:1},8,["to"])):(0,i.kq)("",!0),t.$can("delete_product")?((0,i.wg)(),(0,i.j4)(G.T,{key:2,onClick:e[0]||(e[0]=t=>r.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this product?</p> You won't be able to revert this!",loading:r.isLoading,visible:r.showPopup,onResolved:l.handleResolved},null,8,["loading","visible","onResolved"])])}var Tu={props:["rowIndex","product"],name:"productActions",data(){return{showPopup:!1,isLoading:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,ea["delete"](this.product.id).then((t=>{"PRODUCT_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Product Deleted Successfully"})),ea.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("product/setProducts",t.data.data.products)})).catch(this.$handleApiError)})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const Vu=(0,d.Z)(Tu,[["render",Ou]]);var qu=Vu,Ru={props:["columns","products"],components:{ProductActions:qu},data(){return{currency:I,allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.products.length/this.paginationLimit)},items(){return this.products.slice(this.prevRange,this.nextRange)}},methods:{calculQty(t){let e=0;return t.forEach((t=>{e+=t.quantity})),e}}};const Fu=(0,d.Z)(Ru,[["render",$u]]);var Iu=Fu,ju={components:{ProductsTable:Iu},data(){return{columns:[{prop:"id",name:"#"},{prop:"ref",name:"Ref"},{prop:"name",name:"Name"},{prop:"buying_price",name:"Buying Price"},{prop:"selling_price",name:"Selling Price"},{prop:"quantity",name:"Qty"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{products(){return this.$store.getters["notification/notifications"]["productStockAlert"]||[]},fetched(){return this.$store.getters["notification/fetched"]}}};const Nu=(0,d.Z)(ju,[["render",cu]]);var Mu=Nu,Hu={components:{StockAlertView:Mu,ReportedDelivery:wu,ReportedConfirmation:ru},data(){return{tab:1,fullTabs:[{id:1,name:"Stock Alert",component:"StockAlertView",permissions:["admin"]},{id:2,name:"Deliveries",component:"ReportedDelivery",permissions:["admin..","delivery"]},{id:3,name:"Confirmations",component:"ReportedConfirmation",permissions:["admin..","agente"]}]}},computed:{tabs(){return this.fullTabs.filter((t=>t.permissions.includes(this.user.role)))},tabName(){return this.$route.params.tab},user(){return this.$store.getters["user/user"]}},watch:{tabName(){this.handleChange()}},methods:{handleChange(){switch(this.tabName){case"stock":this.tab=1;break;case"delivery":this.tab=2;break;case"confirmation":this.tab=3;break;default:this.tab=this.tabs[0].id||1;break}}},mounted(){this.handleChange()}};const Yu=(0,d.Z)(Hu,[["render",Uo]]);var Ku=Yu,Zu={path:"/",name:"home",component:ia,meta:{module:"dashboard"},children:[{path:"",name:"dashboard",component:Jl,meta:{module:"dashboard",title:"Dashboard",gate:"all"}},{path:"/notifications/:tab",name:"notifications",component:Ku,meta:{module:"notification",title:"Notifications",gate:"all"}},{path:"/settings",name:"settings",component:Co,meta:{module:"settings",title:"Settings",gate:"all"}}]};const Bu={class:"mb-5 tw-flex tw-justify-between tw-items-center"},Qu=(0,i._)("div",null,[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Product List"),(0,i._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your products")],-1),Gu={key:0},Ju=(0,i._)("span",{class:"text-white"}," Add Product ",-1),Xu={key:0},tp={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},ep={class:"mb-5 tw-flex"},sp={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},ap={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},ip={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},rp=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),lp={class:"tw-relative"},op={class:""};function np(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation"),d=(0,i.up)("ProductsTable");return(0,i.wg)(),(0,i.iD)("div",{key:o.products.length},[(0,i._)("div",Bu,[Qu,t.$can("create_product")?((0,i.wg)(),(0,i.iD)("div",Gu,[(0,i.Wm)(G.T,{color:"primary-color",link:"",to:{name:"product/add"},variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),Ju])),_:1})])):(0,i.kq)("",!0)]),o.fetched?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",Xu,[(0,i.Wm)(n)])),o.fetched?((0,i.wg)(),(0,i.iD)("div",tp,[(0,i._)("div",ep,[(0,i.Wm)(G.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,i._)("div",sp,[(0,i.Wm)(Zt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,l.search]])])]),(0,i._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,i._)("div",ap,[(0,i._)("div",ip,[rp,(0,i._)("div",lp,[(0,i.wy)((0,i._)("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=t=>l.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[a.nr,l.date]])])])])],2),(0,i._)("div",op,[(0,i.Wm)(d,{columns:l.columns,products:o.filteredProducts},null,8,["columns","products"])])])):(0,i.kq)("",!0)])}var dp={components:{ProductsTable:Iu},data(){return{localUrl:R,confirmations:Ln,showFilters:!1,date:null,search:"",columns:[{prop:"id",name:"#"},{prop:"ref",name:"Ref"},{prop:"name",name:"Name"},{prop:"buying_price",name:"Buying Price"},{prop:"selling_price",name:"Selling Price"},{prop:"quantity",name:"Qty"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{products(){return this.$store.getters["product/products"]},fetched(){return this.$store.getters["product/fetched"]},filteredProducts(){const t=this.date;return this.products.filter((e=>(!t||e?.created_at.split("T")[0]===t)&&!!(e.ref.toLowerCase().includes(this.search.toLowerCase())||e.name.toLowerCase().includes(this.search.toLowerCase())||e.description.toLowerCase().includes(this.search.toLowerCase()))))}},methods:{getProducts(){ea.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.fetched||this.getProducts()}};const wp=(0,d.Z)(dp,[["render",np]]);var cp=wp,up=s(240),pp=s(4842);const mp=(0,i._)("div",{class:"mb-5"},[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Add Product "),(0,i._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create new product")],-1),hp={key:0},gp={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},fp={class:"tw-w-full"},vp=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Product Name ",-1),yp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},_p={class:"tw-w-full"},xp=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reference",-1),bp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},kp={class:"tw-w-full"},Cp={class:"mb-1 text-body-2 tw-text-zinc-700"},Dp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Sp={class:"mb-1 text-body-2 tw-text-zinc-700"},zp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Up=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Description ",-1),Lp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Pp={class:"tw-w-full tw-flex tw-gap-10 tw-items-center"},Ap=(0,i._)("span",null,"Add Variants: ",-1),Wp={class:"tw-h-fit tw-mb-"},$p=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Warehouse",-1),Ep={class:"tw-relative"},Op=(0,i._)("option",{value:0},"Select",-1),Tp=["value"],Vp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},qp={key:0},Rp={class:"md:tw-col-span-3 tw-col-span-12"},Fp=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),Ip={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},jp={class:"md:tw-col-span-3 tw-col-span-12"},Np=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Stock Alert",-1),Mp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Hp={key:1},Yp={class:"tw-grid tw-grid-cols-12 md:tw-gap-3"},Kp={class:"md:tw-col-span-3 tw-col-span-12"},Zp=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Size",-1),Bp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Qp={class:"md:tw-col-span-3 tw-col-span-12"},Gp=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Color",-1),Jp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Xp={class:"md:tw-col-span-3 tw-col-span-12"},tm=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),em=(0,i._)("div",{class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},null,-1),sm={class:"md:tw-col-span-3 tw-col-span-12"},am=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Stock Alert",-1),im={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},rm={class:"tw-col-span-12 tw-flex tw-justify-end"},lm=["disabled"],om=(0,i._)("span",{class:"tw-text-white"},"Add",-1),nm={class:""},dm={class:"tw-flex tw-justify-between tw-items-center tw-mt-5"},wm=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variants",-1),cm={class:"mb-1 text-body-2 tw-text-zinc-700"},um={key:1,class:"tw-max-w-full tw-overflow-x-auto"},pm={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},mm={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},hm={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},gm={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},fm={class:"tw-px-6 tw-py-2"},vm={class:"tw-px-6 tw-py-2"},ym={class:"tw-px-6 tw-py-2"},_m={class:"tw-flex tw-items-center tw-px-6 tw-py-2 tw-space-x-3"},xm=(0,i._)("h1",{class:"tw-font-medium"},"Deliveries",-1),bm={class:"tw-mt-2"},km=(0,i._)("h1",{class:"tw-font-medium"},"Image",-1),Cm={class:"tw-grid tw-grid-cols-12 tw-gap-5 tw-mt-2"},Dm={class:"md:tw-col-span-6 tw-col-span-12 tw-relative tw-h-fit"},Sm={title:"Click to upload",for:"button2",class:"tw-cursor-pointer tw-flex tw-items-center tw-gap-4 tw-px-6 tw-py-4 before:border-gray-400/60 hover:before:tw-border-gray-300 group dark:before:bg-darker dark:hover:before:tw-border-gray-500 before:tw-bg-gray-100 dark:before:tw-border-gray-600 before:tw-absolute before:tw-inset-0 before:tw-rounded-lg before:tw-border before:tw-border-dashed before:tw-transition-transform before:tw-duration-300 hover:before:tw-scale-100 active:tw-duration-75 active:before:tw-scale-95"},zm={class:"tw-w-max tw-relative"},Um=(0,i._)("div",{class:"tw-relative"},[(0,i._)("span",{class:"tw-block tw-text-base tw-font-semibold tw-relative tw-text-orange-600"}," Upload a file "),(0,i._)("span",{class:"tw-mt-0.5 tw-block tw-text-sm tw-text-gray-500 dark:tw-text-gray-400"},"Max 2 MB")],-1),Lm={class:"md:tw-col-span-6 tw-col-span-12"},Pm={class:"image-preview tw-w-full tw-flex tw-items-center tw-justify-center tw-h-full border rounded p-4"},Am=(0,i._)("span",null,"No image available",-1),Wm=[Am],$m={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Em=(0,i._)("span",{class:"text-white text-capitalize"},"Cancel",-1),Om=(0,i._)("span",{class:"text-white text-capitalize"},"Create",-1);function Tm(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation"),d=(0,i.up)("VariantActions"),w=(0,i.up)("ProductOffers");return(0,i.wg)(),(0,i.iD)("div",null,[mp,l.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",hp,[(0,i.Wm)(n)])),l.isLoaded?((0,i.wg)(),(0,i.iD)("div",gp,[(0,i._)("div",null,[(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",fp,[vp,(0,i.Wm)(tt.hw,{error:!l.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>o.resetError("name")),"hide-details":!0,modelValue:l.product.name,"onUpdate:modelValue":e[1]||(e[1]=t=>l.product.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",yp,(0,Q.zw)(l.formStatus.name.message),1)])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",_p,[xp,(0,i.Wm)(tt.hw,{error:!l.formStatus.reference.valid,onKeyup:e[2]||(e[2]=t=>o.resetError("reference")),"hide-details":!0,modelValue:l.product.reference,"onUpdate:modelValue":e[3]||(e[3]=t=>l.product.reference=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",bp,(0,Q.zw)(l.formStatus.reference.message),1)])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",kp,[(0,i._)("div",Cp," Buying Price ("+(0,Q.zw)(l.currency)+") ",1),(0,i.Wm)(tt.hw,{type:"number",onChange:o.handleBuyingPriceChange,error:!l.formStatus.buyingPrice.valid,onKeyup:e[4]||(e[4]=t=>o.resetError("buyingPrice")),"hide-details":!0,modelValue:l.product.buyingPrice,"onUpdate:modelValue":e[5]||(e[5]=t=>l.product.buyingPrice=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,i._)("div",Dp,(0,Q.zw)(l.formStatus.buyingPrice.message),1)])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i._)("div",Sp," Selling Price ("+(0,Q.zw)(l.currency)+") ",1),(0,i.Wm)(tt.hw,{type:"number",onChange:o.handleSellingPriceChange,error:!l.formStatus.sellingPrice.valid,onKeyup:e[6]||(e[6]=t=>o.resetError("sellingPrice")),"hide-details":!0,modelValue:l.product.sellingPrice,"onUpdate:modelValue":e[7]||(e[7]=t=>l.product.sellingPrice=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,i._)("div",zp,(0,Q.zw)(l.formStatus.sellingPrice.message),1)])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[Up,(0,i.Wm)(pp.z,{error:!l.formStatus.description.valid,onKeyup:e[8]||(e[8]=t=>o.resetError("description")),"hide-details":!0,modelValue:l.product.description,"onUpdate:modelValue":e[9]||(e[9]=t=>l.product.description=t),variant:"outlined",density:"compact",color:"primary-color"},null,8,["error","modelValue"]),(0,i._)("div",Lp,(0,Q.zw)(l.formStatus.description.message),1)])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-0",cols:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",Pp,[Ap,(0,i.Wm)(Xl.G,{modelValue:l.addVariants,"onUpdate:modelValue":e[10]||(e[10]=t=>l.addVariants=t),color:"primary-color","hide-details":!0},null,8,["modelValue"])])])),_:1})])),_:1})])),_:1}),(0,i.Wm)(oa.D,{cols:"12",md:"6",class:"tw-border-l tw-border-r-neutral-700 tw-py-2"},{default:(0,i.w5)((()=>[(0,i._)("div",Wp,[$p,(0,i._)("div",Ep,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[11]||(e[11]=t=>l.warehouse=t),onChange:e[12]||(e[12]=t=>o.resetError("warehouse")),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-400 tw-outline-0 tw-text-sm"},[Op,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.warehouses,(t=>((0,i.wg)(),(0,i.iD)("option",{key:t.id,value:t.id},(0,Q.zw)(t.name),9,Tp)))),128))],544),[[a.bM,l.warehouse]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})]),(0,i._)("div",Vp,(0,Q.zw)(l.formStatus.warehouse.message),1)]),l.addVariants?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",qp,[(0,i._)("div",Rp,[Fp,(0,i.Wm)(tt.hw,{onChange:o.handleQuantityChange,type:"number",error:!l.formStatus.quantity.valid,onKeyup:e[13]||(e[13]=t=>o.resetError("quantity")),"hide-details":!0,modelValue:l.quantity,"onUpdate:modelValue":e[14]||(e[14]=t=>l.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,i._)("div",Ip,(0,Q.zw)(l.formStatus.quantity.message),1)]),(0,i._)("div",jp,[Np,(0,i.Wm)(tt.hw,{onChange:o.handleStockAlertChange,type:"number",error:!l.formStatus.stockAlert.valid,onKeyup:e[15]||(e[15]=t=>o.resetError("stockAlert")),"hide-details":!0,modelValue:l.stockAlert,"onUpdate:modelValue":e[16]||(e[16]=t=>l.stockAlert=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,i._)("div",Mp,(0,Q.zw)(l.formStatus.stockAlert.message),1)])])),l.addVariants?((0,i.wg)(),(0,i.iD)("div",Hp,[(0,i._)("div",Yp,[(0,i._)("div",Kp,[Zp,(0,i.Wm)(tt.hw,{error:!l.formStatus.size.valid,onKeyup:e[17]||(e[17]=t=>o.resetError("size")),"hide-details":!0,modelValue:l.size,"onUpdate:modelValue":e[18]||(e[18]=t=>l.size=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",Bp,(0,Q.zw)(l.formStatus.size.message),1)]),(0,i._)("div",Qp,[Gp,(0,i.Wm)(tt.hw,{error:!l.formStatus.color.valid,onKeyup:e[19]||(e[19]=t=>o.resetError("color")),"hide-details":!0,modelValue:l.color,"onUpdate:modelValue":e[20]||(e[20]=t=>l.color=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",Jp,(0,Q.zw)(l.formStatus.color.message),1)]),(0,i._)("div",Xp,[tm,(0,i.Wm)(tt.hw,{onChange:o.handleQuantityChange,type:"number",error:!l.formStatus.quantity.valid&&!1,onKeyup:e[21]||(e[21]=t=>o.resetError("quantity")),"hide-details":!0,modelValue:l.quantity,"onUpdate:modelValue":e[22]||(e[22]=t=>l.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),em]),(0,i._)("div",sm,[am,(0,i.Wm)(tt.hw,{onChange:o.handleStockAlertChange,type:"number",error:!l.formStatus.stockAlert.valid,onKeyup:e[23]||(e[23]=t=>o.resetError("stockAlert")),"hide-details":!0,modelValue:l.stockAlert,"onUpdate:modelValue":e[24]||(e[24]=t=>l.stockAlert=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,i._)("div",im,(0,Q.zw)(l.formStatus.stockAlert.message),1)])]),(0,i._)("div",null,[(0,i._)("div",rm,[(0,i._)("button",{disabled:!l.quantity,class:(0,Q.C_)([{"bg-primary-color":l.quantity},"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"]),onClick:e[25]||(e[25]=(...t)=>o.addVariant&&o.addVariant(...t))},[(0,i.Wm)(X.t,{size:"small",color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-plus")])),_:1}),om],10,lm)])]),(0,i._)("div",nm,[(0,i._)("div",dm,[wm,(0,i._)("div",cm," Quantity Total: "+(0,Q.zw)(o.qtyTotal),1)]),0==l.variants.length?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,Q.C_)([{"tw-bg-neutral-100 tw-text-neutral-500":l.formStatus.variants.valid,"tw-bg-red-100 tw-text-red-500":!l.formStatus.variants.valid},"tw-text-center tw-mb-6 tw-w-full tw-py-3 tw-rounded-lg"])},(0,Q.zw)(l.formStatus.variants.valid?"No Variants yet":l.formStatus.variants.message),3)):((0,i.wg)(),(0,i.iD)("div",um,[(0,i._)("table",pm,[(0,i._)("thead",mm,[(0,i._)("tr",null,[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(["size","color","qty","stockAlert","actions"],(t=>(0,i._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,i._)("div",hm,(0,Q.zw)(t),1)],2))),64))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.variants,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,i._)("th",gm,(0,Q.zw)(t.size),1),(0,i._)("td",fm,(0,Q.zw)(t.color),1),(0,i._)("td",vm,(0,Q.zw)(t.quantity),1),(0,i._)("td",ym,(0,Q.zw)(t.stockAlert),1),(0,i._)("td",_m,[(0,i._)("div",null,[(0,i.Wm)(d,{onDelete:o.deleteVariant,variant:t},null,8,["onDelete","variant"])])])])))),128))])])]))])])):(0,i.kq)("",!0)])),_:1})])),_:1}),(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{cols:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[xm,(0,i._)("div",bm,[(0,i.Wm)(up.r,{modelValue:l.selectedDeliveries,"onUpdate:modelValue":e[26]||(e[26]=t=>l.selectedDeliveries=t),items:o.deliveries,"item-title":"fullname","item-value":"id","hide-details":!0,chips:"",multiple:"",variant:"outlined"},null,8,["modelValue","items"])])])])),_:1}),(0,i.Wm)(oa.D,{cols:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i.Wm)(w,{offers:l.offers,"onUpdate:offers":e[27]||(e[27]=t=>l.offers=t)},null,8,["offers"])])])),_:1}),(0,i.Wm)(oa.D,{cols:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[km,(0,i._)("div",Cm,[(0,i._)("div",Dm,[(0,i._)("label",Sm,[(0,i._)("div",zm,[(0,i.Wm)(X.t,{class:"tw-text-6xl tw-text-orange-500"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-progress-upload")])),_:1})]),Um]),(0,i._)("input",{onChange:e[28]||(e[28]=(...t)=>o.handleImageChange&&o.handleImageChange(...t)),class:"tw-hidden",type:"file",name:"button2",id:"button2"},null,32)]),(0,i._)("div",Lm,[(0,i._)("div",Pm,[(0,i._)("img",{class:(0,Q.C_)([{"tw-hidden":!l.image},"w-full h-full tw-object-contain"]),ref:"image",id:"image-preview",alt:"Image Preview"},null,2),(0,i._)("div",{class:(0,Q.C_)([{"tw-hidden":!!l.image},"bg-gray-300 h-48 flex items-center justify-center"])},Wm,2)])])])])])),_:1})])),_:1})]),(0,i._)("div",$m,[(0,i.Wm)(G.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,i.w5)((()=>[Em])),_:1}),(0,i.Wm)(G.T,{onClick:o.create,loading:l.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,i.w5)((()=>[Om])),_:1},8,["onClick","loading"])])])):(0,i.kq)("",!0)])}function Vm(t,e,s,a,r,l){const o=(0,i.up)("popup"),n=(0,i.up)("UpdateProductVariant"),d=(0,i.up)("popup-full");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(G.T,{onClick:e[0]||(e[0]=t=>r.visible=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-pencil-outline")])),_:1})])),_:1}),(0,i.Wm)(G.T,{onClick:e[1]||(e[1]=t=>r.deletePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-delete-outline")])),_:1})])),_:1}),(0,i.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this product?</p> You won't be able to revert this!",visible:r.deletePopup,onResolved:l.handleDelete},null,8,["visible","onResolved"]),(0,i.Wm)(d,{visible:r.visible,onCancel:l.cancel},{default:(0,i.w5)((()=>[(0,i.Wm)(n,{onUpdate:l.update,variant:s.variant,onCancel:l.cancel},null,8,["onUpdate","variant","onCancel"])])),_:1},8,["visible","onCancel"])])}const qm={class:"md:tw-w-[400px] tw-w-[95%] tw-bg-white tw-rounded-lg tw-p-5 tw-mx-auto"},Rm={class:"tw-grid tw-grid-cols-12 md:tw-gap-3"},Fm={class:"tw-col-span-12"},Im=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Size",-1),jm={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Nm={class:"tw-col-span-12"},Mm=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Color",-1),Hm={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Ym={class:"tw-col-span-12"},Km=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),Zm={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Bm={class:"tw-col-span-12"},Qm=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Stock Alert",-1),Gm={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Jm={class:"tw-col-span-12 tw-flex tw-gap-2 tw-justify-end"},Xm=(0,i._)("span",{class:"tw-text-white"},"Cancel",-1),th=[Xm],eh=["disabled"],sh=(0,i._)("span",{class:"tw-text-white"},"Save",-1),ah=[sh];function ih(t,e,s,a,r,l){return(0,i.wg)(),(0,i.iD)("div",qm,[(0,i._)("div",Rm,[(0,i._)("div",Fm,[Im,(0,i.Wm)(tt.hw,{error:!r.formStatus.size.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("size")),"hide-details":!0,modelValue:r.size,"onUpdate:modelValue":e[1]||(e[1]=t=>r.size=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",jm,(0,Q.zw)(r.formStatus.size.message),1)]),(0,i._)("div",Nm,[Mm,(0,i.Wm)(tt.hw,{error:!r.formStatus.color.valid,onKeyup:e[2]||(e[2]=t=>l.resetError("color")),"hide-details":!0,modelValue:r.color,"onUpdate:modelValue":e[3]||(e[3]=t=>r.color=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",Hm,(0,Q.zw)(r.formStatus.color.message),1)]),(0,i._)("div",Ym,[Km,(0,i.Wm)(tt.hw,{onChange:l.handleQuantityChange,type:"number",error:!r.formStatus.quantity.valid,onKeyup:e[4]||(e[4]=t=>l.resetError("quantity")),"hide-details":!0,modelValue:r.quantity,"onUpdate:modelValue":e[5]||(e[5]=t=>r.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,i._)("div",Zm,(0,Q.zw)(r.formStatus.quantity.message),1)]),(0,i._)("div",Bm,[Qm,(0,i.Wm)(tt.hw,{onChange:l.handleStockAlertChange,type:"number",error:!r.formStatus.stockAlert.valid,onKeyup:e[6]||(e[6]=t=>l.resetError("stockAlert")),"hide-details":!0,modelValue:r.stockAlert,"onUpdate:modelValue":e[7]||(e[7]=t=>r.stockAlert=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,i._)("div",Gm,(0,Q.zw)(r.formStatus.stockAlert.message),1)])]),(0,i._)("div",null,[(0,i._)("div",Jm,[(0,i._)("button",{onClick:e[8]||(e[8]=(...t)=>l.cancel&&l.cancel(...t)),class:"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"},th),(0,i._)("button",{disabled:!r.quantity,class:(0,Q.C_)([{"tw-bg-orange-500":r.quantity},"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"]),onClick:e[9]||(e[9]=(...t)=>l.updateVariant&&l.updateVariant(...t))},ah,10,eh)])])])}var rh={props:["variant"],data(){return{size:"",color:"",quantity:0,stockAlert:0,newVariant:null,formStatus:{quantity:{valid:!0,message:""},size:{valid:!0,message:""},color:{valid:!0,message:""},stockAlert:{valid:!0,message:""}}}},methods:{updateVariant(){console.log("updated");const t=this.quantity-this.newVariant.quantity;this.newVariant.size=this.size?this.size.toLocaleUpperCase():"",this.newVariant.color=this.color?this.color.toLocaleUpperCase():"",this.newVariant.quantity=this.quantity,this.newVariant.stockAlert=this.stockAlert,this.newVariant.available_quantity=parseInt(this.newVariant.available_quantity)+parseInt(t),this.cancel()},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},handleStockAlertChange(){this.stockAlert<=0&&(this.stockAlert=0)},cancel(){this.$emit("cancel")},resetError(t){this.formStatus[t]={valid:!0,message:""}}},mounted(){this.size=this.variant.size,this.color=this.variant.color,this.quantity=this.variant.quantity,this.stockAlert=this.variant.stockAlert,this.newVariant=this.variant}};const lh=(0,d.Z)(rh,[["render",ih]]);var oh=lh,nh={components:{UpdateProductVariant:oh},props:["variant"],data(){return{visible:!1,deletePopup:!1}},methods:{cancel(){this.visible=!1},update(t){console.log("from actions: ",t)},handleDelete(t){t&&this.$emit("delete",this.variant.id),this.deletePopup=!1}}};const dh=(0,d.Z)(nh,[["render",Vm]]);var wh=dh;class ch{async create(t){return await Y.getCookie(),M.post("api/warehouses/new",{name:t.name})}async update(t,e){return await Y.getCookie(),M.post("api/warehouses/update/"+t,{name:e.name})}async all(){return await Y.getCookie(),M.get("api/warehouses")}async getWarehouse(t){return await Y.getCookie(),M.get("api/warehouses/"+t)}async delete(t){return await Y.getCookie(),M["delete"]("api/warehouses/delete/"+t)}}var uh=new ch;const ph=(0,i._)("h1",{class:"tw-font-medium"},"Offers",-1),mh={class:"tw-grid tw-grid-cols-12 tw-mb-5 tw-mt-3 tw-gap-3"},hh={class:"md:tw-col-span-3 tw-col-span-12"},gh=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),fh={class:"md:tw-col-span-3 tw-col-span-12"},vh=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Price",-1),yh={class:"md:tw-col-span-5 tw-col-span-12"},_h=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note",-1),xh={class:"md:tw-col-span-1 tw-col-span-12"},bh=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-transparent"},"Note",-1),kh={class:"tw-mt-2"},Ch={class:"tw-relative tw-overflow-x-auto tw-shadow sm:tw-rounded"},Dh={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Sh=(0,i._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,i._)("tr",null,[(0,i._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Quantity"),(0,i._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Price"),(0,i._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Note"),(0,i._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-24"},"Action")])],-1),zh={class:"tw-px-6 tw-py-4"},Uh={class:"tw-px-6 tw-py-4"},Lh={class:"tw-px-6 tw-py-4"},Ph={class:"tw-max-w-[250px] tw-text-sm"},Ah={class:"tw-px-6 tw-py-4"},Wh={key:0},$h=(0,i._)("td",{colspan:"5"},[(0,i._)("p",{class:"tw-text-center tw-p-5"}," No Offers ")],-1),Eh=[$h];function Oh(t,e,s,a,r,l){const o=(0,i.up)("popup");return(0,i.wg)(),(0,i.iD)("div",null,[ph,(0,i._)("div",mh,[(0,i._)("div",hh,[gh,(0,i.Wm)(tt.hw,{type:"number","hide-details":!0,modelValue:r.quantity,"onUpdate:modelValue":e[0]||(e[0]=t=>r.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"])]),(0,i._)("div",fh,[vh,(0,i.Wm)(tt.hw,{type:"number","hide-details":!0,modelValue:r.price,"onUpdate:modelValue":e[1]||(e[1]=t=>r.price=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"])]),(0,i._)("div",yh,[_h,(0,i.Wm)(tt.hw,{type:"text","hide-details":!0,modelValue:r.note,"onUpdate:modelValue":e[2]||(e[2]=t=>r.note=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"])]),(0,i._)("div",xh,[bh,(0,i.Wm)(G.T,{onClick:l.handleAdd,class:"mx-auto !tw-px-0 !tw-py-0","min-height":"40px","min-width":"40",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-plus")])),_:1})])),_:1},8,["onClick"])])]),(0,i._)("div",kh,[(0,i._)("div",Ch,[(0,i._)("table",Dh,[Sh,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.offers,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.key,class:"odd:tw-bg-white even:tw-bg-gray-50 tw-border-b"},[(0,i._)("td",zh,(0,Q.zw)(t.quantity),1),(0,i._)("td",Uh,(0,Q.zw)(t.price)+" "+(0,Q.zw)(r.currency),1),(0,i._)("td",Lh,[(0,i._)("p",Ph,(0,Q.zw)(t.note),1)]),(0,i._)("td",Ah,[(0,i.Wm)(G.T,{onClick:e=>l.handleDeleteClicked(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])))),128)),0==s.offers.length?((0,i.wg)(),(0,i.iD)("tr",Wh,Eh)):(0,i.kq)("",!0)])])])]),(0,i.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this offer?</p> You won't be able to revert this!",visible:r.deletePopup,onResolved:l.handleDelete},null,8,["visible","onResolved"])])}var Th={props:["offers"],data(){return{currency:I,deletePopup:!1,toDeleteID:null,quantity:1,price:0,note:""}},methods:{handleDeleteClicked(t){this.toDeleteID=t,this.deletePopup=!0},handleDelete(t){if(this.deletePopup=!1,!t)return!1;this.$emit("update:offers",this.offers.filter((t=>t.id!=this.toDeleteID)))},handleAdd(){const t=this.offers.length>0?this.offers[this.offers.length-1].id:0,e=t+1,s={id:e,quantity:this.quantity,price:this.price,note:this.note};this.$emit("update:offers",[...this.offers,s]),this.quantity=1,this.price=0,this.note=""}}};const Vh=(0,d.Z)(Th,[["render",Oh]]);var qh=Vh,Rh={components:{VariantActions:wh,ProductOffers:qh},data(){return{currency:I,isLoading:!1,isLoaded:!1,addVariants:!1,variantId:1,variants:[],image:"",imageFile:null,color:"",size:"",quantity:0,warehouse:0,stockAlert:0,offers:[],product:{name:"",reference:"",buyingPrice:0,sellingPrice:0,description:""},selectedDeliveries:[],formStatus:{name:{valid:!0,message:""},reference:{valid:!0,message:""},buyingPrice:{valid:!0,message:""},sellingPrice:{valid:!0,message:""},quantity:{valid:!0,message:""},size:{valid:!0,message:""},color:{valid:!0,message:""},stockAlert:{valid:!0,message:""},description:{valid:!0,message:""},warehouse:{valid:!0,message:""},variants:{valid:!0,message:""}}}},computed:{qtyTotal(){let t=0;return this.variants.forEach((e=>t+=parseInt(e.quantity))),t},warehouses(){return this.$store.getters["warehouse/warehouses"]},users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>"delivery"==t.role?.name)).map((t=>({...t,fullname:t.firstname+" "+t.lastname})))}},methods:{create(){if(!this.validate())return!1;this.isLoading=!0;let t=this.product;if(t.addVariants=this.addVariants,t.image=this.image,t.offers=this.offers,t.selectedDeliveries=this.selectedDeliveries.map((t=>({delivery_id:t}))),this.addVariants)t.variants=this.variants;else{const e=[{id:this.variantId,color:null,size:null,quantity:this.quantity,warehouse_id:this.warehouse,stockAlert:this.stockAlert}];t.variants=e}ea.create(t).then((t=>{"PRODUCT_CREATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.product={name:"",reference:"",buyingPrice:0,sellingPrice:0,description:""},this.offers=[],this.selectedDeliveries=[],this.variants=[],this.$store.dispatch("product/addProduct",t.data.data.product)),"VALIDATION_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.errors.ref})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},handleImageChange(t){const e=t.target.files[0];this.image=e;const s=this.$refs.image;if(e){const t=new FileReader;t.addEventListener("load",(function(){s.src=this.result})),t.readAsDataURL(e)}},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=bt(this.product.name,"Product name"),this.formStatus.reference=bt(this.product.reference,"Reference"),this.formStatus.buyingPrice=bt(this.product.buyingPrice,"Buying price"),this.formStatus.quantity=bt(this.quantity,"Quantity"),this.formStatus.sellingPrice=bt(this.product.sellingPrice,"Selling price"),this.formStatus.description=bt(this.product.description,"Description"),this.formStatus.variants=Dt(this.variants),this.addVariants||(this.formStatus.warehouse={valid:0!=this.warehouse,message:0!=this.warehouse?"":"Please select a warehouse"}),this.formStatus.name.valid&&this.formStatus.buyingPrice.valid&&this.formStatus.reference.valid&&this.formStatus.sellingPrice&&this.formStatus.description.valid&&(!this.addVariants||this.formStatus.variants.valid)&&(!!this.addVariants||this.formStatus.quantity.valid)&&(!!this.addVariants||this.formStatus.warehouse.valid)},addVariant(){if(this.formStatus.warehouse={valid:0!=this.warehouse,message:0!=this.warehouse?"":"Please select a warehouse"},!this.formStatus.warehouse.valid)return!1;const t={id:this.variantId,color:this.color.toUpperCase(),size:this.size.toUpperCase(),quantity:this.quantity,warehouse_id:this.warehouse,stockAlert:this.stockAlert};this.variants.push(t),this.variantId++,this.stockAlert=0,this.color="",this.size="",this.quantity=0},deleteVariant(t){this.variants=this.variants.filter((e=>e.id!==t))},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},handleStockAlertChange(){this.stockAlert<=0&&(this.stockAlert=0)},handleSellingPriceChange(){this.product.sellingPrice<=0&&(this.product.sellingPrice=0)},handleBuyingPriceChange(){this.product.buyingPrice<=0&&(this.product.buyingPrice=0)},getWarhouses(){return this.isLoaded=!1,uh.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("warehouse/setWarehouses",t.data.data.warehouses),this.isLoaded=!0)}),this.$handleApiError)}},mounted(){this.getWarhouses()}};const Fh=(0,d.Z)(Rh,[["render",Tm]]);var Ih=Fh;const jh=(0,i._)("div",{class:"mb-5"},[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Update Product "),(0,i._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Update product informations")],-1),Nh={key:0},Mh={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Hh={class:"tw-flex tw-gap-2 tw-text-neutral-800 tw-items-center tw-mb-5"},Yh={class:"tw-block tw-py-1 tw-px-2 tw-rounded-md text-primary-color"},Kh={class:"tw-w-full"},Zh=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Product Name ",-1),Bh={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Qh={class:"tw-w-full"},Gh=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reference",-1),Jh={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Xh={class:"tw-w-full"},tg={class:"mb-1 text-body-2 tw-text-zinc-700"},eg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},sg={class:"mb-1 text-body-2 tw-text-zinc-700"},ag={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},ig=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Description ",-1),rg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},lg={class:"tw-h-fit tw-mb-"},og=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Warehouse",-1),ng={class:"tw-relative"},dg=(0,i._)("option",{value:0},"Select",-1),wg=["value"],cg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},ug={class:"tw-grid tw-grid-cols-12 md:tw-gap-3"},pg={class:"md:tw-col-span-3 tw-col-span-12"},mg=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Size",-1),hg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},gg={class:"md:tw-col-span-3 tw-col-span-12"},fg=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Color",-1),vg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},yg={class:"md:tw-col-span-3 tw-col-span-12"},_g=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),xg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},bg={class:"md:tw-col-span-3 tw-col-span-12"},kg=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Stock Alert ",-1),Cg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Dg={class:"tw-col-span-12 tw-flex tw-justify-end"},Sg=["disabled"],zg=(0,i._)("span",{class:"tw-text-white"},"Add",-1),Ug={class:""},Lg={class:"tw-flex tw-justify-between tw-items-center tw-mt-5"},Pg=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variants",-1),Ag={class:"mb-1 text-body-2 tw-text-zinc-700"},Wg={key:1,class:"tw-max-w-full tw-overflow-x-auto"},$g={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Eg={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},Og={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},Tg={class:"tw-px-6 tw-py-2 tw-capitalize"},Vg={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},qg={class:"tw-px-6 tw-py-2"},Rg={class:"tw-px-6 tw-py-2"},Fg={class:"tw-flex tw-flex-col"},Ig={key:0,class:"tw-text-xs tw-text-green-500"},jg={class:"tw-px-6 tw-py-2"},Ng={class:"tw-flex tw-items-center tw-px-6 tw-py-2 tw-space-x-3"},Mg=(0,i._)("h1",null,"Deliveries",-1),Hg={class:"tw-mt-2"},Yg=(0,i._)("h1",null,"Image",-1),Kg={class:"tw-grid tw-grid-cols-12 tw-gap-5 tw-mt-2"},Zg={class:"md:tw-col-span-6 tw-col-span-12 tw-relative tw-h-fit"},Bg={title:"Click to upload",for:"button2",class:"tw-cursor-pointer tw-flex tw-items-center tw-gap-4 tw-px-6 tw-py-4 before:border-gray-400/60 hover:before:tw-border-gray-300 group dark:before:bg-darker dark:hover:before:tw-border-gray-500 before:tw-bg-gray-100 dark:before:tw-border-gray-600 before:tw-absolute before:tw-inset-0 before:tw-rounded-lg before:tw-border before:tw-border-dashed before:tw-transition-transform before:tw-duration-300 hover:before:tw-scale-100 active:tw-duration-75 active:before:tw-scale-95"},Qg={class:"tw-w-max tw-relative"},Gg=(0,i._)("div",{class:"tw-relative"},[(0,i._)("span",{class:"tw-block tw-text-base tw-font-semibold tw-relative tw-text-orange-600"}," Upload a file "),(0,i._)("span",{class:"tw-mt-0.5 tw-block tw-text-sm tw-text-gray-500 dark:tw-text-gray-400"},"Max 2 MB")],-1),Jg={class:"md:tw-col-span-6 tw-col-span-12"},Xg={class:"image-preview tw-w-full tw-flex tw-items-center tw-justify-center tw-h-full border rounded p-4"},tf=["src"],ef=(0,i._)("span",null,"No image available",-1),sf=[ef],af={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},rf=(0,i._)("span",{class:"text-white text-capitalize"},"Cancel",-1),lf=(0,i._)("span",{class:"text-white text-capitalize"},"Update",-1);function of(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation"),d=(0,i.up)("UpdateVariantActions"),w=(0,i.up)("ProductOffers");return(0,i.wg)(),(0,i.iD)("div",null,[jh,l.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",Nh,[(0,i.Wm)(n)])),l.isLoaded?((0,i.wg)(),(0,i.iD)("div",Mh,[(0,i._)("div",Hh,[(0,i.Uk)(" Product ID: "),(0,i._)("span",Yh,(0,Q.zw)(o.id),1)]),(0,i._)("div",null,[(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{cols:"12",md:"12"},{default:(0,i.w5)((()=>[(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",Kh,[Zh,(0,i.Wm)(tt.hw,{error:!l.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>o.resetError("name")),"hide-details":!0,modelValue:l.product.name,"onUpdate:modelValue":e[1]||(e[1]=t=>l.product.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",Bh,(0,Q.zw)(l.formStatus.name.message),1)])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",Qh,[Gh,(0,i.Wm)(tt.hw,{error:!l.formStatus.quantity.valid,onKeyup:e[2]||(e[2]=t=>o.resetError("quantity")),"hide-details":!0,modelValue:l.product.reference,"onUpdate:modelValue":e[3]||(e[3]=t=>l.product.reference=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",Jh,(0,Q.zw)(l.formStatus.quantity.message),1)])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",Xh,[(0,i._)("div",tg," Buying Price ("+(0,Q.zw)(l.currency)+") ",1),(0,i.Wm)(tt.hw,{type:"number",onChange:o.handleBuyingPriceChange,error:!l.formStatus.buyingPrice.valid,onKeyup:e[4]||(e[4]=t=>o.resetError("buyingPrice")),"hide-details":!0,modelValue:l.product.buyingPrice,"onUpdate:modelValue":e[5]||(e[5]=t=>l.product.buyingPrice=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,i._)("div",eg,(0,Q.zw)(l.formStatus.buyingPrice.message),1)])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i._)("div",sg," Selling Price ("+(0,Q.zw)(l.currency)+") ",1),(0,i.Wm)(tt.hw,{type:"number",onChange:o.handleSellingPriceChange,error:!l.formStatus.sellingPrice.valid,onKeyup:e[6]||(e[6]=t=>o.resetError("sellingPrice")),"hide-details":!0,modelValue:l.product.sellingPrice,"onUpdate:modelValue":e[7]||(e[7]=t=>l.product.sellingPrice=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,i._)("div",ag,(0,Q.zw)(l.formStatus.sellingPrice.message),1)])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[ig,(0,i.Wm)(pp.z,{error:!l.formStatus.description.valid,onKeyup:e[8]||(e[8]=t=>o.resetError("description")),"hide-details":!0,modelValue:l.product.description,"onUpdate:modelValue":e[9]||(e[9]=t=>l.product.description=t),variant:"outlined",density:"compact",color:"primary-color"},null,8,["error","modelValue"]),(0,i._)("div",rg,(0,Q.zw)(l.formStatus.description.message),1)])])),_:1})])),_:1})])),_:1}),(0,i.Wm)(oa.D,{cols:"12",md:"12",class:"tw-border-t tw-border-t-neutral-300 tw-py-2"},{default:(0,i.w5)((()=>[(0,i._)("div",lg,[og,(0,i._)("div",ng,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>l.warehouse=t),onChange:e[11]||(e[11]=t=>o.resetError("warehouse")),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-400 tw-outline-0 tw-text-sm"},[dg,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.warehouses,(t=>((0,i.wg)(),(0,i.iD)("option",{key:t.id,value:t.id},(0,Q.zw)(t.name),9,wg)))),128))],544),[[a.bM,l.warehouse]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})]),(0,i._)("div",cg,(0,Q.zw)(l.formStatus.warehouse.message),1)]),(0,i._)("div",null,[(0,i._)("div",ug,[(0,i._)("div",pg,[mg,(0,i.Wm)(tt.hw,{error:!l.formStatus.size.valid,onKeyup:e[12]||(e[12]=t=>o.resetError("size")),"hide-details":!0,modelValue:l.size,"onUpdate:modelValue":e[13]||(e[13]=t=>l.size=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",hg,(0,Q.zw)(l.formStatus.size.message),1)]),(0,i._)("div",gg,[fg,(0,i.Wm)(tt.hw,{error:!l.formStatus.color.valid,onKeyup:e[14]||(e[14]=t=>o.resetError("color")),"hide-details":!0,modelValue:l.color,"onUpdate:modelValue":e[15]||(e[15]=t=>l.color=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",vg,(0,Q.zw)(l.formStatus.color.message),1)]),(0,i._)("div",yg,[_g,(0,i.Wm)(tt.hw,{onChange:o.handleQuantityChange,type:"number",error:!l.formStatus.quantity.valid,onKeyup:e[16]||(e[16]=t=>o.resetError("quantity")),"hide-details":!0,modelValue:l.quantity,"onUpdate:modelValue":e[17]||(e[17]=t=>l.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,i._)("div",xg,(0,Q.zw)(l.formStatus.quantity.message),1)]),(0,i._)("div",bg,[kg,(0,i.Wm)(tt.hw,{onChange:o.handleStockAlertChange,type:"number",error:!l.formStatus.stockAlert.valid,onKeyup:e[18]||(e[18]=t=>o.resetError("stockAlert")),"hide-details":!0,modelValue:l.stockAlert,"onUpdate:modelValue":e[19]||(e[19]=t=>l.stockAlert=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,i._)("div",Cg,(0,Q.zw)(l.formStatus.stockAlert.message),1)])]),(0,i._)("div",null,[(0,i._)("div",Dg,[(0,i._)("button",{disabled:!l.quantity,class:(0,Q.C_)([{"bg-primary-color":l.quantity},"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"]),onClick:e[20]||(e[20]=(...t)=>o.addVariant&&o.addVariant(...t))},[(0,i.Wm)(X.t,{size:"small",color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-plus")])),_:1}),zg],10,Sg)])]),(0,i._)("div",Ug,[(0,i._)("div",Lg,[Pg,(0,i._)("div",Ag," Quantity Total: "+(0,Q.zw)(o.qtyTotal),1)]),0==l.variants.length?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,Q.C_)([{"tw-bg-neutral-100 tw-text-neutral-500":l.formStatus.variants.valid,"tw-bg-red-100 tw-text-red-500":!l.formStatus.variants.valid},"tw-text-center tw-mb-6 tw-w-full tw-py-3 tw-rounded-lg"])},(0,Q.zw)(l.formStatus.variants.valid?"No Variants yet":l.formStatus.variants.message),3)):((0,i.wg)(),(0,i.iD)("div",Wg,[(0,i._)("table",$g,[(0,i._)("thead",Eg,[(0,i._)("tr",null,[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(["warehouse","size","color","qty","Stock Alert","actions"],(t=>(0,i._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,i._)("div",Og,(0,Q.zw)(t),1)],2))),64))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.variants,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,i._)("td",Tg,(0,Q.zw)(t.warehouse.name),1),(0,i._)("td",Vg,(0,Q.zw)(t.size),1),(0,i._)("td",qg,(0,Q.zw)(t.color),1),(0,i._)("td",Rg,[(0,i._)("div",Fg,[(0,i._)("span",null,(0,Q.zw)(t.quantity),1),t.created_at?((0,i.wg)(),(0,i.iD)("span",Ig,(0,Q.zw)(t.available_quantity),1)):(0,i.kq)("",!0)])]),(0,i._)("td",jg,(0,Q.zw)(t.stockAlert),1),(0,i._)("td",Ng,[(0,i._)("div",null,[(0,i.Wm)(d,{onDelete:o.deleteVariant,variant:t},null,8,["onDelete","variant"])])])])))),128))])])]))])])])),_:1})])),_:1}),(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{cols:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[Mg,(0,i._)("div",Hg,[(0,i.Wm)(up.r,{modelValue:l.selectedDeliveries,"onUpdate:modelValue":e[21]||(e[21]=t=>l.selectedDeliveries=t),items:o.deliveries,"item-title":"fullname","item-value":"id","hide-details":!0,chips:"",multiple:"",variant:"outlined"},null,8,["modelValue","items"])])])])),_:1}),(0,i.Wm)(oa.D,{cols:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i.Wm)(w,{offers:l.offers,"onUpdate:offers":e[22]||(e[22]=t=>l.offers=t)},null,8,["offers"])])])),_:1}),(0,i.Wm)(oa.D,{cols:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[Yg,(0,i._)("div",Kg,[(0,i._)("div",Zg,[(0,i._)("label",Bg,[(0,i._)("div",Qg,[(0,i.Wm)(X.t,{class:"tw-text-6xl tw-text-orange-500"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-progress-upload")])),_:1})]),Gg]),(0,i._)("input",{onChange:e[23]||(e[23]=(...t)=>o.handleImageChange&&o.handleImageChange(...t)),class:"tw-hidden",type:"file",name:"button2",id:"button2"},null,32)]),(0,i._)("div",Jg,[(0,i._)("div",Xg,[(0,i._)("img",{class:(0,Q.C_)([{"tw-hidden":!l.image},"w-full h-full tw-object-contain"]),ref:"image",src:l.serverUrl+"storage/"+l.image,id:"image-preview",alt:"Image Preview"},null,10,tf),(0,i._)("div",{class:(0,Q.C_)([{"tw-hidden":!!l.image},"bg-gray-300 h-48 flex items-center justify-center"])},sf,2)])])])])])),_:1})])),_:1})]),(0,i._)("div",af,[(0,i.Wm)(G.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,i.w5)((()=>[rf])),_:1}),(0,i.Wm)(G.T,{onClick:o.update,loading:l.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,i.w5)((()=>[lf])),_:1},8,["onClick","loading"])])])):(0,i.kq)("",!0)])}const nf={class:"md:tw-w-[400px] tw-w-[95%] tw-bg-white tw-rounded-lg tw-p-5 tw-mx-auto"},df={class:"tw-w-full"},wf=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Add quantity",-1),cf={class:"tw-col-span-12 tw-flex tw-gap-2 tw-justify-end tw-mt-3"},uf=(0,i._)("span",{class:"tw-text-white"},"Cancel",-1),pf=[uf],mf=["disabled"],hf=(0,i._)("span",{class:"tw-text-white"},"Add",-1),gf=[hf];function ff(t,e,s,a,r,l){const o=(0,i.up)("popup"),n=(0,i.up)("UpdateProductVariant"),d=(0,i.up)("popup-full");return(0,i.wg)(),(0,i.iD)("div",null,[s.variant.created_at?((0,i.wg)(),(0,i.j4)(G.T,{key:0,onClick:e[0]||(e[0]=t=>r.visibleAdd=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-plus")])),_:1})])),_:1})):(0,i.kq)("",!0),void 0===s.variant.on_hold||s.variant.available_quantity==s.variant.quantity?((0,i.wg)(),(0,i.j4)(G.T,{key:1,onClick:e[1]||(e[1]=t=>r.deletePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(G.T,{onClick:e[2]||(e[2]=t=>r.visible=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-pencil-outline")])),_:1})])),_:1}),(0,i.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this product?</p> You won't be able to revert this!",visible:r.deletePopup,onResolved:l.handleDelete},null,8,["visible","onResolved"]),(0,i.Wm)(d,{visible:r.visible,onCancel:l.cancel},{default:(0,i.w5)((()=>[(0,i.Wm)(n,{onUpdate:l.update,variant:s.variant,onCancel:l.cancel},null,8,["onUpdate","variant","onCancel"])])),_:1},8,["visible","onCancel"]),(0,i.Wm)(d,{visible:r.visibleAdd,onCancel:l.cancelAdd},{default:(0,i.w5)((()=>[(0,i._)("div",nf,[(0,i._)("div",df,[wf,(0,i.Wm)(tt.hw,{"hide-details":!0,modelValue:r.quantity,"onUpdate:modelValue":e[3]||(e[3]=t=>r.quantity=t),clearable:"",type:"number","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"])]),(0,i._)("div",cf,[(0,i._)("button",{onClick:e[4]||(e[4]=(...t)=>l.cancelAdd&&l.cancelAdd(...t)),class:"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"},pf),(0,i._)("button",{disabled:!r.quantity||0==r.quantity,class:(0,Q.C_)([{"!tw-bg-green-500":0!=r.quantity},"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"]),onClick:e[5]||(e[5]=(...t)=>l.addQuantity&&l.addQuantity(...t))},gf,10,mf)])])])),_:1},8,["visible","onCancel"])])}var vf={components:{UpdateProductVariant:oh},props:["variant"],data(){return{visible:!1,visibleAdd:!1,deletePopup:!1,quantity:1,newVariant:null}},methods:{cancel(){this.visible=!1},cancelAdd(){this.visibleAdd=!1},update(t){console.log("from actions: ",t)},addQuantity(){this.newVariant.quantity=parseInt(this.newVariant.quantity)+parseInt(this.quantity),this.newVariant.available_quantity=parseInt(this.newVariant.available_quantity)+parseInt(this.quantity),this.quantity=1,this.cancelAdd()},handleDelete(t){t&&this.$emit("delete",this.variant.id),this.deletePopup=!1}},mounted(){this.newVariant=this.variant}};const yf=(0,d.Z)(vf,[["render",ff]]);var _f=yf,xf={components:{UpdateVariantActions:_f,ProductOffers:qh},data(){return{currency:I,serverUrl:F,isLoading:!1,isLoaded:!1,variantId:1,variants:[],color:"",size:"",quantity:0,stockAlert:0,image:"",imageFile:null,offers:[],warehouse:0,product:{name:"",reference:"",buyingPrice:0,sellingPrice:0,description:""},selectedDeliveries:[],formStatus:{name:{valid:!0,message:""},buyingPrice:{valid:!0,message:""},sellingPrice:{valid:!0,message:""},quantity:{valid:!0,message:""},size:{valid:!0,message:""},color:{valid:!0,message:""},stockAlert:{valid:!0,message:""},description:{valid:!0,message:""},variants:{valid:!0,message:""},warehouse:{valid:!0,message:""}}}},computed:{qtyTotal(){let t=0;return this.variants.forEach((e=>t+=parseInt(e.quantity))),t},id(){return this.$route.params.id},warehouses(){return this.$store.getters["warehouse/warehouses"]},users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>"delivery"==t.role?.name)).map((t=>({...t,fullname:t.firstname+" "+t.lastname})))}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0;let t=this.product;t.variants=this.variants,t.image=this.image,t.offers=this.offers,t.selectedDeliveries=this.selectedDeliveries.map((t=>({delivery_id:t,product_id:this.id}))),ea.update(this.$route.params.id,t).then((t=>{"PRODUCT_UPDATED"==t.data.code&&this.$alert({type:"success",title:t.data.message}),"PRODUCT_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message}),"QUANTITY_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},handleImageChange(t){const e=t.target.files[0];this.image=e;const s=this.$refs.image;if(e){const t=new FileReader;t.addEventListener("load",(function(){s.src=this.result})),t.readAsDataURL(e)}},resetError(t){this.formStatus[t]={valid:!0,message:""}},getLastVariantId(t){return Math.max(...t.map((t=>t.id)))+1},validate(){return this.formStatus.name=bt(this.product.name,"Product name"),this.formStatus.buyingPrice=bt(this.product.buyingPrice,"Buying price"),this.formStatus.sellingPrice=bt(this.product.sellingPrice,"Selling price"),this.formStatus.description=bt(this.product.description,"Description"),this.formStatus.variants=Dt(this.variants),this.formStatus.name.valid&&this.formStatus.buyingPrice.valid&&this.formStatus.sellingPrice&&this.formStatus.description.valid&&this.formStatus.variants.valid},addVariant(){if(0==this.warehouse)return this.$alert({type:"warning",title:"Select warehouse"}),!1;const t={id:this.variantId,color:this.color.toUpperCase(),size:this.size.toUpperCase(),quantity:this.quantity,warehouse_id:this.warehouse,warehouse:this.warehouses.find((t=>t.id==this.warehouse)),stockAlert:this.stockAlert};this.variants.push(t),this.variantId++,this.color="",this.size="",this.quantity=0,this.stockAlert=0},deleteVariant(t){this.variants=this.variants.filter((e=>e.id!==t))},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},handleStockAlertChange(){this.quantity<=0&&(this.quantity=0)},handleSellingPriceChange(){this.product.sellingPrice<=0&&(this.product.sellingPrice=0)},handleBuyingPriceChange(){this.product.buyingPrice<=0&&(this.product.buyingPrice=0)},getWarhouses(){return uh.all().then((t=>("SUCCESS"==t.data.code&&this.$store.dispatch("warehouse/setWarehouses",t.data.data.warehouses),t)),this.$handleApiError)},getProduct(){return ea.getProduct(this.$route.params.id).then((t=>{if("SUCCESS"==t.data.code){const{variations:e,buying_price:s,selling_price:a,ref:i,name:r,description:l,deliveries:o,image:n,offers:d}=t.data.data.products;return this.variants=e,this.product.buyingPrice=s,this.product.sellingPrice=a,this.product.name=r,this.product.reference=i,this.product.description=l,this.image=n,this.offers=d,this.variantId=this.getLastVariantId(e),this.selectedDeliveries=o.map((t=>t.delivery_id)),this.isLoaded=!0,t}}),this.$handleApiError)},getData(){this.isLoaded=!1,Promise.allSettled([this.getWarhouses(),this.getProduct()]).then((t=>{t.every((t=>"fulfilled"==t.status))&&(this.isLoaded=!0)}),this.$handleApiError)}},mounted(){this.getData()}};const bf=(0,d.Z)(xf,[["render",of]]);var kf=bf;const Cf={class:"tw-pb-14"},Df=(0,i._)("div",{class:"mb-5"},[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Product"),(0,i._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Show product informations")],-1),Sf={key:0},zf={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Uf={class:"tw-grid tw-grid-cols-12 tw-gap-2"},Lf={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},Pf=(0,i._)("p",{class:"tw-font-light tw-text-neutral-500"},"Name:",-1),Af={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},Wf={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},$f=(0,i._)("p",{class:"tw-font-light tw-text-neutral-500"},"Reference:",-1),Ef={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},Of={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},Tf=(0,i._)("p",{class:"tw-font-light tw-text-neutral-500"},"Buying Price:",-1),Vf={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},qf={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},Rf=(0,i._)("p",{class:"tw-font-light tw-text-neutral-500"},"Selling Price:",-1),Ff={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},If={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},jf=(0,i._)("p",{class:"tw-font-light tw-text-neutral-500"},"Total Delivered:",-1),Nf={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},Mf={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},Hf=(0,i._)("p",{class:"tw-font-light tw-text-neutral-500"},"Total Sent:",-1),Yf={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},Kf={class:"tw-col-span-12 md:tw-col-span-12 tw-flex tw-gap-2 tw-flex-col tw-flex-wrap"},Zf=(0,i._)("p",{class:"tw-font-light tw-text-neutral-500"},"Description:",-1),Bf={class:"tw-text-neutral-800 tw-font-medium"},Qf={key:2,class:"tw-text-neutral-700 tw-font-bold tw-mb-1 tw-mt-5"},Gf={key:3,class:"tw-border bg-white tw-w-full tw-rounded-md"},Jf={key:4,class:"tw-text-neutral-700 tw-font-bold tw-mt-5 tw-mb-1"},Xf={key:5,class:"tw-overflow-hidden tw-border bg-white tw-w-full tw-rounded-md"},tv={class:"tw-max-w-full tw-overflow-auto"},ev={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},sv={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},av={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},iv={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},rv={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},lv={class:"tw-px-6 tw-py-2"},ov={class:"tw-px-6 tw-py-2"},nv={class:"tw-flex tw-flex-col"},dv={class:"tw-px-6 tw-py-2"},wv={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},cv=(0,i._)("th",{scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},null,-1),uv=(0,i._)("th",{scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},null,-1),pv=(0,i._)("td",{class:"tw-px-6 tw-py-2"},null,-1),mv={class:"tw-px-6 tw-py-2"},hv={class:"tw-flex tw-flex-col tw-font-medium"},gv=(0,i._)("td",{class:"tw-px-6 tw-py-2"},null,-1);function fv(t,e,s,a,r,l){const o=(0,i.up)("LoadingAnimation"),n=(0,i.up)("ProductTracking");return(0,i.wg)(),(0,i.iD)("div",Cf,[Df,r.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",Sf,[(0,i.Wm)(o)])),r.isLoaded?((0,i.wg)(),(0,i.iD)("div",zf,[(0,i._)("div",null,[(0,i._)("div",null,[(0,i._)("div",Uf,[(0,i._)("div",Lf,[Pf,(0,i._)("p",Af,(0,Q.zw)(r.product.name),1)]),(0,i._)("div",Wf,[$f,(0,i._)("p",Ef,(0,Q.zw)(r.product.ref),1)]),(0,i._)("div",Of,[Tf,(0,i._)("p",Vf,(0,Q.zw)(r.product.buying_price)+" "+(0,Q.zw)(r.currency),1)]),(0,i._)("div",qf,[Rf,(0,i._)("p",Ff,(0,Q.zw)(r.product.selling_price)+" "+(0,Q.zw)(r.currency),1)]),(0,i._)("div",If,[jf,(0,i._)("p",Nf,(0,Q.zw)(l.qtyTotalDelivered),1)]),(0,i._)("div",Mf,[Hf,(0,i._)("p",Yf,(0,Q.zw)(l.qtyTotalSent),1)]),(0,i._)("div",Kf,[Zf,(0,i._)("p",Bf,(0,Q.zw)(r.product.description),1)])])])])])):(0,i.kq)("",!0),r.isLoaded?((0,i.wg)(),(0,i.iD)("h1",Qf,"Tracking")):(0,i.kq)("",!0),r.isLoaded?((0,i.wg)(),(0,i.iD)("div",Gf,[(0,i.Wm)(n,{product:r.product},null,8,["product"])])):(0,i.kq)("",!0),r.isLoaded?((0,i.wg)(),(0,i.iD)("h1",Jf,"Variations")):(0,i.kq)("",!0),r.isLoaded?((0,i.wg)(),(0,i.iD)("div",Xf,[(0,i._)("div",null,[(0,i._)("div",null,[(0,i._)("div",tv,[(0,i._)("table",ev,[(0,i._)("thead",sv,[(0,i._)("tr",null,[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(["id","size","color","qty","Stock Alert"],(t=>(0,i._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,i._)("div",av,(0,Q.zw)(t),1)],2))),64))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.product.variations,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,i._)("th",iv,(0,Q.zw)(t.id),1),(0,i._)("th",rv,(0,Q.zw)(t.size),1),(0,i._)("td",lv,(0,Q.zw)(t.color),1),(0,i._)("td",ov,[(0,i._)("div",nv,[(0,i._)("span",null,"Initial: "+(0,Q.zw)(t.quantity),1)])]),(0,i._)("td",dv,(0,Q.zw)(t.stockAlert),1)])))),128)),(0,i._)("tr",wv,[cv,uv,pv,(0,i._)("td",mv,[(0,i._)("div",hv,[(0,i._)("span",null,"Total: "+(0,Q.zw)(l.qtyTotal),1)])]),gv])])])])])])])):(0,i.kq)("",!0)])}const vv={class:"tw-flex tw-items-ce tw-gap-1 tw-border-b tw-border-solid tw-border-neutral-200"},yv=["onClick"];function _v(t,e,s,a,r,l){const o=(0,i.up)("ProductTrackingTable");return(0,i.wg)(),(0,i.j4)(Ga._,{flat:"",class:"tw-p-1"},{default:(0,i.w5)((()=>[(0,i._)("div",vv,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.tabs,(t=>((0,i.wg)(),(0,i.iD)("button",{key:t.id,onClick:e=>r.tab=t.id,class:(0,Q.C_)(["tw-px-4 tw-py-2 tw-rounded-t hover:tw-border-orange-500/50 tw-duration-300 tw-border tw-border-solid tw-border-neutral-200 tw-text-neutral-500 tw-border-b-0",{"tw-bg-orange-500 !tw-text-white tw-border-transparent":t.id==r.tab}])},(0,Q.zw)(t.name),11,yv)))),128))]),(0,i.kq)("",!0),(0,i.Wm)(ti.Oo,{class:"tw-mt-0",modelValue:r.tab,"onUpdate:modelValue":e[1]||(e[1]=t=>r.tab=t)},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.tabs,(t=>((0,i.wg)(),(0,i.j4)(ei.H,{key:t.id,value:t.id},{default:(0,i.w5)((()=>[(0,i.Wm)(o,{product:s.product,source:t.source},null,8,["product","source"])])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})}const xv={class:"tw-mt-5"},bv={class:"tw-max-w-full tw-overflow-auto"},kv={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Cv={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},Dv={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"};function Sv(t,e,s,a,r,l){const o=(0,i.up)("ProductTrackingRow");return(0,i.wg)(),(0,i.iD)("div",xv,[(0,i._)("div",bv,[(0,i._)("table",kv,[(0,i._)("thead",Cv,[(0,i._)("tr",null,[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(["id","name","quantity","actions"],(t=>(0,i._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,i._)("div",Dv,(0,Q.zw)(t),1)],2))),64))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.items,(t=>((0,i.wg)(),(0,i.j4)(o,{item:t,key:t.id,source:s.source},null,8,["item","source"])))),128))])])])])}const zv={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},Uv={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Lv={class:"tw-flex tw-items-start tw-h-full"},Pv={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Av={class:"tw-px-6 tw-py-2"},Wv={key:0},$v={class:"tw-w-fit tw-min-w-[200px] tw-flex tw-items-center"},Ev={key:0,class:"tw-h-fit tw-py-2"},Ov=(0,i._)("td",{class:"tw-px-3 tw-py-1 tw-bg-emerald-100 tw-border tw-text-emerald-500"}," Received: ",-1),Tv={class:"tw-px-3 tw-py-1 tw-border tw-text-emerald-500"},Vv=(0,i._)("td",{class:"tw-px-3 tw-py-1 tw-bg-red-100 tw-text-red-500 tw-border"}," Not Received: ",-1),qv={class:"tw-px-3 tw-py-1 tw-border tw-text-red-500"},Rv=(0,i._)("td",{class:"tw-px-3 tw-py-1 tw-bg-purple-100 tw-border tw-text-purple-500"}," Shipped: ",-1),Fv={class:"tw-px-3 tw-py-1 tw-border tw-text-purple-500"},Iv=(0,i._)("td",{class:"tw-px-3 tw-py-1 tw-bg-blue-100 tw-border tw-text-blue-500"}," Delivered: ",-1),jv={class:"tw-px-3 tw-py-1 tw-border tw-text-blue-500"},Nv={key:1},Mv={class:"tw-w-fit tw-min-w-[200px] tw-flex tw-items-center"},Hv={key:0,class:"tw-h-fit tw-py-2"},Yv=(0,i._)("td",{class:"tw-px-3 tw-py-1 tw-bg-emerald-100 tw-border tw-text-emerald-500"}," Received: ",-1),Kv={class:"tw-px-3 tw-py-1 tw-border tw-text-emerald-500"},Zv=(0,i._)("td",{class:"tw-px-3 tw-py-1 tw-bg-red-100 tw-text-red-500 tw-border"}," Not Received: ",-1),Bv={class:"tw-px-3 tw-py-1 tw-border tw-text-red-500"},Qv=(0,i._)("td",{class:"tw-px-3 tw-py-1 tw-bg-purple-100 tw-border tw-text-purple-500"}," Shipped: ",-1),Gv={class:"tw-px-3 tw-py-1 tw-border tw-text-purple-500"},Jv=(0,i._)("td",{class:"tw-px-3 tw-py-1 tw-bg-blue-100 tw-border tw-text-blue-500"}," Delivered: ",-1),Xv={class:"tw-px-3 tw-py-1 tw-border tw-text-blue-500"},ty={class:"tw-px-6 tw-py-2 tw-space-x-3"};function ey(t,e,s,a,r,l){const o=(0,i.up)("ShowProductVariantActions");return(0,i.wg)(),(0,i.iD)("tr",zv,[(0,i._)("th",Uv,[(0,i._)("div",Lv,(0,Q.zw)(s.item.id),1)]),(0,i._)("th",Pv,(0,Q.zw)(s.item.name),1),(0,i._)("td",Av,["warehouses"==s.source?((0,i.wg)(),(0,i.iD)("div",Wv,[(0,i._)("div",$v,[(0,i._)("button",{onClick:e[0]||(e[0]=t=>r.showDetails=!r.showDetails),class:"tw-bg-blue-400/10 tw-py-1 tw-px-4 tw-rounded tw-text-blue-400 tw-flex tw-gap-2 tw-items-center tw-justify-between"},[(0,i._)("p",null,"Total: "+(0,Q.zw)(l.get_total_quantity(s.item.product_variations)),1),(0,i.Wm)(X.t,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,Q.zw)(r.showDetails?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})])]),(0,i.Wm)(Ut.Fx,null,{default:(0,i.w5)((()=>[r.showDetails?((0,i.wg)(),(0,i.iD)("div",Ev,[(0,i._)("table",null,[(0,i._)("tbody",null,[(0,i._)("tr",null,[Ov,(0,i._)("td",Tv,(0,Q.zw)(l.get_total_quantity(s.item.product_variations,"movements_total_confirmed_quantity")),1)]),(0,i._)("tr",null,[Vv,(0,i._)("td",qv,(0,Q.zw)(l.get_total_quantity(s.item.product_variations,"movements_total_not_confirmed_quantity")),1)]),(0,i._)("tr",null,[Rv,(0,i._)("td",Fv,(0,Q.zw)(l.get_total_quantity(s.item.product_variations,"total_shipped_quantity")),1)]),(0,i._)("tr",null,[Iv,(0,i._)("td",jv,(0,Q.zw)(l.get_total_quantity(s.item.product_variations,"total_delivered_quantity")),1)])])])])):(0,i.kq)("",!0)])),_:1})])):(0,i.kq)("",!0),"deliveries"==s.source?((0,i.wg)(),(0,i.iD)("div",Nv,[(0,i._)("div",Mv,[(0,i._)("button",{onClick:e[1]||(e[1]=t=>r.showDetails=!r.showDetails),class:"tw-bg-blue-400/10 tw-py-1 tw-px-4 tw-rounded tw-text-blue-400 tw-flex tw-gap-2 tw-items-center tw-justify-between"},[(0,i._)("p",null,"Total: "+(0,Q.zw)(l.get_total_quantity(s.item.product_variations)),1),(0,i.Wm)(X.t,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,Q.zw)(r.showDetails?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})])]),(0,i.Wm)(Ut.Fx,null,{default:(0,i.w5)((()=>[r.showDetails?((0,i.wg)(),(0,i.iD)("div",Hv,[(0,i._)("table",null,[(0,i._)("tbody",null,[(0,i._)("tr",null,[Yv,(0,i._)("td",Kv,(0,Q.zw)(l.get_total_quantity(s.item.product_variations,"movements_total_confirmed_quantity")),1)]),(0,i._)("tr",null,[Zv,(0,i._)("td",Bv,(0,Q.zw)(l.get_total_quantity(s.item.product_variations,"movements_total_not_confirmed_quantity")),1)]),(0,i._)("tr",null,[Qv,(0,i._)("td",Gv,(0,Q.zw)(l.get_total_quantity(s.item.product_variations,"total_shipped_quantity")),1)]),(0,i._)("tr",null,[Jv,(0,i._)("td",Xv,(0,Q.zw)(l.get_total_quantity(s.item.product_variations,"total_delivered_quantity")),1)])])])])):(0,i.kq)("",!0)])),_:1})])):(0,i.kq)("",!0)]),(0,i._)("td",ty,[(0,i._)("div",null,[(0,i.Wm)(o,{type:s.source,source:s.item},null,8,["type","source"])])])])}function sy(t,e,s,a,r,l){const o=(0,i.up)("ProductVariantDetails");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(G.T,{onClick:e[0]||(e[0]=t=>r.visible=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue-lighten-2",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-eye")])),_:1})])),_:1}),(0,i.Wm)(o,{visible:r.visible,onCancel:l.cancel,type:s.type,source:s.source},null,8,["visible","onCancel","type","source"])])}const ay={class:"md:tw-w-[50%] tw-relative tw-max-h-full tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},iy={class:"tw-p-5"},ry={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500 tw-rounded-md tw-overflow-hidden"},ly=(0,i._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,i._)("tr",null,[(0,i._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,i._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},"SIZE"),(0,i._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"},"COLOR"),(0,i._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY ")])],-1);function oy(t,e,s,a,r,l){const o=(0,i.up)("ProductVariantDetailsRow"),n=(0,i.up)("popup-full");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n,{visible:s.visible,onCancel:l.cancel},{default:(0,i.w5)((()=>[(0,i._)("div",ay,[(0,i.Wm)(G.T,{onClick:l.cancel,icon:"mdi-close",variant:"flat",size:"w-small",color:"red",class:"tw-absolute tw-top-3 tw-z-10 tw-right-3"},null,8,["onClick"]),(0,i._)("div",iy,[(0,i._)("table",ry,[ly,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.source.product_variations,(t=>((0,i.wg)(),(0,i.j4)(o,{key:t.id,item:t,type:s.type},null,8,["item","type"])))),128))])]),(0,i.kq)("",!0)])])])),_:1},8,["visible","onCancel"])])}const ny={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},dy={class:"tw-w-4 tw-px-2 tw-py-1"},wy={class:"tw-w-4 tw-px-2 tw-py-1"},cy={class:"tw-w-4 tw-px-2 tw-py-1"},uy={class:"tw-w-4 tw-px-2 tw-py-1"},py={class:"tw-w-fit tw-min-w-[200px] tw-flex tw-items-center"},my={key:0,class:"tw-h-fit tw-py-2"},hy=(0,i._)("td",{class:"tw-px-3 tw-py-1 tw-bg-emerald-100 tw-border tw-text-emerald-500"}," Received: ",-1),gy={class:"tw-px-3 tw-py-1 tw-border tw-text-emerald-500"},fy=(0,i._)("td",{class:"tw-px-3 tw-py-1 tw-bg-red-100 tw-text-red-500 tw-border"}," Not Received: ",-1),vy={class:"tw-px-3 tw-py-1 tw-border tw-text-red-500"},yy=(0,i._)("td",{class:"tw-px-3 tw-py-1 tw-bg-purple-100 tw-border tw-text-purple-500"}," Shipped: ",-1),_y={class:"tw-px-3 tw-py-1 tw-border tw-text-purple-500"},xy=(0,i._)("td",{class:"tw-px-3 tw-py-1 tw-bg-blue-100 tw-border tw-text-blue-500"}," Delivered: ",-1),by={class:"tw-px-3 tw-py-1 tw-border tw-text-blue-500"};function ky(t,e,s,a,r,l){return(0,i.wg)(),(0,i.iD)("tr",ny,[(0,i._)("td",dy,(0,Q.zw)(s.item.id),1),(0,i._)("td",wy,(0,Q.zw)(s.item.size),1),(0,i._)("td",cy,(0,Q.zw)(s.item.color),1),(0,i._)("td",uy,[(0,i._)("div",null,[(0,i._)("div",py,[(0,i._)("button",{onClick:e[0]||(e[0]=t=>r.showDetails=!r.showDetails),class:"tw-bg-blue-400/10 tw-py-1 tw-px-4 tw-rounded tw-text-blue-400 tw-flex tw-gap-2 tw-items-center tw-justify-between"},[(0,i._)("p",null," Total: "+(0,Q.zw)(s.item.on_hand_quantity),1),(0,i.Wm)(X.t,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,Q.zw)(r.showDetails?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})])]),(0,i.Wm)(Ut.Fx,null,{default:(0,i.w5)((()=>[r.showDetails?((0,i.wg)(),(0,i.iD)("div",my,[(0,i._)("table",null,[(0,i._)("tbody",null,[(0,i._)("tr",null,[hy,(0,i._)("td",gy,(0,Q.zw)(s.item.movements_total_confirmed_quantity),1)]),(0,i._)("tr",null,[fy,(0,i._)("td",vy,(0,Q.zw)(s.item.movements_total_not_confirmed_quantity),1)]),(0,i._)("tr",null,[yy,(0,i._)("td",_y,(0,Q.zw)(s.item.total_shipped_quantity),1)]),(0,i._)("tr",null,[xy,(0,i._)("td",by,(0,Q.zw)(s.item.total_delivered_quantity),1)])])])])):(0,i.kq)("",!0)])),_:1})])])])}var Cy={props:["type","item"],data(){return{showDetails:!1}}};const Dy=(0,d.Z)(Cy,[["render",ky]]);var Sy=Dy,zy={props:["visible","source","type"],components:{ProductVariantDetailsRow:Sy},methods:{cancel(){this.$emit("cancel")}},mounted(){}};const Uy=(0,d.Z)(zy,[["render",oy]]);var Ly=Uy,Py={props:["product","source","type"],components:{ProductVariantDetails:Ly},data(){return{visible:!1,quantity:1,newVariant:null}},methods:{cancel(){this.visible=!1}},mounted(){console.log(this.source)}};const Ay=(0,d.Z)(Py,[["render",sy]]);var Wy=Ay,$y={components:{ShowProductVariantActions:Wy},props:["source","item"],data(){return{showDetails:!1}},methods:{get_total_quantity(t,e="on_hand_quantity"){let s=0;return t.forEach((t=>{s+=t[e]})),s}}};const Ey=(0,d.Z)($y,[["render",ey]]);var Oy=Ey,Ty={props:["product","source"],components:{ProductTrackingRow:Oy},computed:{items(){return this.product.tracking[this.source]}},methods:{},mounted(){}};const Vy=(0,d.Z)(Ty,[["render",Sv]]);var qy=Vy,Ry={components:{ProductTrackingTable:qy},props:["product"],data(){return{tab:1,tabs:[{id:1,name:"Deliveries",source:"deliveries"},{id:2,name:"Warehouses",source:"warehouses"}]}}};const Fy=(0,d.Z)(Ry,[["render",_v]]);var Iy=Fy,jy={components:{ProductTracking:Iy},data(){return{currency:I,isLoading:!1,isLoaded:!1,variantId:1,variants:[],product:{name:"",reference:"",buyingPrice:0,sellingPrice:0,description:""}}},computed:{qtyTotalDelivered(){let t=0;return this.product.tracking.deliveries.forEach((e=>{e.product_variations.forEach((e=>{t+=e.total_delivered_quantity}))})),this.product.tracking.warehouses.forEach((e=>{e.product_variations.forEach((e=>{t+=e.total_delivered_quantity}))})),t},qtyTotalSent(){let t=0;return this.product.tracking.warehouses.forEach((e=>{e.product_variations.forEach((e=>{t+=e.movements_total_confirmed_quantity,t+=e.movements_total_not_confirmed_quantity}))})),t},qtyTotal(){if(this.isLoaded){let t=0;return this.product.variations.forEach((e=>{t+=e.quantity})),t}return 0}},methods:{getProduct(){const t=this.$route.params.id;ea.getProduct(t).then((t=>{"SUCCESS"==t.data.code&&(this.product=t.data.data.products,this.isLoaded=!0)}),this.$handleApiError)}},mounted(){this.getProduct()}};const Ny=(0,d.Z)(jy,[["render",fv]]);var My=Ny,Hy={name:"products",path:"/products",component:ia,meta:{module:"product"},children:[{name:"product/list",path:"",component:cp,meta:{module:"product",subModule:"product/list",title:"Products List",gate:"show_all_products"}},{name:"product/add",path:"add",component:Ih,meta:{module:"product",subModule:"product/add",title:"Add Product",gate:"create_product"}},{name:"product/update",path:"update/:id",component:kf,meta:{module:"product",subModule:"product/update",title:"Update Product",gate:"update_product"}},{name:"product/show",path:":id",component:My,meta:{module:"product",subModule:"product/show",title:"Product Informations",gate:"view_product"}}]};const Yy={class:"mb-5 tw-flex tw-justify-between tw-items-center"},Ky=(0,i._)("div",null,[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Users List"),(0,i._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage all users")],-1),Zy={key:0},By=(0,i._)("span",{class:"text-white"}," Add User ",-1),Qy={key:0},Gy={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Jy={class:"mb-5 tw-flex"},Xy={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},t_={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},e_={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},s_=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Role",-1),a_={class:"tw-relative"},i_=["value"],r_={class:""};function l_(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation"),d=(0,i.up)("UsersTable");return(0,i.wg)(),(0,i.iD)("div",{key:o.users.length},[(0,i._)("div",Yy,[Ky,t.$can("create_user")?((0,i.wg)(),(0,i.iD)("div",Zy,[(0,i.Wm)(G.T,{color:"primary-color",link:"",to:{name:"user/add"},variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),By])),_:1})])):(0,i.kq)("",!0)]),o.fetched?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",Qy,[(0,i.Wm)(n)])),o.fetched?((0,i.wg)(),(0,i.iD)("div",Gy,[(0,i._)("div",Jy,[(0,i.Wm)(G.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,i._)("div",Xy,[(0,i.Wm)(Zt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,l.search]])])]),(0,i._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,i._)("div",t_,[(0,i._)("div",e_,[s_,(0,i._)("div",a_,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.role=t),class:"tw-w-full focus:tw-border-orange-400 tw-capitalize tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.roles,(t=>((0,i.wg)(),(0,i.iD)("option",{key:t,value:t},(0,Q.zw)(t),9,i_)))),128))],512),[[a.bM,l.role]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])])])],2),(0,i._)("div",r_,[(0,i.Wm)(d,{users:o.filteredUsers,columns:l.columns},null,8,["users","columns"])])])):(0,i.kq)("",!0)])}const o_={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},n_={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},d_={class:"tw-text-xs tw-text-gray-700 tw- tw-bg-gray-50"},w_=(0,i._)("th",{scope:"col",class:"tw-p-4"},[(0,i._)("div",{class:"tw-flex tw-items-center"},[(0,i._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,i._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),c_={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},u_=(0,i._)("td",{class:"tw-w-4 tw-p-4"},[(0,i._)("div",{class:"tw-flex tw-items-center"},[(0,i._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,i._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),p_={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},m_={class:"tw-px-6 tw-py-4"},h_={class:"tw-px-6 tw-py-4"},g_={class:"tw-px-6 tw-py-4"},f_={class:"tw-px-6 tw-py-4"},v_={class:"tw-px-6 tw-py-4"},y_={key:0,class:"tw-text-red-500"},__={key:1},x_={key:0,class:"tw-text-green-500 tw-flex tw-items-center tw-gap-2"},b_=(0,i._)("div",{class:"tw-p-1 tw-rounded-full tw-bg-green-500"},null,-1),k_={key:1,class:"tw-text-neutral-700"},C_={class:"tw-px-6 tw-py-4"},D_={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},S_={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},z_={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},U_=(0,i._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),L_=["value"],P_={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},A_={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},W_={class:"tw-text-white"};function $_(t,e,s,r,l,o){const n=(0,i.up)("RoleName"),d=(0,i.up)("UserStatus"),w=(0,i.up)("UserActions");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",o_,[(0,i._)("table",n_,[(0,i._)("thead",d_,[(0,i._)("tr",null,[w_,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.columns,(t=>((0,i.wg)(),(0,i.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,i._)("div",c_,(0,Q.zw)(t.name),1)])))),128))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.items,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[u_,(0,i._)("th",p_,(0,Q.zw)(e.id),1),(0,i._)("td",m_,(0,Q.zw)(e.firstname)+" "+(0,Q.zw)(e.lastname),1),(0,i._)("td",h_,[(0,i.Wm)(n,{role:e.role_name},null,8,["role"])]),(0,i._)("td",g_,(0,Q.zw)(e.email),1),(0,i._)("td",f_,(0,Q.zw)(e.phone),1),(0,i._)("td",v_,[e.last_action?((0,i.wg)(),(0,i.iD)("div",__,[1==o.isOnline(o.lastSeen(e.last_action))?((0,i.wg)(),(0,i.iD)("div",x_,[b_,(0,i.Uk)(" Online ")])):((0,i.wg)(),(0,i.iD)("div",k_,(0,Q.zw)(o.lastSeen(e.last_action)),1))])):((0,i.wg)(),(0,i.iD)("div",y_," Never Connected "))]),(0,i._)("td",C_,[t.$can("update_user_status")?((0,i.wg)(),(0,i.j4)(d,{key:0,user:e},null,8,["user"])):(0,i.kq)("",!0)]),(0,i._)("td",D_,[(0,i.Wm)(w,{user:e},null,8,["user"])])])))),128))])])]),(0,i._)("div",S_,[(0,i._)("div",z_,[U_,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allowedLimit,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,L_)))),128))],512),[[a.bM,l.paginationLimit]])]),(0,i._)("div",P_,[(0,i._)("div",A_,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?s.users.length:o.nextRange)+" of "+(0,Q.zw)(s.users.length)+" items ",1),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.pageCount,(t=>((0,i.wg)(),(0,i.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,i.w5)((()=>[(0,i._)("span",W_,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}function E_(t,e,s,a,r,l){const o=(0,i.up)("popup");return(0,i.wg)(),(0,i.iD)("div",null,[t.$can("update_user")?((0,i.wg)(),(0,i.j4)(G.T,{key:0,to:"/users/update/"+s.user.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-pencil-outline")])),_:1})])),_:1},8,["to"])):(0,i.kq)("",!0),t.$can("view_user")?((0,i.wg)(),(0,i.j4)(G.T,{key:1,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-eye-outline")])),_:1})])),_:1})):(0,i.kq)("",!0),t.$can("delete_user")&&"admin"!==s.user.role_name?((0,i.wg)(),(0,i.j4)(G.T,{key:2,onClick:e[0]||(e[0]=t=>r.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this user?</p> You won't be able to revert this!",loading:r.isLoading,visible:r.showPopup,onResolved:l.handleResolved},null,8,["loading","visible","onResolved"])])}var O_={props:["rowIndex","user"],name:"userActions",data(){return{showPopup:!1,isLoading:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,Z["delete"](this.user.id).then((t=>{"USER_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"User Deleted Successfully"})),Z.all().then((t=>{"SHOW_ALL_USERS"==t.data.code&&this.$store.dispatch("user/setUsers",t.data.data.users)})).catch(this.$handleApiError)})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const T_=(0,d.Z)(O_,[["render",E_]]);var V_=T_;const q_={key:0,class:"tw-flex tw-items-center"};function R_(t,e,s,a,r,l){return"admin"!==s.user.role_name?((0,i.wg)(),(0,i.iD)("div",q_,[(0,i.Wm)(Xl.G,{disabled:r.isLoading,loading:r.isLoading,onChange:l.handleChange,color:"primary-color",flat:!0,modelValue:r.checked,"onUpdate:modelValue":e[0]||(e[0]=t=>r.checked=t),density:"compact","hide-details":!0},null,8,["disabled","loading","onChange","modelValue"])])):(0,i.kq)("",!0)}var F_={props:["rowIndex","prop","user"],data(){return{isLoading:!1,checked:!1}},watch:{},methods:{handleChange(){const t={id:this.user.id,status:this.checked?"true":"false"};this.isLoading=!0,Z.updateStatus(t).then((t=>{"STATUS_USER_UPDATED"==t.data.code&&(this.$alert({type:"success",title:"Status updated"}),this.setUpdatedUser(this.user.id,this.checked))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},setUpdatedUser(t,e){let s=localStorage.getItem("updatedUsers"),a={};s?(a=JSON.parse(s),a[t]=e):a[t]=e,localStorage.setItem("updatedUsers",JSON.stringify(a))},getUpdatedUsers(){let t=localStorage.getItem("updatedUsers");if(!t)return{};let e=JSON.parse(t);return e}},mounted(){const t=this.getUpdatedUsers();Object.keys(t).includes(`${this.user.id}`)?this.checked=1==t[this.model.id]:this.checked=1==this.user.status}};const I_=(0,d.Z)(F_,[["render",R_]]);var j_=I_;const N_={class:"tw-flex tw-items-center tw-h-full"};function M_(t,e,s,a,r,l){return(0,i.wg)(),(0,i.iD)("div",N_,[(0,i._)("div",{class:(0,Q.C_)([l.current.bg,"tw-px-2 tw-py-1 tw-rounded-lg"])},[(0,i._)("div",{class:(0,Q.C_)([l.current.text,"tw-text-sm tw-uppercase"])},(0,Q.zw)(s.role),3)],2)])}var H_={props:["role"],data(){return{variants:{default:{bg:"tw-bg-neutral-500/10",text:"tw-text-neutral-500"},admin:{bg:"tw-bg-pink-500/10",text:"tw-text-pink-500"},agente:{bg:"tw-bg-green-500/10",text:"tw-text-green-500"},delivery:{bg:"tw-bg-blue-500/10",text:"tw-text-blue-500"}}}},computed:{current(){return["admin","delivery","agente"].includes(this.role)?this.variants[this.role]:this.variants["default"]}}};const Y_=(0,d.Z)(H_,[["render",M_]]);var K_=Y_,Z_={props:["columns","users"],components:{UserActions:V_,UserStatus:j_,RoleName:K_},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.users.length/this.paginationLimit)},items(){return this.users.slice(this.prevRange,this.nextRange)}},methods:{lastSeen(t){let e=Date.parse(t.replace("-","/"))/1e3;return(0,Ka.x)(e)},isOnline(t){let e=["Just Now","one minute ago","2 minutes ago","3 minutes ago"];return e.includes(t)}}};const B_=(0,d.Z)(Z_,[["render",$_]]);var Q_=B_,G_={components:{UsersTable:Q_},data(){return{localUrl:R,isLoaded:!1,showFilters:!1,role:"All",search:"",columns:[{prop:"id",name:"#"},{prop:"fullname",name:"Name"},{prop:"role_name",name:"Role"},{prop:"email",name:"Email"},{prop:"phone",name:"Phone Number"},{prop:"last_seen",name:"Last Seen"},{prop:"status",name:"Active"},{name:"Acions",prop:"users"}]}},computed:{fetched(){return this.$store.getters["user/fetched"]},users(){return this.$store.getters["user/users"]},roles(){let t=new Set(["All",...this.users.map((t=>t.role_name))]);return t},filteredUsers(){const t=this.role,e=this.search;return this.users.filter((s=>("all"===t.toLocaleLowerCase()||t.toLocaleLowerCase()===s.role_name)&&!!(s.firstname.toLowerCase().includes(e.toLowerCase())||s.lastname.toLowerCase().includes(e.toLowerCase())||s.role_name.toLowerCase().includes(e.toLowerCase())||s.email.toLowerCase().includes(e.toLowerCase())||s.phone.toLowerCase().includes(e.toLowerCase()))))}},methods:{getRoles(){Z.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.isFormReady=!0}})).catch(this.$handleApiError)},getUsers(){Z.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),this.$store.dispatch("user/setFetched",!0)}})).catch(this.$handleApiError)}},mounted(){localStorage.removeItem("updatedUsers"),this.fetched||this.getUsers()}};const J_=(0,d.Z)(G_,[["render",l_]]);var X_=J_,tx=s(988);const ex=(0,i._)("div",{class:"mb-5"},[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Add User "),(0,i._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create new user")],-1),sx={key:0},ax={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},ix={class:"tw-w-full"},rx=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," First Name ",-1),lx={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},ox={class:"tw-w-full"},nx=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Last Name",-1),dx={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},wx={class:"tw-w-full"},cx=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Email",-1),ux={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},px={class:"tw-w-full"},mx=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Phone Number ",-1),hx={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},gx=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Product",-1),fx=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),vx=["value"],yx=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery cities",-1),_x=["value"],xx=(0,i._)("div",{class:"mb-1 my-2 text-body-2 tw-text-zinc-700"},"Fee",-1),bx=(0,i._)("span",{class:"text-white"},"Add",-1),kx=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Role",-1),Cx={class:"tw-flex tw-gap-10 tw-h-full tw-items-center"},Dx=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Status:",-1),Sx={class:"tw-w-full"},zx=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Password",-1),Ux={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Lx={class:"tw-w-full"},Px=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Confirm Password ",-1),Ax={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Wx=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery cities",-1),$x={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Ex=(0,i._)("span",{class:"text-white text-capitalize"},"Cancel",-1),Ox=(0,i._)("span",{class:"text-white text-capitalize"},"Create",-1);function Tx(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation");return(0,i.wg)(),(0,i.iD)("div",null,[ex,l.isFormReady?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",sx,[(0,i.Wm)(n)])),l.isFormReady?((0,i.wg)(),(0,i.iD)("div",ax,[(0,i._)("div",null,[(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",ix,[rx,(0,i.Wm)(tt.hw,{error:!l.formStatus.firstname.valid,"hide-details":!0,onKeyup:e[0]||(e[0]=t=>o.resetError("firstname")),modelValue:l.user.firstname,"onUpdate:modelValue":e[1]||(e[1]=t=>l.user.firstname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",lx,(0,Q.zw)(l.formStatus.firstname.message),1)])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",ox,[nx,(0,i.Wm)(tt.hw,{error:!l.formStatus.lastname.valid,"hide-details":!0,onKeyup:e[2]||(e[2]=t=>o.resetError("lastname")),modelValue:l.user.lastname,"onUpdate:modelValue":e[3]||(e[3]=t=>l.user.lastname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",dx,(0,Q.zw)(l.formStatus.lastname.message),1)])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",wx,[cx,(0,i.Wm)(tt.hw,{error:!l.formStatus.email.valid,"hide-details":!0,onKeyup:e[4]||(e[4]=t=>o.resetError("email")),modelValue:l.user.email,"onUpdate:modelValue":e[5]||(e[5]=t=>l.user.email=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",ux,(0,Q.zw)(l.formStatus.email.message),1)])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",px,[mx,(0,i.Wm)(tt.hw,{error:!l.formStatus.phone.valid,"hide-details":!0,onKeyup:e[6]||(e[6]=t=>o.resetError("phone")),modelValue:l.user.phone,"onUpdate:modelValue":e[7]||(e[7]=t=>l.user.phone=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",hx,(0,Q.zw)(l.formStatus.phone.message),1)])])),_:1}),o.isAgente?((0,i.wg)(),(0,i.j4)(oa.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i._)("div",null,[(0,i.Wm)(Xl.G,{modelValue:l.isHavingAllProducts,"onUpdate:modelValue":e[8]||(e[8]=t=>l.isHavingAllProducts=t),color:"primary-color",label:"All Products"},null,8,["modelValue"])]),gx,(0,i._)("div",null,[(0,i.Wm)(tx.f,{disabled:l.isHavingAllProducts,modelValue:l.selectedProducts,"onUpdate:modelValue":e[9]||(e[9]=t=>l.selectedProducts=t),"filter-keys":"name",density:"compact","item-value":"id","item-title":"name",variant:"outlined",color:"primary-color",chips:"",items:o.selectProducts,multiple:""},null,8,["disabled","modelValue","items"])])])])),_:1})):(0,i.kq)("",!0),o.isDelivery?((0,i.wg)(),(0,i.j4)(oa.D,{key:1,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[fx,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>l.city=t),class:"tw-w-full tw-py-[7px] focus:tw-border-orange-500 tw-px-4 tw-border tw-outline-orange-500 tw-border-neutral-400 tw-border-solid tw-rounded-md"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.cities,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,vx)))),128))],512),[[a.bM,l.city]])])])),_:1})):(0,i.kq)("",!0),o.isDelivery?((0,i.wg)(),(0,i.j4)(oa.D,{key:2,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[yx,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[11]||(e[11]=t=>l.deliveryCity=t),class:"tw-w-full tw-py-[7px] focus:tw-border-orange-500 tw-px-4 tw-border tw-outline-orange-500 tw-border-neutral-400 tw-border-solid tw-rounded-md"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.cities,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,_x)))),128))],512),[[a.bM,l.deliveryCity]]),xx,(0,i.Wm)(tt.hw,{"hide-details":!0,modelValue:l.deliveryCityFee,"onUpdate:modelValue":e[12]||(e[12]=t=>l.deliveryCityFee=t),clearable:"",type:"number","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"]),(0,i.Wm)(G.T,{onClick:o.handleAddCity,class:"tw-text-white tw-my-3",variant:"flat",color:"primary-color",block:""},{default:(0,i.w5)((()=>[bx])),_:1},8,["onClick"])])])),_:1})):(0,i.kq)("",!0)])),_:1})])),_:1}),(0,i.Wm)(oa.D,{cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[kx,(0,i.Wm)(up.r,{class:"text-capitalize",items:o.roles,"item-title":"name","item-value":"id",modelValue:l.role,"onUpdate:modelValue":e[13]||(e[13]=t=>l.role=t),variant:"outlined",color:"primary-color",density:"compact"},null,8,["items","modelValue"])])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",Cx,[Dx,(0,i.Wm)(Xl.G,{modelValue:l.user.status,"onUpdate:modelValue":e[14]||(e[14]=t=>l.user.status=t),color:"primary-color","hide-details":!0,flat:""},null,8,["modelValue"])])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",Sx,[zx,(0,i.Wm)(tt.hw,{error:!l.formStatus.password.valid,"hide-details":!0,onKeyup:e[15]||(e[15]=t=>o.resetError("password")),modelValue:l.user.password,"onUpdate:modelValue":e[16]||(e[16]=t=>l.user.password=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",Ux,(0,Q.zw)(l.formStatus.password.message),1)])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",Lx,[Px,(0,i.Wm)(tt.hw,{error:!l.formStatus.confirmPassword.valid,"hide-details":!0,onKeyup:e[17]||(e[17]=t=>o.resetError("confirmPassword")),modelValue:l.user.confirmPassword,"onUpdate:modelValue":e[18]||(e[18]=t=>l.user.confirmPassword=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",Ax,(0,Q.zw)(l.formStatus.confirmPassword.message),1)])])),_:1}),o.isDelivery?((0,i.wg)(),(0,i.j4)(oa.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[Wx,(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.deliveryCities,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"tw-flex tw-items-center tw-gap-2",key:t},[(0,i._)("div",null,(0,Q.zw)(o.cities.filter((e=>e.id==t.city_id))[0]?.name),1),(0,i._)("div",null,(0,Q.zw)(t.fee)+" "+(0,Q.zw)(l.currency),1),(0,i._)("div",null,[(0,i.Wm)(X.t,{color:"red",onClick:e=>o.removeCity(t.id),size:"x-small"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-delete")])),_:2},1032,["onClick"])])])))),128))])])])),_:1})):(0,i.kq)("",!0)])),_:1})])),_:1})])),_:1})]),(0,i._)("div",$x,[(0,i.Wm)(G.T,{link:"",to:"/",color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,i.w5)((()=>[Ex])),_:1}),(0,i.Wm)(G.T,{onClick:o.create,loading:l.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,i.w5)((()=>[Ox])),_:1},8,["onClick","loading"])])])):(0,i.kq)("",!0)])}var Vx={data(){return{localUrl:R,currency:I,isFormReady:!1,isLoading:!1,city:1,isMultipleProducts:!1,isHavingAllProducts:!1,id:1,deliveryCity:1,deliveryCityFee:0,deliveryCities:[],product:0,selectedProducts:[],formStatus:{firstname:{valid:!0,message:""},lastname:{valid:!0,message:""},phone:{valid:!0,message:""},email:{valid:!0,message:""},password:{valid:!0,message:""},confirmPassword:{valid:!0,message:""}},user:{firstname:"",lastname:"",phone:"",email:"",password:"",confirmPassword:"",status:!0},role:3}},computed:{roles(){return this.$store.getters["user/roles"]},rolesFetched(){return this.$store.getters["user/fetchedRoles"]},cities(){return this.$store.getters["city/cities"]},citiesFetched(){return this.$store.getters["city/fetched"]},products(){return this.$store.getters["product/products"]},productsFethched(){return this.$store.getters["product/fetched"]},isAgente(){return 2===this.role},isDelivery(){return 3===this.role},selectProducts(){return this.isMultipleProducts,[...this.products]},userProducts(){return this.selectedProducts}},watch:{},methods:{removeCity(t){this.deliveryCities=this.deliveryCities.filter((e=>e.id!==t))},handleAddCity(){if(this.deliveryCityFee<=0)return!1;this.deliveryCities.push({id:this.id,city_id:this.deliveryCity,fee:this.deliveryCityFee}),this.id+=1,this.deliveryCity=1,this.deliveryCityFee=0},create(){if(!this.validate())return!1;this.isLoading=!0;const t={...this.user,role:this.role,product_id:this.userProducts,city:this.city,deliveryCities:this.deliveryCities,having_all:this.isHavingAllProducts};Z.register(t).then((t=>{"USER_CREATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.user={firstname:"",lastname:"",phone:"",email:"",password:"",confirmPassword:"",status:!0},this.role=3,this.product_id=null,this.deliveryCities=[],this.id=1)})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;if("VALIDATION_ERROR"==e?.code)for(let s in e.error)this.formStatus[s]={valid:!1,message:e.error[s][0]}})).finally((()=>{this.isLoading=!1}))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){this.formStatus.email=_t(this.user.email),this.formStatus.firstname=bt(this.user.firstname),this.formStatus.lastname=bt(this.user.lastname),this.formStatus.phone=bt(this.user.phone),this.formStatus.password=xt(this.user.password),this.formStatus.confirmPassword=Ct(this.user.password,this.user.confirmPassword);const t=this.formStatus.email.valid,e=this.formStatus.firstname.valid,s=this.formStatus.lastname.valid,a=this.formStatus.phone.valid,i=this.formStatus.password.valid,r=this.formStatus.confirmPassword.valid;return t&&e&&s&&i&&r&&a},getRoles(){return this.rolesFetched?new Promise((t=>t())):Z.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.$store.dispatch("user/setFetchedRoles",!0)}})).catch(this.$handleApiError)},async getCities(){return this.citiesFetched?new Promise((t=>t())):Z.cities().then((t=>{this.$store.dispatch("city/cities",t.data.data),this.$store.dispatch("city/setFetched",!0)}))},async getProducts(){return this.productsFethched?new Promise((t=>t())):ea.all().then((t=>{this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0)}),(t=>this.$handleApiError(t)))}},mounted(){Promise.allSettled([this.getRoles(),this.getCities(),this.getProducts()]).then((t=>{console.log(t),this.isFormReady=!0}),(t=>this.$handleApiError(t)))}};const qx=(0,d.Z)(Vx,[["render",Tx]]);var Rx=qx;const Fx=(0,i._)("div",{class:"mb-5"},[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Update User "),(0,i._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Update user informations")],-1),Ix={key:0},jx={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Nx={class:"tw-flex tw-gap-2 tw-text-neutral-800 tw-items-center tw-mb-5"},Mx={class:"tw-block tw-py-1 tw-px-2 tw-rounded-md text-primary-color"},Hx={class:"tw-w-full"},Yx=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," First Name ",-1),Kx={class:"tw-w-full"},Zx=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Last Name",-1),Bx={class:"tw-w-full"},Qx=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Email",-1),Gx={class:"tw-w-full"},Jx=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Phone Number ",-1),Xx={class:"tw-w-full tw-flex tw-gap-10 tw-items-center"},tb=(0,i._)("span",null,"Update Password: ",-1),eb={class:"tw-w-full"},sb=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Password",-1),ab={class:"tw-w-full"},ib=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Confirm Password ",-1),rb=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Role",-1),lb={class:"tw-flex tw-gap-10 tw-h-full tw-items-center"},ob=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Status:",-1),nb=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Product",-1),db=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),wb=["value"],cb=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery cities",-1),ub=["value"],pb=(0,i._)("div",{class:"mb-1 my-2 text-body-2 tw-text-zinc-700"},"Fee",-1),mb=(0,i._)("span",{class:"text-white"},"Add",-1),hb=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery cities",-1),gb={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},fb=(0,i._)("span",{class:"text-white text-capitalize"},"Cancel",-1),vb=(0,i._)("span",{class:"text-white text-capitalize"},"Update",-1);function yb(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation");return(0,i.wg)(),(0,i.iD)("div",null,[Fx,o.isFormReady?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",Ix,[(0,i.Wm)(n)])),o.isFormReady?((0,i.wg)(),(0,i.iD)("div",jx,[(0,i._)("div",Nx,[(0,i.Uk)(" User ID: "),(0,i._)("span",Mx,(0,Q.zw)(l.id),1)]),(0,i._)("div",null,[(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",Hx,[Yx,(0,i.Wm)(tt.hw,{"error-messages":l.formStatus.firstname.message,modelValue:l.firstname,"onUpdate:modelValue":e[0]||(e[0]=t=>l.firstname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",Kx,[Zx,(0,i.Wm)(tt.hw,{"error-messages":l.formStatus.lastname.message,modelValue:l.lastname,"onUpdate:modelValue":e[1]||(e[1]=t=>l.lastname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",Bx,[Qx,(0,i.Wm)(tt.hw,{"error-messages":l.formStatus.email.message,modelValue:l.email,"onUpdate:modelValue":e[2]||(e[2]=t=>l.email=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",Gx,[Jx,(0,i.Wm)(tt.hw,{"error-messages":l.formStatus.phone.message,modelValue:l.phone,"onUpdate:modelValue":e[3]||(e[3]=t=>l.phone=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-0",cols:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",Xx,[tb,(0,i.Wm)(Xl.G,{modelValue:l.updatePassword,"onUpdate:modelValue":e[4]||(e[4]=t=>l.updatePassword=t),color:"primary-color","hide-details":!0},null,8,["modelValue"])])])),_:1}),l.updatePassword?((0,i.wg)(),(0,i.j4)(oa.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",eb,[sb,(0,i.Wm)(tt.hw,{"error-messages":l.formStatus.password.message,modelValue:l.password,"onUpdate:modelValue":e[5]||(e[5]=t=>l.password=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1})):(0,i.kq)("",!0),l.updatePassword?((0,i.wg)(),(0,i.j4)(oa.D,{key:1,class:"!tw-py-2 tw-pt-0",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",ab,[ib,(0,i.Wm)(tt.hw,{"error-messages":l.formStatus.confirmPassword.message,modelValue:l.confirmPassword,"onUpdate:modelValue":e[6]||(e[6]=t=>l.confirmPassword=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1})):(0,i.kq)("",!0)])),_:1})])),_:1}),(0,i.Wm)(oa.D,{cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[rb,(0,i.Wm)(up.r,{class:"text-capitalize","error-messages":l.formStatus.role,items:o.roles,"item-title":"name","item-value":"id",modelValue:l.role,"onUpdate:modelValue":e[7]||(e[7]=t=>l.role=t),variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","items","modelValue"])])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",lb,[ob,(0,i.Wm)(Xl.G,{modelValue:l.status,"onUpdate:modelValue":e[8]||(e[8]=t=>l.status=t),color:"primary-color","hide-details":!0,flat:""},null,8,["modelValue"])])])),_:1}),o.isAgente?((0,i.wg)(),(0,i.j4)(oa.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i._)("div",null,[(0,i.Wm)(Xl.G,{modelValue:l.isHavingAllProducts,"onUpdate:modelValue":e[9]||(e[9]=t=>l.isHavingAllProducts=t),color:"primary-color",label:"All Products"},null,8,["modelValue"])]),nb,(0,i._)("div",null,[(0,i.Wm)(tx.f,{disabled:l.isHavingAllProducts,modelValue:l.selectedProducts,"onUpdate:modelValue":e[10]||(e[10]=t=>l.selectedProducts=t),"filter-keys":"name",density:"compact","item-value":"id","item-title":"name",variant:"outlined",color:"primary-color",chips:"",items:o.selectProducts,multiple:""},null,8,["disabled","modelValue","items"])])])])),_:1})):(0,i.kq)("",!0),o.isDelivery?((0,i.wg)(),(0,i.j4)(oa.D,{key:1,class:"!tw-py-2",cols:"12",md:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[db,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[11]||(e[11]=t=>l.city=t),class:"tw-w-full tw-py-[7px] focus:tw-border-orange-500 tw-px-4 tw-border tw-outline-orange-500 tw-border-neutral-400 tw-border-solid tw-rounded-md"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.cities,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,wb)))),128))],512),[[a.bM,l.city]])])])),_:1})):(0,i.kq)("",!0)])),_:1})])),_:1}),o.isDelivery?((0,i.wg)(),(0,i.j4)(oa.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[cb,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[12]||(e[12]=t=>l.deliveryCity=t),class:"tw-w-full tw-py-[7px] focus:tw-border-orange-500 tw-px-4 tw-border tw-outline-orange-500 tw-border-neutral-400 tw-border-solid tw-rounded-md"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.cities,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,ub)))),128))],512),[[a.bM,l.deliveryCity]]),pb,(0,i.Wm)(tt.hw,{"hide-details":!0,modelValue:l.deliveryCityFee,"onUpdate:modelValue":e[13]||(e[13]=t=>l.deliveryCityFee=t),clearable:"",type:"number","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"]),(0,i.Wm)(G.T,{onClick:o.handleAddCity,class:"tw-text-white tw-my-3",variant:"flat",color:"primary-color",block:""},{default:(0,i.w5)((()=>[mb])),_:1},8,["onClick"])])])),_:1})):(0,i.kq)("",!0),o.isDelivery?((0,i.wg)(),(0,i.j4)(oa.D,{key:1,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[hb,(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.deliveryCities,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"tw-flex tw-items-center tw-gap-2",key:t},[(0,i._)("div",null,(0,Q.zw)(l.cities.filter((e=>e.id==t.city_id))[0]?.name),1),(0,i._)("div",null,(0,Q.zw)(t.fee)+" DH ",1),(0,i._)("div",null,[(0,i.Wm)(X.t,{color:"red",onClick:e=>o.removeCity(t.id),size:"x-small"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-delete")])),_:2},1032,["onClick"])])])))),128))])])])),_:1})):(0,i.kq)("",!0)])),_:1})]),(0,i._)("div",gb,[(0,i.Wm)(G.T,{link:"",to:{name:"user/list"},color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,i.w5)((()=>[fb])),_:1}),(0,i.Wm)(G.T,{onClick:o.update,loading:l.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,i.w5)((()=>[vb])),_:1},8,["onClick","loading"])])])):(0,i.kq)("",!0)])}var _b={data(){return{serverUrl:F,isFetched:!1,isRolesFetched:!1,isUserFetched:!1,isProductsFetched:!1,isLoading:!1,updatePassword:!1,autoId:1,cities:[],deliveryCity:1,deliveryCityFee:0,city:1,deliveryCities:[],formStatus:{firstname:{valid:!0,message:""},lastname:{valid:!0,message:""},phone:{valid:!0,message:""},email:{valid:!0,message:""},password:{valid:!0,message:""},confirmPassword:{valid:!0,message:""}},id:null,firstname:"",lastname:"",phone:"",email:"",password:"",confirmPassword:"",role:"",user_image:null,status:!1,product:null,products:[],selectedProducts:[],isMultipleProducts:!1,isHavingAllProducts:!1}},computed:{roles(){return this.$store.getters["user/roles"]},isFormReady(){return this.isFetched},isAgente(){return 2===this.role},isDelivery(){return 3===this.role},user(){return{id:this.id,firstname:this.firstname,lastname:this.lastname,phone:this.phone,email:this.email,password:this.password,product_id:this.product,deliveryCities:this.deliveryCities,city:this.city,role:this.role,status:this.status?1:0}},selectProducts(){return this.isMultipleProducts,[...this.products]},userProducts(){return this.selectedProducts}},watch:{role(t){console.log("changed"),2===t&&0===this.products.length&&(this.isProductsFetched=!1)}},methods:{update(){if(!this.validate())return!1;const t={...this.user,role:this.role,product_id:this.userProducts,city:this.city,deliveryCities:this.deliveryCities,having_all:this.isHavingAllProducts};this.isLoading=!0,Z.update(t,this.updatePassword).then((t=>{"USER_UPDATED"==t.data.code&&this.$alert({type:"success",title:t.data.message})})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;switch(console.log(t),e?.code){case"VALIDATION_ERROR":for(let t in e.error)this.formStatus[t]={valid:!1,message:e.error[t][0]};break}return t})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1}))},validate(){this.formStatus["email"]=_t(this.email),this.formStatus["firstname"]=bt(this.firstname),this.formStatus["lastname"]=bt(this.lastname),this.formStatus["phone"]=bt(this.phone),this.formStatus["password"]=xt(this.password),this.formStatus["confirmPassword"]=Ct(this.password,this.confirmPassword);const t=this.formStatus["email"].valid,e=this.formStatus["firstname"].valid,s=this.formStatus["lastname"].valid,a=this.formStatus["phone"].valid;if(this.updatePassword){const i=this.formStatus["password"].valid,r=this.formStatus["confirmPassword"].valid;return t&&e&&s&&i&&r&&a}return t&&e&&s&&a},removeCity(t){this.deliveryCities=this.deliveryCities.filter((e=>e.id!==t))},handleAddCity(){if(this.deliveryCityFee<=0)return!1;this.deliveryCities.push({id:this.autoId,city_id:this.deliveryCity,fee:this.deliveryCityFee}),this.autoId+=1,this.deliveryCity=1,this.deliveryCityFee=0},async getRoles(){await Z.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.isRolesFetched=!0}})).catch(this.$handleApiError)},async getUser(){return Z.getUser(this.$route.params.id).then((t=>{if("USER_SUCCESS"==t?.data.code){const e=t.data.data.user;if(this.id=e.id,this.firstname=e.firstname,this.lastname=e.lastname,this.email=e.email,this.phone=e.phone,this.role=e.role,2==e.role&&(this.isHavingAllProducts=1==e.having_all,this.selectedProducts=e?.product),this.user_image=e.photo,this.status=1==e.status,this.isUserFetched=!0,3==e.role){console.log("this is delivery"),this.city=e?.city?.id;let t=0;this.deliveryCities=e.deliveryPlaces.map((e=>(parseInt(e.id)>=t&&(t=parseInt(e.id)+1),{id:e.id,city_id:e.city_id,fee:parseInt(e.fee)}))),this.autoId=t}}})).catch(this.$handleApiError)},async getProducts(){return ea.all().then((t=>{this.products=t.data.data.products,this.products.length>0?this.product=this.user.product_id:this.product=null,this.isProductsFetched=!0}),(t=>this.$handleApiError(t)))},async getCities(){return Z.cities().then((t=>{console.log(t.data),this.cities=t.data.data}))}},async mounted(){0==this.roles.length?await this.getRoles():this.isRolesFetched=!0,Promise.allSettled([this.getRoles(),this.getProducts(),this.getCities(),this.getUser()]).then((()=>{this.selectedProducts.length==this.products.length&&(this.product=0,this.isMultipleProducts=!1),this.isFetched=!0}),(t=>this.$handleApiError(t)))}};const xb=(0,d.Z)(_b,[["render",yb]]);var bb=xb;const kb=(0,i._)("div",{class:"mb-5"},[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Add New Role "),(0,i._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create new Role")],-1),Cb={key:0},Db={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Sb={class:"md:tw-w-1/2 tw-w-full"},zb=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Role Name",-1),Ub={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Lb={class:"mb-3 text-body-2 tw-text-zinc-700"},Pb={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-text-xs"},Ab={class:"tw-flex tw-flex-wrap tw-gap-2 tw-mt-5"},Wb=["onClick"],$b={key:0},Eb={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Ob=(0,i._)("span",{class:"text-white text-capitalize"},"Cancel",-1),Tb=(0,i._)("span",{class:"text-white text-capitalize"},"Create",-1);function Vb(t,e,s,a,r,l){const o=(0,i.up)("LoadingAnimation");return(0,i.wg)(),(0,i.iD)("div",null,[kb,r.isFormReady?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",Cb,[(0,i.Wm)(o)])),r.isFormReady?((0,i.wg)(),(0,i.iD)("div",Db,[(0,i._)("div",null,[(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{cols:"12",md:"12"},{default:(0,i.w5)((()=>[(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",md:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",Sb,[zb,(0,i.Wm)(tt.hw,{error:!r.formStatus.name.valid,"hide-details":!0,onKeyup:e[0]||(e[0]=t=>l.resetError("firstname")),modelValue:r.name,"onUpdate:modelValue":e[1]||(e[1]=t=>r.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",Ub,(0,Q.zw)(r.formStatus.name.message),1)])])),_:1}),(0,i.Wm)(oa.D,{cols:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i._)("div",Lb,[(0,i.Uk)(" Select Permissions: "),(0,i._)("div",Pb,(0,Q.zw)(r.formStatus.permissions.message),1)]),(0,i._)("div",Ab,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.permissions,(t=>((0,i.wg)(),(0,i.iD)("div",{onClick:e=>l.handleClick(t),class:(0,Q.C_)([{"!tw-bg-orange-500 !tw-text-white":r.selectedPermissions.includes(t)},"tw-py-1 tw-px-2 tw-bg-gray-900/10 tw-text-gray-900 tw-rounded-lg tw-cursor-pointer"]),key:t},[(0,i._)("span",null,(0,Q.zw)(t),1)],10,Wb)))),128))])])])),_:1})])),_:1})])),_:1}),(0,i.Wm)(oa.D,{cols:"12",md:"6"},{default:(0,i.w5)((()=>[r.show?((0,i.wg)(),(0,i.iD)("div",$b,(0,Q.zw)(r.selectedPermissions),1)):(0,i.kq)("",!0)])),_:1})])),_:1})]),(0,i._)("div",Eb,[(0,i.Wm)(G.T,{link:"",to:"/",color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,i.w5)((()=>[Ob])),_:1}),(0,i.Wm)(G.T,{onClick:l.create,loading:r.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,i.w5)((()=>[Tb])),_:1},8,["onClick","loading"])])])):(0,i.kq)("",!0)])}var qb={data(){return{localUrl:R,isFormReady:!1,isLoading:!1,show:!1,formStatus:{name:{valid:!0,message:""},permissions:{valid:!0,message:""}},name:"",permissions:[],selectedPermissions:[]}},computed:{roles(){return this.$store.getters["user/roles"]}},methods:{create(){if(!this.validate())return!1;this.isLoading=!0,Z.createRole({name:this.name,permissions:this.selectedPermissions}).then((t=>{"ROLE_ADDED"===t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.getRoles(),this.name="",this.selectedPermissions=[])})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;if("VALIDATION_ERROR"==e?.code)for(let s in e.error)this.formStatus[s]={valid:!1,message:e.error[s][0]}})).finally((()=>{this.isLoading=!1}))},handleClick(t){this.selectedPermissions.includes(t)?this.selectedPermissions=this.selectedPermissions.filter((e=>e!==t)):this.selectedPermissions.push(t)},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=bt(this.name,"Name"),this.formStatus.permissions=St(this.selectedPermissions),this.formStatus.name.valid&&this.formStatus.permissions.valid},getRoles(){Z.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.isFormReady=!0}})).catch(this.$handleApiError)}},async mounted(){0==this.roles.length?await this.getRoles():this.isFormReady=!0,this.permissions=this.$store.getters["user/permissions"]}};const Rb=(0,d.Z)(qb,[["render",Vb]]);var Fb=Rb;const Ib={class:"mb-5 tw-flex tw-justify-between tw-items-center"},jb=(0,i._)("div",null,[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Roles List"),(0,i._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage all Roles")],-1),Nb={key:0},Mb=(0,i._)("span",{class:"text-white"}," Add Role ",-1),Hb={key:0},Yb={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Kb={class:"mb-5 tw-flex"},Zb={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},Bb={class:""};function Qb(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation"),d=(0,i.up)("RolesTable");return(0,i.wg)(),(0,i.iD)("div",{key:o.roles.length},[(0,i._)("div",Ib,[jb,t.$can("create_role")?((0,i.wg)(),(0,i.iD)("div",Nb,[(0,i.Wm)(G.T,{color:"primary-color",link:"",to:{name:"user/addRole"},variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),Mb])),_:1})])):(0,i.kq)("",!0)]),o.fetched?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",Hb,[(0,i.Wm)(n)])),o.fetched?((0,i.wg)(),(0,i.iD)("div",Yb,[(0,i._)("div",Kb,[(0,i.Wm)(G.T,{icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white !tw-w-0 !tw-overflow-hidden"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,i._)("div",Zb,[(0,i.Wm)(Zt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,l.search]])])]),(0,i._)("div",Bb,[(0,i.Wm)(d,{roles:o.filteredRoles,columns:l.columns},null,8,["roles","columns"])])])):(0,i.kq)("",!0)])}const Gb={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},Jb={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Xb={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},tk=(0,i._)("th",{scope:"col",class:"tw-p-4"},[(0,i._)("div",{class:"tw-flex tw-items-center"},[(0,i._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,i._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),ek={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},sk=(0,i._)("td",{class:"tw-w-4 tw-p-4"},[(0,i._)("div",{class:"tw-flex tw-items-center"},[(0,i._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,i._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),ak={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},ik={class:"tw-px-6 tw-py-4 tw-uppercase"},rk={class:"tw-px-6 tw-py-4"},lk={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},ok={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},nk={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},dk=(0,i._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),wk=["value"],ck={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},uk={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},pk={class:"tw-text-white"};function mk(t,e,s,r,l,o){const n=(0,i.up)("RolePermissions"),d=(0,i.up)("RoleActions");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Gb,[(0,i._)("table",Jb,[(0,i._)("thead",Xb,[(0,i._)("tr",null,[tk,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.columns,(t=>((0,i.wg)(),(0,i.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,i._)("div",ek,(0,Q.zw)(t.name),1)])))),128))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.items,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[sk,(0,i._)("th",ak,(0,Q.zw)(t.id),1),(0,i._)("td",ik,(0,Q.zw)(t.name),1),(0,i._)("td",rk,[(0,i.Wm)(n,{role:t},null,8,["role"])]),(0,i._)("td",lk,[(0,i.Wm)(d,{role:t},null,8,["role"])])])))),128))])])]),(0,i._)("div",ok,[(0,i._)("div",nk,[dk,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allowedLimit,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,wk)))),128))],512),[[a.bM,l.paginationLimit]])]),(0,i._)("div",ck,[(0,i._)("div",uk,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?s.roles.length:o.nextRange)+" of "+(0,Q.zw)(s.roles.length)+" items ",1),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.pageCount,(t=>((0,i.wg)(),(0,i.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,i.w5)((()=>[(0,i._)("span",pk,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const hk={key:0},gk={class:"tw-flex tw-flex-wrap tw-gap-2"};function fk(t,e,s,a,r,l){const o=(0,i.up)("popup");return["admin","agente","delivery"].includes(s.role.name)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",hk,[t.$can("update_role")?((0,i.wg)(),(0,i.j4)(G.T,{key:0,to:"/users/roles/update/"+s.role.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-pencil-outline")])),_:1})])),_:1},8,["to"])):(0,i.kq)("",!0),t.$can("delete_role")&&"admin"!==s.role.name?((0,i.wg)(),(0,i.j4)(G.T,{key:1,onClick:e[0]||(e[0]=t=>r.showPopupDelete=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this Role?</p> You won't be able to revert this!",loading:r.isLoadingDelete,visible:r.showPopupDelete,onResolved:l.handleResolvedDelete},null,8,["loading","visible","onResolved"]),(0,i.Wm)(o,{noConfirm:!0,type:"info",title:"Permissions",loading:r.isLoadingShow,visible:r.showPopupShow,onResolved:l.handleResolvedShow},{default:(0,i.w5)((()=>[(0,i._)("div",gk,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.permissions,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"tw-py-1 tw-px-2 tw-bg-gray-900/10 tw-text-gray-900 tw-rounded-lg tw-cursor-pointer",key:t},(0,Q.zw)(t),1)))),128))])])),_:1},8,["loading","visible","onResolved"])]))}var vk={props:["rowIndex","prop","role"],name:"roleActions",data(){return{showPopupDelete:!1,showPopupShow:!1,isLoadingDelete:!1,isLoadingShow:!1,permissions:["create_user","delete_user","update_user","show_user"]}},methods:{handleResolvedDelete(t){t?(this.isLoadingDelete=!0,Z.deleteRole(this.role.id).then((t=>{"ROLE_DELETED"==t.data.code&&(this.isLoadingDelete=!1,this.$alert({type:"success",title:"Role Deleted Successfully"})),Z.roles().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("user/setRoles",t.data.data.roles)})).catch(this.$handleApiError)})).catch(this.$handleApiError).finally((()=>{this.isLoadingDelete=!1,this.showPopupDelete=!1}))):this.showPopupDelete=!1},handleResolvedShow(t){t?console.log(t):this.showPopupShow=!1}}};const yk=(0,d.Z)(vk,[["render",fk]]);var _k=yk;const xk={class:"tw-h-100 tw-flex tw-items-center tw-max-w-[750px] tw-flex-wrap tw-gap-2"},bk=["title"];function kk(t,e,s,a,r,l){return(0,i.wg)(),(0,i.iD)("div",xk,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.permissions,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"tw-py-0 tw-px-2 tw-text-xs tw-h-5 tw-bg-gray-900/10 tw-text-gray-900 tw-rounded-lg",title:t.description,key:t.name},(0,Q.zw)(t.name),9,bk)))),128))])}var Ck={props:["role"],name:"rolePermissions",data(){return{}},computed:{permissions(){return this.role.permissions.map((t=>t))}}};const Dk=(0,d.Z)(Ck,[["render",kk]]);var Sk=Dk,zk={props:["columns","roles"],components:{RoleActions:_k,RolePermissions:Sk},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.roles.length/this.paginationLimit)},items(){return this.roles.slice(this.prevRange,this.nextRange)}},methods:{}};const Uk=(0,d.Z)(zk,[["render",mk]]);var Lk=Uk,Pk={components:{RolesTable:Lk},data(){return{localUrl:R,search:"",columns:[{prop:"id",name:"#"},{prop:"name",name:"Role Name"},{prop:"permissions",name:"Permissions"},{name:"Acions",prop:"roles"}]}},computed:{roles(){return this.$store.getters["user/roles"]},fetched(){return this.$store.getters["user/fetchedRoles"]},filteredRoles(){return this.roles.filter((t=>{const e=t.permissions.map((t=>t.name));return!!(""===this.search||t.name.toLocaleLowerCase().includes(this.search.toLocaleLowerCase())||e.includes(this.search.toLocaleLowerCase())||e.some((t=>t.toLowerCase().includes(this.search.toLocaleLowerCase()))))}))}},methods:{getRoles(){return Z.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.$store.dispatch("user/setFetchedRoles",!0)}})).catch(this.$handleApiError)}},mounted(){this.rolesFetched||this.getRoles()}};const Ak=(0,d.Z)(Pk,[["render",Qb]]);var Wk=Ak;const $k=(0,i._)("div",{class:"mb-5"},[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Update Role "),(0,i._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Update existing role")],-1),Ek={key:0},Ok={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Tk={class:"md:tw-w-1/2 tw-w-full"},Vk=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Role Name ",-1),qk={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Rk={class:"mb-3 text-body-2 tw-text-zinc-700"},Fk={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-text-xs"},Ik={class:"tw-flex tw-flex-wrap tw-gap-2 tw-mt-5"},jk=["onClick"],Nk={key:0},Mk={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Hk=(0,i._)("span",{class:"text-white text-capitalize"},"Cancel",-1),Yk=(0,i._)("span",{class:"text-white text-capitalize"},"Update",-1);function Kk(t,e,s,a,r,l){const o=(0,i.up)("LoadingAnimation");return(0,i.wg)(),(0,i.iD)("div",null,[$k,r.isFormReady?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",Ek,[(0,i.Wm)(o)])),r.isFormReady?((0,i.wg)(),(0,i.iD)("div",Ok,[(0,i._)("div",null,[(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{cols:"12",md:"12"},{default:(0,i.w5)((()=>[(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",md:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",Tk,[Vk,(0,i.Wm)(tt.hw,{error:!r.formStatus.name.valid,"hide-details":!0,onKeyup:e[0]||(e[0]=t=>l.resetError("firstname")),modelValue:r.name,"onUpdate:modelValue":e[1]||(e[1]=t=>r.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",qk,(0,Q.zw)(r.formStatus.name.message),1)])])),_:1}),(0,i.Wm)(oa.D,{cols:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i._)("div",Rk,[(0,i.Uk)(" Select Permissions: "),(0,i._)("div",Fk,(0,Q.zw)(r.formStatus.permissions.message),1)]),(0,i._)("div",Ik,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.permissions,(t=>((0,i.wg)(),(0,i.iD)("div",{onClick:e=>l.handleClick(t),class:(0,Q.C_)([{"!tw-bg-orange-500 !tw-text-white":r.selectedPermissions.includes(t)},"tw-py-1 tw-px-2 tw-bg-gray-900/10 tw-text-gray-900 tw-rounded-lg tw-cursor-pointer"]),key:t},(0,Q.zw)(t),11,jk)))),128))])])])),_:1})])),_:1})])),_:1}),(0,i.Wm)(oa.D,{cols:"12",md:"6"},{default:(0,i.w5)((()=>[r.show?((0,i.wg)(),(0,i.iD)("div",Nk,(0,Q.zw)(r.selectedPermissions),1)):(0,i.kq)("",!0)])),_:1})])),_:1})]),(0,i._)("div",Mk,[(0,i.Wm)(G.T,{link:"",to:"/users/roles",color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,i.w5)((()=>[Hk])),_:1}),(0,i.Wm)(G.T,{onClick:l.update,loading:r.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,i.w5)((()=>[Yk])),_:1},8,["onClick","loading"])])])):(0,i.kq)("",!0)])}var Zk={data(){return{localUrl:R,isFormReady:!1,isLoading:!1,show:!1,formStatus:{name:{valid:!0,message:""},permissions:{valid:!0,message:""}},name:"",permissions:[],selectedPermissions:[]}},computed:{roles(){return this.$store.getters["user/roles"]}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,Z.updateRole(this.$route.params.id,{name:this.name,permissions:this.selectedPermissions}).then((t=>{"ROLE_UPDATED"===t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.getRoles())})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;if("VALIDATION_ERROR"==e?.code)for(let s in e.error)this.formStatus[s]={valid:!1,message:e.error[s][0]}})).finally((()=>{this.isLoading=!1}))},handleClick(t){this.selectedPermissions.includes(t)?this.selectedPermissions=this.selectedPermissions.filter((e=>e!==t)):this.selectedPermissions.push(t)},addPermissions(t){return t},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=bt(this.name,"Name"),this.formStatus.permissions=St(this.selectedPermissions),this.formStatus.name.valid&&this.formStatus.permissions.valid},getRole(){Z.getRole(this.$route.params.id).then((t=>{this.name=t.data.data.role,this.selectedPermissions=[...t.data.data.permission],this.isFormReady=!0}))},getRoles(){Z.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.isFormReady=!0}})).catch(this.$handleApiError)}},async mounted(){await this.getRole(),this.permissions=this.$store.getters["user/permissions"]}};const Bk=(0,d.Z)(Zk,[["render",Kk]]);var Qk=Bk,Gk={name:"users",path:"/users",component:ia,meta:{module:"user"},children:[{name:"user/list",path:"",component:X_,meta:{module:"user",subModule:"user/list",title:"Users List",gate:"show_all_users"}},{name:"user/add",path:"add",component:Rx,meta:{module:"user",subModule:"user/add",title:"Add User",gate:"create_user"}},{name:"user/update",path:"update/:id",component:bb,meta:{module:"user",subModule:"user/update",title:"Update User",gate:"update_user"}},{name:"user/addRole",path:"addRole",component:Fb,meta:{module:"user",subModule:"user/addRole",title:"Add Role",gate:"create_role"}},{name:"user/roles",path:"roles",component:Wk,meta:{module:"user",subModule:"user/roles",title:"Roles List",gate:"show_all_roles"}},{name:"user/updateRole",path:"roles/update/:id",component:Qk,meta:{module:"user",subModule:"user/updateRole",title:"Update Role",gate:"view_role"}}]};const Jk={class:"mb-5 tw-flex tw-justify-between tw-items-center"},Xk=(0,i._)("div",null,[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Sales List "),(0,i._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your sales")],-1),tC={key:0},eC=(0,i._)("span",{class:"text-white"}," Add Sale ",-1),sC={key:0},aC={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},iC={class:"mb-5 tw-flex"},rC={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},lC={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},oC={class:""};function nC(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation"),d=(0,i.up)("SalesAnalytics"),w=(0,i.up)("IndexFilter"),c=(0,i.up)("SalesTable"),u=(0,i.up)("AddSale"),p=(0,i.up)("NewAddSale");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Jk,[Xk,t.$can("create_sale")&&o.fetched?((0,i.wg)(),(0,i.iD)("div",tC,[(0,i.Wm)(G.T,{color:"primary-color",onClick:e[0]||(e[0]=t=>l.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),eC])),_:1})])):(0,i.kq)("",!0)]),o.fetched?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",sC,[(0,i.Wm)(n)])),o.fetched?((0,i.wg)(),(0,i.iD)("div",aC,[(0,i.Wm)(d,{sales:o.sales},null,8,["sales"]),(0,i._)("div",iC,[(0,i.Wm)(G.T,{onClick:e[1]||(e[1]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,i._)("div",rC,[(0,i.Wm)(Zt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by client, phone..."},null,512),[[a.nr,l.search]])]),(0,i._)("div",lC,[(0,i.Wm)(X.t,{class:"tw-text-gray-500",size:"small"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-pound")])),_:1}),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.searchId=t),type:"number",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search By ID"},null,512),[[a.nr,l.searchId]])]),(0,i.Wm)(es.C),(0,i.Wm)(G.T,{onClick:o.handleReset,icon:"",rounded:"lg",variant:"flat",size:"small",disabled:l.isButtonDisabled,loading:l.isLoadingReset,color:"red",class:"text-white tw-mr-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white",icon:"mdi-restart-alert",size:"xx-large"})])),_:1},8,["onClick","disabled","loading"]),(0,i.Wm)(G.T,{onClick:o.getSales,icon:"",rounded:"lg",variant:"flat",size:"small",color:"blue",class:"text-white tw-mr-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white",icon:"mdi-autorenew",size:"xx-large"})])),_:1},8,["onClick"])]),(0,i._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[1000px] !tw-overflow-visible":l.showFilters}])},[(0,i.Wm)(w,{sales:o.sales,search:l.search,"search-id":l.searchId,filtered:l.filteredSales,"onUpdate:filtered":e[4]||(e[4]=t=>l.filteredSales=t),selected:o.selectedSales},null,8,["sales","search","search-id","filtered","selected"])],2),(0,i._)("div",oC,[((0,i.wg)(),(0,i.j4)(c,{onSelected:o.handleSelected,"selected-reset":l.selected,key:l.filteredSales.length,sales:l.filteredSales},null,8,["onSelected","selected-reset","sales"]))]),(0,i.Wm)(u,{onCancel:e[5]||(e[5]=t=>l.showPopup=!1),visible:!1}),(0,i.Wm)(p,{onCancel:e[6]||(e[6]=t=>l.showPopup=!1),visible:l.showPopup,"onUpdate:visible":e[7]||(e[7]=t=>l.showPopup=t)},null,8,["visible"])])):(0,i.kq)("",!0)])}const dC={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},wC={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},cC=(0,i._)("h1",{class:"tw-text-lg"},"Create Order",-1),uC={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},pC={class:"md:tw-col-span-6 tw-col-span-12"},mC=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),hC={class:"md:tw-col-span-6 tw-col-span-12"},gC=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),fC={class:"md:tw-col-span-6 tw-col-span-12"},vC=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),yC=["value"],_C={class:"md:tw-col-span-6 tw-col-span-12"},xC=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),bC={class:"md:tw-col-span-12 tw-col-span-12"},kC=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Price",-1),CC={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},DC=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Warehouse",-1),SC=(0,i._)("option",{value:0}," Select ",-1),zC=["value"],UC={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},LC=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Product",-1),PC=(0,i._)("option",{value:0}," Select ",-1),AC=["value"],WC={class:"md:tw-col-span-6 tw-col-span-12"},$C=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variations",-1),EC=(0,i._)("option",{value:0}," Select ",-1),OC=["value"],TC={class:"md:tw-col-span-6 tw-col-span-12"},VC=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),qC={class:"md:tw-col-span-6 tw-col-span-12"},RC={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},FC={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit -tw-rotate-90 tw-scale-75"},IC=(0,i._)("div",{class:"tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),jC={class:"tw-flex tw-flex-col tw-justify-center"},NC={class:"md:tw-col-span-6 tw-col-span-12"},MC={key:0,class:"md:tw-col-span-12 tw-col-span-12"},HC={class:"tw-max-w-full tw-overflow-auto"},YC={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},KC={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},ZC={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},BC={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},QC={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},GC={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},JC={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},XC={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},tD={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},eD=(0,i._)("span",{class:"text-white"}," Cancel ",-1),sD=(0,i._)("span",{class:"text-white"}," Save ",-1);function aD(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation"),d=(0,i.up)("popup-full");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(d,{onCancel:e[12]||(e[12]=e=>t.$emit("cancel")),visible:s.visible},{default:(0,i.w5)((()=>[l.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",dC,[(0,i.Wm)(n)])),l.isLoaded?((0,i.wg)(),(0,i.iD)("div",wC,[cC,(0,i._)("div",uC,[(0,i._)("div",pC,[mC,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.fullname]])]),(0,i._)("div",hC,[gC,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.phone]])]),(0,i._)("div",fC,[vC,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.cities,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,yC)))),128))],512),[[a.bM,l.sale.city]])]),(0,i._)("div",_C,[xC,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>l.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.adresse]])]),(0,i._)("div",bC,[kC,(0,i.wy)((0,i._)("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=t=>l.sale.price=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.price]])]),(0,i._)("div",CC,[DC,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>l.warehouse_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[SC,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.warehouses,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,zC)))),128))],512),[[a.bM,l.warehouse_id]])]),(0,i._)("div",UC,[LC,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>l.product_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[PC,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.filtredProducts,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,AC)))),128))],512),[[a.bM,l.product_id]])]),(0,i._)("div",WC,[$C,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>l.product_variation_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[EC,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.variations,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.size)+" / "+(0,Q.zw)(t.color),9,OC)))),128))],512),[[a.bM,l.product_variation_id]])]),(0,i._)("div",TC,[VC,(0,i.wy)((0,i._)("input",{type:"number","onUpdate:modelValue":e[8]||(e[8]=t=>l.quantity=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.quantity]])]),(0,i._)("div",qC,[(0,i._)("div",RC,[(0,i._)("label",FC,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=t=>l.sale.counts_from_warehouse=t),class:"tw-sr-only tw-peer"},null,512),[[a.e8,l.sale.counts_from_warehouse]]),IC]),(0,i._)("label",jC,[(0,i._)("span",{class:(0,Q.C_)([[l.sale.counts_from_warehouse?"tw-text-orange-500":"tw-text-neutral-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Warehouse",2),(0,i._)("span",{class:(0,Q.C_)([[l.sale.counts_from_warehouse?"tw-text-neutral-500":"tw-text-orange-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Delivery",2)])])]),(0,i._)("div",NC,[(0,i._)("button",{onClick:e[10]||(e[10]=(...t)=>o.addItem&&o.addItem(...t)),class:"tw-block tw-ml-auto tw-py-1 tw-px-4 tw-rounded tw-bg-emerald-500 tw-text-white"}," Add ")]),l.items.length?((0,i.wg)(),(0,i.iD)("div",MC,[(0,i._)("div",HC,[(0,i._)("table",YC,[(0,i._)("thead",KC,[(0,i._)("tr",null,[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(["product","variation","quantity","warehouse","actions"],(t=>(0,i._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,i._)("div",ZC,(0,Q.zw)(t),1)],2))),64))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.items,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,i._)("th",BC,(0,Q.zw)(t.product.name),1),(0,i._)("th",QC,(0,Q.zw)(t.product_variation.size)+" / "+(0,Q.zw)(t.product_variation.color),1),(0,i._)("th",GC,(0,Q.zw)(t.quantity),1),(0,i._)("th",JC,(0,Q.zw)(t.product_variation.warehouse.name),1),(0,i._)("th",XC,[(0,i._)("div",null,[(0,i.Wm)(G.T,{onClick:e=>o.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])])])])):(0,i.kq)("",!0)]),(0,i._)("div",tD,[(0,i.Wm)(G.T,{onClick:e[11]||(e[11]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[eD])),_:1}),(0,i.Wm)(G.T,{loading:l.isLoading,onClick:o.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[sD])),_:1},8,["loading","onClick"])])])):(0,i.kq)("",!0)])),_:1},8,["visible"])])}var iD={props:["visible"],data(){return{isLoading:!1,isLoaded:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],sale:{fullname:"",phone:"",city:"",adresse:"",price:0,counts_from_warehouse:!0}}},watch:{product_id(){this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0}},computed:{products(){return this.$store.getters["product/products"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,s)=>e.indexOf(t.id)===s))},filtredProducts(){return 0==this.warehouse_id?[]:this.products.filter((t=>t.variations.some((t=>t.warehouse_id==this.warehouse_id))))},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city}},methods:{create(){if(!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;this.isLoading=!0;const t={fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,orderItems:this.items,counts_from_warehouse:!0};ys.create(t).then((t=>{"SALE_ADDED"==t.data.code&&(this.$emit("cancel"),this.$alert({type:"success",title:"Sale created successfully"}),this.$store.dispatch("sale/add",t.data.data.sale))}),this.$handleApiError).finally((()=>this.isLoading=!1))},deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},addItem(){if([this.warehouse_id,this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),s={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:0};this.items.push(s),this.product_id=0,this.product_variation_id=0,this.item_id+=1},getProducts(){ea.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("product/setProducts",t.data.data.products)}),(t=>{this.$handleApiError(t)})).finally((()=>this.isLoaded=!0))}},mounted(){this.getProducts(),this.sale.city=this.cities[0].name||1}};const rD=(0,d.Z)(iD,[["render",aD]]);var lD=rD;const oD={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},nD={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[950px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},dD=(0,i._)("h1",{class:"tw-text-lg"},"Update Order",-1),wD={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},cD={class:"md:tw-col-span-6 tw-col-span-12"},uD=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),pD={class:"md:tw-col-span-6 tw-col-span-12"},mD=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),hD={class:"md:tw-col-span-6 tw-col-span-12"},gD=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),fD=["value"],vD=["value"],yD={class:"md:tw-col-span-6 tw-col-span-12"},_D=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),xD={class:"md:tw-col-span-12 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},bD=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Confirmation",-1),kD={class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},CD={class:"tw-col-span-12"},DD=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note:",-1),SD={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},zD={class:"tw-col-span-12 md:tw-col-span-4"},UD=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Date:",-1),LD={class:"tw-col-span-12 md:tw-col-span-8"},PD=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Note:",-1),AD={class:"md:tw-col-span-6 tw-col-span-12"},WD=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Affectation",-1),$D={class:"md:tw-col-span-6 tw-col-span-12"},ED=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Upsell",-1),OD=["value"],TD={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-4"},VD={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},qD={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit -tw-rotate-90 tw-scale-75"},RD=(0,i._)("div",{class:"tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),FD={class:"tw-flex tw-flex-col tw-justify-center"},ID=(0,i._)("p",{class:"tw-col-span-12 tw-mt-5 tw-mb-2"},"Order Items",-1),jD={key:1,class:"tw-col-span-12 tw-rounded tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},ND={key:2,class:"md:tw-col-span-12 tw-col-span-12"},MD={class:"tw-max-w-full tw-overflow-auto"},HD={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},YD={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},KD={class:"tw-mx-auto tw-w-[50px] tw-h-[35px] tw-shadow tw-shadow-gray-200 tw-rounded tw-overflow-hidden tw-cursor-pointer"},ZD=["src"],BD={scope:"row",class:"tw-pr-6 tw-py-2 tw-font-medium tw-text-gray-900"},QD=["onUpdate:modelValue"],GD=(0,i._)("option",{value:0},"Select",-1),JD=["value"],XD={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},tS=["disabled","onUpdate:modelValue"],eS=(0,i._)("option",{value:0},"Select",-1),sS=["value"],aS={key:0},iS={key:1},rS={key:2},lS={key:3},oS=["value"],nS={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},dS={class:"md:tw-col-span-6 tw-col-span-12"},wS=["onUpdate:modelValue"],cS={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},uS={key:0},pS={key:1,class:"md:tw-col-span-6 tw-col-span-12"},mS=["onUpdate:modelValue"],hS={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},gS={class:"tw-w-full tw-col-span-12 tw-flex tw-justify-end tw-mt-3"},fS=(0,i._)("span",{class:"!tw-text-sm !tw-capitalize"},"Add",-1),vS={class:"md:tw-col-span-12 tw-col-span-12"},yS={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},_S=(0,i._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),xS={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},bS=(0,i._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-mb-2 tw-whitespace-nowrap"},"Price: ",-1),kS={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},CS=(0,i._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),DS={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},SS=(0,i._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-whitespace-nowrap"},"Total Price: ",-1),zS={class:"tw-text-xl tw-text-green-500 tw-font-bold tw-px-2 tw-py-1 tw-rounded tw-bg-green-100"},US={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},LS=(0,i._)("span",{class:"text-white"}," Cancel ",-1),PS=(0,i._)("span",{class:"text-white"}," Create ",-1);function AS(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation"),d=(0,i.up)("AddOrderConfirmation"),w=(0,i.up)("AddOrderAffectation"),c=(0,i.up)("ProductOffers"),u=(0,i.up)("popup-full");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(u,{onCancel:e[14]||(e[14]=e=>t.$emit("update:visible",!1)),visible:s.visible},{default:(0,i.w5)((()=>[o.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",oD,[(0,i.Wm)(n)])),o.isLoaded?((0,i.wg)(),(0,i.iD)("div",nD,[dD,(0,i._)("div",wD,[(0,i._)("div",cD,[uD,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.fullname]])]),(0,i._)("div",pD,[mD,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.phone]])]),(0,i._)("div",hD,[gD,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[(0,i._)("option",{disabled:"",value:l.sale.city},(0,Q.zw)(l.sale.city),9,fD),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.cities,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,vD)))),128))],512),[[a.bM,l.sale.city]])]),(0,i._)("div",yD,[_D,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>l.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.adresse]])]),(0,i._)("div",xD,[bD,(0,i.Wm)(d,{order:l.sale,id:l.sale.id,confirmation:l.sale.confirmation,"onUpdate:confirmation":e[4]||(e[4]=t=>l.sale.confirmation=t),onConfirmed:e[5]||(e[5]=t=>l.sale.note=t),onReported:o.handleReported,onChange:o.handleConfirmationChange},null,8,["order","id","confirmation","onReported","onChange"]),(0,i._)("div",kD,[(0,i._)("div",CD,[DD,(0,i.wy)((0,i._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[6]||(e[6]=t=>l.sale.note=t)},null,512),[[a.nr,l.sale.note]])])]),"reporter"==l.sale.confirmation&&l.sale.reported_agente_date?((0,i.wg)(),(0,i.iD)("div",SD,[(0,i._)("div",zD,[UD,(0,i._)("div",null,(0,Q.zw)(l.sale.reported_agente_date.split("T")[0]),1)]),(0,i._)("div",LD,[PD,(0,i.wy)((0,i._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[7]||(e[7]=t=>l.sale.reported_agente_note=t)},null,512),[[a.nr,l.sale.reported_agente_note]])])])):(0,i.kq)("",!0)]),(0,i._)("div",AD,[WD,(0,i.Wm)(w,{"product-ids":o.product_ids,items:l.items,"onUpdate:items":e[8]||(e[8]=t=>l.items=t),order:l.sale,confirmation:l.sale.confirmation,affectation:l.sale.affectation,"onUpdate:affectation":e[9]||(e[9]=t=>l.sale.affectation=t),id:l.sale.id},null,8,["product-ids","items","order","confirmation","affectation","id"])]),(0,i._)("div",$D,[ED,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>l.sale.upsell=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.upsells,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.value,key:t.id},(0,Q.zw)(t.name),9,OD)))),128))],512),[[a.bM,l.sale.upsell]])]),(0,i.kq)("",!0),(0,i._)("div",TD,[(0,i._)("div",VD,[(0,i._)("label",qD,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=t=>l.sale.counts_from_warehouse=t),class:"tw-sr-only tw-peer"},null,512),[[a.e8,l.sale.counts_from_warehouse]]),RD]),(0,i._)("label",FD,[(0,i._)("span",{class:(0,Q.C_)([[l.sale.counts_from_warehouse?"tw-text-orange-500":"tw-text-neutral-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Warehouse",2),(0,i._)("span",{class:(0,Q.C_)([[l.sale.counts_from_warehouse?"tw-text-neutral-500":"tw-text-orange-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Delivery",2)])])]),ID,l.items.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",jD," No Order items ")),l.items.length?((0,i.wg)(),(0,i.iD)("div",ND,[(0,i._)("div",MD,[((0,i.wg)(),(0,i.iD)("table",{key:l.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,i._)("thead",HD,[(0,i._)("tr",null,[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,i._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,i._)("div",YD,(0,Q.zw)(t),1)],2))),64))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.items,((t,e)=>((0,i.wg)(),(0,i.iD)("tr",{key:t.product.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[((0,i.wg)(),(0,i.iD)("th",{scope:"row",class:"tw-px-2 tw-py-2",key:t.product.id},[(0,i._)("div",KD,[o.product_images[e]?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tw-w-full tw-h-full tw-object-contain",src:l.serverUrl+"storage/"+o.product_images[e]},null,8,ZD)):(0,i.kq)("",!0)])])),(0,i._)("th",BD,[(0,i._)("div",null,[(0,i._)("div",null,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e=>t.product.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[GD,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.filtredProducts,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,JD)))),128))],8,QD),[[a.bM,t.product.id]])])])]),(0,i._)("th",XD,[(0,i._)("div",null,[0!=t.product.id?(0,i.wy)(((0,i.wg)(),(0,i.iD)("select",{key:0,disabled:1==o.getVariations(t.product)?.variations?.length,"onUpdate:modelValue":e=>t.product_variation.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[eS,o.getVariations(t.product)?.variations?.length>1?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(o.getVariations(t.product)?.variations,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},[t.size||t.color?t.size&&"-"!=t.size&&t.color&&"-"!=t.color?((0,i.wg)(),(0,i.iD)("p",iS,(0,Q.zw)(t.size)+" / "+(0,Q.zw)(t.color),1)):t.size&&"-"!=t.size?((0,i.wg)(),(0,i.iD)("p",rS,(0,Q.zw)(t.size),1)):t.color?((0,i.wg)(),(0,i.iD)("p",lS,(0,Q.zw)(t.color),1)):(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",aS,"-"))],8,sS)))),128)):((0,i.wg)(),(0,i.iD)("option",{key:1,value:o.getVariations(t.product)?.variations[0]?.id}," Default ",8,oS))],8,tS)),[[a.bM,t.product_variation.id]]):(0,i.kq)("",!0)])]),(0,i._)("th",nS,[(0,i._)("div",dS,[(0,i.wy)((0,i._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,wS),[[a.nr,t.quantity]])])]),(0,i._)("th",cS,[(0,i._)("div",null,[null==t.price?((0,i.wg)(),(0,i.iD)("div",uS," - ")):((0,i.wg)(),(0,i.iD)("div",pS,[(0,i.wy)((0,i._)("input",{type:"number","onUpdate:modelValue":e=>t.price=e,placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,mS),[[a.nr,t.price]])]))])]),(0,i._)("th",hS,[(0,i._)("div",null,[(0,i.Wm)(G.T,{onClick:e=>o.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])]))])])):(0,i.kq)("",!0),(0,i._)("div",gS,[(0,i._)("div",null,[(0,i.Wm)(G.T,{onClick:o.addNewRow,class:"mr-2 !tw-px-1 !tw-py-1 !tw-pr-2 tw-flex tw-items-center tw-gap-2","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-plus")])),_:1}),fS])),_:1},8,["onClick"])])]),(0,i._)("div",vS,[(0,i.Wm)(c,{"product-ids":o.product_ids},null,8,["product-ids"])]),(0,i._)("div",yS,[_S,(0,i._)("div",xS,[bS,(0,i.wy)((0,i._)("input",{type:"number","onUpdate:modelValue":e[13]||(e[13]=t=>l.sale.price=t),class:"tw-py-1 tw-max-w-[100px] tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.price]])])]),(0,i._)("div",kS,[CS,(0,i._)("div",DS,[SS,(0,i._)("div",zS,(0,Q.zw)(l.currency)+" "+(0,Q.zw)(o.total_price),1)])])]),(0,i._)("div",US,[(0,i.Wm)(G.T,{onClick:o.handleCancel,color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[LS])),_:1},8,["onClick"]),(0,i.Wm)(G.T,{loading:l.isLoading,onClick:o.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[PS])),_:1},8,["loading","onClick"])])])):(0,i.kq)("",!0)])),_:1},8,["visible"])])}var WS={components:{AddOrderConfirmation:kc,AddOrderAffectation:Ac,ProductOffers:Kc},props:["visible","order"],data(){return{upsells:An,serverUrl:F,currency:I,isLoading:!1,isAddItem:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],reported_date:null,price:0,sale:{fullname:"",phone:"",city:"",adresse:"",price:0,upsell:null,confirmation:null,counts_from_warehouse:!0}}},watch:{product_id(){this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0},"sale.confirmation":{deep:!0,handler(t){"confirmer"!=t&&(this.sale.affectation=null,this.sale.delivery=null)}},product_ids:{deep:!0,handler(t,e){this.items.map(((s,a)=>{if(0==s.product.id)return s;const i=this.getVariations(s.product)?.variations;return e[a]==t[s]||i.some((t=>t.id==s.product_variation.id))||(s.product_variation={id:0},s.product_variation_id=0),1==i?.length&&(s.product_variation=i[0],s.product_variation_id=i[0].id),s}))}}},computed:{products(){return this.$store.getters["product/products"]},product_images(){return this.items.map((t=>0==t.product.id?null:this.products.find((e=>e.id==t.product.id))?.image))},product_ids(){return this.items.map((t=>t.product.id))},isLoaded(){return this.$store.getters["product/fetched"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,s)=>e.indexOf(t.id)===s))},filtredProducts(){return this.products},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},selectedProduct(){return this.products.find((t=>t.id==this.product_id))},total_price:{get(){const t=this.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(this.sale.price?this.sale.price:0)+parseFloat(t)}},isItemsValid(){if(0==this.items.length)return!1;const t=this.items.some((t=>0==t.product.id||0==t.product_variation_id||0==t.quantity));return!t},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city}},methods:{deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},handleConfirmationChange(){"confirmer"!=this.sale.confirmation&&(this.sale.affectation=null)},addNewRow(){const t={id:this.item_id,product_id:0,product_ref:null,product:{id:0},product_variation:{id:0},product_variation_id:0,quantity:0,price:0};this.items.push(t)},getVariations(t){return this.products.find((e=>e.id==t.id))},formatItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const s=e.variations.find((e=>e.id==t.product_variation.id));return s?{...t,product:e,product_id:e.id,product_variation:s,product_variation_id:s.id,product_ref:e.ref}:t}));return this.items=t,t},addItem(){if([this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),s={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:this.price};this.items.push(s),this.product_id=0,this.product_variation_id=0,this.price=0,this.item_id+=1},create(){if(this.formatItems(),!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;if("annuler"==this.sale.confirmation&&!this.sale.note)return this.$alert({type:"warning",title:"Add Cancellation note."}),!1;if(!this.isItemsValid)return this.$alert({type:"warning",title:"Order Items are not valid"}),!1;this.isLoading=!0;const t={fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,upsell:this.sale.upsell,counts_from_warehouse:this.sale.counts_from_warehouse,orderItems:this.items,confirmation:this.sale.confirmation,note:this.sale.note,affectation:this.sale.affectation,reported_agente_note:this.sale.reported_agente_note,reported_agente_date:this.sale.reported_agente_date};this.isLoading=!0,ys.create(t).then((t=>{"SALE_ADDED"==t.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"New Order Added"}),this.$store.dispatch("sale/add",t.data.data.sale),this.$emit("update:visible",!1))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},handleCancel(){this.$emit("update:visible",!1)},handleReported(t){this.sale.reported_agente_note=t.reported_agente_note,this.sale.reported_agente_date=t.reported_agente_date},checkVariant(t,e){const s=this.products.find((e=>e.id==t));if(!s)return{exists:!1};let a=s.variations.find((t=>t.id==e));return a||(a=s.variations.length>0?s.variations[0]:null),{exists:!0,variation:a}},getProducts(){return ea.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){}};const $S=(0,d.Z)(WS,[["render",AS]]);var ES=$S;const OS={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},TS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},VS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},qS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},RS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},FS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},IS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},jS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},NS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"};function MS(t,e,s,a,r,l){const o=(0,i.up)("DateFilter"),n=(0,i.up)("UpsellFilter"),d=(0,i.up)("ConfirmationFilter"),w=(0,i.up)("AffectationFilter"),c=(0,i.up)("AgenteFilter"),u=(0,i.up)("DeliveryFilter"),p=(0,i.up)("ProductFilter"),m=(0,i.up)("ExcelExport");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",OS,[(0,i._)("div",TS,[(0,i.Wm)(o,{filter:r.config.dateFilter,"onUpdate:filter":e[0]||(e[0]=t=>r.config.dateFilter=t)},null,8,["filter"])]),(0,i._)("div",VS,[(0,i.Wm)(n,{filter:r.config.upsellFilter,"onUpdate:filter":e[1]||(e[1]=t=>r.config.upsellFilter=t)},null,8,["filter"])]),(0,i._)("div",qS,[(0,i.Wm)(d,{filter:r.config.confirmationFilter,"onUpdate:filter":e[2]||(e[2]=t=>r.config.confirmationFilter=t)},null,8,["filter"])]),(0,i._)("div",RS,[(0,i.Wm)(w,{filter:r.config.affectationFilter,"onUpdate:filter":e[3]||(e[3]=t=>r.config.affectationFilter=t)},null,8,["filter"])]),(0,i._)("div",FS,[(0,i.Wm)(c,{filter:r.config.agenteFilter,"onUpdate:filter":e[4]||(e[4]=t=>r.config.agenteFilter=t)},null,8,["filter"])]),(0,i._)("div",IS,[(0,i.Wm)(u,{filter:r.config.deliveryFilter,"onUpdate:filter":e[5]||(e[5]=t=>r.config.deliveryFilter=t)},null,8,["filter"])]),(0,i._)("div",jS,[(0,i.Wm)(p,{filter:r.config.productFilter,"onUpdate:filter":e[6]||(e[6]=t=>r.config.productFilter=t)},null,8,["filter"])]),(0,i._)("div",NS,[(0,i.Wm)(m,{selected:s.selected,filtered:s.filtered,sales:s.sales},null,8,["selected","filtered","sales"])])])])}const HS=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),YS=["onClick"];function KS(t,e,s,a,r,l){const o=(0,i.up)("VueDatePicker");return(0,i.wg)(),(0,i.iD)("div",null,[HS,(0,i.Wm)(o,{modelValue:r.date,"onUpdate:modelValue":[e[0]||(e[0]=t=>r.date=t),l.onDateRangePicked],onCleared:l.cleared,format:r.dateFilterFormat,range:"","preset-ranges":r.presetRanges},{yearly:(0,i.w5)((({label:t,range:e,presetDateRange:s})=>[(0,i._)("span",{onClick:t=>s(e)},(0,Q.zw)(t),9,YS)])),_:1},8,["modelValue","onCleared","onUpdate:modelValue","format","preset-ranges"])])}var ZS={data(){return{date:["",""],dateFilterFormat:"yyyy-MM-dd",formattedStartDate:"",formattedEndDate:"",presetRanges:[{label:"Today",range:[new Date,new Date]},{label:"Yesterday",range:[(0,Ar.Z)(new Date,1),(0,Ar.Z)(new Date,1)]},{label:"This month",range:[(0,Wr.Z)(new Date),(0,$r.Z)(new Date)]},{label:"Last month",range:[(0,Wr.Z)((0,Er.Z)(new Date,1)),(0,$r.Z)((0,Er.Z)(new Date,1))]},{label:"This year",range:[(0,Or.Z)(new Date),(0,Tr.Z)(new Date)]}]}},watch:{date(){this.$emit("update:filter",[this.formattedStartDate,this.formattedEndDate])}},methods:{onDateRangePicked(t){t?(this.formattedStartDate=t[0],this.formattedEndDate=t[1]):(this.formattedStartDate=null,this.formattedEndDate=null)},cleared(){this.date=["",""]}}};const BS=(0,d.Z)(ZS,[["render",KS]]);var QS=BS;const GS=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Upsell",-1),JS={class:"tw-relative"},XS=(0,i._)("option",{value:"all"},"Select",-1),tz=(0,i._)("option",{value:"oui"},"Oui",-1),ez=(0,i._)("option",{value:"non"},"Non",-1),sz=[XS,tz,ez];function az(t,e,s,r,l,o){return(0,i.wg)(),(0,i.iD)("div",null,[GS,(0,i._)("div",JS,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.value=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},sz,512),[[a.bM,l.value]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])])}var iz={data(){return{value:"all"}},watch:{value(t){this.$emit("update:filter",t)}}};const rz=(0,d.Z)(iz,[["render",az]]);var lz=rz;const oz=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Delivery",-1),nz={class:"tw-relative"},dz=["value"];function wz(t,e,s,r,l,o){return(0,i.wg)(),(0,i.iD)("div",null,[oz,(0,i._)("div",nz,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.deliveryFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.deliveryStatus,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.value?t.value:"all",key:t.id},(0,Q.zw)(t.value?t.name:"Select"),9,dz)))),128))],512),[[a.bM,l.deliveryFilter]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])])}var cz={props:["filter"],data(){return{deliveryFilter:"all",deliveryStatus:Wn}},watch:{deliveryFilter(t){this.$emit("update:filter",t)}}};const uz=(0,d.Z)(cz,[["render",wz]]);var pz=uz;const mz=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Confirmation",-1),hz={class:"tw-relative"},gz=(0,i._)("option",{value:"all"}," Select ",-1),fz=["value"];function vz(t,e,s,r,l,o){return(0,i.wg)(),(0,i.iD)("div",null,[mz,(0,i._)("div",hz,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.confirmationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[gz,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.confirmations,(t=>((0,i.wg)(),(0,i.iD)("option",{key:t.id,value:t.value},(0,Q.zw)(t.name),9,fz)))),128))],512),[[a.bM,l.confirmationFilter]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])])}var yz={props:["filter"],data(){return{confirmationFilter:"all",confirmations:Ln}},watch:{confirmationFilter(t){this.$emit("update:filter",t)}}};const _z=(0,d.Z)(yz,[["render",vz]]);var xz=_z;const bz=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Affect",-1),kz={class:"tw-relative"},Cz=(0,i._)("option",{value:"all"},"Select",-1),Dz=(0,i._)("option",{value:null},"Without delivery",-1),Sz=["value"];function zz(t,e,s,r,l,o){return(0,i.wg)(),(0,i.iD)("div",null,[bz,(0,i._)("div",kz,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.affectationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[Cz,Dz,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.deliveries,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,Sz)))),128))],512),[[a.bM,l.affectationFilter]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])])}var Uz={props:["filter"],data(){return{affectationFilter:"all"}},computed:{users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>3==t.role.id))}},watch:{affectationFilter(t){this.$emit("update:filter",t)}}};const Lz=(0,d.Z)(Uz,[["render",zz]]);var Pz=Lz;const Az=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Agente",-1),Wz={class:"tw-relative"},$z=(0,i._)("option",{value:"all"},"Select",-1),Ez=(0,i._)("option",{value:null},"Without agente",-1),Oz=["value"];function Tz(t,e,s,r,l,o){return(0,i.wg)(),(0,i.iD)("div",null,[Az,(0,i._)("div",Wz,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.agenteFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[$z,Ez,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.agentes,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,Oz)))),128))],512),[[a.bM,l.agenteFilter]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])])}var Vz={props:["filter"],data(){return{agenteFilter:"all"}},computed:{users(){return this.$store.getters["user/users"]},agentes(){return this.users.filter((t=>2==t.role.id))}},watch:{agenteFilter(t){this.$emit("update:filter",t)}}};const qz=(0,d.Z)(Vz,[["render",Tz]]);var Rz=qz;const Fz=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Product",-1),Iz={key:0},jz={key:1,class:"tw-relative"},Nz=(0,i._)("option",{value:"all"},"Select",-1),Mz=["value"];function Hz(t,e,s,r,l,o){return(0,i.wg)(),(0,i.iD)("div",null,[Fz,o.fetched?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",Iz,[(0,i._)("div",null,[(0,i.Wm)(X.t,{class:"tw-text-orange-500 tw-animate-spin tw-text-lg tw-"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-loading")])),_:1})])])),o.fetched?((0,i.wg)(),(0,i.iD)("div",jz,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.productFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[Nz,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.products,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,Mz)))),128))],512),[[a.bM,l.productFilter]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])):(0,i.kq)("",!0)])}var Yz={props:["filter"],data(){return{productFilter:"all"}},computed:{products(){return this.$store.getters["product/products"]},fetched(){return this.$store.getters["product/fetched"]}},watch:{productFilter(t){this.$emit("update:filter",t)}},methods:{getProducts(){ea.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.fetched||this.getProducts(),console.log(this.products)}};const Kz=(0,d.Z)(Yz,[["render",Hz]]);var Zz=Kz;function Bz(t,e,s,{confirmationFilter:a,affectationFilter:i,upsellFilter:r,deliveryFilter:l,agenteFilter:o,dateFilter:n,productFilter:d}){const w=n[0],c=n[1];return t.filter((t=>{const n=new Date(t.created_at);if(""!=s&&s!=t.id)return!1;if("all"!==a&&t.confirmation!==a)return!1;if("all"!==i&&t.affectation!=i)return!1;if("all"!==r&&t.upsell!=r)return!1;if("all"!==l&&t.delivery!=l)return!1;if("all"!==o&&t.agente_id!=o)return!1;const u=((t,e)=>{for(const s in t)if(!["created_at","updated_at","sheets_id","reported_agente_note","reported_agente_note","reported_agente_date","reported_delivery_note","reported_delivery_date"].includes(s)&&String(t[s]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(t,e);if(!u)return!1;if("all"!==d&&!t.items.some((t=>t.product_id==d)))return!1;const p=n.getDate(),m=n.getMonth(),h=n.getFullYear();if(w){const t=w.getDate(),e=w.getMonth(),s=w.getFullYear();if(h<s||h===s&&m<e||h===s&&m===e&&p<t)return!1}if(c){const t=c.getDate(),e=c.getMonth(),s=c.getFullYear();if(h>s||h===s&&m>e||h===s&&m===e&&p>t)return!1}return!0}))}function Qz(t){return{id:1,title:"New",value:t.filter((t=>!t.confirmation||"new"==t.confirmation)).length,pourcentage:(100*t.filter((t=>!t.confirmation||"new"==t.confirmation)).length/t.length).toFixed(2),color:"primary-green",icon:"mdi mdi-new-box"}}function Gz(t){return{id:3,title:"Confirmed",value:t.filter((t=>"confirmer"==t.confirmation)).length,pourcentage:(100*t.filter((t=>"confirmer"==t.confirmation)).length/t.length).toFixed(2),color:"deep-purple-accent-2",icon:"mdi-phone-check"}}function Jz(t){return{id:4,title:"Delivered",value:t.filter((t=>"livrer"==t.delivery)).length,pourcentage:(100*t.filter((t=>"livrer"==t.delivery)).length/t.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"primary-blue",icon:"mdi-account-check-outline"}}function Xz(t){return{id:5,title:"Shipped",value:t.filter((t=>"expidier"==t.delivery)).length,pourcentage:(100*t.filter((t=>"expidier"==t.delivery)).length/t.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"red",icon:"mdi-truck"}}const tU=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Export",-1),eU={class:"tw-relative tw-flex tw-items-center tw-gap-2 tw-justify-between"},sU={class:"tw-relative tw-w-full"},aU=(0,i._)("option",{value:"all"},"All Sales",-1),iU=(0,i._)("option",{value:"selected"},"Selected Sales",-1),rU=(0,i._)("option",{value:"filtered"},"Filtered Sales",-1),lU=[aU,iU,rU];function oU(t,e,s,r,l,o){const n=(0,i.up)("download-csv");return(0,i.wg)(),(0,i.iD)("div",null,[tU,(0,i._)("div",eU,[(0,i._)("div",sU,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.selection=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},lU,512),[[a.bM,l.selection]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})]),(0,i.Wm)(n,{delimiter:";",data:o.toImport},{default:(0,i.w5)((()=>[(0,i.Wm)(G.T,{onClick:o.handleImport,icon:"",rounded:"lg",variant:"flat",size:"x-small",color:"green",class:"text-white tw-mr-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white",icon:"mdi-download",size:"x-large"})])),_:1},8,["onClick"])])),_:1},8,["data"])])])}var nU={props:["selected","filtered","sales"],data(){return{selection:"all"}},computed:{toImport(){const t=this.data.map((t=>({...t}))),e=t.map((t=>{const e=Object.keys(t);return e.forEach((e=>{t[e]=t[e]?t[e]:"NONE"})),t})),s=",",a=e.map((t=>(delete t["factorisation_id"],delete t["note_d"],delete t["cmd"],delete t["product_name"],delete t["is_done"],delete t["factorisation"],delete t["doubles"],delete t["is_double"],delete t["has_doubles"],delete t["double"],{...t,products:t.items.map((t=>`id=${t.id}${s}price=${t.price?t.price:0}${s}name=${t.product?.name}${s}ref=${t.product?.ref}${s}variation_id=${t.product_variation_id}${s}size=${t.product_variation.size?t.product_variation.size:"DEFAULT"}${s}color=${t.product_variation.color?t.product_variation.color:"DEFAULT"}${s}`))})));return a.map((t=>(delete t["items"],t)))},data(){switch(this.selection){case"selected":return this.selected;case"filtered":return this.filtered;default:return this.sales}}},methods:{handleImport(){0==this.data.length&&this.$alert({title:"No Data To Export",type:"warning"})}}};const dU=(0,d.Z)(nU,[["render",oU]]);var wU=dU,cU={components:{DateFilter:QS,UpsellFilter:lz,DeliveryFilter:pz,ConfirmationFilter:xz,AffectationFilter:Pz,AgenteFilter:Rz,ProductFilter:Zz,ExcelExport:wU},props:["sales","filtered","search","searchId","selected"],data(){return{config:{confirmationFilter:"all",affectationFilter:"all",upsellFilter:"all",deliveryFilter:"all",agenteFilter:"all",productFilter:"all",dateFilter:[null,null]}}},computed:{results(){return Bz(this.sales,this.search,this.searchId,this.config)}},watch:{results(t){this.$emit("update:filtered",t)}},mounted(){this.$emit("update:filtered",this.sales)}};const uU=(0,d.Z)(cU,[["render",MS]]);var pU=uU;const mU={class:"mb-5 tw-border-b tw-border-solid tw-pb-5 tw-border-neutral-200"},hU={class:"tw-grid tw-grid-cols-4 lg:tw-grid-cols-4 tw-gap-2"},gU={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-2"},fU={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-2"},vU={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-2"},yU={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-4"};function _U(t,e,s,a,r,l){const o=(0,i.up)("DashItem");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",mU,[(0,i._)("div",hU,[(0,i._)("div",gU,[(0,i.Wm)(o,{dash:l.newSales},null,8,["dash"])]),(0,i._)("div",fU,[(0,i.Wm)(o,{dash:l.confirmedSales},null,8,["dash"])]),(0,i._)("div",vU,[(0,i.Wm)(o,{dash:l.deliveredSales},null,8,["dash"])]),(0,i._)("div",yU,[(0,i.Wm)(o,{dash:l.shippedSales},null,8,["dash"])])])])])}const xU={class:"tw-flex tw-justify-between tw-items-center tw-w-full tw-h-full pa-3 px-4"},bU={class:"tw-flex tw-flex-col tw-justify-center tw-w-full tw-h-full tw-text-white"},kU={class:"tw-text-xl tw-font-bold"},CU={class:"tw-flex tw-items-center tw-gap-1 tw-w-full tw-h-full tw-text-white"},DU={class:"tw-text-sm"},SU={class:"rounded-circle tw-w-fit tw-mr-3"};function zU(t,e,s,a,r,l){const o=(0,i.up)("number");return(0,i.wg)(),(0,i.j4)(xa.C,{class:"tw-rounded-lg",color:s.dash.color,height:"70"},{default:(0,i.w5)((()=>[(0,i._)("div",xU,[(0,i._)("div",bU,[(0,i._)("p",kU,(0,Q.zw)(isNaN(s.dash.pourcentage)?"0.00":s.dash.pourcentage)+" "+(0,Q.zw)(s.symbol),1),(0,i._)("span",CU,[s.numbers?((0,i.wg)(),(0,i.j4)(o,{key:0,class:"tw-font-bold",ref:"number1",from:0,to:s.dash.value,duration:1,delay:0,easing:"Power.easeOut"},null,8,["to"])):(0,i.kq)("",!0),(0,i._)("p",DU,(0,Q.zw)(s.dash.title),1)])]),(0,i._)("div",SU,[(0,i.Wm)(X.t,{color:"white",size:"large",class:"md:tw-scale-[1.8] tw-scale-[1.3]",icon:s.dash.icon},null,8,["icon"])])])])),_:1},8,["color"])}var UU={props:{dash:{required:!0},symbol:{required:!1,default:"%"},numbers:{required:!1,default:!0}}};const LU=(0,d.Z)(UU,[["render",zU]]);var PU=LU,AU={components:{DashItem:PU},props:["sales"],computed:{newSales(){return Qz(this.sales)},confirmedSales(){return Gz(this.sales)},deliveredSales(){return Jz(this.sales)},shippedSales(){return Xz(this.sales)}}};const WU=(0,d.Z)(AU,[["render",_U]]);var $U=WU,EU={components:{SalesTable:su,AddSale:lD,SalesAnalytics:$U,IndexFilter:pU,NewAddSale:ES},data(){return{localUrl:R,isLoaded:!1,isLoadingReset:!1,showFilters:!1,isButtonDisabled:!0,filteredSales:[],search:"",searchId:"",selected:[],showPopup:!1}},computed:{fetched(){return this.$store.getters["sale/fetched"]},users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>3==t.role.id))},agentes(){return this.users.filter((t=>2==t.role.id))},sales(){return this.$store.getters["sale/sales"]},cities(){return this.$store.getters["city/cities"]},selectedSales(){return this.sales.filter((t=>this.selected.includes(t.id)))}},methods:{handleSelected(t){this.selected=t,this.selected.length>0?this.isButtonDisabled=!1:this.isButtonDisabled=!0},async getDeliveries(){await Z.deliveries().then((t=>{this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)},async getUsers(){await Z.all().then((t=>{this.$store.dispatch("user/setUsers",t.data.data.users)}),this.$handleApiError)},getSales(){return ys.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0)}})).catch(this.$handleApiError)},getProducts(){return ea.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))},getCities(){if(0==this.cities.length)return Z.cities().then((t=>{const e=t.data.data;this.$store.dispatch("city/setCities",e)}))},handleReset(){this.isLoadingReset=!0,0!=this.selected.length&&ys.resetSale(this.selected).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.$store.dispatch("sale/resetSales",this.selected),this.selected=[])})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoadingReset=!1))}},async mounted(){0==this.deliveries.length&&(await this.getDeliveries(),this.getUsers()),this.fetched&&(this.isLoaded=!0),this.fetched&&(this.getProducts(),this.getCities())}};const OU=(0,d.Z)(EU,[["render",nC]]);var TU=OU;const VU=(0,i._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,i._)("div",null,[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Expidation ")])],-1),qU={key:0},RU={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},FU={class:"mb-5 tw-flex"},IU={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},jU={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},NU={class:""};function MU(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation"),d=(0,i.up)("IndexFilter"),w=(0,i.up)("SalesTable"),c=(0,i.up)("AddSale"),u=(0,i.up)("AddTicket");return(0,i.wg)(),(0,i.iD)("div",null,[VU,l.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",qU,[(0,i.Wm)(n)])),l.isLoaded?((0,i.wg)(),(0,i.iD)("div",RU,[(0,i._)("div",FU,[(0,i.Wm)(G.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,i._)("div",IU,[(0,i.Wm)(Zt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by client, phone..."},null,512),[[a.nr,l.search]])]),(0,i._)("div",jU,[(0,i.Wm)(X.t,{class:"tw-text-gray-500",size:"small"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-pound")])),_:1}),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.searchId=t),type:"number",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search By ID"},null,512),[[a.nr,l.searchId]])]),(0,i.Wm)(es.C),t.$can("handle_expidation")?((0,i.wg)(),(0,i.j4)(G.T,{key:0,onClick:e[3]||(e[3]=t=>l.showPopupTicket=!0),disabled:l.isButtonDisabled,icon:"",rounded:"lg",variant:"flat",size:"small",color:"green",class:"text-white tw-mr-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white",icon:"mdi-ticket-confirmation-outline",size:"xx-large"})])),_:1},8,["disabled"])):(0,i.kq)("",!0),(0,i.Wm)(G.T,{onClick:o.getSales,icon:"",rounded:"lg",variant:"flat",size:"small",color:"blue",class:"text-white tw-mr-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white",icon:"mdi-autorenew",size:"xx-large"})])),_:1},8,["onClick"])]),(0,i._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[1000px] !tw-overflow-visible":l.showFilters}])},[(0,i.Wm)(d,{sales:o.sales,search:l.search,"search-id":l.searchId,filtered:l.filteredSales,"onUpdate:filtered":e[4]||(e[4]=t=>l.filteredSales=t)},null,8,["sales","search","search-id","filtered"])],2),(0,i._)("div",NU,[((0,i.wg)(),(0,i.j4)(w,{onSelected:o.handleSelected,key:l.filteredSales.length,sales:l.filteredSales},null,8,["onSelected","sales"]))]),(0,i.Wm)(c,{onCancel:e[5]||(e[5]=t=>l.showPopup=!1),visible:l.showPopup},null,8,["visible"]),(0,i.Wm)(u,{orders:o.selectedOrders,onCancel:e[6]||(e[6]=t=>l.showPopupTicket=!1),visible:l.showPopupTicket},null,8,["orders","visible"])])):(0,i.kq)("",!0)])}const HU={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},YU={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},KU=(0,i._)("h1",{class:"tw-font-bold"},"Choose Ticket Size",-1),ZU={class:"tw-grid mt-5"},BU=(0,i._)("img",{src:"",id:"image"},null,-1),QU=(0,i._)("canvas",{id:"qr-canvas"},null,-1);function GU(t,e,s,a,r,l){const o=(0,i.up)("LoadingAnimation"),n=(0,i.up)("popup-full");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n,{onCancel:e[0]||(e[0]=e=>t.$emit("cancel")),visible:s.visible},{default:(0,i.w5)((()=>[r.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",HU,[(0,i.Wm)(o)])),r.isLoaded?((0,i.wg)(),(0,i.iD)("div",YU,[KU,(0,i._)("div",ZU,[(0,i.Wm)(G.T,{onClick:l.downloadPDF},{default:(0,i.w5)((()=>[(0,i.Uk)("Imprimer")])),_:1},8,["onClick"])])])):(0,i.kq)("",!0)])),_:1},8,["visible"]),BU,QU])}var JU=s(8914),XU=s(3579),tL=s.n(XU),eL=s(8385),sL={props:["visible","orders"],data(){return{localUrl:R,isLoading:!1,isLoaded:!0}},computed:{},methods:{async addOrderPage(t,e){const s=new Date;let a=s.getDate(),i=s.getMonth()+1,r=s.getFullYear();t.rect(1,1,98,148,"S"),t.setFontSize(12),t.setTextColor("orange"),t.text("Vldo",3,7),t.line(1,10,99,10);const l=e.items.map((t=>`${t.product.name}|${t.product_variation.color}|${t.product_variation.size} x ${t.quantity}`));tL()(t,{theme:"grid",startY:12,margin:{horizontal:3,vertical:0},body:[["Nom Complete: ",e.fullname],["Tlephone: ",e.phone],["Adresse: ",e.adresse],["Ville: ",e.city],["Date d'envoi: ",`${a}-${i}-${r}`],["Marchandise: ",l.join("\n")]],styles:{halign:"left",lineColor:"black",textColor:"black"},columnStyles:{0:{fontStyle:"bold",font:"Cairo",valign:"middle",fontSize:8,cellWidth:24},1:{font:"Cairo",valign:"middle",cellPadding:{vertical:1,horizontal:2}}}}),t.line(1,73,99,73),t.setFont("helvetica","bold"),t.setTextColor("black"),t.setFontSize(16),t.text(`CRBT: ${Nr(e)} ${I}`,29,80),t.line(1,83,99,83),t.setFontSize(8),t.setFont("helvetica","normal"),t.text("Vous remercier pour votre confiance, pour plus d'informaion",12,90),t.text("veuillez nous appeler sur :",32,95),t.setFont("helvetica","bold"),t.setFontSize(16),t.text("0612345678",32,105),t.line(1,115,99,115)},async downloadPDF(){var t=new JU["default"]({orientation:"p",unit:"mm",format:[100,150],putOnlyUsedFonts:!0});t.addFont(this.localUrl+"assets/fonts/Cairo-Regular.ttf","Cairo","normal"),t.addFont(this.localUrl+"assets/fonts/Cairo-Bold.ttf","Cairo","bold");for(let e=0;e<this.orders.length;e++){const s=this.orders[e];e>0&&t.addPage(),this.addOrderPage(t,s);const a=await new Promise(((t,e)=>{eL.toDataURL(F+"api/sales/scan/"+s.id,{margin:0},(function(s,a){s&&e(s),t(a)}))})),i=new Image;i.src=a,await new Promise((s=>{i.onload=()=>{t.addImage(i,68,118,28,28,"a"+e,"SLOW"),s()}}))}t.save("order_tickets.pdf")}},mounted(){}};const aL=(0,d.Z)(sL,[["render",GU]]);var iL=aL,rL={components:{SalesTable:su,AddSale:lD,AddTicket:iL,IndexFilter:pU},data(){return{localUrl:R,confirmations:Ln,deliveryStatus:Wn,isLoaded:!1,showFilters:!1,search:"",searchId:"",isButtonDisabled:!0,filteredSales:[],selected:[],showPopup:!1,showPopupTicket:!1}},computed:{selectedOrders(){return this.sales.filter((t=>this.selected.includes(t.id)))},users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>3==t.role.id))},agentes(){return this.users.filter((t=>2==t.role.id))},sales(){return this.$store.getters["sale/sales"].filter((t=>"dispatch"==t.delivery))},cities(){return this.$store.getters["city/cities"]}},methods:{handleSelected(t){this.selected=t,this.selected.length>0?this.isButtonDisabled=!1:this.isButtonDisabled=!0},async getDeliveries(){await Z.deliveries().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)},async getUsers(){await Z.all().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setUsers",t.data.data.users)}),this.$handleApiError)},getSales(){return this.isLoaded=!1,ys.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;console.log(t.data),this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)},getCities(){if(0==this.cities.length)return Z.cities().then((t=>{const e=t.data.data;this.$store.dispatch("city/setCities",e)}))}},async mounted(){0==this.deliveries.length&&(await this.getDeliveries(),this.getUsers()),this.$store.getters["sale/fetched"]?this.isLoaded=!0:this.getSales(),this.getCities()}};const lL=(0,d.Z)(rL,[["render",MU]]);var oL=lL;const nL=(0,i._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,i._)("div",null,[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Expidation ")])],-1),dL={key:0},wL={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},cL={class:"mb-5 tw-flex"},uL={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},pL={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},mL={class:""};function hL(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation"),d=(0,i.up)("IndexFilter"),w=(0,i.up)("SalesTable"),c=(0,i.up)("AddSale"),u=(0,i.up)("AddTicket");return(0,i.wg)(),(0,i.iD)("div",null,[nL,l.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",dL,[(0,i.Wm)(n)])),l.isLoaded?((0,i.wg)(),(0,i.iD)("div",wL,[(0,i._)("div",cL,[(0,i.Wm)(G.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,i._)("div",uL,[(0,i.Wm)(Zt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by client, phone..."},null,512),[[a.nr,l.search]])]),(0,i._)("div",pL,[(0,i.Wm)(X.t,{class:"tw-text-gray-500",size:"small"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-pound")])),_:1}),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.searchId=t),type:"number",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search By ID"},null,512),[[a.nr,l.searchId]])]),(0,i.Wm)(es.C),(0,i.Wm)(G.T,{onClick:o.getSales,icon:"",rounded:"lg",variant:"flat",size:"small",color:"blue",class:"text-white tw-mr-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white",icon:"mdi-autorenew",size:"xx-large"})])),_:1},8,["onClick"])]),(0,i._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[1000px] !tw-overflow-visible":l.showFilters}])},[(0,i.Wm)(d,{sales:o.sales,search:l.search,"search-id":l.searchId,filtered:l.filteredSales,"onUpdate:filtered":e[3]||(e[3]=t=>l.filteredSales=t)},null,8,["sales","search","search-id","filtered"])],2),(0,i._)("div",mL,[((0,i.wg)(),(0,i.j4)(w,{onSelected:o.handleSelected,key:l.filteredSales.length,sales:l.filteredSales},null,8,["onSelected","sales"]))]),(0,i.Wm)(c,{onCancel:e[4]||(e[4]=t=>l.showPopup=!1),visible:l.showPopup},null,8,["visible"]),(0,i.Wm)(u,{orders:o.selectedOrders,onCancel:e[5]||(e[5]=t=>l.showPopupTicket=!1),visible:l.showPopupTicket},null,8,["orders","visible"])])):(0,i.kq)("",!0)])}var gL={components:{SalesTable:su,AddSale:lD,AddTicket:iL,IndexFilter:pU},data(){return{localUrl:R,confirmations:Ln,deliveryStatus:Wn,isLoaded:!1,showFilters:!1,filteredSales:[],search:"",searchId:"",isButtonDisabled:!0,selected:[],showPopup:!1,showPopupTicket:!1}},computed:{selectedOrders(){return this.sales.filter((t=>this.selected.includes(t.id)))},users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>3==t.role.id))},agentes(){return this.users.filter((t=>2==t.role.id))},sales(){return this.$store.getters["sale/sales"].filter((t=>"expidier"==t.delivery))},cities(){return this.$store.getters["city/cities"]}},methods:{handleSelected(t){this.selected=t,this.selected.length>0?this.isButtonDisabled=!1:this.isButtonDisabled=!0},async getDeliveries(){await Z.deliveries().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)},async getUsers(){await Z.all().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setUsers",t.data.data.users)}),this.$handleApiError)},getSales(){return this.isLoaded=!1,ys.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;console.log(t.data),this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)},getCities(){if(0==this.cities.length)return Z.cities().then((t=>{const e=t.data.data;this.$store.dispatch("city/setCities",e)}))}},async mounted(){0==this.deliveries.length&&(await this.getDeliveries(),this.getUsers()),this.$store.getters["sale/fetched"]?this.isLoaded=!0:this.getSales(),this.getCities()}};const fL=(0,d.Z)(gL,[["render",hL]]);var vL=fL,yL={name:"sales",path:"/sales",component:ia,meta:{module:"sale"},children:[{name:"sale/list",path:"",component:TU,meta:{module:"sale",subModule:"sale/list",title:"Sales List",gate:"show_all_sales"}},{name:"sale/expidation",path:"expidation",component:oL,meta:{module:"sale",subModule:"sale/expidation",title:"Expidation",gate:"show_all_expidations"}},{name:"sale/shipping",path:"shipping",component:vL,meta:{module:"sale",subModule:"sale/shipping",title:"Shipping",gate:"show_all_expidations"}}]};const _L={class:"mb-5 tw-flex tw-justify-between tw-items-center"},xL=(0,i._)("div",null,[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"My Orders"),(0,i._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"See orders affected to you")],-1),bL={key:0},kL=(0,i._)("span",{class:"text-white"}," Add Sale ",-1),CL={key:0},DL={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},SL={class:"mb-5 tw-flex"},zL={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},UL={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},LL={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},PL=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Sort By",-1),AL={class:"tw-relative"},WL=["value"],$L={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},EL=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Order By",-1),OL={class:"tw-relative"},TL=["value"],VL={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},qL=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Upsell",-1),RL={class:"tw-relative"},FL=(0,i._)("option",{value:"all"},"Select",-1),IL=(0,i._)("option",{value:"oui"},"Oui",-1),jL=(0,i._)("option",{value:"non"},"Non",-1),NL=[FL,IL,jL],ML={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},HL=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Confirmation",-1),YL={class:"tw-relative"},KL=["value"],ZL={key:0},BL={key:1,class:""},QL=(0,i._)("p",{class:"tw-text-neutral-400 tw-py-5"},"Your order liste is empty !",-1),GL=[QL];function JL(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation"),d=(0,i.up)("OrdersTable"),w=(0,i.up)("AddNewOrder");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",_L,[xL,l.isLoaded?((0,i.wg)(),(0,i.iD)("div",bL,[(0,i.Wm)(G.T,{color:"primary-color",onClick:e[0]||(e[0]=t=>l.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),kL])),_:1})])):(0,i.kq)("",!0)]),l.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",CL,[(0,i.Wm)(n)])),l.isLoaded?((0,i.wg)(),(0,i.iD)("div",DL,[(0,i._)("div",SL,[(0,i.Wm)(G.T,{onClick:e[1]||(e[1]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,i._)("div",zL,[(0,i.Wm)(Zt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,l.search]])])]),(0,i._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,i._)("div",UL,[(0,i._)("div",LL,[PL,(0,i._)("div",AL,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.sorting.sortBy=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.sorting.fields,(t=>((0,i.wg)(),(0,i.iD)("option",{key:t.value,value:t.value},(0,Q.zw)(t.name),9,WL)))),128))],512),[[a.bM,l.sorting.sortBy]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])]),(0,i._)("div",$L,[EL,(0,i._)("div",OL,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.sorting.orderBy=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.sorting.options,(t=>((0,i.wg)(),(0,i.iD)("option",{key:t.value,value:t.value},(0,Q.zw)(t.name),9,TL)))),128))],512),[[a.bM,l.sorting.orderBy]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])]),(0,i._)("div",VL,[qL,(0,i._)("div",RL,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>l.upsellFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},NL,512),[[a.bM,l.upsellFilter]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])]),(0,i._)("div",ML,[HL,(0,i._)("div",YL,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>l.confirmationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.confirmations,(t=>((0,i.wg)(),(0,i.iD)("option",{key:t.id,value:t.value?t.value:"all"},(0,Q.zw)(t.name),9,KL)))),128))],512),[[a.bM,l.confirmationFilter]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])])])],2),o.orders.length>0?((0,i.wg)(),(0,i.iD)("div",ZL,[(0,i.Wm)(d,{orders:o.filteredOrders},null,8,["orders"])])):((0,i.wg)(),(0,i.iD)("div",BL,GL))])):(0,i.kq)("",!0),(0,i.Wm)(w,{onCancel:e[7]||(e[7]=t=>l.showPopup=!1),visible:l.showPopup,"onUpdate:visible":e[8]||(e[8]=t=>l.showPopup=t)},null,8,["visible"])])}const XL={class:"tw-relative tw-min-h-[400px] tw-overflow-x-auto tw-overflow-y-visible sm:tw-rounded-lg"},tP={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},eP={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},sP=(0,i._)("th",{scope:"col",class:"tw-p-4"},[(0,i._)("div",{class:"tw-flex tw-items-center"},[(0,i._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,i._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),aP={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},iP={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},rP={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},lP=(0,i._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),oP=["value"],nP={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},dP={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},wP={class:"tw-flex tw-flex-wrap tw-gap-2"},cP={class:"tw-text-white"};function uP(t,e,s,r,l,o){const n=(0,i.up)("OrderRow");return s.orders.length>0?((0,i.wg)(),(0,i.iD)("div",{key:s.orders.length},[(0,i._)("div",XL,[(0,i._)("table",tP,[(0,i._)("thead",eP,[(0,i._)("tr",null,[sP,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.columns,(t=>((0,i.wg)(),(0,i.iD)("th",{key:t,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,i._)("div",aP,(0,Q.zw)(t),1)])))),128))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.items,(t=>((0,i.wg)(),(0,i.j4)(n,{showNote:!!s.note,key:t.id,order:t},null,8,["showNote","order"])))),128))])])]),(0,i._)("div",iP,[(0,i._)("div",rP,[lP,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allowedLimit,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,oP)))),128))],512),[[a.bM,l.paginationLimit]])]),(0,i._)("div",nP,[(0,i._)("div",dP,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?s.orders.length:o.nextRange)+" of "+(0,Q.zw)(s.orders.length)+" items ",1),(0,i._)("div",wP,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.pageCount,(t=>((0,i.wg)(),(0,i.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,i.w5)((()=>[(0,i._)("span",cP,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])):(0,i.kq)("",!0)}const pP=(0,i._)("td",{class:"tw-w-4 tw-p-4"},[(0,i._)("div",{class:"tw-flex tw-items-center"},[(0,i._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,i._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),mP={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},hP={class:"tw-px-6 tw-py-4 tw-relative"},gP={key:0},fP={class:"tw-px-6 tw-py-4"},vP={class:"tw-px-6 tw-py-4 tw-relative"},yP={class:"tw-pb-2"},_P={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},xP={key:0},bP={key:1},kP={class:"tw-absolute tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-text-xs"},CP={key:0,class:"tw-bg-emerald-500/10 tw-text-emerald-500 tw-px-2 tw-rounded-t"},DP={key:1,class:"tw-bg-blue-500/10 tw-text-blue-500 tw-px-2 tw-rounded-t"},SP={class:"tw-px-6 tw-py-4 tw-relative"},zP={class:"tw-flex tw-items-center tw-justify-center"},UP={class:"tw-flex tw-gap-1"},LP={key:0},PP={class:"tw-px-6 tw-py-4"},AP={class:"tw-px-6 tw-py-4"},WP={class:"tw-px-6 tw-py-4"},$P={class:"!tw-max-w-[300px] !tw-min-w-[300px] tw-whitespace-normal"},EP={key:1,class:"tw-px-6 tw-py-4"},OP={class:"tw-max-w-[300px] tw-min-w-[150px] tw-whitespace-normal"},TP={class:"tw-px-6 tw-py-4"},VP={class:"tw-min-w-[300px]"},qP=(0,i._)("p",null,"Edit note",-1);function RP(t,e,s,a,r,l){(0,i.up)("OrderUpsell");const o=(0,i.up)("OrderConfirmation"),n=(0,i.up)("OrderAffectation"),d=(0,i.up)("OrderActions"),w=(0,i.up)("popup");return(0,i.wg)(),(0,i.iD)(i.HY,null,[((0,i.wg)(),(0,i.iD)("tr",{key:s.order.id,class:(0,Q.C_)([["reporter"==s.order.confirmation&&"tw-relative",l.isReportedToday(s.order)&&"!tw-border tw-border-red-400"],"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"])},[pP,(0,i._)("th",mP,(0,Q.zw)(l.id),1),(0,i._)("td",hP,[(0,i.Uk)((0,Q.zw)(s.order?.created_at?.split("T")[0])+" ",1),"reporter"==s.order.confirmation?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,Q.C_)([l.isReportedToday(s.order)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[l.isReportedToday(s.order)?((0,i.wg)(),(0,i.iD)("span",gP," Reported for today ")):(0,i.kq)("",!0)],2)):(0,i.kq)("",!0)]),(0,i._)("td",fP,(0,Q.zw)(l.fullname),1),(0,i._)("td",vP,[(0,i._)("div",yP,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.order.items,(t=>((0,i.wg)(),(0,i.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,i.Uk)(" - "),(0,i._)("span",_P,(0,Q.zw)(t.quantity)+" X ",1),(0,i.Uk)((0,Q.zw)(t.product.name)+" ",1),t.product_variation.size?((0,i.wg)(),(0,i.iD)("span",xP,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,i.kq)("",!0),t.product_variation.color?((0,i.wg)(),(0,i.iD)("span",bP,"| "+(0,Q.zw)(t.product_variation.color),1)):(0,i.kq)("",!0)])))),128))]),(0,i._)("div",kP,[s.order.counts_from_warehouse?((0,i.wg)(),(0,i.iD)("p",CP," warehouse ")):(0,i.kq)("",!0),s.order.counts_from_warehouse?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",DP," delivery "))])])]),(0,i.kq)("",!0),(0,i._)("td",SP,[(0,i._)("div",zP,[((0,i.wg)(),(0,i.j4)(o,{class:(0,Q.C_)("reporter"==s.order.confirmation&&"tw-mb-1"),order:s.order,confirmation:l.confirmation,key:l.confirmation,id:l.id},null,8,["class","order","confirmation","id"])),"reporter"==s.order.confirmation?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,Q.C_)([l.isReportedToday(s.order)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[(0,i._)("span",UP,["reporter"==s.order.confirmation?((0,i.wg)(),(0,i.iD)("span",LP,[(0,i.Wm)(X.t,{size:"x-small"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-autorenew")])),_:1}),(0,i._)("span",null,(0,Q.zw)(s.order?.reported_agente_date?.split("T")[0]),1)])):(0,i.kq)("",!0)])],2)):(0,i.kq)("",!0)])]),(0,i._)("td",PP,["confirmer"===l.confirmation?((0,i.wg)(),(0,i.j4)(n,{order:s.order,id:l.id,affectation:l.affectation,key:l.affectation},null,8,["order","id","affectation"])):(0,i.kq)("",!0)]),(0,i._)("td",AP,(0,Q.zw)(l.getPrice(s.order)),1),(0,i._)("td",WP,[(0,i._)("div",$P,(0,Q.zw)(s.order.city),1)]),s.showNote?((0,i.wg)(),(0,i.iD)("td",EP,[(0,i._)("div",OP,[(0,i.Uk)((0,Q.zw)(s.order.note)+" ",1),(0,i.Wm)(X.t,{onClick:l.handleClick,size:"x-small",class:(0,Q.C_)(["tw-ml-2 tw-text-blue-500 tw-cursor-pointer hover:tw-bg-neutral-900/10 tw-rounded-full tw-p-3",{"tw-animate-spin":r.isLoading}])},{default:(0,i.w5)((()=>[(0,i.Uk)((0,Q.zw)(r.isLoading?"mdi-loading":"mdi-pencil"),1)])),_:1},8,["onClick","class"])])])):(0,i.kq)("",!0),(0,i._)("td",TP,[(0,i.Wm)(d,{order:s.order},null,8,["order"])])],2)),(0,i.Wm)(w,{type:"info",title:"Add Note",onResolved:l.handleResolved,loading:r.isLoading,visible:r.showPopup},{default:(0,i.w5)((()=>[(0,i._)("div",VP,[qP,(0,i.Wm)(pp.z,{modelValue:r.newNote,"onUpdate:modelValue":e[0]||(e[0]=t=>r.newNote=t),variant:"outlined",class:"rounded-md",color:"primary-color"},null,8,["modelValue"])])])),_:1},8,["onResolved","loading","visible"])],64)}const FP={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},IP=["onClick"],jP={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},NP=(0,i._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter note",-1),MP={class:"tw-flex tw-justify-end tw-mt-2"};function HP(t,e,s,r,l,o){const n=(0,i.up)("popup-full"),d=(0,i.up)("OrderReporting"),w=(0,i.up)("OrderAnnuler");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{key:s.confirmation,class:"tw-relative tw-min-w-[100px]"},[(0,i._)("button",{onClick:e[0]||(e[0]=(...t)=>o.toggle&&o.toggle(...t)),class:(0,Q.C_)([[o.selected.text,o.selected.bg,o.selected.ring],"focus:tw-ring-4 tw-min-w-[100px] focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between"]),type:"button"},[(0,i.Uk)((0,Q.zw)(o.selected.name)+" ",1),l.isLoading?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(X.t,{key:0,class:"tw-ml-1"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,Q.zw)(l.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),l.isLoading?((0,i.wg)(),(0,i.j4)(X.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-loading")])),_:1})):(0,i.kq)("",!0)],2),(0,i._)("div",{class:(0,Q.C_)([{"tw-hidden":!l.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,i._)("ul",FP,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.options,(t=>((0,i.wg)(),(0,i.iD)("li",{onClick:e=>o.handleChange(t),key:t.id},[(0,i._)("a",{class:(0,Q.C_)(["tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100",[t.text,t.bg]])},(0,Q.zw)(t.name),3)],8,IP)))),128))])],2),(0,i.Wm)(n,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>l.showPopup=!1),visible:l.showPopup},{default:(0,i.w5)((()=>[(0,i._)("div",jP,[NP,(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"3",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n\r\n        ",512),[[a.nr,l.note]]),(0,i._)("div",MP,[(0,i.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleClick},{default:(0,i.w5)((()=>[(0,i.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"]),(0,i.Wm)(d,{order:s.order,visible:l.showPopupReporter,onCancel:e[3]||(e[3]=t=>l.showPopupReporter=!1)},null,8,["order","visible"]),(0,i.Wm)(w,{order:s.order,visible:l.showPopupAnnuler,onCancel:e[4]||(e[4]=t=>l.showPopupAnnuler=!1)},null,8,["order","visible"])])),[[Bt.L,o.close]])}const YP={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},KP=(0,i._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),ZP=(0,i._)("br",null,null,-1),BP=(0,i._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),QP={class:"tw-flex tw-justify-end tw-mt-2"};function GP(t,e,s,r,l,o){const n=(0,i.up)("VueDatePicker"),d=(0,i.up)("popup-full");return(0,i.wg)(),(0,i.iD)("div",{key:s.order.id},[(0,i.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>o.cancel()),visible:s.visible},{default:(0,i.w5)((()=>[(0,i._)("div",YP,[KP,(0,i.Wm)(n,{modelValue:l.date,"onUpdate:modelValue":e[0]||(e[0]=t=>l.date=t),format:o.format},null,8,["modelValue","format"]),ZP,BP,(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[a.nr,l.note]]),(0,i._)("div",QP,[(0,i.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleConfirm},{default:(0,i.w5)((()=>[(0,i.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var JP={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_agente_date=this.realDate,t.reported_agente_note=this.note,t.confirmation="reporter",this.isLoading=!0,ys.agenteUpdateConfirmation(t.id,"reporter",t).then((e=>{console.log(e.data),this.$alert({type:"success",title:"Order reported successfully"}),this.$store.dispatch("order/update",{id:t.id,order:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},format(t){const e=t.getDate(),s=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,i=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getFullYear();return this.realDate=`${r}-${i}-${s}`,`${s}/${i}/${r}`},cancel(){this.$emit("cancel")}},mounted(){}};const XP=(0,d.Z)(JP,[["render",GP]]);var tA=XP;const eA={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},sA=(0,i._)("br",null,null,-1),aA=(0,i._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),iA={class:"tw-flex tw-justify-end tw-mt-2"};function rA(t,e,s,r,l,o){const n=(0,i.up)("popup-full");return(0,i.wg)(),(0,i.iD)("div",{key:s.order.id},[(0,i.Wm)(n,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[1]||(e[1]=t=>o.cancel()),visible:s.visible},{default:(0,i.w5)((()=>[(0,i._)("div",eA,[sA,aA,(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n          ",512),[[a.nr,l.note]]),(0,i._)("div",iA,[(0,i.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleConfirm},{default:(0,i.w5)((()=>[(0,i.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var lA={props:["visible","order"],data(){return{isLoading:!1,note:"",newOrder:null}},methods:{handleConfirm(){const t={...this.order};t.reported_agente_note=this.note,t.confirmation="annuler",this.isLoading=!0,ys.agenteUpdateConfirmation(t.id,"annuler",t).then((e=>{console.log(e.data),this.$alert({type:"success",title:"Order annuler successfully"}),this.$store.dispatch("order/update",{id:t.id,order:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},cancel(){this.$emit("cancel")}},mounted(){}};const oA=(0,d.Z)(lA,[["render",rA]]);var nA=oA,dA={props:["confirmation","id","order"],components:{OrderReporting:tA,OrderAnnuler:nA},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",selectedId:0,allOptions:Ln,showPopupReporter:!1,showPopupAnnuler:!1}},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleResolved(t){t?(this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))):this.showPopup=!1},handleClick(){this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))},async handleChange(t){if(t.id===this.selectedId)return!1;["confirmer","reporter","annuler"].includes(t.value)?"reporter"===t.value?this.showPopupReporter=!0:"annuler"===t.value?this.showPopupAnnuler=!0:(this.nextOption=t.id,this.showPopup=!0):(this.selectedId=t.id,this.updateOrder()),this.close()},async updateOrder(){return this.isLoading=!0,ys.agenteUpdateConfirmation(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmation(this.id,this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t)))},async updateOrderWithNote(){return this.isLoading=!0,ys.agenteUpdateConfirmationWithNote(this.id,this.selected.value,this.note).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmationWithNote(this.id,this.selected.value,this.note),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateConfirmation(t,e){this.$store.dispatch("order/updateConfirmation",{id:t,confirmation:e}),this.$emit("update",e)},updateConfirmationWithNote(t,e,s){this.$store.dispatch("order/updateConfirmationWithNote",{id:t,confirmation:e,note:s}),this.$emit("update",e)}},mounted(){this.availableOptions.includes(this.confirmation)?this.selectedId=this.allOptions.find((t=>t.value==this.confirmation)).id:this.selectedId=0}};const wA=(0,d.Z)(dA,[["render",HP]]);var cA=wA;const uA={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700"},pA=["onClick"];function mA(t,e,s,a,r,l){return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{key:s.upsell,class:"tw-relative tw-w-[60px]"},[(0,i._)("button",{onClick:e[0]||(e[0]=(...t)=>l.toggle&&l.toggle(...t)),class:(0,Q.C_)([[l.selected.text,l.selected.bg,l.selected.ring],"focus:tw-ring-4 focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center"]),type:"button"},[(0,i.Uk)((0,Q.zw)(l.selected.name)+" ",1),r.isLoading?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(X.t,{key:0,class:"tw-ml-1"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,Q.zw)(r.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),r.isLoading?((0,i.wg)(),(0,i.j4)(X.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-loading")])),_:1})):(0,i.kq)("",!0)],2),(0,i._)("div",{class:(0,Q.C_)([{"tw-hidden":!r.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,i._)("ul",uA,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.options,(t=>((0,i.wg)(),(0,i.iD)("li",{onClick:e=>l.handleChange(t),key:t.id},[(0,i._)("a",{class:(0,Q.C_)(["tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100",[t.text,t.bg]])},(0,Q.zw)(t.name),3)],8,pA)))),128))])],2)])),[[Bt.L,l.close]])}var hA={props:["upsell","id"],data(){return{isLoading:!1,isOpen:!1,selectedId:0,allOptions:An}},computed:{options(){return this.allOptions},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(t.id==this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()},updateOrder(){ys.agenteUpdateUpsell(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateUpsell(this.id,this.selected.value),this.$emit("update",this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t)))},updateUpsell(t,e){this.$store.dispatch("order/updateUpsell",{id:t,upsell:e})}},mounted(){switch(console.log(this.upsell),this.upsell){case"oui":console.log("found oui"),this.selectedId=1;break;case"non":console.log("found non"),this.selectedId=2;break;default:console.log("found nothing"),this.selectedId=0;break}}};const gA=(0,d.Z)(hA,[["render",mA]]);var fA=gA;const vA={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},yA=["onClick"],_A={class:"tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100"},xA={key:1,class:"tw-relative tw-min-w-[100px] tw-flex tw-items-center"};function bA(t,e,s,a,r,l){return l.fetched?(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{key:s.affectation,class:"tw-relative tw-min-w-[100px]"},[(0,i._)("button",{onClick:e[0]||(e[0]=(...t)=>l.toggle&&l.toggle(...t)),class:"tw-whitespace-nowrap focus:tw-ring-4 tw-ring-neutral-200 tw-bg-neutral-600/10 tw-text-neutral-800 focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center",type:"button"},[(0,i.Uk)((0,Q.zw)(l.selected.firstname)+" "+(0,Q.zw)(l.selected.lastname)+" ",1),r.isLoading?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(X.t,{key:0,class:"tw-ml-1"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,Q.zw)(r.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),r.isLoading?((0,i.wg)(),(0,i.j4)(X.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-loading")])),_:1})):(0,i.kq)("",!0)]),(0,i._)("div",{class:(0,Q.C_)([{"tw-hidden":!r.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,i._)("ul",vA,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.options,(t=>((0,i.wg)(),(0,i.iD)("li",{onClick:e=>l.handleChange(t),key:t.id},[(0,i._)("a",_A,(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),1)],8,yA)))),128))])],2)])),[[Bt.L,l.close]]):((0,i.wg)(),(0,i.iD)("div",xA,[(0,i.Wm)(X.t,{class:"tw-animate-spin tw-ml-1 tw-text-orange-500"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-loading")])),_:1})]))}var kA={props:["affectation","id","order"],data(){return{isOpen:!1,isLoading:!1,selectedId:null}},computed:{options(){return[{id:null,firstname:"select",lastname:""},...this.deliveries]},selected(){const t=[...this.deliveries.map((t=>parseInt(t.id)))];return null!=this.selectedId&&t.includes(parseInt(this.selectedId))?this.options.filter((t=>t.id==this.selectedId))[0]:{id:null,firstname:"select",lastname:""}},users(){return this.$store.getters["user/users"]},allDeliveries(){return this.users.filter((t=>"delivery"==t.role_name))},fetched(){return this.$store.getters["user/fetched"]},deliveries(){return this.allDeliveries.filter((t=>t.delivery_products.some((t=>this.order.items.some((e=>e.product_id==t.product_id))))))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(this.old=this.affectation,t.id===this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()},updateOrder(){ys.agenteUpdateAffectaion(this.id,this.selectedId).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateAffectation(this.id,this.selected.id),this.isLoading=!1)}),(t=>{this.$handleApiError(t),this.isLoading=!1,this.selectedId=this.old}))},updateAffectation(t,e){this.$store.dispatch("order/updateAffectation",{id:t,affectation:e})}},mounted(){this.selectedId=this.affectation,console.log("id: ",this.id," affecte: ",this.affectation)}};const CA=(0,d.Z)(kA,[["render",bA]]);var DA=CA;const SA={key:0},zA={key:2},UA={key:3};function LA(t,e,s,a,r,l){const o=(0,i.up)("UpdateDoubleOrder"),n=(0,i.up)("UpdateOrder");return s.order?((0,i.wg)(),(0,i.iD)("div",SA,[s.only.includes("whatsapp")?((0,i.wg)(),(0,i.j4)(G.T,{key:0,link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+s.order.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])):(0,i.kq)("",!0),s.only.includes("update")?((0,i.wg)(),(0,i.j4)(G.T,{key:1,onClick:e[0]||(e[0]=t=>r.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,i.kq)("",!0),s.double?((0,i.wg)(),(0,i.iD)("div",zA,[r.showUpdatePopup?((0,i.wg)(),(0,i.j4)(o,{key:0,onUpdateOrder:e[1]||(e[1]=e=>t.$emit("updateOrder",e)),visible:r.showUpdatePopup,"onUpdate:visible":e[2]||(e[2]=t=>r.showUpdatePopup=t),order:s.order},null,8,["visible","order"])):(0,i.kq)("",!0)])):((0,i.wg)(),(0,i.iD)("div",UA,[r.showUpdatePopup?((0,i.wg)(),(0,i.j4)(n,{key:0,visible:r.showUpdatePopup,"onUpdate:visible":e[3]||(e[3]=t=>r.showUpdatePopup=t),order:s.order},null,8,["visible","order"])):(0,i.kq)("",!0)]))])):(0,i.kq)("",!0)}const PA={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},AA={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[950px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},WA=(0,i._)("h1",{class:"tw-text-lg"},"Update Order",-1),$A={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},EA={class:"md:tw-col-span-6 tw-col-span-12"},OA=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),TA={class:"md:tw-col-span-6 tw-col-span-12"},VA=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),qA={class:"md:tw-col-span-6 tw-col-span-12"},RA=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),FA=["value"],IA=["value"],jA={class:"md:tw-col-span-6 tw-col-span-12"},NA=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),MA={class:"md:tw-col-span-12 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},HA=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Confirmation",-1),YA={class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},KA={class:"tw-col-span-12"},ZA=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note:",-1),BA={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},QA={class:"tw-col-span-12 md:tw-col-span-4"},GA=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Date:",-1),JA={class:"tw-col-span-12 md:tw-col-span-8"},XA=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Note:",-1),tW={class:"md:tw-col-span-6 tw-col-span-12"},eW=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Affectation",-1),sW={class:"md:tw-col-span-6 tw-col-span-12"},aW=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Upsell",-1),iW=["value"],rW=(0,i._)("p",{class:"tw-col-span-12 tw-mt-5 tw-mb-2"},"Order Items",-1),lW={key:1,class:"tw-col-span-12 tw-rounded tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},oW={key:2,class:"md:tw-col-span-12 tw-col-span-12"},nW={class:"tw-max-w-full tw-overflow-auto"},dW={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},wW={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},cW={class:"tw-mx-auto tw-w-[50px] tw-h-[35px] tw-shadow tw-shadow-gray-200 tw-rounded tw-overflow-hidden tw-cursor-pointer"},uW=["src"],pW={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},mW=["onUpdate:modelValue"],hW=(0,i._)("option",{value:0},"Select",-1),gW=["value"],fW={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},vW=["disabled","onUpdate:modelValue"],yW=(0,i._)("option",{value:0},"Select",-1),_W=["value"],xW={key:0},bW={key:1},kW={key:2},CW={key:3},DW=["value"],SW={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},zW={class:"md:tw-col-span-6 tw-col-span-12"},UW=["onUpdate:modelValue"],LW={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},PW={key:0},AW={key:1,class:"md:tw-col-span-6 tw-col-span-12"},WW=["onUpdate:modelValue"],$W={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},EW={class:"tw-w-full tw-col-span-12 tw-flex tw-justify-end tw-mt-3"},OW=(0,i._)("span",{class:"!tw-text-sm !tw-capitalize"},"Add",-1),TW={class:"md:tw-col-span-12 tw-col-span-12"},VW={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},qW=(0,i._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),RW={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},FW=(0,i._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-mb-2 tw-whitespace-nowrap"},"Price: ",-1),IW={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},jW=(0,i._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),NW={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},MW=(0,i._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-whitespace-nowrap"},"Total Price: ",-1),HW={class:"tw-text-xl tw-text-green-500 tw-font-bold tw-px-2 tw-py-1 tw-rounded tw-bg-green-100"},YW={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},KW=(0,i._)("span",{class:"text-white"}," Cancel ",-1),ZW=(0,i._)("span",{class:"text-white"}," Update ",-1);function BW(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation"),d=(0,i.up)("AddOrderConfirmation"),w=(0,i.up)("AddOrderAffectation"),c=(0,i.up)("ProductOffers"),u=(0,i.up)("popup-full");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(u,{onCancel:e[12]||(e[12]=e=>t.$emit("update:visible",!1)),visible:s.visible},{default:(0,i.w5)((()=>[o.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",PA,[(0,i.Wm)(n)])),o.isLoaded?((0,i.wg)(),(0,i.iD)("div",AA,[WA,(0,i._)("div",$A,[(0,i._)("div",EA,[OA,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.fullname]])]),(0,i._)("div",TA,[VA,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.phone]])]),(0,i._)("div",qA,[RA,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[(0,i._)("option",{disabled:"",value:l.sale.city},(0,Q.zw)(l.sale.city),9,FA),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.cities,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,IA)))),128))],512),[[a.bM,l.sale.city]])]),(0,i._)("div",jA,[NA,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>l.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.adresse]])]),(0,i._)("div",MA,[HA,(0,i.Wm)(d,{order:l.sale,id:l.sale.id,confirmation:l.sale.confirmation,"onUpdate:confirmation":e[4]||(e[4]=t=>l.sale.confirmation=t),onChange:o.handleConfirmationChange,onConfirmed:e[5]||(e[5]=t=>l.sale.note=t),onReported:o.handleReported},null,8,["order","id","confirmation","onChange","onReported"]),(0,i._)("div",YA,[(0,i._)("div",KA,[ZA,(0,i.wy)((0,i._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[6]||(e[6]=t=>l.sale.note=t)},null,512),[[a.nr,l.sale.note]])])]),"reporter"==l.sale.confirmation&&l.sale.reported_agente_date?((0,i.wg)(),(0,i.iD)("div",BA,[(0,i._)("div",QA,[GA,(0,i._)("div",null,(0,Q.zw)(l.sale.reported_agente_date.split("T")[0]),1)]),(0,i._)("div",JA,[XA,(0,i.wy)((0,i._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[7]||(e[7]=t=>l.sale.reported_agente_note=t)},null,512),[[a.nr,l.sale.reported_agente_note]])])])):(0,i.kq)("",!0)]),(0,i._)("div",tW,[eW,(0,i.Wm)(w,{"product-ids":o.product_ids,items:o.formatedItems,order:l.sale,confirmation:l.sale.confirmation,affectation:l.sale.affectation,"onUpdate:affectation":e[8]||(e[8]=t=>l.sale.affectation=t),id:l.sale.id},null,8,["product-ids","items","order","confirmation","affectation","id"])]),(0,i._)("div",sW,[aW,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>l.sale.upsell=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.upsells,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.value,key:t.id},(0,Q.zw)(t.name),9,iW)))),128))],512),[[a.bM,l.sale.upsell]])]),(0,i.kq)("",!0),rW,l.items.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",lW," No Order items ")),l.items.length?((0,i.wg)(),(0,i.iD)("div",oW,[(0,i._)("div",nW,[((0,i.wg)(),(0,i.iD)("table",{key:l.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,i._)("thead",dW,[(0,i._)("tr",null,[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,i._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,i._)("div",wW,(0,Q.zw)(t),1)],2))),64))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.items,((t,e)=>((0,i.wg)(),(0,i.iD)("tr",{key:t,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[((0,i.wg)(),(0,i.iD)("th",{scope:"row",class:"tw-px-2 tw-py-2",key:t.product.id},[(0,i._)("div",cW,[o.product_images[e]?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tw-w-full tw-h-full tw-object-contain",src:l.serverUrl+"storage/"+o.product_images[e]},null,8,uW)):(0,i.kq)("",!0)])])),(0,i._)("th",pW,[(0,i._)("div",null,[(0,i._)("div",null,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e=>t.product.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[hW,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.filtredProducts,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,gW)))),128))],8,mW),[[a.bM,t.product.id]])])])]),(0,i._)("th",fW,[(0,i._)("div",null,[0!=t.product.id?(0,i.wy)(((0,i.wg)(),(0,i.iD)("select",{key:0,disabled:1==o.getVariations(t.product)?.variations?.length,"onUpdate:modelValue":e=>t.product_variation.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[yW,o.getVariations(t.product)?.variations?.length>1?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(o.getVariations(t.product)?.variations,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},[t.size||t.color?t.size&&"-"!=t.size&&t.color&&"-"!=t.color?((0,i.wg)(),(0,i.iD)("p",bW,(0,Q.zw)(t.size)+" / "+(0,Q.zw)(t.color),1)):t.size&&"-"!=t.size?((0,i.wg)(),(0,i.iD)("p",kW,(0,Q.zw)(t.size),1)):t.color?((0,i.wg)(),(0,i.iD)("p",CW,(0,Q.zw)(t.color),1)):(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",xW,"-"))],8,_W)))),128)):((0,i.wg)(),(0,i.iD)("option",{key:1,value:o.getVariations(t.product)?.variations[0]?.id}," Default ",8,DW))],8,vW)),[[a.bM,t.product_variation.id]]):(0,i.kq)("",!0)])]),(0,i._)("th",SW,[(0,i._)("div",zW,[(0,i.wy)((0,i._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,UW),[[a.nr,t.quantity]])])]),(0,i._)("th",LW,[(0,i._)("div",null,[null==t.price?((0,i.wg)(),(0,i.iD)("div",PW," - ")):((0,i.wg)(),(0,i.iD)("div",AW,[(0,i.wy)((0,i._)("input",{type:"number","onUpdate:modelValue":e=>t.price=e,placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,WW),[[a.nr,t.price]])]))])]),(0,i._)("th",$W,[(0,i._)("div",null,[(0,i.Wm)(G.T,{onClick:e=>o.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])]))])])):(0,i.kq)("",!0),(0,i._)("div",EW,[(0,i._)("div",null,[(0,i.Wm)(G.T,{onClick:o.addNewRow,class:"mr-2 !tw-px-1 !tw-py-1 !tw-pr-2 tw-flex tw-items-center tw-gap-2","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-plus")])),_:1}),OW])),_:1},8,["onClick"])])]),(0,i._)("div",TW,[(0,i.Wm)(c,{"product-ids":o.product_ids},null,8,["product-ids"])]),(0,i._)("div",VW,[qW,(0,i._)("div",RW,[FW,(0,i.wy)((0,i._)("input",{type:"number","onUpdate:modelValue":e[11]||(e[11]=t=>l.sale.price=t),class:"tw-py-1 tw-max-w-[100px] tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.price]])])]),(0,i._)("div",IW,[jW,(0,i._)("div",NW,[MW,(0,i._)("div",HW,(0,Q.zw)(l.currency)+" "+(0,Q.zw)(o.total_price),1)])])]),(0,i._)("div",YW,[(0,i.Wm)(G.T,{onClick:o.handleCancel,color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[KW])),_:1},8,["onClick"]),(0,i.Wm)(G.T,{loading:l.isLoading,onClick:o.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[ZW])),_:1},8,["loading","onClick"])])])):(0,i.kq)("",!0)])),_:1},8,["visible"])])}const QW={class:"tw-relative"},GW=["disabled"],JW=["value"],XW={key:1,class:"tw-relative tw-min-w-[100px] tw-flex tw-items-center"};function t$(t,e,s,r,l,o){return l.fetched?(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{key:s.affectation,class:"tw-relative tw-min-w-[100px]"},[(0,i._)("div",null,[(0,i._)("div",QW,[(0,i.wy)((0,i._)("select",{disabled:"confirmer"!=s.confirmation,"onUpdate:modelValue":e[0]||(e[0]=t=>o.affectationValue=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.options,(t=>((0,i.wg)(),(0,i.iD)("option",{key:t.id,value:t.id},(0,Q.zw)(t.firstname+" "+t.lastname),9,JW)))),128))],8,GW),[[a.bM,o.affectationValue]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])])])),[[Bt.L,o.close]]):((0,i.wg)(),(0,i.iD)("div",XW,[(0,i.Wm)(X.t,{class:"tw-animate-spin tw-ml-1 tw-text-orange-500"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-loading")])),_:1})]))}var e$={props:["affectation","id","order","confirmation","items","productIds"],data(){return{fetched:!1,isOpen:!1,isLoading:!1,selectedId:null}},computed:{options(){return[{id:null,firstname:"select",lastname:""},...this.deliveries]},affectationValue:{get(){return this.affectation},set(t){this.$emit("update:affectation",t)}},selected(){const t=[...this.deliveries.map((t=>parseInt(t.id)))];return null!=this.selectedId&&t.includes(parseInt(this.selectedId))?this.options.filter((t=>t.id==this.selectedId))[0]:{id:null,firstname:"select",lastname:""}},users(){return this.$store.getters["user/users"]},allDeliveries(){return this.users.filter((t=>"delivery"==t.role_name))},deliveries(){return this.allDeliveries.filter((t=>t.delivery_products.some((t=>this.productIds.includes(t.product_id)))))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(t.id===this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()},getUsers(){this.fetched=!1,Z.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),this.$store.dispatch("user/setFetched",!0),this.fetched=!0}})).catch(this.$handleApiError)}},mounted(){this.selectedId=this.affectation,this.getUsers()}};const s$=(0,d.Z)(e$,[["render",t$]]);var a$=s$,i$={components:{AddOrderConfirmation:kc,AddOrderAffectation:a$,ProductOffers:Kc},props:["visible","order"],data(){return{upsells:An,serverUrl:F,currency:I,isLoading:!1,isAddItem:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],reported_date:null,price:0,sale:{fullname:"",phone:"",city:"",adresse:"",price:0,upsell:null,confirmation:null,counts_from_warehouse:!1}}},watch:{product_id(){this.selectedProduct&&this.selectedProduct.variations.length>0?this.product_variation_id=this.selectedProduct.variations[0].id:this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0},"sale.confirmation":{deep:!0,handler(t){"confirmer"!=t&&(this.sale.affectation=null,this.sale.delivery=null)}},product_ids:{deep:!0,handler(t,e){this.items.map(((s,a)=>{if(0==s.product.id)return s;const i=this.getVariations(s.product)?.variations;return e[a]==t[s]||i.some((t=>t.id==s.product_variation.id))||(s.product_variation={id:0},s.product_variation_id=0),1==i?.length&&(s.product_variation=i[0],s.product_variation_id=i[0].id),s}))}}},computed:{products(){return this.$store.getters["product/products"]},product_images(){return this.items.map((t=>0==t.product.id?null:this.products.find((e=>e.id==t.product.id))?.image))},product_ids(){return this.items.map((t=>t.product.id))},isLoaded(){return this.$store.getters["product/fetched"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,s)=>e.indexOf(t.id)===s))},filtredProducts(){return this.products},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},selectedProduct(){return this.products.find((t=>t.id==this.product_id))},total_price:{get(){const t=this.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(this.sale.price?this.sale.price:0)+parseFloat(t)}},isItemsValid(){if(0==this.items.length)return!1;const t=this.items.some((t=>0==t.product.id||0==t.product_variation_id||0==t.quantity));return!t},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city},formatedItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const s=e.variations.find((e=>e.id==t.product_variation.id));return s?{...t,product:e,product_id:e.id,product_variation:s,product_variation_id:s.id,product_ref:e.ref}:t}));return t}},methods:{deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},handleConfirmationChange(){"confirmer"!=this.sale.confirmation&&(this.sale.affectation=null)},addNewRow(){const t={id:this.item_id,product_id:0,product_ref:null,product:{id:0},product_variation:{id:0},product_variation_id:0,order_id:this.order.id,quantity:0,price:0};this.items.push(t)},getVariations(t){return this.products.find((e=>e.id==t.id))},formatItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const s=e.variations.find((e=>e.id==t.product_variation.id));return s?{...t,product:e,product_id:e.id,product_variation:s,product_variation_id:s.id,product_ref:e.ref}:t}));return this.items=t,t},addItem(){if([this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),s={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:this.price};this.items.push(s),this.product_id=0,this.product_variation_id=0,this.price=0,this.item_id+=1},update(){if(this.formatItems(),!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;if("annuler"==this.sale.confirmation&&!this.sale.note)return this.$alert({type:"warning",title:"Add Cancellation note."}),!1;if(!this.isItemsValid)return this.$alert({type:"warning",title:"Order Items are not valid"}),!1;this.isLoading=!0;const t={id:this.sale.id,fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,upsell:this.sale.upsell,counts_from_warehouse:this.sale.counts_from_warehouse,orderItems:this.items,confirmation:this.sale.confirmation,note:this.sale.note,affectation:this.sale.affectation,reported_agente_note:this.sale.reported_agente_note,reported_agente_date:this.sale.reported_agente_date};"confirmer"!=t.confirmation&&(t.affectation=null,t.delivery=null),this.isLoading=!0,ys.update(t.id,t).then((e=>{"SUCCESS"==e.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"Order updated"}),this.$store.dispatch("order/update",{id:t.id,order:e.data.data.sale}),this.$emit("update:visible",!1),this.$emit("updateOrder",e.data.data.sale))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},handleCancel(){this.sale={...this.order},this.items=[...this.order.items],this.$emit("update:visible",!1)},handleReported(t){this.sale.reported_agente_note=t.reported_agente_note,this.sale.reported_agente_date=t.reported_agente_date},checkVariant(t,e){const s=this.products.find((e=>e.id==t));if(!s)return{exists:!1};let a=s.variations.find((t=>t.id==e));return a||(a=s.variations.length>0?s.variations[0]:null),{exists:!0,variation:a}},getProducts(){return ea.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.sale={...this.order},this.items=[...this.order.items]}};const r$=(0,d.Z)(i$,[["render",BW]]);var l$=r$;const o$={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},n$={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[880px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},d$=(0,i._)("h1",{class:"tw-text-lg"},"Update Order",-1),w$={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},c$={class:"md:tw-col-span-6 tw-col-span-12"},u$=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),p$={class:"md:tw-col-span-6 tw-col-span-12"},m$=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),h$={class:"md:tw-col-span-6 tw-col-span-12"},g$=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),f$=["value"],v$=["value"],y$={class:"md:tw-col-span-6 tw-col-span-12"},_$=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),x$={class:"md:tw-col-span-12 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},b$=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Confirmation",-1),k$={class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},C$={class:"tw-col-span-12"},D$=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note:",-1),S$={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},z$={class:"tw-col-span-12 md:tw-col-span-4"},U$=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Date:",-1),L$={class:"tw-col-span-12 md:tw-col-span-8"},P$=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Note:",-1),A$={class:"md:tw-col-span-6 tw-col-span-12"},W$=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Affectation",-1),$$={class:"md:tw-col-span-6 tw-col-span-12"},E$=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Upsell",-1),O$=["value"],T$=(0,i._)("p",{class:"tw-col-span-12 tw-mt-5 tw-mb-2"},"Order Items",-1),V$={key:5,class:"tw-col-span-12 tw-rounded tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},q$={key:6,class:"md:tw-col-span-12 tw-col-span-12"},R$={class:"tw-max-w-full tw-overflow-auto"},F$={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},I$={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},j$={class:"tw-mx-auto tw-w-[50px] tw-h-[35px] tw-shadow tw-shadow-gray-200 tw-rounded tw-overflow-hidden tw-cursor-pointer"},N$=["src"],M$={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},H$=["onUpdate:modelValue"],Y$=(0,i._)("option",{value:0},"Select",-1),K$=["value"],Z$={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},B$=["disabled","onUpdate:modelValue"],Q$=(0,i._)("option",{value:0},"Select",-1),G$=["value"],J$={key:0},X$={key:1},tE={key:2},eE={key:3},sE=["value"],aE={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},iE={class:"md:tw-col-span-6 tw-col-span-12"},rE=["onUpdate:modelValue"],lE={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},oE={key:0},nE={key:1,class:"md:tw-col-span-6 tw-col-span-12"},dE=["onUpdate:modelValue"],wE={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},cE={class:"tw-w-full tw-col-span-12 tw-flex tw-justify-end tw-mt-3"},uE=(0,i._)("span",{class:"!tw-text-sm !tw-capitalize"},"Add",-1),pE={class:"md:tw-col-span-12 tw-col-span-12"},mE={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},hE=(0,i._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),gE={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},fE=(0,i._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-mb-2 tw-whitespace-nowrap"},"Price: ",-1),vE={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},yE=(0,i._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),_E={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},xE=(0,i._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-whitespace-nowrap"},"Total Price: ",-1),bE={class:"tw-text-xl tw-text-green-500 tw-font-bold tw-px-2 tw-py-1 tw-rounded tw-bg-green-100"},kE={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},CE=(0,i._)("span",{class:"text-white"}," Cancel ",-1),DE=(0,i._)("span",{class:"text-white"}," Update ",-1);function SE(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation"),d=(0,i.up)("AddOrderConfirmation"),w=(0,i.up)("AddOrderAffectation"),c=(0,i.up)("ProductOffers"),u=(0,i.up)("popup-full");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(u,{onCancel:e[16]||(e[16]=e=>t.$emit("update:visible",!1)),visible:s.visible},{default:(0,i.w5)((()=>[o.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",o$,[(0,i.Wm)(n)])),o.isLoaded?((0,i.wg)(),(0,i.iD)("div",n$,[d$,(0,i._)("div",w$,[(0,i._)("div",c$,[u$,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.fullname]])]),(0,i._)("div",p$,[m$,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.phone]])]),(0,i._)("div",h$,[g$,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[(0,i._)("option",{disabled:"",value:l.sale.city},(0,Q.zw)(l.sale.city),9,f$),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.cities,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,v$)))),128))],512),[[a.bM,l.sale.city]])]),(0,i._)("div",y$,[_$,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>l.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.adresse]])]),(0,i._)("div",x$,[b$,(0,i.Wm)(d,{order:l.sale,id:l.sale.id,confirmation:l.sale.confirmation,"onUpdate:confirmation":e[4]||(e[4]=t=>l.sale.confirmation=t),onConfirmed:e[5]||(e[5]=t=>l.sale.note=t),onReported:o.handleReported,onChange:o.handleConfirmationChange},null,8,["order","id","confirmation","onReported","onChange"]),(0,i._)("div",k$,[(0,i._)("div",C$,[D$,(0,i.wy)((0,i._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[6]||(e[6]=t=>l.sale.note=t)},null,512),[[a.nr,l.sale.note]])])]),"reporter"==l.sale.confirmation&&l.sale.reported_agente_date?((0,i.wg)(),(0,i.iD)("div",S$,[(0,i._)("div",z$,[U$,(0,i._)("div",null,(0,Q.zw)(l.sale.reported_agente_date.split("T")[0]),1)]),(0,i._)("div",L$,[P$,(0,i.wy)((0,i._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[7]||(e[7]=t=>l.sale.reported_agente_note=t)},null,512),[[a.nr,l.sale.reported_agente_note]])])])):(0,i.kq)("",!0)]),(0,i._)("div",A$,[W$,(0,i.Wm)(w,{"product-ids":o.product_ids,items:l.items,order:l.sale,confirmation:l.sale.confirmation,affectation:l.sale.affectation,"onUpdate:affectation":e[8]||(e[8]=t=>l.sale.affectation=t),id:l.sale.id},null,8,["product-ids","items","order","confirmation","affectation","id"])]),(0,i._)("div",$$,[E$,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>l.sale.upsell=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.upsells,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.value,key:t.id},(0,Q.zw)(t.name),9,O$)))),128))],512),[[a.bM,l.sale.upsell]])]),(0,i.kq)("",!0),(0,i.kq)("",!0),(0,i.kq)("",!0),(0,i.kq)("",!0),(0,i.kq)("",!0),T$,l.items.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",V$," No Order items ")),l.items.length?((0,i.wg)(),(0,i.iD)("div",q$,[(0,i._)("div",R$,[((0,i.wg)(),(0,i.iD)("table",{key:l.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,i._)("thead",F$,[(0,i._)("tr",null,[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,i._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,i._)("div",I$,(0,Q.zw)(t),1)],2))),64))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.items,((t,e)=>((0,i.wg)(),(0,i.iD)("tr",{key:t,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[((0,i.wg)(),(0,i.iD)("th",{scope:"row",class:"tw-px-2 tw-py-2",key:t.product.id},[(0,i._)("div",j$,[o.product_images[e]?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tw-w-full tw-h-full tw-object-contain",src:l.serverUrl+"storage/"+o.product_images[e]},null,8,N$)):(0,i.kq)("",!0)])])),(0,i._)("th",M$,[(0,i._)("div",null,[(0,i._)("div",null,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e=>t.product.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[Y$,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.filtredProducts,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,K$)))),128))],8,H$),[[a.bM,t.product.id]])])])]),(0,i._)("th",Z$,[(0,i._)("div",null,[0!=t.product.id?(0,i.wy)(((0,i.wg)(),(0,i.iD)("select",{key:0,disabled:1==o.getVariations(t.product)?.variations?.length,"onUpdate:modelValue":e=>t.product_variation.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[Q$,o.getVariations(t.product)?.variations?.length>1?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(o.getVariations(t.product)?.variations,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},[t.size||t.color?t.size&&"-"!=t.size&&t.color&&"-"!=t.color?((0,i.wg)(),(0,i.iD)("p",X$,(0,Q.zw)(t.size)+" / "+(0,Q.zw)(t.color),1)):t.size&&"-"!=t.size?((0,i.wg)(),(0,i.iD)("p",tE,(0,Q.zw)(t.size),1)):t.color?((0,i.wg)(),(0,i.iD)("p",eE,(0,Q.zw)(t.color),1)):(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",J$,"-"))],8,G$)))),128)):((0,i.wg)(),(0,i.iD)("option",{key:1,value:o.getVariations(t.product)?.variations[0]?.id}," Default ",8,sE))],8,B$)),[[a.bM,t.product_variation.id]]):(0,i.kq)("",!0)])]),(0,i._)("th",aE,[(0,i._)("div",iE,[(0,i.wy)((0,i._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,rE),[[a.nr,t.quantity]])])]),(0,i._)("th",lE,[(0,i._)("div",null,[null==t.price?((0,i.wg)(),(0,i.iD)("div",oE," - ")):((0,i.wg)(),(0,i.iD)("div",nE,[(0,i.wy)((0,i._)("input",{type:"number","onUpdate:modelValue":e=>t.price=e,placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,dE),[[a.nr,t.price]])]))])]),(0,i._)("th",wE,[(0,i._)("div",null,[(0,i.Wm)(G.T,{onClick:e=>o.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])]))])])):(0,i.kq)("",!0),(0,i._)("div",cE,[(0,i._)("div",null,[(0,i.Wm)(G.T,{onClick:o.addNewRow,class:"mr-2 !tw-px-1 !tw-py-1 !tw-pr-2 tw-flex tw-items-center tw-gap-2","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-plus")])),_:1}),uE])),_:1},8,["onClick"])])]),(0,i._)("div",pE,[(0,i.Wm)(c,{"product-ids":o.product_ids},null,8,["product-ids"])]),(0,i._)("div",mE,[hE,(0,i._)("div",gE,[fE,(0,i.wy)((0,i._)("input",{type:"number","onUpdate:modelValue":e[15]||(e[15]=t=>l.sale.price=t),class:"tw-py-1 tw-max-w-[100px] tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.price]])])]),(0,i._)("div",vE,[yE,(0,i._)("div",_E,[xE,(0,i._)("div",bE,(0,Q.zw)(l.currency)+" "+(0,Q.zw)(o.total_price),1)])])]),(0,i._)("div",kE,[(0,i.Wm)(G.T,{onClick:o.handleCancel,color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[CE])),_:1},8,["onClick"]),(0,i.Wm)(G.T,{loading:l.isLoading,onClick:o.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[DE])),_:1},8,["loading","onClick"])])])):(0,i.kq)("",!0)])),_:1},8,["visible"])])}var zE={components:{AddOrderConfirmation:kc,AddOrderAffectation:a$,ProductOffers:qh},props:["visible","order"],data(){return{upsells:An,serverUrl:F,currency:I,isLoading:!1,isAddItem:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],reported_date:null,price:0,sale:{fullname:"",phone:"",city:"",adresse:"",price:0,upsell:null,confirmation:null,counts_from_warehouse:!1}}},watch:{product_id(){this.selectedProduct&&this.selectedProduct.variations.length>0?this.product_variation_id=this.selectedProduct.variations[0].id:this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0},"sale.confirmation":{deep:!0,handler(t){"confirmer"!=t&&(this.sale.affectation=null,this.sale.delivery=null)}},product_ids:{deep:!0,handler(t,e){this.items.map(((s,a)=>{if(0==s.product.id)return s;const i=this.getVariations(s.product)?.variations;return e[a]==t[s]||i.some((t=>t.id==s.product_variation.id))||(s.product_variation={id:0},s.product_variation_id=0),1==i?.length&&(s.product_variation=i[0],s.product_variation_id=i[0].id),s}))}}},computed:{products(){return this.$store.getters["product/products"]},product_images(){return this.items.map((t=>0==t.product.id?null:this.products.find((e=>e.id==t.product.id))?.image))},product_ids(){return this.items.map((t=>t.product.id))},isLoaded(){return this.$store.getters["product/fetched"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,s)=>e.indexOf(t.id)===s))},filtredProducts(){return this.products},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},selectedProduct(){return this.products.find((t=>t.id==this.product_id))},total_price:{get(){const t=this.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(this.sale.price?this.sale.price:0)+parseFloat(t)}},isItemsValid(){if(0==this.items.length)return!1;const t=this.items.some((t=>0==t.product.id||0==t.product_variation_id||0==t.quantity));return!t},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city},formatedItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const s=e.variations.find((e=>e.id==t.product_variation.id));return s?{...t,product:e,product_id:e.id,product_variation:s,product_variation_id:s.id,product_ref:e.ref}:t}));return t}},methods:{deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},handleConfirmationChange(){"confirmer"!=this.sale.confirmation&&(this.sale.affectation=null)},addNewRow(){const t={id:this.item_id,product_id:0,product_ref:null,product:{id:0},product_variation:{id:0},product_variation_id:0,order_id:this.order.id,quantity:0,price:0};this.items.push(t)},getVariations(t){return this.products.find((e=>e.id==t.id))},formatItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const s=e.variations.find((e=>e.id==t.product_variation.id));return s?{...t,product:e,product_id:e.id,product_variation:s,product_variation_id:s.id,product_ref:e.ref}:t}));return this.items=t,t},addItem(){if([this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),s={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:this.price};this.items.push(s),this.product_id=0,this.product_variation_id=0,this.price=0,this.item_id+=1},update(){if(this.formatItems(),!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;if("annuler"==this.sale.confirmation&&!this.sale.note)return this.$alert({type:"warning",title:"Add Cancellation note."}),!1;if(!this.isItemsValid)return this.$alert({type:"warning",title:"Order Items are not valid"}),!1;const t={id:this.sale.id,fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,upsell:this.sale.upsell,counts_from_warehouse:this.sale.counts_from_warehouse,orderItems:this.items,confirmation:this.sale.confirmation,note:this.sale.note,affectation:this.sale.affectation,reported_agente_note:this.sale.reported_agente_note,reported_agente_date:this.sale.reported_agente_date};"confirmer"!=t.confirmation&&(t.affectation=null,t.delivery=null),this.isLoading=!0,ys.update(t.id,t).then((t=>{"SUCCESS"==t.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"Order updated"}),this.$emit("update:visible",!1),this.$emit("updateOrder",t.data.data.sale))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},handleCancel(){this.sale={...this.order},this.items=[...this.order.items],this.$emit("update:visible",!1)},handleReported(t){this.sale.reported_agente_note=t.reported_agente_note,this.sale.reported_agente_date=t.reported_agente_date},getProducts(){return ea.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.sale={...this.order},this.items=[...this.order.items]}};const UE=(0,d.Z)(zE,[["render",SE]]);var LE=UE,PE={emits:["updateOrder"],components:{UpdateOrder:l$,UpdateDoubleOrder:LE},props:{order:{required:!0},only:{required:!1,default:["update","whatsapp"]},double:{required:!1,default:!1}},name:"orderActions",data(){return{showPopup:!1,showUpdatePopup:!1,isLoading:!1,newOrder:null}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{},mounted(){}};const AE=(0,d.Z)(PE,[["render",LA]]);var WE=AE,$E={props:["order","showNote"],components:{OrderConfirmation:cA,OrderUpsell:fA,OrderAffectation:DA,OrderActions:WE},data(){return{showPopup:!1,isLoading:!1,newNote:"",newOrder:null,todayDate:null}},computed:{id(){return this.order.id},fullname(){return this.order.fullname},product_name(){return this.order.product_name},agente_id(){return this.order.agente_id},upsell(){return this.order.upsell},phone(){return this.order.phone},city(){return this.order.city},adresse(){return this.order.adresse},quantity(){return this.order.quantity},price(){return this.order.price},confirmation(){return this.order.confirmation},affectation(){return this.order.affectation},delivery(){return this.order.delivery},note(){return this.order.note},created_at(){return this.order?.created_at}},methods:{getPrice(t){return Nr(t)},handleClick(){this.showPopup=!0,this.newNote=this.note},handleResolved(t){t?(this.showPopup=!1,this.isLoading=!0,ys.agenteUpdateNote(this.id,this.newNote).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.$store.dispatch("order/updateNote",{note:this.newNote,id:this.id}))}),this.$handleApiError).finally((()=>this.isLoading=!1))):this.showPopup=!1},isReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date?.split("T")[0]==this.todayDate}},mounted(){this.newOrder=this.order;const t=new Date,e=t.getDate(),s=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,i=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getFullYear();this.todayDate=`${r}-${i}-${s}`}};const EE=(0,d.Z)($E,[["render",RP]]);var OE=EE,TE={props:["orders","note"],data(){return{allowedLimit:[5,10,20,50,100,200,500],currentPage:1,paginationLimit:50,todayDate:null,columnsNote:["id","date","client","product","confirmation","affectation","price","city","note","actions"],columnsNormal:["id","date","client","product","confirmation","affectation","price","city","actions"]}},components:{OrderRow:OE},computed:{columns(){return this.note?this.columnsNote:this.columnsNormal},deliveries(){return this.$store.getters["user/deliveries"]},prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.orders.length/this.paginationLimit)},items(){const t=[...this.reportedForToday,...this.orders.filter((t=>!this.isReportedToday(t)))];return t.slice(this.prevRange,this.nextRange)},reportedForToday(){return this.orders.filter(this.isReportedToday)}},methods:{getDeliveries(){Z.deliveries().then((t=>{this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)},isReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date?.split("T")[0]==this.todayDate}},mounted(){0==this.deliveries.length&&this.getDeliveries();const t=new Date,e=t.getDate(),s=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,i=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getFullYear();this.todayDate=`${r}-${i}-${s}`,console.log(this.reportedForToday)}};const VE=(0,d.Z)(TE,[["render",uP]]);var qE=VE;const RE={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},FE={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[950px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},IE=(0,i._)("h1",{class:"tw-text-lg"},"Update Order",-1),jE={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},NE={class:"md:tw-col-span-6 tw-col-span-12"},ME=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),HE={class:"md:tw-col-span-6 tw-col-span-12"},YE=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),KE={class:"md:tw-col-span-6 tw-col-span-12"},ZE=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),BE=["value"],QE=["value"],GE={class:"md:tw-col-span-6 tw-col-span-12"},JE=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),XE={class:"md:tw-col-span-12 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},tO=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Confirmation",-1),eO={class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},sO={class:"tw-col-span-12"},aO=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note:",-1),iO={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},rO={class:"tw-col-span-12 md:tw-col-span-4"},lO=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Date:",-1),oO={class:"tw-col-span-12 md:tw-col-span-8"},nO=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Note:",-1),dO={class:"md:tw-col-span-6 tw-col-span-12"},wO=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Affectation",-1),cO={class:"md:tw-col-span-6 tw-col-span-12"},uO=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Upsell",-1),pO=["value"],mO={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-4"},hO={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},gO={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit -tw-rotate-90 tw-scale-75"},fO=(0,i._)("div",{class:"tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),vO={class:"tw-flex tw-flex-col tw-justify-center"},yO=(0,i._)("p",{class:"tw-col-span-12 tw-mt-5 tw-mb-2"},"Order Items",-1),_O={key:1,class:"tw-col-span-12 tw-rounded tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},xO={key:2,class:"md:tw-col-span-12 tw-col-span-12"},bO={class:"tw-max-w-full tw-overflow-auto"},kO={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},CO={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},DO={class:"tw-mx-auto tw-w-[50px] tw-h-[35px] tw-shadow tw-shadow-gray-200 tw-rounded tw-overflow-hidden tw-cursor-pointer"},SO=["src"],zO={scope:"row",class:"tw-pr-6 tw-py-2 tw-font-medium tw-text-gray-900"},UO=["onUpdate:modelValue"],LO=(0,i._)("option",{value:0},"Select",-1),PO=["value"],AO={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},WO=["disabled","onUpdate:modelValue"],$O=(0,i._)("option",{value:0},"Select",-1),EO=["value"],OO={key:0},TO={key:1},VO={key:2},qO={key:3},RO=["value"],FO={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},IO={class:"md:tw-col-span-6 tw-col-span-12"},jO=["onUpdate:modelValue"],NO={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},MO={key:0},HO={key:1,class:"md:tw-col-span-6 tw-col-span-12"},YO=["onUpdate:modelValue"],KO={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},ZO={class:"tw-w-full tw-col-span-12 tw-flex tw-justify-end tw-mt-3"},BO=(0,i._)("span",{class:"!tw-text-sm !tw-capitalize"},"Add",-1),QO={class:"md:tw-col-span-12 tw-col-span-12"},GO={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},JO=(0,i._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),XO={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},tT=(0,i._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-mb-2 tw-whitespace-nowrap"},"Price: ",-1),eT={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},sT=(0,i._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),aT={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},iT=(0,i._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-whitespace-nowrap"},"Total Price: ",-1),rT={class:"tw-text-xl tw-text-green-500 tw-font-bold tw-px-2 tw-py-1 tw-rounded tw-bg-green-100"},lT={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},oT=(0,i._)("span",{class:"text-white"}," Cancel ",-1),nT=(0,i._)("span",{class:"text-white"}," Create ",-1);function dT(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation"),d=(0,i.up)("AddOrderConfirmation"),w=(0,i.up)("AddOrderAffectation"),c=(0,i.up)("ProductOffers"),u=(0,i.up)("popup-full");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(u,{onCancel:e[14]||(e[14]=e=>t.$emit("update:visible",!1)),visible:s.visible},{default:(0,i.w5)((()=>[o.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",RE,[(0,i.Wm)(n)])),o.isLoaded?((0,i.wg)(),(0,i.iD)("div",FE,[IE,(0,i._)("div",jE,[(0,i._)("div",NE,[ME,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.fullname]])]),(0,i._)("div",HE,[YE,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.phone]])]),(0,i._)("div",KE,[ZE,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[(0,i._)("option",{disabled:"",value:l.sale.city},(0,Q.zw)(l.sale.city),9,BE),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.cities,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,QE)))),128))],512),[[a.bM,l.sale.city]])]),(0,i._)("div",GE,[JE,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>l.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.adresse]])]),(0,i._)("div",XE,[tO,(0,i.Wm)(d,{order:l.sale,id:l.sale.id,confirmation:l.sale.confirmation,"onUpdate:confirmation":e[4]||(e[4]=t=>l.sale.confirmation=t),onConfirmed:e[5]||(e[5]=t=>l.sale.note=t),onReported:o.handleReported,onChange:o.handleConfirmationChange},null,8,["order","id","confirmation","onReported","onChange"]),(0,i._)("div",eO,[(0,i._)("div",sO,[aO,(0,i.wy)((0,i._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[6]||(e[6]=t=>l.sale.note=t)},null,512),[[a.nr,l.sale.note]])])]),"reporter"==l.sale.confirmation&&l.sale.reported_agente_date?((0,i.wg)(),(0,i.iD)("div",iO,[(0,i._)("div",rO,[lO,(0,i._)("div",null,(0,Q.zw)(l.sale.reported_agente_date.split("T")[0]),1)]),(0,i._)("div",oO,[nO,(0,i.wy)((0,i._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[7]||(e[7]=t=>l.sale.reported_agente_note=t)},null,512),[[a.nr,l.sale.reported_agente_note]])])])):(0,i.kq)("",!0)]),(0,i._)("div",dO,[wO,(0,i.Wm)(w,{"product-ids":o.product_ids,items:l.items,"onUpdate:items":e[8]||(e[8]=t=>l.items=t),order:l.sale,confirmation:l.sale.confirmation,affectation:l.sale.affectation,"onUpdate:affectation":e[9]||(e[9]=t=>l.sale.affectation=t),id:l.sale.id},null,8,["product-ids","items","order","confirmation","affectation","id"])]),(0,i._)("div",cO,[uO,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>l.sale.upsell=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.upsells,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.value,key:t.id},(0,Q.zw)(t.name),9,pO)))),128))],512),[[a.bM,l.sale.upsell]])]),(0,i.kq)("",!0),(0,i._)("div",mO,[(0,i._)("div",hO,[(0,i._)("label",gO,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=t=>l.sale.counts_from_warehouse=t),class:"tw-sr-only tw-peer"},null,512),[[a.e8,l.sale.counts_from_warehouse]]),fO]),(0,i._)("label",vO,[(0,i._)("span",{class:(0,Q.C_)([[l.sale.counts_from_warehouse?"tw-text-orange-500":"tw-text-neutral-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Warehouse",2),(0,i._)("span",{class:(0,Q.C_)([[l.sale.counts_from_warehouse?"tw-text-neutral-500":"tw-text-orange-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Delivery",2)])])]),yO,l.items.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",_O," No Order items ")),l.items.length?((0,i.wg)(),(0,i.iD)("div",xO,[(0,i._)("div",bO,[((0,i.wg)(),(0,i.iD)("table",{key:l.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,i._)("thead",kO,[(0,i._)("tr",null,[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,i._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,i._)("div",CO,(0,Q.zw)(t),1)],2))),64))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.items,((t,e)=>((0,i.wg)(),(0,i.iD)("tr",{key:t.product.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[((0,i.wg)(),(0,i.iD)("th",{scope:"row",class:"tw-px-2 tw-py-2",key:t.product.id},[(0,i._)("div",DO,[o.product_images[e]?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tw-w-full tw-h-full tw-object-contain",src:l.serverUrl+"storage/"+o.product_images[e]},null,8,SO)):(0,i.kq)("",!0)])])),(0,i._)("th",zO,[(0,i._)("div",null,[(0,i._)("div",null,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e=>t.product.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[LO,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.filtredProducts,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,PO)))),128))],8,UO),[[a.bM,t.product.id]])])])]),(0,i._)("th",AO,[(0,i._)("div",null,[0!=t.product.id?(0,i.wy)(((0,i.wg)(),(0,i.iD)("select",{key:0,disabled:1==o.getVariations(t.product)?.variations?.length,"onUpdate:modelValue":e=>t.product_variation.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[$O,o.getVariations(t.product)?.variations?.length>1?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(o.getVariations(t.product)?.variations,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},[t.size||t.color?t.size&&"-"!=t.size&&t.color&&"-"!=t.color?((0,i.wg)(),(0,i.iD)("p",TO,(0,Q.zw)(t.size)+" / "+(0,Q.zw)(t.color),1)):t.size&&"-"!=t.size?((0,i.wg)(),(0,i.iD)("p",VO,(0,Q.zw)(t.size),1)):t.color?((0,i.wg)(),(0,i.iD)("p",qO,(0,Q.zw)(t.color),1)):(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",OO,"-"))],8,EO)))),128)):((0,i.wg)(),(0,i.iD)("option",{key:1,value:o.getVariations(t.product)?.variations[0]?.id}," Default ",8,RO))],8,WO)),[[a.bM,t.product_variation.id]]):(0,i.kq)("",!0)])]),(0,i._)("th",FO,[(0,i._)("div",IO,[(0,i.wy)((0,i._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,jO),[[a.nr,t.quantity]])])]),(0,i._)("th",NO,[(0,i._)("div",null,[null==t.price?((0,i.wg)(),(0,i.iD)("div",MO," - ")):((0,i.wg)(),(0,i.iD)("div",HO,[(0,i.wy)((0,i._)("input",{type:"number","onUpdate:modelValue":e=>t.price=e,placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,YO),[[a.nr,t.price]])]))])]),(0,i._)("th",KO,[(0,i._)("div",null,[(0,i.Wm)(G.T,{onClick:e=>o.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])]))])])):(0,i.kq)("",!0),(0,i._)("div",ZO,[(0,i._)("div",null,[(0,i.Wm)(G.T,{onClick:o.addNewRow,class:"mr-2 !tw-px-1 !tw-py-1 !tw-pr-2 tw-flex tw-items-center tw-gap-2","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-plus")])),_:1}),BO])),_:1},8,["onClick"])])]),(0,i._)("div",QO,[(0,i.Wm)(c,{"product-ids":o.product_ids},null,8,["product-ids"])]),(0,i._)("div",GO,[JO,(0,i._)("div",XO,[tT,(0,i.wy)((0,i._)("input",{type:"number","onUpdate:modelValue":e[13]||(e[13]=t=>l.sale.price=t),class:"tw-py-1 tw-max-w-[100px] tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sale.price]])])]),(0,i._)("div",eT,[sT,(0,i._)("div",aT,[iT,(0,i._)("div",rT,(0,Q.zw)(l.currency)+" "+(0,Q.zw)(o.total_price),1)])])]),(0,i._)("div",lT,[(0,i.Wm)(G.T,{onClick:o.handleCancel,color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[oT])),_:1},8,["onClick"]),(0,i.Wm)(G.T,{loading:l.isLoading,onClick:o.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[nT])),_:1},8,["loading","onClick"])])])):(0,i.kq)("",!0)])),_:1},8,["visible"])])}var wT={components:{AddOrderConfirmation:kc,AddOrderAffectation:Ac,ProductOffers:Kc},props:["visible","order"],data(){return{upsells:An,serverUrl:F,currency:I,isLoading:!1,isAddItem:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],reported_date:null,price:0,sale:{fullname:"",phone:"",city:"",adresse:"",price:0,upsell:null,confirmation:null,counts_from_warehouse:!0}}},watch:{product_id(){this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0},"sale.confirmation":{deep:!0,handler(t){"confirmer"!=t&&(this.sale.affectation=null,this.sale.delivery=null)}},product_ids:{deep:!0,handler(t,e){this.items.map(((s,a)=>{if(0==s.product.id)return s;const i=this.getVariations(s.product)?.variations;return e[a]==t[s]||i.some((t=>t.id==s.product_variation.id))||(s.product_variation={id:0},s.product_variation_id=0),1==i?.length&&(s.product_variation=i[0],s.product_variation_id=i[0].id),s}))}}},computed:{products(){return this.$store.getters["product/products"]},product_images(){return this.items.map((t=>0==t.product.id?null:this.products.find((e=>e.id==t.product.id))?.image))},product_ids(){return this.items.map((t=>t.product.id))},isLoaded(){return this.$store.getters["product/fetched"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,s)=>e.indexOf(t.id)===s))},filtredProducts(){return this.products},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},selectedProduct(){return this.products.find((t=>t.id==this.product_id))},total_price:{get(){const t=this.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(this.sale.price?this.sale.price:0)+parseFloat(t)}},isItemsValid(){if(0==this.items.length)return!1;const t=this.items.some((t=>0==t.product.id||0==t.product_variation_id||0==t.quantity));return!t},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city}},methods:{deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},handleConfirmationChange(){"confirmer"!=this.sale.confirmation&&(this.sale.affectation=null)},addNewRow(){const t={id:this.item_id,product_id:0,product_ref:null,product:{id:0},product_variation:{id:0},product_variation_id:0,quantity:0,price:0};this.items.push(t)},getVariations(t){return this.products.find((e=>e.id==t.id))},formatItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const s=e.variations.find((e=>e.id==t.product_variation.id));return s?{...t,product:e,product_id:e.id,product_variation:s,product_variation_id:s.id,product_ref:e.ref}:t}));return this.items=t,t},addItem(){if([this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),s={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:this.price};this.items.push(s),this.product_id=0,this.product_variation_id=0,this.price=0,this.item_id+=1},create(){if(this.formatItems(),!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;if("annuler"==this.sale.confirmation&&!this.sale.note)return this.$alert({type:"warning",title:"Add Cancellation note."}),!1;if(!this.isItemsValid)return this.$alert({type:"warning",title:"Order Items are not valid"}),!1;this.isLoading=!0;const t={fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,upsell:this.sale.upsell,counts_from_warehouse:this.sale.counts_from_warehouse,orderItems:this.items,confirmation:this.sale.confirmation,note:this.sale.note,affectation:this.sale.affectation,reported_agente_note:this.sale.reported_agente_note,reported_agente_date:this.sale.reported_agente_date};this.isLoading=!0,ys.create(t).then((t=>{"SALE_ADDED"==t.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"New Order Added"}),this.$store.dispatch("order/addOrder",t.data.data.sale),this.$emit("update:visible",!1))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},handleCancel(){this.$emit("update:visible",!1)},handleReported(t){this.sale.reported_agente_note=t.reported_agente_note,this.sale.reported_agente_date=t.reported_agente_date},checkVariant(t,e){const s=this.products.find((e=>e.id==t));if(!s)return{exists:!1};let a=s.variations.find((t=>t.id==e));return a||(a=s.variations.length>0?s.variations[0]:null),{exists:!0,variation:a}},getProducts(){return ea.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){}};const cT=(0,d.Z)(wT,[["render",dT]]);var uT=cT,pT={components:{OrdersTable:qE,AddNewOrder:uT},data(){return{localUrl:R,confirmations:Ln,isLoaded:!1,showFilters:!1,confirmationFilter:"all",affectationFilter:"all",upsellFilter:"all",search:"",showPopup:!1,sorting:{sortBy:null,orderBy:"asc",fields:[{name:"Select",value:null},{name:"ID",value:"id"},{name:"Created At",value:"created_at"}],options:[{name:"Ascending",value:"asc"},{name:"Descending",value:"desc"}]}}},computed:{orders(){return this.$store.getters["order/orders"]},sortedOrders(){const t=this.orders;return t.sort(((t,e)=>{switch(this.sorting.sortBy){case"created_at":return"asc"==this.sorting.orderBy?new Date(t.created_at)-new Date(e.created_at):new Date(e.created_at)-new Date(t.created_at);case"id":return"asc"==this.sorting.orderBy?t.id-e.id:e.id-t.id;default:return!0}}))},deliveries(){return this.$store.getters["user/deliveries"]},filteredOrders(){const t=this.confirmationFilter,e=this.affectationFilter,s=this.upsellFilter;return this.sortedOrders.filter((a=>{if("all"!==t&&a.confirmation!==t)return!1;if("all"!==e&&parseInt(a.affectation)!==parseInt(e))return!1;if("all"!==s&&a.upsell!==s)return!1;const i=((t,e)=>{for(const s in t)if(!["created_at","updated_at","sheets_id","reported_agente_note","reported_agente_note","reported_agente_date","reported_delivery_note","reported_delivery_date"].includes(s)&&String(t[s]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(a,this.search);return!!i}))}},methods:{async getDeliveries(){await Z.deliveries().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)},getOrders(){ys.agenteOrders().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("order/setOrders",e),console.log(t.data),this.isLoaded=!0}})).catch(this.$handleApiError)}},mounted(){this.$store.dispatch("order/setOrders",[]),this.getOrders()}};const mT=(0,d.Z)(pT,[["render",JL]]);var hT=mT;const gT=(0,i._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,i._)("div",null,[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Order"),(0,i._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Order Details")])],-1),fT={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},vT={class:""},yT={class:"text-white"},_T={key:0},xT={class:"mt-5"},bT={key:0,class:"tw-py-5"},kT=(0,i._)("p",{class:"tw-text-neutral-400 tw-text-md"},"Original Order: ",-1),CT={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},DT={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},ST=(0,i._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,i._)("tr",null,[(0,i._)("th",{scope:"col",class:"px-6 py-3"}," # "),(0,i._)("th",{scope:"col",class:"px-6 py-3"}," Client "),(0,i._)("th",{scope:"col",class:"px-6 py-3"}," Phone "),(0,i._)("th",{scope:"col",class:"px-6 py-3"}," Product "),(0,i._)("th",{scope:"col",class:"px-6 py-3"}," Price "),(0,i._)("th",{scope:"col",class:"px-6 py-3"}," City "),(0,i._)("th",{scope:"col",class:"px-6 py-3"}," Adresse "),(0,i._)("th",{scope:"col",class:"px-6 py-3"},[(0,i._)("span",{class:"sr-only"},"Edit")])])],-1),zT={class:"tw-bg-white tw-border-b"},UT={scope:"row",class:"px-6 py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},LT={scope:"row",class:"px-6 py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},PT={class:"px-6 py-4 tw-flex tw-items-center"},AT={class:"px-6 py-4"},WT={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},$T={key:0},ET={key:1},OT={class:"px-6 py-4"},TT={class:"px-6 py-4"},VT={class:"px-6 py-4"},qT={class:"px-6 py-4"},RT={class:"tw-flex tw-gap-2 tw-justify-end tw-mt-5"},FT=(0,i._)("span",{class:"text-white"}," Save ",-1),IT={key:1},jT=(0,i._)("p",{class:"tw-text-neutral-400 tw-py-5"},"No Order was found !",-1),NT=[jT];function MT(t,e,s,a,r,l){const o=(0,i.up)("NewOrder"),n=(0,i.up)("UpdateOrder");return(0,i.wg)(),(0,i.iD)("div",null,[gT,(0,i._)("div",fT,[(0,i._)("div",vT,[(0,i._)("div",null,[(0,i.Wm)(G.T,{onClick:l.addOrder,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[(0,i._)("span",yT,(0,Q.zw)(r.isLoaded?"Add Order":"Loading..."),1),r.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(X.t,{key:0,icon:"mdi-autorenew",class:"ml-2 text-white tw-animate-spin"}))])),_:1},8,["onClick"])]),r.isLoaded&&r.isOrderExists?((0,i.wg)(),(0,i.iD)("div",_T,[(0,i._)("div",xT,[r.newOrder.product_name?((0,i.wg)(),(0,i.iD)("div",bT,[kT,(0,i._)("p",null,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.newOrder.product_name.split("\n"),(t=>((0,i.wg)(),(0,i.iD)("li",{key:t,class:"tw-font-bold"}," - "+(0,Q.zw)(t),1)))),128))])])])):(0,i.kq)("",!0),(0,i._)("div",CT,[(0,i._)("table",DT,[ST,(0,i._)("tbody",null,[(0,i._)("tr",zT,[(0,i._)("th",UT,(0,Q.zw)(r.newOrder.id),1),(0,i._)("th",LT,(0,Q.zw)(r.newOrder.fullname),1),(0,i._)("td",PT,[(0,i.Uk)((0,Q.zw)(r.newOrder.phone)+" ",1),(0,i.Wm)(G.T,{link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+r.newOrder.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"text",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"green"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])]),(0,i._)("td",AT,[(0,i._)("p",null,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.newOrder.items,(t=>((0,i.wg)(),(0,i.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,i.Uk)(" - "),(0,i._)("span",WT,(0,Q.zw)(t.quantity)+" X ",1),(0,i.Uk)((0,Q.zw)(t.product.name)+" ",1),t.product_variation.size?((0,i.wg)(),(0,i.iD)("span",$T,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,i.kq)("",!0),t.product_variation.color?((0,i.wg)(),(0,i.iD)("span",ET,"| "+(0,Q.zw)(t.product_variation.color),1)):(0,i.kq)("",!0)])))),128))])])]),(0,i._)("td",OT,(0,Q.zw)(l.getPrice(r.newOrder)),1),(0,i._)("td",TT,(0,Q.zw)(r.newOrder.city),1),(0,i._)("td",VT,(0,Q.zw)(r.newOrder.adresse),1),(0,i._)("td",qT,[(r.newOrder.upsell,(0,i.wg)(),(0,i.j4)(G.T,{key:0,onClick:e[0]||(e[0]=t=>r.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-pencil-outline")])),_:1})])),_:1}))])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.doubles.filter((t=>t.id!=r.newOrder.id)),(t=>((0,i.wg)(),(0,i.j4)(o,{onUpdate:l.handleDoubleUpdate,order:t,key:t.id},null,8,["onUpdate","order"])))),128))])])])]),(0,i._)("div",RT,[(0,i.Wm)(G.T,{onClick:l.clearOrder,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[FT])),_:1},8,["onClick"])])])):(0,i.kq)("",!0),r.isLoaded&&!r.isOrderExists?((0,i.wg)(),(0,i.iD)("div",IT,NT)):(0,i.kq)("",!0)])]),r.showUpdatePopup?((0,i.wg)(),(0,i.j4)(n,{key:0,onUpdateOrder:l.handleUpdateOrder,visible:r.showUpdatePopup,"onUpdate:visible":e[1]||(e[1]=t=>r.showUpdatePopup=t),order:r.newOrder},null,8,["onUpdateOrder","visible","order"])):(0,i.kq)("",!0)])}const HT={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},YT={class:"tw-px-6 tw-py-4 tw-relative"},KT={class:"tw-absolute tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-text-xs"},ZT={class:"tw-bg-purple-500/10 tw-text-purple-500 tw-px-2 tw-rounded-t"},BT={class:"px-6 py-4 tw-flex tw-items-center"},QT={class:"tw-px-6 tw-py-4 tw-relative"},GT={class:"tw-pb-2"},JT={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},XT={key:0},tV={key:1},eV={class:"tw-px-6 tw-py-4"},sV={class:"tw-px-6 tw-py-4"},aV={class:"tw-px-6 tw-py-4"},iV={key:3,class:"tw-px-6 tw-py-4"},rV={class:"tw-max-w-[300px] tw-min-w-[150px] tw-whitespace-normal"},lV={class:"tw-px-6 tw-py-4"},oV={class:"tw-min-w-[300px]"},nV=(0,i._)("p",null,"Edit note",-1);function dV(t,e,s,a,r,l){(0,i.up)("OrderUpsell"),(0,i.up)("OrderConfirmation"),(0,i.up)("OrderAffectation");const o=(0,i.up)("OrderActions"),n=(0,i.up)("popup");return(0,i.wg)(),(0,i.iD)(i.HY,null,[((0,i.wg)(),(0,i.iD)("tr",{key:s.order.id,class:(0,Q.C_)([["reporter"==s.order.confirmation&&"tw-relative",l.isReportedToday(s.order)&&"!tw-border tw-border-red-400"],"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"])},[(0,i._)("th",HT,(0,Q.zw)(l.id),1),(0,i._)("td",YT,[(0,i._)("p",null,(0,Q.zw)(l.fullname),1),(0,i._)("div",KT,[(0,i._)("p",ZT," Maybe Double: "+(0,Q.zw)(s.order.double),1)])]),(0,i._)("td",BT,[(0,i.Uk)((0,Q.zw)(s.order.phone)+" ",1),(0,i.Wm)(G.T,{link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+s.order.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"text",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"green"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])]),(0,i._)("td",QT,[(0,i._)("div",GT,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.order.items,(t=>((0,i.wg)(),(0,i.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,i.Uk)(" - "),(0,i._)("span",JT,(0,Q.zw)(t.quantity)+" X ",1),(0,i.Uk)((0,Q.zw)(t.product.name)+" ",1),t.product_variation.size?((0,i.wg)(),(0,i.iD)("span",XT,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,i.kq)("",!0),t.product_variation.color?((0,i.wg)(),(0,i.iD)("span",tV,"| "+(0,Q.zw)(t.product_variation.color),1)):(0,i.kq)("",!0)])))),128))])])]),(0,i.kq)("",!0),(0,i.kq)("",!0),(0,i.kq)("",!0),(0,i._)("td",eV,(0,Q.zw)(l.getPrice(s.order)),1),(0,i._)("td",sV,(0,Q.zw)(s.order.city),1),(0,i._)("td",aV,(0,Q.zw)(s.order.adresse),1),s.showNote?((0,i.wg)(),(0,i.iD)("td",iV,[(0,i._)("div",rV,[(0,i.Uk)((0,Q.zw)(s.order.note)+" ",1),(0,i.Wm)(X.t,{onClick:l.handleClick,size:"x-small",class:(0,Q.C_)(["tw-ml-2 tw-text-blue-500 tw-cursor-pointer hover:tw-bg-neutral-900/10 tw-rounded-full tw-p-3",{"tw-animate-spin":r.isLoading}])},{default:(0,i.w5)((()=>[(0,i.Uk)((0,Q.zw)(r.isLoading?"mdi-loading":"mdi-pencil"),1)])),_:1},8,["onClick","class"])])])):(0,i.kq)("",!0),(0,i._)("td",lV,[(0,i.Wm)(o,{double:!0,onUpdateOrder:e[0]||(e[0]=e=>t.$emit("update",e)),only:["update"],order:s.order},null,8,["order"])])],2)),(0,i.Wm)(n,{type:"info",title:"Add Note",onResolved:l.handleResolved,loading:r.isLoading,visible:r.showPopup},{default:(0,i.w5)((()=>[(0,i._)("div",oV,[nV,(0,i.Wm)(pp.z,{modelValue:r.newNote,"onUpdate:modelValue":e[1]||(e[1]=t=>r.newNote=t),variant:"outlined",class:"rounded-md",color:"primary-color"},null,8,["modelValue"])])])),_:1},8,["onResolved","loading","visible"])],64)}var wV={props:["order","showNote"],emits:["update"],components:{OrderConfirmation:cA,OrderUpsell:fA,OrderAffectation:DA,OrderActions:WE},data(){return{showPopup:!1,isLoading:!1,newNote:"",newOrder:null,todayDate:null}},computed:{id(){return this.order.id},fullname(){return this.order.fullname},product_name(){return this.order.product_name},agente_id(){return this.order.agente_id},upsell(){return this.order.upsell},phone(){return this.order.phone},city(){return this.order.city},adresse(){return this.order.adresse},quantity(){return this.order.quantity},price(){return this.order.price},confirmation(){return this.order.confirmation},affectation(){return this.order.affectation},delivery(){return this.order.delivery},note(){return this.order.note},created_at(){return this.order?.created_at}},methods:{getPrice(t){return Nr(t)},handleClick(){this.showPopup=!0,this.newNote=this.note},handleResolved(t){t?(this.showPopup=!1,this.isLoading=!0,ys.agenteUpdateNote(this.id,this.newNote).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.$store.dispatch("order/updateNote",{note:this.newNote,id:this.id}))}),this.$handleApiError).finally((()=>this.isLoading=!1))):this.showPopup=!1},isReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date==this.todayDate}},mounted(){this.newOrder=this.order;const t=new Date,e=t.getDate(),s=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,i=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getFullYear();this.todayDate=`${r}-${i}-${s}`}};const cV=(0,d.Z)(wV,[["render",dV]]);var uV=cV,pV={components:{UpdateOrder:l$,NewOrder:uV},data(){return{isOrderExists:!1,isLoaded:!1,isLoading:!1,showUpdatePopup:!1,doubles:[],double:!1,form:{fullname:{valid:!0,message:""},phone:{valid:!0,message:""},city:{valid:!0,message:""},adresse:{valid:!0,message:""},quantity:{valid:!0,message:""},price:{valid:!0,message:""}},newOrder:null,popupOrder:null}},computed:{deliveries(){return this.$store.getters["user/deliveries"]},isFormValid(){return this.form.fullname.valid&&this.form.phone.valid&&this.form.city.valid&&this.form.adresse.valid&&this.form.quantity.valid&&this.form.price.valid},cities(){return this.$store.getters["city/cities"]}},methods:{updateConfirmation(t){this.newOrder.confirmation=t},getPrice(t){return Nr(t)},updateUpsell(t){this.newOrder.upsell=t,this.popupOrder.upsell=t},handleCancel(){this.showUpdatePopup=!1,this.popupOrder={...this.newOrder}},handleUpdateOrder(t){this.newOrder={...t}},validateForm(){this.form.fullname=bt(this.popupOrder.fullname,"Client"),this.form.phone=bt(this.popupOrder.phone,"Phone"),this.form.city=bt(this.popupOrder.city,"City"),this.form.adresse=bt(this.popupOrder.adresse,"Address"),this.form.quantity=bt(this.popupOrder.quantity,"Quantity"),this.form.price=bt(this.popupOrder.price,"Price")},handleDoubleUpdate(t){console.log("order updated: ",t),this.doubles=this.doubles.map((e=>e.id==t.id?t:e))},clearOrder(){return this.newOrder.confirmation?this.double&&this.doubles.some((t=>t.id!=this.newOrder.id&&!t.confirmation))?(this.$alert({type:"warning",title:"Double order confirmation not changed"}),!1):(this.isOrderExists=!1,this.$alert({type:"success",title:"Order Saved Successfully !"}),void this.$store.dispatch("order/addOrder",this.newOrder)):(this.$alert({type:"warning",title:"Order confirmation not changed"}),!1)},updateOrder(){if(this.validateForm(),!this.isFormValid)return!1;this.isLoading=!0,this.newOrder={...this.popupOrder},ys.update(this.newOrder.id,this.newOrder).then((t=>{"SUCCESS"==t.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"Order updated"}),this.$store.dispatch("order/setOrder",this.newOrder))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},addOrder(){this.isLoaded=!1,ys.agenteAddOrder().then((t=>{if("ORDER_NOT_CONFIRMED"===t.data.code&&this.$alert({type:"warning",title:"Order was not confirmed"}),"SUCCESS"===t.data.code&&(console.log("order exists..."),t.data.data?.orders)){const e=t.data.data.orders;this.newOrder=e,this.popupOrder={...e},this.$store.dispatch("order/setOrder",this.order),this.isLoaded=!0,1==t.data.data.double?(this.doubles=t.data.data.double_orders,this.double=!0):(this.doubles=[],this.double=!1),this.isOrderExists=!0}"NO_ORDERS"==t.data.code&&(this.isOrderExists=!1)})).catch(this.$handleApiError).finally((()=>{this.isLoaded=!0}))},getOrder(){ys.agenteGetOrder().then((t=>{if("SUCCESS"===t.data.code){const e=t.data.data.orders[0];this.newOrder=e,this.popupOrder={...e},this.$store.dispatch("order/setOrder",this.order),1==t.data.data.double?(this.doubles=t.data.data.double_orders,this.double=!0):(this.doubles=[],this.double=!1),this.isLoaded=!0,this.isOrderExists=!0}"NO_ORDER"===t.data.code&&(this.isLoaded=!0)}),(t=>{this.$handleApiError(t),this.isLoaded=!0}))},getDeliveries(){Z.deliveries().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)}},async mounted(){this.getOrder(),0==this.deliveries.length&&this.getDeliveries()}};const mV=(0,d.Z)(pV,[["render",MT]]);var hV=mV;const gV={class:"mb-5 tw-flex tw-justify-between tw-items-center"},fV=(0,i._)("div",null,[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Confirmed Orders"),(0,i._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"See your confirmed orders")],-1),vV={key:0},yV=(0,i._)("span",{class:"text-white"}," Add Sale ",-1),_V={key:0},xV={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},bV={class:"mb-5 tw-flex"},kV={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},CV={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},DV={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},SV=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Sort By",-1),zV={class:"tw-relative"},UV=["value"],LV={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},PV=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Order By",-1),AV={class:"tw-relative"},WV=["value"],$V={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},EV=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Upsell",-1),OV={class:"tw-relative"},TV=(0,i._)("option",{value:"all"},"Select",-1),VV=(0,i._)("option",{value:"oui"},"Oui",-1),qV=(0,i._)("option",{value:"non"},"Non",-1),RV=[TV,VV,qV],FV={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},IV=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Confirmation",-1),jV={class:"tw-relative"},NV=["value"],MV={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},HV=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Affect",-1),YV={class:"tw-relative"},KV=(0,i._)("option",{value:"all"},"Select",-1),ZV=["value"],BV={key:0},QV={key:1,class:""},GV=(0,i._)("p",{class:"tw-text-neutral-400 tw-py-5"},"Your order's list is empty !",-1),JV=[GV];function XV(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation"),d=(0,i.up)("OrdersTable"),w=(0,i.up)("AddNewOrder");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",gV,[fV,l.isLoaded?((0,i.wg)(),(0,i.iD)("div",vV,[(0,i.Wm)(G.T,{color:"primary-color",onClick:e[0]||(e[0]=t=>l.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),yV])),_:1})])):(0,i.kq)("",!0)]),l.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",_V,[(0,i.Wm)(n)])),l.isLoaded?((0,i.wg)(),(0,i.iD)("div",xV,[(0,i._)("div",bV,[(0,i.Wm)(G.T,{onClick:e[1]||(e[1]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,i._)("div",kV,[(0,i.Wm)(Zt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,l.search]])])]),(0,i._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,i._)("div",CV,[(0,i._)("div",DV,[SV,(0,i._)("div",zV,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.sorting.sortBy=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.sorting.fields,(t=>((0,i.wg)(),(0,i.iD)("option",{key:t.value,value:t.value},(0,Q.zw)(t.name),9,UV)))),128))],512),[[a.bM,l.sorting.sortBy]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])]),(0,i._)("div",LV,[PV,(0,i._)("div",AV,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.sorting.orderBy=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.sorting.options,(t=>((0,i.wg)(),(0,i.iD)("option",{key:t.value,value:t.value},(0,Q.zw)(t.name),9,WV)))),128))],512),[[a.bM,l.sorting.orderBy]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])]),(0,i._)("div",$V,[EV,(0,i._)("div",OV,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>l.upsellFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},RV,512),[[a.bM,l.upsellFilter]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])]),(0,i._)("div",FV,[IV,(0,i._)("div",jV,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>l.confirmationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.confirmations,(t=>((0,i.wg)(),(0,i.iD)("option",{key:t.id,value:t.value?t.value:"all"},(0,Q.zw)(t.name),9,NV)))),128))],512),[[a.bM,l.confirmationFilter]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])]),(0,i._)("div",MV,[HV,(0,i._)("div",YV,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>l.affectationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[KV,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.deliveries,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,ZV)))),128))],512),[[a.bM,l.affectationFilter]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])])])],2),o.confirmedOrders.length>0?((0,i.wg)(),(0,i.iD)("div",BV,[(0,i.Wm)(d,{note:!0,orders:o.filteredOrders},null,8,["orders"])])):((0,i.wg)(),(0,i.iD)("div",QV,JV))])):(0,i.kq)("",!0),(0,i.Wm)(w,{onCancel:e[8]||(e[8]=t=>l.showPopup=!1),visible:l.showPopup,"onUpdate:visible":e[9]||(e[9]=t=>l.showPopup=t)},null,8,["visible"])])}var tq={components:{OrdersTable:qE,AddNewOrder:uT},data(){return{localUrl:R,confirmations:Ln,isLoaded:!1,showFilters:!1,confirmationFilter:"all",affectationFilter:"all",upsellFilter:"all",search:"",showPopup:!1,sorting:{sortBy:null,orderBy:"asc",fields:[{name:"Select",value:null},{name:"ID",value:"id"},{name:"Created At",value:"created_at"}],options:[{name:"Ascending",value:"asc"},{name:"Descending",value:"desc"}]}}},computed:{confirmedOrders(){return this.$store.getters["order/orders"]},sortedOrders(){const t=this.confirmedOrders;return t.sort(((t,e)=>{switch(this.sorting.sortBy){case"created_at":return"asc"==this.sorting.orderBy?new Date(t.created_at)-new Date(e.created_at):new Date(e.created_at)-new Date(t.created_at);case"id":return"asc"==this.sorting.orderBy?t.id-e.id:e.id-t.id;default:return!0}}))},deliveries(){return this.$store.getters["user/deliveries"]},filteredOrders(){const t=this.confirmationFilter,e=this.affectationFilter,s=this.upsellFilter;return this.sortedOrders.filter((a=>{if("all"!==t&&a.confirmation!==t)return!1;if("all"!==e&&parseInt(a.affectation)!==parseInt(e))return!1;if("all"!==s&&a.upsell!==s)return!1;const i=((t,e)=>{for(const s in t)if(!["created_at","updated_at","sheets_id","reported_agente_note","reported_agente_note","reported_agente_date","reported_delivery_note","reported_delivery_date"].includes(s)&&String(t[s]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(a,this.search);return!!i}))}},methods:{getOrders(){ys.agenteConfirmedOrders().then((t=>{if("SUCCESS"==t?.data.code)if("No Order Confirmed Yet !"==t?.data.data)this.orders=[],this.isLoaded=!0;else{const e=t.data.data.orders;this.$store.dispatch("order/setOrders",e),this.isLoaded=!0}})).catch(this.$handleApiError)},async getDeliveries(){await Z.deliveries().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)}},mounted(){this.$store.dispatch("order/setOrders",[]),this.getDeliveries(),this.getOrders()}};const eq=(0,d.Z)(tq,[["render",XV]]);var sq=eq,aq={name:"orders",path:"/orders",component:ia,meta:{module:"order"},children:[{name:"order/list",path:"",component:hT,meta:{module:"order",subModule:"order/list",title:"Orders List",gate:"show_all_orders"}},{name:"order/show",path:"/order",component:hV,meta:{module:"order",subModule:"order/show",title:"Current Order",gate:"show_all_orders"}},{name:"order/confirmed",path:"/orders/confirmed",component:sq,meta:{module:"order",subModule:"order/confirmed",title:"Confirmed Orders",gate:"show_all_orders"}}]};const iq=(0,i._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,i._)("div",null,[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Orders")])],-1),rq={key:0},lq={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},oq={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-5"},nq={key:1},dq={class:"tw-min-h-[400px] tw-flex tw-flex-col tw-justify-center tw-items-center"},wq=(0,i._)("p",{class:"tw-font-medium tw-text-neutral-400 tw-text-lg tw-mb-n3"},"No Confirmed orders for now.",-1),cq=["src"];function uq(t,e,s,a,r,l){const o=(0,i.up)("LoadingAnimation"),n=(0,i.up)("OrderCard");return(0,i.wg)(),(0,i.iD)("div",null,[iq,r.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",rq,[(0,i.Wm)(o)])),r.isLoaded?((0,i.wg)(),(0,i.iD)("div",lq,[l.orders.length>0?((0,i.wg)(),(0,i.iD)("div",oq,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.filteredOrders,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.id,class:"tw-col-span-12 md:tw-col-span-4"},[((0,i.wg)(),(0,i.j4)(n,{order:t,key:t.id},null,8,["order"]))])))),128))])):((0,i.wg)(),(0,i.iD)("div",nq,[(0,i._)("div",dq,[wq,(0,i._)("img",{src:r.localUrl+"images/delivery.jpg",class:"tw-mt-0 tw-mx-auto tw-max-w-[600px] tw-w-full",alt:""},null,8,cq)])]))])):(0,i.kq)("",!0)])}var pq=s(9875),mq=s(1888),hq=s(1334);const gq={class:"tw-text-sm tw-text-orange-500x tw-bg-orange-500x/10 tw-underline tw-underline-offset-2 tw-px-1 tw-w-fit tw-rounded"},fq={class:"tw-w-full tw-whitespace-normal"},vq=(0,i._)("div",{class:"tw-border-b tw-mb-1 tw-border-dashed"},null,-1),yq={class:"tw-flex tw-items-center"},_q={key:0},xq={key:1},bq={class:"tw-min-w-fit tw-w-[25px] tw-h-[25px] tw-flex tw-items-center tw-justify-center tw-text-md tw-font-bold tw-p-1 tw-rounded tw-text-orange-400 tw-bg-orange-400/10"},kq=(0,i._)("span",{class:"tw-text-sm"},"x",-1),Cq={key:0},Dq={key:0,class:"tw-px-5 tw-py-2 tw-mt-2 tw-border-neutral-200 tw-border-t tw-border-dashed"},Sq=(0,i._)("p",{class:"tw-text-md tw-font-bold tw-text-pink-500"},"NOTE",-1),zq={class:"tw-flex tw-items-center tw-text-gray-500"},Uq={class:"tw-flex tw-items-center tw-text-gray-500"};function Lq(t,e,s,a,r,l){const o=(0,i.up)("OrderCardDelivery");return(0,i.wg)(),(0,i.j4)(Ga._,{class:(0,Q.C_)(["tw-mx-auto tw-relative tw-border-dashed !tw-shadow-lg !tw-shadow-gray-100/70",[!!s.order.note&&"tw-border-pink-00","livrer"==s.order.delivery&&"tw-border-emerald-400"]]),flat:"",border:""},{default:(0,i.w5)((()=>[(0,i._)("div",{class:(0,Q.C_)(["tw-absolute tw-top-0 tw-right-0 tw-py-1 tw-px-2 tw-rounded-bl tw-text-xs",[l.delivery?.bg,l.delivery?.text]])},(0,Q.zw)(s.order.delivery),3),(0,i.Wm)(pq._,null,{title:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i._)("p",gq,(0,Q.zw)(s.order.city),1),(0,i._)("p",fq,(0,Q.zw)(s.order.adresse),1)]),vq])),_:1}),(0,i.Wm)(mq.Z,{class:"py-0"},{default:(0,i.w5)((()=>[(0,i.Wm)(la.o,{align:"center","no-gutters":""},{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{cols:"12",class:"tw-flex tw-items-center tw-flex-wrap tw-text-gray-500"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{icon:"mdi-account",size:"small",class:"tw-mr-2 tw-text-sm"}),(0,i.Uk)(" "+(0,Q.zw)(s.order.fullname)+" ",1),s.order.note?((0,i.wg)(),(0,i.j4)(X.t,{key:0,icon:"mdi-note-outline",size:"small",class:"tw-ml-2 tw-text-sm !tw-text-pink-500"})):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)(oa.D,{cols:"12",class:"tw-text-gray-500 tw-space-y-1 tw-mt-2"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.order.items,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"tw-flex tw-items-center tw-gap-3",key:t.id},[(0,i._)("div",yq,[(0,i._)("span",null,[(0,i.Uk)((0,Q.zw)(t.product.name)+" ",1),t.product_variation.size?((0,i.wg)(),(0,i.iD)("span",_q,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,i.kq)("",!0),(0,i.Uk)(),t.product_variation.size?((0,i.wg)(),(0,i.iD)("span",xq,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,i.kq)("",!0)])]),(0,i._)("div",null,[(0,i._)("p",bq,[kq,(0,i.Uk)(" "+(0,Q.zw)(t.quantity),1)])])])))),128))])),_:1}),(0,i.Wm)(oa.D,{class:"text-h4 tw-my-3",cols:"12"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,Q.zw)(l.getPrice(s.order)),1)])),_:1})])),_:1})])),_:1}),(0,i.kq)("",!0),(0,i.Wm)(Ut.Fx,null,{default:(0,i.w5)((()=>[t.expand?((0,i.wg)(),(0,i.iD)("div",Cq,[s.order.note?((0,i.wg)(),(0,i.iD)("div",Dq,[Sq,(0,i._)("p",null,(0,Q.zw)(s.order.note),1)])):(0,i.kq)("",!0),(0,i.Wm)(Qe.i,{class:"bg-transparent tw-space-y-2 !tw-px-5 tw-py-3 tw-border-neutral-200 tw-border-dashed tw-border-t tw-mt-5"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i._)("div",zq,[(0,i.Wm)(X.t,{icon:"mdi-phone",class:"mr-2 tw-text-sm"}),(0,i.Uk)(" "+(0,Q.zw)(s.order.phone),1)])]),(0,i._)("div",null,[(0,i._)("div",Uq,[(0,i.Wm)(X.t,{icon:"mdi-calendar",class:"mr-2 tw-text-sm"}),(0,i.Uk)(" "+(0,Q.zw)(s.order.created_at?.split("T")[0].split("-").reverse().join(".")),1)])])])),_:1})])):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)(Kt.J),(0,i.Wm)(hq.h,{class:"tw-flex tw-justify-end tw-gap-2 tw-flex-wrap"},{default:(0,i.w5)((()=>[(0,i.Wm)(G.T,{class:"tw-capitalize tw-mx-auto tw-bg-orange-500/5 tw-text-orange-500",rounded:"lg",density:"comfortable",icon:"",variant:"flat",onClick:e[0]||(e[0]=e=>t.expand=!t.expand)},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,Q.zw)(t.expand?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})])),_:1}),(0,i.Wm)(es.C),s.order.phone?((0,i.wg)(),(0,i.j4)(G.T,{key:0,link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+s.order.phone.replace("+","").replace("-","").replace(" ",""),class:"tw-capitalize tw-bg-green-500/5 tw-text-green-500 tw-border tw-border-green-500/30",icon:"",rounded:"lg",variant:"flat",density:"comfortable"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,null,{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])):(0,i.kq)("",!0),s.order.phone?((0,i.wg)(),(0,i.j4)(G.T,{key:1,link:"",target:"_blank",href:"tel:"+s.order.phone,class:"tw-capitalize tw-bg-blue-500/5 tw-text-blue-500 tw-border tw-border-blue-500/30",icon:"",rounded:"lg",variant:"flat",density:"comfortable"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,null,{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-phone")])),_:1})])),_:1},8,["href"])):(0,i.kq)("",!0),(0,i.Wm)(G.T,{onClick:e[1]||(e[1]=e=>t.confirmPopup=!0),class:"tw-capitalize tw-bg-emerald-500 tw-text-white tw-border tw-border-emerald-500/30",icon:"",rounded:"lg",variant:"flat",density:"comfortable"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,null,{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-check")])),_:1})])),_:1})])),_:1}),((0,i.wg)(),(0,i.j4)(o,{delivery:s.order.delivery,order:s.order,key:s.order,visible:t.confirmPopup,onCancel:e[2]||(e[2]=e=>t.confirmPopup=!1)},null,8,["delivery","order","visible"]))])),_:1},8,["class"])}const Pq={class:"md:tw-w-[80%] tw-overflow-hidden tw-w-[95%] tw-max-w-[550px] tw-mx-auto tw-my-3 tw-min-h-[200px] tw-bg-white tw-rounded-lg tw-shadow-lg"},Aq={class:"tw-px-5 tw-pt-5"},Wq=(0,i._)("h1",{class:"tw-font-bold tw-text-gray-600"},"Select Status",-1),$q={class:"tw-mt-3 tw-flex tw-gap-3 tw-flex-wrap"},Eq=["disabled","onClick"],Oq={class:"tw-mt-5 tw-px-5 tw-py-3 tw-bg-gray-50 tw-border-t tw-flex tw-gap-2 tw-justify-end"},Tq=(0,i._)("span",{class:"!tw-text-gray-500"},"Cancel",-1),Vq=(0,i._)("span",{class:"!tw-text-white"},"Confirm",-1);function qq(t,e,s,a,r,l){const o=(0,i.up)("popup-full"),n=(0,i.up)("OrderReporting");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(o,{onCancel:l.cancel,visible:s.visible},{default:(0,i.w5)((()=>[(0,i._)("div",Pq,[(0,i._)("div",Aq,[Wq,(0,i._)("div",$q,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.deliveryStatus,(e=>((0,i.wg)(),(0,i.iD)("button",{disabled:l.isDisabled(e),onClick:t=>l.handleChange(e),key:e.value,class:(0,Q.C_)([[l.isDisabled(e)&&"tw-saturate-0",e.text,e.bg,e.id==t.delivery&&[e.ring,"tw-ring"]],"tw-px-4 tw-py-2 tw-rounded"])},(0,Q.zw)(e.name),11,Eq)))),128))])]),(0,i._)("div",Oq,[(0,i.Wm)(G.T,{onClick:l.cancel,class:"!tw-capitalize",color:"grey-lighten-3",flat:""},{default:(0,i.w5)((()=>[Tq])),_:1},8,["onClick"]),(0,i.Wm)(G.T,{onClick:l.handleConfirm,loading:t.isLoading,class:"!tw-capitalize",color:"primary-color",flat:""},{default:(0,i.w5)((()=>[Vq])),_:1},8,["onClick","loading"])])])])),_:1},8,["onCancel","visible"]),(0,i.Wm)(n,{onOrderReported:l.cancel,order:s.order,visible:t.showPopupReporter,onCancel:e[0]||(e[0]=e=>t.showPopupReporter=!1)},null,8,["onOrderReported","order","visible"])])}const Rq={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},Fq=(0,i._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),Iq=(0,i._)("br",null,null,-1),jq=(0,i._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),Nq={class:"tw-flex tw-justify-end tw-mt-2"};function Mq(t,e,s,r,l,o){const n=(0,i.up)("VueDatePicker"),d=(0,i.up)("popup-full");return(0,i.wg)(),(0,i.iD)("div",{key:s.order.id},[(0,i.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>o.cancel()),visible:s.visible},{default:(0,i.w5)((()=>[(0,i._)("div",Rq,[Fq,(0,i.Wm)(n,{modelValue:l.date,"onUpdate:modelValue":e[0]||(e[0]=t=>l.date=t),format:o.format},null,8,["modelValue","format"]),Iq,jq,(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[a.nr,l.note]]),(0,i._)("div",Nq,[(0,i.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleConfirm},{default:(0,i.w5)((()=>[(0,i.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var Hq={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_delivery_date=this.realDate,t.reported_delivery_note=this.note,t.delivery="reporter",this.isLoading=!0,ys.deliveryUpdateDelivery(t.id,"reporter",t).then((e=>{console.log(e.data),this.$alert({type:"success",title:"Order reported successfully"}),this.$emit("orderReported"),this.$store.dispatch("order/update",{id:t.id,order:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},format(t){const e=t.getDate(),s=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,i=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getFullYear();return this.realDate=`${r}-${i}-${s}`,`${s}/${i}/${r}`},cancel(){this.$emit("cancel")}},mounted(){console.log(this.order)}};const Yq=(0,d.Z)(Hq,[["render",Mq]]);var Kq=Yq,Zq={props:["visible","order"],components:{OrderReporting:Kq},data:()=>({status:Wn,disabled:$n,delivery:2,isLoading:!1,note:"",showPopupReporter:!1}),computed:{deliveryStatus(){return this.status.filter((t=>!!t.value))},selected(){return this.status.find((t=>t.id==this.delivery))}},watch:{order:{handler(t){this.delivery=this.getDeliveryId(t.delivery)},deep:!0,immediate:!0}},methods:{cancel(){this.getCurrentStatus(),this.$emit("cancel")},isDisabled(t){return this.disabled.includes(t.value)},handleChange(t){if(this.isDisabled(t))return!1;this.delivery=t.id},handleConfirm(){const t=this.selected;if(t.value===this.order.delivery)return this.cancel(),!1;"reporter"!=t.value&&this.updateOrder().then((()=>{this.cancel()})),"reporter"==t.value&&(this.showPopupReporter=!0)},async updateOrder(){return this.isLoading=!0,ys.deliveryUpdateDelivery(this.order.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateDelivery(this.order.id,this.selected.value),this.isLoading=!1,this.cancel())}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateDelivery(t,e){this.$store.dispatch("order/updateDelivery",{id:t,delivery:e})},getDeliveryId(t){return this.status.find((e=>e.value==t)).id||0},getCurrentStatus(){this.delivery=this.getDeliveryId(this.order.delivery)}},mounted(){this.getCurrentStatus()}};const Bq=(0,d.Z)(Zq,[["render",qq]]);var Qq=Bq,Gq={components:{OrderCardDelivery:Qq},props:["order"],data:()=>({deliveryStatus:Wn,expand:!1,confirmPopup:!1,labels:[{name:"Telephone",field:"phone",icon:"mdi-phone"},{name:"Date",field:"created_at",icon:"mdi-calendar"}]}),computed:{delivery(){return this.getDeliveryStatus(this.order.delivery)}},methods:{getDeliveryStatus(t){return this.deliveryStatus.find((e=>e.value==t))||this.deliveryStatus[0]},getPrice(t){return Nr(t)}}};const Jq=(0,d.Z)(Gq,[["render",Lq]]);var Xq=Jq,tR={components:{OrderCard:Xq},data(){return{localUrl:R,deliveryStatus:Wn,isLoaded:!1,showFilters:!1,deliveryFilter:"all",affectationFilter:"all",upsellFilter:"all",search:""}},computed:{orders(){return this.$store.getters["order/orders"].filter((t=>"livrer"!=t.delivery))},filteredOrders(){const t=this.deliveryFilter;return this.orders.filter((e=>{if("all"!==t&&e.delivery!==t)return!1;const s=((t,e)=>{for(const s in t)if(!["created_at","updated_at"].includes(s)&&String(t[s]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(e,this.search);return!!s}))}},methods:{getOrders(){ys.deliveryOrders().then((t=>{const e=t.data.data.orders;this.$store.dispatch("order/setOrders",e),this.isLoaded=!0}),this.$handleApiError)}},mounted(){this.$store.dispatch("order/setOrders",[]),this.getOrders()}};const eR=(0,d.Z)(tR,[["render",uq]]);var sR=eR;const aR=(0,i._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,i._)("div",null,[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Delivered Orders"),(0,i._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Delivered orders list")])],-1),iR={key:0},rR={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},lR={class:"mb-5 tw-flex"},oR={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},nR={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},dR={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},wR=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Delivery",-1),cR={class:"tw-relative"},uR=["value"],pR={key:0,class:""},mR={key:1},hR=(0,i._)("p",null,"No orders for now",-1),gR=[hR];function fR(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation"),d=(0,i.up)("OrdersTable");return(0,i.wg)(),(0,i.iD)("div",null,[aR,l.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",iR,[(0,i.Wm)(n)])),l.isLoaded?((0,i.wg)(),(0,i.iD)("div",rR,[(0,i._)("div",lR,[(0,i.Wm)(G.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,i._)("div",oR,[(0,i.Wm)(Zt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,l.search]])])]),(0,i._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,i._)("div",nR,[(0,i._)("div",dR,[wR,(0,i._)("div",cR,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.deliveryFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.deliveryStatus,(t=>((0,i.wg)(),(0,i.iD)("option",{key:t.id,value:t.value?t.value:"all"},(0,Q.zw)(t.name),9,uR)))),128))],512),[[a.bM,l.deliveryFilter]]),(0,i.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])])])],2),o.orders.length>0?((0,i.wg)(),(0,i.iD)("div",pR,[(0,i.Wm)(d,{orders:o.filteredOrders},null,8,["orders"])])):((0,i.wg)(),(0,i.iD)("div",mR,gR))])):(0,i.kq)("",!0)])}const vR={class:"tw-relative tw-min-h-[400px] tw-overflow-x-auto tw-overflow-y-visible sm:tw-rounded-lg"},yR={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},_R={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},xR=(0,i._)("th",{scope:"col",class:"tw-p-4"},[(0,i._)("div",{class:"tw-flex tw-items-center"},[(0,i._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,i._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),bR={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},kR={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},CR={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},DR=(0,i._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),SR=["value"],zR={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},UR={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},LR={class:"tw-text-white"};function PR(t,e,s,r,l,o){const n=(0,i.up)("OrderRow");return(0,i.wg)(),(0,i.iD)("div",{key:s.orders.length},[(0,i._)("div",vR,[(0,i._)("table",yR,[(0,i._)("thead",_R,[(0,i._)("tr",null,[xR,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.columns,(t=>((0,i.wg)(),(0,i.iD)("th",{key:t,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,i._)("div",bR,(0,Q.zw)(t),1)])))),128))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.orders,(t=>((0,i.wg)(),(0,i.j4)(n,{key:t.id,order:t},null,8,["order"])))),128))])])]),(0,i._)("div",kR,[(0,i._)("div",CR,[DR,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allowedLimit,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,SR)))),128))],512),[[a.bM,l.paginationLimit]])]),(0,i._)("div",zR,[(0,i._)("div",UR,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?s.orders.length:o.nextRange)+" of "+(0,Q.zw)(s.orders.length)+" items ",1),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.pageCount,(t=>((0,i.wg)(),(0,i.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,i.w5)((()=>[(0,i._)("span",LR,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const AR=(0,i._)("td",{class:"tw-w-4 tw-p-4"},[(0,i._)("div",{class:"tw-flex tw-items-center"},[(0,i._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,i._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),WR={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},$R={class:"tw-px-6 tw-py-4 tw-relative"},ER={key:0},OR={class:"tw-px-6 tw-py-4"},TR={class:"tw-px-6 tw-py-4"},VR={class:"tw-px-6 tw-py-4"},qR={class:"tw-px-6 tw-py-4"},RR={class:"tw-pb-2"},FR={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},IR={key:0},jR={key:1},NR={class:"tw-px-6 tw-py-4 tw-relative"},MR={class:"tw-flex tw-items-center tw-justify-center"},HR={class:"tw-flex tw-gap-1"},YR={key:0},KR={class:"tw-px-6 tw-py-4"},ZR={class:"tw-px-6 tw-py-4"},BR={class:"tw-px-6 tw-py-4"},QR={class:"tw-max-w-[300px] tw-min-w-[150px] tw-whitespace-normal"},GR={class:"tw-px-6 tw-py-4"};function JR(t,e,s,a,r,l){const o=(0,i.up)("OrderDelivery"),n=(0,i.up)("OrderActions");return(0,i.wg)(),(0,i.iD)("tr",{key:s.order.id,class:(0,Q.C_)([["reporter"==s.order.delivery&&"tw-relative",l.isReportedToday(s.order)&&"!tw-border tw-border-red-400"],"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"])},[AR,(0,i._)("th",WR,(0,Q.zw)(s.order.id),1),(0,i._)("td",$R,[(0,i.Uk)((0,Q.zw)(s.order?.created_at?.split("T")[0])+" ",1),"reporter"==s.order.delivery?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,Q.C_)([l.isReportedToday(s.order)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[l.isReportedToday(s.order)?((0,i.wg)(),(0,i.iD)("span",ER," Reported for today ")):(0,i.kq)("",!0)],2)):(0,i.kq)("",!0)]),(0,i._)("td",OR,(0,Q.zw)(s.order.fullname),1),(0,i._)("td",TR,(0,Q.zw)(s.order.adresse),1),(0,i._)("td",VR,(0,Q.zw)(s.order.phone),1),(0,i._)("td",qR,[(0,i._)("div",RR,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.order.items,(t=>((0,i.wg)(),(0,i.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,i.Uk)(" - "),(0,i._)("span",FR,(0,Q.zw)(t.quantity)+" X ",1),(0,i.Uk)((0,Q.zw)(t.product.name)+" ",1),t.product_variation.size?((0,i.wg)(),(0,i.iD)("span",IR,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,i.kq)("",!0),t.product_variation.color?((0,i.wg)(),(0,i.iD)("span",jR,"| "+(0,Q.zw)(t.product_variation.color),1)):(0,i.kq)("",!0)])))),128))])])]),(0,i._)("td",NR,[(0,i._)("div",MR,[((0,i.wg)(),(0,i.j4)(o,{class:(0,Q.C_)("reporter"==s.order.delivery&&"tw-mb-1"),order:s.order,id:s.order.id,key:s.order.delivery,delivery:s.order.delivery},null,8,["class","order","id","delivery"])),"reporter"==s.order.delivery?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,Q.C_)([l.isReportedToday(s.order)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[(0,i._)("span",HR,["reporter"==s.order.delivery?((0,i.wg)(),(0,i.iD)("span",YR,[(0,i.Wm)(X.t,{size:"x-small"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-autorenew")])),_:1}),(0,i._)("span",null,(0,Q.zw)(s.order?.reported_delivery_date?.split("T")[0]),1)])):(0,i.kq)("",!0)])],2)):(0,i.kq)("",!0)])]),(0,i._)("td",KR,(0,Q.zw)(l.getPrice(s.order)),1),(0,i._)("td",ZR,(0,Q.zw)(s.order.city),1),(0,i._)("td",BR,[(0,i._)("div",QR,(0,Q.zw)(s.order.note),1)]),(0,i._)("td",GR,[((0,i.wg)(),(0,i.j4)(n,{key:s.order.id,order:s.order},null,8,["order"]))])],2)}const XR={key:0,class:"focus:tw-ring-4 tw-min-w-fit focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between tw-bg-green-500/10 tw-text-green-500"},tF={key:1},eF={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},sF=["onClick"];function aF(t,e,s,a,r,l){const o=(0,i.up)("OrderReporting");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{key:s.delivery,class:"tw-relative tw-min-w-[100px]"},["livrer"==s.delivery?((0,i.wg)(),(0,i.iD)("div",XR,(0,Q.zw)(l.selected.name),1)):(0,i.kq)("",!0),"livrer"!=s.delivery?((0,i.wg)(),(0,i.iD)("div",tF,[(0,i._)("button",{onClick:e[0]||(e[0]=(...t)=>l.toggle&&l.toggle(...t)),class:(0,Q.C_)([[l.selected.text,l.selected.bg,l.selected.ring],"focus:tw-ring-4 tw-min-w-[100px] focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between"]),type:"button"},[(0,i.Uk)((0,Q.zw)(l.selected.name)+" ",1),r.isLoading?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(X.t,{key:0,class:"tw-ml-1"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,Q.zw)(r.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),r.isLoading?((0,i.wg)(),(0,i.j4)(X.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-loading")])),_:1})):(0,i.kq)("",!0)],2),(0,i._)("div",{class:(0,Q.C_)([{"tw-hidden":!r.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,i._)("ul",eF,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.options,(t=>((0,i.wg)(),(0,i.iD)("li",{onClick:e=>!r.disabled.includes(t.value)&&l.handleChange(t),key:t.id},[(0,i._)("a",{class:(0,Q.C_)(["tw-block tw-px-4 tw-py-2",[r.disabled.includes(t.value)?"tw-text-neutral-400/80 tw-bg-neutral-400/10":[t.text,t.bg]]])},(0,Q.zw)(t.name),3)],8,sF)))),128))])],2),(0,i.Wm)(o,{order:s.order,visible:r.showPopupReporter,onCancel:e[1]||(e[1]=t=>r.showPopupReporter=!1)},null,8,["order","visible"])])):(0,i.kq)("",!0)])),[[Bt.L,l.close]])}var iF={props:["delivery","id","order"],components:{OrderReporting:Kq},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",selectedId:0,allOptions:Wn,disabled:$n,showPopupReporter:!1}},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(t.id===this.selectedId)return!1;"reporter"!=t.value&&(this.selectedId=t.id,this.updateOrder(),this.close()),"reporter"==t.value&&(this.showPopupReporter=!0)},async updateOrder(){return this.isLoading=!0,ys.deliveryUpdateDelivery(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateDelivery(this.id,this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateDelivery(t,e){this.$store.dispatch("order/updateDelivery",{id:t,delivery:e})}},mounted(){this.availableOptions.includes(this.delivery)?this.selectedId=this.allOptions.find((t=>t.value==this.delivery)).id:this.selectedId=0}};const rF=(0,d.Z)(iF,[["render",aF]]);var lF=rF;const oF={key:0};function nF(t,e,s,a,r,l){return r.newOrder?((0,i.wg)(),(0,i.iD)("div",oF,[(0,i.Wm)(G.T,{link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+s.order.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])])):(0,i.kq)("",!0)}var dF={props:["order"],name:"orderActions",data(){return{newOrder:null}},computed:{},methods:{},mounted(){this.newOrder={...this.order}}};const wF=(0,d.Z)(dF,[["render",nF]]);var cF=wF,uF={props:["order","showNote"],components:{OrderDelivery:lF,OrderActions:cF},data(){return{showPopup:!1,isLoading:!1,todayDate:null}},methods:{handleClick(){this.showPopup=!0},isReportedToday(t){return"reporter"==t.delivery&&t.reported_delivery_date==this.todayDate},getPrice(t){return Nr(t)}},mounted(){const t=new Date,e=t.getDate(),s=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,i=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getFullYear();this.todayDate=`${r}-${i}-${s}`}};const pF=(0,d.Z)(uF,[["render",JR]]);var mF=pF,hF={props:["orders"],components:{OrderRow:mF},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10,todayDate:null,columns:["#","Date","Client","Address","Phone","Product","Delivery","Price","City","Note","Actions"]}},computed:{deliveries(){return this.$store.getters["user/deliveries"]},prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.orders.length/this.paginationLimit)},items(){const t=[...this.reportedForToday,...this.orders.filter((t=>!this.isReportedToday(t)))];return t.slice(this.prevRange,this.nextRange)},reportedForToday(){return this.orders.filter(this.isReportedToday)}},methods:{isReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date==this.todayDate}},mounted(){const t=new Date,e=t.getDate(),s=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=t.getMonth()+1,i=a.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getFullYear();this.todayDate=`${r}-${i}-${s}`}};const gF=(0,d.Z)(hF,[["render",PR]]);var fF=gF,vF={components:{OrdersTable:fF},data(){return{localUrl:R,deliveryStatus:Wn,isLoaded:!1,showFilters:!1,deliveryFilter:"all",affectationFilter:"all",upsellFilter:"all",search:""}},computed:{orders(){return this.$store.getters["order/orders"]},filteredOrders(){const t=this.deliveryFilter;return this.orders.filter((e=>{if("all"!==t&&e.delivery!==t)return!1;const s=((t,e)=>{for(const s in t)if(!["created_at","updated_at"].includes(s)&&String(t[s]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(e,this.search);return!!s}))}},methods:{getOrders(){ys.deliveryDeliveredOrders().then((t=>{const e=t.data.data.orders;this.$store.dispatch("order/setOrders",e),this.isLoaded=!0}),this.$handleApiError)}},mounted(){this.$store.dispatch("order/setOrders",[]),this.getOrders()}};const yF=(0,d.Z)(vF,[["render",fR]]);var _F=yF,xF={name:"deliveries",path:"/deliveries",component:ia,meta:{module:"delivery"},children:[{name:"delivery/list",path:"",component:sR,meta:{module:"delivery",subModule:"delivery/list",title:"Orders List",gate:"all"}},{name:"delivery/delivered",path:"/delivered",component:_F,meta:{module:"delivery",subModule:"delivery/delivered",title:"Delivered Orders List",gate:"all"}}]};const bF=(0,i._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,i._)("div",null,[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Inventory State List "),(0,i._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"See your inventory state")])],-1),kF={key:0},CF={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},DF={class:"mb-5 tw-flex"},SF={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},zF={key:0,class:""};function UF(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation"),d=(0,i.up)("InventoryStateTable");return(0,i.wg)(),(0,i.iD)("div",null,[bF,l.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",kF,[(0,i.Wm)(n)])),l.isLoaded?((0,i.wg)(),(0,i.iD)("div",CF,[(0,i._)("div",DF,[(0,i.Wm)(G.T,{icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white !tw-w-0 !tw-overflow-hidden"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,i._)("div",SF,[(0,i.Wm)(Zt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,l.search]])])]),o.inventoryState.length>0?((0,i.wg)(),(0,i.iD)("div",zF,[(0,i.Wm)(d,{columns:l.columns,states:o.filteredInventoryState},null,8,["columns","states"])])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)])}class LF{async inventoryStates(){return await Y.getCookie(),M.get("api/inventorystates")}async inventoryMovements(){return await Y.getCookie(),M.get("api/inventorymovements")}async getMovement(t){return await Y.getCookie(),M.get("api/inventorymovements/"+t)}async inventoryMovementCreate({product_id:t,delivery_id:e,variants:s}){return await Y.getCookie(),M.post("api/inventorymovements/new",{product_id:t,delivery_id:e,variations:s})}async inventoryMovementUpdate(t,{product_id:e,delivery_id:s,variants:a,quantity:i}){return await Y.getCookie(),M.post("api/inventorymovements/update/"+t,{product_id:e,delivery_id:s,variants:a,quantity:i})}async deliveryUpdateMovement(t,e,s){return await Y.getCookie(),M.post("api/delivery/inventorymovements/update/"+t,{is_received:e,note:s})}async delete(t){return await Y.getCookie(),M["delete"]("api/inventorymovements/delete/"+t)}}var PF=new LF;const AF={class:"tw-relative tw-min-h-[400px] tw-overflow-x-auto tw-overflow-y-visible sm:tw-rounded-lg"},WF={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},$F={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},EF=(0,i._)("th",{scope:"col",class:"tw-p-4"},[(0,i._)("div",{class:"tw-flex tw-items-center"},[(0,i._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,i._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),OF={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},TF=(0,i._)("td",{class:"tw-w-4 tw-p-4"},[(0,i._)("div",{class:"tw-flex tw-items-center"},[(0,i._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,i._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),VF={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},qF={class:"tw-px-6 tw-py-4 tw-underline tw-underline-offset-1 tw-font-medium"},RF={class:"tw-px-6 tw-py-4"},FF={class:"tw-px-6 tw-py-4"},IF={class:"tw-px-6 tw-py-4 tw-font-bold tw-text-green-500"},jF={class:"tw-px-6 tw-py-4"},NF={class:"tw-px-6 tw-py-4"},MF=(0,i._)("br",null,null,-1),HF={class:"tw-px-6 tw-py-4"},YF={class:"mt-5 tw-flex tw-justify-between"},KF={class:"d-flex align-center"},ZF=(0,i._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700"},"Show per page: ",-1),BF={class:"d-flex align-center"},QF={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},GF={class:"tw-text-white"};function JF(t,e,s,a,r,l){const o=(0,i.up)("router-link"),n=(0,i.up)("InventoryStateActions");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",AF,[(0,i._)("table",WF,[(0,i._)("thead",$F,[(0,i._)("tr",null,[EF,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.columns,(t=>((0,i.wg)(),(0,i.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,i._)("div",OF,(0,Q.zw)(t.name),1)])))),128))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.items,((t,e)=>((0,i.wg)(),(0,i.iD)("tr",{key:e,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[TF,(0,i._)("th",VF,(0,Q.zw)(t.id),1),(0,i._)("td",qF,[(0,i.Wm)(o,{to:"products/"+t.id},{default:(0,i.w5)((()=>[(0,i.Uk)((0,Q.zw)(t.name),1)])),_:2},1032,["to"])]),(0,i._)("td",RF,(0,Q.zw)(t.buying_price)+" DH ",1),(0,i._)("td",FF,(0,Q.zw)(t.selling_price)+" DH ",1),(0,i._)("td",IF,(0,Q.zw)(l.availableQuantity(t)),1),(0,i._)("td",jF,(0,Q.zw)(t.total_quantity),1),(0,i._)("td",NF,[(0,i.Uk)((0,Q.zw)(t.updated_at?.split("T")[0])+" ",1),MF,(0,i.Uk)(" "+(0,Q.zw)(t.updated_at?.split("T")[1].split(".")[0]),1)]),(0,i._)("td",HF,[(0,i.Wm)(n,{state:t},null,8,["state"])])])))),128))])])]),(0,i._)("div",YF,[(0,i._)("div",KF,[ZF,(0,i.Wm)(up.r,{"hide-details":!0,modelValue:r.paginationLimit,"onUpdate:modelValue":e[0]||(e[0]=t=>r.paginationLimit=t),items:r.allowedLimit,variant:"outlined",density:"compact",color:"primary-color"},null,8,["modelValue","items"])]),(0,i._)("div",BF,[(0,i._)("div",QF,(0,Q.zw)(l.prevRange+1)+" - "+(0,Q.zw)(r.currentPage==l.pageCount?s.states.length:l.nextRange)+" of "+(0,Q.zw)(s.states.length)+" items ",1),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.pageCount,(t=>((0,i.wg)(),(0,i.j4)(G.T,{onClick:e=>r.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==r.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,i.w5)((()=>[(0,i._)("span",GF,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}function XF(t,e,s,a,r,l){const o=(0,i.up)("InventoryStateDetails"),n=(0,i.up)("popup-full");return(0,i.wg)(),(0,i.iD)("div",{key:s.state.id,class:"tw-flex tw-items-center"},[(0,i.Wm)(G.T,{onClick:e[0]||(e[0]=t=>r.detailsPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-eye-outline")])),_:1})])),_:1}),(0,i.Wm)(n,{visible:r.detailsPopup,onCancel:e[2]||(e[2]=t=>r.detailsPopup=!1)},{default:(0,i.w5)((()=>[r.detailsPopup?((0,i.wg)(),(0,i.j4)(o,{key:0,onCancel:e[1]||(e[1]=t=>r.detailsPopup=!1),state:s.state},null,8,["state"])):(0,i.kq)("",!0)])),_:1},8,["visible"])])}const tI={class:"md:tw-w-[50%] tw-relative tw-max-h-full tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},eI={class:"tw-p-5"},sI={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500 tw-rounded-md tw-overflow-hidden"},aI=(0,i._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,i._)("tr",null,[(0,i._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,i._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"}," SIZE "),(0,i._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," COLOR "),(0,i._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY ")])],-1),iI={class:"tw-w-4 tw-p-4"},rI={class:"tw-w-4 tw-p-4"},lI={class:"tw-w-4 tw-p-4"},oI={class:"tw-w-4 tw-p-4"},nI={class:"tw-flex tw-items-center tw-gap-1"},dI={class:"tw-text-green-500"},wI={key:0},cI={class:"tw-text-red-400"},uI=(0,i.uE)('<div class="tw-flex tw-gap-3 mt-5"><div class="tw-flex tw-items-center tw-gap-1 tw-text-xs"><div class="tw-w-[10px] tw-h-[10px] tw-rounded-full tw-bg-green-500"></div><span>Available</span></div><div class="tw-flex tw-items-center tw-gap-1 tw-text-xs"><div class="tw-w-[10px] tw-h-[10px] tw-rounded-full tw-bg-neutral-700"></div><span>Initial</span></div><div class="tw-flex tw-items-center tw-gap-1 tw-text-xs"><div class="tw-w-[10px] tw-h-[10px] tw-rounded-full tw-bg-red-400"></div><span>Not Received</span></div></div>',1);function pI(t,e,s,a,r,l){return(0,i.wg)(),(0,i.iD)("div",tI,[(0,i.Wm)(G.T,{onClick:l.cancel,icon:"mdi-close",variant:"flat",size:"w-small",color:"red",class:"tw-absolute tw-top-3 tw-z-10 tw-right-3"},null,8,["onClick"]),(0,i._)("div",eI,[(0,i._)("table",sI,[aI,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.state.variations,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,i._)("td",iI,(0,Q.zw)(t.id),1),(0,i._)("td",rI,(0,Q.zw)(t.size),1),(0,i._)("td",lI,(0,Q.zw)(t.color),1),(0,i._)("td",oI,[(0,i._)("div",nI,[(0,i._)("span",dI,(0,Q.zw)(t.available_quantity),1),(0,i._)("span",null,"/ "+(0,Q.zw)(t.quantity),1),t.on_hold>0?((0,i.wg)(),(0,i.iD)("span",wI,[(0,i.Uk)(" / "),(0,i._)("span",cI,(0,Q.zw)(t.on_hold),1)])):(0,i.kq)("",!0)])])])))),128))])]),uI])])}var mI={props:["state"],data(){return{}},computed:{},methods:{cancel(){this.$emit("cancel")}},mounted(){console.log(this.state)}};const hI=(0,d.Z)(mI,[["render",pI]]);var gI=hI,fI={props:["rowIndex","state"],components:{InventoryStateDetails:gI},name:"inventoryStateActions",data(){return{showPopup:!1,confirmPopup:!1,detailsPopup:!1,isConfirmed:!1,note:"",isLoading:!1}},computed:{user(){return this.$store.getters["user/user"]}},methods:{},mounted(){}};const vI=(0,d.Z)(fI,[["render",XF]]);var yI=vI,_I={props:["columns","states"],components:{InventoryStateActions:yI},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.states.length/this.paginationLimit)},items(){return this.states.slice(this.prevRange,this.nextRange)}},methods:{availableQuantity(t){let e=0;return t.variations.forEach((t=>{e+=t.available_quantity})),e}}};const xI=(0,d.Z)(_I,[["render",JF]]);var bI=xI,kI={components:{InventoryStateTable:bI},data(){return{localUrl:R,isLoaded:!1,showFilters:!1,search:"",columns:[{prop:"id",name:"#"},{prop:"product_name",name:"Product Name"},{prop:"buying_price",name:"Buying Price"},{prop:"selling_price",name:"Selling Price"},{prop:"available",name:"Available"},{prop:"quantity",name:"Quantity"},{prop:"updated_at",name:"Updated At"},{prop:"actions",name:"Actions"}]}},computed:{inventoryState(){return this.$store.getters["inventory/inventoryState"]},filteredInventoryState(){return this.inventoryState.filter((t=>!!(t.ref.toLowerCase().includes(this.search.toLowerCase())||t.name.toLowerCase().includes(this.search.toLowerCase())||t.description.toLowerCase().includes(this.search.toLowerCase()))))}},methods:{async getInventoryStates(){await PF.inventoryStates().then((t=>{if(console.log(t.data.data),"SHOW_ALL_INVENTORY_STATES"==t.data.code){const e=t.data.data;this.$store.dispatch("inventory/setInventoryState",e)}}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))}},async mounted(){this.getInventoryStates()}};const CI=(0,d.Z)(kI,[["render",UF]]);var DI=CI;const SI=(0,i._)("div",{class:"mb-5"},[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Add Inventory Movement"),(0,i._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create New Movement")],-1),zI={key:0},UI={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},LI={class:"tw-w-full"},PI=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery",-1),AI={class:"tw-relative"},WI=["disabled"],$I=["value"],EI={class:"tw-w-full"},OI=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Product Name",-1),TI={class:"tw-relative"},VI=["disabled"],qI=["value"],RI={class:"tw-w-full"},FI=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variation",-1),II={class:"tw-relative"},jI=["value"],NI={class:"tw-w-full"},MI=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),HI={class:"tw-w-full tw-h-full tw-flex tw-items-end"},YI=(0,i._)("span",{class:"text-white text-capitalize"},"Add",-1),KI={class:"tw-max-w-full"},ZI={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},BI=(0,i._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,i._)("tr",null,[(0,i._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,i._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"}," SIZE "),(0,i._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," COLOR "),(0,i._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY "),(0,i._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate tw-max-w-[50px]"}," ACTIONS ")])],-1),QI={class:"tw-w-4 tw-p-4"},GI={class:"tw-w-4 tw-p-4"},JI={class:"tw-w-4 tw-p-4"},XI={class:"tw-w-4 tw-p-4"},tj={class:"tw-w-4 tw-p-4"},ej={class:"tw-w-fit tw-h-full tw-flex tw-items-end"},sj={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},aj=(0,i._)("span",{class:"text-white text-capitalize"},"Cancel",-1),ij=(0,i._)("span",{class:"text-white text-capitalize"},"Create",-1);function rj(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation");return(0,i.wg)(),(0,i.iD)("div",null,[SI,l.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",zI,[(0,i.Wm)(n)])),l.isLoaded?((0,i.wg)(),(0,i.iD)("div",UI,[(0,i._)("div",null,[(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",LI,[PI,(0,i._)("div",AI,[(0,i.wy)((0,i._)("select",{disabled:l.selectedVariations.length,"onUpdate:modelValue":e[0]||(e[0]=t=>l.delivery=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-capitalize tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.deliveries,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname+" "+t.lastname),9,$I)))),128))],8,WI),[[a.bM,l.delivery]]),(0,i.Wm)(X.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",EI,[OI,(0,i._)("div",TI,[(0,i.wy)((0,i._)("select",{disabled:l.selectedVariations.length>0,"onUpdate:modelValue":e[1]||(e[1]=t=>l.product=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.products,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,qI)))),128))],8,VI),[[a.bM,l.product]]),(0,i.Wm)(X.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",RI,[FI,(0,i._)("div",II,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.variation=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.variations,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.color+" - "+t.size+"  ("+t.available_quantity+" items)"),9,jI)))),128))],512),[[a.bM,l.variation]]),(0,i.Wm)(X.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",sm:"4",md:"4"},{default:(0,i.w5)((()=>[(0,i._)("div",NI,[MI,(0,i._)("div",null,[(0,i.Wm)(tt.hw,{type:"number",onChange:o.handleQuantityChange,"hide-details":!0,modelValue:l.quantity,"onUpdate:modelValue":e[3]||(e[3]=t=>l.quantity=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","modelValue"])])])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",sm:"2",md:"2"},{default:(0,i.w5)((()=>[(0,i._)("div",HI,[(0,i.Wm)(G.T,{onClick:o.addVariation,color:"primary-color",variant:"flat",size:"large"},{default:(0,i.w5)((()=>[YI])),_:1},8,["onClick"])])])),_:1}),(0,i.Wm)(oa.D,{cols:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",KI,[(0,i._)("table",ZI,[BI,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.selectedVariations,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,i._)("td",QI,(0,Q.zw)(t.id),1),(0,i._)("td",GI,(0,Q.zw)(t.size),1),(0,i._)("td",JI,(0,Q.zw)(t.color),1),(0,i._)("td",XI,(0,Q.zw)(t.quantity),1),(0,i._)("td",tj,[(0,i._)("div",ej,[(0,i.Wm)(G.T,{onClick:e=>o.deleteVariation(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])])])])),_:1})])),_:1})]),(0,i._)("div",sj,[(0,i.Wm)(G.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,i.w5)((()=>[aj])),_:1}),(0,i.Wm)(G.T,{onClick:o.create,loading:l.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,i.w5)((()=>[ij])),_:1},8,["onClick","loading"])])])):(0,i.kq)("",!0)])}var lj={data(){return{isLoading:!1,isLoaded:!1,variationId:0,product:1,delivery:1,quantity:0,variation:0,selectedVariations:[]}},computed:{products(){return this.$store.getters["product/products"]},deliveries(){return this.$store.getters["user/deliveries"]},variations(){return this.products.find((t=>t.id==this.product))?.variations.filter((t=>{let e=!0;return this.selectedVariations.forEach((s=>{t.id==s.id&&(e=!1)})),e}))}},watch:{product(){this.variations.length>0?this.variation=this.variations[0].id:this.variation=null}},methods:{addVariation(){if(0==this.variations.length)return!1;const t=this.variations.find((t=>t.id==this.variation));if(!t)return!1;if(this.quantity>t.available_quantity||0==this.quantity)return this.$alert({type:"warning",title:"Quantity should be between 1 and "+t.available_quantity}),!1;const e={id:t.id,size:t.size,color:t.color,quantity:this.quantity};this.quantity=0,this.selectedVariations.push(e),this.variations.length>0?this.variation=this.variations[0].id:this.variation=null},deleteVariation(t){this.selectedVariations=this.selectedVariations.filter((e=>e.id!==t)),1==this.variations.length&&(this.variation=this.variations[0].id)},create(){if(0==this.selectedVariations.length)return this.$alert({type:"warning",title:"You need to add some variations"}),!1;let t=0;this.selectedVariations.forEach((e=>t+=e.quantity)),this.isLoading=!0,PF.inventoryMovementCreate({product_id:this.product,delivery_id:this.delivery,variants:this.selectedVariations,quantity:this.qty}).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.selectedVariations=[],this.getData()),"ERROR_QUANTITY"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).finally((()=>this.isLoading=!1))},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},async getDeliveries(){await Z.deliveries().then((t=>{const e=t.data.data;this.$store.dispatch("user/setDeliveries",e),e.length>0?this.delivery=e[0].id:this.delivery=null}),this.$handleApiError)},getProducts(){return PF.inventoryStates().then((t=>{if("SHOW_ALL_INVENTORY_STATES"==t.data.code){const e=t.data.data;if(this.$store.dispatch("product/setProducts",e),e.length>0){const t=e[0];this.product=t.id,this.variations.length>0&&(this.variation=this.variations[0].id)}else this.product=null}}),(t=>{this.$handleApiError(t)}))},getData(){this.isLoaded=!1,Promise.allSettled([this.getProducts(),this.getDeliveries()]).then((()=>{this.isLoaded=!0}))}},mounted(){this.getData()}};const oj=(0,d.Z)(lj,[["render",rj]]);var nj=oj;const dj=(0,i._)("div",{class:"mb-5"},[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Update Inventory Movement"),(0,i._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Edit an existing Movement")],-1),wj={key:0},cj={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},uj={class:"tw-w-full"},pj=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery",-1),mj={class:"tw-relative"},hj=["value"],gj={class:"tw-w-full"},fj=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variation",-1),vj={class:"tw-relative"},yj=["value"],_j={class:"tw-w-full"},xj=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),bj={class:"tw-w-full tw-h-full tw-flex tw-items-end"},kj=(0,i._)("span",{class:"text-white text-capitalize"},"Add",-1),Cj={class:"tw-max-w-full"},Dj={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Sj=(0,i._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,i._)("tr",null,[(0,i._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,i._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"}," SIZE "),(0,i._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," COLOR "),(0,i._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY "),(0,i._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate tw-max-w-[50px]"}," ACTIONS ")])],-1),zj={class:"tw-w-4 tw-p-4"},Uj={class:"tw-w-4 tw-p-4"},Lj={class:"tw-w-4 tw-p-4"},Pj={class:"tw-w-4 tw-p-4"},Aj={class:"tw-w-4 tw-p-4"},Wj={class:"tw-w-fit tw-h-full tw-flex tw-items-end"},$j={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Ej=(0,i._)("span",{class:"text-white text-capitalize"},"Cancel",-1),Oj=(0,i._)("span",{class:"text-white text-capitalize"},"Update",-1);function Tj(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation");return(0,i.wg)(),(0,i.iD)("div",null,[dj,l.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",wj,[(0,i.Wm)(n)])),l.isLoaded?((0,i.wg)(),(0,i.iD)("div",cj,[(0,i._)("div",null,[(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",uj,[pj,(0,i._)("div",mj,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.delivery=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-capitalize tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.deliveries,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname+" "+t.lastname),9,hj)))),128))],512),[[a.bM,l.delivery]]),(0,i.Wm)(X.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",gj,[fj,(0,i._)("div",vj,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.variation=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.variations,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.color+" / "+t.size+" / "+t.quantity),9,yj)))),128))],512),[[a.bM,l.variation]]),(0,i.Wm)(X.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",sm:"4",md:"4"},{default:(0,i.w5)((()=>[(0,i._)("div",_j,[xj,(0,i._)("div",null,[(0,i.Wm)(tt.hw,{type:"number",onChange:o.handleQuantityChange,"hide-details":!0,modelValue:l.quantity,"onUpdate:modelValue":e[2]||(e[2]=t=>l.quantity=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","modelValue"])])])])),_:1}),(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",sm:"2",md:"2"},{default:(0,i.w5)((()=>[(0,i._)("div",bj,[(0,i.Wm)(G.T,{onClick:o.addVariation,color:"primary-color",variant:"flat",size:"large"},{default:(0,i.w5)((()=>[kj])),_:1},8,["onClick"])])])),_:1}),(0,i.Wm)(oa.D,{cols:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",Cj,[(0,i._)("table",Dj,[Sj,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.selectedVariations,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,i._)("td",zj,(0,Q.zw)(t.id),1),(0,i._)("td",Uj,(0,Q.zw)(t.size),1),(0,i._)("td",Lj,(0,Q.zw)(t.color),1),(0,i._)("td",Pj,(0,Q.zw)(t.quantity),1),(0,i._)("td",Aj,[(0,i._)("div",Wj,[(0,i.Wm)(G.T,{onClick:e=>o.deleteVariation(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])])])])),_:1})])),_:1})]),(0,i._)("div",$j,[(0,i.Wm)(G.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,i.w5)((()=>[Ej])),_:1}),(0,i.Wm)(G.T,{onClick:o.update,loading:l.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,i.w5)((()=>[Oj])),_:1},8,["onClick","loading"])])])):(0,i.kq)("",!0)])}var Vj={data(){return{isLoading:!1,isLoaded:!1,movement:null,variationId:0,product:1,delivery:1,quantity:0,variation:0,selectedVariations:[]}},computed:{products(){return this.$store.getters["product/products"]},deliveries(){return this.$store.getters["user/deliveries"]},id(){return this.$route.params.id},variations(){return this.products.find((t=>t.id==this.product))?.variations.filter((t=>{let e=!0;return this.selectedVariations.forEach((s=>{t.id==s.id&&(e=!1)})),e}))}},watch:{product(){this.variations.length>0?this.variation=this.variations[0].id:this.variation=null}},methods:{addVariation(){if(0==this.variations.length)return!1;const t=this.variations.find((t=>t.id==this.variation));if(!t)return!1;if(this.quantity>t.quantity||0==this.quantity)return this.$alert({type:"warning",title:"Quantity should be between 1 and "+t.quantity}),!1;const e={id:t.id,size:t.size,color:t.color,quantity:this.quantity};this.quantity=0,this.selectedVariations.push(e),this.variations.length>0?this.variation=this.variations[0].id:this.variation=null},deleteVariation(t){this.selectedVariations=this.selectedVariations.filter((e=>e.id!==t)),1==this.variations.length&&(this.variation=this.variations[0].id)},update(){if(0==this.selectedVariations.length)return this.$alert({type:"warning",title:"You need to add some variations"}),!1;let t=0;this.selectedVariations.forEach((e=>t+=e.quantity)),this.isLoading=!0,PF.inventoryMovementUpdate(this.id,{product_id:this.product,delivery_id:this.delivery,variants:this.selectedVariations,quantity:this.qty}).then((t=>{"SUCCESS"==t.data.code&&this.$alert({type:"success",title:t.data.message}),"ERROR_QUANTITY"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).finally((()=>this.isLoading=!1))},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},async getDeliveries(){await Z.deliveries().then((t=>{const e=t.data.data;this.$store.dispatch("user/setDeliveries",e),e.length>0?this.delivery=e[0].id:this.delivery=null}),this.$handleApiError)},getProducts(){return ea.all().then((t=>{if("SUCCESS"==t.data.code){const e=t.data.data.products;this.$store.dispatch("product/setProducts",e),e.length>0?this.product=e[0].id:this.product=null}}),(t=>{this.$handleApiError(t)}))},getMovement(){return PF.getMovement(this.id).then((t=>{if("SUCCESS"==t.data.code){const e=t.data.data.movement;this.product=e.product.id,this.delivery=e.delivery.id,this.selectedVariations=e.inventory_movement_variations;let s=0;this.selectedVariations.forEach((t=>{s+=t.quantity})),this.quantity_total=s}}),(t=>{this.$handleApiError(t)}))}},mounted(){Promise.allSettled([this.getProducts(),this.getDeliveries(),this.getMovement()]).then((()=>{this.isLoaded=!0}))}};const qj=(0,d.Z)(Vj,[["render",Tj]]);var Rj=qj;const Fj=(0,i._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,i._)("div",null,[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Inventory State List"),(0,i._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"See your inventory state")])],-1),Ij={key:0},jj={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Nj={class:"mb-5 tw-flex"},Mj={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},Hj={key:0,class:""};function Yj(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation"),d=(0,i.up)("InventoryMovementsTable");return(0,i.wg)(),(0,i.iD)("div",null,[Fj,l.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",Ij,[(0,i.Wm)(n)])),l.isLoaded?((0,i.wg)(),(0,i.iD)("div",jj,[(0,i._)("div",Nj,[(0,i.Wm)(G.T,{icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white !tw-w-0 !tw-overflow-hidden"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,i._)("div",Mj,[(0,i.Wm)(Zt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,l.search]])])]),o.inventoryMovements.length>0?((0,i.wg)(),(0,i.iD)("div",Hj,[(0,i.Wm)(d,{columns:l.columns,movements:o.inventoryMovements},null,8,["columns","movements"])])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)])}const Kj={class:"tw-relative tw-min-h-[400px] tw-overflow-x-auto tw-overflow-y-visible sm:tw-rounded-lg"},Zj={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Bj={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},Qj=(0,i._)("th",{scope:"col",class:"tw-p-4"},[(0,i._)("div",{class:"tw-flex tw-items-center"},[(0,i._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,i._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),Gj={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},Jj=(0,i._)("td",{class:"tw-w-4 tw-p-4"},[(0,i._)("div",{class:"tw-flex tw-items-center"},[(0,i._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,i._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),Xj={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},tN={class:"tw-px-6 tw-py-4"},eN=(0,i._)("br",null,null,-1),sN={class:"tw-px-6 tw-py-4"},aN={class:"tw-px-6 tw-py-4"},iN={class:"tw-px-6 tw-py-4"},rN={class:"tw-px-6 tw-py-4"},lN={class:"tw-px-6 tw-py-4"},oN={class:"tw-w-[200px] !tw-whitespace-normal"},nN={class:"tw-px-6 tw-py-4"},dN={class:"tw-px-6 tw-py-4"},wN={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},cN={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},uN=(0,i._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),pN=["value"],mN={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},hN={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},gN={class:"tw-text-white"};function fN(t,e,s,r,l,o){const n=(0,i.up)("router-link"),d=(0,i.up)("InventoryMovementsActions");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Kj,[(0,i._)("table",Zj,[(0,i._)("thead",Bj,[(0,i._)("tr",null,[Qj,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.columns,(t=>((0,i.wg)(),(0,i.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,i._)("div",Gj,(0,Q.zw)(t.name),1)])))),128))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.movements,((t,e)=>((0,i.wg)(),(0,i.iD)("tr",{key:e,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[Jj,(0,i._)("th",Xj,(0,Q.zw)(t.id),1),(0,i._)("td",tN,[(0,i.Uk)((0,Q.zw)(t.created_at?.split("T")[0])+" ",1),eN,(0,i.Uk)(" "+(0,Q.zw)(t.created_at?.split("T")[1].split(".")[0]),1)]),(0,i._)("td",sN,(0,Q.zw)(t.delivery.firstname+" "+t.delivery.lastname),1),(0,i._)("td",aN,[(0,i.Wm)(n,{to:"products/"+t.product.id},{default:(0,i.w5)((()=>[(0,i.Uk)((0,Q.zw)(t.product.name),1)])),_:2},1032,["to"])]),(0,i._)("td",iN,(0,Q.zw)(o.quantityTotal(t.inventory_movement_variations)),1),(0,i._)("td",rN,[(0,i._)("div",{class:(0,Q.C_)([[t.is_received?"tw-text-green-500 tw-bg-green-500/10":"tw-text-red-500 tw-bg-red-500/10"],"tw-flex tw-justify-center tw-py-1 tw-rounded-lg tw-items-center"])},[(0,i._)("span",null,(0,Q.zw)(t.is_received?"Yes":"No"),1)],2)]),(0,i._)("td",lN,[(0,i._)("div",oN,(0,Q.zw)(t.note?t.note:"-"),1)]),(0,i._)("td",nN,(0,Q.zw)(t.delivery.city?.name),1),(0,i._)("td",dN,[(0,i.Wm)(d,{movement:t},null,8,["movement"])])])))),128))])])]),(0,i._)("div",wN,[(0,i._)("div",cN,[uN,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allowedLimit,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,pN)))),128))],512),[[a.bM,l.paginationLimit]])]),(0,i._)("div",mN,[(0,i._)("div",hN,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?s.movements.length:o.nextRange)+" of "+(0,Q.zw)(s.movements.length)+" items ",1),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.pageCount,(t=>((0,i.wg)(),(0,i.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,i.w5)((()=>[(0,i._)("span",gN,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const vN={class:"md:tw-w-[50%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},yN=(0,i._)("h1",{class:"tw-text-lg tw-font-medium tw-text-blue-500"},"Confirmation",-1),_N={class:"mt-3"},xN=(0,i._)("h2",{class:"mb-2"},"Received",-1),bN={class:"tw-mt-3"},kN=(0,i._)("h2",{class:"tw-text-md mb-1"},"Add note",-1),CN={class:"tw-flex tw-gap-2 mt-3 tw-justify-end"},DN=(0,i._)("span",{class:"text-white"}," Cancel ",-1),SN=(0,i._)("span",{class:"text-white"}," Update ",-1);function zN(t,e,s,r,l,o){const n=(0,i.up)("popup-full"),d=(0,i.up)("MovementDetails"),w=(0,i.up)("popup");return(0,i.wg)(),(0,i.iD)("div",{key:s.movement.id,class:"tw-flex tw-items-center"},[["delivery","admin"].includes(o.user.role)?((0,i.wg)(),(0,i.j4)(G.T,{key:0,onClick:e[0]||(e[0]=t=>l.confirmPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-checkbox-marked-outline")])),_:1})])),_:1})):(0,i.kq)("",!0),(0,i.kq)("",!0),(t.$can("view_inventory_movement"),(0,i.wg)(),(0,i.j4)(G.T,{key:2,onClick:e[1]||(e[1]=t=>l.detailsPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-eye-outline")])),_:1})])),_:1})),t.$can("delete_inventory_movement")?((0,i.wg)(),(0,i.j4)(G.T,{key:3,onClick:e[2]||(e[2]=t=>l.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,i.kq)("",!0),t.$can("confirmation_inventory_movement")?((0,i.wg)(),(0,i.j4)(n,{key:4,visible:l.confirmPopup,onCancel:e[6]||(e[6]=t=>l.confirmPopup=!1)},{default:(0,i.w5)((()=>[(0,i._)("div",vN,[yN,(0,i._)("div",_N,[xN,(0,i.Wm)(Xl.G,{density:"compact","hide-details":!0,modelValue:l.isConfirmed,"onUpdate:modelValue":e[3]||(e[3]=t=>l.isConfirmed=t),color:"blue"},null,8,["modelValue"])]),(0,i._)("div",bN,[kN,(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.note=t),cols:"30",rows:"3",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n\r\n              ",512),[[a.nr,l.note]])]),(0,i._)("div",CN,[(0,i.Wm)(G.T,{onClick:e[5]||(e[5]=t=>l.confirmPopup=!1),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[DN])),_:1}),(0,i.Wm)(G.T,{loading:l.isLoading,onClick:o.updateMovement,color:"blue",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[SN])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])):(0,i.kq)("",!0),(0,i.Wm)(n,{visible:l.detailsPopup,onCancel:e[8]||(e[8]=t=>l.detailsPopup=!1)},{default:(0,i.w5)((()=>[l.detailsPopup?((0,i.wg)(),(0,i.j4)(d,{key:0,onCancel:e[7]||(e[7]=t=>l.detailsPopup=!1),movement:s.movement},null,8,["movement"])):(0,i.kq)("",!0)])),_:1},8,["visible"]),(0,i.Wm)(w,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this movement?</p> You won't be able to revert this!",loading:l.isLoading,visible:l.showPopup,onResolved:o.handleResolved},null,8,["loading","visible","onResolved"])])}const UN={class:"md:tw-w-[50%] tw-relative tw-max-h-full tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},LN={class:"tw-p-5"},PN={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500 tw-rounded-md tw-overflow-hidden"},AN=(0,i._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,i._)("tr",null,[(0,i._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,i._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"}," SIZE "),(0,i._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," COLOR "),(0,i._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY ")])],-1),WN={class:"tw-w-4 tw-p-4"},$N={class:"tw-w-4 tw-p-4"},EN={class:"tw-w-4 tw-p-4"},ON={class:"tw-w-4 tw-p-4"};function TN(t,e,s,a,r,l){return(0,i.wg)(),(0,i.iD)("div",UN,[(0,i.Wm)(G.T,{onClick:l.cancel,icon:"mdi-close",variant:"flat",size:"w-small",color:"red",class:"tw-absolute tw-top-3 tw-z-10 tw-right-3"},null,8,["onClick"]),(0,i._)("div",LN,[(0,i._)("table",PN,[AN,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.movement.inventory_movement_variations,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,i._)("td",WN,(0,Q.zw)(t.id),1),(0,i._)("td",$N,(0,Q.zw)(t.product_variation.size),1),(0,i._)("td",EN,(0,Q.zw)(t.product_variation.color),1),(0,i._)("td",ON,(0,Q.zw)(t.quantity),1)])))),128))])])])])}var VN={props:["movement"],data(){return{}},computed:{},methods:{cancel(){this.$emit("cancel")}},mounted(){}};const qN=(0,d.Z)(VN,[["render",TN]]);var RN=qN,FN={props:["rowIndex","movement"],components:{MovementDetails:RN},name:"inventoryActions",data(){return{showPopup:!1,confirmPopup:!1,detailsPopup:!1,isConfirmed:!1,note:"",isLoading:!1}},computed:{user(){return this.$store.getters["user/user"]}},methods:{handleResolved(t){t?(this.isLoading=!0,PF["delete"](this.movement.id).then((t=>{"SUCCESS"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Inventory Movement Deleted Successfully"})),this.getMovements()})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1},updateMovement(){this.isLoading=!0,PF.deliveryUpdateMovement(this.movement.id,this.isConfirmed?1:0,this.note).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:"Inventory Movement Updated Successfully"}),this.getMovements())}),this.$handleApiError).finally((()=>{this.isLoading=!1,this.confirmPopup=!1}))},getMovements(){PF.inventoryMovements().then((t=>{if("SHOW_ALL_INVENTORY_MOVEMENTS"==t.data.code){const e=t.data.data;this.$store.dispatch("inventory/setInventoryMovements",e)}})).catch(this.$handleApiError)}},mounted(){this.note=this.movement.note,this.isConfirmed=1==this.movement.is_received}};const IN=(0,d.Z)(FN,[["render",zN]]);var jN=IN,NN={props:["columns","movements"],components:{InventoryMovementsActions:jN},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.movements.length/this.paginationLimit)},items(){return this.movements.slice(this.prevRange,this.nextRange)}},methods:{quantityTotal(t){let e=0;return t.forEach((t=>{e+=t.quantity})),e}}};const MN=(0,d.Z)(NN,[["render",fN]]);var HN=MN,YN={components:{InventoryMovementsTable:HN},data(){return{localUrl:R,isLoaded:!1,showFilters:!1,search:"",columns:[{prop:"id",name:"#"},{prop:"created_at",name:"Date"},{prop:"delivery",name:"Delivery"},{prop:"product",name:"Product"},{prop:"quantity",name:"Quantity"},{prop:"received",name:"Received"},{prop:"note",name:"Note"},{prop:"city",name:"City"},{prop:"actions",name:"Actions"}]}},computed:{inventoryMovements(){return this.$store.getters["inventory/inventoryMovements"]},filteredInventoryState(){return this.inventoryMovements.filter((()=>!0))}},methods:{async getInventoryMovements(){await PF.inventoryMovements().then((t=>{if(console.log(t.data.data),"SHOW_ALL_INVENTORY_MOVEMENTS"==t.data.code){const e=t.data.data;this.$store.dispatch("inventory/setInventoryMovements",e),console.log(e)}}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))}},async mounted(){this.getInventoryMovements()}};const KN=(0,d.Z)(YN,[["render",Yj]]);var ZN=KN,BN={name:"inventory/list",path:"/inventories",component:ia,meta:{module:"inventory"},children:[{name:"inventory/state",path:"",component:DI,meta:{module:"inventory",subModule:"inventory/list",title:"Inventory State",gate:"show_all_inventory_states"}},{name:"inventory/movememnts",path:"movements",component:ZN,meta:{module:"inventory",subModule:"inventory/movements",title:"Inventory Movements",gate:"show_all_inventory_movements"}},{name:"inventory/add",path:"add",component:nj,meta:{module:"inventory",subModule:"inventory/add",title:"Add Inventory Movement",gate:"create_inventory_movement"}},{name:"inventory/update",path:"update/:id",component:Rj,meta:{module:"inventory",subModule:"inventory/update",title:"Update Inventory Movement",gate:"update_inventory_movement"}}]};const QN={class:"mb-5 tw-flex tw-justify-between tw-items-center"},GN=(0,i._)("div",null,[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Shop List"),(0,i._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your shops")],-1),JN={key:0},XN=(0,i._)("span",{class:"text-white"}," Add Shop ",-1),tM={key:0},eM={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},sM={class:"mb-5 tw-flex"},aM={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},iM={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},rM={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},lM=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),oM={class:"tw-relative"},nM={class:""};function dM(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation"),d=(0,i.up)("ShopsTable");return(0,i.wg)(),(0,i.iD)("div",{key:o.shops.length},[(0,i._)("div",QN,[GN,t.$can("create_shop")?((0,i.wg)(),(0,i.iD)("div",JN,[(0,i.Wm)(G.T,{color:"primary-color",link:"",to:{name:"shop/add"},variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),XN])),_:1})])):(0,i.kq)("",!0)]),l.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",tM,[(0,i.Wm)(n)])),l.isLoaded?((0,i.wg)(),(0,i.iD)("div",eM,[(0,i._)("div",sM,[(0,i.Wm)(G.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,i._)("div",aM,[(0,i.Wm)(Zt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,l.search]])])]),(0,i._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,i._)("div",iM,[(0,i._)("div",rM,[lM,(0,i._)("div",oM,[(0,i.wy)((0,i._)("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=t=>l.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[a.nr,l.date]])])])])],2),(0,i._)("div",nM,[(0,i.Wm)(d,{columns:l.columns,shops:o.filteredShops},null,8,["columns","shops"])])])):(0,i.kq)("",!0)])}class wM{async create(t){return await Y.getCookie(),M.post("api/shops/new",{name:t.name})}async update(t,e){return await Y.getCookie(),M.post("api/shops/update/"+t,{name:e.name})}async all(){return await Y.getCookie(),M.get("api/shops")}async getShop(t){return await Y.getCookie(),M.get("api/shops/"+t)}async delete(t){return await Y.getCookie(),M["delete"]("api/shops/delete/"+t)}}var cM=new wM;const uM={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},pM={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},mM={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},hM=(0,i._)("th",{scope:"col",class:"tw-p-4"},[(0,i._)("div",{class:"tw-flex tw-items-center"},[(0,i._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,i._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),gM={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},fM=(0,i._)("td",{class:"tw-w-4 tw-p-4"},[(0,i._)("div",{class:"tw-flex tw-items-center"},[(0,i._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,i._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),vM={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},yM={class:"tw-px-6 tw-py-4"},_M={class:"tw-px-6 tw-py-4"},xM={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},bM={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},kM={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},CM=(0,i._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),DM=["value"],SM={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},zM={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},UM={class:"tw-text-white"};function LM(t,e,s,r,l,o){const n=(0,i.up)("ShopActions");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",uM,[(0,i._)("table",pM,[(0,i._)("thead",mM,[(0,i._)("tr",null,[hM,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.columns,(t=>((0,i.wg)(),(0,i.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,i._)("div",gM,(0,Q.zw)(t.name),1)])))),128))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.shops,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[fM,(0,i._)("th",vM,(0,Q.zw)(t.id),1),(0,i._)("td",yM,(0,Q.zw)(t.name),1),(0,i._)("td",_M,(0,Q.zw)(t.created_at.split("T")[0]),1),(0,i._)("td",xM,[(0,i.Wm)(n,{shop:t},null,8,["shop"])])])))),128))])])]),(0,i._)("div",bM,[(0,i._)("div",kM,[CM,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allowedLimit,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,DM)))),128))],512),[[a.bM,l.paginationLimit]])]),(0,i._)("div",SM,[(0,i._)("div",zM,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?s.shops.length:o.nextRange)+" of "+(0,Q.zw)(s.shops.length)+" items ",1),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.pageCount,(t=>((0,i.wg)(),(0,i.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,i.w5)((()=>[(0,i._)("span",UM,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const PM={class:"tw-flex tw-items-center tw-gap-1"};function AM(t,e,s,a,r,l){const o=(0,i.up)("popup");return(0,i.wg)(),(0,i.iD)("div",PM,[t.$can("update_shop")?((0,i.wg)(),(0,i.j4)(G.T,{key:0,to:"/shops/update/"+s.shop.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-pencil-outline")])),_:1})])),_:1},8,["to"])):(0,i.kq)("",!0),t.$can("delete_shop")?((0,i.wg)(),(0,i.j4)(G.T,{key:1,onClick:e[0]||(e[0]=t=>r.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this shop?</p> You won't be able to revert this!",loading:r.isLoading,visible:r.showPopup,onResolved:l.handleResolved},null,8,["loading","visible","onResolved"])])}var WM={props:["rowIndex","shop"],name:"shopActions",data(){return{showPopup:!1,isLoading:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,cM["delete"](this.shop.id).then((t=>{"SHOP_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Shop Deleted Successfully"})),cM.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("shop/setShops",t.data.data.shops)})).catch(this.$handleApiError)})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const $M=(0,d.Z)(WM,[["render",AM]]);var EM=$M,OM={props:["columns","shops"],components:{ShopActions:EM},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.shops.length/this.paginationLimit)},items(){return this.shops.slice(this.prevRange,this.nextRange)}},methods:{}};const TM=(0,d.Z)(OM,[["render",LM]]);var VM=TM,qM={components:{ShopsTable:VM},data(){return{localUrl:R,isLoaded:!1,showFilters:!1,date:null,search:"",columns:[{prop:"id",name:"#"},{prop:"name",name:"Name"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{shops(){return this.$store.getters["shop/shops"]},filteredShops(){const t=this.date;return this.shops.filter((e=>(!t||e?.created_at.split("T")[0]===t)&&!!e.name.toLowerCase().includes(this.search.toLowerCase())))}},mounted(){cM.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("shop/setShops",t.data.data.shops)}),(t=>{this.$handleApiError(t)})).finally((()=>this.isLoaded=!0))}};const RM=(0,d.Z)(qM,[["render",dM]]);var FM=RM;const IM=(0,i._)("div",{class:"mb-5"},[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Add Shop "),(0,i._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create new shop")],-1),jM={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},NM={class:"tw-w-full"},MM=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Shop Name ",-1),HM={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},YM={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},KM=(0,i._)("span",{class:"text-white text-capitalize"},"Cancel",-1),ZM=(0,i._)("span",{class:"text-white text-capitalize"},"Create",-1);function BM(t,e,s,a,r,l){return(0,i.wg)(),(0,i.iD)("div",null,[IM,(0,i._)("div",jM,[(0,i._)("div",null,[(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",NM,[MM,(0,i.Wm)(tt.hw,{error:!r.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("name")),"hide-details":!0,modelValue:r.shop.name,"onUpdate:modelValue":e[1]||(e[1]=t=>r.shop.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",HM,(0,Q.zw)(r.formStatus.name.message),1)])])),_:1})])),_:1})])),_:1})])),_:1})]),(0,i._)("div",YM,[(0,i.Wm)(G.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,i.w5)((()=>[KM])),_:1}),(0,i.Wm)(G.T,{onClick:l.create,loading:r.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,i.w5)((()=>[ZM])),_:1},8,["onClick","loading"])])])])}var QM={components:{},data(){return{isLoading:!1,shop:{name:""},formStatus:{name:{valid:!0,message:""}}}},methods:{create(){if(!this.validate())return!1;this.isLoading=!0;let t=this.shop;cM.create(t).then((t=>{"SHOP_CREATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.shop={name:""}),"VALIDATION_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.errors.ref})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=bt(this.shop.name,"Shop name"),this.formStatus.name.valid}}};const GM=(0,d.Z)(QM,[["render",BM]]);var JM=GM;const XM=(0,i._)("div",{class:"mb-5"},[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Update Shop"),(0,i._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Update shop informations")],-1),tH={key:0},eH={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},sH={class:"tw-flex tw-gap-2 tw-text-neutral-800 tw-items-center tw-mb-5"},aH={class:"tw-block tw-py-1 tw-px-2 tw-rounded-md text-primary-color"},iH={class:"tw-w-full"},rH=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Shop Name",-1),lH={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},oH={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},nH=(0,i._)("span",{class:"text-white text-capitalize"},"Cancel",-1),dH=(0,i._)("span",{class:"text-white text-capitalize"},"Update",-1);function wH(t,e,s,a,r,l){const o=(0,i.up)("LoadingAnimation");return(0,i.wg)(),(0,i.iD)("div",null,[XM,r.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",tH,[(0,i.Wm)(o)])),r.isLoaded?((0,i.wg)(),(0,i.iD)("div",eH,[(0,i._)("div",sH,[(0,i.Uk)(" Shop ID: "),(0,i._)("span",aH,(0,Q.zw)(l.id),1)]),(0,i._)("div",null,[(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i.Wm)(la.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(oa.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",iH,[rH,(0,i.Wm)(tt.hw,{error:!r.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("name")),"hide-details":!0,modelValue:r.shop.name,"onUpdate:modelValue":e[1]||(e[1]=t=>r.shop.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",lH,(0,Q.zw)(r.formStatus.name.message),1)])])),_:1})])),_:1})])),_:1})])),_:1})]),(0,i._)("div",oH,[(0,i.Wm)(G.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,i.w5)((()=>[nH])),_:1}),(0,i.Wm)(G.T,{onClick:l.update,loading:r.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,i.w5)((()=>[dH])),_:1},8,["onClick","loading"])])])):(0,i.kq)("",!0)])}var cH={components:{},data(){return{isLoading:!1,isLoaded:!1,shop:{name:""},formStatus:{name:{valid:!0,message:""}}}},computed:{id(){return this.$route.params.id}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0;let t=this.shop;cM.update(this.$route.params.id,t).then((t=>{"SHOP_UPDATED"==t.data.code&&this.$alert({type:"success",title:t.data.message}),"SHOP_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=bt(this.shop.name,"Shop name"),this.formStatus.name.valid}},mounted(){cM.getShop(this.$route.params.id).then((t=>{if("SUCCESS"==t.data.code){const{name:e}=t.data.data.shops;this.shop.name=e,this.isLoaded=!0}}),this.$handleApiError)}};const uH=(0,d.Z)(cH,[["render",wH]]);var pH=uH,mH={name:"shops",path:"/shops",component:ia,meta:{module:"shop"},children:[{name:"shop/list",path:"",component:FM,meta:{module:"shop",subModule:"shop/list",title:"Shop List",gate:"show_all_sales"}},{name:"shop/add",path:"add",component:JM,meta:{module:"shop",subModule:"shop/add",title:"Shop Add",gate:"create_shop"}},{name:"shop/update",path:"update/:id",component:pH,meta:{module:"shop",subModule:"shop/update",title:"Update Shop",gate:"update_shop"}}]};const hH={class:"mb-5 tw-flex tw-justify-between tw-items-center"},gH=(0,i._)("div",null,[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Warehouse List"),(0,i._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your warehouses")],-1),fH={key:0},vH=(0,i._)("span",{class:"text-white"}," Add Warehouse ",-1),yH={key:0},_H={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},xH={class:"mb-5 tw-flex"},bH={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},kH={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},CH={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},DH=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),SH={class:"tw-relative"},zH={class:""};function UH(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation"),d=(0,i.up)("WarehousesTable"),w=(0,i.up)("AddWarehouse");return(0,i.wg)(),(0,i.iD)("div",{key:o.warehouses.length},[(0,i._)("div",hH,[gH,t.$can("create_warehouse")?((0,i.wg)(),(0,i.iD)("div",fH,[(0,i.Wm)(G.T,{color:"primary-color",onClick:e[0]||(e[0]=t=>l.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),vH])),_:1})])):(0,i.kq)("",!0)]),l.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",yH,[(0,i.Wm)(n)])),l.isLoaded?((0,i.wg)(),(0,i.iD)("div",_H,[(0,i._)("div",xH,[(0,i.Wm)(G.T,{onClick:e[1]||(e[1]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,i._)("div",bH,[(0,i.Wm)(Zt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,l.search]])])]),(0,i._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,i._)("div",kH,[(0,i._)("div",CH,[DH,(0,i._)("div",SH,[(0,i.wy)((0,i._)("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=t=>l.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[a.nr,l.date]])])])])],2),(0,i._)("div",zH,[(0,i.Wm)(d,{columns:l.columns,warehouses:o.filteredWarehouses},null,8,["columns","warehouses"])]),(0,i.Wm)(w,{onCancel:e[4]||(e[4]=t=>l.showPopup=!1),visible:l.showPopup},null,8,["visible"])])):(0,i.kq)("",!0)])}const LH={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},PH={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},AH={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},WH=(0,i._)("th",{scope:"col",class:"tw-p-4"},[(0,i._)("div",{class:"tw-flex tw-items-center"},[(0,i._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,i._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),$H={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},EH=(0,i._)("td",{class:"tw-w-4 tw-p-4"},[(0,i._)("div",{class:"tw-flex tw-items-center"},[(0,i._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,i._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),OH={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},TH={class:"tw-px-6 tw-py-4"},VH={class:"tw-px-6 tw-py-4"},qH={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},RH={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},FH={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},IH=(0,i._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),jH=["value"],NH={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},MH={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},HH={class:"tw-text-white"};function YH(t,e,s,r,l,o){const n=(0,i.up)("WarehouseActions");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",LH,[(0,i._)("table",PH,[(0,i._)("thead",AH,[(0,i._)("tr",null,[WH,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.columns,(t=>((0,i.wg)(),(0,i.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,i._)("div",$H,(0,Q.zw)(t.name),1)])))),128))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.warehouses,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[EH,(0,i._)("th",OH,(0,Q.zw)(t.id),1),(0,i._)("td",TH,(0,Q.zw)(t.name),1),(0,i._)("td",VH,(0,Q.zw)(t.created_at.split("T")[0]),1),(0,i._)("td",qH,[(0,i.Wm)(n,{warehouse:t},null,8,["warehouse"])])])))),128))])])]),(0,i._)("div",RH,[(0,i._)("div",FH,[IH,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allowedLimit,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,jH)))),128))],512),[[a.bM,l.paginationLimit]])]),(0,i._)("div",NH,[(0,i._)("div",MH,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?s.warehouses.length:o.nextRange)+" of "+(0,Q.zw)(s.warehouses.length)+" items ",1),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.pageCount,(t=>((0,i.wg)(),(0,i.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,i.w5)((()=>[(0,i._)("span",HH,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const KH={class:"tw-flex tw-items-center tw-gap-1"};function ZH(t,e,s,a,r,l){const o=(0,i.up)("UpdateWarehouse"),n=(0,i.up)("popup");return(0,i.wg)(),(0,i.iD)("div",KH,[t.$can("update_warehouse")?((0,i.wg)(),(0,i.j4)(G.T,{key:0,onClick:e[0]||(e[0]=t=>r.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,i.kq)("",!0),t.$can("delete_warehouse")?((0,i.wg)(),(0,i.j4)(G.T,{key:1,onClick:e[1]||(e[1]=t=>r.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,i.kq)("",!0),((0,i.wg)(),(0,i.j4)(o,{visible:r.showUpdatePopup,onCancel:e[2]||(e[2]=t=>r.showUpdatePopup=!1),key:s.warehouse.id,warehouse:s.warehouse},null,8,["visible","warehouse"])),(0,i.Wm)(n,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this warehouse?</p> You won't be able to revert this!",loading:r.isLoading,visible:r.showPopup,onResolved:l.handleResolved},null,8,["loading","visible","onResolved"])])}const BH={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[500px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},QH=(0,i._)("h1",{class:"tw-text-lg"},"Update Warehouse",-1),GH={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},JH={class:"tw-w-full tw-col-span-12"},XH=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Warehouse Name",-1),tY={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},eY={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},sY=(0,i._)("span",{class:"text-white"}," Cancel ",-1),aY=(0,i._)("span",{class:"text-white"}," Update ",-1);function iY(t,e,s,a,r,l){const o=(0,i.up)("popup-full");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(o,{onCancel:e[3]||(e[3]=e=>t.$emit("cancel")),visible:s.visible},{default:(0,i.w5)((()=>[(0,i._)("div",BH,[QH,(0,i._)("div",GH,[(0,i._)("div",JH,[XH,(0,i.Wm)(tt.hw,{error:!r.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("name")),"hide-details":!0,modelValue:r.Warehouse.name,"onUpdate:modelValue":e[1]||(e[1]=t=>r.Warehouse.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",tY,(0,Q.zw)(r.formStatus.name.message),1)])]),(0,i._)("div",eY,[(0,i.Wm)(G.T,{onClick:e[2]||(e[2]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[sY])),_:1}),(0,i.Wm)(G.T,{loading:r.isLoading,onClick:l.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[aY])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var rY={components:{},props:["warehouse","visible"],data(){return{isLoading:!1,isLoaded:!1,Warehouse:{name:""},formStatus:{name:{valid:!0,message:""}}}},computed:{},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,uh.update(this.warehouse.id,this.Warehouse).then((t=>{"WAREHOUSE_UPDATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.$store.dispatch("warehouse/update",this.Warehouse),this.$emit("cancel")),"WAREHOUSE_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=bt(this.Warehouse.name,"Warehouse name"),this.formStatus.name.valid}},mounted(){this.Warehouse={...this.warehouse}}};const lY=(0,d.Z)(rY,[["render",iY]]);var oY=lY,nY={components:{UpdateWarehouse:oY},props:["rowIndex","warehouse"],name:"warehouseActions",data(){return{showPopup:!1,isLoading:!1,showUpdatePopup:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,uh["delete"](this.warehouse.id).then((t=>{"WAREHOUSE_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Warehouse Deleted Successfully"}),this.$store.dispatch("warehouse/delete",this.warehouse.id))})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const dY=(0,d.Z)(nY,[["render",ZH]]);var wY=dY,cY={props:["columns","warehouses"],components:{WarehouseActions:wY},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.warehouses.length/this.paginationLimit)},items(){return this.warehouses.slice(this.prevRange,this.nextRange)}},methods:{}};const uY=(0,d.Z)(cY,[["render",YH]]);var pY=uY;const mY={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[500px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},hY=(0,i._)("h1",{class:"tw-text-lg"},"Create Warehouse",-1),gY={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},fY={class:"tw-w-full tw-col-span-12"},vY=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Warehouse Name",-1),yY={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},_Y={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},xY=(0,i._)("span",{class:"text-white"}," Cancel ",-1),bY=(0,i._)("span",{class:"text-white"}," Create ",-1);function kY(t,e,s,a,r,l){const o=(0,i.up)("popup-full");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(o,{onCancel:e[3]||(e[3]=e=>t.$emit("cancel")),visible:s.visible},{default:(0,i.w5)((()=>[(0,i._)("div",mY,[hY,(0,i._)("div",gY,[(0,i._)("div",fY,[vY,(0,i.Wm)(tt.hw,{error:!r.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("name")),"hide-details":!0,modelValue:r.warehouse.name,"onUpdate:modelValue":e[1]||(e[1]=t=>r.warehouse.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",yY,(0,Q.zw)(r.formStatus.name.message),1)])]),(0,i._)("div",_Y,[(0,i.Wm)(G.T,{onClick:e[2]||(e[2]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[xY])),_:1}),(0,i.Wm)(G.T,{loading:r.isLoading,onClick:l.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[bY])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var CY={props:["visible"],components:{},data(){return{isLoading:!1,warehouse:{name:""},formStatus:{name:{valid:!0,message:""}}}},methods:{create(){if(!this.validate())return!1;this.isLoading=!0;let t=this.warehouse;uh.create(t).then((t=>{if("WAREHOUSE_CREATED"==t.data.code){this.$alert({type:"success",title:t.data.message});const e=t.data.data.warehouse;this.$store.dispatch("warehouse/addWarehouse",e),this.$emit("cancel"),this.warehouse={name:""}}"VALIDATION_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.errors.ref})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=bt(this.warehouse.name,"Warehouse name"),this.formStatus.name.valid}}};const DY=(0,d.Z)(CY,[["render",kY]]);var SY=DY,zY={components:{WarehousesTable:pY,AddWarehouse:SY},data(){return{localUrl:R,isLoaded:!1,showFilters:!1,date:null,search:"",showPopup:!1,columns:[{prop:"id",name:"#"},{prop:"name",name:"Name"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{warehouses(){return this.$store.getters["warehouse/warehouses"]},filteredWarehouses(){const t=this.date;return this.warehouses.filter((e=>(!t||e?.created_at.split("T")[0]===t)&&!!e.name.toLowerCase().includes(this.search.toLowerCase())))}},mounted(){uh.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("warehouse/setWarehouses",t.data.data.warehouses)}),(t=>{this.$handleApiError(t)})).finally((()=>this.isLoaded=!0))}};const UY=(0,d.Z)(zY,[["render",UH]]);var LY=UY,PY={name:"warehouses",path:"/warehouses",component:ia,meta:{module:"warehouse"},children:[{name:"warehouse/list",path:"",component:LY,meta:{module:"warehouse",subModule:"warehouse/list",title:"Warehouse List",gate:"show_all_warehouses"}}]};const AY=(0,i._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,i._)("div",null,[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Factorisation List"),(0,i._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your factorisations")])],-1),WY={key:0},$Y={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},EY={class:"mb-5 tw-flex"},OY={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},TY={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},VY={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},qY=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),RY={class:"tw-relative"},FY={class:""};function IY(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation"),d=(0,i.up)("FactorisationsTable");return(0,i.wg)(),(0,i.iD)("div",{key:o.factorisations.length},[AY,l.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",WY,[(0,i.Wm)(n)])),l.isLoaded?((0,i.wg)(),(0,i.iD)("div",$Y,[(0,i._)("div",EY,[(0,i.Wm)(G.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,i._)("div",OY,[(0,i.Wm)(Zt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,l.search]])])]),(0,i._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,i._)("div",TY,[(0,i._)("div",VY,[qY,(0,i._)("div",RY,[(0,i.wy)((0,i._)("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=t=>l.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[a.nr,l.date]])])])])],2),(0,i._)("div",FY,[(0,i.Wm)(d,{columns:l.columns,factorisations:o.filteredFactorisations},null,8,["columns","factorisations"])])])):(0,i.kq)("",!0)])}class jY{async update(t,e){return await Y.getCookie(),M.post("api/factorisations/update/"+t,{factorisation_id:e.factorisation_id,delivery_id:e.delivery_id,price:e.price,commands_number:e.commands_number})}async updateComment(t,e){return await Y.getCookie(),M.post("api/factorisations/update/comment/"+t,{comment:e.comment})}async updatePaid(t,e){return await Y.getCookie(),M.post("api/factorisations/update/payment/"+t,{paid:e})}async updateClose(t,e){return await Y.getCookie(),M.post("api/factorisations/update/closing/"+t,{close:e})}async all(){return await Y.getCookie(),M.get("api/factorisations")}async getFactorisation(t){return await Y.getCookie(),M.get("api/factorisations/"+t)}async delete(t){return await Y.getCookie(),M["delete"]("api/factorisations/delete/"+t)}}var NY=new jY;const MY={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},HY={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},YY={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},KY=(0,i._)("th",{scope:"col",class:"tw-p-4"},[(0,i._)("div",{class:"tw-flex tw-items-center"},[(0,i._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,i._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),ZY={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},BY={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},QY={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},GY=(0,i._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"}," Show per page: ",-1),JY=["value"],XY={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},tK={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},eK={class:"tw-text-white"};function sK(t,e,s,r,l,o){const n=(0,i.up)("FactorisationRow");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",MY,[(0,i._)("table",HY,[(0,i._)("thead",YY,[(0,i._)("tr",null,[KY,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.columns,(t=>((0,i.wg)(),(0,i.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,i._)("div",ZY,(0,Q.zw)(t.name),1)])))),128))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.factorisations,(t=>((0,i.wg)(),(0,i.j4)(n,{factorisation:t,key:t.id},null,8,["factorisation"])))),128))])])]),(0,i._)("div",BY,[(0,i._)("div",QY,[GY,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allowedLimit,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,JY)))),128))],512),[[a.bM,l.paginationLimit]])]),(0,i._)("div",XY,[(0,i._)("div",tK,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?s.factorisations.length:o.nextRange)+" of "+(0,Q.zw)(s.factorisations.length)+" items ",1),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.pageCount,(t=>((0,i.wg)(),(0,i.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,i.w5)((()=>[(0,i._)("span",eK,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const aK={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},iK=(0,i._)("td",{class:"tw-w-4 tw-p-4"},[(0,i._)("div",{class:"tw-flex tw-items-center"},[(0,i._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,i._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),rK={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},lK={class:"tw-px-6 tw-py-4"},oK={class:"tw-px-6 tw-py-4"},nK={class:"tw-px-6 tw-py-4"},dK={class:"tw-px-6 tw-py-4"},wK={class:"tw-px-6 tw-py-4"},cK={class:"tw-px-6 tw-py-4"},uK={class:"tw-px-6 tw-py-4"},pK={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},mK={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},hK=["disabled"],gK=(0,i._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),fK={class:"tw-px-6 tw-py-4"},vK={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},yK={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},_K=["disabled"],xK=(0,i._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),bK={class:"tw-px-6 tw-py-4"},kK={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"};function CK(t,e,s,r,l,o){const n=(0,i.up)("FactorisationActions");return(0,i.wg)(),(0,i.iD)("tr",aK,[iK,(0,i._)("th",rK,(0,Q.zw)(s.factorisation.id),1),(0,i._)("td",lK,[(0,i._)("button",{class:"tw-underline",onClick:e[0]||(e[0]=t=>o.download(s.factorisation.id))},(0,Q.zw)(s.factorisation.factorisation_id),1)]),(0,i._)("td",oK,(0,Q.zw)(o.deliveryName),1),(0,i._)("td",nK,(0,Q.zw)(s.factorisation.commands_number),1),(0,i._)("td",dK,(0,Q.zw)(s.factorisation.price),1),(0,i._)("td",wK,(0,Q.zw)(s.factorisation.close_at?.split("T")[0]),1),(0,i._)("td",cK,(0,Q.zw)(s.factorisation.paid_at?.split("T")[0]),1),(0,i._)("td",uK,[(0,i._)("div",pK,[(0,i._)("label",mK,[(0,i.wy)((0,i._)("input",{disabled:l.isLoadingClose,"onUpdate:modelValue":e[1]||(e[1]=t=>o.close=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,8,hK),[[a.e8,o.close]]),gK]),l.isLoadingClose?((0,i.wg)(),(0,i.j4)(X.t,{key:0,color:"green",size:"small",class:"tw-animate-spin"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-loading")])),_:1})):(0,i.kq)("",!0)])]),(0,i._)("td",fK,[(0,i._)("div",vK,[(0,i._)("label",yK,[(0,i.wy)((0,i._)("input",{disabled:l.isLoadingPaid,"onUpdate:modelValue":e[2]||(e[2]=t=>o.paid=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,8,_K),[[a.e8,o.paid]]),xK]),l.isLoadingPaid?((0,i.wg)(),(0,i.j4)(X.t,{key:0,color:"green",size:"small",class:"tw-animate-spin"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-loading")])),_:1})):(0,i.kq)("",!0)])]),(0,i._)("td",bK,(0,Q.zw)(s.factorisation.created_at.split("T")[0]),1),(0,i._)("td",kK,[(0,i.Wm)(n,{factorisation:s.factorisation},null,8,["factorisation"])])])}const DK={class:"tw-flex tw-items-center tw-gap-1"};function SK(t,e,s,a,r,l){const o=(0,i.up)("UpdateFactorisation"),n=(0,i.up)("UpdateComment"),d=(0,i.up)("popup");return(0,i.wg)(),(0,i.iD)("div",DK,[t.$can("update_factorisation")?((0,i.wg)(),(0,i.j4)(G.T,{key:0,onClick:e[0]||(e[0]=t=>r.showUpdateCommentPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-comment-text")])),_:1})])),_:1})):(0,i.kq)("",!0),t.$can("update_factorisation")?((0,i.wg)(),(0,i.j4)(G.T,{key:1,onClick:e[1]||(e[1]=t=>r.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,i.kq)("",!0),t.$can("delete_factorisation")?((0,i.wg)(),(0,i.j4)(G.T,{key:2,onClick:e[2]||(e[2]=t=>r.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,i.kq)("",!0),((0,i.wg)(),(0,i.j4)(o,{visible:r.showUpdatePopup,onCancel:e[3]||(e[3]=t=>r.showUpdatePopup=!1),key:s.factorisation.id,factorisation:s.factorisation},null,8,["visible","factorisation"])),((0,i.wg)(),(0,i.j4)(n,{visible:r.showUpdateCommentPopup,onCancel:e[4]||(e[4]=t=>r.showUpdateCommentPopup=!1),key:s.factorisation.id,factorisation:s.factorisation},null,8,["visible","factorisation"])),(0,i.Wm)(d,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this factorisation?</p> You won't be able to revert this!",loading:r.isLoading,visible:r.showPopup,onResolved:l.handleResolved},null,8,["loading","visible","onResolved"])])}const zK={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},UK=(0,i._)("h1",{class:"tw-text-lg"},"Update Factorisation",-1),LK={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},PK={class:"tw-w-full tw-col-span-6"},AK=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Factorisation Code ",-1),WK={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},$K={class:"tw-w-full tw-col-span-6"},EK=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery",-1),OK={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},TK={class:"tw-w-full tw-col-span-6"},VK=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Total Price",-1),qK={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},RK={class:"tw-w-full tw-col-span-6"},FK=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Nb Commands",-1),IK={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},jK={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},NK=(0,i._)("span",{class:"text-white"}," Cancel ",-1),MK=(0,i._)("span",{class:"text-white"}," Update ",-1);function HK(t,e,s,a,r,l){const o=(0,i.up)("popup-full");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(o,{onCancel:e[9]||(e[9]=e=>t.$emit("cancel")),visible:s.visible},{default:(0,i.w5)((()=>[(0,i._)("div",zK,[UK,(0,i._)("div",LK,[(0,i._)("div",PK,[AK,(0,i.Wm)(tt.hw,{error:!r.formStatus.factorisation_id.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("factorisation_id")),"hide-details":!0,modelValue:r.Factorisation.factorisation_id,"onUpdate:modelValue":e[1]||(e[1]=t=>r.Factorisation.factorisation_id=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",WK,(0,Q.zw)(r.formStatus.factorisation_id.message),1)]),(0,i._)("div",$K,[EK,(0,i.Wm)(tt.hw,{error:!r.formStatus.delivery_id.valid,onKeyup:e[2]||(e[2]=t=>l.resetError("delivery_id")),"hide-details":!0,disabled:!0,modelValue:l.deliveryName,"onUpdate:modelValue":e[3]||(e[3]=t=>l.deliveryName=t),clearable:"",disable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",OK,(0,Q.zw)(r.formStatus.delivery_id.message),1)]),(0,i._)("div",TK,[VK,(0,i.Wm)(tt.hw,{error:!r.formStatus.price.valid,onKeyup:e[4]||(e[4]=t=>l.resetError("price")),"hide-details":!0,modelValue:r.Factorisation.price,"onUpdate:modelValue":e[5]||(e[5]=t=>r.Factorisation.price=t),disabled:!0,clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",qK,(0,Q.zw)(r.formStatus.price.message),1)]),(0,i._)("div",RK,[FK,(0,i.Wm)(tt.hw,{error:!r.formStatus.commands_number.valid,disabled:!0,onKeyup:e[6]||(e[6]=t=>l.resetError("commands_number")),"hide-details":!0,modelValue:r.Factorisation.commands_number,"onUpdate:modelValue":e[7]||(e[7]=t=>r.Factorisation.commands_number=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",IK,(0,Q.zw)(r.formStatus.commands_number.message),1)])]),(0,i._)("div",jK,[(0,i.Wm)(G.T,{onClick:e[8]||(e[8]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[NK])),_:1}),(0,i.Wm)(G.T,{loading:r.isLoading,onClick:l.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[MK])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var YK={components:{},props:["factorisation","visible"],data(){return{isLoading:!1,isLoaded:!1,Factorisation:{factorisation_id:"",delivery_id:0,price:0,commands_number:0,note:""},formStatus:{factorisation_id:{valid:!0,message:""},delivery_id:{valid:!0,message:""},price:{valid:!0,message:""},commands_number:{valid:!0,message:""}}}},computed:{deliveryName:{get(){return this.Factorisation.delivery.firstname+" "+this.Factorisation.delivery.lastname},set(t){console.log(t)}}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,NY.update(this.factorisation.id,this.Factorisation).then((t=>{"FACTORISATION_UPDATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.$store.dispatch("factorisation/update",this.Factorisation),this.$emit("cancel")),"FACTORISATION_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.factorisation_id=bt(this.Factorisation.factorisation_id,"Factorisation Code"),this.formStatus.price=kt(this.Factorisation.price,"Factorisation Price"),this.formStatus.commands_number=kt(this.Factorisation.commands_number,"Factorisation Nb Commands"),this.formStatus.factorisation_id.valid&&this.formStatus.price.valid&&this.formStatus.commands_number.valid}},mounted(){this.Factorisation={...this.factorisation}}};const KK=(0,d.Z)(YK,[["render",HK]]);var ZK=KK;const BK={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},QK=(0,i._)("h1",{class:"tw-text-lg"},"Update Factorisation Comment",-1),GK={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},JK={class:"tw-w-full tw-col-span-6"},XK=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Total Price",-1),tZ={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},eZ={class:"tw-w-full tw-col-span-6"},sZ=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Nb Commands",-1),aZ={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},iZ={class:"tw-w-full tw-col-span-12"},rZ=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Comment",-1),lZ=["error"],oZ={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},nZ={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},dZ=(0,i._)("span",{class:"text-white"}," Cancel ",-1),wZ=(0,i._)("span",{class:"text-white"}," Update ",-1);function cZ(t,e,s,r,l,o){const n=(0,i.up)("popup-full");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n,{onCancel:e[7]||(e[7]=e=>t.$emit("cancel")),visible:s.visible},{default:(0,i.w5)((()=>[(0,i._)("div",BK,[QK,(0,i._)("div",GK,[(0,i._)("div",JK,[XK,(0,i.Wm)(tt.hw,{error:!l.formStatus.price.valid,onKeyup:e[0]||(e[0]=t=>o.resetError("price")),"hide-details":!0,modelValue:l.Factorisation.price,"onUpdate:modelValue":e[1]||(e[1]=t=>l.Factorisation.price=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",disabled:"",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",tZ,(0,Q.zw)(l.formStatus.price.message),1)]),(0,i._)("div",eZ,[sZ,(0,i.Wm)(tt.hw,{error:!l.formStatus.commands_number.valid,onKeyup:e[2]||(e[2]=t=>o.resetError("commands_number")),"hide-details":!0,modelValue:l.Factorisation.commands_number,"onUpdate:modelValue":e[3]||(e[3]=t=>l.Factorisation.commands_number=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",disabled:"",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,i._)("div",aZ,(0,Q.zw)(l.formStatus.commands_number.message),1)]),(0,i._)("div",iZ,[rZ,(0,i.wy)((0,i._)("textarea",{error:!l.formStatus.commands_number.valid,onKeyup:e[4]||(e[4]=t=>o.resetError("commands_number")),"hide-details":!0,clearable:"","clear-icon":"mdi-close","onUpdate:modelValue":e[5]||(e[5]=t=>l.Factorisation.comment=t),variant:"outlined",density:"compact",cols:"30",rows:"5",color:"primary-color",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-400 focus:tw-border-orange-500"},"\r\n            ",40,lZ),[[a.nr,l.Factorisation.comment]]),(0,i._)("div",oZ,(0,Q.zw)(l.formStatus.commands_number.message),1)])]),(0,i._)("div",nZ,[(0,i.Wm)(G.T,{onClick:e[6]||(e[6]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[dZ])),_:1}),(0,i.Wm)(G.T,{loading:l.isLoading,onClick:o.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[wZ])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var uZ={components:{},props:["factorisation","visible"],data(){return{isLoading:!1,isLoaded:!1,Factorisation:{price:0,commands_number:0,comment:""},formStatus:{price:{valid:!0,message:""},commands_number:{valid:!0,message:""},comment:{valid:!0,message:""}}}},computed:{},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,NY.updateComment(this.factorisation.id,this.Factorisation).then((t=>{"FACTORISATION_UPDATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.$store.dispatch("factorisation/update",this.Factorisation),this.$emit("cancel")),"FACTORISATION_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.comment=bt(this.Factorisation.comment,"Factorisation Comment"),this.formStatus.comment.valid}},mounted(){this.Factorisation={...this.factorisation}}};const pZ=(0,d.Z)(uZ,[["render",cZ]]);var mZ=pZ,hZ={components:{UpdateFactorisation:ZK,UpdateComment:mZ},props:["rowIndex","factorisation"],name:"factorisationActions",data(){return{showPopup:!1,isLoading:!1,showUpdatePopup:!1,showUpdateCommentPopup:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,NY["delete"](this.factorisation.id).then((t=>{"FACTORISATION_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Factorisation Deleted Successfully"}),this.$store.dispatch("factorisation/delete",this.factorisation.id)),"DELETE_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const gZ=(0,d.Z)(hZ,[["render",SK]]);var fZ=gZ,vZ={props:["factorisation"],components:{FactorisationActions:fZ},data(){return{isLoadingPaid:!1,isLoadingClose:!1}},computed:{deliveryName:{get(){return this.factorisation.delivery.firstname+" "+this.factorisation.delivery.lastname},set(t){console.log(t)}},paid:{get(){return 1==this.factorisation.paid},set(t){this.updatePaid(t)}},close:{get(){return 1==this.factorisation.close},set(t){this.updateClose(t)}}},methods:{updatePaid(t){this.isLoadingPaid=!0,NY.updatePaid(this.factorisation.id,t).then((t=>{"FACTORISATION_UPDATED"==t.data.code&&this.$store.dispatch("factorisation/update",t.data.data.factorisation)}),this.$handleApiError).finally((()=>{this.isLoadingPaid=!1}))},updateClose(t){this.isLoadingClose=!0,NY.updateClose(this.factorisation.id,t).then((t=>{"FACTORISATION_UPDATED"==t.data.code&&this.$store.dispatch("factorisation/update",t.data.data.factorisation)}),this.$handleApiError).finally((()=>{this.isLoadingClose=!1}))},download(t){const e=F+"api/factorisations/generate-pdf/"+t,s=document.createElement("a");s.href=e,s.target="_blank",s.setAttribute("download","dd.pdf"),document.body.appendChild(s),s.click(),document.body.removeChild(s)}}};const yZ=(0,d.Z)(vZ,[["render",CK]]);var _Z=yZ,xZ={props:["columns","factorisations"],components:{FactorisationRow:_Z},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.factorisations.length/this.paginationLimit)},items(){return this.factorisations.slice(this.prevRange,this.nextRange)}},methods:{}};const bZ=(0,d.Z)(xZ,[["render",sK]]);var kZ=bZ,CZ={components:{FactorisationsTable:kZ},data(){return{localUrl:R,isLoaded:!1,showFilters:!1,date:null,search:"",showPopup:!1,columns:[{prop:"id",name:"#"},{prop:"factorisation_id",name:"Code"},{prop:"delivery_id",name:"Delivery"},{prop:"commands_number",name:"Nb Commands"},{prop:"price",name:"Total Price"},{prop:"close_at",name:"Closed at"},{prop:"paid_at",name:"Paid at"},{prop:"close",name:"Close"},{prop:"paid",name:"Paid"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{factorisations(){return this.$store.getters["factorisation/factorisations"]},filteredFactorisations(){const t=this.date;return this.factorisations.filter((e=>!t||e?.created_at.split("T")[0]===t))}},mounted(){NY.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("factorisation/setFactorisations",t.data.data.factorisations)}),(t=>{this.$handleApiError(t)})).finally((()=>this.isLoaded=!0))}};const DZ=(0,d.Z)(CZ,[["render",IY]]);var SZ=DZ,zZ={name:"factorisations",path:"/factorisations",component:ia,meta:{module:"factorisation"},children:[{name:"factorisation/list",path:"",component:SZ,meta:{module:"factorisation",subModule:"factorisation/list",title:"Factorisations List",gate:"show_all_factorisations"}}]};const UZ={class:"mb-5 tw-flex tw-justify-between tw-items-center"},LZ=(0,i._)("div",null,[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Google Sheets"),(0,i._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your google sheets")],-1),PZ=(0,i._)("span",{class:"text-white"}," Add Sheet ",-1),AZ={key:0},WZ={key:1,class:"py-5 px-5 tw-mb-5 tw-border bg-white tw-w-full tw-rounded-md"},$Z={class:"tw-flex tw-items-center tw-gap-2"},EZ=(0,i._)("h1",null,"Application's email",-1),OZ={class:"tw-bg-gray-100 tw-border tw-border-gray-300 tw-rounded tw-py-2 tw-px-2 tw-text-sm tw-mt-2 tw-text-gray-700"},TZ=(0,i._)("p",{class:"tw-mt-1 tw-text-xs tw-text-gray-400"}," Use this email to give access to Google Sheets ",-1),VZ={key:2,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},qZ={class:"mb-5 tw-flex"},RZ={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},FZ={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},IZ={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},jZ=(0,i._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),NZ={class:"tw-relative"},MZ={class:""};function HZ(t,e,s,r,l,o){const n=(0,i.up)("LoadingAnimation"),d=(0,i.up)("SheetsTable"),w=(0,i.up)("AddSheet");return(0,i.wg)(),(0,i.iD)("div",{key:o.sheets.length},[(0,i._)("div",UZ,[LZ,(0,i._)("div",null,[t.$can("create_sheet")?((0,i.wg)(),(0,i.j4)(G.T,{key:0,color:"primary-color",onClick:e[0]||(e[0]=t=>l.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),PZ])),_:1})):(0,i.kq)("",!0)])]),l.isLoaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",AZ,[(0,i.Wm)(n)])),l.isLoaded?((0,i.wg)(),(0,i.iD)("div",WZ,[(0,i._)("div",$Z,[EZ,(0,i._)("button",{onClick:e[1]||(e[1]=(...t)=>o.copy&&o.copy(...t)),class:"tw-bg-gray-100 tw-border tw-border-gray-300 tw-rounded tw-w-[30px] tw-h-[30px] tw-text-gray-500 hover:tw-text-gray-700 tw-duration-300 tw-border-solid hover:tw-border-gray-400"},[(0,i.Wm)(X.t,{class:"tw-text-xs"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-content-copy")])),_:1})])]),(0,i._)("div",OZ,(0,Q.zw)(l.email),1),TZ])):(0,i.kq)("",!0),l.isLoaded?((0,i.wg)(),(0,i.iD)("div",VZ,[(0,i._)("div",qZ,[(0,i.Wm)(G.T,{onClick:e[2]||(e[2]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,i._)("div",RZ,[(0,i.Wm)(Zt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[a.nr,l.search]])])]),(0,i._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,i._)("div",FZ,[(0,i._)("div",IZ,[jZ,(0,i._)("div",NZ,[(0,i.wy)((0,i._)("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=t=>l.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[a.nr,l.date]])])])])],2),(0,i._)("div",MZ,[(0,i.Wm)(d,{sheets:o.sheets},null,8,["sheets"])]),(0,i.Wm)(w,{onCancel:e[5]||(e[5]=t=>l.showPopup=!1),visible:l.showPopup},null,8,["visible"])])):(0,i.kq)("",!0)])}const YZ={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},KZ={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},ZZ={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},BZ=(0,i._)("th",{scope:"col",class:"tw-p-4"},[(0,i._)("div",{class:"tw-flex tw-items-center"},[(0,i._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,i._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),QZ={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},GZ={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},JZ={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},XZ=(0,i._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"}," Show per page: ",-1),tB=["value"],eB={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},sB={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},aB={class:"tw-text-white"};function iB(t,e,s,r,l,o){const n=(0,i.up)("SheetRow");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",YZ,[(0,i._)("table",KZ,[(0,i._)("thead",ZZ,[(0,i._)("tr",null,[BZ,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.columns,(t=>((0,i.wg)(),(0,i.iD)("th",{key:t,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,i._)("div",QZ,(0,Q.zw)(t),1)])))),128))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.sheets,(t=>((0,i.wg)(),(0,i.j4)(n,{sheet:t,key:t.id},null,8,["sheet"])))),128))])])]),(0,i._)("div",GZ,[(0,i._)("div",JZ,[XZ,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allowedLimit,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,tB)))),128))],512),[[a.bM,l.paginationLimit]])]),(0,i._)("div",eB,[(0,i._)("div",sB,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?s.sheets.length:o.nextRange)+" of "+(0,Q.zw)(s.sheets.length)+" items ",1),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.pageCount,(t=>((0,i.wg)(),(0,i.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,i.w5)((()=>[(0,i._)("span",aB,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const rB={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},lB=(0,i._)("td",{class:"tw-w-4 tw-p-4"},[(0,i._)("div",{class:"tw-flex tw-items-center"},[(0,i._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,i._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),oB={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},nB={class:"tw-px-6 tw-py-4"},dB={class:"tw-px-6 tw-py-4"},wB={class:"tw-px-6 tw-py-4"},cB={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},uB={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},pB=["disabled"],mB=(0,i._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),hB={class:"tw-px-6 tw-py-4"},gB={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"};function fB(t,e,s,r,l,o){const n=(0,i.up)("SheetActions");return(0,i.wg)(),(0,i.iD)("tr",rB,[lB,(0,i._)("th",oB,(0,Q.zw)(s.sheet.id),1),(0,i._)("td",nB,[(0,i._)("div",null,[(0,i._)("span",{class:(0,Q.C_)(["tw-inline-block tw-w-[8px] tw-h-[8px] tw-rounded-full tw-mr-1",[1==s.sheet.active&&1==s.sheet.auto_fetch?"tw-bg-emerald-500":"tw-bg-red-500"]])},null,2),(0,i.Uk)(" "+(0,Q.zw)(s.sheet.name),1)])]),(0,i._)("td",dB,[(0,i._)("div",null,(0,Q.zw)(s.sheet.sheet_name),1)]),(0,i._)("td",wB,[(0,i._)("div",cB,[(0,i._)("label",uB,[(0,i.wy)((0,i._)("input",{disabled:l.isLoadingAuto,"onUpdate:modelValue":e[0]||(e[0]=t=>o.autoFetch=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,8,pB),[[a.e8,o.autoFetch]]),mB]),l.isLoadingAuto?((0,i.wg)(),(0,i.j4)(X.t,{key:0,color:"green",size:"small",class:"tw-animate-spin"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-loading")])),_:1})):(0,i.kq)("",!0)])]),(0,i._)("td",hB,(0,Q.zw)(s.sheet.created_at.split("T")[0]),1),(0,i._)("td",gB,[(0,i.Wm)(n,{sheet:s.sheet},null,8,["sheet"])])])}const vB={key:0};function yB(t,e,s,a,r,l){const o=(0,i.up)("UpdateSheet"),n=(0,i.up)("SheetOrders"),d=(0,i.up)("popup");return s.sheet?((0,i.wg)(),(0,i.iD)("div",vB,[t.$can("update_sheet")?((0,i.wg)(),(0,i.j4)(G.T,{key:0,onClick:l.sync,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{class:(0,Q.C_)([r.isLoadingSheet&&"tw-animate-spin"]),color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-autorenew")])),_:1},8,["class"])])),_:1},8,["onClick"])):(0,i.kq)("",!0),t.$can("update_sheet")?((0,i.wg)(),(0,i.j4)(G.T,{key:1,onClick:e[0]||(e[0]=t=>r.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,i.kq)("",!0),t.$can("delete_sheet")?((0,i.wg)(),(0,i.j4)(G.T,{key:2,onClick:e[1]||(e[1]=t=>r.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(X.t,{color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(o,{visible:r.showUpdatePopup,"onUpdate:visible":e[2]||(e[2]=t=>r.showUpdatePopup=t),sheet:s.sheet,onCancel:e[3]||(e[3]=t=>r.showUpdatePopup=!1)},null,8,["visible","sheet"]),(0,i.Wm)(n,{visible:r.showSheetPopup,"onUpdate:visible":e[4]||(e[4]=t=>r.showSheetPopup=t),sheet:s.sheet,orders:r.orders,onCancel:e[5]||(e[5]=t=>r.showSheetPopup=!1)},null,8,["visible","sheet","orders"]),(0,i.Wm)(d,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this sale?</p> You won't be able to revert this!",loading:r.isLoading,visible:r.showPopup,onResolved:l.handleDelete},null,8,["loading","visible","onResolved"])])):(0,i.kq)("",!0)}const _B={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},xB=(0,i._)("h1",{class:"tw-text-lg"},"Create Sheet",-1),bB={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},kB={class:"md:tw-col-span-6 tw-col-span-12"},CB=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Name",-1),DB={class:"md:tw-col-span-6 tw-col-span-12"},SB=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Sheet Name",-1),zB={class:"md:tw-col-span-12 tw-col-span-12"},UB=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Sheet ID",-1),LB={class:"md:tw-col-span-6 tw-col-span-12"},PB=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Auto Fetch",-1),AB={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},WB=(0,i._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),$B={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},EB=(0,i._)("span",{class:"text-white"}," Cancel ",-1),OB=(0,i._)("span",{class:"text-white"}," Save ",-1);function TB(t,e,s,r,l,o){const n=(0,i.up)("popup-full");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n,{onCancel:e[5]||(e[5]=e=>t.$emit("cancel")),visible:s.visible},{default:(0,i.w5)((()=>[(0,i._)("div",_B,[xB,(0,i._)("div",bB,[(0,i._)("div",kB,[CB,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.newSheet.name=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.newSheet.name]])]),(0,i._)("div",DB,[SB,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.newSheet.sheet_name=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.newSheet.sheet_name]])]),(0,i._)("div",zB,[UB,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>l.newSheet.sheet_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.newSheet.sheet_id]])]),(0,i._)("div",LB,[PB,(0,i._)("label",AB,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.newSheet.auto_fetch=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,512),[[a.e8,l.newSheet.auto_fetch]]),WB])])]),(0,i._)("div",$B,[(0,i.Wm)(G.T,{onClick:e[4]||(e[4]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[EB])),_:1}),(0,i.Wm)(G.T,{loading:l.isLoading,onClick:o.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[OB])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var VB={props:["visible","sheet"],data(){return{isLoading:!1,newSheet:{name:"",sheet_id:"",sheet_name:"",auto_fetch:!0}}},watch:{visible(t){t&&(this.newSheet={...this.sheet,auto_fetch:1==this.sheet.auto_fetch})}},computed:{isFormValid(){return!!this.newSheet.name&&!!this.newSheet.sheet_id&&!!this.newSheet.sheet_name}},methods:{update(){if(!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;this.isLoading=!0;const t=this.newSheet;Xs.update(this.sheet.id,t).then((t=>{"SUCCESS"==t.data.code&&(this.$emit("cancel"),this.$alert({type:"success",title:"Sheet updated successfully"}),this.$store.dispatch("sheet/update",t.data.data.sheet))}),this.$handleApiError).finally((()=>this.isLoading=!1))}}};const qB=(0,d.Z)(VB,[["render",TB]]);var RB=qB;const FB={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},IB={key:0},jB={class:"tw-flex tw-items-center tw-gap-2 tw-mb-2"},NB=(0,i._)("h1",{class:"tw-text-sm tw-font-medium tw-text-neutral-700"},"Sheet's New Orders",-1),MB={class:"tw-bg-emerald-500 tw-text-white tw-px-1 tw-text-sm tw-rounded"},HB={class:"tw-relative tw-overflow-x-auto"},YB={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500 tw-border tw-rounded"},KB=(0,i._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50 tw-rounded-t tw-overflow-hidden"},[(0,i._)("tr",null,[(0,i._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Fullname"),(0,i._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Product"),(0,i._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"SKU"),(0,i._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Qty"),(0,i._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Price")])],-1),ZB={class:"tw-px-6 tw-py-2"},BB={class:"tw-px-6 tw-py-2"},QB={class:"tw-px-6 tw-py-2"},GB={class:"tw-px-6 tw-py-2"},JB={class:"tw-px-6 tw-py-2"},XB={class:"tw-flex tw-gap-2 mt-3 tw-justify-end"},tQ=(0,i._)("span",{class:"text-white"}," Cancel ",-1),eQ=(0,i._)("span",{class:"text-white"}," Save Orders",-1);function sQ(t,e,s,a,r,l){const o=(0,i.up)("popup-full");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(o,{onCancel:e[1]||(e[1]=e=>t.$emit("cancel")),visible:s.visible},{default:(0,i.w5)((()=>[(0,i._)("div",FB,[s.orders.length>0?((0,i.wg)(),(0,i.iD)("div",IB,[(0,i._)("div",jB,[NB,(0,i._)("div",MB,(0,Q.zw)(s.orders.length),1)]),(0,i._)("div",null,[(0,i._)("div",HB,[(0,i._)("table",YB,[KB,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.orders,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t,class:"tw-bg-white tw-border-b"},[(0,i._)("td",ZB,(0,Q.zw)(t["Full name"]),1),(0,i._)("td",BB,[(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t["Product name"].split("\n"),(t=>((0,i.wg)(),(0,i.iD)("p",{key:t},"- "+(0,Q.zw)(t),1)))),128))])]),(0,i._)("td",QB,[(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t["SKU"].split("\n"),(t=>((0,i.wg)(),(0,i.iD)("p",{key:t},(0,Q.zw)(t),1)))),128))])]),(0,i._)("td",GB,[(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t["Total quantity"].split("\n"),(t=>((0,i.wg)(),(0,i.iD)("p",{key:t},(0,Q.zw)(t),1)))),128))])]),(0,i._)("td",JB,(0,Q.zw)(t["Total charge"]),1)])))),128))])])])]),(0,i._)("div",XB,[(0,i.Wm)(G.T,{onClick:e[0]||(e[0]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[tQ])),_:1}),(0,i.Wm)(G.T,{loading:r.isLoading,onClick:l.save,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[eQ])),_:1},8,["loading","onClick"])])])):(0,i.kq)("",!0)])])),_:1},8,["visible"])])}var aQ={props:["visible","sheet","orders"],data(){return{isLoading:!1}},computed:{sales(){return this.$store.getters["sale/sales"]}},methods:{save(){this.isLoading=!0,Xs.saveOrders(this.sheet.id).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({title:t.data.data.orders.length+" Order has been added",type:"success"}),this.$store.dispatch("sale/setSales",[...t.data.data.orders,...this.sales]),this.$emit("cancel"))}),(t=>{this.$handleApiError(t),"PERMISSION_DENIED"==t?.response?.data?.code&&this.$alert({title:"Access denied to this sheet",type:"warning"})})).finally((()=>{this.isLoading=!1}))}}};const iQ=(0,d.Z)(aQ,[["render",sQ]]);var rQ=iQ,lQ={props:["sheet"],name:"sheetActions",components:{UpdateSheet:RB,SheetOrders:rQ},data(){return{showPopup:!1,showUpdatePopup:!1,showSheetPopup:!1,isLoading:!1,isLoadingSheet:!1,orders:[]}},computed:{},methods:{handleDelete(t){if(console.log(t),!t)return this.showPopup=!1,!1;this.delete()},delete(){this.isLoading=!0,Xs["delete"](this.sheet.id).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({title:"Deleted successfully",type:"success"}),this.$store.dispatch("sheet/delete",this.sheet.id),this.showPopup=!1)}),this.$handleApiError).finally((()=>{this.isLoading=!1}))},sync(){this.isLoadingSheet=!0,Xs.sync(this.sheet.id).then((t=>{"SUCCESS"==t.data.code&&(0==t.data.data.orders.length?this.$alert({title:"0 Orders found",type:"info"}):(this.orders=t.data.data.orders,this.showSheetPopup=!0),console.log(t.data.data.sheet),this.$store.dispatch("sheet/update",t.data.data.sheet)),console.log(t.data)}),(t=>{this.$handleApiError(t),console.log(t),this.$store.dispatch("sheet/update",t.response.data.data.sheet),"PERMISSION_DENIED"==t?.response?.data?.code&&this.$alert({title:"Access denied to this Google Sheet",type:"error"})})).finally((()=>{this.isLoadingSheet=!1}))}},mounted(){}};const oQ=(0,d.Z)(lQ,[["render",yB]]);var nQ=oQ,dQ={props:["sheet"],components:{SheetActions:nQ},data(){return{isLoadingAuto:!1}},computed:{autoFetch:{get(){return 1==this.sheet.auto_fetch},set(t){this.updateAutoFetch(t)}}},methods:{updateAutoFetch(t){this.isLoadingAuto=!0,Xs.updateAutoFetch(this.sheet.id,t).then((e=>{"SUCCESS"==e.data.code&&(this.$alert({title:t?"Activated":"Disabled",type:"success"}),this.$store.dispatch("sheet/update",e.data.data.sheet))}),this.$handleApiError).finally((()=>{this.isLoadingAuto=!1}))}}};const wQ=(0,d.Z)(dQ,[["render",fB]]);var cQ=wQ,uQ={props:["sheets"],components:{SheetRow:cQ},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10,columns:["id","name","sheet name","auto fetch","created","actions"]}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.sheets.length/this.paginationLimit)},items(){return this.sheets.slice(this.prevRange,this.nextRange)}},methods:{}};const pQ=(0,d.Z)(uQ,[["render",iB]]);var mQ=pQ;const hQ={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},gQ=(0,i._)("h1",{class:"tw-text-lg"},"Create Sheet",-1),fQ={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},vQ={class:"md:tw-col-span-6 tw-col-span-12"},yQ=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Name",-1),_Q={class:"md:tw-col-span-6 tw-col-span-12"},xQ=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Sheet Name",-1),bQ={class:"md:tw-col-span-12 tw-col-span-12"},kQ=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Sheet ID",-1),CQ={class:"md:tw-col-span-6 tw-col-span-12"},DQ=(0,i._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Auto Fetch",-1),SQ={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},zQ=(0,i._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),UQ={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},LQ=(0,i._)("span",{class:"text-white"}," Cancel ",-1),PQ=(0,i._)("span",{class:"text-white"}," Save ",-1);function AQ(t,e,s,r,l,o){const n=(0,i.up)("popup-full");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n,{onCancel:e[5]||(e[5]=e=>t.$emit("cancel")),visible:s.visible},{default:(0,i.w5)((()=>[(0,i._)("div",hQ,[gQ,(0,i._)("div",fQ,[(0,i._)("div",vQ,[yQ,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.sheet.name=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sheet.name]])]),(0,i._)("div",_Q,[xQ,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.sheet.sheet_name=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sheet.sheet_name]])]),(0,i._)("div",bQ,[kQ,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>l.sheet.sheet_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[a.nr,l.sheet.sheet_id]])]),(0,i._)("div",CQ,[DQ,(0,i._)("label",SQ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.sheet.auto_fetch=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,512),[[a.e8,l.sheet.auto_fetch]]),zQ])])]),(0,i._)("div",UQ,[(0,i.Wm)(G.T,{onClick:e[4]||(e[4]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[LQ])),_:1}),(0,i.Wm)(G.T,{loading:l.isLoading,onClick:o.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,i.w5)((()=>[PQ])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var WQ={props:["visible"],data(){return{isLoading:!1,sheet:{name:"",sheet_id:"",sheet_name:"",auto_fetch:!0}}},computed:{isFormValid(){return!!this.sheet.name&&!!this.sheet.sheet_id&&!!this.sheet.sheet_name}},methods:{create(){if(!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;this.isLoading=!0;const t=this.sheet;Xs.create(t).then((t=>{"SUCCESS"==t.data.code&&(this.$emit("cancel"),this.$alert({type:"success",title:"Sheet created successfully"}),this.$store.dispatch("sheet/addSheet",t.data.data.sheet))}),this.$handleApiError).finally((()=>this.isLoading=!1))}}};const $Q=(0,d.Z)(WQ,[["render",AQ]]);var EQ=$Q,OQ={components:{SheetsTable:mQ,AddSheet:EQ},data(){return{localUrl:R,isLoaded:!1,showFilters:!1,date:null,search:"",showPopup:!1,email:"new-service-account@testing-379416.iam.gserviceaccount.com"}},computed:{sheets(){return this.$store.getters["sheet/sheets"]}},methods:{getSheets(){return this.isLoaded=!1,Xs.all().then((t=>("SUCCESS"==t.data.code&&this.$store.dispatch("sheet/setSheets",t.data.data.sheets),t)),this.$handleApiError).finally((()=>{this.isLoaded=!0}))},copy(){navigator.clipboard.writeText(this.email),this.$alert({title:"Email Copied !",type:"success"})}},mounted(){this.getSheets()}};const TQ=(0,d.Z)(OQ,[["render",HZ]]);var VQ=TQ,qQ={name:"sheets",path:"/sheets",component:ia,meta:{module:"sheet"},children:[{name:"sheet/list",path:"",component:VQ,meta:{module:"sheet",subModule:"sheet/list",title:"Google Sheets List",gate:"show_all_sheets"}}]};const RQ={class:"py-5 px-2 tw-border tw-bg-white tw-w-full tw-rounded-md tw-mb-5"},FQ={class:"tw-px-3"},IQ={class:"tw-flex tw-items-center tw-justify-between tw-flex-wrap"},jQ={class:"tw-flex tw-items-center tw-gap-x-3"},NQ=(0,i._)("h2",{class:"tw-text-lg tw-font-medium tw-text-gray-800 darkx:tw-text-white"},"Orders",-1),MQ={class:"tw-px-3 tw-py-1 tw-text-xs tw-text-emerald-600 tw-bg-emerald-100 tw-rounded-full darkx:tw-bg-gray-800 darkx:tw-text-orange-400"},HQ=(0,i._)("p",{class:"tw-mt-1 tw-text-sm tw-text-gray-500 darkx:tw-text-gray-300"},"These orders have needs to reconfirmed.",-1);function YQ(t,e,s,a,r,l){const o=(0,i.up)("IndexFilters"),n=(0,i.up)("IndexTable");return(0,i.wg)(),(0,i.iD)("div",RQ,[(0,i._)("section",FQ,[(0,i._)("div",IQ,[(0,i._)("div",null,[(0,i._)("div",jQ,[NQ,(0,i._)("span",MQ,(0,Q.zw)(r.totalOrders)+" order",1)]),HQ]),(0,i.kq)("",!0)]),(0,i.Wm)(o,{search:r.search,"onUpdate:search":e[0]||(e[0]=t=>r.search=t),filters:r.filters,"onUpdate:filters":e[1]||(e[1]=t=>r.filters=t),onFilter:e[2]||(e[2]=t=>l.handlePerPageChange(r.per_page)),onPerPageChange:l.handlePerPageChange,onFresh:l.paginateOrders,loading:r.fetching,statistics:r.statistics,"active-statistics":""},null,8,["search","filters","onPerPageChange","onFresh","loading","statistics"]),(0,i._)("div",null,[(0,i.Wm)(n,{onUpdate:l.handleItemUpdate,onPageChange:l.handlePageChange,onSortOrder:l.handleSortOrderChange,loading:r.fetching,from:r.from,to:r.to,"last-page":r.last_page,"per-page":r.per_page,total:r.total,"current-page":r.current_page,items:r.items},null,8,["onUpdate","onPageChange","onSortOrder","loading","from","to","last-page","per-page","total","current-page","items"])])])])}const KQ={class:"tw-flex tw-flex-col"},ZQ={class:"tw-overflow-x-auto"},BQ={class:"tw-inline-block tw-min-w-full tw-align-middle"},QQ={class:"tw-overflow-hidden tw-border tw-border-gray-200 darkx:tw-border-gray-700 md:tw-rounded-lg"},GQ={class:"tw-min-w-full tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700"},JQ={class:"tw-bg-gray-50 darkx:tw-bg-gray-800"},XQ=(0,i._)("th",{scope:"col",class:"tw-py-3.5 tw-px-4 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"},[(0,i._)("span",null,"ID")],-1),tG={scope:"col",class:"tw-py-3.5 tw-px-4 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"},eG=(0,i._)("span",null,"Created",-1),sG=(0,i._)("svg",{class:"tw-h-3",viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,i._)("path",{d:"M2.13347 0.0999756H2.98516L5.01902 4.79058H3.86226L3.45549 3.79907H1.63772L1.24366 4.79058H0.0996094L2.13347 0.0999756ZM2.54025 1.46012L1.96822 2.92196H3.11227L2.54025 1.46012Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,i._)("path",{d:"M0.722656 9.60832L3.09974 6.78633H0.811638V5.87109H4.35819V6.78633L2.01925 9.60832H4.43446V10.5617H0.722656V9.60832Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,i._)("path",{d:"M8.45558 7.25664V7.40664H8.60558H9.66065C9.72481 7.40664 9.74667 7.42274 9.75141 7.42691C9.75148 7.42808 9.75146 7.42993 9.75116 7.43262C9.75001 7.44265 9.74458 7.46304 9.72525 7.49314C9.72522 7.4932 9.72518 7.49326 9.72514 7.49332L7.86959 10.3529L7.86924 10.3534C7.83227 10.4109 7.79863 10.418 7.78568 10.418C7.77272 10.418 7.73908 10.4109 7.70211 10.3534L7.70177 10.3529L5.84621 7.49332C5.84617 7.49325 5.84612 7.49318 5.84608 7.49311C5.82677 7.46302 5.82135 7.44264 5.8202 7.43262C5.81989 7.42993 5.81987 7.42808 5.81994 7.42691C5.82469 7.42274 5.84655 7.40664 5.91071 7.40664H6.96578H7.11578V7.25664V0.633865C7.11578 0.42434 7.29014 0.249976 7.49967 0.249976H8.07169C8.28121 0.249976 8.45558 0.42434 8.45558 0.633865V7.25664Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.3"})],-1),aG=[eG,sG],iG=(0,i._)("th",{scope:"col",class:"tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Client ",-1),rG=(0,i._)("th",{scope:"col",class:"tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Phone ",-1),lG=(0,i._)("th",{scope:"col",class:"tw-w-10 tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Confirmation ",-1),oG=(0,i._)("th",{scope:"col",class:"tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Affected ",-1),nG=(0,i._)("th",{scope:"col",class:"tw-w-10 tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Delivery ",-1),dG=(0,i._)("th",{scope:"col",class:"tw-relative tw-py-3.5 tw-px-4"},[(0,i._)("span",{class:"tw-sr-only"},"Actions")],-1),wG={key:0,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},cG={key:1,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},uG=(0,i._)("tr",null,[(0,i._)("td",{colspan:"8"},[(0,i._)("div",{class:"tw-p-5 tw-text-center tw-text-gray-600 tw-font-medium"}," No Order was found ! ")])],-1),pG=[uG],mG={key:2,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},hG={colspan:"8"},gG={role:"status",class:"tw-w-full tw-p-4 tw-space-y-4 tw-border-gray-200 tw-divide-y tw-divide-gray-200 tw-rounded tw-shadow tw-animate-pulse dark:tw-divide-gray-700 md:tw-p-6 dark:tw-border-gray-700"},fG=(0,i._)("div",{class:"tw-flex tw-items-center tw-justify-between"},[(0,i._)("div",null,[(0,i._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-600 tw-w-24 tw-mb-2.5"}),(0,i._)("div",{class:"tw-w-32 tw-h-2 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-700"})]),(0,i._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-700 tw-w-12"})],-1),vG=(0,i._)("div",null,[(0,i._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-600 tw-w-24 tw-mb-2.5"}),(0,i._)("div",{class:"tw-w-32 tw-h-2 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-700"})],-1),yG=(0,i._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-700 tw-w-12"},null,-1),_G=[vG,yG],xG={class:"tw-mt-6"};function bG(t,e,s,a,r,l){const o=(0,i.up)("TableRow"),n=((0,i.up)("loading"),(0,i.up)("TablePaginationNoNums"));return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",KQ,[(0,i._)("div",ZQ,[(0,i._)("div",BQ,[(0,i._)("div",QQ,[(0,i._)("table",GQ,[(0,i._)("thead",JQ,[(0,i._)("tr",null,[XQ,(0,i._)("th",tG,[(0,i._)("button",{onClick:e[0]||(e[0]=e=>t.$emit("sortOrder",{name:"created_at"})),class:"tw-flex tw-items-center tw-gap-x-3 focus:tw-outline-none"},aG)]),iG,rG,lG,oG,nG,dG])]),!s.loading&&s.items.length>0?((0,i.wg)(),(0,i.iD)("tbody",wG,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.items,(s=>((0,i.wg)(),(0,i.j4)(o,{onUpdate:e[1]||(e[1]=e=>t.$emit("update",e)),key:s.id,item:s},null,8,["item"])))),128))])):(0,i.kq)("",!0),s.loading||0!=s.items.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("tbody",cG,pG)),s.loading?((0,i.wg)(),(0,i.iD)("tbody",mG,[(0,i._)("tr",null,[(0,i.kq)("",!0),(0,i._)("td",hG,[(0,i._)("div",gG,[fG,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.perPage-1,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"tw-flex tw-items-center tw-justify-between tw-pt-4"},_G)))),128))])])])])):(0,i.kq)("",!0)])])])])]),(0,i._)("div",xG,[(0,i.Wm)(n,{from:s.from,to:s.to,"last-page":s.lastPage,"per-page":s.perPage,total:s.total,"current-page":s.currentPage,onPageChange:e[2]||(e[2]=e=>t.$emit("pageChange",e))},null,8,["from","to","last-page","per-page","total","current-page"])])])}const kG={class:"sm:tw-flex sm:tw-items-center sm:tw-justify-between"},CG={class:"tw-text-sm tw-text-gray-500 darkx:tw-text-gray-400"},DG={class:"tw-font-medium tw-text-gray-700 darkx:tw-text-gray-100"},SG={class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-4 sm:tw-mt-0"},zG=["disabled"],UG=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5 rtl:tw--scale-x-100"},[(0,i._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18"})],-1),LG=(0,i._)("span",null," previous ",-1),PG=[UG,LG],AG=["disabled"],WG=(0,i._)("span",null," Next ",-1),$G=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5 rtl:tw--scale-x-100"},[(0,i._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"})],-1),EG=[WG,$G];function OG(t,e,s,a,r,l){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",kG,[(0,i._)("div",CG,[(0,i.Uk)(" Page "),(0,i._)("span",DG,(0,Q.zw)(s.currentPage)+" of "+(0,Q.zw)(s.lastPage),1)]),(0,i._)("div",SG,[(0,i._)("button",{disabled:s.currentPage<=1,onClick:e[0]||(e[0]=t=>l.changePage(s.currentPage-1)),class:(0,Q.C_)([[s.currentPage<=1&&"tw-cursor-not-allowed"],"tw-flex tw-items-center tw-justify-center tw-w-1/2 tw-px-5 tw-py-2 tw-text-sm tw-text-gray-700 tw-capitalize tw-transition-colors tw-duration-200 tw-bg-white tw-border tw-border-solid tw-rounded-md sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-100 darkx:tw-bg-gray-900 darkx:tw-text-gray-200 darkx:tw-border-gray-700 darkx:hover:tw-bg-gray-800"])},PG,10,zG),(0,i._)("button",{disabled:s.currentPage>=l.totalPages,onClick:e[1]||(e[1]=t=>l.changePage(s.currentPage+1)),class:(0,Q.C_)([[s.currentPage>=l.totalPages&&"tw-cursor-not-allowed"],"tw-flex tw-items-center tw-justify-center tw-w-1/2 tw-px-5 tw-py-2 tw-text-sm tw-text-gray-700 tw-capitalize tw-transition-colors tw-duration-200 tw-bg-white tw-border tw-border-solid tw-rounded-md sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-100 darkx:tw-bg-gray-900 darkx:tw-text-gray-200 darkx:tw-border-gray-700 darkx:hover:tw-bg-gray-800"])},EG,10,AG)])])])}var TG={props:{from:{type:Number,default:1},to:{type:Number,default:1},perPage:{type:Number,default:1},total:{type:Number,default:1},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1}},data(){return{totalItems:100,itemsPerPage:5}},computed:{totalPages(){return this.lastPage},showEllipsisStart(){return this.currentPage>3},showEllipsisEnd(){return this.currentPage<this.totalPages-2},visiblePages(){let t=Math.max(1,this.currentPage-1),e=Math.min(this.totalPages,this.currentPage+1);const s=[];for(let a=t;a<=e;a++)s.push(a);return s}},methods:{changePage(t){this.$emit("pageChange",t)}}};const VG=(0,d.Z)(TG,[["render",OG]]);var qG=VG;const RG={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},FG={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white"},IG={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},jG={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-flex tw-items-center tw-gap-2"},NG={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},MG={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-font-[cairo]"},HG={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},YG={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-font-[cairo]"},KG={class:"tw-px-12 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},ZG={class:"tw-px-12 tw-py-2 tw-text-sm tw-whitespace-nowrap"},BG=(0,i._)("div",{class:"tw-w-1.5 tw-h-1.5 tw-rounded-full tw-bg-emerald-500"},null,-1),QG={key:1},GG={class:"tw-px-12 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},JG={class:"tw-px-4 tw-py-2 tw-text-sm tw-whitespace-nowrap"};function XG(t,e,s,a,r,l){const o=(0,i.up)("TableActions");return(0,i.wg)(),(0,i.iD)("tr",null,[(0,i._)("td",RG,[(0,i._)("div",null,[(0,i._)("h2",FG,(0,Q.zw)(s.item.id),1)])]),(0,i._)("td",IG,[(0,i._)("div",null,[(0,i._)("h2",jG,[(0,i._)("p",null,(0,Q.zw)(r.moment(s.item.created_at).format("DD[/]MM[/]YY")),1),(0,i.kq)("",!0)])])]),(0,i._)("td",NG,[(0,i._)("div",null,[(0,i._)("h2",MG,(0,Q.zw)(s.item.fullname),1)])]),(0,i._)("td",HG,[(0,i._)("div",null,[(0,i._)("h2",YG,(0,Q.zw)(s.item.phone),1)])]),(0,i._)("td",KG,[(0,i._)("span",{class:(0,Q.C_)([[l.confirmation.bgLight,l.confirmation.textLight],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},(0,Q.zw)(l.confirmation.name),3)]),(0,i._)("td",ZG,[s.item.delivery_fullname?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,Q.C_)([["tw-text-emerald-800","tw-bg-emerald-100"],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-pl-1.5 tw-py-0.5 tw-rounded tw-w-fit tw-flex tw-items-center tw-gap-2"])},[BG,(0,i._)("span",null,(0,Q.zw)(s.item.delivery_fullname),1)])):((0,i.wg)(),(0,i.iD)("div",QG,[(0,i._)("span",{class:(0,Q.C_)([["tw-text-gray-800","tw-bg-gray-100"],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},"No Delivery")]))]),(0,i._)("td",GG,[(0,i._)("span",{class:(0,Q.C_)([[l.deliveryState.bgLight,l.deliveryState.textLight],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},(0,Q.zw)(l.deliveryState.value?l.deliveryState.name:"Not Selected"),3)]),(0,i._)("td",JG,[(0,i._)("div",null,[(0,i.Wm)(o,{onUpdate:e[0]||(e[0]=e=>t.$emit("update",e)),item:s.item},null,8,["item"])])])])}var tJ=s(6797),eJ=s.n(tJ);const sJ={class:"tw-h-full"},aJ={class:"tw-flex tw-items-center tw-gap-2"},iJ=["href"],rJ={key:0};function lJ(t,e,s,a,r,l){const o=(0,i.up)("UpdatePopup");return(0,i.wg)(),(0,i.iD)("div",sJ,[(0,i._)("div",aJ,[(0,i._)("a",{target:"_blank",href:"https://api.whatsapp.com/send?phone="+s.item.phone.replace("+","").replace("-","").replace(" ",""),class:"tw-px-2 tw-py-1 tw-w-[25px] tw-h-[25px] tw-border tw-border-solid tw-border-green-500/20 hover:tw-bg-green-500/10 hover:tw-border-green-500/70 tw-duration-300 tw-text-green-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,i.Wm)(X.t,{size:"x-small"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-whatsapp")])),_:1})],8,iJ),(0,i._)("button",{onClick:e[0]||(e[0]=t=>r.popup=!0),class:"tw-px-2 tw-py-1 tw-w-[25px] tw-h-[25px] tw-border tw-border-solid tw-border-orange-500/20 hover:tw-bg-orange-500/10 hover:tw-border-orange-500/70 tw-duration-300 tw-text-orange-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,i.Wm)(X.t,{size:"x-small"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-pencil-outline")])),_:1})])]),r.popup?((0,i.wg)(),(0,i.iD)("div",rJ,[(0,i.Wm)(o,{onUpdate:e[1]||(e[1]=e=>t.$emit("update",e)),visible:r.popup,"onUpdate:visible":e[2]||(e[2]=t=>r.popup=t),item:s.item},null,8,["visible","item"])])):(0,i.kq)("",!0)])}const oJ={class:"tw-mx-auto tw-w-[95%] md:tw-max-w-[800px] tw-overflow-hidden tw-h-fit dark:tw-bg-neutral-900 tw-bg-white tw-border tw-border-solid dark:tw-border-neutral-700 tw-border-neutral-300 tw-shadow-md tw-my-5 tw-rounded-lg"},nJ=(0,i._)("div",{class:"tw-p-4 tw-text-lg tw-border-b tw-border-solid tw-font-medium tw-flex dark:tw-text-neutral-400 tw-text-neutral-500 tw-items-center tw-gap-4 dark:tw-bg-neutral-800 tw-bg-gray-50"}," Order Informations ",-1),dJ={class:"tw-bg-white tw-p-4"},wJ={class:"tw-grid tw-gap-6 tw-gap-y-5 tw-grid-cols-1 md:tw-grid-cols-2"},cJ={class:"tw-col-span-2 md:tw-col-span-1"},uJ=(0,i._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Client Name",-1),pJ={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},mJ={class:"tw-col-span-2 md:tw-col-span-1"},hJ=(0,i._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Phone Number",-1),gJ={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},fJ={class:"tw-col-span-2 md:tw-col-span-1"},vJ=(0,i._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"City",-1),yJ={class:"tw-relative"},_J=(0,i._)("option",{value:null,disabled:""},"Choose a City",-1),xJ=["value"],bJ=["value"],kJ=(0,i._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,i._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,i._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),CJ={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},DJ={class:"tw-col-span-2 md:tw-col-span-1"},SJ=(0,i._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Address",-1),zJ={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},UJ={class:"tw-col-span-2"},LJ=(0,i._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),PJ={class:"tw-relative"},AJ=["value"],WJ=(0,i._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,i._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,i._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),$J={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},EJ={key:0,class:"md:tw-col-span-1 tw-col-span-2"},OJ=(0,i._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Date",-1),TJ={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},VJ={key:1,class:"md:tw-col-span-1 tw-col-span-2"},qJ=(0,i._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Note",-1),RJ={class:"tw-col-span-2"},FJ=(0,i._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Note",-1),IJ={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},jJ={class:"md:tw-col-span-1 tw-col-span-2"},NJ={class:"md:tw-col-span-1 tw-col-span-2"},MJ=(0,i._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Upsell",-1),HJ={class:"tw-relative"},YJ=["value"],KJ=(0,i._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,i._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,i._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),ZJ={class:"tw-col-span-2"},BJ={class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},QJ={key:0,class:"tw-text-red-400 tw-text-xs"},GJ={class:"tw-flex tw-justify-end tw-items-center tw-p-4 tw-gap-3 dark:tw-bg-neutral-900 tw-bg-gray-50 tw-border-t tw-border-solid"},JJ=["disabled"],XJ=(0,i._)("span",null,"Update",-1);function tX(t,e,s,r,l,o){const n=(0,i.up)("OrderAffectation"),d=(0,i.up)("OrderItems"),w=(0,i.up)("popup-new");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(w,{visible:s.visible,closeable:!1,onCancel:o.cancel},{default:(0,i.w5)((()=>[(0,i._)("div",oJ,[nJ,(0,i._)("div",dJ,[(0,i._)("div",wJ,[(0,i._)("div",cJ,[uJ,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.itemCopy.fullname=t),onInput:e[1]||(e[1]=t=>l.errors.fullname=null),type:"text",class:(0,Q.C_)([[l.errors.fullname&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),placeholder:"John",required:""},null,34),[[a.nr,l.itemCopy.fullname]]),l.errors.fullname?((0,i.wg)(),(0,i.iD)("label",pJ,(0,Q.zw)(l.errors.fullname),1)):(0,i.kq)("",!0)]),(0,i._)("div",mJ,[hJ,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.itemCopy.phone=t),onInput:e[3]||(e[3]=t=>l.errors.phone=null),class:(0,Q.C_)([[l.errors.phone&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"123-45-678",required:""},null,34),[[a.nr,l.itemCopy.phone]]),l.errors.phone?((0,i.wg)(),(0,i.iD)("label",gJ,(0,Q.zw)(l.errors.phone),1)):(0,i.kq)("",!0)]),(0,i._)("div",fJ,[vJ,(0,i._)("div",yJ,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.itemCopy.city=t),onChange:e[5]||(e[5]=t=>l.errors.city=null),class:(0,Q.C_)([[l.errors.city&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 tw-pr-7"])},[_J,(0,i._)("option",{value:l.itemCopy.city,disabled:""},(0,Q.zw)(l.itemCopy.city),9,xJ),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.cities,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,bJ)))),128))],34),[[a.bM,l.itemCopy.city]]),kJ]),l.errors.city?((0,i.wg)(),(0,i.iD)("label",CJ,(0,Q.zw)(l.errors.city),1)):(0,i.kq)("",!0)]),(0,i._)("div",DJ,[SJ,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>l.itemCopy.adresse=t),onInput:e[7]||(e[7]=t=>l.errors.adresse=null),class:(0,Q.C_)([[l.errors.adresse&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"Address",required:""},null,34),[[a.nr,l.itemCopy.adresse]]),l.errors.adresse?((0,i.wg)(),(0,i.iD)("label",zJ,(0,Q.zw)(l.errors.adresse),1)):(0,i.kq)("",!0)]),(0,i._)("div",UJ,[LJ,(0,i._)("div",PJ,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>l.itemCopy.followup_confirmation=t),onChange:e[9]||(e[9]=t=>l.errors.followup_confirmation=null),class:(0,Q.C_)([[l.errors.followup_confirmation&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.confirmationsFollowup,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.value,class:(0,Q.C_)([t.text,!t.value&&"!tw-text-green-500"]),key:t.id},(0,Q.zw)(t.name),11,AJ)))),128))],34),[[a.bM,l.itemCopy.followup_confirmation]]),WJ]),l.errors.followup_confirmation?((0,i.wg)(),(0,i.iD)("label",$J,(0,Q.zw)(l.errors.followup_confirmation),1)):(0,i.kq)("",!0)]),"reporter"==l.itemCopy.followup_confirmation?((0,i.wg)(),(0,i.iD)("div",EJ,[OJ,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>l.itemCopy.reported_agente_date=t),onInput:e[11]||(e[11]=t=>l.errors.reported_agente_date=null),class:(0,Q.C_)([[l.errors.reported_agente_date&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"date",required:""},null,34),[[a.nr,l.itemCopy.reported_agente_date]]),l.errors.reported_agente_date?((0,i.wg)(),(0,i.iD)("label",TJ,(0,Q.zw)(l.errors.reported_agente_date),1)):(0,i.kq)("",!0)])):(0,i.kq)("",!0),"reporter"==l.itemCopy.followup_confirmation?((0,i.wg)(),(0,i.iD)("div",VJ,[qJ,(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":e[12]||(e[12]=t=>l.itemCopy.reported_agente_note=t),rows:"1",class:"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500",placeholder:"Enter a note"},null,512),[[a.nr,l.itemCopy.reported_agente_note]])])):(0,i.kq)("",!0),(0,i._)("div",RJ,[FJ,(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":e[13]||(e[13]=t=>l.itemCopy.note=t),onInput:e[14]||(e[14]=t=>l.errors.note=null),class:(0,Q.C_)([[l.errors.note&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),rows:"3",placeholder:"Enter a note"},null,34),[[a.nr,l.itemCopy.note]]),l.errors.note?((0,i.wg)(),(0,i.iD)("label",IJ,(0,Q.zw)(l.errors.note),1)):(0,i.kq)("",!0)]),(0,i._)("div",jJ,[(0,i.Wm)(n,{item:l.itemCopy,error:l.errors.affectation,"onUpdate:error":e[15]||(e[15]=t=>l.errors.affectation=t),affectation:l.itemCopy.affectation,"onUpdate:affectation":e[16]||(e[16]=t=>l.itemCopy.affectation=t)},null,8,["item","error","affectation"])]),(0,i._)("div",NJ,[MJ,(0,i._)("div",HJ,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[17]||(e[17]=t=>l.itemCopy.upsell=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.upsells,(t=>((0,i.wg)(),(0,i.iD)("option",{class:(0,Q.C_)([t.text]),value:t.value,key:t.id},(0,Q.zw)(t.name),11,YJ)))),128))],512),[[a.bM,l.itemCopy.upsell]]),KJ])]),(0,i._)("div",ZJ,[(0,i._)("label",BJ,[(0,i.Uk)("Order Items "),l.errors.items?((0,i.wg)(),(0,i.iD)("span",QJ," # "+(0,Q.zw)(l.errors.items),1)):(0,i.kq)("",!0)]),(0,i._)("div",null,[(0,i.Wm)(d,{order:l.itemCopy,error:l.errors.items,products:l.products,"products-fetched":l.products_fetched,items:l.itemCopy.items,"onUpdate:items":e[18]||(e[18]=t=>l.itemCopy.items=t)},null,8,["order","error","products","products-fetched","items"])])])])]),(0,i._)("div",GJ,[(0,i._)("button",{onClick:e[19]||(e[19]=(...t)=>o.cancel&&o.cancel(...t)),class:"tw-py-2 tw-px-7 tw-rounded tw-text-sm tw-border tw-border-solid tw-border-tansparent dark:tw-border-neutral-900 hover:tw-border-neutral-400 dark:hover:tw-border-neutral-500 hover:tw-bg-gray-300 tw-bg-gray-200 dark:tw-bg-neutral-600 tw-duration-300 tw-text-neutral-900 dark:tw-text-neutral-300"}," Cancel "),(0,i._)("button",{onClick:e[20]||(e[20]=(...t)=>o.handleUpdate&&o.handleUpdate(...t)),disabled:l.isLoading,class:"tw-py-2 tw-px-7 tw-flex tw-items-center tw-rounded tw-text-sm tw-bg-orange-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-orange-600 dark:tw-border-neutral-900 dark:hover:tw-border-orange-500 hover:tw-bg-orange-500/80 dark:hover:tw-bg-orange-400 tw-duration-300 tw-text-white"},[(0,i.Wm)(X.t,{size:"small",class:(0,Q.C_)(["tw-duration-300 tw-animate-spin tw-overflow-hidden tw-max-w-0 tw-mr-0",[l.isLoading&&"!tw-max-w-[50px] !tw-mr-3"]])},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-loading")])),_:1},8,["class"]),XJ],8,JJ)])])])),_:1},8,["visible","onCancel"])])}const eX=(t,e)=>e.fullname?e.phone?e.adresse?e.note||"annuler"!=e.followup_confirmation?!!sX(t,e.items):(t.errors.note="Add Cancelation note !",!1):(t.errors.adresse="Address is required",!1):(t.errors.phone="Phone Number is required",!1):(t.errors.fullname="Client Name is required",!1),sX=(t,e)=>{if(!e.length)return t.errors.items="You should add one order item at least.",!1;let s=!0;return e.forEach((e=>0==e.product_id?(t.errors.items="Product is required for order item",s=!1,!1):0==e.product_variation_id?(t.errors.items="Select a product variation",s=!1,!1):0==e.quantity?(t.errors.items="Items quantity cannot be 0",s=!1,!1):void 0)),s},aX=(t,e)=>{t.$alert({title:"Updated Successfully",type:"success"});const s=e.data.order;t.$emit("update",s),t.isLoading=!1,t.cancel(),t.errors={}},iX=(t,e)=>{t.$alert({title:e.message,type:"error"}),"VALIDATION_ERROR"==e.code&&(t.errors=e.errors),t.isLoading=!1},rX=(t,e)=>{t.isLoading=!0,t.errors={},Yl.update(e.id,e).then((e=>aX(t,e.data))).catch((e=>iX(t,e.response.data))).finally((()=>t.isLoading=!1))},lX={key:0,class:"tw-col-span-12 tw-rounded-lg tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},oX={key:1,class:"md:tw-col-span-12 tw-col-span-12"},nX={class:"tw-max-w-full tw-overflow-auto"},dX={class:"tw-text-xs tw-text-gray-700 tw-uppercase !tw-rounded-t-lg tw-border tw-border-solid"},wX={class:"tw-bg-gray-50"},cX={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},uX={key:0},pX=(0,i._)("td",{colspan:"3"},null,-1),mX=(0,i._)("td",null,[(0,i._)("div",{class:"tw-p-2"},[(0,i._)("p",null,"Total: ")])],-1),hX={colspan:"2",class:"tw-p-2"},gX={class:"tw-p-2 tw-py-1 tw-text-sm tw-text-green-500 tw-w-24 tw-font-medium tw-block focus:tw-outline-none tw-shadow-sm tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},fX={colspan:"6"},vX={class:"tw-flex tw-justify-end tw-items-center tw-py-3"},yX=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,i._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),_X=(0,i._)("span",null,"Add Item",-1),xX=[yX,_X],bX={key:1},kX={colspan:"6"},CX={class:"tw-scale-75 tw-p-5"};function DX(t,e,s,a,r,l){const o=(0,i.up)("ItemRow"),n=(0,i.up)("loading");return(0,i.wg)(),(0,i.iD)("div",null,[s.items.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",lX," No Order items ")),s.items.length?((0,i.wg)(),(0,i.iD)("div",oX,[(0,i._)("div",nX,[((0,i.wg)(),(0,i.iD)("table",{key:s.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,i._)("thead",dX,[(0,i._)("tr",wX,[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,i._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,i._)("div",cX,(0,Q.zw)(t),1)],2))),64))])]),s.productsFetched?((0,i.wg)(),(0,i.iD)("tbody",uX,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.items,(t=>((0,i.wg)(),(0,i.j4)(o,{key:t.id,item:t,products:s.products,onDelete:l.deleteItem,onUpdate:l.updateItem},null,8,["item","products","onDelete","onUpdate"])))),128)),(0,i._)("tr",null,[pX,mX,(0,i._)("td",hX,[(0,i._)("div",gX,[(0,i._)("p",null,(0,Q.zw)(r.currency)+" "+(0,Q.zw)(l.price),1)])])]),(0,i._)("tr",null,[(0,i._)("td",fX,[(0,i._)("div",vX,[(0,i._)("button",{onClick:e[0]||(e[0]=(...t)=>l.addItem&&l.addItem(...t)),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-400 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},xX)])])])])):((0,i.wg)(),(0,i.iD)("tbody",bX,[(0,i._)("tr",null,[(0,i._)("td",kX,[(0,i._)("div",CX,[(0,i.Wm)(n)])])])]))]))])])):(0,i.kq)("",!0)])}const SX=(0,i._)("td",null,null,-1),zX={class:"tw-p-2"},UX={class:"tw-relative"},LX=["value"],PX=(0,i._)("option",{value:0,selected:""},"Choose Product",-1),AX=["value"],WX=(0,i._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,i._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,i._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),$X={class:"tw-p-2"},EX={key:0,class:"tw-relative"},OX=["value"],TX=(0,i._)("option",{value:"",disabled:""},"Choose Variation",-1),VX=["value"],qX={key:1,class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},RX=(0,i._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,i._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})],-1),FX=[RX],IX={class:"tw-p-2"},jX=["value"],NX={class:"tw-p-2"},MX=["value"],HX={class:"tw-flex tw-justify-center"};function YX(t,e,s,a,r,l){return(0,i.wg)(),(0,i.iD)("tr",null,[SX,(0,i._)("td",null,[(0,i._)("div",zX,[(0,i._)("div",UX,[(0,i._)("select",{onChange:e[0]||(e[0]=(...t)=>l.handleProductChange&&l.handleProductChange(...t)),value:s.item.product_id,class:"tw-block tw-border-solid focus:tw-outline-none tw-w-full tw-p-2 tw-pr-6 tw-text-xs tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},[PX,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.products,(t=>((0,i.wg)(),(0,i.iD)("option",{key:t.id,value:t.id},(0,Q.zw)(t.name),9,AX)))),128))],40,LX),WX])])]),(0,i._)("td",null,[(0,i._)("div",$X,[s.item.product_id?((0,i.wg)(),(0,i.iD)("div",EX,[l.product.variations.length>1?((0,i.wg)(),(0,i.iD)("select",{key:0,onChange:e[1]||(e[1]=(...t)=>l.handleVariationChange&&l.handleVariationChange(...t)),value:s.item.product_variation_id,class:"tw-block tw-border-solid focus:tw-outline-none tw-w-full tw-p-2 tw-pr-6 tw-text-xs tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},[TX,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.product.variations,(t=>((0,i.wg)(),(0,i.iD)("option",{key:t.id,value:t.id},(0,Q.zw)(t.color)+" "+(0,Q.zw)(t.size),9,VX)))),128))],40,OX)):(0,i.kq)("",!0),l.product.variations.length>1?((0,i.wg)(),(0,i.iD)("div",qX,FX)):(0,i.kq)("",!0)])):(0,i.kq)("",!0)])]),(0,i._)("td",null,[(0,i._)("div",IX,[(0,i._)("input",{onInput:e[2]||(e[2]=e=>t.$emit("update",{...s.item,quantity:parseInt(e.target.value)>=0?parseInt(e.target.value):0})),value:s.item.quantity,min:"0",type:"number",class:"focus:tw-outline-none tw-border-solid tw-block tw-w-24 tw-p-2 tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded-lg tw-bg-gray-50 sm:tw-text-xs focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},null,40,jX)])]),(0,i._)("td",null,[(0,i._)("div",NX,[(0,i._)("input",{onInput:e[3]||(e[3]=e=>t.$emit("update",{...s.item,price:parseFloat(e.target.value)})),value:s.item.price,min:"0",type:"number",class:"focus:tw-outline-none tw-border-solid tw-block tw-w-24 tw-p-2 tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded-lg tw-bg-gray-50 sm:tw-text-xs focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},null,40,MX)])]),(0,i._)("td",null,[(0,i._)("div",HX,[(0,i._)("button",{onClick:e[4]||(e[4]=(...t)=>l.handleDelete&&l.handleDelete(...t)),class:"tw-px-2 tw-py-1 tw-w-[25px] tw-h-[25px] tw-border tw-border-solid tw-border-red-500/20 hover:tw-bg-red-500/10 hover:tw-border-red-500/70 tw-duration-300 tw-text-red-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,i.Wm)(X.t,{size:"x-small"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-delete-outline")])),_:1})])])])])}var KX={props:{item:{required:!0},products:{required:!0}},computed:{product(){return 0==this.item.product_id?null:this.products.find((t=>t.id==this.item.product_id))}},methods:{handleProductChange(t){const e=parseInt(t.target.value);if(!e)return!1;const s=this.products.find((t=>t.id==e));console.log(s.variations.length>0?s.variations[0].id:null);const a={...this.item,product_id:e,product:s,product_ref:s.ref,product_variation_id:s.variations.length>0?s.variations[0].id:null,product_variation:s.variations.length>0?s.variations[0]:null};this.$emit("update",a)},handleVariationChange(t){this.$emit("update",{...this.item,product_variation:this.product.variations.find((e=>e.id==parseInt(t.target.value))),product_variation_id:parseInt(t.target.value)})},handleDelete(){this.$emit("delete",this.item.id)}},mounted(){}};const ZX=(0,d.Z)(KX,[["render",YX]]);var BX=ZX,QX={components:{ItemRow:BX},props:{items:{required:!0,default:[]},error:{required:!1,default:null},products:{required:!0},productsFetched:{required:!0,default:!1},order:{required:!0}},data(){return{currency:I}},computed:{price(){return Nr(this.order)}},methods:{updateItem(t){const e=this.items.map((e=>e.id==t.id?t:e));this.$emit("update:items",e)},deleteItem(t){const e=this.items.filter((e=>e.id!=t));this.$emit("update:items",e)},addItem(){const t=this.items.length>0?this.items[this.items.length-1]:1,e=t?t.id+1:1,s={id:e,quantity:0,price:0,product_variation_id:0,product_id:0},a=[...this.items,s];this.$emit("update:items",a)}},mounted(){}};const GX=(0,d.Z)(QX,[["render",DX]]);var JX=GX;const XX=(0,i._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Affectation",-1),t0={key:0,class:"tw-relative"},e0=["value","disabled"],s0=(0,i._)("option",{value:""},"Choose a Delivery",-1),a0=["value"],i0=(0,i._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,i._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,i._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),r0={key:1,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},l0={key:2,class:"tw-relative"},o0={class:"tw-absolute tw-scale-75 tw-left-1/2 tw-top-1/2 -tw-translate-x-1/2 -tw-translate-y-1/2 tw-z-10"},n0=(0,i._)("select",{disabled:"",class:"tw-opacity-30 tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[(0,i._)("option",{value:null,selected:""},"Loading...")],-1),d0=(0,i._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},null,-1);function w0(t,e,s,a,r,l){const o=(0,i.up)("loading");return(0,i.wg)(),(0,i.iD)("div",null,[XX,r.fetched?((0,i.wg)(),(0,i.iD)("div",t0,[(0,i._)("select",{value:s.affectation,onChange:e[0]||(e[0]=(...t)=>l.handleChange&&l.handleChange(...t)),disabled:"reconfirmer"!=s.item.followup_confirmation,class:(0,Q.C_)([[s.error&&"!tw-border-red-400","reconfirmer"!=s.item.followup_confirmation&&"tw-cursor-not-allowed"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[s0,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.availableDeliveries,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,a0)))),128))],42,e0),i0])):(0,i.kq)("",!0),r.fetched&&s.error?((0,i.wg)(),(0,i.iD)("label",r0,(0,Q.zw)(s.error),1)):(0,i.kq)("",!0),r.fetched?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",l0,[(0,i._)("div",o0,[(0,i.Wm)(o)]),n0,d0]))])}var c0={props:{affectation:{required:!0},error:{required:!1,default:null},item:{required:!0}},data(){return{deliveries:[],fetched:!1}},computed:{availableDeliveries(){return this.deliveries.filter((t=>t.has.some((t=>this.item.items.some((e=>e.product_id==t))))))},delivery(){return this.deliveries.find((t=>t.id==this.affectation))}},watch:{"item.confirmation":{deep:!0,handler(){}},"item.items":{deep:!0,handler(){if(!this.affectation)return!1;this.delivery.has.some((t=>this.item.items.some((e=>e.product_id==t))))||this.$emit("update:affectation",null)}}},methods:{getDeliveries(){this.fetched=!1,Z.allDeliveries().then((t=>{"SUCCESS"==t?.data.code&&(this.deliveries=t.data.data.deliveries,this.fetched=!0)})).catch(this.$handleApiError)},handleChange(t){this.$emit("update:affectation",t.target.value),this.$emit("update:error",null)}},mounted(){this.getDeliveries()}};const u0=(0,d.Z)(c0,[["render",w0]]);var p0=u0,m0={components:{OrderItems:JX,OrderAffectation:p0},props:{visible:{required:!0},item:{required:!0}},data(){return{confirmationsFollowup:Pn,upsells:An,isLoading:!1,products_fetched:null,products:null,itemCopy:null,errors:{fullname:null,phone:null,city:null,adresse:null,note:null,reported_agente_date:null,affectation:null,items:null}}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{handleUpdate(){const t=eX(this,this.itemCopy);if(!t)return!1;rX(this,this.itemCopy)},cancel(){if(this.isLoading)return!1;this.$emit("update:visible",!1)},getProducts(){this.products_fetched=!1,ea.allForOrder().then((t=>{"SUCCESS"==t.data.code?this.products=t.data.data.products:this.products=[],this.products_fetched=!0})).catch(this.$handleApiError)}},mounted(){this.itemCopy=JSON.parse(JSON.stringify(this.item)),this.getProducts()}};const h0=(0,d.Z)(m0,[["render",tX]]);var g0=h0,f0={components:{UpdatePopup:g0},props:{item:{required:!0}},data(){return{popup:!1,isLoading:!1}},methods:{handle(){}}};const v0=(0,d.Z)(f0,[["render",lJ]]);var y0=v0,_0={components:{TableActions:y0},props:{item:{required:!0}},data(){return{moment:eJ()}},computed:{confirmation(){return Pn.find((t=>t.value==this.item.followup_confirmation))},deliveryState(){return Wn.find((t=>t.value==this.item.delivery))}},methods:{}};const x0=(0,d.Z)(_0,[["render",XG]]);var b0=x0,k0={components:{TablePaginationNoNums:qG,TableRow:b0},props:{items:{default:[]},loading:{type:Boolean,default:!0},from:{type:Number,default:1},to:{type:Number,default:1},perPage:{type:Number,default:10},total:{type:Number,default:0},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1}}};const C0=(0,d.Z)(k0,[["render",bG]]);var D0=C0;const S0={class:"tw-mt-6 tw-mb-4 md:tw-flex md:tw-items-center md:tw-justify-between"},z0={class:"tw-inline-flex tw-overflow-hidden tw-bg-white tw-border tw-divide-x tw-rounded-lg darkx:tw-bg-gray-900 rtl:tw-flex-row-reverse darkx:tw-border-gray-700 darkx:tw-divide-gray-700"},U0=(0,i._)("button",{class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 tw-bg-gray-100 sm:tw-text-sm darkx:tw-bg-gray-800 darkx:tw-text-gray-300"}," View all ",-1),L0=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,i._)("path",{fill:"currentColor",d:"M9 5a1 1 0 1 0 0 2a1 1 0 0 0 0-2zM6.17 5a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 0 1 0-2h1.17zM15 11a1 1 0 1 0 0 2a1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-1.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h7.17zM9 17a1 1 0 1 0 0 2a1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h1.17z"})],-1),P0=[L0],A0=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,i._)("path",{fill:"currentColor",d:"M10 2c-.6 0-1 .4-1 1v18c0 .6.4 1 1 1s1-.4 1-1V3c0-.6-.4-1-1-1zM5 12c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1s1-.4 1-1v-8c0-.6-.4-1-1-1zm10-4c-.6 0-1 .4-1 1v12c0 .6.4 1 1 1s1-.4 1-1V9c0-.6-.4-1-1-1zm5 8c-.6 0-1 .4-1 1v4c0 .6.4 1 1 1s1-.4 1-1v-4c0-.6-.4-1-1-1z"})],-1),W0=[A0],$0=["disabled"],E0=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[(0,i._)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4.75 10.75h-3m12.5-2c0 3-2.798 5.5-6.25 5.5c-3.75 0-6.25-3.5-6.25-3.5v3.5m9.5-9h3m-12.5 2c0-3 2.798-5.5 6.25-5.5c3.75 0 6.25 3.5 6.25 3.5v-3.5"})],-1),O0=[E0],T0={class:"tw-relative"},V0=["value"],q0=(0,i.uE)('<option value="5">5</option><option value="10">10</option><option value="20">20</option><option value="50">50</option><option value="100">100</option><option value="200">200</option>',6),R0=[q0],F0=(0,i._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,i._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,i._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),I0={class:"tw-relative tw-flex tw-items-center tw-mt-4 md:tw-mt-0"},j0=["value"],N0={class:"tw-overflow-hidden tw-col-span-1"},M0={class:"tw-overflow-hidden tw-col-span-1"};function H0(t,e,s,r,l,o){const n=(0,i.up)("FiltersWrapper"),d=(0,i.up)("IndexStatistics");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",S0,[(0,i._)("div",z0,[U0,(0,i._)("button",{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},P0),s.activeStatistics&&s.statistics?((0,i.wg)(),(0,i.iD)("button",{key:0,onClick:e[1]||(e[1]=t=>l.showStatistics=!l.showStatistics),class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},W0)):(0,i.kq)("",!0),(0,i._)("button",{onClick:e[2]||(e[2]=e=>t.$emit("fresh")),disabled:s.loading,class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},O0,8,$0),(0,i._)("div",T0,[(0,i._)("select",{onChange:e[3]||(e[3]=e=>t.$emit("perPageChange",e.target.value)),value:s.perPage,class:"tw-h-full tw-px-5 tw-py-2 tw-w-20 focus:tw-outline-none tw-text-xs tw-font-medium tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},R0,40,V0),F0])]),(0,i._)("div",I0,[(0,i._)("input",{type:"text",placeholder:"Search",value:s.search,onInput:e[4]||(e[4]=e=>t.$emit("update:search",e.target.value)),onKeyup:e[5]||(e[5]=(0,a.D2)((e=>t.$emit("filter")),["enter"])),class:"tw-block tw-w-full tw-py-1.5 tw-pl-5 tw-text-gray-700 tw-bg-white tw-border tw-border-solid tw-border-gray-200 tw-rounded-lg md:tw-w-80 placeholder-gray-400/70 tw-pr-11 rtl:tw-pr-11 rtl:tw-pl-5 darkx:tw-bg-gray-900 darkx:tw-text-gray-300 darkx:tw-border-gray-600 focus:tw-border-orange-400 darkx:focus:tw-border-orange-300 focus:tw-ring-orange-300 focus:tw-outline-none focus:tw-ring focus:tw-ring-opacity-40"},null,40,j0),(0,i._)("button",{onClick:e[6]||(e[6]=e=>t.$emit("filter")),class:"tw-absolute tw-right-0 tw-px-2 tw-py-1 tw-w-[38px] tw-h-[36px] tw-border-solid tw-rounded-r-lg tw-border-l tw-text-orange-500/80 tw-border-orange-500/20 hover:tw-bg-orange-500/10 hover:tw-border-orange-500/70 tw-duration-300 tw-flex tw-items-center tw-justify-center"},[(0,i.Wm)(X.t,{size:"small"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-magnify")])),_:1})])])]),(0,i._)("div",{class:(0,Q.C_)([[l.showFilters?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,i._)("div",N0,[(0,i.Wm)(n,{onFilter:e[7]||(e[7]=e=>t.$emit("filter")),filters:s.filters,onUpdate:e[8]||(e[8]=e=>t.$emit("update:filters",e))},null,8,["filters"])])],2),s.statistics?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,Q.C_)([[l.showStatistics?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,i._)("div",M0,[(0,i.Wm)(d,{statistics:s.statistics},null,8,["statistics"])])],2)):(0,i.kq)("",!0)])}const Y0={class:"tw-mb-4"},K0={class:"tw-grid tw-grid-cols-12 tw-gap-4"},Z0={class:"tw-h-full tw-w-full tw-p-3 tw-rounded tw-space-y-2 tw-border tw-border-solid"},B0={class:"tw-flex tw-items-center tw-justify-between"},Q0={class:"tw-text-xl tw-font-bold tw-text-gray-900"},G0={class:"tw-px-2 tw-py-1 tw-font-medium tw-text-sm tw-rounded tw-bg-white tw-text-gray-900"};function J0(t,e,s,a,r,l){return(0,i.wg)(),(0,i.iD)("div",Y0,[(0,i._)("div",K0,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.visible,((t,e)=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"md:tw-col-span-3 tw-col-span-12"},[(0,i._)("div",Z0,[(0,i._)("p",{class:(0,Q.C_)(["tw-text-sm tw-font-bold tw-w-fit tw-h-fit tw-px-2 tw-rounded",[l.getConfirmation(t.confirmation).textLight,l.getConfirmation(t.confirmation).bgLight]])},(0,Q.zw)(t.name),3),(0,i._)("div",B0,[(0,i._)("span",Q0,(0,Q.zw)(t.total),1),(0,i._)("span",G0,(0,Q.zw)(t.percent)+"%",1)])])])))),128))])])}var X0={props:{statistics:{required:!0}},computed:{visible(){return this.statistics.show.includes("*")?this.statistics.data:this.statistics.data.filter((t=>this.statistics.show.includes(t.followup_confirmation)))}},methods:{getConfirmation(t){return Pn.find((e=>e.value==t))}}};const t1=(0,d.Z)(X0,[["render",J0]]);var e1=t1;const s1={class:"tw-mb-4"},a1={class:"tw-grid tw-grid-cols-12 tw-gap-4 tw-p-1"},i1={class:"md:tw-col-span-4 tw-col-span-12 tw-rounded"},r1=(0,i._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Created",-1),l1=["value"],o1={class:"md:tw-col-span-4 tw-col-span-12 tw-rounded"},n1=(0,i._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),d1=["value"],w1=(0,i._)("option",{value:"all",selected:""},"All",-1),c1=["value"],u1={class:"md:tw-col-span-4 tw-col-span-12 tw-rounded"},p1=(0,i._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Delivery Status",-1),m1=["value"],h1=(0,i._)("option",{value:"all",selected:""},"All",-1),g1=["value"],f1=(0,i._)("button",{class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[(0,i._)("path",{fill:"#fff",d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})]),(0,i._)("span",null,"Filter")],-1),v1=[f1];function y1(t,e,s,a,r,l){return(0,i.wg)(),(0,i.iD)("div",s1,[(0,i._)("div",a1,[(0,i._)("div",i1,[r1,(0,i._)("input",{value:s.filters.created_at,type:"date",onChange:e[0]||(e[0]=e=>t.$emit("update",{...s.filters,created_at:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,l1)]),(0,i._)("div",o1,[n1,(0,i._)("select",{value:s.filters.followup_confirmation,onChange:e[1]||(e[1]=e=>t.$emit("update",{...s.filters,followup_confirmation:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[w1,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.confirmationsFollowup,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.value,class:"tw-capitalize",key:t.id},(0,Q.zw)(t.name),9,c1)))),128))],40,d1)]),(0,i._)("div",u1,[p1,(0,i._)("select",{onChange:e[2]||(e[2]=e=>t.$emit("update",{...s.filters,delivery:e.target.value})),value:s.filters.delivery,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[h1,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.deliveries,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t.value,class:"tw-capitalize",key:t.id},(0,Q.zw)(t.name),9,g1)))),128))],40,m1)]),(0,i.kq)("",!0),(0,i._)("div",{onClick:e[3]||(e[3]=e=>t.$emit("filter")),class:"tw-col-span-12 tw-flex tw-justify-end"},v1)])])}var _1={props:{filters:{required:!0,default:{}}},data(){return{confirmationsFollowup:Pn,deliveryStatus:Wn,deliveries:[{id:1,value:"annuler",name:"Cancelled"},{id:2,value:"pas-de-reponse",name:"No Answer"}]}}};const x1=(0,d.Z)(_1,[["render",y1]]);var b1=x1,k1={components:{IndexStatistics:e1,FiltersWrapper:b1},props:{perPage:{type:Number,default:10},statistics:{default:null},activeStatistics:{type:Boolean,default:!1},loading:{default:!0},search:{default:""},filters:{required:!0}},data(){return{showFilters:!1,showStatistics:!1}}};const C1=(0,d.Z)(k1,[["render",H0]]);var D1=C1,S1={components:{IndexTable:D0,IndexFilters:D1},data(){return{fetching:!0,items:[],statistics:null,first_page_url:null,lase_page_url:null,next_page_url:null,prev_page_url:null,last_page:1,from:1,to:1,total:0,totalOrders:0,links:null,search:"",sort_by:"created_at",sort_order:"desc",per_page:10,current_page:1,filters:{followup_confirmation:"all",delivery:"all",created_at:"all"}}},methods:{paginateOrders(){const t="?page="+this.current_page,e={sort_by:this.sort_by,sort_order:this.sort_order,per_page:this.per_page,current_page:this.current_page,search:this.search,filters:this.filters};return this.fetching=!0,Yl.paginate(t,e).then((({data:t})=>{const e=t.data.orders;this.setOptions(e),this.statistics=this.search?this.statistics:t.data.statistics})).then((()=>{this.fetching=!1}))},setOptions(t){this.items=t.data,this.first_page_url=Mr(t.first_page_url),this.lase_page_url=Mr(t.last_page_url),this.next_page_url=Mr(t.next_page_url),this.prev_page_url=Mr(t.prev_page_url),this.last_page=parseInt(t.last_page),this.from=parseInt(t.from),this.to=parseInt(t.to),this.per_page=parseInt(t.per_page),this.total=parseInt(t.total),this.totalOrders=this.search?this.totalOrders:parseInt(t.total),this.links=t.links},handleNext(){},handlePrev(){},handleItemUpdate(t){this.items=this.items.map((e=>e.id==t.id?t:e))},handlePageChange(t){this.current_page=t,this.paginateOrders()},handlePerPageChange(t){this.per_page=parseInt(t),this.handlePageChange(1)},handleSortOrderChange(){this.sort_order="asc"==this.sort_order?"desc":"asc",this.paginateOrders()}},mounted(){this.paginateOrders()}};const z1=(0,d.Z)(S1,[["render",YQ]]);var U1=z1,L1={path:"/followup",name:"followup",component:ia,meta:{module:"dashboard"},children:[{name:"followup/index",path:"",component:U1,meta:{module:"followup",title:"Follow Up Orders",gate:"follow_up_orders"}}]};const P1=(0,i._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,i._)("div",null,[(0,i._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Page not found")])],-1),A1={class:"py-5 px-5 tw-border bg-white tw-w-full tw-flex tw-items-center tw-justify-center tw-rounded-md tw-min-h-[500px]"},W1={class:"tw-flex tw-items-center tw-flex-col"},$1=(0,i._)("div",{class:"md:tw-text-6xl tw-text-4xl tw-font-black text-primary-color"},"404",-1),E1={class:"tw-w-fit tw-flex tw-items-center md:tw-text-2xl tw-text-xl mt-md-5 mt-3 tw-gap-2"},O1=(0,i._)("div",{class:"tw-max-w-[400px] tw-text-center md:tw-text-lg tw-text-sm mt-5"}," The page you requested was not found or you don't have the permission to access it. ",-1);function T1(t,e,s,a,r,l){return(0,i.wg)(),(0,i.iD)("div",null,[P1,(0,i._)("div",A1,[(0,i._)("div",W1,[$1,(0,i._)("div",E1,[(0,i.Wm)(X.t,null,{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-alert-circle")])),_:1}),(0,i.Uk)(" Oops! Page not found! ")]),O1])])])}var V1={};const q1=(0,d.Z)(V1,[["render",T1]]);var R1=q1;const F1={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"};function I1(t,e,s,a,r,l){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",F1,[(0,i._)("div",null,[(0,i.Wm)(G.T,{onClick:l.sendRequest,loading:r.isLoading,variant:"flat",color:"primary-color"},{default:(0,i.w5)((()=>[(0,i.Uk)("Send Request")])),_:1},8,["onClick","loading"])])])])}const j1="api/orders/count",N1="get";var M1={name:"Orders from Youcan",sheet_id:"QSDfFsqdDSQDfrsqFDSRHTRzer",sheet_name:"Youcan-Orders",auto_fetch:!0},H1={data(){return{isLoading:!1,test:M1}},methods:{async sendRequest(){switch(this.isLoading=!0,await Y.getCookie(),N1){case"get":M.get(j1).then((t=>{console.log("---- Success Response ----"),console.log(`---- Code ${t.status} ----`),console.log(t.data)}),(t=>{this.$handleApiError(t),console.log("---- Failed Response ----"),console.log(`---- Code ${t?.response.status} ----`),console.log(t?.response?.data)})).finally((()=>this.isLoading=!1));break;case"post":M.post(j1,M1).then((t=>{console.log("---- Success Response ----"),console.log(`---- Code ${t.status} ----`),console.log(t.data)}),(t=>{this.$handleApiError(t),console.log("---- Failed Response ----"),console.log(`---- Code ${t?.response.status} ----`),console.log(t?.response?.data)})).finally((()=>this.isLoading=!1));break;case"delete":M["delete"](j1).then((t=>{console.log("---- Success Response ----"),console.log(`---- Code ${t.status} ----`),console.log(t.data)}),(t=>{this.$handleApiError(t),console.log("---- Failed Response ----"),console.log(`---- Code ${t?.response.status} ----`),console.log(t?.response?.data)})).finally((()=>this.isLoading=!1));break;default:break}}}};const Y1=(0,d.Z)(H1,[["render",I1]]);var K1=Y1;const Z1=[qt,Zu,Hy,Gk,yL,aq,xF,BN,mH,PY,zZ,qQ,L1,{name:"default",path:"/test",component:ia,children:[{name:"test",path:"",component:K1,meta:{title:"Test abro m3a rasek",module:"test",gate:"all"}}]},{name:"not-found",path:"/404",component:ia,meta:{title:"Not Found"},children:[{name:"404",path:"",component:R1}]},{name:"catch-all",path:"/:pathMatch(.*)",beforeEnter:(t,e,s)=>s({name:"404"}),meta:{title:"Not Found"}}],B1=(0,u.p7)({history:(0,u.PO)("/"),routes:Z1});B1.beforeEach(B);var Q1=B1,G1=(s(9773),s(8957));const J1={colors:{"primary-color":"#FF9F43","secondary-color":"#1B2850","primary-indigo":"#1B2850","primary-orange":"#FF9F43","primary-blue":"#00CFE8","primary-green":"#28C76F"}};var X1=(0,G1.Rd)({theme:{defaultTheme:"customTheme",themes:{customTheme:J1}}});const t2={install(t){t.config.globalProperties.$can=function(t){const e=this.$store.getters["user/permissions"];return e.includes(t)}}};var e2=t2;const s2={install(t){t.config.globalProperties.$alert=function(t){this.$store.dispatch("alert/toggleAlert",t)}}};var a2=s2;const i2={install(t){t.config.globalProperties.$handleApiError=function(e){const s=e?.response?.data?.code;let a="error",i="Something wrong happened. Try again",r=!0;const l=["VALIDATION_ERROR","NOT_ACTIVE_ERROR","INVALID_CREDENTIALS","PERMISSION_DENIED"];switch(l.includes(s)&&(r=!1),console.log(e),"ERR_NETWORK"==e.code&&(i="Network error. Check your connection"),s){case"NOT_ALLOWED":i="Your are not allowed to this resources";break;case"ERROR":i=e?.response?.data.message;break;case"NOT_AUTHENTICATED":i="Your session expired",setTimeout((()=>{t.config.globalProperties.$store.dispatch("user/logout"),t.config.globalProperties.$router.push("/login")}),2e3);break;case"NOT_FOUND":r=!1,t.config.globalProperties.$router.push({name:"404"});break;default:break}return r&&t.config.globalProperties.$alert({type:a,title:i}),e}}};var r2=i2,l2=s(7025);const o2=t=>((0,i.dD)("data-v-ff4afcd0"),t=t(),(0,i.Cn)(),t),n2={class:"tw-min-h-[500px] tw-flex tw-items-center tw-justify-center tw-bg-white tw-rounded-md tw-border"},d2=o2((()=>(0,i._)("div",{class:"tw-w-[40px] tw-h-[40px] tw-animate-spin loading tw-border-4 tw-border-x-transparent tw-border-t-transparent tw-rounded-full"},null,-1))),w2=[d2];function c2(t,e,s,a,r,l){return(0,i.wg)(),(0,i.iD)("div",n2,w2)}var u2={};const p2=(0,d.Z)(u2,[["render",c2],["__scopeId","data-v-ff4afcd0"]]);var m2=p2;const h2={class:"tw-flex tw-justify-center tw-items-center"},g2=(0,i._)("div",{class:"tw-relative tw-w-8 tw-h-8 tw-animate-spin tw-rounded-full tw-bg-gradient-to-r tw-from-purple-400 tw-via-blue-500 tw-to-red-400"},[(0,i._)("div",{class:"tw-absolute tw-top-1/2 tw-left-1/2 tw-transform tw--translate-x-1/2 tw--translate-y-1/2 tw-w-7 tw-h-7 tw-bg-white tw-rounded-full tw-border-2 tw-border-white"})],-1),f2=[g2];function v2(t,e,s,a,r,l){return(0,i.wg)(),(0,i.iD)("div",h2,f2)}var y2={};const _2=(0,d.Z)(y2,[["render",v2]]);var x2=_2;const b2={key:0},k2={ref:"popup",class:"tw-fixed tw-top-0 tw-left-0 tw-z-[50999] tw-right-0 tw-bottom-0 tw-flex tw-items-center tw-justify-center"},C2={name:"body",class:"tw-z-[50999] tw-bg-white md:tw-min-w-[300px] md:tw-max-w-[800px] tw-flex tw-flex-col md:tw-min-h-[170px] tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5"},D2=["innerHTML"],S2={key:1,class:"tw-text-lg tw-text-gray-700"},z2={class:"tw-flex tw-gap-3 tw-justify-end mt-5"};function U2(t,e,s,a,r,l){return s.visible?((0,i.wg)(),(0,i.iD)("div",b2,[((0,i.wg)(),(0,i.j4)(i.lR,{to:"body"},[(0,i._)("div",null,[(0,i._)("div",k2,[(0,i._)("div",C2,[(0,i._)("div",{class:(0,Q.C_)(["tw-font-medium tw-text-lg mb-5 tw-text-start",l.currentType.class])},[(0,i.Wm)(X.t,{size:"small",class:"mr-1"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,Q.zw)(l.currentType.icon),1)])),_:1}),(0,i._)("span",null,(0,Q.zw)(s.title),1)],2),s.body?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"tw-text-center tw-text-lg tw-text-gray-700",innerHTML:s.body},null,8,D2)):((0,i.wg)(),(0,i.iD)("div",S2,[(0,i.WI)(t.$slots,"default")])),(0,i.Wm)(es.C),(0,i._)("div",z2,[(0,i.Wm)(G.T,{variant:"flat",color:"grey",onClick:e[0]||(e[0]=t=>l.resolve(!1))},{default:(0,i.w5)((()=>[(0,i.Uk)("Cancel")])),_:1}),s.noConfirm?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(G.T,{key:0,loading:s.loading,variant:"flat",color:s.btnColor?s.btnColor:"red",onClick:e[1]||(e[1]=t=>l.resolve(!0))},{default:(0,i.w5)((()=>[(0,i.Uk)("Confirm")])),_:1},8,["loading","color"]))])]),(0,i._)("div",{onClick:e[2]||(e[2]=t=>l.resolve(!1)),class:(0,Q.C_)(["tw-duration-300 tw-absolute tw-top-0 tw-left-0 tw-w-full tw-h-full tw-bg-neutral-900/50 tw-opacity-0",{"!tw-opacity-100":s.visible}])},null,2)],512)])]))])):(0,i.kq)("",!0)}var L2={props:["visible","loading","title","body","type","noConfirm","btnColor"],data(){return{show:!0,types:{warning:{class:"tw-text-orange-400",icon:"mdi-alert-circle-outline"},info:{class:"tw-text-blue-400",icon:"mdi-information-outline"}}}},watch:{visible(t){this.show=t}},methods:{resolve(t){this.$emit("resolved",t)}},computed:{currentType(){return this.types[this.type]}}};const P2=(0,d.Z)(L2,[["render",U2]]);var A2=P2;const W2={key:0},$2={ref:"popup",class:"tw-fixed tw-top-0 tw-left-0 tw-z-[50999] tw-right-0 tw-bottom-0 tw-flex tw-items-center tw-justify-center"};function E2(t,e,s,r,l,o){return s.visible?((0,i.wg)(),(0,i.iD)("div",W2,[((0,i.wg)(),(0,i.j4)(i.lR,{to:".my-application"},[(0,i._)("div",null,[(0,i._)("div",$2,[(0,i._)("div",{name:"body",onClick:e[0]||(e[0]=(0,a.iM)((t=>o.resolve(!1)),["self"])),class:"tw-z-[50999] tw-w-full md:tw-min-w-[300px] tw-overflow-y-auto tw-max-h-screen tw-flex tw-flex-col md:tw-min-h-[170px]"},[(0,i.WI)(t.$slots,"default")]),(0,i._)("div",{onClick:e[1]||(e[1]=t=>o.resolve(!1)),class:(0,Q.C_)(["tw-duration-300 tw-absolute tw-top-0 tw-left-0 tw-w-full tw-h-full tw-bg-neutral-900/50 tw-opacity-0",{"!tw-opacity-100":s.visible}])},null,2)],512)])]))])):(0,i.kq)("",!0)}var O2={props:["visible","loading","title","body","type","noConfirm","btnColor"],data(){return{show:!0,types:{warning:{class:"tw-text-orange-400",icon:"mdi-alert-circle-outline"},info:{class:"tw-text-blue-400",icon:"mdi-information-outline"}}}},watch:{visible(t){this.show=t}},methods:{resolve(t){this.$emit("cancel",t)}},computed:{currentType(){return this.types[this.type]}}};const T2=(0,d.Z)(O2,[["render",E2]]);var V2=T2,q2=s(4679),R2=s(5781),F2=s.n(R2);(0,a.ri)(c).use(Q1).use(V).use(X1).use(e2).use(a2).use(r2).use(l2.Z).component("LoadingAnimation",m2).component("Loading",x2).component("Popup",A2).component("PopupFull",V2).component("VueDatePicker",q2.Z).component("downloadCsv",F2()).mount("#app")}},e={};function s(a){var i=e[a];if(void 0!==i)return i.exports;var r=e[a]={id:a,loaded:!1,exports:{}};return t[a].call(r.exports,r,r.exports,s),r.loaded=!0,r.exports}s.m=t,function(){var t=[];s.O=function(e,a,i,r){if(!a){var l=1/0;for(w=0;w<t.length;w++){a=t[w][0],i=t[w][1],r=t[w][2];for(var o=!0,n=0;n<a.length;n++)(!1&r||l>=r)&&Object.keys(s.O).every((function(t){return s.O[t](a[n])}))?a.splice(n--,1):(o=!1,r<l&&(l=r));if(o){t.splice(w--,1);var d=i();void 0!==d&&(e=d)}}return e}r=r||0;for(var w=t.length;w>0&&t[w-1][2]>r;w--)t[w]=t[w-1];t[w]=[a,i,r]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){var t,e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__};s.t=function(a,i){if(1&i&&(a=this(a)),8&i)return a;if("object"===typeof a&&a){if(4&i&&a.__esModule)return a;if(16&i&&"function"===typeof a.then)return a}var r=Object.create(null);s.r(r);var l={};t=t||[null,e({}),e([]),e(e)];for(var o=2&i&&a;"object"==typeof o&&!~t.indexOf(o);o=e(o))Object.getOwnPropertyNames(o).forEach((function(t){l[t]=function(){return a[t]}}));return l["default"]=function(){return a},s.d(r,l),r}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.f={},s.e=function(t){return Promise.all(Object.keys(s.f).reduce((function(e,a){return s.f[a](t,e),e}),[]))}}(),function(){s.u=function(t){return"js/"+t+"."+{128:"65a19ac7",269:"6bcf28cc",617:"ac7ccd9f"}[t]+".js"}}(),function(){s.miniCssF=function(t){}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="production:";s.l=function(a,i,r,l){if(t[a])t[a].push(i);else{var o,n;if(void 0!==r)for(var d=document.getElementsByTagName("script"),w=0;w<d.length;w++){var c=d[w];if(c.getAttribute("src")==a||c.getAttribute("data-webpack")==e+r){o=c;break}}o||(n=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.setAttribute("data-webpack",e+r),o.src=a),t[a]=[i];var u=function(e,s){o.onerror=o.onload=null,clearTimeout(p);var i=t[a];if(delete t[a],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((function(t){return t(s)})),e)return e(s)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),n&&document.head.appendChild(o)}}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){s.p="/"}(),function(){var t={143:0};s.f.j=function(e,a){var i=s.o(t,e)?t[e]:void 0;if(0!==i)if(i)a.push(i[2]);else{var r=new Promise((function(s,a){i=t[e]=[s,a]}));a.push(i[2]=r);var l=s.p+s.u(e),o=new Error,n=function(a){if(s.o(t,e)&&(i=t[e],0!==i&&(t[e]=void 0),i)){var r=a&&("load"===a.type?"missing":a.type),l=a&&a.target&&a.target.src;o.message="Loading chunk "+e+" failed.\n("+r+": "+l+")",o.name="ChunkLoadError",o.type=r,o.request=l,i[1](o)}};s.l(l,n,"chunk-"+e,e)}},s.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,r,l=a[0],o=a[1],n=a[2],d=0;if(l.some((function(e){return 0!==t[e]}))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(n)var w=n(s)}for(e&&e(a);d<l.length;d++)r=l[d],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(w)},a=self["webpackChunkproduction"]=self["webpackChunkproduction"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(8306)}));a=s.O(a)})();
//# sourceMappingURL=app.79df76c4.js.map