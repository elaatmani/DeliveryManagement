(function(){var t={6700:function(t,e,a){var s={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":6649,"./is.js":6649,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":6956,"./oc-lnc.js":6956,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":9304,"./th.js":9304,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function r(t){var e=i(t);return a(e)}function i(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}r.keys=function(){return Object.keys(s)},r.resolve=i,t.exports=r,r.id=6700},3116:function(t,e,a){"use strict";var s=a(9242),r=a(3396),i=a(7718);function o(t,e,a,s,o,l){const n=(0,r.up)("router-view");return(0,r.wg)(),(0,r.j4)(i.q,{class:"my-application"},{default:(0,r.w5)((()=>[(0,r.Wm)(n)])),_:1})}var l=a(7139),n={name:"App",data:()=>({theme:"light"}),methods:{...(0,l.nv)("user",["setIsLoggedIn","setPermissions"])},mounted(){}},d=a(89);const w=(0,d.Z)(n,[["render",o],["__scopeId","data-v-e47c86e2"]]);var c=w,u=a(2483);let p={roles:localStorage.getItem("roles")?JSON.parse(localStorage.getItem("roles")):[],user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):[],isLoggedIn:"true"==localStorage.getItem("isLoggedIn"),permissions:localStorage.getItem("permissions")?JSON.parse(localStorage.getItem("permissions")):[],users:[],agents:[],deliveries:[],fetched:!1,fetchedRoles:!1};var m={name:"user",namespaced:!0,state:p,getters:{fetched:t=>t.fetched,fetchedRoles:t=>t.fetchedRoles,isLoggedIn:t=>t.isLoggedIn,permissions:t=>t.permissions,user:t=>t.user,users:t=>t.users,roles:t=>t.roles,agents:t=>t.agents,deliveries:t=>t.deliveries},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_FETCHED_ROLES:(t,e)=>{t.fetchedRoles=e},SET_IS_LOGGED_IN:(t,e)=>{localStorage.setItem("isLoggedIn",e),t.isLoggedIn=e},SET_USER:(t,e)=>{localStorage.setItem("user",JSON.stringify(e)),t.user=e},SET_USERS:(t,e)=>{t.users=e},SET_PERMISSIONS:(t,e)=>{localStorage.setItem("permissions",JSON.stringify(e)),t.permissions=e},SET_ROLES:(t,e)=>{localStorage.setItem("roles",JSON.stringify(e)),t.roles=e},SET_DELIVERIES:(t,e)=>{t.deliveries=e},SET_AGENTS:(t,e)=>{t.agents=e}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setFetchedRoles:({commit:t},e)=>{t("SET_FETCHED_ROLES",e)},setUser:({commit:t},e)=>{t("SET_USER",e)},setUsers:({commit:t},e)=>{t("SET_USERS",e)},setAgents:({commit:t},e)=>{t("SET_AGENTS",e)},setDeliveries:({commit:t},e)=>{t("SET_DELIVERIES",e)},setIsLoggedIn:({commit:t},e)=>{t("SET_IS_LOGGED_IN",e)},setPermissions:({commit:t},e)=>{t("SET_PERMISSIONS",e)},setRoles:({commit:t},e)=>{t("SET_ROLES",e)},logout:({commit:t})=>{t("SET_USER",{}),t("SET_IS_LOGGED_IN",!1),t("SET_PERMISSIONS",[]),t("SET_ROLES",[])}}},h={name:"alert",namespaced:!0,state:{active:!1,alert:{type:"success",title:"Toast",body:"Hello body"}},getters:{alert:t=>t},mutations:{TOGGLE_TOAST:(t,e)=>{t.alert=e,t.active=!0,setTimeout((()=>{t.active=!1}),4500)}},actions:{toggleAlert:({commit:t},e)=>{t("TOGGLE_TOAST",e)}}};a(7658);let g={products:[],fetched:!1};var f={name:"product",namespaced:!0,state:g,getters:{products:t=>t.products,fetched:t=>t.fetched},mutations:{SET_PRODUCTS:(t,e)=>{t.products=e},ADD_PRODUCT:(t,e)=>{t.products.push(e)},SET_FETCHED:(t,e)=>{t.fetched=e}},actions:{setProducts:({commit:t},e)=>{t("SET_PRODUCTS",e)},addProduct:({commit:t},e)=>{t("ADD_PRODUCT",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)}}};a(541);let v={fetched:!1,sales:[]};var y={name:"sale",namespaced:!0,state:v,getters:{sales:t=>t.sales,fetched:t=>t.fetched},mutations:{SET_SALES:(t,e)=>{t.sales=e},SET_FETCHED:(t,e)=>{t.fetched=e},UPDATE_SALE:(t,e)=>{t.sales=t.sales.map((t=>t.id===e.id?e.sale:t))},ADD_SALE:(t,e)=>{t.sales.unshift(e)},ADD_SALES:(t,e)=>{t.sales=[...e,...t.sales]},UPDATE_CONFIRMATION:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,console.log("sale updated")),t)))},UPDATE_UPSELL:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.upsell=e.upsell,console.log("sale updated")),t)))},UPDATE_AFFECTATION:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.affectation=e.affectation,null!=e.affectation?t.delivery="dispatch":t.delivery=null,console.log("sale updated")),t)))},UPDATE_NOTE:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.note=e.note,console.log("sale updated")),t)))},UPDATE_CONFIRMATION_WITH_NOTE:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,t.note=e.note,console.log("order updated")),t)))},UPDATE_DELIVERY:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.delivery=e.delivery,console.log("sale updated")),t)))},RESET_SALES:(t,e)=>{t.sales=t.sales.map((t=>(e.includes(t.id)&&(t.agente_id=null,t.upsell=null,t.confirmation=null,t.affectation=null,t.note=null,t.note_d=null,t.delivery=null,t.reported_agente_date=null,t.reported_agente_note=null,t.reported_delivery_date=null,t.reported_delivery_note=null),t)))}},actions:{setSales:({commit:t},e)=>{t("SET_SALES",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},update:({commit:t},e)=>{t("UPDATE_SALE",e)},add:({commit:t},e)=>{t("ADD_SALE",e)},addSales:({commit:t},e)=>{t("ADD_SALES",e)},updateConfirmation:({commit:t},e)=>{t("UPDATE_CONFIRMATION",e)},updateUpsell:({commit:t},e)=>{t("UPDATE_UPSELL",e)},updateAffectation:({commit:t},e)=>{t("UPDATE_AFFECTATION",e)},updateNote:({commit:t},e)=>{t("UPDATE_NOTE",e)},updateConfirmationWithNote:({commit:t},e)=>{t("UPDATE_CONFIRMATION_WITH_NOTE",e)},updateDelivery:({commit:t},e)=>{t("UPDATE_DELIVERY",e)},resetSales:({commit:t},e)=>{t("RESET_SALES",e)}}};let _={orders:[],order:null,all_orders:[],fetched:!1};var x={name:"order",namespaced:!0,state:_,getters:{fetched:t=>t.fetched,orders:t=>t.orders,order:t=>t.order,allOrders:t=>t.all_orders},mutations:{SET_ORDERS:(t,e)=>{t.orders=e},ADD_ORDER:(t,e)=>{t.orders.unshift(e),t.all_orders.unshift(e)},SET_FETCHED:(t,e)=>{t.fetched=e},SET_ALL_ORDERS:(t,e)=>{t.all_orders=e},SET_ORDER:(t,e)=>{t.order=e},UPDATE_ORDER:(t,e)=>{t.orders=t.orders.map((t=>t.id===e.id?e.order:t)),t.all_orders=t.all_orders.map((t=>t.id===e.id?e.order:t))},UPDATE_CONFIRMATION:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,"confirmer"==e.confirmation&&(t.delivery="dispatch"),console.log("order updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,"confirmer"==e.confirmation&&(t.delivery="dispatch"),console.log("order updated")),t)))},UPDATE_CONFIRMATION_WITH_NOTE:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,t.note=e.note,"confirmer"==e.confirmation&&(t.delivery="dispatch"),console.log("order updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,t.note=e.note,"confirmer"==e.confirmation&&(t.delivery="dispatch"),console.log("order updated")),t)))},UPDATE_UPSELL:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.upsell=e.upsell,console.log("sale updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.upsell=e.upsell,console.log("sale updated")),t)))},UPDATE_AFFECTATION:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.affectation=e.affectation,console.log("sale updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.affectation=e.affectation,console.log("sale updated")),t)))},UPDATE_NOTE:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.note=e.note,console.log("sale updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.note=e.note,console.log("sale updated")),t)))},UPDATE_DELIVERY:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.delivery=e.delivery,console.log("sale updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.delivery=e.delivery,console.log("sale updated")),t)))}},actions:{setOrders:({commit:t},e)=>{t("SET_ORDERS",e)},addOrder:({commit:t},e)=>{t("ADD_ORDER",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setAllOrders:({commit:t},e)=>{t("SET_ALL_ORDERS",e)},setOrder:({commit:t},e)=>{t("SET_ORDER",e)},update:({commit:t},e)=>{t("UPDATE_ORDER",e)},updateConfirmation:({commit:t},e)=>{t("UPDATE_CONFIRMATION",e)},updateConfirmationWithNote:({commit:t},e)=>{t("UPDATE_CONFIRMATION_WITH_NOTE",e)},updateUpsell:({commit:t},e)=>{t("UPDATE_UPSELL",e)},updateAffectation:({commit:t},e)=>{t("UPDATE_AFFECTATION",e)},updateNote:({commit:t},e)=>{t("UPDATE_NOTE",e)},updateDelivery:({commit:t},e)=>{t("UPDATE_DELIVERY",e)}}};let b={fetcehd:!1,inventoryList:[],inventoryState:[],inventoryMovements:[]};var k={name:"inventory",namespaced:!0,state:b,getters:{fetched:t=>t.fetched,inventoryList:t=>t.inventoryList,inventoryState:t=>t.inventoryState,inventoryMovements:t=>t.inventoryMovements},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_INVENTORY_LIST:(t,e)=>{t.inventoryList=e},SET_INVENTORY_STATE:(t,e)=>{t.inventoryState=e},SET_INVENTORY_MOVEMENTS:(t,e)=>{t.inventoryMovements=e}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setInventoryList:({commit:t},e)=>{t("SET_INVENTORY_LIST",e)},setInventoryState:({commit:t},e)=>{t("SET_INVENTORY_STATE",e)},setInventoryMovements:({commit:t},e)=>{t("SET_INVENTORY_MOVEMENTS",e)}}};const C=localStorage.getItem("cities");let D={fetched:!1,cities:C?JSON.parse(C):[]};var S={name:"city",namespaced:!0,state:D,getters:{cities:t=>t.cities,fetched:t=>t.fetched},mutations:{SET_CITIES:(t,e)=>{localStorage.setItem("cities",JSON.stringify(e)),t.cities=e},SET_FETCHED:(t,e)=>{t.fetched=e}},actions:{setCities:({commit:t},e)=>{t("SET_CITIES",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)}}};let z={shops:[]};var U={name:"shop",namespaced:!0,state:z,getters:{shops:t=>t.shops},mutations:{SET_SHOPS:(t,e)=>{t.shops=e}},actions:{setShops:({commit:t},e)=>{t("SET_SHOPS",e)}}};let L={fetched:!1,notifications:{productStockAlert:[],reportedSale:[],reportedOrderAgente:[],reportedOrderDelivery:[]}};var P={name:"notification",namespaced:!0,state:L,getters:{notifications:t=>t.notifications,fetched:t=>t.fetched},mutations:{SET_NOTIFICATIONS:(t,e)=>{t.notifications=e},SET_FETCHED:(t,e)=>{t.fetched=e}},actions:{setNotifications:({commit:t},e)=>{t("SET_NOTIFICATIONS",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)}}};let A={fetched:!1,warehouses:[]};var W={name:"warehouse",namespaced:!0,state:A,getters:{fetched:t=>t.fetched,warehouses:t=>t.warehouses},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_WAREHOUSES:(t,e)=>{t.warehouses=e},ADD_WAREHOUSE:(t,e)=>{t.warehouses.push(e)},DELETE_WAREHOUSE:(t,e)=>{t.warehouses=t.warehouses.filter((t=>t.id!=e))},UPDATE_WAREHOUSE:(t,e)=>{t.warehouses=t.warehouses.map((t=>t.id==e.id?{...e}:t))}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setWarehouses:({commit:t},e)=>{t("SET_WAREHOUSES",e)},addWarehouse:({commit:t},e)=>{t("ADD_WAREHOUSE",e)},update:({commit:t},e)=>{t("UPDATE_WAREHOUSE",e)},delete:({commit:t},e)=>{t("DELETE_WAREHOUSE",e)}}};let $={fetched:!1,factorisations:[]};var E={name:"factorisation",namespaced:!0,state:$,getters:{fetched:t=>t.fetched,factorisations:t=>t.factorisations},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_FACTORISATIONS:(t,e)=>{t.factorisations=e},ADD_FACTORISATION:(t,e)=>{t.factorisations.push(e)},DELETE_FACTORISATION:(t,e)=>{t.factorisations=t.factorisations.filter((t=>t.id!=e))},UPDATE_FACTORISATION:(t,e)=>{t.factorisations=t.factorisations.map((t=>t.id==e.id?{...e}:t))}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setFactorisations:({commit:t},e)=>{t("SET_FACTORISATIONS",e)},addFactorisation:({commit:t},e)=>{t("ADD_FACTORISATION",e)},update:({commit:t},e)=>{t("UPDATE_FACTORISATION",e)},delete:({commit:t},e)=>{t("DELETE_FACTORISATION",e)}}};let O={fetched:!1,sheets:[]};var T={name:"sheet",namespaced:!0,state:O,getters:{fetched:t=>t.fetched,sheets:t=>t.sheets},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_SHEETS:(t,e)=>{t.sheets=e},ADD_SHEET:(t,e)=>{t.sheets.push(e)},DELETE_SHEET:(t,e)=>{t.sheets=t.sheets.filter((t=>t.id!=e))},UPDATE_SHEET:(t,e)=>{t.sheets=t.sheets.map((t=>t.id==e.id?{...e}:t))}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setSheets:({commit:t},e)=>{t("SET_SHEETS",e)},addSheet:({commit:t},e)=>{t("ADD_SHEET",e)},update:({commit:t},e)=>{t("UPDATE_SHEET",e)},delete:({commit:t},e)=>{t("DELETE_SHEET",e)}}};let V={fetched:!1,totalAvailable:0,totalConfirmed:0,totalNotConfirmed:0};var q={name:"agent",namespaced:!0,state:V,getters:{fetched:t=>t.fetched,state:t=>t},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_TOTAL_CONFIRMED:(t,e)=>{t.totalConfirmed=e},SET_TOTAL_NOT_CONFIRMED:(t,e)=>{t.totalNotConfirmed=e},SET_TOTAL_AVAILABLE:(t,e)=>{t.totalAvailable=e}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setTotalConfirmed:({commit:t},e)=>{t("SET_TOTAL_CONFIRMED",e)},setTotalNotConfirmed:({commit:t},e)=>{t("SET_TOTAL_NOT_CONFIRMED",e)},setTotalAvailable:({commit:t},e)=>{t("SET_TOTAL_AVAILABLE",e)}}},R=(0,l.MT)({state:{},getters:{},mutations:{},actions:{},modules:{user:m,product:f,alert:h,sale:y,order:x,inventory:k,city:S,shop:U,notification:P,warehouse:W,factorisation:E,sheet:T,agent:q}}),I=a(6943);const F="https://vldo.shop/",j="https://api.vldo.shop/",N="$",M=I.Z.create({baseURL:j}),H=I.Z.create({baseURL:j});H.defaults.withCredentials=!0,H.defaults.headers={"Content-Type":"multipart/form-data",Accept:"application/json"},M.defaults.withCredentials=!0,M.defaults.headers={"Content-Type":"application/json",Accept:"application/json"};var Y=M,K=a(680),Z={getCookie(){let t=K.Z.get("XSRF-TOKEN");return t?new Promise((t=>{t()})):Y.get("sanctum/csrf-cookie")}};class B{async login(t){return await Z.getCookie(),Y.post("api/auth/login",{email:t.email,password:t.password})}async register(t){return await Z.getCookie(),Y.post("api/users/new",{email:t.email,password:t.password,phone:t.phone,status:t.status,role:t.role,firstname:t.firstname,lastname:t.lastname,product_id:t.product_id,city:t?.city,deliverycity:t?.deliveryCities,having_all:t.having_all})}async update(t,e){return await Z.getCookie(),Y.post("api/users/update/"+t.id,{email:t.email,password:t.password,phone:t.phone,status:t.status,firstname:t.firstname,lastname:t.lastname,product_id:t.product_id,role:t.role,city:t?.city,deliverycity:t?.deliveryCities,updatePassword:e,having_all:t.having_all})}async updateProfile(t,e){return await Z.getCookie(),Y.post("api/users/profile",{password:t.password,phone:t.phone,firstname:t.firstname,lastname:t.lastname,updatePassword:e})}async online(){return await Z.getCookie(),Y.get("api/user")}async profile(){return await Z.getCookie(),Y.get("api/users/profile")}async logout(){return await Z.getCookie(),Y.get("api/auth/logout")}async permession(){return await Z.getCookie(),Y.get("api/auth/permission")}async roles(){return await Z.getCookie(),Y.get("api/auth/roles")}async all(){return await Z.getCookie(),Y.get("api/users")}async updateStatus({id:t,status:e}){return await Z.getCookie(),Y.post("api/users/status/"+t,{status:e})}async delete(t){return await Z.getCookie(),Y["delete"]("api/users/delete/"+t)}async getUser(t){return await Z.getCookie(),Y.get("api/users/"+t)}async createRole({name:t,permissions:e}){return await Z.getCookie(),Y.post("api/roles/new",{name:t,permissions:e})}async updateRole(t,{name:e,permissions:a}){return await Z.getCookie(),Y.post("api/roles/update/"+t,{name:e,permissions:a})}async deleteRole(t){return await Z.getCookie(),Y["delete"]("api/roles/delete/"+t)}async getRole(t){return await Z.getCookie(),Y.get("api/roles/"+t)}async agents(){return await Z.getCookie(),Y.get("api/agents")}async deliveries(){return await Z.getCookie(),Y.get("api/delevries")}async allDeliveries(){return await Z.getCookie(),Y.get("api/deliveries")}async cities(){return await Z.getCookie(),Y.get("api/cities")}}var Q=new B;function G(t){if(document.title=t.meta?.title+" | Vldo Shop",console.log(t),!R.getters["user/isLoggedIn"])return"/login"==t.path||{name:"login"};if(Q.online().catch((t=>{const e=t?.response?.data?.code;"NOT_AUTHENTICATED"==e&&R.dispatch("user/logout")})),"/login"==t.path)return{name:"404"};const{gate:e}=t.meta,a=R.getters["user/permissions"];return"all"===e||((e||"/404"===t.path)&&!(!a.includes(e)&&"/404"!==t.path)||{name:"404"})}var J=a(2268),X=a(7312),tt=a(3369),et=a(3289),at=a(165);const st={class:"tw-min-h-screen tw-overflow-auto tw-bg-slate-50"},rt={class:"tw-grid tw-h-fit tw-overflow-hidden md:tw-grid-cols-2 tw-grid-cols-1"},it={class:"py-md-5 py-10 pb-0 tw-flex tw-justify-center md:tw-items-center"},ot={class:"px-md-10 tw-w-full"},lt={class:"tw-w-[150px]"},nt=["src"],dt={class:"mt-md-10 mt-15 pt-5 px-md-5 px-lg-16 tw-w-full d-felx justify-center align-center"},wt={class:"pa-5 py-7 tw-border bg-white tw-rounded-lg tw-mx-auto tw-max-w-[450px]"},ct=(0,r._)("h1",{class:"text-h5 font-weight-medium !tw-text-gray-600"},"Login",-1),ut=(0,r._)("p",{class:"text-body-1 mt-2 !tw-text-gray-500"},"Please login to your account",-1),pt={key:0,class:"text-body-2 mt-2 !tw-text-red-500"},mt={class:"mt-5"},ht=(0,r._)("p",{class:"mb-1"},"Email",-1),gt=(0,r._)("p",{class:"mb-1"},"Password",-1),ft={class:"mt-5"},vt=(0,r._)("span",{class:"text-capitalize text-white"},"Login",-1),yt={class:"bg-primary-color tw-min-h-screen tw-hidden md:tw-flex tw-items-center tw-justify-center"},_t=["src"];function xt(t,e,a,i,o,l){const n=(0,r.up)("Alert");return(0,r.wg)(),(0,r.iD)("div",st,[(0,r.Wm)(n),(0,r._)("div",rt,[(0,r._)("div",it,[(0,r.Wm)(tt.K,{class:"py-0"},{default:(0,r.w5)((()=>[(0,r._)("div",ot,[(0,r._)("div",lt,[(0,r._)("img",{class:"tw-w-full",src:o.localUrl+"assets/img/logo.png"},null,8,nt)]),(0,r._)("div",dt,[(0,r._)("div",wt,[ct,ut,o.error.active?((0,r.wg)(),(0,r.iD)("p",pt,(0,J.zw)(o.error.message),1)):(0,r.kq)("",!0),(0,r._)("div",mt,[(0,r._)("div",null,[ht,(0,r.Wm)(at.hw,{name:"email",onKeyup:e[0]||(e[0]=t=>l.resetError("email")),modelValue:o.email,"onUpdate:modelValue":e[1]||(e[1]=t=>o.email=t),error:!o.emailStatus.valid,"error-messages":o.emailStatus.valid?"":o.emailStatus.message,autofocus:"",onBlur:e[2]||(e[2]=t=>o.emailFocus=!1),onFocus:e[3]||(e[3]=t=>o.emailFocus=!0),color:"primary-color",variant:"outlined",class:"tw-w-full",density:"compact"},{"append-inner":(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:o.emailFocus?o.emailStatus.valid?"primary-color":"error":"grey-darken-3"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-email-outline")])),_:1},8,["color"])])),_:1},8,["modelValue","error","error-messages"])]),(0,r._)("div",null,[gt,(0,r.Wm)(at.hw,{name:"password",onKeyup:(0,s.D2)(l.login,["enter"]),modelValue:o.password,"onUpdate:modelValue":e[5]||(e[5]=t=>o.password=t),error:!o.passwordStatus.valid,"error-messages":o.passwordStatus.valid?"":o.passwordStatus.message,type:o.showPassword?"text":"password",onBlur:e[6]||(e[6]=t=>o.passwordFocus=!1),onFocus:e[7]||(e[7]=t=>o.passwordFocus=!0),color:"primary-color",variant:"outlined",class:"tw-w-full",density:"compact"},{"append-inner":(0,r.w5)((()=>[(0,r.Wm)(et.t,{onClick:e[4]||(e[4]=t=>o.showPassword=!o.showPassword),class:"tw-relative tw-z-50 tw-cursor-pointer",color:o.passwordFocus?o.passwordStatus.valid?"primary-color":"error":"grey-darken-3"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(o.showPassword?"mdi-eye-off-outline":"mdi-eye-outline"),1)])),_:1},8,["color"])])),_:1},8,["onKeyup","modelValue","error","error-messages","type"])]),(0,r._)("div",ft,[(0,r.Wm)(X.T,{loading:o.isLoading,onClick:l.login,block:"",size:"large",color:"primary-color",variant:"flat",class:"!tw-text-white"},{default:(0,r.w5)((()=>[vt])),_:1},8,["loading","onClick"])])])])])])])),_:1})]),(0,r._)("div",yt,[(0,r._)("img",{src:o.localUrl+"assets/img/login.jpg",class:"tw-w-full tw-h-full tw-object-cover",alt:""},null,8,_t)])])])}function bt(t){var e=/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/;return t?new RegExp(e).test(t)?{valid:!0}:{valid:!1,message:"Email is not valid."}:{valid:!1,message:"Email is required."}}function kt(t){return t?t.length<=4||t.length>=16?{valid:!1,message:"Password length must be between 4 and 16."}:{valid:!0}:{valid:!1,message:"This field is required"}}function Ct(t,e="This field"){return t?{valid:!0}:{valid:!1,message:`${e} is required`}}function Dt(t,e="This field"){return t?isNaN(t)?{valid:!1,message:`${e} must be a valid number`}:{valid:!0}:{valid:!1,message:`${e} is required`}}function St(t,e){return t?t!==e?{valid:!1,message:"Passwords doesn't match"}:{valid:!0}:{valid:!1,message:"This field is required."}}function zt(t){return t.length?{valid:!0}:{valid:!1,message:"You need at least one variant to create a product !"}}function Ut(t){return t.length?{valid:!0}:{valid:!1,message:"You need at least one permission to create a role !"}}var Lt=a(7771),Pt=a(8952);const At={key:0,class:"pa-2 tw-absolute !tw-z-[510000]"},Wt={class:"tw-text-sm"};function $t(t,e,a,s,i,o){return(0,r.wg)(),(0,r.j4)(r.lR,{to:"body"},[(0,r.Wm)(Pt.V,null,{default:(0,r.w5)((()=>[o.state.active?((0,r.wg)(),(0,r.iD)("div",At,[(0,r.Wm)(Lt.w,{closable:"",density:"compact",variant:"flat",type:o.state.alert.type,position:"fixed",location:"bottom right",class:"ma-2"},{default:(0,r.w5)((()=>[(0,r._)("div",Wt,(0,J.zw)(o.state.alert.title),1)])),_:1},8,["type"])])):(0,r.kq)("",!0)])),_:1})])}var Et={computed:{state(){return this.$store.getters["alert/alert"]}}};const Ot=(0,d.Z)(Et,[["render",$t]]);var Tt=Ot,Vt={components:{Alert:Tt},data(){return{localUrl:F,isLoading:!1,error:{active:!1,message:""},email:"",password:"",emailStatus:{valid:!0,message:""},passwordStatus:{valid:!0,message:""},emailFocus:!1,passwordFocus:!1,showPassword:!1}},methods:{...(0,l.nv)("user",["setIsLoggedIn","setPermissions","setUser"]),validateForm(){return this.emailStatus=bt(this.email),this.passwordStatus=kt(this.password),this.passwordStatus.valid&&this.emailStatus.valid},login(){this.validateForm()&&(this.isLoading=!0,this.error={active:!1,message:""},Q.login({email:this.email,password:this.password}).then((t=>{if("AUTHENTICATION_SUCCESSFUL"==t.data.code){this.setUser(t.data.data.user),this.setIsLoggedIn(!0);const e=t.data.data.user.permissions;this.setPermissions(e),this.$router.push("/")}})).catch((t=>{this.$handleApiError(t),"INVALID_CREDENTIALS"==t.response?.data.code&&(this.error={active:!0,message:t.response.data.message}),"NOT_ACTIVE_ERROR"==t.response?.data.code&&(this.error={active:!0,message:t.response.data.message}),"VALIDATION_ERROR"==t.response?.data.code&&(this.emailStatus={valid:!1,message:t.response.data.error["email"][0]},this.passwordStatus={valid:!1,message:t.response.data.error["password"][0]})})).finally((()=>{this.isLoading=!1})),console.log("login..."))},resetError(t){"email"==t&&(this.emailStatus={valid:!0,message:""}),"password"==t&&(this.passwordStatus={valid:!0,message:""})}},mounted(){}};const qt=(0,d.Z)(Vt,[["render",xt]]);var Rt=qt,It={name:"login",path:"/login",component:Rt,meta:{title:"Login"}},Ft=a(4454),jt=a(3140);function Nt(t,e,a,s,i,o){const l=(0,r.up)("AppSidebar"),n=(0,r.up)("AppHeader"),d=(0,r.up)("Alert"),w=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",null,[o.isLoggedIn?((0,r.wg)(),(0,r.j4)(Ft.s,{key:0,"full-height":!0},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{active:i.drawer},null,8,["active"]),(0,r.Wm)(n,{onToggleSidebar:o.toggleSidebar},null,8,["onToggleSidebar"]),(0,r.Wm)(d),(0,r.Wm)(jt.O,{class:"tw-bg-gray-50 tw-min-h-screen tw-overflow-y-auto"},{default:(0,r.w5)((()=>[(0,r.Wm)(tt.K,{fluid:"",class:"py-6 px-6"},{default:(0,r.w5)((()=>[(0,r.Wm)(w)])),_:1})])),_:1}),i.showScrollUpButton?((0,r.wg)(),(0,r.iD)("button",{key:0,onClick:e[0]||(e[0]=(...t)=>o.scrollToTop&&o.scrollToTop(...t)),class:"tw-fixed tw-shadow tw-text-sm tw-bottom-5 tw-right-3 tw-w-10 tw-h-10 tw-z-10 tw-rounded-full tw-bg-orange-400 tw-text-white"},[(0,r.Wm)(et.t,null,{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-transfer-up")])),_:1})])):(0,r.kq)("",!0)])),_:1})):(0,r.kq)("",!0)])}var Mt=a(6439),Ht=a(9156);const Yt={class:"tw-flex tw-items-center tw-gap-2"};function Kt(t,e,a,i,o,l){const n=(0,r.up)("Notification"),d=(0,r.up)("HeaderMenu");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(Mt.L,{color:"white",density:"default",elevation:"0",class:"tw-border-b-0 !tw-shadow-lg !tw-shadow-gray-400/10 tw-top-0 !tw-fixed tw-overflow-visible",absolute:!1},(0,r.Nv)({append:(0,r.w5)((()=>[(0,r._)("div",Yt,[(0,r.Wm)(n),(0,r.Wm)(d)])])),default:(0,r.w5)((()=>[(0,r.Wm)(Ht.g,{variant:"text",onClick:e[0]||(e[0]=(0,s.iM)((t=>l.handleClick()),["stop"]))})])),_:2},[void 0]),1024)])}var Zt=a(652),Bt=a(4075),Qt=a(8694),Gt=a(8793);const Jt={class:"tw-relative"},Xt=(0,r._)("div",{class:"tw-absolute tw-bottom-0 tw-border-2 tw-border-solid tw-border-white tw-right-0 tw-w-3 tw-h-3 tw-rounded-full tw-bg-green-500"},null,-1),te={key:0,class:"!tw-duration-100"},ee={class:"tw-absolute tw-bg-white tw-border tw-border-solid tw-border-neutral-200 tw-rounded-md tw-bordesr !tw-shadow-lg !tw-shadow-gray-400/10 tw-top-14 tw-right-0 tw-w-[200px] tw-min-h-[50px]"},ae={class:"pa-2 d-flex tw-items-center tw-gap-2 tw-border-b tw-border-b-neutral-100"},se={class:"d-flex flex-column justify-center"},re={class:"tw-text-sm tw-text-neutral-800 text-capitalize"},ie={class:"tw-text-xs tw-rounded-lg tw-text-green-500 text-capitalize"},oe=(0,r._)("span",{class:"text-capitalize tw-text-neutral-700 tw-text-xs"}," Profile ",-1),le={class:"d-flex tw-items-center tw-gap-2"},ne=(0,r._)("span",{class:"text-capitalize tw-text-red-700 tw-text-xs"}," Logout ",-1);function de(t,e,a,s,i,o){return(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",Jt,[(0,r.Wm)(X.T,{onClick:o.toggleMenu,icon:"","max-width":"35","max-height":"35"},{default:(0,r.w5)((()=>[(0,r.Wm)(Zt.V,{size:"32"},{default:(0,r.w5)((()=>[(0,r.Wm)(Qt.f,{src:i.localUrl+"assets/img/profiles/avatar.webp"},null,8,["src"])])),_:1}),Xt])),_:1},8,["onClick"]),(0,r.Wm)(Pt.Z5,null,{default:(0,r.w5)((()=>[i.isActive?((0,r.wg)(),(0,r.iD)("div",te,[(0,r._)("div",ee,[(0,r._)("div",ae,[(0,r.Wm)(Zt.V,{size:"35"},{default:(0,r.w5)((()=>[(0,r.Wm)(Qt.f,{eager:"",src:i.localUrl+"assets/img/profiles/avatar.webp"},null,8,["src"])])),_:1}),(0,r._)("div",se,[(0,r._)("div",re,(0,J.zw)(o.user.firstname)+" "+(0,J.zw)(o.user.lastname),1),(0,r._)("div",ie,(0,J.zw)(o.user.role),1)])]),(0,r.Wm)(Bt.J),(0,r._)("div",{onClick:e[0]||(e[0]=(...t)=>o.closeMenu&&o.closeMenu(...t)),class:"d-flex tw-items-center tw-gap-2"},[(0,r.Wm)(X.T,{block:"",class:"justify-start",variant:"text",color:"gray",ripple:!1},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{class:"mr-2 tw-text-neutral-700"},{default:(0,r.w5)((()=>[(0,r.Uk)(" mdi-account-outline ")])),_:1}),oe])),_:1})]),(0,r.Wm)(Bt.J),(0,r._)("div",le,[(0,r.Wm)(X.T,{onClick:o.logout,block:"",class:"justify-start",variant:"text",color:"gray",ripple:!1},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{class:(0,J.C_)([{"tw-animate-pulse":i.loginOut},"mr-2 tw-text-red-700"])},{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(i.loginOut?"mdi-power-settings":"mdi-power"),1)])),_:1},8,["class"]),ne])),_:1},8,["onClick"])])])])):(0,r.kq)("",!0)])),_:1})])),[[Gt.L,o.closeMenu]])}var we={data(){return{localUrl:F,isActive:!1,loginOut:!1}},methods:{toggleMenu(){this.isActive=!this.isActive},closeMenu(){this.isActive=!1},logout(){this.loginOut=!0,Q.logout().then((()=>{this.$store.dispatch("user/logout"),this.$router.push("/login")})).finally((()=>{this.loginOut=!1}))}},computed:{user(){return this.$store.getters["user/user"]}}};const ce=(0,d.Z)(we,[["render",de]]);var ue=ce;function pe(t,e,a,s,i,o){const l=(0,r.up)("AdminNotification"),n=(0,r.up)("UserNotification");return(0,r.wg)(),(0,r.iD)("div",null,["admin"==o.user.role?((0,r.wg)(),(0,r.j4)(l,{key:0})):(0,r.kq)("",!0),["agente","delivery"].includes(o.user.role)?((0,r.wg)(),(0,r.j4)(n,{key:1})):(0,r.kq)("",!0)])}const me={class:"tw-relative"},he={key:0,class:"tw-absolute tw-border-2 tw-border-solid tw-border-white tw-top-1 tw-right-1 tw-w-3 tw-h-3 tw-rounded-full tw-bg-red-500"},ge={key:0,class:"!tw-duration-100"},fe={class:"tw-absolute tw-text-sm tw-bg-white tw-border tw-border-solid tw-border-neutral-200 tw-rounded-md tw-bordesr !tw-shadow-lg !tw-shadow-gray-400/10 tw-top-14 tw-right-0 tw-w-[230px] tw-min-h-[50px]"},ve=(0,r._)("p",{class:"tw-p-2 tw-text-sm"},"Notifications",-1),ye={key:0},_e={class:"tw-py-10 tw-flex tw-items-center tw-justify-center"},xe={key:1},be=(0,r._)("p",{class:""},"Stock Alert",-1),ke=(0,r._)("p",{class:""},"Delivery Reported",-1),Ce=(0,r._)("p",{class:""},"Confirmation Reported",-1);function De(t,e,a,s,i,o){const l=(0,r.up)("router-link");return(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",me,[(0,r.Wm)(X.T,{onClick:o.toggleMenu,icon:"",width:"35",height:"35",class:"tw-relative"},{default:(0,r.w5)((()=>[(0,r.Wm)(Qt.f,{width:"22",height:"22",src:i.localUrl+"assets/img/icons/notification-bing.svg"},null,8,["src"]),o.stockAlert.length||o.reportedDeliveries.length||o.reportedConfirmations.length?((0,r.wg)(),(0,r.iD)("div",he)):(0,r.kq)("",!0)])),_:1},8,["onClick"]),(0,r.Wm)(Pt.Z5,null,{default:(0,r.w5)((()=>[i.isActive?((0,r.wg)(),(0,r.iD)("div",ge,[(0,r._)("div",fe,[ve,i.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",ye,[(0,r._)("div",_e,[(0,r.Wm)(et.t,{size:"large",class:"tw-animate-spin",color:"primary-color"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-loading")])),_:1})])])),i.isLoaded?((0,r.wg)(),(0,r.iD)("div",xe,[(0,r.Wm)(l,{to:"/notifications/stock",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-alert-outline")])),_:1}),(0,r._)("div",null,[be,(0,r._)("p",{class:(0,J.C_)([[o.stockAlert.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,J.zw)(o.stockAlert.length)+" "+(0,J.zw)(o.stockAlert.length>1?"products":"product"),3)])])),_:1}),(0,r.Wm)(l,{to:"/sales",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-autorenew")])),_:1}),(0,r._)("div",null,[ke,(0,r._)("p",{class:(0,J.C_)([[o.reportedDeliveries.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,J.zw)(o.reportedDeliveries.length)+" today",3)])])),_:1}),(0,r.Wm)(l,{to:"/sales",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-autorenew")])),_:1}),(0,r._)("div",null,[Ce,(0,r._)("p",{class:(0,J.C_)([[o.reportedConfirmations.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,J.zw)(o.reportedConfirmations.length)+" today",3)])])),_:1})])):(0,r.kq)("",!0)])])):(0,r.kq)("",!0)])),_:1})])),[[Gt.L,o.closeMenu]])}class Se{async all(){return await Z.getCookie(),Y.get("api/notifications")}async agente(){return await Z.getCookie(),Y.get("api/notifications/agente")}async delivery(){return await Z.getCookie(),Y.get("api/notifications/delivery")}}var ze=new Se,Ue={data(){return{localUrl:F,isActive:!1,isLoaded:!1}},methods:{toggleMenu(){this.isActive=!this.isActive},closeMenu(){this.isActive=!1},getNotifications(){ze.all().then((t=>{"SUCCESS"==t.data.code&&(console.log("success"),this.$store.dispatch("notification/setNotifications",t.data.data),this.$store.dispatch("notification/setFetched",!0))}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))}},computed:{user(){return this.$store.getters["user/user"]},notifications(){return this.$store.getters["notification/notifications"]},stockAlert(){return this.notifications["productStockAlert"]||[]},reportedConfirmations(){return this.notifications["reportedOrderAgente"]||[]},reportedDeliveries(){return this.notifications["reportedOrderDelivery"]||[]}},mounted(){this.getNotifications()}};const Le=(0,d.Z)(Ue,[["render",De]]);var Pe=Le;const Ae={class:"tw-relative"},We={key:0,class:"tw-absolute tw-border-2 tw-border-solid tw-border-white tw-top-1 tw-right-1 tw-w-3 tw-h-3 tw-rounded-full tw-bg-red-500"},$e={key:0,class:"!tw-duration-100"},Ee={class:"tw-absolute tw-text-sm tw-bg-white tw-border tw-border-solid tw-border-neutral-200 tw-rounded-md tw-bordesr !tw-shadow-lg !tw-shadow-gray-400/10 tw-top-14 tw-right-0 tw-w-[230px] tw-min-h-[50px]"},Oe=(0,r._)("p",{class:"tw-p-2 tw-text-sm"},"Notifications",-1),Te={key:0},Ve={class:"tw-py-10 tw-flex tw-items-center tw-justify-center"},qe={key:1},Re=(0,r._)("p",{class:""},"Confirmation Reported",-1),Ie=(0,r._)("p",{class:""},"Delivery Reported",-1);function Fe(t,e,a,s,i,o){const l=(0,r.up)("router-link");return(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",Ae,[(0,r.Wm)(X.T,{onClick:o.toggleMenu,icon:"",width:"35",height:"35",class:"tw-relative"},{default:(0,r.w5)((()=>[(0,r.Wm)(Qt.f,{width:"22",height:"22",src:i.localUrl+"assets/img/icons/notification-bing.svg"},null,8,["src"]),o.reportedDeliveries.length||o.reportedConfirmations.length?((0,r.wg)(),(0,r.iD)("div",We)):(0,r.kq)("",!0)])),_:1},8,["onClick"]),(0,r.Wm)(Pt.Z5,null,{default:(0,r.w5)((()=>[i.isActive?((0,r.wg)(),(0,r.iD)("div",$e,[(0,r._)("div",Ee,[Oe,i.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",Te,[(0,r._)("div",Ve,[(0,r.Wm)(et.t,{size:"large",class:"tw-animate-spin",color:"primary-color"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-loading")])),_:1})])])),i.isLoaded?((0,r.wg)(),(0,r.iD)("div",qe,["agente"==o.user.role?((0,r.wg)(),(0,r.j4)(l,{key:0,to:"/orders",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-autorenew")])),_:1}),(0,r._)("div",null,[Re,(0,r._)("p",{class:(0,J.C_)([[o.reportedConfirmations.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,J.zw)(o.reportedConfirmations.length)+" today",3)])])),_:1})):(0,r.kq)("",!0),"delivery"==o.user.role?((0,r.wg)(),(0,r.j4)(l,{key:1,to:"/deliveries",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-autorenew")])),_:1}),(0,r._)("div",null,[Ie,(0,r._)("p",{class:(0,J.C_)([[o.reportedConfirmations.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,J.zw)(o.reportedConfirmations.length)+" today",3)])])),_:1})):(0,r.kq)("",!0)])):(0,r.kq)("",!0)])])):(0,r.kq)("",!0)])),_:1})])),[[Gt.L,o.closeMenu]])}var je={data(){return{localUrl:F,isActive:!1,isLoaded:!1}},methods:{toggleMenu(){this.isActive=!this.isActive},closeMenu(){this.isActive=!1},getAgenteNotifications(){ze.agente().then((t=>{"SUCCESS"==t.data.code&&(console.log("success"),this.$store.dispatch("notification/setNotifications",t.data.data),this.$store.dispatch("notification/setFetched",!0))}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))},getDeliveryNotifications(){ze.delivery().then((t=>{"SUCCESS"==t.data.code&&(console.log("success"),this.$store.dispatch("notification/setNotifications",t.data.data),this.$store.dispatch("notification/setFetched",!0))}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))}},computed:{user(){return this.$store.getters["user/user"]},notifications(){return this.$store.getters["notification/notifications"]},stockAlert(){return this.notifications["productStockAlert"]||[]},reportedConfirmations(){return this.notifications["reportedOrderAgente"]||[]},reportedDeliveries(){return this.notifications["reportedOrderDelivery"]||[]}},mounted(){"agente"==this.user.role&&this.getAgenteNotifications(),"delivery"==this.user.role&&this.getDeliveryNotifications()}};const Ne=(0,d.Z)(je,[["render",Fe]]);var Me=Ne,He={components:{AdminNotification:Pe,UserNotification:Me},computed:{user(){return this.$store.getters["user/user"]}}};const Ye=(0,d.Z)(He,[["render",pe]]);var Ke=Ye,Ze={emits:["toggleSidebar"],components:{HeaderMenu:ue,Notification:Ke},data(){return{localUrl:F}},computed:{},methods:{handleClick(){this.$emit("toggleSidebar")}}};const Be=(0,d.Z)(Ze,[["render",Kt]]);var Qe=Be,Ge=a(9457),Je=a(2329),Xe=a(9657);function ta(t,e,a,s,i,o){const l=(0,r.up)("SidebarItem");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(Xe.V,{modelValue:i.drawer,"onUpdate:modelValue":e[0]||(e[0]=t=>i.drawer=t),location:"left",absolute:!1,class:"!tw-top-0 !tw-fixed"},{default:(0,r.w5)((()=>[(0,r.Wm)(Ge.l,{class:"tw-py-3"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r.Wm)(Qt.f,{width:"140",src:i.localUrl+"assets/img/logo.png"},null,8,["src"])])])),_:1}),(0,r.Wm)(Je.i,{class:"mt-2",nav:""},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.links,(t=>((0,r.wg)(),(0,r.j4)(l,{key:t.id,link:t},null,8,["link"])))),128))])),_:1})])),_:1},8,["modelValue"])])}const ea=[4,6,7],aa=[{id:1,title:"Dashboard",module:"dashboard",to:"/",hasChildren:!1,gate:"all",icon:{type:"svg",value:"assets/img/icons/dashboard.svg"}},{id:2,module:"product",title:"Product",hasChildren:!0,gate:"access_to_products",icon:{type:"svg",value:"assets/img/icons/product.svg"},children:[{id:1,title:"Products List",subModule:"product/list",gate:"show_all_products",to:"/products"},{id:2,title:"Add Product",subModule:"product/add",gate:"create_product",to:"/products/add"}]},{id:3,module:"track",title:"Tracking",hasChildren:!0,gate:"none",icon:{type:"icon",value:"mdi-radar"},children:[{id:1,title:"Deliveries",subModule:"track/delivery",gate:"none",to:"/tracking/delivery"}]},{id:4,module:"sale",title:"Sales",hasChildren:!0,gate:"access_to_sales",icon:{type:"icon",value:"mdi-sale"},children:[{id:1,title:"Sales list",subModule:"sale/list",gate:"show_all_sales",to:"/sales"},{id:2,title:"Expidation",subModule:"sale/expidation",gate:"show_all_expidations",to:"/sales/expidation"},{id:3,title:"Shipping",subModule:"sale/shipping",gate:"show_all_expidations",to:"/sales/shipping"}]},{id:5,module:"factorisation",title:"Factorisation",hasChildren:!0,gate:"access_to_factorisations",icon:{type:"icon",value:"mdi-note-multiple"},children:[{id:1,title:"Factorisation list",subModule:"factorisation/list",gate:"show_all_factorisations",to:"/factorisations"}]},{id:6,module:"order",title:"Orders",hasChildren:!0,gate:"access_to_orders",icon:{type:"icon",value:"mdi-barcode-scan"},children:[{id:1,title:"Order",subModule:"order/show",gate:"show_all_orders",to:"/order"},{id:2,title:"My Orders",subModule:"order/list",gate:"show_all_orders",to:"/orders"},{id:3,title:"Confirmed Orders",subModule:"order/confirmed",gate:"show_all_orders",to:"/orders/confirmed"}]},{id:7,module:"delivery",title:"Orders",hasChildren:!0,gate:"access_to_delivery",icon:{type:"icon",value:"mdi-bike"},children:[{id:1,title:"Orders List",subModule:"delivery/list",gate:"show_all_deliveries",to:"/deliveries"},{id:2,title:"Orders Delivered",subModule:"delivery/delivered",gate:"show_all_deliveries",to:"/delivered"}]},{id:8,module:"inventory",title:"Inventory",hasChildren:!0,gate:"access_to_inventory",icon:{type:"icon",value:"mdi-warehouse"},children:[{id:1,title:"Inventory State",gate:"show_all_inventory_states",subModule:"inventory/state",to:"/inventories"},{id:2,title:"Inventory Movements",gate:"show_all_inventory_movements",subModule:"inventory/movements",to:"/inventories/movements"},{id:4,title:"Add Movement",gate:"create_inventory_movement",subModule:"inventory/add",to:"/inventories/add"}]},{id:9,module:"shop",title:"Shop",hasChildren:!0,gate:"access_to_shop",icon:{type:"icon",value:"mdi-store"},children:[{id:1,title:"Shop List",gate:"show_all_shops",subModule:"shop/list",to:"/shops"},{id:2,title:"Add Shop",gate:"create_shop",subModule:"shop/add",to:"/shops/add"}]},{id:10,module:"warehouse",title:"Warehouses",hasChildren:!0,gate:"access_to_warehouse",icon:{type:"icon",value:"mdi-home-group"},children:[{id:1,title:"Warehouses list",subModule:"warehouse/list",gate:"show_all_warehouses",to:"/warehouses"}]},{id:11,title:"Users",module:"user",gate:"access_to_users",hasChildren:!0,icon:{type:"svg",value:"assets/img/icons/users1.svg"},children:[{id:1,title:"Users List",subModule:"user/list",gate:"show_all_users",to:"/users"},{id:2,title:"Add User",subModule:"user/add",gate:"create_user",to:"/users/add"},{id:3,title:"Roles List",subModule:"user/roles",gate:"show_all_roles",to:"/users/roles"},{id:4,title:"Add Role",subModule:"user/addRole",gate:"create_role",to:"/users/addRole"}]},{id:15,title:"Sheets",module:"sheets",to:"/sheets",gate:"access_to_sheets",hasChildren:!1,icon:{type:"icon",value:"mdi-note-text-outline"}},{id:12,title:"Settings",module:"settings",to:"/settings",gate:"access_to_account",hasChildren:!1,icon:{type:"svg",value:"assets/img/icons/settings.svg"}}];var sa=a(9234),ra=a(2127);const ia={key:0},oa={class:"d-flex align-center"},la={class:"tw-rounded-md tw-bg-gray-50"},na={class:"tw-h-full py-2"},da={key:1},wa={key:2},ca={key:3};function ua(t,e,a,s,i,o){const l=(0,r.up)("SidebarSales"),n=(0,r.up)("SidebarDelivery"),d=(0,r.up)("SidebarAgente");return(0,r.wg)(),(0,r.iD)("div",null,[!t.$can(a.link.gate)&&"all"!=a.link.gate||i.disabled_links.includes(a.link.id)?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",ia,[(0,r.Wm)(Ge.l,{class:(0,J.C_)(["mx-3 mb-2",{"bg-secondary-color":i.isActive}]),onClick:e[0]||(e[0]=t=>o.handleClick()),density:"comfortable",active:!1,ripple:!1,to:a.link.hasChildren?"":a.link.to,link:""},{default:(0,r.w5)((()=>[(0,r._)("div",oa,["icon"==a.link.icon.type?((0,r.wg)(),(0,r.j4)(et.t,{key:0,icon:a.link.icon.value,color:i.isActive?"white":"grey-darken-2",class:"mr-2",size:"small"},null,8,["icon","color"])):(0,r.kq)("",!0),"svg"==a.link.icon.type?((0,r.wg)(),(0,r.j4)(Qt.f,{key:1,src:i.localUrl+a.link.icon.value,"max-width":"18",class:(0,J.C_)([{active:i.isActive},"mr-2 tw-fill-white"]),size:"small"},null,8,["src","class"])):(0,r.kq)("",!0),(0,r.Wm)(ra.V,{class:(0,J.C_)(["text-body-2 font-weight-regular",{"text-white":i.isActive}]),textContent:(0,J.zw)(a.link.title)},null,8,["class","textContent"]),(0,r.Wm)(sa.C),a.link.hasChildren?((0,r.wg)(),(0,r.j4)(et.t,{key:2,class:(0,J.C_)(["item-icon",{activeRotate:i.isActive}]),icon:"mdi-chevron-right"},null,8,["class"])):(0,r.kq)("",!0)])])),_:1},8,["class","to"]),a.link.hasChildren?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,J.C_)([{"!tw-max-h-[1000px] mb-2 mt-n3":i.isActive},"tw-max-h-0 tw-w-auto mx-3 tw-overflow-hidden tw-duration-300"])},[(0,r._)("div",la,[(0,r.Wm)(Je.i,{density:"compact"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.allowedChildren,(t=>((0,r.wg)(),(0,r.j4)(Ge.l,{key:t.id,link:"",exact:"",active:!1,to:t.to,height:"10",class:"!tw-h-fit !tw-py-0"},{default:(0,r.w5)((()=>[(0,r._)("div",na,[(0,r.Wm)(et.t,{size:"x-small",class:"mr-2",color:o.isSublinkActive(t)?"primary-color":"secondary-color",icon:o.isSublinkActive(t)?"mdi-chevron-double-right":"mdi-circle-medium"},null,8,["color","icon"]),(0,r._)("span",{class:(0,J.C_)(["tw-text-sm",{"text-primary-color":o.isSublinkActive(t)}])},(0,J.zw)(t.title),3)])])),_:2},1032,["to"])))),128))])),_:1})])],2)):(0,r.kq)("",!0)])),4==a.link.id?((0,r.wg)(),(0,r.iD)("div",da,[(0,r.Wm)(l)])):(0,r.kq)("",!0),7==a.link.id?((0,r.wg)(),(0,r.iD)("div",wa,[(0,r.Wm)(n)])):(0,r.kq)("",!0),8==a.link.id?((0,r.wg)(),(0,r.iD)("div",ca,[(0,r.Wm)(d)])):(0,r.kq)("",!0)])}const pa={key:0},ma={class:"d-flex align-center"},ha={class:"tw-w-fit tw-h-[24px] tw-flex tw-items-center tw-justify-center tw-px-1 tw-bg-orange-500 tw-text-sm tw-text-white tw-rounded tw-ml-2"},ga={key:1,class:"tw-text-xs"},fa={class:"tw-rounded-md tw-bg-gray-50"},va={class:"tw-h-full py-2"};function ya(t,e,a,s,i,o){return t.$can(i.link.gate)||"all"==i.link.gate?((0,r.wg)(),(0,r.iD)("div",pa,[(0,r.Wm)(Ge.l,{class:(0,J.C_)(["mx-3 mb-2",{"bg-secondary-color":i.isActive}]),onClick:e[0]||(e[0]=t=>o.handleClick()),density:"comfortable",active:!1,ripple:!1,to:i.link.hasChildren?"":i.link.to,link:""},{default:(0,r.w5)((()=>[(0,r._)("div",ma,["icon"==i.link.icon.type?((0,r.wg)(),(0,r.j4)(et.t,{key:0,icon:i.link.icon.value,color:i.isActive?"white":"grey-darken-2",class:"mr-2",size:"small"},null,8,["icon","color"])):(0,r.kq)("",!0),"svg"==i.link.icon.type?((0,r.wg)(),(0,r.j4)(Qt.f,{key:1,src:i.localUrl+i.link.icon.value,"max-width":"18",class:(0,J.C_)([{active:i.isActive},"mr-2 tw-fill-white"]),size:"small"},null,8,["src","class"])):(0,r.kq)("",!0),(0,r.Wm)(ra.V,{class:(0,J.C_)(["text-body-2 font-weight-regular",{"text-white":i.isActive}]),textContent:(0,J.zw)(i.link.title)},null,8,["class","textContent"]),(0,r._)("div",ha,[i.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(et.t,{key:0,color:"white",class:"tw-animate-spin",size:"x-small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-loading")])),_:1})),i.isLoaded?((0,r.wg)(),(0,r.iD)("p",ga,(0,J.zw)(o.sales.length),1)):(0,r.kq)("",!0)]),(0,r.Wm)(sa.C),i.link.hasChildren?((0,r.wg)(),(0,r.j4)(et.t,{key:2,class:(0,J.C_)(["item-icon",{activeRotate:i.isActive}]),icon:"mdi-chevron-right"},null,8,["class"])):(0,r.kq)("",!0)])])),_:1},8,["class","to"]),i.link.hasChildren?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,J.C_)([{"!tw-max-h-[1000px] mb-2 mt-n3":i.isActive},"tw-max-h-0 tw-w-auto mx-3 tw-overflow-hidden tw-duration-300"])},[(0,r._)("div",fa,[(0,r.Wm)(Je.i,{density:"compact"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.allowedChildren,(t=>((0,r.wg)(),(0,r.j4)(Ge.l,{key:t.id,link:"",exact:"",active:!1,to:t.to,height:"10",class:"!tw-h-fit !tw-py-0"},{default:(0,r.w5)((()=>[(0,r._)("div",va,[(0,r.Wm)(et.t,{size:"x-small",class:"mr-2",color:o.isSublinkActive(t)?"primary-color":"secondary-color",icon:o.isSublinkActive(t)?"mdi-chevron-double-right":"mdi-circle-medium"},null,8,["color","icon"]),(0,r._)("span",{class:(0,J.C_)(["tw-text-sm",{"text-primary-color":o.isSublinkActive(t)}])},(0,J.zw)(t.title),3)])])),_:2},1032,["to"])))),128))])),_:1})])],2)):(0,r.kq)("",!0)])):(0,r.kq)("",!0)}class _a{async all(){return await Z.getCookie(),Y.get("api/sales")}async delete(t){return await Z.getCookie(),Y.get("api/sales/delete/"+t)}async update(t,e){return await Z.getCookie(),Y.post("api/orders/update/"+t,e)}async create(t){return await Z.getCookie(),Y.post("api/sales/new",t)}async getNewOrders(t){return await Z.getCookie(),Y.post("api/sales/fresh",{ids:t})}async agenteOrders(){return await Z.getCookie(),Y.get("api/orders")}async agenteConfirmedOrders(){return await Z.getCookie(),Y.get("api/orders/confirmer")}async agenteAddOrder(){return await Z.getCookie(),Y.get("api/orders/add")}async agenteGetOrder(){return await Z.getCookie(),Y.get("api/orders/toconfirmate")}async agenteUpdateConfirmation(t,e,a={}){return await Z.getCookie(),Y.post("api/orders/update/confirmation/"+t,{confirmation:e,...a})}async agenteUpdateConfirmationWithNote(t,e,a){return await Z.getCookie(),Y.post("api/orders/update/confirmationandnote/"+t,{confirmation:e,note:a})}async agenteUpdateUpsell(t,e){return await Z.getCookie(),Y.post("api/orders/update/upsell/"+t,{upsell:e})}async agenteUpdateAffectaion(t,e){return await Z.getCookie(),Y.post("api/orders/update/affectation/"+t,{affectation:e})}async agenteUpdateNote(t,e){return await Z.getCookie(),Y.post("api/orders/update/note/"+t,{note:e})}async deliveryOrders(){return await Z.getCookie(),Y.get("api/orders/todelivery")}async deliveryDeliveredOrders(){return await Z.getCookie(),Y.get("api/orders/delivred")}async deliveryUpdateDelivery(t,e,a){return await Z.getCookie(),Y.post("api/orders/update/delivery/"+t,{delivery:e,...a})}async history(t){return await Z.getCookie(),Y.get("api/orders/history/show/"+t)}async resetSale(t){return await Z.getCookie(),Y.post("api/sales/reset",{ids:t})}async scanSale(t){return await Z.getCookie(),Y.post("api/sales/scan",t)}async availableOrders(){return await Z.getCookie(),Y.get("api/orders/count")}}var xa=new _a,ba={props:[],data(){return{localUrl:F,isActive:!1,isLoaded:!1,link:{id:4,module:"sale",title:"Sales",hasChildren:!0,gate:"access_to_sales",icon:{type:"icon",value:"mdi-sale"},children:[{id:1,title:"Sales list",subModule:"sale/list",gate:"show_all_sales",to:"/sales"},{id:2,title:"Expidation",subModule:"sale/expidation",gate:"show_all_expidations",to:"/sales/expidation"},{id:3,title:"Shipping",subModule:"sale/shipping",gate:"show_all_expidations",to:"/sales/shipping"}]}}},methods:{handleClick(){this.$route.path!==this.link.to?this.isActive=!this.isActive:this.isActive=!0},isSublinkActive(t){return this.$route.path==t.to},isLinkActive(){return this.link.hasChildren?this.link.module==this.$route.meta.module:this.link.to===this.$route.path},getSales(){return this.isLoaded=!1,xa.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)}},computed:{allowedChildren(){return this.link?.children.filter((t=>this.$can(t.gate)||"all"===t.gate))},sales(){return this.$store.getters["sale/sales"]}},watch:{$route(){this.isActive=this.isLinkActive()}},mounted(){this.isActive=this.isLinkActive(),this.$can(this.link.gate)&&this.getSales()}};const ka=(0,d.Z)(ba,[["render",ya],["__scopeId","data-v-3ced7c70"]]);var Ca=ka;const Da={key:0},Sa={class:"d-flex align-center"},za={class:"tw-w-fit tw-h-[24px] tw-flex tw-items-center tw-justify-center tw-px-1 tw-bg-orange-500 tw-text-sm tw-text-white tw-rounded tw-ml-2"},Ua={key:1,class:"tw-text-xs"};function La(t,e,a,s,i,o){return t.$can(i.link.gate)||"all"==i.link.gate?((0,r.wg)(),(0,r.iD)("div",Da,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.link.children,(a=>((0,r.wg)(),(0,r.j4)(Ge.l,{class:(0,J.C_)(["mx-3 mb-2",{"bg-secondary-color":t.$route.path==a.to}]),onClick:e[0]||(e[0]=t=>o.handleClick()),density:"comfortable",active:!1,ripple:!1,to:a.to,link:"",key:a.id},{default:(0,r.w5)((()=>[(0,r._)("div",Sa,[(0,r.Wm)(et.t,{icon:a.icon,color:t.$route.path==a.to?"white":"grey-darken-2",class:"mr-2",size:"small"},null,8,["icon","color"]),(0,r.Wm)(ra.V,{class:(0,J.C_)(["text-body-2 font-weight-regular",{"text-white":t.$route.path==a.to}]),textContent:(0,J.zw)(a.title)},null,8,["class","textContent"]),(0,r.Wm)(sa.C),(0,r._)("div",za,[o.fetched?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(et.t,{key:0,color:"white",class:"tw-animate-spin",size:"x-small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-loading")])),_:1})),o.fetched?((0,r.wg)(),(0,r.iD)("p",Ua,(0,J.zw)(1==a.id?o.orders.length-o.deliveredOrders.length:o.deliveredOrders.length),1)):(0,r.kq)("",!0)])])])),_:2},1032,["class","to"])))),128))])):(0,r.kq)("",!0)}class Pa{async delivery(){return await Z.getCookie(),Y.get("api/dashboard/delivery")}async agente(){return await Z.getCookie(),Y.get("api/dashboard/agente")}}var Aa=new Pa,Wa={props:[],data(){return{localUrl:F,isActive:!1,isLoaded:!1,link:{id:7,module:"delivery",title:"Orders",hasChildren:!1,gate:"access_to_delivery",icon:{type:"icon",value:"mdi-bike"},children:[{id:1,title:"Orders",subModule:"delivery/list",gate:"show_all_deliveries",to:"/deliveries",icon:"mdi-truck"},{id:2,title:"Delivered Orders",subModule:"delivery/delivered",gate:"show_all_deliveries",to:"/delivered",icon:"mdi-truck-check"}]}}},methods:{handleClick(){this.$route.path!==this.link.to?this.isActive=!this.isActive:this.isActive=!0},isSublinkActive(t){return this.$route.path==t.to},isLinkActive(){return this.link.hasChildren?this.link.module==this.$route.meta.module:this.link.to===this.$route.path},getOrders(){return this.isLoaded=!1,Aa.delivery().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("order/setAllOrders",e),this.$store.dispatch("order/setFetched",!0),this.isLoaded=!0}console.log(t)})).catch(this.$handleApiError)}},computed:{allowedChildren(){return this.link?.children.filter((t=>this.$can(t.gate)||"all"===t.gate))},orders(){return this.$store.getters["order/allOrders"].filter((t=>"confirmer"==t.confirmation))},deliveredOrders(){return this.orders.filter((t=>"livrer"==t.delivery))},fetched(){return this.$store.getters["order/fetched"]}},watch:{$route(){this.isActive=this.isLinkActive()}},mounted(){this.isActive=this.isLinkActive(),this.$can(this.link.gate)&&this.getOrders()}};const $a=(0,d.Z)(Wa,[["render",La],["__scopeId","data-v-69fa82e9"]]);var Ea=$a;const Oa={key:0},Ta={class:"d-flex align-center"},Va={key:0,class:"tw-w-fit tw-h-[24px] tw-flex tw-items-center tw-justify-center tw-px-1 tw-bg-orange-500 tw-text-sm tw-text-white tw-rounded tw-ml-2"},qa={key:1,class:"tw-text-xs"},Ra={key:1,class:"tw-w-fit tw-h-[24px] tw-flex tw-items-center tw-justify-center tw-px-1 tw-bg-orange-500 tw-text-sm tw-text-white tw-rounded tw-ml-2"},Ia={key:1,class:"tw-text-xs"};function Fa(t,e,a,s,i,o){return t.$can(i.link.gate)||"all"==i.link.gate?((0,r.wg)(),(0,r.iD)("div",Oa,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.link.children,(a=>((0,r.wg)(),(0,r.j4)(Ge.l,{class:(0,J.C_)(["mx-3 mb-2",{"bg-secondary-color":t.$route.path==a.to}]),onClick:e[0]||(e[0]=t=>o.handleClick()),density:"comfortable",active:!1,ripple:!1,to:a.to,link:"",key:a.id},{default:(0,r.w5)((()=>[(0,r._)("div",Ta,[(0,r.Wm)(et.t,{icon:a.icon,color:t.$route.path==a.to?"white":"grey-darken-2",class:"mr-2",size:"small"},null,8,["icon","color"]),(0,r.Wm)(ra.V,{class:(0,J.C_)(["text-body-2 font-weight-regular",{"text-white":t.$route.path==a.to}]),textContent:(0,J.zw)(a.title)},null,8,["class","textContent"]),(0,r.Wm)(sa.C),1!=a.id?((0,r.wg)(),(0,r.iD)("div",Va,[o.state.fetched?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(et.t,{key:0,color:"white",class:"tw-animate-spin",size:"x-small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-loading")])),_:1})),o.state.fetched?((0,r.wg)(),(0,r.iD)("p",qa,(0,J.zw)(4==a.id?o.state.totalNotConfirmed:o.state.totalConfirmed),1)):(0,r.kq)("",!0)])):(0,r.kq)("",!0),1==a.id?((0,r.wg)(),(0,r.iD)("div",Ra,[o.state.fetched?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(et.t,{key:0,color:"white",class:"tw-animate-spin",size:"x-small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-loading")])),_:1})),o.state.fetched?((0,r.wg)(),(0,r.iD)("p",Ia,(0,J.zw)(o.state.totalAvailable),1)):(0,r.kq)("",!0)])):(0,r.kq)("",!0)])])),_:2},1032,["class","to"])))),128))])):(0,r.kq)("",!0)}var ja={props:[],data(){return{localUrl:F,isActive:!1,isLoaded:!1,link:{id:6,module:"order",title:"Orders",hasChildren:!0,gate:"access_to_orders",icon:{type:"icon",value:"mdi-barcode-scan"},children:[{id:1,title:"Add Order",subModule:"agent/orders/add",gate:"show_all_orders",to:"/agent/orders/add",icon:"mdi-plus-box"},{id:4,title:"Orders",subModule:"agent/orders",gate:"show_all_orders",to:"/agent/orders",icon:"mdi-package-variant-closed"},{id:5,title:"Confirmed Orders",subModule:"agent/orders/confirmed",gate:"show_all_orders",to:"/agent/orders/confirmed",icon:"mdi-checkbox-marked"}]}}},methods:{handleClick(){this.$route.path!==this.link.to?this.isActive=!this.isActive:this.isActive=!0},isSublinkActive(t){return this.$route.path==t.to},isLinkActive(){return this.link.hasChildren?this.link.module==this.$route.meta.module:this.link.to===this.$route.path}},computed:{allowedChildren(){return this.link?.children.filter((t=>this.$can(t.gate)||"all"===t.gate))},state(){return this.$store.getters["agent/state"]},orders(){return this.$store.getters["order/allOrders"]},myOrders(){return this.orders.filter((t=>"confirmer"!=t.confirmation))},confirmedOrders(){return this.orders.filter((t=>"confirmer"==t.confirmation))},fetched(){return this.$store.getters["order/fetched"]}},watch:{$route(){this.isActive=this.isLinkActive()}},mounted(){this.isActive=this.isLinkActive()}};const Na=(0,d.Z)(ja,[["render",Fa],["__scopeId","data-v-6f8687a2"]]);var Ma=Na,Ha={props:["link"],components:{SidebarSales:Ca,SidebarDelivery:Ea,SidebarAgente:Ma},data(){return{localUrl:F,disabled_links:ea,isActive:!1}},methods:{handleClick(){this.$route.path!==this.link.to?this.isActive=!this.isActive:this.isActive=!0},isSublinkActive(t){return this.$route.path==t.to},isLinkActive(){return this.link.hasChildren?this.link.module==this.$route.meta.module:this.link.to===this.$route.path}},computed:{allowedChildren(){return this.link?.children.filter((t=>this.$can(t.gate)||"all"===t.gate))}},watch:{$route(){this.isActive=this.isLinkActive()}},mounted(){this.isActive=this.isLinkActive()}};const Ya=(0,d.Z)(Ha,[["render",ua],["__scopeId","data-v-35ca0437"]]);var Ka=Ya,Za={components:{SidebarItem:Ka},props:["active"],data(){return{localUrl:F,drawer:!0,links:aa}},computed:{},watch:{active(){this.drawer=!this.drawer}},methods:{},mounted(){this.$vuetify.display.mdAndDown&&(this.drawer=!1)}};const Ba=(0,d.Z)(Za,[["render",ta]]);var Qa=Ba,Ga=a(4410),Ja=a.n(Ga),Xa=a(6027);class ts{async all(){return await Z.getCookie(),Y.get("api/sheets")}async create(t){await Z.getCookie();const e={name:t.name,sheet_id:t.sheet_id,sheet_name:t.sheet_name,auto_fetch:t.auto_fetch};return Y.post("api/sheets",e)}async update(t,e){await Z.getCookie();const a={name:e.name,sheet_id:e.sheet_id,sheet_name:e.sheet_name,auto_fetch:e.auto_fetch};return Y.post("api/sheets/"+t,a)}async delete(t){return await Z.getCookie(),Y["delete"]("api/sheets/"+t)}async updateAutoFetch(t,e){return await Z.getCookie(),Y.post("api/sheets/"+t+"/auto-fetch",{autoFetch:e})}async sync(t){return await Z.getCookie(),Y.get("api/sync/"+t)}async sync_all(){return await Z.getCookie(),Y.get("api/sync")}async auto(){return await Z.getCookie(),Y.post("api/sync")}async saveOrders(t){return await Z.getCookie(),Y.get("api/sync/"+t+"/save")}}var es=new ts;class as{async create(t){await Z.getCookie();const e=new FormData;return e.append("name",t.name),e.append("buying_price",t.buyingPrice),e.append("selling_price",t.sellingPrice),e.append("ref",t.reference),e.append("variations",JSON.stringify(t.variants)),e.append("offers",JSON.stringify(t.offers)),e.append("description",t.description),e.append("image",t.image),e.append("deliveries",JSON.stringify(t.selectedDeliveries)),e.append("status",1),H.post("api/products/new",e)}async update(t,e){await Z.getCookie();const a=new FormData;return a.append("name",e.name),a.append("buying_price",e.buyingPrice),a.append("selling_price",e.sellingPrice),a.append("ref",e.reference),a.append("variations",JSON.stringify(e.variants)),a.append("offers",JSON.stringify(e.offers)),a.append("description",e.description),a.append("image",e.image),a.append("deliveries",JSON.stringify(e.selectedDeliveries)),a.append("status",1),H.post("api/products/update/"+t,a)}async all(){return await Z.getCookie(),Y.get("api/products")}async allForOrder(){return await Z.getCookie(),Y.get("api/products/for-order")}async getProduct(t){return await Z.getCookie(),Y.get("api/products/"+t)}async delete(t){return await Z.getCookie(),Y["delete"]("api/products/delete/"+t)}async stockAlert(){return await Z.getCookie(),Y.get("api/product/stockAlert")}}var ss=new as;class rs{async statistics(){return await Z.getCookie(),Y.post("api/v1/agent/statistics")}async paginate(t="/",e){return await Z.getCookie(),Y.post("api/v1/agent/orders"+t,e)}async counts(){return await Z.getCookie(),Y.get("api/v1/agent/orders/counts")}async update(t,e){return await Z.getCookie(),Y.post("api/v1/agent/orders/"+t+"/update",e)}async toConfirm(){return await Z.getCookie(),Y.get("api/orders/toconfirmate")}async getOrder(){return await Z.getCookie(),Y.get("api/orders/add")}}var is=new rs,os={components:{AppHeader:Qe,AppSidebar:Qa,Alert:Tt},data(){return{drawer:!1,subscribed:!1,fetching:null,delay:6e4,showScrollUpButton:!1}},computed:{isLoggedIn(){return this.$store.getters["user/isLoggedIn"]},cities(){return this.$store.getters["city/cities"]},user(){return this.$store.getters["user/user"]},sales(){return this.$store.getters["sale/sales"]},salesFetched(){return this.$store.getters["sale/fetched"]}},methods:{toggleSidebar(){this.drawer=!this.drawer},checkScroll(){this.showScrollUpButton=window.scrollY>100},scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})},async getCities(){if(0==this.cities.length||1!=localStorage.getItem("update_cities"))return Q.cities().then((t=>{const e=t.data.data;this.$store.dispatch("city/setCities",e),localStorage.setItem("update_cities",1)}))},subscribe(){console.log(Ja());const t=new Xa.Z({broadcaster:"pusher",key:"ABCDEFG",wsHost:"127.0.0.1",wsPort:6001,forceTLS:!1,disableStats:!0,cluster:"mt1"});window.Echo=t,t.channel("notification").listenToAll((t=>{console.log(t)})),this.subscribed=!0},sync_sheets(){"admin"==this.user.role?es.sync_all().then((t=>{if("SUCCESS"==t.data.code){const e=[...t.data.data.orders,...this.sales];this.$store.dispatch("sale/setSales",e),t.data.data.orders.length>0&&this.$alert({type:"info",title:t.data.data.orders.length+" New orders has been added"})}})):es.auto()},getUsers(){Q.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),this.$store.dispatch("user/setFetched",!0)}})).catch(this.$handleApiError)},getProducts(){return ss.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))},getAgentCounts(){return is.counts().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data;this.$store.dispatch("agent/setTotalConfirmed",e.confirmed),this.$store.dispatch("agent/setTotalNotConfirmed",e.not_confirmed),this.$store.dispatch("agent/setTotalAvailable",e.available),this.$store.dispatch("agent/setFetched",!0)}})).catch(this.$handleApiError)},fetchNewOrders(){if(this.salesFetched){const t=this.sales.map((t=>t.id));xa.getNewOrders(t).then((t=>{if("SUCCESS"==t.data.code){const e=t.data.data.orders;e.length>0&&(this.$store.dispatch("sale/addSales",e),this.$alert({type:"info",title:e.length+" New orders has been added"}))}}))}}},mounted(){this.getCities(),"admin"==this.user.role&&(this.fetching=setInterval(this.fetchNewOrders,this.delay)),console.log(this.user),console.log("agente"==this.user.role),"agente"==this.user.role&&(this.fetching=setInterval(this.getAgentCounts,this.delay),this.getAgentCounts()),this.$can("show_all_products")&&"admin"==this.user.role&&this.getProducts(),"admin"==this.user.role&&this.getUsers(),window.addEventListener("scroll",this.checkScroll)},unmounted(){window.removeEventListener("scroll",this.checkScroll)}};const ls=(0,d.Z)(os,[["render",Nt]]);var ns=ls;function ds(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("div",null,[((0,r.wg)(),(0,r.j4)((0,r.LL)(o.dashboard)))])}var ws=a(6824),cs=a(8521);const us={key:0},ps={key:1},ms=(0,r._)("div",{class:"mb-2 mt-5 tw-flex tw-justify-between tw-items-center"},[(0,r._)("div",null,[(0,r._)("h2",{class:"tw-text-gray-500 tw-text-lg"},"Online")])],-1),hs={class:"py-2 px-2 tw-border bg-white tw-w-full tw-rounded"},gs={class:"mb-2 mt-2 tw-flex tw-justify-between tw-items-center tw-w-full"},fs={class:"tw-flex tw-items-center tw-justify-between tw-w-full"},vs=(0,r._)("h2",{class:"tw-text-gray-500 tw-text-lg"},"Statistiques",-1),ys=["disabled"],_s={key:0,class:"tw-flex tw-items-center tw-gap-2"},xs={key:1},bs=(0,r._)("svg",{"aria-hidden":"true",role:"status",class:"tw-inline tw-w-4 tw-h-4 tw-mr-3 tw-text-white tw-animate-spin",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,r._)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"#E5E7EB"}),(0,r._)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentColor"})],-1),ks={class:"px-5 tw-border bg-white tw-w-full tw-rounded-md"};function Cs(t,e,a,s,i,o){const l=(0,r.up)("LoadingAnimation"),n=(0,r.up)("UsersTable"),d=(0,r.up)("FilterTabs"),w=(0,r.up)("DashItem"),c=(0,r.up)("TabSwitcher");return(0,r.wg)(),(0,r.iD)("div",null,[o.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",us,[(0,r.Wm)(l)])),o.isLoaded?((0,r.wg)(),(0,r.iD)("div",ps,[ms,(0,r._)("div",hs,[(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{cols:"12",md:"12"},{default:(0,r.w5)((()=>[(0,r.Wm)(n)])),_:1})])),_:1})]),(0,r._)("div",gs,[(0,r._)("div",fs,[vs,(0,r._)("button",{disabled:i.updating,onClick:e[0]||(e[0]=(...t)=>o.updateSales&&o.updateSales(...t)),type:"button",class:"tw-text-white tw-w-fit tw-my-2 tw-bg-gradient-to-r tw-from-cyan-500 tw-to-blue-500 hover:tw-bg-gradient-to-bl focus:tw-ring-4 focus:tw-outline-none focus:tw-ring-cyan-300 dark:focus:tw-ring-cyan-800 tw-font-medium tw-rounded-lg tw-text-sm tw-px-5 tw-py-2.5 tw-text-center tw-mr-2 dark:tw-bg-blue-600 dark:hover:tw-bg-blue-700 tw-duration-200 tw-gap-2 tw-pointer-events-auto tw-inline-flex tw-items-center"},[i.updating?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",_s,[(0,r.Wm)(et.t,{class:"tw-text-sm",color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-autorenew")])),_:1}),(0,r.Uk)(" Refresh ")])),i.updating?((0,r.wg)(),(0,r.iD)("div",xs,[bs,(0,r.Uk)(" loading... ")])):(0,r.kq)("",!0)],8,ys)])]),(0,r._)("div",ks,[(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{cols:"12",md:"12"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{filters:i.filters,"onUpdate:filters":e[1]||(e[1]=t=>i.filters=t)},null,8,["filters"])])),_:1})])),_:1}),(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{cols:"12",sm:"6",md:"3"},{default:(0,r.w5)((()=>[(0,r.Wm)(w,{dash:o.dashChiffreAffairesConfirmer},null,8,["dash"])])),_:1}),(0,r.Wm)(cs.D,{cols:"12",sm:"6",md:"3"},{default:(0,r.w5)((()=>[(0,r.Wm)(w,{dash:o.dashChiffreAffairesDelivery},null,8,["dash"])])),_:1}),(0,r.Wm)(cs.D,{cols:"12",sm:"6",md:"3"},{default:(0,r.w5)((()=>[(0,r.Wm)(w,{dash:o.dashChiffreAffairesVerse},null,8,["dash"])])),_:1}),(0,r.Wm)(cs.D,{cols:"12",sm:"6",md:"3"},{default:(0,r.w5)((()=>[(0,r.Wm)(w,{dash:o.dashChiffreAffairesNonVerse},null,8,["dash"])])),_:1})])),_:1}),(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{cols:"12",md:"12"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{"filtered-sales":o.filteredSales},null,8,["filtered-sales"])])),_:1})])),_:1})])])):(0,r.kq)("",!0)])}var Ds=a(4286);const Ss={class:"tw-flex tw-items-center"},zs={class:"tw-flex tw-flex-col tw-h-full tw-text-neutral-600"},Us={class:"tw-text-lg tw-font-bold"},Ls={class:"tw-text-sm"};function Ps(t,e,a,s,i,o){return(0,r.wg)(),(0,r.j4)(Ds.C,{class:"tw-rounded-lg tw-border pa-5 py-2",color:"white",height:"fit"},{default:(0,r.w5)((()=>[(0,r._)("div",Ss,[(0,r._)("div",{class:(0,J.C_)([o.bgColor,"pa-3 rounded-circle tw-w-fit tw-mr-3"])},[(0,r.Wm)(et.t,{color:a.dash.color,size:"large",icon:a.dash.icon},null,8,["color","icon"])],2),(0,r._)("div",zs,[(0,r._)("p",Us,(0,J.zw)(a.dash.value),1),(0,r.Wm)(sa.C),(0,r._)("p",Ls,(0,J.zw)(a.dash.title),1)])])])),_:1})}var As={props:["dash"],computed:{bgColor(){const t={orange:"tw-bg-orange-500/10",green:"tw-bg-green-500/10",blue:"tw-bg-blue-500/10",pink:"tw-bg-pink-500/10",red:"tw-bg-red-500/10",yellow:"tw-bg-yellow-500/10"};return t[this.dash.color]}}};const Ws=(0,d.Z)(As,[["render",Ps]]);var $s=Ws;const Es={key:0,class:""},Os={class:"tw-flex tw-items-center tw-flex-wrap tw-gap-2"},Ts=(0,r._)("div",{class:"tw-w-[120px] tw-h-[55px] tw-bg-neutral-300/10 tw-animate-pulse tw-rounded tw-border tw-grid tw-grid-cols-12"},null,-1),Vs=[Ts],qs={key:1,class:"tw-min-h-[50px]"},Rs={class:"tw-flex tw-items-center tw-flex-wrap tw-gap-2"},Is={class:"py-2 px-3 tw-rounded tw-border tw-grid tw-grid-cols-12"},Fs={class:"tw-col-span-12 tw-font-medium tw-capitalize tw-text-sm tw-text-neutral-600 tw-whitespace-nowrap"},js={class:"tw-col-span-12 tw-whitespace-nowrap tw-text-xs"},Ns={key:0,class:"tw-text-red-500 tw-flex tw-items-center tw-gap-2"},Ms=(0,r._)("div",{class:"tw-p-1 tw-rounded-full tw-bg-red-400"},null,-1),Hs={key:1},Ys={key:0,class:"tw-text-green-500 tw-flex tw-items-center tw-gap-2"},Ks=(0,r._)("div",{class:"tw-p-1 tw-rounded-full tw-bg-green-500"},null,-1),Zs={key:1,class:"tw-flex tw-items-center tw-gap-2"},Bs=(0,r._)("div",{class:"tw-p-1 tw-rounded-full tw-bg-yellow-400"},null,-1);function Qs(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("div",null,[i.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",Es,[(0,r._)("div",Os,[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(4,(t=>(0,r._)("div",{key:t},Vs))),64))])])),i.isLoaded?((0,r.wg)(),(0,r.iD)("div",qs,[(0,r._)("div",Rs,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.users,(t=>((0,r.wg)(),(0,r.iD)("div",{key:t.id},[(0,r._)("div",Is,[(0,r._)("div",Fs,(0,J.zw)(t.firstname)+" "+(0,J.zw)(t.lastname),1),(0,r._)("div",js,[t.last_action?((0,r.wg)(),(0,r.iD)("div",Hs,[1==o.isOnline(o.lastSeen(t.last_action))?((0,r.wg)(),(0,r.iD)("div",Ys,[Ks,(0,r.Uk)(" Online ")])):((0,r.wg)(),(0,r.iD)("div",Zs,[Bs,(0,r.Uk)(" "+(0,J.zw)(o.lastSeen(t.last_action)),1)]))])):((0,r.wg)(),(0,r.iD)("div",Ns,[Ms,(0,r.Uk)(" Never Connected ")]))])])])))),128))]),(0,r.kq)("",!0)])):(0,r.kq)("",!0)])}var Gs=a(8777),Js={components:{},data(){return{isLoaded:!1}},computed:{users(){return this.$store.getters["user/users"].filter((t=>"admin"!=t.role_name))}},methods:{getUsers(){Q.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),console.log(t),this.isLoaded=!0}})).catch(this.$handleApiError)},lastSeen(t){let e=Date.parse(t.replace("-","/"))/1e3;return(0,Gs.x)(e)},isOnline(t){let e=["Just Now","1 minute ago","2 minute ago"];return e.includes(t)}},mounted(){this.getUsers()}};const Xs=(0,d.Z)(Js,[["render",Qs]]);var tr=Xs,er=a(1489),ar=a(3144),sr=a(9870),rr=a(6161),ir=a(4722);function or(t,e,a,s,i,o){return(0,r.wg)(),(0,r.j4)(er._,{flat:""},{default:(0,r.w5)((()=>[(0,r.Wm)(ar.d,{modelValue:i.tab,"onUpdate:modelValue":e[0]||(e[0]=t=>i.tab=t),color:"primary-color","align-tabs":"start",density:"compact"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.tabs,(t=>((0,r.wg)(),(0,r.j4)(sr.L,{key:t.id,value:t.id},{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(t.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"]),(0,r.Wm)(rr.Oo,{class:"tw-mt-0",modelValue:i.tab,"onUpdate:modelValue":e[1]||(e[1]=t=>i.tab=t)},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.tabs,(t=>((0,r.wg)(),(0,r.j4)(ir.H,{key:t.id,value:t.id,transition:"fade-transition","reverse-transition":"fade-transition"},{default:(0,r.w5)((()=>[((0,r.wg)(),(0,r.j4)((0,r.LL)(t.component),{"filtered-sales":a.filteredSales},null,8,["filtered-sales"]))])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})}const lr={class:"tw-grid tw-mb-5 tw-grid-cols-4 md:tw-grid-cols-4 lg:tw-grid-cols-4 tw-gap-2 py-5"},nr={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},dr={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},wr={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},cr={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},ur={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},pr={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},mr={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"};function hr(t,e,a,s,i,o){const l=(0,r.up)("DashItemTwo");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",lr,[(0,r._)("div",nr,[(0,r.Wm)(l,{dash:o.totalSales},null,8,["dash"])]),(0,r._)("div",dr,[(0,r.Wm)(l,{dash:o.deliveredSales},null,8,["dash"])]),(0,r._)("div",wr,[(0,r.Wm)(l,{dash:o.shippedSales},null,8,["dash"])]),(0,r._)("div",cr,[(0,r.Wm)(l,{dash:o.reportedSales},null,8,["dash"])]),(0,r._)("div",ur,[(0,r.Wm)(l,{dash:o.noanswerSales},null,8,["dash"])]),(0,r._)("div",pr,[(0,r.Wm)(l,{dash:o.canceledSales},null,8,["dash"])]),(0,r._)("div",mr,[(0,r.Wm)(l,{dash:o.transferSales},null,8,["dash"])])])])}const gr={class:"tw-flex tw-justify-between tw-items-center tw-w-full tw-h-full pa-3 px-4"},fr={class:"tw-flex tw-flex-col tw-justify-center tw-w-full tw-h-full tw-text-white"},vr={class:"tw-text-xl tw-font-bold"},yr={class:"tw-flex tw-items-center tw-gap-1 tw-w-full tw-h-full tw-text-white"},_r={class:"tw-text-sm"},xr={class:"rounded-circle tw-w-fit tw-mr-3"};function br(t,e,a,s,i,o){const l=(0,r.up)("number");return(0,r.wg)(),(0,r.j4)(Ds.C,{class:"tw-rounded-lg",color:a.dash.color,height:"70"},{default:(0,r.w5)((()=>[(0,r._)("div",gr,[(0,r._)("div",fr,[(0,r._)("p",vr,(0,J.zw)(isNaN(a.dash.pourcentage)?"0.00%":a.dash.pourcentage)+" "+(0,J.zw)(a.symbol),1),(0,r._)("span",yr,[a.numbers?((0,r.wg)(),(0,r.j4)(l,{key:0,class:"tw-font-bold",ref:"number1",from:0,to:a.dash.value,duration:1,delay:0,easing:"Power.easeOut"},null,8,["to"])):(0,r.kq)("",!0),(0,r._)("p",_r,(0,J.zw)(a.dash.title),1)])]),(0,r._)("div",xr,[(0,r.Wm)(et.t,{color:"white",size:"large",class:"md:tw-scale-[1.8] tw-scale-[1.3]",icon:a.dash.icon},null,8,["icon"])])])])),_:1},8,["color"])}var kr={props:{dash:{required:!0},symbol:{required:!1,default:"%"},numbers:{required:!1,default:!0}}};const Cr=(0,d.Z)(kr,[["render",br]]);var Dr=Cr,Sr={components:{DashItemTwo:Dr},props:["filteredSales"],data(){return{isLoaded:!1}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},sales(){return this.filteredSales},totalSales(){return{id:1,title:"Total",value:this.sales.filter((t=>"confirmer"==t.confirmation)).length,pourcentage:100*this.sales.filter((t=>"confirmer"==t.confirmation)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length,color:"deep-purple-accent-2",icon:"mdi mdi-all-inclusive"}},deliveredSales(){return{id:2,title:"Delivered",value:this.sales.filter((t=>"livrer"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"livrer"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"primary-green",icon:"mdi-account-check-outline"}},toProcess(){return{id:3,title:"Process",value:this.sales.filter((t=>!!t.confirmation&&!["confirmer","livrer","expidier"].includes(t.delivery))).length,color:"primary-orange",icon:"mdi-reload"}},shippedSales(){return{id:4,title:"Shipped",value:this.sales.filter((t=>"expidier"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"expidier"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"primary-orange",icon:"mdi-truck"}},transferSales(){return{id:8,title:"Transferred",value:this.sales.filter((t=>"transfer"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"transfer"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"purple-darken-1",icon:"mdi-truck"}},reportedSales(){return{id:5,title:"Reported",value:this.sales.filter((t=>"reporter"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"reporter"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"primary-blue",icon:"mdi mdi-clock-outline"}},canceledSales(){return{id:6,title:"Canceled",value:this.sales.filter((t=>"annuler"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"annuler"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"red-accent-3",icon:"mdi mdi-cancel"}},noanswerSales(){return{id:6,title:"No Answer",value:this.sales.filter((t=>"pas-de-reponse"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"pas-de-reponse"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"yellow-darken-3",icon:"mdi mdi-headphones-off"}}},mounted(){xa.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;console.log(t.data),this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)}};const zr=(0,d.Z)(Sr,[["render",hr]]);var Ur=zr;const Lr={class:"tw-grid tw-mb-5 tw-grid-cols-4 md:tw-grid-cols-4 lg:tw-grid-cols-4 tw-gap-2 py-5"},Pr={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Ar={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Wr={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},$r={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Er={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Or={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Tr={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Vr={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"};function qr(t,e,a,s,i,o){const l=(0,r.up)("DashItemTwo");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",Lr,[(0,r._)("div",Pr,[(0,r.Wm)(l,{dash:o.totalSales},null,8,["dash"])]),(0,r._)("div",Ar,[(0,r.Wm)(l,{dash:o.confirmedSales},null,8,["dash"])]),(0,r._)("div",Wr,[(0,r.Wm)(l,{dash:o.newSales},null,8,["dash"])]),(0,r._)("div",$r,[(0,r.Wm)(l,{dash:o.reportedSales},null,8,["dash"])]),(0,r._)("div",Er,[(0,r.Wm)(l,{dash:o.noanswerSales},null,8,["dash"])]),(0,r._)("div",Or,[(0,r.Wm)(l,{dash:o.canceledSales},null,8,["dash"])]),(0,r._)("div",Tr,[(0,r.Wm)(l,{dash:o.doubledSales},null,8,["dash"])]),(0,r._)("div",Vr,[(0,r.Wm)(l,{dash:o.wrongNumberSales},null,8,["dash"])])])])}var Rr={components:{DashItemTwo:Dr},props:["filteredSales"],data(){return{isLoaded:!1}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},sales(){return this.filteredSales},totalSales(){return{id:1,title:"Total",pourcentage:100,value:this.sales.length,color:"deep-purple-accent-2",icon:"mdi mdi-all-inclusive"}},newSales(){return{id:2,title:"New",value:this.sales.filter((t=>!t.confirmation&&!t.delivery)).length,pourcentage:(100*this.sales.filter((t=>!t.confirmation&&!t.delivery)).length/this.sales.length).toFixed(2),color:"grey",icon:"mdi mdi-new-box"}},toProcess(){return{id:3,title:"Process",value:this.sales.filter((t=>!!t.confirmation&&!["confirmer","livrer","expidier"].includes(t.confirmation))).length,pourcentage:(100*this.sales.filter((t=>!!t.confirmation&&!["confirmer","livrer","expidier"].includes(t.confirmation))).length/this.sales.length).toFixed(2),color:"primary-orange",icon:"mdi-reload"}},confirmedSales(){return{id:4,title:"Confirmed",value:this.sales.filter((t=>"confirmer"==t.confirmation)).length,pourcentage:(100*this.sales.filter((t=>"confirmer"==t.confirmation)).length/this.sales.filter((t=>t.confirmation&&"double"!=t.confirmation)).length).toFixed(2),color:"primary-green",icon:"mdi-phone-check"}},reportedSales(){return{id:5,title:"Reported",value:this.sales.filter((t=>"reporter"==t.confirmation)).length,pourcentage:(100*this.sales.filter((t=>"reporter"==t.confirmation)).length/this.sales.length).toFixed(2),color:"primary-blue",icon:"mdi mdi-clock-outline"}},canceledSales(){return{id:6,title:"Canceled",value:this.sales.filter((t=>"annuler"==t.confirmation)).length,pourcentage:(100*this.sales.filter((t=>"annuler"==t.confirmation)).length/this.sales.length).toFixed(2),color:"red-accent-3",icon:"mdi mdi-cancel"}},noanswerSales(){return{id:6,title:"No Answer",value:this.sales.filter((t=>["day-one-call-one","day-one-call-two","day-one-call-three","day-two-call-one","day-two-call-two","day-two-call-three","day-three-call-one","day-three-call-two","day-three-call-three"].includes(t.confirmation))).length,pourcentage:(100*this.sales.filter((t=>["day-one-call-one","day-one-call-two","day-one-call-three","day-two-call-one","day-two-call-two","day-two-call-three","day-three-call-one","day-three-call-two","day-three-call-three"].includes(t.confirmation))).length/this.sales.length).toFixed(2),color:"yellow-darken-3",icon:"mdi mdi-headphones-off"}},doubledSales(){return{id:8,title:"Doubled",pourcentage:(100*this.sales.filter((t=>"double"==t.confirmation)).length/this.sales.length).toFixed(2),value:this.sales.filter((t=>"double"==t.confirmation)).length,color:"purple-accent-4",icon:"mdi mdi-selection-multiple"}},wrongNumberSales(){return{id:9,title:"Wrong Number",pourcentage:(100*this.sales.filter((t=>"wrong-number"==t.confirmation)).length/this.sales.length).toFixed(2),value:this.sales.filter((t=>"wrong-number"==t.confirmation)).length,color:"purple-lighten-1",icon:"mdi mdi-phone-remove"}}},mounted(){xa.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;console.log(t.data),this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)}};const Ir=(0,d.Z)(Rr,[["render",qr]]);var Fr=Ir,jr={components:{DeliveryTab:Ur,ConfirmationTab:Fr},props:["filteredSales"],data(){return{tab:1,tabs:[{id:1,name:"Confirmation",component:"ConfirmationTab"},{id:2,name:"Delivery",component:"DeliveryTab"}]}}};const Nr=(0,d.Z)(jr,[["render",or]]);var Mr=Nr;const Hr={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4 py-5"},Yr={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},Kr={class:"tw-relative"},Zr={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},Br={class:"tw-relative"},Qr={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},Gr=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Agents",-1),Jr={class:"tw-relative"},Xr=(0,r._)("option",{value:"all"},"Select",-1),ti=["value"],ei={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},ai=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Deliveries",-1),si={class:"tw-relative"},ri=(0,r._)("option",{value:"all"},"Select",-1),ii=["value"],oi={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},li=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Cities",-1),ni={class:"tw-relative"},di=(0,r._)("option",{value:"all"},"Select",-1),wi=["value"],ci={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},ui=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Products",-1),pi={class:"tw-relative"},mi=(0,r._)("option",{value:"all"},"Select",-1),hi=["value"],gi={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},fi=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Shops",-1),vi={class:"tw-relative"},yi=(0,r._)("select",{class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[(0,r._)("option",{value:"all"},"Select")],-1),_i={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},xi=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Sources",-1),bi={class:"tw-relative"},ki=(0,r._)("select",{class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[(0,r._)("option",{value:"all"},"Select")],-1),Ci={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},Di=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Upsell",-1),Si={class:"tw-relative"},zi=(0,r._)("option",{value:"all"},"Select",-1),Ui=(0,r._)("option",{value:"oui"},"Oui",-1),Li=(0,r._)("option",{value:"non"},"Non",-1),Pi=[zi,Ui,Li];function Ai(t,e,a,i,o,l){const n=(0,r.up)("DateFilter");return(0,r.wg)(),(0,r.iD)("div",Hr,[(0,r._)("div",Yr,[(0,r._)("div",Kr,[(0,r.Wm)(n,{name:"Created Date",filter:o.dateFilter,"onUpdate:filter":e[0]||(e[0]=t=>o.dateFilter=t)},null,8,["filter"])])]),(0,r._)("div",Zr,[(0,r._)("div",Br,[(0,r.Wm)(n,{name:"Dropped Date",filter:o.droppedAtFilter,"onUpdate:filter":e[1]||(e[1]=t=>o.droppedAtFilter=t)},null,8,["filter"])])]),(0,r._)("div",Qr,[Gr,(0,r._)("div",Jr,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.agentFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[Xr,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.agents,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.firstname)+" "+(0,J.zw)(t.lastname),9,ti)))),128))],512),[[s.bM,o.agentFilter]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])]),(0,r._)("div",ei,[ai,(0,r._)("div",si,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.deliveryFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[ri,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.deliveries,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.firstname)+" "+(0,J.zw)(t.lastname),9,ii)))),128))],512),[[s.bM,o.deliveryFilter]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])]),(0,r._)("div",oi,[li,(0,r._)("div",ni,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.cityFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[di,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.cities,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.name,key:t.id},(0,J.zw)(t.name),9,wi)))),128))],512),[[s.bM,o.cityFilter]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])]),(0,r._)("div",ci,[ui,(0,r._)("div",pi,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>o.productFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[mi,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.products,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.name),9,hi)))),128))],512),[[s.bM,o.productFilter]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])]),(0,r._)("div",gi,[fi,(0,r._)("div",vi,[yi,(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])]),(0,r._)("div",_i,[xi,(0,r._)("div",bi,[ki,(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])]),(0,r._)("div",Ci,[Di,(0,r._)("div",Si,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>o.upsellFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},Pi,512),[[s.bM,o.upsellFilter]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])]),(0,r.kq)("",!0),(0,r.kq)("",!0),(0,r.kq)("",!0)])}const Wi={class:"tw-text-sm tw-text-neutral-600"},$i=["onClick"];function Ei(t,e,a,s,i,o){const l=(0,r.up)("VueDatePicker");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("span",Wi,(0,J.zw)(a.name),1),(0,r.Wm)(l,{modelValue:i.date,"onUpdate:modelValue":[e[0]||(e[0]=t=>i.date=t),o.onDateRangePicked],onCleared:o.cleared,format:i.dateFilterFormat,range:"","preset-ranges":i.presetRanges},{yearly:(0,r.w5)((({label:t,range:e,presetDateRange:a})=>[(0,r._)("span",{onClick:t=>a(e)},(0,J.zw)(t),9,$i)])),_:1},8,["modelValue","onCleared","onUpdate:modelValue","format","preset-ranges"])])}var Oi=a(1271),Ti=a(2292),Vi=a(1745),qi=a(4253),Ri=a(4819),Ii=a(2143),Fi={props:["name"],data(){return{date:["",""],dateFilterFormat:"yyyy-MM-dd",formattedStartDate:"",formattedEndDate:"",presetRanges:[{label:"Today",range:[new Date,new Date]},{label:"Yesterday",range:[(0,Oi.Z)(new Date,1),(0,Oi.Z)(new Date,1)]},{label:"This month",range:[(0,Ti.Z)(new Date),(0,Vi.Z)(new Date)]},{label:"Last month",range:[(0,Ti.Z)((0,qi.Z)(new Date,1)),(0,Vi.Z)((0,qi.Z)(new Date,1))]},{label:"This year",range:[(0,Ri.Z)(new Date),(0,Ii.Z)(new Date)]}]}},watch:{date(){this.$emit("update:filter",[this.formattedStartDate,this.formattedEndDate])}},methods:{onDateRangePicked(t){t?(this.formattedStartDate=t[0],this.formattedEndDate=t[1]):(this.formattedStartDate=null,this.formattedEndDate=null)},cleared(){this.date=["",""]}}};const ji=(0,d.Z)(Fi,[["render",Ei]]);var Ni=ji,Mi={components:{DateFilter:Ni},props:["filters"],data(){return{deliveryFilter:"all",agentFilter:"all",productFilter:"all",cityFilter:"all",upsellFilter:"all",dateFilter:["",""],droppedAtFilter:["",""],isLoaded:!1,dashItems:[{id:1,title:"Total Chiffres d'affaire",value:1200,icon:"mdi-currency-usd",color:"green"},{id:2,title:"Chiffres d'affaire vers",value:"35000 DH",icon:"mdi mdi-credit-card-check-outline",color:"orange"},{id:3,title:"Chiffres d'affaire non vers",value:600,icon:"mdi mdi-credit-card-remove-outline",color:"red"},{id:4,title:"Chiffres d'affaire en caisse",value:543,icon:"mdi mdi-bank",color:"pink"}],filledDashItems:[{id:1,title:"Customers",value:2300,color:"primary-orange",icon:"mdi-account-outline"},{id:2,title:"Suppliers",value:300,color:"primary-blue",icon:"mdi-account-check-outline"},{id:3,title:"Purchase Invoice",value:1100,color:"primary-indigo",icon:"mdi-file-document-outline"},{id:4,title:"Agents",value:10,color:"primary-green",icon:"mdi-moped-outline"}]}},watch:{agentFilter(t){this.$emit("update:filters",{...this.filters,agentFilter:t})},deliveryFilter(t){this.$emit("update:filters",{...this.filters,deliveryFilter:t})},productFilter(t){this.$emit("update:filters",{...this.filters,productFilter:t})},cityFilter(t){this.$emit("update:filters",{...this.filters,cityFilter:t})},upsellFilter(t){this.$emit("update:filters",{...this.filters,upsellFilter:t})},dateFilter:{deep:!0,handler(t){this.$emit("update:filters",{...this.filters,dateFilter:t})}},droppedAtFilter:{deep:!0,handler(t){this.$emit("update:filters",{...this.filters,droppedAtFilter:t})}}},computed:{agents(){return this.$store.getters["user/agents"]},deliveries(){return this.$store.getters["user/deliveries"]},products(){return this.$store.getters["product/products"]},cities(){return this.$store.getters["city/cities"]}},mounted(){Q.deliveries().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data;console.log(t.data),this.$store.dispatch("user/setDeliveries",e),this.isLoaded=!0}})).catch(this.$handleApiError),ss.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.products;console.log(t.data),this.$store.dispatch("product/setProducts",e),this.isLoaded=!0}})).catch(this.$handleApiError),Q.cities().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data;console.log(t.data),this.$store.dispatch("city/setCities",e),this.isLoaded=!0}})).catch(this.$handleApiError),Q.agents().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data;console.log(t.data),this.$store.dispatch("user/setAgents",e),this.isLoaded=!0}})).catch(this.$handleApiError)}};const Hi=(0,d.Z)(Mi,[["render",Ai]]);var Yi=Hi;const Ki=t=>{if(!t)return 0;const e=t.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return(parseFloat(t.price?t.price:0)+parseFloat(e)).toFixed(2)},Zi=t=>t?t.split("api/")[1]:null;var Bi={components:{DashItem:$s,UsersTable:tr,TabSwitcher:Mr,FilterTabs:Yi},data(){return{updating:!1,filters:{deliveryFilter:"all",agentFilter:"all",productFilter:"all",cityFilter:"all",upsellFilter:"all",dateFilter:["",""],droppedAtFilter:["",""]}}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},sales(){return this.$store.getters["sale/sales"]},isLoaded(){return this.$store.getters["sale/fetched"]},filteredSales(){const t=this.filters.agentFilter,e=this.filters.deliveryFilter,a=this.filters.productFilter,s=this.filters.cityFilter,r=this.filters.upsellFilter,i=this.filters.dateFilter[0],o=this.filters.dateFilter[1],l=this.filters.droppedAtFilter[0],n=this.filters.droppedAtFilter[1];return this.sales.filter((d=>{if("all"!==t&&parseInt(d.agente_id)!=parseInt(t))return!1;if("all"!==e&&parseInt(d.affectation)!=parseInt(e))return!1;if("all"!==r&&d.upsell!=r)return!1;if("all"!==a&&!d.items.some((t=>parseInt(t.product_id)==parseInt(a))))return!1;if("all"!==s&&d.city?.toLocaleLowerCase()!=s?.toLocaleLowerCase())return!1;const w=new Date(d.created_at),c=w.getDate(),u=w.getMonth(),p=w.getFullYear();if(i){const t=i.getDate(),e=i.getMonth(),a=i.getFullYear();if(p<a||p===a&&u<e||p===a&&u===e&&c<t)return!1}if(o){const t=o.getDate(),e=o.getMonth(),a=o.getFullYear();if(p>a||p===a&&u>e||p===a&&u===e&&c>t)return!1}const m=new Date(d.dropped_at),h=m.getDate(),g=m.getMonth(),f=w.getFullYear();if(l){const t=l.getDate(),e=l.getMonth(),a=l.getFullYear();if(f<a||f===a&&g<e||f===a&&g===e&&h<t)return!1}if(n){const t=n.getDate(),e=n.getMonth(),a=n.getFullYear();if(f>a||f===a&&g>e||f===a&&g===e&&h>t)return!1}return!0}))},dashChiffreAffairesConfirmer(){return{id:1,title:"Total Chiffres d'affaire",value:this.getChiffresDaffaireConfirmer().toFixed(2),icon:"mdi-currency-usd",color:"green"}},dashChiffreAffairesDelivery(){return{id:1,title:"Total Chiffres d'affaire",value:this.getChiffresDaffaireDelivery().toFixed(2),icon:"mdi-currency-usd",color:"green"}},dashChiffreAffairesVerse(){return{id:2,title:"Chiffres d'affaire vers",value:this.getChiffresDaffaireVerse().toFixed(2),icon:"mdi mdi-credit-card-check-outline",color:"orange"}},dashChiffreAffairesNonVerse(){return{id:3,title:"Chiffres d'affaire non vers",value:this.getChiffresDaffaireNonVerse().toFixed(2),icon:"mdi mdi-credit-card-remove-outline",color:"red"}},newSales(){return{id:1,title:"New",value:this.sales.filter((t=>!t.confirmation)).length,color:"primary-green",icon:"mdi mdi-new-box"}},toProcess(){return{id:2,title:"Process",value:this.sales.filter((t=>!!t.confirmation&&!["confirmer","livre","expidier"].includes(t.confirmation))).length,color:"primary-orange",icon:"mdi-reload"}},confirmedSales(){return{id:3,title:"Confirmed",value:this.sales.filter((t=>"confirmer"==t.confirmation)).length,color:"deep-purple-accent-2",icon:"mdi-phone-check"}},deliveredSales(){return{id:4,title:"Delivered",value:this.sales.filter((t=>"livre"==t.confirmation)).length,color:"primary-blue",icon:"mdi-account-check-outline"}},shippedSales(){return{id:5,title:"Shipped",value:this.sales.filter((t=>"expidier"==t.confirmation)).length,color:"red",icon:"mdi-truck"}}},methods:{getSales(){xa.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0)}})).catch(this.$handleApiError)},updateSales(){this.updating=!0,xa.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("sale/setSales",e),this.updating}})).catch(this.$handleApiError).finally((()=>{this.updating=!1}))},getChiffresDaffaire(){let t=0;return this.filteredSales.forEach((e=>{t+=Ki(e)})),t},getChiffresDaffaireConfirmer(){let t=0;return this.filteredSales.forEach((e=>{"confirmer"==e.confirmation&&(t+=Ki(e))})),t},getChiffresDaffaireDelivery(){let t=0;return this.filteredSales.forEach((e=>{"livrer"==e.delivery&&(t+=Ki(e))})),t},getChiffresDaffaireVerse(){let t=0;return this.filteredSales.forEach((e=>{null!=e.factorisations&&e.factorisations.paid&&e.factorisations.close&&(t+=Ki(e))})),t},getChiffresDaffaireNonVerse(){let t=0;return this.filteredSales.forEach((e=>{null!=e.factorisations&&!e.factorisations.paid&&e.factorisations.close&&(t+=Ki(e))})),t},getChiffresDaffaireEnCaise(){return this.getChiffresDaffaire()-this.getChiffresDaffaireVerse()}},mounted(){this.isLoaded||this.getSales()}};const Qi=(0,d.Z)(Bi,[["render",Cs]]);var Gi=Qi;const Ji=(0,r._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,r._)("div",null,[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Dashboard")])],-1),Xi={key:0},to={key:1},eo={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},ao={class:"tw-grid tw-mb-5 tw-grid-cols-4 md:tw-grid-cols-4 lg:tw-grid-cols-5 tw-gap-2"},so={class:"lg:tw-col-span-1 md:tw-col-span-1 tw-col-span-4"},ro={class:"lg:tw-col-span-1 md:tw-col-span-1 tw-col-span-4"},io={class:"lg:tw-col-span-1 md:tw-col-span-1 tw-col-span-4"},oo={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},lo={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-5"},no={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"};function wo(t,e,a,s,i,o){const l=(0,r.up)("LoadingAnimation"),n=(0,r.up)("DashItemTwo");return(0,r.wg)(),(0,r.iD)("div",null,[Ji,i.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",Xi,[(0,r.Wm)(l)])),i.isLoaded?((0,r.wg)(),(0,r.iD)("div",to,[(0,r._)("div",eo,[(0,r._)("div",ao,[(0,r._)("div",so,[(0,r.Wm)(n,{dash:o.earningsDash,symbol:"DH",numbers:!1},null,8,["dash"])]),(0,r._)("div",ro,[(0,r.Wm)(n,{dash:o.totalSales},null,8,["dash"])]),(0,r._)("div",io,[(0,r.Wm)(n,{dash:o.deliveredSales},null,8,["dash"])]),(0,r._)("div",oo,[(0,r.Wm)(n,{dash:o.reportedSales},null,8,["dash"])]),(0,r._)("div",lo,[(0,r.Wm)(n,{dash:o.shippedSales},null,8,["dash"])]),(0,r._)("div",no,[(0,r.Wm)(n,{dash:o.canceledSales},null,8,["dash"])])])])])):(0,r.kq)("",!0)])}var co={components:{DashItemTwo:Dr},data(){return{isLoaded:!0,orders:[],cities:[]}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},sales(){return this.$store.getters["sale/sales"]},totalSales(){return{id:1,title:"Total Orders",value:this.orders.length,pourcentage:100,color:"deep-purple-accent-2",icon:"mdi mdi-all-inclusive"}},deliveredSales(){return{id:2,title:"Delivered",value:this.filterByStatus("livrer").length,pourcentage:100*this.filterByStatus("livrer").length/this.orders.length,color:"primary-green",icon:"mdi-account-check-outline"}},toProcess(){return{id:3,title:"Process",value:231,color:"primary-orange",icon:"mdi-reload"}},shippedSales(){return{id:4,title:"Shipped",value:this.filterByStatus("expidier").length,pourcentage:100*this.filterByStatus("expidier").length/this.orders.length,color:"primary-orange",icon:"mdi-truck"}},reportedSales(){return{id:5,title:"Reported",value:this.filterByStatus("reporter").length,pourcentage:100*this.filterByStatus("reporter").length/this.orders.length,color:"primary-blue",icon:"mdi mdi-clock-outline"}},canceledSales(){return{id:6,title:"Canceled",value:this.filterByStatus("annuler").length,pourcentage:100*this.filterByStatus("annuler").length/this.orders.length,color:"red-accent-3",icon:"mdi mdi-cancel"}},earningsDash(){return{id:2,title:"Earnings",pourcentage:this.earnings,color:"green-darken-4",icon:"mdi-currency-usd"}},earnings(){return this.orders.reduce(((t,e)=>null==e.factorisations||e.factorisations.paid||e.factorisations.close?t:t+e.factorisations.price),0)}},methods:{filterByStatus(t){return this.orders.filter((e=>e.delivery==t))},getOrders(){this.isLoaded=!1,Aa.delivery().then((t=>{"SUCCESS"==t.data.code&&(this.orders=t.data.data.orders)})).finally((()=>{this.isLoaded=!0}))}},mounted(){this.getOrders()}};const uo=(0,d.Z)(co,[["render",wo]]);var po=uo;const mo=(0,r._)("div",{class:"tw-w-full tw-rounded-lg tw-py-5 tw-px-5 tw-flex tw-flex-center tw-justify-center"},[(0,r._)("h1",{class:"tw-text-lg"},"Welcome to Dashboard !")],-1),ho=[mo];function go(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("div",null,ho)}var fo={components:{},data(){return{dashItems:[{id:1,title:"Orders",value:1200,icon:"mdi-package-variant-closed",color:"orange"},{id:2,title:"Total Sales",value:"35000 DH",icon:"mdi-currency-usd",color:"green"},{id:3,title:"Orders Confirmed",value:600,icon:"mdi-phone-check-outline",color:"blue"},{id:4,title:"Orders Delivered",value:543,icon:"mdi-truck-check-outline",color:"pink"}],filledDashItems:[{id:1,title:"Customers",value:2300,color:"primary-orange",icon:"mdi-account-outline"},{id:2,title:"Suppliers",value:300,color:"primary-blue",icon:"mdi-account-check-outline"},{id:3,title:"Purchase Invoice",value:1100,color:"primary-indigo",icon:"mdi-file-document-outline"},{id:4,title:"Agents",value:10,color:"primary-green",icon:"mdi-moped-outline"}]}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role}}};const vo=(0,d.Z)(fo,[["render",go]]);var yo=vo;const _o={class:"tw-w-full tw-grid tw-gap-2 lg:tw-grid-cols-4 sm:tw-grid-cols-2 tw-grid-cols-1"},xo=(0,r.uE)('<div class="tw-flex tw-justify-between tw-w-full"><div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-2.5 tw-bg-gray-200 tw-rounded-full tw-w-[50px] tw-mb-4"></div></div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-4 tw-bg-gray-200 tw-rounded-full tw-w-[30px] tw-mb-4"></div></div></div><div class="tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-bg-gray-200 tw-text-white"><div class="tw-bg-white tw-w-[25px] tw-h-[25px] tw-rounded"></div></div></div>',1),bo=[xo];function ko(t,e,a,s,i,o){const l=(0,r.up)("DashCard");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",_o,[i.fetching?((0,r.wg)(),(0,r.iD)(r.HY,{key:1},(0,r.Ko)(4,(t=>(0,r._)("div",{key:t,class:"tw-bg-white tw-animate-pulse tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-[90px]"},bo))),64)):((0,r.wg)(!0),(0,r.iD)(r.HY,{key:0},(0,r.Ko)(i.dashes,(t=>((0,r.wg)(),(0,r.j4)(l,{key:t.id,color:t.color,icon:t.icon,title:t.title,symbol:t.symbol,percentage:t.percentage,value:t.value},null,8,["color","icon","title","symbol","percentage","value"])))),128))])])}const Co={class:"tw-bg-white tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-fit"},Do={class:"tw-flex tw-justify-between"},So={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},zo={class:"tw-text-gray-400 tw-uppercase tw-text-xs tw-font-medium"},Uo={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},Lo={class:"tw-text-gray-700 tw-text-xl tw-font-bold"};function Po(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",Co,[(0,r._)("div",Do,[(0,r._)("div",null,[(0,r._)("div",So,[(0,r._)("p",zo,(0,J.zw)(a.title),1),a.percentage?((0,r.wg)(),(0,r.iD)("span",{key:0,class:"tw-text-xs tw-font-medium tw-rounded tw-px-1 tw-text-white",style:(0,J.j5)({background:a.color})},(0,J.zw)(a.percentage.toFixed(2))+"%",5)):(0,r.kq)("",!0)]),(0,r._)("div",Uo,[(0,r._)("span",Lo,(0,J.zw)(a.value),1)])]),(0,r._)("div",{style:(0,J.j5)({background:a.color}),class:"tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-text-white"},[(0,r.Wm)(et.t,{style:(0,J.j5)(["Orders"==a.title&&{color:"#2ee1ff"}]),size:"x-large"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(a.icon),1)])),_:1},8,["style"])],4)])])])}var Ao={props:{icon:{required:!0},title:{required:!0},value:{required:!0},symbol:{default:"",required:!1},percentage:{required:!1},color:{required:!0,default:"#6b7280"}}};const Wo=(0,d.Z)(Ao,[["render",Po]]);var $o=Wo;class Eo{async statistics(){return await Z.getCookie(),Y.post("api/v1/followup/statistics")}async paginate(t="/",e){return await Z.getCookie(),Y.post("api/v1/followup/orders"+t,e)}async update(t,e){return await Z.getCookie(),Y.post("api/v1/followup/orders/"+t+"/update",e)}}var Oo=new Eo,To={components:{DashCard:$o},data(){return{fetching:!0,dashes:[]}},mounted(){Oo.statistics().then((t=>{console.log(t.data.data),this.dashes=t.data.data.statistics,this.fetching=!1}))}};const Vo=(0,d.Z)(To,[["render",ko]]);var qo=Vo;const Ro={class:"tw-w-full tw-grid tw-gap-2 lg:tw-grid-cols-4 sm:tw-grid-cols-2 tw-grid-cols-1"},Io=(0,r.uE)('<div class="tw-flex tw-justify-between tw-w-full"><div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-2.5 tw-bg-gray-200 tw-rounded-full tw-w-[50px] tw-mb-4"></div></div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-4 tw-bg-gray-200 tw-rounded-full tw-w-[30px] tw-mb-4"></div></div></div><div class="tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-bg-gray-200 tw-text-white"><div class="tw-bg-white tw-w-[25px] tw-h-[25px] tw-rounded"></div></div></div>',1),Fo=[Io];function jo(t,e,a,s,i,o){const l=(0,r.up)("DashCard");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",Ro,[i.fetching?((0,r.wg)(),(0,r.iD)(r.HY,{key:1},(0,r.Ko)(4,(t=>(0,r._)("div",{key:t,class:"tw-bg-white tw-animate-pulse tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-[90px]"},Fo))),64)):((0,r.wg)(!0),(0,r.iD)(r.HY,{key:0},(0,r.Ko)(i.dashes,(t=>((0,r.wg)(),(0,r.j4)(l,{key:t.id,color:t.color,icon:t.icon,title:t.title,symbol:t.symbol,percentage:t.percentage,value:t.value},null,8,["color","icon","title","symbol","percentage","value"])))),128))])])}const No={class:"tw-bg-white tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-fit"},Mo={class:"tw-flex tw-justify-between"},Ho={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},Yo={class:"tw-text-gray-400 tw-uppercase tw-text-xs tw-font-medium"},Ko={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},Zo={class:"tw-text-gray-700 tw-text-xl tw-font-bold"},Bo={key:0};function Qo(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",No,[(0,r._)("div",Mo,[(0,r._)("div",null,[(0,r._)("div",Ho,[(0,r._)("p",Yo,(0,J.zw)(a.title),1),a.percentage?((0,r.wg)(),(0,r.iD)("span",{key:0,class:"tw-text-xs tw-font-medium tw-rounded tw-px-1 tw-text-white",style:(0,J.j5)({background:a.color})},(0,J.zw)(a.percentage.toFixed(2))+"%",5)):(0,r.kq)("",!0)]),(0,r._)("div",Ko,[(0,r._)("span",Zo,[(0,r.Uk)((0,J.zw)(a.value)+" ",1),a.symbol?((0,r.wg)(),(0,r.iD)("span",Bo,(0,J.zw)(a.symbol),1)):(0,r.kq)("",!0)])])]),(0,r._)("div",{style:(0,J.j5)({background:a.color}),class:"tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-text-white"},[(0,r.Wm)(et.t,{style:(0,J.j5)(["All Orders"==a.title&&{color:"#2ee1ff"}]),size:"x-large"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(a.icon),1)])),_:1},8,["style"])],4)])])])}var Go={props:{icon:{required:!0},title:{required:!0},value:{required:!0},symbol:{default:"",required:!1},percentage:{required:!1},color:{required:!0,default:"#6b7280"}}};const Jo=(0,d.Z)(Go,[["render",Qo]]);var Xo=Jo,tl={components:{DashCard:Xo},data(){return{fetching:!0,dashes:[]}},mounted(){is.statistics().then((t=>{console.log(t.data.data),this.dashes=t.data.data.statistics,this.fetching=!1}))}};const el=(0,d.Z)(tl,[["render",jo]]);var al=el,sl={components:{admin:Gi,delivery:po,agente:al,default:yo,"follow-up":qo},data(){return{localUrl:F}},computed:{user(){return this.$store.getters["user/user"]},dashboard(){return["admin","delivery","agente","follow-up"].includes(this.user.role)?this.user.role:"default"}},mounted(){console.log(this.user)}};const rl=(0,d.Z)(sl,[["render",ds]]);var il=rl,ol=a(3104);const ll=(0,r._)("div",{class:"mb-5"},[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Settings ")],-1),nl={key:0},dl={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},wl={class:"tw-w-full"},cl=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," First Name ",-1),ul={class:"tw-w-full"},pl=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Last Name",-1),ml={class:"tw-w-full"},hl=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Email",-1),gl={class:"tw-w-full"},fl=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Phone Number ",-1),vl={class:"tw-w-full tw-flex tw-gap-10 tw-items-center"},yl=(0,r._)("span",null,"Update Password: ",-1),_l={class:"tw-w-full"},xl=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Password",-1),bl={class:"tw-w-full"},kl=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Confirm Password ",-1),Cl={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Dl=(0,r._)("span",{class:"text-white text-capitalize"},"Cancel",-1),Sl=(0,r._)("span",{class:"text-white text-capitalize"},"Update",-1);function zl(t,e,a,s,i,o){const l=(0,r.up)("LoadingAnimation");return(0,r.wg)(),(0,r.iD)("div",null,[ll,o.isFormReady?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",nl,[(0,r.Wm)(l)])),o.isFormReady?((0,r.wg)(),(0,r.iD)("div",dl,[(0,r._)("div",null,[(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{cols:"12",md:"12"},{default:(0,r.w5)((()=>[(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",wl,[cl,(0,r.Wm)(at.hw,{"error-messages":i.formStatus.firstname.message,modelValue:i.firstname,"onUpdate:modelValue":e[0]||(e[0]=t=>i.firstname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",ul,[pl,(0,r.Wm)(at.hw,{"error-messages":i.formStatus.lastname.message,modelValue:i.lastname,"onUpdate:modelValue":e[1]||(e[1]=t=>i.lastname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",ml,[hl,(0,r.Wm)(at.hw,{"error-messages":i.formStatus.email.message,modelValue:i.email,"onUpdate:modelValue":e[2]||(e[2]=t=>i.email=t),readonly:"",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",gl,[fl,(0,r.Wm)(at.hw,{"error-messages":i.formStatus.phone.message,modelValue:i.phone,"onUpdate:modelValue":e[3]||(e[3]=t=>i.phone=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-0",cols:"12"},{default:(0,r.w5)((()=>[(0,r._)("div",vl,[yl,(0,r.Wm)(ol.G,{modelValue:i.updatePassword,"onUpdate:modelValue":e[4]||(e[4]=t=>i.updatePassword=t),color:"primary-color","hide-details":!0},null,8,["modelValue"])])])),_:1}),i.updatePassword?((0,r.wg)(),(0,r.j4)(cs.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",_l,[xl,(0,r.Wm)(at.hw,{"error-messages":i.formStatus.password.message,modelValue:i.password,"onUpdate:modelValue":e[5]||(e[5]=t=>i.password=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1})):(0,r.kq)("",!0),i.updatePassword?((0,r.wg)(),(0,r.j4)(cs.D,{key:1,class:"!tw-py-2 tw-pt-0",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",bl,[kl,(0,r.Wm)(at.hw,{"error-messages":i.formStatus.confirmPassword.message,modelValue:i.confirmPassword,"onUpdate:modelValue":e[6]||(e[6]=t=>i.confirmPassword=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1})):(0,r.kq)("",!0)])),_:1})])),_:1})])),_:1})]),(0,r._)("div",Cl,[(0,r.Wm)(X.T,{link:"",to:{name:"user/list"},color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,r.w5)((()=>[Dl])),_:1}),t.$can("update_account")?((0,r.wg)(),(0,r.j4)(X.T,{key:0,onClick:o.update,loading:i.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,r.w5)((()=>[Sl])),_:1},8,["onClick","loading"])):(0,r.kq)("",!0)])])):(0,r.kq)("",!0)])}var Ul={data(){return{serverUrl:j,isFetched:!1,isUserFetched:!1,isLoading:!1,updatePassword:!1,formStatus:{firstname:{valid:!0,message:""},lastname:{valid:!0,message:""},phone:{valid:!0,message:""},email:{valid:!0,message:""},password:{valid:!0,message:""},confirmPassword:{valid:!0,message:""}},id:null,firstname:"",lastname:"",phone:"",email:"",password:"",confirmPassword:""}},computed:{isFormReady(){return this.isFetched},user(){return{id:this.id,firstname:this.firstname,lastname:this.lastname,phone:this.phone,password:this.password}}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,Q.updateProfile(this.user,this.updatePassword).then((t=>{"USER_UPDATED"==t.data.code&&this.$alert({type:"success",title:t.data.message})})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;switch(console.log(t),e?.code){case"VALIDATION_ERROR":for(let t in e.error)this.formStatus[t]={valid:!1,message:e.error[t][0]};break}return t})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1}))},validate(){this.formStatus["firstname"]=Ct(this.firstname),this.formStatus["lastname"]=Ct(this.lastname),this.formStatus["phone"]=Ct(this.phone),this.formStatus["password"]=kt(this.password),this.formStatus["confirmPassword"]=St(this.password,this.confirmPassword);const t=this.formStatus["firstname"].valid,e=this.formStatus["lastname"].valid,a=this.formStatus["phone"].valid;if(this.updatePassword){const s=this.formStatus["password"].valid,r=this.formStatus["confirmPassword"].valid;return t&&e&&s&&r&&a}return t&&e&&a},async getUser(){return Q.profile().then((t=>{if("USER_SUCCESS"==t?.data.code){const e=t.data.data.user;this.id=e.id,this.firstname=e.firstname,this.lastname=e.lastname,this.email=e.email,this.phone=e.phone,this.isUserFetched=!0}})).catch(this.$handleApiError)}},async mounted(){Promise.allSettled([this.getUser()]).then((()=>this.isFetched=!0),(t=>this.$handleApiError(t)))}};const Ll=(0,d.Z)(Ul,[["render",zl]]);var Pl=Ll;const Al=(0,r._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,r._)("div",null,[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Notifications")])],-1),Wl={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},$l={class:"!tw-capitalize"};function El(t,e,a,s,i,o){(0,r.up)("LoadingAnimation");return(0,r.wg)(),(0,r.iD)("div",null,[Al,(0,r.kq)("",!0),((0,r.wg)(),(0,r.iD)("div",Wl,[(0,r.Wm)(er._,{flat:""},{default:(0,r.w5)((()=>[(0,r.Wm)(ar.d,{modelValue:i.tab,"onUpdate:modelValue":e[0]||(e[0]=t=>i.tab=t),color:"primary-color","align-tabs":"start",density:"compact"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.tabs,(t=>((0,r.wg)(),(0,r.j4)(sr.L,{class:"!tw-capitalize !tw-text-neutral-600",key:t.id,value:t.id},{default:(0,r.w5)((()=>[(0,r._)("span",$l,(0,J.zw)(t.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"]),(0,r.Wm)(rr.Oo,{class:"tw-mt-5",modelValue:i.tab,"onUpdate:modelValue":e[1]||(e[1]=t=>i.tab=t)},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.tabs,(t=>((0,r.wg)(),(0,r.j4)(ir.H,{key:t.id,value:t.id},{default:(0,r.w5)((()=>[((0,r.wg)(),(0,r.j4)((0,r.LL)(t.component)))])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})]))])}const Ol={key:0};function Tl(t,e,a,s,i,o){const l=(0,r.up)("SalesTable");return o.fetched?((0,r.wg)(),(0,r.iD)("div",Ol,[((0,r.wg)(),(0,r.j4)(l,{key:o.sales.length,columns:i.columns,sales:o.sales},null,8,["columns","sales"]))])):(0,r.kq)("",!0)}const Vl={class:"tw-grid tw-grid-cols-12 tw-mb-5"},ql={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-items-center"},Rl=(0,r._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"}," Show per page: ",-1),Il=["value"],Fl={class:"tw-relative tw-pb-5 tw-overflow-x-auto tw-min-h-[400px] tw-overflow-y-visible sm:tw-rounded-lg"},jl={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},Nl={scope:"col",class:"tw-p-4"},Ml={class:"tw-flex tw-items-center"},Hl=(0,r._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox",-1),Yl={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},Kl={class:"tw-w-4 tw-p-4 tw-relative"},Zl={class:"tw-flex tw-items-center"},Bl=["onChange","checked"],Ql=(0,r._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox",-1),Gl={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},Jl={class:"tw-px-6 tw-py-4 tw-relative"},Xl={key:0},tn={class:"tw-px-6 tw-py-4"},en=["title"],an={class:"tw-px-6 tw-py-4 tw-relative"},sn={class:"tw-pb-2"},rn={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},on={key:0},ln={key:1},nn={class:"tw-absolute tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-text-xs"},dn={key:0,class:"tw-bg-emerald-500/10 tw-text-emerald-500 tw-px-2 tw-rounded-t"},wn={key:1,class:"tw-bg-blue-500/10 tw-text-blue-500 tw-px-2 tw-rounded-t"},cn={class:"tw-px-6 tw-py-4"},un={class:"tw-px-6 tw-py-4 tw-relative"},pn={class:"tw-flex tw-items-center tw-justify-center"},mn={class:"tw-flex tw-gap-1"},hn={key:0},gn={class:"tw-px-6 tw-py-4"},fn={class:"tw-px-6 tw-py-4 tw-relative"},vn={class:"tw-flex tw-items-center tw-justify-center"},yn={class:"tw-flex tw-gap-1"},_n={key:0},xn={class:"tw-px-6 tw-py-4"},bn={class:"tw-px-6 tw-py-4"},kn={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},Cn={class:"tw-col-span-12 md:tw-col-span-12 d-flex tw-justify-end tw-flex-wrap align-center"},Dn={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},Sn={class:"tw-flex tw-flex-wrap tw-gap-2"},zn={class:"tw-text-white"};function Un(t,e,a,i,o,l){const n=(0,r.up)("SaleConfirmation"),d=(0,r.up)("SaleAffectation"),w=(0,r.up)("SaleDelivery"),c=(0,r.up)("SaleActions");return(0,r.wg)(),(0,r.iD)("div",{key:l.items.length},[(0,r._)("div",Vl,[(0,r._)("div",ql,[Rl,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.allowedLimit,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t,key:t},(0,J.zw)(t),9,Il)))),128))],512),[[s.bM,o.paginationLimit]])])]),(0,r._)("div",Fl,[((0,r.wg)(),(0,r.iD)("table",{key:l.reportedForToday.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,r._)("thead",jl,[(0,r._)("tr",null,[(0,r._)("th",Nl,[(0,r._)("div",Ml,[(0,r.wy)((0,r._)("input",{onClick:e[1]||(e[1]=(...t)=>l.handleSelectAll&&l.handleSelectAll(...t)),"onUpdate:modelValue":e[2]||(e[2]=t=>o.isAllSelected=t),id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"},null,512),[[s.e8,o.isAllSelected]]),Hl])]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.columns,(t=>((0,r.wg)(),(0,r.iD)("th",{key:t,class:(0,J.C_)([["city"==t&&"!tw-max-w-[150px]"],"tw-px-6 tw-py-3 tw-truncate"]),scope:"col"},[(0,r._)("div",Yl,(0,J.zw)(t),1)],2)))),128))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.items,(t=>((0,r.wg)(),(0,r.iD)("tr",{key:t.id,class:(0,J.C_)([[[t.confirmation,t.delivery].includes("reporter")&&"tw-relative",l.isReportedToday(t)&&"!tw-border tw-border-red-400"],"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"])},[(0,r._)("td",Kl,[(0,r._)("div",Zl,[(0,r._)("input",{onChange:e=>l.handleSelect(e,t.id),checked:l.isSelected(t.id),id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"},null,40,Bl),Ql])]),(0,r._)("td",Gl,(0,J.zw)(t.id),1),(0,r._)("td",Jl,[(0,r.Uk)((0,J.zw)(t?.created_at?.split("T")[0])+" ",1),"reporter"==t.confirmation||"reporter"==t.delivery?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,J.C_)([l.isReportedToday(t)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[l.isReportedToday(t)?((0,r.wg)(),(0,r.iD)("span",Xl," Reported for today ")):(0,r.kq)("",!0)],2)):(0,r.kq)("",!0)]),(0,r._)("td",tn,[(0,r._)("div",{title:t.city,class:"!tw-max-w-[200px] tw-truncate"},(0,J.zw)(t.city),9,en)]),(0,r._)("td",an,[(0,r._)("div",sn,[(0,r._)("ul",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.items,(t=>((0,r.wg)(),(0,r.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,r.Uk)(" - "),(0,r._)("span",rn,(0,J.zw)(t.quantity)+" X ",1),(0,r.Uk)((0,J.zw)(t.product.name)+" ",1),t.product_variation.size?((0,r.wg)(),(0,r.iD)("span",on,"| "+(0,J.zw)(t.product_variation.size),1)):(0,r.kq)("",!0),t.product_variation.color?((0,r.wg)(),(0,r.iD)("span",ln,"| "+(0,J.zw)(t.product_variation.color),1)):(0,r.kq)("",!0)])))),128))]),(0,r._)("div",nn,[t.counts_from_warehouse?((0,r.wg)(),(0,r.iD)("p",dn," warehouse ")):(0,r.kq)("",!0),t.counts_from_warehouse?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",wn," delivery "))])])]),(0,r._)("td",cn,(0,J.zw)(t.fullname),1),(0,r._)("td",un,[(0,r._)("div",pn,[((0,r.wg)(),(0,r.j4)(n,{class:(0,J.C_)("reporter"==t.confirmation&&"tw-mb-1"),sale:t,id:t.id,confirmation:t.confirmation,key:t.confirmation},null,8,["class","sale","id","confirmation"])),"reporter"==t.confirmation?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,J.C_)([l.isReportedToday(t)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[(0,r._)("span",mn,["reporter"==t.confirmation?((0,r.wg)(),(0,r.iD)("span",hn,[(0,r.Wm)(et.t,{size:"x-small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-autorenew")])),_:1}),(0,r._)("span",null,(0,J.zw)(t?.reported_agente_date?.split("T")[0]),1)])):(0,r.kq)("",!0)])],2)):(0,r.kq)("",!0)])]),(0,r._)("td",gn,["confirmer"==t.confirmation?((0,r.wg)(),(0,r.j4)(d,{sale:t,affectation:t.affectation,id:t.id,key:t.affectation},null,8,["sale","affectation","id"])):(0,r.kq)("",!0)]),(0,r._)("td",fn,[(0,r._)("div",vn,[((0,r.wg)(),(0,r.j4)(w,{class:(0,J.C_)("reporter"==t.delivery&&"tw-mb-1"),sale:t,id:t.id,key:t.delivery,delivery:t.delivery},null,8,["class","sale","id","delivery"])),"reporter"==t.delivery?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,J.C_)([l.isReportedToday(t)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[(0,r._)("span",yn,["reporter"==t.delivery?((0,r.wg)(),(0,r.iD)("span",_n,[(0,r.Wm)(et.t,{size:"x-small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-autorenew")])),_:1}),(0,r._)("span",null,(0,J.zw)(t.reported_delivery_date),1)])):(0,r.kq)("",!0)])],2)):(0,r.kq)("",!0)])]),(0,r._)("td",xn,(0,J.zw)(l.getPrice(t)),1),(0,r._)("td",bn,[((0,r.wg)(),(0,r.j4)(c,{id:t.id,key:t.delivery,sale:t},null,8,["id","sale"]))])],2)))),128))])]))]),(0,r._)("div",kn,[(0,r._)("div",Cn,[(0,r._)("div",Dn,(0,J.zw)(l.prevRange+1)+" - "+(0,J.zw)(o.currentPage==l.pageCount?a.sales.length:l.nextRange)+" of "+(0,J.zw)(a.sales.length)+" items ",1),(0,r._)("div",Sn,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.pageCount,(t=>((0,r.wg)(),(0,r.j4)(X.T,{onClick:e=>o.currentPage=t,ripple:!1,variant:"flat",icon:"",rounded:"lg",color:t==o.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,r.w5)((()=>[(0,r._)("span",zn,(0,J.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const Ln={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},Pn=["onClick"],An={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},Wn=(0,r._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter note",-1),$n={class:"tw-flex tw-justify-end tw-mt-2"};function En(t,e,a,i,o,l){const n=(0,r.up)("popup-full"),d=(0,r.up)("SaleConfirmationReporting");return(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{key:a.confirmation,class:"tw-relative tw-min-w-[100px]"},[(0,r._)("button",{onClick:e[0]||(e[0]=(...t)=>l.toggle&&l.toggle(...t)),class:(0,J.C_)([[l.selected.text,l.selected.bg,l.selected.ring],"focus:tw-ring-4 tw-min-w-[100px] focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between"]),type:"button"},[(0,r.Uk)((0,J.zw)(l.selected.name)+" ",1),o.isLoading?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(et.t,{key:0,class:"tw-ml-1"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(o.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),o.isLoading?((0,r.wg)(),(0,r.j4)(et.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-loading")])),_:1})):(0,r.kq)("",!0)],2),(0,r._)("div",{class:(0,J.C_)([{"tw-hidden":!o.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,r._)("ul",Ln,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.options,(t=>((0,r.wg)(),(0,r.iD)("li",{onClick:e=>l.handleChange(t),key:t.id},[(0,r._)("a",{class:(0,J.C_)(["tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100",[t.text,t.bg]])},(0,J.zw)(t.name),3)],8,Pn)))),128))])],2),(0,r.Wm)(n,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>o.showPopup=!1),visible:o.showPopup},{default:(0,r.w5)((()=>[(0,r._)("div",An,[Wn,(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.note=t),cols:"30",rows:"3",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[s.nr,o.note]]),(0,r._)("div",$n,[(0,r.Wm)(X.T,{class:"tw-capitalize",loading:o.isLoading,variant:"flat",color:"green",onClick:l.handleClick},{default:(0,r.w5)((()=>[(0,r.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"]),(0,r.Wm)(d,{order:a.sale,visible:o.showPopupReporter,onCancel:e[3]||(e[3]=t=>o.showPopupReporter=!1)},null,8,["order","visible"])])),[[Gt.L,l.close]])}const On=[{id:0,value:null,name:"New",text:"tw-text-white",textLight:"tw-text-emerald-800",bg:"tw-bg-green-500",bgLight:"tw-bg-emerald-100",ring:"tw-ring-green-300"},{id:1,value:"day-one-call-one",name:"No reply 1 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-700",bg:"tw-bg-rose-200/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-200"},{id:2,value:"day-one-call-two",name:"No reply 2 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-800",bg:"tw-bg-rose-400/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-300"},{id:3,value:"day-one-call-three",name:"No reply 3 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-900",bg:"tw-bg-rose-600/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-400"},{id:4,value:"day-two-call-one",name:"No reply 1 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-700",bg:"tw-bg-indigo-200/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-200"},{id:5,value:"day-two-call-two",name:"No reply 2 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-800",bg:"tw-bg-indigo-400/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-300"},{id:6,value:"day-two-call-three",name:"No reply 3 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-900",bg:"tw-bg-indigo-600/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-400"},{id:7,value:"day-three-call-one",name:"No reply 1 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-700",bg:"tw-bg-blue-200/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-200"},{id:8,value:"day-three-call-two",name:"No reply 2 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-800",bg:"tw-bg-blue-400/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-300"},{id:9,value:"day-three-call-three",name:"No reply 3 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-900",bg:"tw-bg-blue-600/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-400"},{id:10,value:"reporter",name:"Reported",text:"tw-text-teal-500",textLight:"tw-text-teal-800",bg:"tw-bg-teal-500/10",bgLight:"tw-bg-teal-100",ring:"tw-ring-teal-300"},{id:11,value:"annuler",name:"Canceled",text:"tw-text-red-500",textLight:"tw-text-red-800",bg:"tw-bg-red-500/10",bgLight:"tw-bg-red-100",ring:"tw-ring-red-300"},{id:12,value:"wrong-number",name:"Wrong number",text:"tw-text-fuchsia-500",textLight:"tw-text-fuchsia-800",bg:"tw-bg-fuchsia-500/10",bgLight:"tw-bg-fuchsia-100",ring:"tw-ring-fuchsia-300"},{id:13,value:"confirmer",name:"Confirmed",text:"tw-text-green-500",textLight:"tw-text-green-800",bg:"tw-bg-green-500/10",bgLight:"tw-bg-green-100",ring:"tw-ring-green-300"},{id:14,value:"double",name:"Double",text:"tw-text-purple-500",textLight:"tw-text-purple-800",bg:"tw-bg-purple-500/10",bgLight:"tw-bg-purple-100",ring:"tw-ring-purple-300"}],Tn=[{id:0,value:null,name:"New",text:"tw-text-white",textLight:"tw-text-emerald-800",bg:"tw-bg-green-500",bgLight:"tw-bg-emerald-100",ring:"tw-ring-green-300"},{id:1,value:"day-one-call-one",name:"No reply 1 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-700",bg:"tw-bg-rose-200/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-200"},{id:2,value:"day-one-call-two",name:"No reply 2 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-800",bg:"tw-bg-rose-400/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-300"},{id:3,value:"day-one-call-three",name:"No reply 3 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-900",bg:"tw-bg-rose-600/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-400"},{id:4,value:"day-two-call-one",name:"No reply 1 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-700",bg:"tw-bg-indigo-200/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-200"},{id:5,value:"day-two-call-two",name:"No reply 2 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-800",bg:"tw-bg-indigo-400/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-300"},{id:6,value:"day-two-call-three",name:"No reply 3 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-900",bg:"tw-bg-indigo-600/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-400"},{id:7,value:"day-three-call-one",name:"No reply 1 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-700",bg:"tw-bg-blue-200/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-200"},{id:8,value:"day-three-call-two",name:"No reply 2 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-800",bg:"tw-bg-blue-400/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-300"},{id:9,value:"day-three-call-three",name:"No reply 3 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-900",bg:"tw-bg-blue-600/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-400"},{id:10,value:"reporter",name:"Reported",text:"tw-text-teal-500",textLight:"tw-text-teal-800",bg:"tw-bg-teal-500/10",bgLight:"tw-bg-teal-100",ring:"tw-ring-teal-300"},{id:11,value:"annuler",name:"Canceled",text:"tw-text-red-500",textLight:"tw-text-red-800",bg:"tw-bg-red-500/10",bgLight:"tw-bg-red-100",ring:"tw-ring-red-300"},{id:13,value:"reconfirmer",name:"Reconfirmed",text:"tw-text-cyan-500",textLight:"tw-text-cyan-800",bg:"tw-bg-cyan-500/10",bgLight:"tw-bg-cyan-100",ring:"tw-ring-cyan-300"}],Vn=[{id:0,value:null,name:"Select",text:"tw-text-neutral-600",bg:"tw-bg-neutral-500/10",ring:"tw-ring-neutral-300"},{id:1,value:"oui",name:"Oui",text:"tw-text-green-500",bg:"tw-bg-green-500/10",ring:"tw-ring-green-300"},{id:2,value:"non",name:"Non",text:"tw-text-pink-500",bg:"tw-bg-pink-500/10",ring:"tw-ring-pink-300"}],qn=[{id:0,value:null,name:"Select",text:"tw-text-gray-500",textLight:"tw-text-gray-800",bg:"tw-bg-gray-500/10",bgLight:"tw-bg-gray-100",ring:"tw-ring-gray-300"},{id:1,value:"dispatch",name:"Dispatched",text:"tw-text-yellow-500",textLight:"tw-text-yellow-800",bg:"tw-bg-yellow-500/10",bgLight:"tw-bg-yellow-100",ring:"tw-ring-yellow-300"},{id:2,value:"expidier",name:"Shipped",text:"tw-text-fuchsia-500",textLight:"tw-text-fuchsia-800",bg:"tw-bg-fuchsia-500/10",bgLight:"tw-bg-fuchsia-100",ring:"tw-ring-fuchsia-300"},{id:3,value:"livrer",name:"Delivered",text:"tw-text-green-500",bg:"tw-bg-green-500/10",textLight:"tw-text-green-800",bgLight:"tw-bg-green-100",ring:"tw-ring-green-300"},{id:4,value:"reporter",name:"Reported",text:"tw-text-orange-500",bg:"tw-bg-orange-500/10",textLight:"tw-text-orange-800",bgLight:"tw-bg-orange-100",ring:"tw-ring-orange-300"},{id:5,value:"refuser",name:"Refused",text:"tw-text-pink-500",bg:"tw-bg-pink-500/10",textLight:"tw-text-pink-800",bgLight:"tw-bg-pink-100",ring:"tw-ring-pink-300"},{id:6,value:"annuler",name:"Canceled",text:"tw-text-red-500",bg:"tw-bg-red-500/10",textLight:"tw-text-red-800",bgLight:"tw-bg-red-100",ring:"tw-ring-red-300"},{id:9,value:"pas-de-reponse",name:"No Answer",text:"tw-text-yellow-500",bg:"tw-bg-yellow-500/10",textLight:"tw-text-yellow-800",bgLight:"tw-bg-yellow-100",ring:"tw-ring-yellow-300"},{id:10,value:"retourner",name:"Retourned",text:"tw-text-purple-500",bg:"tw-bg-purple-500/10",textLight:"tw-text-purple-800",bgLight:"tw-bg-purple-100",ring:"tw-ring-purple-300"},{id:11,value:"reconfirmer",name:"Reconfirmed",text:"tw-text-indigo-500",bg:"tw-bg-indigo-500/10",textLight:"tw-text-indigo-800",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-300"},{id:12,value:"paid",name:"Paid",text:"tw-text-emerald-500",bg:"tw-bg-emerald-500/10",textLight:"tw-text-emerald-800",bgLight:"tw-bg-emerald-100",ring:"tw-ring-emerald-300"},{id:13,value:"transfer",name:"Transferd",text:"tw-text-violet-500",bg:"tw-bg-violet-500/10",textLight:"tw-text-violet-800",bgLight:"tw-bg-violet-100",ring:"tw-ring-violet-300"},{id:14,value:"livrer-et-retourner",name:"Delivered & Return",text:"tw-text-cyan-500",bg:"tw-bg-cyan-500/10",textLight:"tw-text-cyan-800",bgLight:"tw-bg-cyan-100",ring:"tw-ring-cyan-300"},{id:15,value:"reconfirmer",name:"Reconfirmed",text:"tw-text-emerald-500",bg:"tw-bg-emerald-500/10",textLight:"tw-text-emerald-800",bgLight:"tw-bg-emerald-100",ring:"tw-ring-emerald-300"}],Rn=[null,"expidier","paid","transfer","dispatch"],In={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},Fn=(0,r._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),jn=(0,r._)("br",null,null,-1),Nn=(0,r._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),Mn={class:"tw-flex tw-justify-end tw-mt-2"};function Hn(t,e,a,i,o,l){const n=(0,r.up)("VueDatePicker"),d=(0,r.up)("popup-full");return(0,r.wg)(),(0,r.iD)("div",{key:a.order.id},[(0,r.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>l.cancel()),visible:a.visible},{default:(0,r.w5)((()=>[(0,r._)("div",In,[Fn,(0,r.Wm)(n,{modelValue:o.date,"onUpdate:modelValue":e[0]||(e[0]=t=>o.date=t),format:l.format},null,8,["modelValue","format"]),jn,Nn,(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[s.nr,o.note]]),(0,r._)("div",Mn,[(0,r.Wm)(X.T,{class:"tw-capitalize",loading:o.isLoading,variant:"flat",color:"green",onClick:l.handleConfirm},{default:(0,r.w5)((()=>[(0,r.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var Yn={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_agente_date=this.realDate,t.reported_agente_note=this.note,t.confirmation="reporter",this.isLoading=!0,xa.agenteUpdateConfirmation(t.id,"reporter",t).then((e=>{console.log(e.data),this.$alert({type:"success",title:"Order reported successfully"}),this.$store.dispatch("sale/update",{id:t.id,sale:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},format(t){const e=t.getDate(),a=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),s=t.getMonth()+1,r=s.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();return this.realDate=`${i}-${r}-${a}`,`${a}/${r}/${i}`},cancel(){this.$emit("cancel")}},mounted(){}};const Kn=(0,d.Z)(Yn,[["render",Hn]]);var Zn=Kn,Bn={props:["confirmation","id","sale"],components:{SaleConfirmationReporting:Zn},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",noteReporter:"",selectedId:0,allOptions:On,showPopupReporter:!1}},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleResolved(t){t?(this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))):this.showPopup=!1},handleClick(){this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))},handleClickReporter(){this.showPopupReporter=!1},async handleChange(t){if(t.id===this.selectedId)return!1;"confirmer"!==t.value&&"reporter"!==t.value?(this.selectedId=t.id,this.updateOrder()):"reporter"===t.value?this.showPopupReporter=!0:(this.nextOption=t.id,this.showPopup=!0),this.close()},async updateOrder(){return this.isLoading=!0,xa.agenteUpdateConfirmation(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmation(this.id,this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},async updateOrderWithNote(){return this.isLoading=!0,xa.agenteUpdateConfirmationWithNote(this.id,this.selected.value,this.note).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmationNote(this.id,this.selected.value,this.note),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateConfirmation(t,e){this.$store.dispatch("sale/updateConfirmation",{id:t,confirmation:e})},updateConfirmationNote(t,e,a){this.$store.dispatch("sale/updateConfirmationWithNote",{id:t,confirmation:e,note:a})}},mounted(){this.availableOptions.includes(this.confirmation)?this.selectedId=this.allOptions.find((t=>t.value==this.confirmation)).id:this.selectedId=0}};const Qn=(0,d.Z)(Bn,[["render",En]]);var Gn=Qn;const Jn={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},Xn=["onClick"],td={class:"tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100"},ed={key:1,class:"tw-relative tw-min-w-[100px] tw-flex tw-items-center"};function ad(t,e,a,s,i,o){return o.fetched?(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{key:a.affectation,class:"tw-relative tw-min-w-[100px]"},[(0,r._)("button",{onClick:e[0]||(e[0]=(...t)=>o.toggle&&o.toggle(...t)),class:"tw-whitespace-nowrap focus:tw-ring-4 tw-ring-neutral-200 tw-bg-neutral-600/10 tw-text-neutral-800 focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center",type:"button"},[(0,r.Uk)((0,J.zw)(o.selected.firstname)+" "+(0,J.zw)(o.selected.lastname)+" ",1),i.isLoading?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(et.t,{key:0,class:"tw-ml-1"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(i.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),i.isLoading?((0,r.wg)(),(0,r.j4)(et.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-loading")])),_:1})):(0,r.kq)("",!0)]),(0,r._)("div",{class:(0,J.C_)([{"tw-hidden":!i.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,r._)("ul",Jn,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.options,(t=>((0,r.wg)(),(0,r.iD)("li",{onClick:e=>o.handleChange(t),key:t.id},[(0,r._)("a",td,(0,J.zw)(t.firstname)+" "+(0,J.zw)(t.lastname),1)],8,Xn)))),128))])],2)])),[[Gt.L,o.close]]):((0,r.wg)(),(0,r.iD)("div",ed,[(0,r.Wm)(et.t,{class:"tw-animate-spin tw-ml-1 tw-text-orange-500"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-loading")])),_:1})]))}var sd={props:["affectation","id","sale"],data(){return{isOpen:!1,isLoading:!1,selectedId:null,old:null}},computed:{options(){return[{id:null,firstname:"select",lastname:""},...this.deliveries]},selected(){const t=[...this.deliveries.map((t=>parseInt(t.id)))];return null!=this.selectedId&&t.includes(parseInt(this.selectedId))?this.options.filter((t=>t.id==this.selectedId))[0]:{id:null,firstname:"select",lastname:""}},users(){return this.$store.getters["user/users"]},allDeliveries(){return this.users.filter((t=>"delivery"==t.role_name))},fetched(){return this.$store.getters["user/fetched"]},deliveries(){return this.allDeliveries.filter((t=>t.delivery_products.some((t=>this.sale.items.some((e=>e.product_id==t.product_id))))))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(this.old=this.affectation,t.id===this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()},updateOrder(){xa.agenteUpdateAffectaion(this.id,this.selectedId).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateAffectation(this.id,this.selected.id),this.isLoading=!1)}),(t=>{this.$handleApiError(t),this.isLoading=!1,this.selectedId=this.old}))},updateAffectation(t,e){this.$store.dispatch("sale/updateAffectation",{id:t,affectation:e})}},mounted(){this.selectedId=this.affectation}};const rd=(0,d.Z)(sd,[["render",ad]]);var id=rd;const od={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},ld=["onClick"];function nd(t,e,a,s,i,o){const l=(0,r.up)("SaleDeliveryReporting");return(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{key:a.delivery,class:"tw-relative tw-min-w-[100px]"},[(0,r._)("button",{onClick:e[0]||(e[0]=(...t)=>o.toggle&&o.toggle(...t)),class:(0,J.C_)([[o.selected.text,o.selected.bg,o.selected.ring],"focus:tw-ring-4 tw-min-w-[100px] focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between"]),type:"button"},[(0,r.Uk)((0,J.zw)(o.selected.name)+" ",1),i.isLoading?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(et.t,{key:0,class:"tw-ml-1"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(i.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),i.isLoading?((0,r.wg)(),(0,r.j4)(et.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-loading")])),_:1})):(0,r.kq)("",!0)],2),(0,r._)("div",{class:(0,J.C_)([{"tw-hidden":!i.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,r._)("ul",od,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.options,(t=>((0,r.wg)(),(0,r.iD)("li",{onClick:e=>o.handleChange(t),key:t.id},[(0,r._)("a",{class:(0,J.C_)(["tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100",[t.text,t.bg]])},(0,J.zw)(t.name),3)],8,ld)))),128))])],2),(0,r.Wm)(l,{order:a.sale,visible:i.showPopupReporter,onCancel:e[1]||(e[1]=t=>i.showPopupReporter=!1)},null,8,["order","visible"])])),[[Gt.L,o.close]])}const dd={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},wd=(0,r._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),cd=(0,r._)("br",null,null,-1),ud=(0,r._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),pd={class:"tw-flex tw-justify-end tw-mt-2"};function md(t,e,a,i,o,l){const n=(0,r.up)("VueDatePicker"),d=(0,r.up)("popup-full");return(0,r.wg)(),(0,r.iD)("div",{key:a.order.id},[(0,r.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>l.cancel()),visible:a.visible},{default:(0,r.w5)((()=>[(0,r._)("div",dd,[wd,(0,r.Wm)(n,{modelValue:o.date,"onUpdate:modelValue":e[0]||(e[0]=t=>o.date=t),format:l.format},null,8,["modelValue","format"]),cd,ud,(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[s.nr,o.note]]),(0,r._)("div",pd,[(0,r.Wm)(X.T,{class:"tw-capitalize",loading:o.isLoading,variant:"flat",color:"green",onClick:l.handleConfirm},{default:(0,r.w5)((()=>[(0,r.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var hd={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_delivery_date=this.realDate,t.reported_delivery_note=this.note,t.delivery="reporter",this.isLoading=!0,xa.deliveryUpdateDelivery(t.id,"reporter",t).then((()=>{this.$alert({type:"success",title:"Order reported successfully"}),this.$store.dispatch("sale/update",{id:t.id,sale:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},format(t){const e=t.getDate(),a=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),s=t.getMonth()+1,r=s.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();return this.realDate=`${i}-${r}-${a}`,`${a}/${r}/${i}`},cancel(){this.$emit("cancel")}},mounted(){}};const gd=(0,d.Z)(hd,[["render",md]]);var fd=gd,vd={props:["delivery","id","sale"],components:{SaleDeliveryReporting:fd},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",selectedId:0,allOptions:qn,showPopupReporter:!1}},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){return t.id!==this.selectedId&&("reporter"!==t.value?(this.selectedId=t.id,this.updateOrder(),this.close(),!0):void("reporter"==t.value&&(this.showPopupReporter=!0,this.close())))},async updateOrder(){return this.isLoading=!0,xa.deliveryUpdateDelivery(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateDelivery(this.id,this.selected.value),this.isLoading=!1),"QUANTITY_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.message})}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateDelivery(t,e){this.$store.dispatch("sale/updateDelivery",{id:t,delivery:e})}},mounted(){this.availableOptions.includes(this.delivery)?this.selectedId=this.allOptions.find((t=>t.value==this.delivery)).id:this.selectedId=0}};const yd=(0,d.Z)(vd,[["render",nd]]);var _d=yd;const xd={key:0};function bd(t,e,a,s,i,o){const l=(0,r.up)("SaleHistory"),n=(0,r.up)("popup-full"),d=(0,r.up)("UpdateSale");return a.sale?((0,r.wg)(),(0,r.iD)("div",xd,[(0,r.Wm)(X.T,{link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+a.sale.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"]),t.$can("update_sale")?((0,r.wg)(),(0,r.j4)(X.T,{key:0,onClick:e[0]||(e[0]=t=>i.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,r.kq)("",!0),(t.$can("view_sale"),(0,r.kq)("",!0)),(t.$can("delete_sale"),(0,r.kq)("",!0)),(0,r.Wm)(X.T,{onClick:e[2]||(e[2]=t=>i.showHistoryPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"teal",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-sort-clock-ascending-outline")])),_:1})])),_:1}),(0,r.Wm)(n,{visible:i.showHistoryPopup,onCancel:e[4]||(e[4]=t=>i.showHistoryPopup=!1)},{default:(0,r.w5)((()=>[i.showHistoryPopup?((0,r.wg)(),(0,r.j4)(l,{key:0,onCancel:e[3]||(e[3]=t=>i.showHistoryPopup=!1),sale:a.sale},null,8,["sale"])):(0,r.kq)("",!0)])),_:1},8,["visible"]),(0,r.Wm)(d,{visible:i.showUpdatePopup,"onUpdate:visible":e[5]||(e[5]=t=>i.showUpdatePopup=t),order:a.sale},null,8,["visible","order"])])):(0,r.kq)("",!0)}var kd=a(7103),Cd=a(795),Dd=a(2773);const Sd={class:"md:tw-w-[50%] tw-max-h-full tw-relative tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},zd={key:0,class:"tw-w-full tw-h-full"},Ud={key:1,class:"tw-p-5"},Ld={class:"d-flextw-flex-col justify-space-between flex-grow-1"},Pd={class:"tw-flex tw-items-center tw-gap-2 tw-my-2"},Ad={class:"tw-text-sm tw-capitalize tw-text-neutral-600"},Wd={class:"flex-shrink-0 tw-text-neutral-500 tw-flex tw-items-center tw-gap-2 tw-text-sm"},$d={class:"d-flextw-flex-col justify-space-between flex-grow-1"},Ed={class:"tw-flex tw-flex-col tw-my-2"},Od=(0,r._)("div",null," New Order Created ",-1),Td={class:"flex-shrink-0 tw-flex tw-items-center tw-gap-2 tw-text-sm"};function Vd(t,e,a,s,i,o){const l=(0,r.up)("LoadingAnimation");return(0,r.wg)(),(0,r.iD)("div",Sd,[i.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",zd,[(0,r.Wm)(l,{class:"text-primary-color"})])),(0,r.Wm)(X.T,{onClick:o.cancel,icon:"mdi-close",variant:"flat",size:"w-small",color:"red",class:"tw-absolute tw-top-3 tw-z-10 tw-right-3"},null,8,["onClick"]),i.isLoaded?((0,r.wg)(),(0,r.iD)("div",Ud,[(0,r.Wm)(Cd.R,{density:"compact",side:"end"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.events,(t=>((0,r.wg)(),(0,r.j4)(Dd.N,{key:t.id,class:"mb-4","dot-color":o.eventColor(t.type),size:"x-small"},{default:(0,r.w5)((()=>[(0,r._)("div",Ld,[(0,r._)("div",Pd,[(0,r.Wm)(kd.v,{class:"ms-0 tw-capitalize tw-w-fit",color:o.eventColor(t.type),label:"",size:"small"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(t.type),1)])),_:2},1032,["color"]),"responsibility"!=t.type?((0,r.wg)(),(0,r.j4)(et.t,{key:0,size:"x-small",color:"grey"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-arrow-right")])),_:1})):(0,r.kq)("",!0),"responsibility"!=t.type?((0,r.wg)(),(0,r.j4)(kd.v,{key:1,class:"ms-0 tw-capitalize tw-w-fit",color:"green",label:"",size:"small"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(t.historique),1)])),_:2},1024)):(0,r.kq)("",!0)]),(0,r._)("div",Ad,(0,J.zw)(t.users.firstname)+" "+(0,J.zw)(t.users.lastname),1),(0,r._)("div",Wd,[(0,r._)("span",null,(0,J.zw)(t.created_at?.split("T")[0]),1),(0,r._)("span",null,(0,J.zw)(t.created_at?.split("T")[1].split(".")[0]),1)])])])),_:2},1032,["dot-color"])))),128)),(0,r.Wm)(Dd.N,{class:"mb-4","dot-color":"green",size:"x-small"},{default:(0,r.w5)((()=>[(0,r._)("div",$d,[(0,r._)("div",Ed,[(0,r.Wm)(kd.v,{class:"ms-0 tw-capitalize tw-w-fit",color:"green",label:"",size:"small"},{default:(0,r.w5)((()=>[(0,r.Uk)(" Order Created ")])),_:1}),Od]),(0,r._)("div",Td,[(0,r._)("span",null,(0,J.zw)(a.sale.created_at?.split("T")[0]),1),(0,r._)("span",null,(0,J.zw)(a.sale.created_at?.split("T")[1].split(".")[0]),1)])])])),_:1})])),_:1})])):(0,r.kq)("",!0)])}var qd={props:["sale"],data(){return{isLoaded:!1,allEvents:[]}},computed:{events(){return[...this.allEvents].reverse()}},methods:{cancel(){this.$emit("cancel")},getHistory(){this.isLoaded=!1,xa.history(this.sale.id).then((t=>{console.log(t.data),this.allEvents=t.data.data.orders}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))},eventColor(t){let e={confirmation:"primary-color",delivery:"blue",upsell:"purple",affectation:"cyan"};return["confirmation","delivery","upsell","affectation"].includes(t)?e[t]:"primary-color"}},mounted(){this.getHistory()}};const Rd=(0,d.Z)(qd,[["render",Vd]]);var Id=Rd;const Fd={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},jd={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[950px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},Nd=(0,r._)("h1",{class:"tw-text-lg"},"Update Order",-1),Md={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},Hd={class:"md:tw-col-span-6 tw-col-span-12"},Yd=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),Kd={class:"md:tw-col-span-6 tw-col-span-12"},Zd=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),Bd={class:"md:tw-col-span-6 tw-col-span-12"},Qd=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),Gd=["value"],Jd=["value"],Xd={class:"md:tw-col-span-6 tw-col-span-12"},tw=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),ew={class:"md:tw-col-span-12 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},aw=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Confirmation",-1),sw={class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},rw={class:"tw-col-span-12"},iw=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note:",-1),ow={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},lw={class:"tw-col-span-12 md:tw-col-span-4"},nw=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Date:",-1),dw={class:"tw-col-span-12 md:tw-col-span-8"},ww=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Note:",-1),cw={class:"md:tw-col-span-6 tw-col-span-12"},uw=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Affectation",-1),pw={class:"md:tw-col-span-6 tw-col-span-12"},mw=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Upsell",-1),hw=["value"],gw={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-4"},fw={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},vw={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit -tw-rotate-90 tw-scale-75"},yw=(0,r._)("div",{class:"tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),_w={class:"tw-flex tw-flex-col tw-justify-center"},xw=(0,r._)("p",{class:"tw-col-span-12 tw-mt-5 tw-mb-2"},"Order Items",-1),bw={key:1,class:"tw-col-span-12 tw-rounded tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},kw={key:2,class:"md:tw-col-span-12 tw-col-span-12"},Cw={class:"tw-max-w-full tw-overflow-auto"},Dw={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},Sw={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},zw={class:"tw-mx-auto tw-w-[50px] tw-h-[35px] tw-shadow tw-shadow-gray-200 tw-rounded tw-overflow-hidden tw-cursor-pointer"},Uw=["src"],Lw={scope:"row",class:"tw-pr-6 tw-py-2 tw-font-medium tw-text-gray-900"},Pw=["onUpdate:modelValue"],Aw=(0,r._)("option",{value:0},"Select",-1),Ww=["value"],$w={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Ew=["disabled","onUpdate:modelValue"],Ow=(0,r._)("option",{value:0},"Select",-1),Tw=["value"],Vw={key:0},qw={key:1},Rw={key:2},Iw={key:3},Fw=["value"],jw={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Nw={class:"md:tw-col-span-6 tw-col-span-12"},Mw=["onUpdate:modelValue"],Hw={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Yw={key:0},Kw={key:1,class:"md:tw-col-span-6 tw-col-span-12"},Zw=["onUpdate:modelValue"],Bw={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Qw={class:"tw-w-full tw-col-span-12 tw-flex tw-justify-end tw-mt-3"},Gw=(0,r._)("span",{class:"!tw-text-sm !tw-capitalize"},"Add",-1),Jw={class:"md:tw-col-span-12 tw-col-span-12"},Xw={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},tc=(0,r._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),ec={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},ac=(0,r._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-mb-2 tw-whitespace-nowrap"},"Price: ",-1),sc={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},rc=(0,r._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),ic={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},oc=(0,r._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-whitespace-nowrap"},"Total Price: ",-1),lc={class:"tw-text-xl tw-text-green-500 tw-font-bold tw-px-2 tw-py-1 tw-rounded tw-bg-green-100"},nc={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},dc=(0,r._)("span",{class:"text-white"}," Cancel ",-1),wc=(0,r._)("span",{class:"text-white"}," Update ",-1);function cc(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation"),d=(0,r.up)("AddOrderConfirmation"),w=(0,r.up)("AddOrderAffectation"),c=(0,r.up)("ProductOffers"),u=(0,r.up)("popup-full");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(u,{onCancel:e[14]||(e[14]=e=>t.$emit("update:visible",!1)),visible:a.visible},{default:(0,r.w5)((()=>[l.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",Fd,[(0,r.Wm)(n)])),l.isLoaded?((0,r.wg)(),(0,r.iD)("div",jd,[Nd,(0,r._)("div",Md,[(0,r._)("div",Hd,[Yd,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sale.fullname]])]),(0,r._)("div",Kd,[Zd,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>o.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sale.phone]])]),(0,r._)("div",Bd,[Qd,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[(0,r._)("option",{disabled:"",value:o.sale.city},(0,J.zw)(o.sale.city),9,Gd),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.cities,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.name,key:t.id},(0,J.zw)(t.name),9,Jd)))),128))],512),[[s.bM,o.sale.city]])]),(0,r._)("div",Xd,[tw,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>o.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sale.adresse]])]),(0,r._)("div",ew,[aw,(0,r.Wm)(d,{order:o.sale,id:o.sale.id,confirmation:o.sale.confirmation,"onUpdate:confirmation":e[4]||(e[4]=t=>o.sale.confirmation=t),onConfirmed:e[5]||(e[5]=t=>o.sale.note=t),onReported:l.handleReported,onChange:l.handleConfirmationChange},null,8,["order","id","confirmation","onReported","onChange"]),(0,r._)("div",sw,[(0,r._)("div",rw,[iw,(0,r.wy)((0,r._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[6]||(e[6]=t=>o.sale.note=t)},null,512),[[s.nr,o.sale.note]])])]),"reporter"==o.sale.confirmation&&o.sale.reported_agente_date?((0,r.wg)(),(0,r.iD)("div",ow,[(0,r._)("div",lw,[nw,(0,r._)("div",null,(0,J.zw)(o.sale.reported_agente_date.split("T")[0]),1)]),(0,r._)("div",dw,[ww,(0,r.wy)((0,r._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[7]||(e[7]=t=>o.sale.reported_agente_note=t)},null,512),[[s.nr,o.sale.reported_agente_note]])])])):(0,r.kq)("",!0)]),(0,r._)("div",cw,[uw,(0,r.Wm)(w,{"product-ids":l.product_ids,items:o.items,"onUpdate:items":e[8]||(e[8]=t=>o.items=t),order:o.sale,confirmation:o.sale.confirmation,affectation:o.sale.affectation,"onUpdate:affectation":e[9]||(e[9]=t=>o.sale.affectation=t),id:o.sale.id},null,8,["product-ids","items","order","confirmation","affectation","id"])]),(0,r._)("div",pw,[mw,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>o.sale.upsell=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.upsells,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.value,key:t.id},(0,J.zw)(t.name),9,hw)))),128))],512),[[s.bM,o.sale.upsell]])]),(0,r.kq)("",!0),(0,r._)("div",gw,[(0,r._)("div",fw,[(0,r._)("label",vw,[(0,r.wy)((0,r._)("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=t=>o.sale.counts_from_warehouse=t),class:"tw-sr-only tw-peer"},null,512),[[s.e8,o.sale.counts_from_warehouse]]),yw]),(0,r._)("label",_w,[(0,r._)("span",{class:(0,J.C_)([[o.sale.counts_from_warehouse?"tw-text-orange-500":"tw-text-neutral-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Warehouse",2),(0,r._)("span",{class:(0,J.C_)([[o.sale.counts_from_warehouse?"tw-text-neutral-500":"tw-text-orange-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Delivery",2)])])]),xw,o.items.length?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",bw," No Order items ")),o.items.length?((0,r.wg)(),(0,r.iD)("div",kw,[(0,r._)("div",Cw,[((0,r.wg)(),(0,r.iD)("table",{key:o.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,r._)("thead",Dw,[(0,r._)("tr",null,[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,r._)("th",{class:(0,J.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,r._)("div",Sw,(0,J.zw)(t),1)],2))),64))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.items,((t,e)=>((0,r.wg)(),(0,r.iD)("tr",{key:t.product.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[((0,r.wg)(),(0,r.iD)("th",{scope:"row",class:"tw-px-2 tw-py-2",key:t.product.id},[(0,r._)("div",zw,[l.product_images[e]?((0,r.wg)(),(0,r.iD)("img",{key:0,class:"tw-w-full tw-h-full tw-object-contain",src:o.serverUrl+"storage/"+l.product_images[e]},null,8,Uw)):(0,r.kq)("",!0)])])),(0,r._)("th",Lw,[(0,r._)("div",null,[(0,r._)("div",null,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e=>t.product.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[Aw,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.filtredProducts,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.name),9,Ww)))),128))],8,Pw),[[s.bM,t.product.id]])])])]),(0,r._)("th",$w,[(0,r._)("div",null,[0!=t.product.id?(0,r.wy)(((0,r.wg)(),(0,r.iD)("select",{key:0,disabled:1==l.getVariations(t.product)?.variations?.length,"onUpdate:modelValue":e=>t.product_variation.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[Ow,l.getVariations(t.product)?.variations?.length>1?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:0},(0,r.Ko)(l.getVariations(t.product)?.variations,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},[t.size||t.color?t.size&&"-"!=t.size&&t.color&&"-"!=t.color?((0,r.wg)(),(0,r.iD)("p",qw,(0,J.zw)(t.size)+" / "+(0,J.zw)(t.color),1)):t.size&&"-"!=t.size?((0,r.wg)(),(0,r.iD)("p",Rw,(0,J.zw)(t.size),1)):t.color?((0,r.wg)(),(0,r.iD)("p",Iw,(0,J.zw)(t.color),1)):(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",Vw,"-"))],8,Tw)))),128)):((0,r.wg)(),(0,r.iD)("option",{key:1,value:l.getVariations(t.product)?.variations[0]?.id}," Default ",8,Fw))],8,Ew)),[[s.bM,t.product_variation.id]]):(0,r.kq)("",!0)])]),(0,r._)("th",jw,[(0,r._)("div",Nw,[(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,Mw),[[s.nr,t.quantity]])])]),(0,r._)("th",Hw,[(0,r._)("div",null,[null==t.price?((0,r.wg)(),(0,r.iD)("div",Yw," - ")):((0,r.wg)(),(0,r.iD)("div",Kw,[(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":e=>t.price=e,placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,Zw),[[s.nr,t.price]])]))])]),(0,r._)("th",Bw,[(0,r._)("div",null,[(0,r.Wm)(X.T,{onClick:e=>l.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])]))])])):(0,r.kq)("",!0),(0,r._)("div",Qw,[(0,r._)("div",null,[(0,r.Wm)(X.T,{onClick:l.addNewRow,class:"mr-2 !tw-px-1 !tw-py-1 !tw-pr-2 tw-flex tw-items-center tw-gap-2","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-plus")])),_:1}),Gw])),_:1},8,["onClick"])])]),(0,r._)("div",Jw,[(0,r.Wm)(c,{"product-ids":l.product_ids},null,8,["product-ids"])]),(0,r._)("div",Xw,[tc,(0,r._)("div",ec,[ac,(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":e[13]||(e[13]=t=>o.sale.price=t),class:"tw-py-1 tw-max-w-[100px] tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sale.price]])])]),(0,r._)("div",sc,[rc,(0,r._)("div",ic,[oc,(0,r._)("div",lc,(0,J.zw)(o.currency)+" "+(0,J.zw)(l.total_price),1)])])]),(0,r._)("div",nc,[(0,r.Wm)(X.T,{onClick:l.handleCancel,color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[dc])),_:1},8,["onClick"]),(0,r.Wm)(X.T,{loading:o.isLoading,onClick:l.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[wc])),_:1},8,["loading","onClick"])])])):(0,r.kq)("",!0)])),_:1},8,["visible"])])}const uc={class:"tw-relative"},pc=["value"],mc={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},hc=(0,r._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter note",-1),gc={class:"tw-flex tw-justify-end tw-mt-2"};function fc(t,e,a,i,o,l){const n=(0,r.up)("popup-full"),d=(0,r.up)("AddOrderReporting");return(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{key:a.confirmation,class:"tw-relative tw-min-w-[100px] tw-w-full"},[(0,r._)("div",null,[(0,r._)("div",uc,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.confirmationValue=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.allOptions,(t=>((0,r.wg)(),(0,r.iD)("option",{class:(0,J.C_)([t.text,!t.value&&"!tw-text-gray-700"]),key:t.id,value:t.value},(0,J.zw)(t.name),11,pc)))),128))],512),[[s.bM,l.confirmationValue]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])]),(0,r.Wm)(n,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>o.showPopup=!1),visible:o.showPopup},{default:(0,r.w5)((()=>[(0,r._)("div",mc,[hc,(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.note=t),cols:"30",rows:"3",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[s.nr,o.note]]),(0,r._)("div",gc,[(0,r.Wm)(X.T,{class:"tw-capitalize",loading:o.isLoading,variant:"flat",color:"green",onClick:l.handleClick},{default:(0,r.w5)((()=>[(0,r.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"]),(0,r.Wm)(d,{order:a.order,onConfirm:l.handleReportedDate,visible:o.showPopupReporter,onCancel:e[3]||(e[3]=t=>o.showPopupReporter=!1)},null,8,["order","onConfirm","visible"])])),[[Gt.L,l.close]])}const vc={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},yc=(0,r._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),_c=(0,r._)("br",null,null,-1),xc=(0,r._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),bc={class:"tw-flex tw-justify-end tw-mt-2"};function kc(t,e,a,i,o,l){const n=(0,r.up)("VueDatePicker"),d=(0,r.up)("popup-full");return(0,r.wg)(),(0,r.iD)("div",{key:a.order.id},[(0,r.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>l.cancel()),visible:a.visible},{default:(0,r.w5)((()=>[(0,r._)("div",vc,[yc,(0,r.Wm)(n,{modelValue:o.date,"onUpdate:modelValue":e[0]||(e[0]=t=>o.date=t),format:l.format},null,8,["modelValue","format"]),_c,xc,(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[s.nr,o.note]]),(0,r._)("div",bc,[(0,r.Wm)(X.T,{class:"tw-capitalize",loading:o.isLoading,variant:"flat",color:"green",onClick:l.handleConfirm},{default:(0,r.w5)((()=>[(0,r.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var Cc={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_agente_date=this.realDate,t.reported_agente_note=this.note,t.confirmation="reporter",this.$emit("confirm",{reported_agente_date:this.realDate,reported_agente_note:this.note}),this.isLoading=!0},format(t){const e=t.getDate(),a=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),s=t.getMonth()+1,r=s.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();return this.realDate=`${i}-${r}-${a}`,`${a}/${r}/${i}`},cancel(){this.$emit("cancel")}}};const Dc=(0,d.Z)(Cc,[["render",kc]]);var Sc=Dc,zc={props:["confirmation","id","order"],components:{AddOrderReporting:Sc},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",selectedId:0,allOptions:On,reported_agente_date:null,reported_agente_note:"",showPopupReporter:!1}},watch:{},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},confirmationValue:{get(){return this.confirmation},set(t){switch(t){case"reporter":this.showPopupReporter=!0;break;case"confirmer":this.showPopup=!0;break;default:this.$emit("update:confirmation",t);break}}},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleResolved(t){t?(this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))):this.showPopup=!1},handleReportedDate(t){this.reported_agente_date=t.reported_agente_date,this.reported_agente_note=t.reported_agente_note,this.$emit("update:confirmation","reporter"),this.$emit("reported",t),this.showPopupReporter=!1},handleClick(){this.showPopup=!1,this.$emit("update:confirmation","confirmer"),this.$emit("confirmed",this.note)},async handleChange(t){if(t.id===this.selectedId)return!1;"confirmer"!==t.value&&"reporter"!==t.value?(this.selectedId=t.id,this.updateOrder()):"reporter"===t.value?this.showPopupReporter=!0:(this.nextOption=t.id,this.showPopup=!0),this.close()},async updateOrder(){return this.isLoading=!0,xa.agenteUpdateConfirmation(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmation(this.id,this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t)))},async updateOrderWithNote(){return this.isLoading=!0,xa.agenteUpdateConfirmationWithNote(this.id,this.selected.value,this.note).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmationWithNote(this.id,this.selected.value,this.note),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateConfirmation(t,e){this.$store.dispatch("order/updateConfirmation",{id:t,confirmation:e}),this.$emit("update",e)},updateConfirmationWithNote(t,e,a){this.$store.dispatch("order/updateConfirmationWithNote",{id:t,confirmation:e,note:a}),this.$emit("update",e)}},mounted(){this.availableOptions.includes(this.confirmation)?this.selectedId=this.allOptions.find((t=>t.value==this.confirmation)).id:this.selectedId=0}};const Uc=(0,d.Z)(zc,[["render",fc]]);var Lc=Uc;const Pc={class:"tw-relative"},Ac=["disabled"],Wc=["value"],$c={key:1,class:"tw-relative tw-min-w-[100px] tw-flex tw-items-center"};function Ec(t,e,a,i,o,l){return o.fetched?(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{key:a.affectation,class:"tw-relative tw-min-w-[100px]"},[(0,r._)("div",null,[(0,r._)("div",Pc,[(0,r.wy)((0,r._)("select",{disabled:"confirmer"!=a.confirmation,"onUpdate:modelValue":e[0]||(e[0]=t=>l.affectationValue=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.options,(t=>((0,r.wg)(),(0,r.iD)("option",{key:t.id,value:t.id},(0,J.zw)(t.firstname+" "+t.lastname),9,Wc)))),128))],8,Ac),[[s.bM,l.affectationValue]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])])])),[[Gt.L,l.close]]):((0,r.wg)(),(0,r.iD)("div",$c,[(0,r.Wm)(et.t,{class:"tw-animate-spin tw-ml-1 tw-text-orange-500"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-loading")])),_:1})]))}var Oc={props:["affectation","id","order","confirmation","items","productIds"],data(){return{isOpen:!1,isLoading:!1,selectedId:null,fetched:!1}},computed:{options(){return[{id:null,firstname:"select",lastname:""},...this.deliveries]},order_items(){return this.items},affectationValue:{get(){return this.affectation},set(t){this.$emit("update:affectation",t)}},selected(){const t=[...this.deliveries.map((t=>parseInt(t.id)))];return null!=this.selectedId&&t.includes(parseInt(this.selectedId))?this.options.filter((t=>t.id==this.selectedId))[0]:{id:null,firstname:"select",lastname:""}},users(){return this.$store.getters["user/users"]},allDeliveries(){return this.users.filter((t=>"delivery"==t.role_name))},deliveries(){return this.allDeliveries.filter((t=>t.delivery_products.some((t=>this.productIds.includes(t.product_id)))))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(t.id===this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()},getUsers(){this.fetched=!1,Q.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),this.$store.dispatch("user/setFetched",!0),this.fetched=!0}})).catch(this.$handleApiError)}},mounted(){this.selectedId=this.affectation,this.getUsers()}};const Tc=(0,d.Z)(Oc,[["render",Ec]]);var Vc=Tc;const qc=(0,r._)("h1",{class:"tw-mb-2 tw-font-medium"},"Offers",-1),Rc={class:"tw-relative tw-overflow-x-auto tw-border-b sm:tw-rounded"},Ic={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Fc=(0,r._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-bg-gray-50"},[(0,r._)("tr",null,[(0,r._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Product Name"),(0,r._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Quantity"),(0,r._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Price"),(0,r._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Note")])],-1),jc={class:"tw-px-6 tw-py-4"},Nc={class:"tw-px-6 tw-py-4"},Mc={class:"tw-px-6 tw-py-4"},Hc={class:"tw-px-6 tw-py-4"},Yc={class:"tw-max-w-[250px] tw-text-sm"},Kc={key:0},Zc=(0,r._)("td",{colspan:"5"},[(0,r._)("p",{class:"tw-text-center tw-p-5"}," No Offers ")],-1),Bc=[Zc];function Qc(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("div",null,[qc,(0,r._)("div",null,[(0,r._)("div",Rc,[(0,r._)("table",Ic,[Fc,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.offers,(t=>((0,r.wg)(),(0,r.iD)("tr",{key:t.key,class:"odd:tw-bg-white even:tw-bg-gray-50 tw-border-b"},[(0,r._)("td",jc,(0,J.zw)(o.getProduct(t.product_id)?.name),1),(0,r._)("td",Nc,(0,J.zw)(t.quantity),1),(0,r._)("td",Mc,(0,J.zw)(t.price)+" "+(0,J.zw)(i.currency),1),(0,r._)("td",Hc,[(0,r._)("p",Yc,(0,J.zw)(t.note),1)])])))),128)),0==o.offers.length?((0,r.wg)(),(0,r.iD)("tr",Kc,Bc)):(0,r.kq)("",!0)])])])])])}var Gc={props:["productIds"],data(){return{currency:N}},computed:{products(){return this.$store.getters["product/products"]},offers(){return this.products.filter((t=>this.productIds.includes(t.id))).flatMap((t=>t.offers))}},methods:{getProduct(t){return this.products.find((e=>e.id==t))}}};const Jc=(0,d.Z)(Gc,[["render",Qc]]);var Xc=Jc,tu={components:{AddOrderConfirmation:Lc,AddOrderAffectation:Vc,ProductOffers:Xc},props:["visible","order"],data(){return{upsells:Vn,serverUrl:j,currency:N,isLoading:!1,isAddItem:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],reported_date:null,price:0,sale:{fullname:"",phone:"",city:"",adresse:"",price:0,upsell:null,confirmation:null,counts_from_warehouse:!1}}},watch:{product_id(){this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0},"sale.confirmation":{deep:!0,handler(t){"confirmer"!=t&&(this.sale.affectation=null,this.sale.delivery=null)}},product_ids:{deep:!0,handler(t,e){this.items.map(((a,s)=>{if(0==a.product.id)return a;const r=this.getVariations(a.product)?.variations;return e[s]==t[a]||r.some((t=>t.id==a.product_variation.id))||(a.product_variation={id:0},a.product_variation_id=0),1==r?.length&&(a.product_variation=r[0],a.product_variation_id=r[0].id),a}))}}},computed:{products(){return this.$store.getters["product/products"]},product_images(){return this.items.map((t=>0==t.product.id?null:this.products.find((e=>e.id==t.product.id))?.image))},product_ids(){return this.items.map((t=>t.product.id))},isLoaded(){return this.$store.getters["product/fetched"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,a)=>e.indexOf(t.id)===a))},filtredProducts(){return this.products},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},selectedProduct(){return this.products.find((t=>t.id==this.product_id))},total_price:{get(){const t=this.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(this.sale.price?this.sale.price:0)+parseFloat(t)}},isItemsValid(){if(0==this.items.length)return!1;const t=this.items.some((t=>0==t.product.id||0==t.product_variation_id||0==t.quantity));return!t},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city}},methods:{deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},handleConfirmationChange(){"confirmer"!=this.sale.confirmation&&(this.sale.affectation=null)},addNewRow(){const t={id:this.item_id,product_id:0,product_ref:null,product:{id:0},product_variation:{id:0},product_variation_id:0,order_id:this.order.id,quantity:0,price:0};this.items.push(t)},getVariations(t){return this.products.find((e=>e.id==t.id))},formatItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const a=e.variations.find((e=>e.id==t.product_variation.id));return a?{...t,product:e,product_id:e.id,product_variation:a,product_variation_id:a.id,product_ref:e.ref}:t}));return this.items=t,t},addItem(){if([this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),a={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:this.price};this.items.push(a),this.product_id=0,this.product_variation_id=0,this.price=0,this.item_id+=1},update(){if(this.formatItems(),!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;if("annuler"==this.sale.confirmation&&!this.sale.note)return this.$alert({type:"warning",title:"Add Cancellation note."}),!1;if(!this.isItemsValid)return this.$alert({type:"warning",title:"Order Items are not valid"}),!1;this.isLoading=!0;const t={id:this.sale.id,fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,upsell:this.sale.upsell,counts_from_warehouse:this.sale.counts_from_warehouse,orderItems:this.items,confirmation:this.sale.confirmation,note:this.sale.note,affectation:this.sale.affectation,reported_agente_note:this.sale.reported_agente_note,reported_agente_date:this.sale.reported_agente_date};"confirmer"!=t.confirmation&&(t.affectation=null,t.delivery=null),this.isLoading=!0,xa.update(t.id,t).then((e=>{"SUCCESS"==e.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"Order updated"}),this.$store.dispatch("sale/update",{id:t.id,sale:e.data.data.sale}),this.$emit("update:visible",!1),this.$emit("updateOrder",e.data.data.sale))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},handleCancel(){this.sale={...this.order},this.items=[...this.order.items],this.$emit("update:visible",!1)},handleReported(t){this.sale.reported_agente_note=t.reported_agente_note,this.sale.reported_agente_date=t.reported_agente_date},checkVariant(t,e){const a=this.products.find((e=>e.id==t));if(!a)return{exists:!1};let s=a.variations.find((t=>t.id==e));return s||(s=a.variations.length>0?a.variations[0]:null),{exists:!0,variation:s}},getProducts(){return ss.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.sale={...this.order},this.items=[...this.order.items]}};const eu=(0,d.Z)(tu,[["render",cc]]);var au=eu,su={props:["sale"],name:"saleActions",components:{SaleHistory:Id,UpdateSale:au},data(){return{showPopup:!1,showUpdatePopup:!1,showHistoryPopup:!1,isLoading:!1}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{}};const ru=(0,d.Z)(su,[["render",bd]]);var iu=ru,ou={props:{sales:{required:!0},selectedReset:{required:!1,default:[]}},components:{SaleConfirmation:Gn,SaleAffectation:id,SaleDelivery:_d,SaleActions:iu},data(){return{allowedLimit:[5,10,20,50,100,300,500],currentPage:1,paginationLimit:50,todayDate:null,selected:[],isAllSelected:!1,columns:["id","date","city","products","client","confirmation","affectation","delivery","price","actions"]}},watch:{selectedReset(t){this.selected=t,0==this.selected.length&&(this.isAllSelected=!1)},paginationLimit(){this.currentPage=1},selected(t){this.$emit("selected",t)}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.sales.length/this.paginationLimit)},items(){const t=[...this.reportedForToday,...this.sales.filter((t=>!this.isReportedToday(t)))];return t.slice(this.prevRange,this.nextRange)},reportedForToday(){return this.sales.filter(this.isReportedToday)}},methods:{getPrice(t){return Ki(t)},isReportedToday(t){return this.isConfirmationReportedToday(t)||this.isDeliveryReportedToday(t)},isDeliveryReportedToday(t){return"reporter"==t.delivery&&t.reported_delivery_date?.split("T")[0]==this.todayDate},isConfirmationReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date?.split("T")[0]==this.todayDate},handleSelect(t,e){t.target.checked?this.selected=[...this.selected,e]:this.selected=this.selected.filter((t=>t!=e))},isSelected(t){return this.selected.includes(t)},handleSelectAll(t){t.target.checked?this.selected=[...this.items.map((t=>t.id))]:this.selected=[]}},mounted(){const t=new Date,e=t.getDate(),a=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),s=t.getMonth()+1,r=s.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();this.todayDate=`${i}-${r}-${a}`}};const lu=(0,d.Z)(ou,[["render",Un]]);var nu=lu,du={components:{SalesTable:nu},data(){return{columns:[{prop:"id",name:"#"},{prop:"city",name:"City"},{prop:"date",name:"Date"},{prop:"client",name:"Client"},{prop:"product",name:"Product"},{prop:"upsell",name:"Upsell"},{prop:"confirmation",name:"Confirmation"},{prop:"affectation",name:"Affected"},{prop:"delivery",name:"Delivery"},{prop:"quantity",name:"Qty"},{prop:"price",name:"Price"},{prop:"actions",name:"Actions"}]}},computed:{sales(){return this.$store.getters["notification/notifications"]["reportedOrderAgente"]||[]},fetched(){return this.$store.getters["notification/fetched"]}}};const wu=(0,d.Z)(du,[["render",Tl]]);var cu=wu;const uu={key:0};function pu(t,e,a,s,i,o){const l=(0,r.up)("SalesTable");return o.fetched?((0,r.wg)(),(0,r.iD)("div",uu,[((0,r.wg)(),(0,r.j4)(l,{key:o.sales.length,columns:i.columns,sales:o.sales},null,8,["columns","sales"]))])):(0,r.kq)("",!0)}var mu={components:{SalesTable:nu},data(){return{columns:[{prop:"id",name:"#"},{prop:"city",name:"City"},{prop:"date",name:"Date"},{prop:"client",name:"Client"},{prop:"product",name:"Product"},{prop:"upsell",name:"Upsell"},{prop:"confirmation",name:"Confirmation"},{prop:"affectation",name:"Affected"},{prop:"delivery",name:"Delivery"},{prop:"quantity",name:"Qty"},{prop:"price",name:"Price"},{prop:"actions",name:"Actions"}]}},computed:{sales(){return this.$store.getters["notification/notifications"]["reportedOrderDelivery"]||[]},fetched(){return this.$store.getters["notification/fetched"]}}};const hu=(0,d.Z)(mu,[["render",pu]]);var gu=hu;function fu(t,e,a,s,i,o){const l=(0,r.up)("ProductsTable");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(l,{columns:i.columns,products:o.products},null,8,["columns","products"])])}const vu={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},yu={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},_u={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},xu=(0,r._)("th",{scope:"col",class:"tw-p-4"},[(0,r._)("div",{class:"tw-flex tw-items-center"},[(0,r._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,r._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),bu={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},ku=(0,r._)("td",{class:"tw-w-4 tw-p-4"},[(0,r._)("div",{class:"tw-flex tw-items-center"},[(0,r._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,r._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),Cu={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},Du={class:"tw-px-6 tw-py-4"},Su={class:"tw-px-6 tw-py-4"},zu={class:"tw-px-6 tw-py-4"},Uu={class:"tw-px-6 tw-py-4"},Lu={class:"tw-px-6 tw-py-4"},Pu={class:"tw-px-6 tw-py-4"},Au={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},Wu={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},$u={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},Eu=(0,r._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),Ou=["value"],Tu={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},Vu={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},qu={class:"tw-text-white"};function Ru(t,e,a,i,o,l){const n=(0,r.up)("ProductActions");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",vu,[(0,r._)("table",yu,[(0,r._)("thead",_u,[(0,r._)("tr",null,[xu,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.columns,(t=>((0,r.wg)(),(0,r.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,r._)("div",bu,(0,J.zw)(t.name),1)])))),128))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.products,(t=>((0,r.wg)(),(0,r.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[ku,(0,r._)("th",Cu,(0,J.zw)(t.id),1),(0,r._)("td",Du,(0,J.zw)(t.ref),1),(0,r._)("td",Su,(0,J.zw)(t.name),1),(0,r._)("td",zu,(0,J.zw)(t.buying_price)+" "+(0,J.zw)(o.currency),1),(0,r._)("td",Uu,(0,J.zw)(t.selling_price)+" "+(0,J.zw)(o.currency),1),(0,r._)("td",Lu,(0,J.zw)(l.calculQty(t.variations)),1),(0,r._)("td",Pu,(0,J.zw)(t.created_at.split("T")[0]),1),(0,r._)("td",Au,[(0,r.Wm)(n,{product:t},null,8,["product"])])])))),128))])])]),(0,r._)("div",Wu,[(0,r._)("div",$u,[Eu,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.allowedLimit,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t,key:t},(0,J.zw)(t),9,Ou)))),128))],512),[[s.bM,o.paginationLimit]])]),(0,r._)("div",Tu,[(0,r._)("div",Vu,(0,J.zw)(l.prevRange+1)+" - "+(0,J.zw)(o.currentPage==l.pageCount?a.products.length:l.nextRange)+" of "+(0,J.zw)(a.products.length)+" items ",1),(0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.pageCount,(t=>((0,r.wg)(),(0,r.j4)(X.T,{onClick:e=>o.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==o.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,r.w5)((()=>[(0,r._)("span",qu,(0,J.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const Iu={class:"tw-flex tw-items-center tw-gap-1"};function Fu(t,e,a,s,i,o){const l=(0,r.up)("popup");return(0,r.wg)(),(0,r.iD)("div",Iu,[t.$can("update_product")?((0,r.wg)(),(0,r.j4)(X.T,{key:0,to:"/products/update/"+a.product.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-pencil-outline")])),_:1})])),_:1},8,["to"])):(0,r.kq)("",!0),t.$can("view_product")?((0,r.wg)(),(0,r.j4)(X.T,{key:1,to:"/products/"+a.product.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-eye-outline")])),_:1})])),_:1},8,["to"])):(0,r.kq)("",!0),t.$can("delete_product")?((0,r.wg)(),(0,r.j4)(X.T,{key:2,onClick:e[0]||(e[0]=t=>i.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(l,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this product?</p> You won't be able to revert this!",loading:i.isLoading,visible:i.showPopup,onResolved:o.handleResolved},null,8,["loading","visible","onResolved"])])}var ju={props:["rowIndex","product"],name:"productActions",data(){return{showPopup:!1,isLoading:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,ss["delete"](this.product.id).then((t=>{"PRODUCT_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Product Deleted Successfully"})),ss.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("product/setProducts",t.data.data.products)})).catch(this.$handleApiError)})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const Nu=(0,d.Z)(ju,[["render",Fu]]);var Mu=Nu,Hu={props:["columns","products"],components:{ProductActions:Mu},data(){return{currency:N,allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.products.length/this.paginationLimit)},items(){return this.products.slice(this.prevRange,this.nextRange)}},methods:{calculQty(t){let e=0;return t.forEach((t=>{e+=t.quantity})),e}}};const Yu=(0,d.Z)(Hu,[["render",Ru]]);var Ku=Yu,Zu={components:{ProductsTable:Ku},data(){return{columns:[{prop:"id",name:"#"},{prop:"ref",name:"Ref"},{prop:"name",name:"Name"},{prop:"buying_price",name:"Buying Price"},{prop:"selling_price",name:"Selling Price"},{prop:"quantity",name:"Qty"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{products(){return this.$store.getters["notification/notifications"]["productStockAlert"]||[]},fetched(){return this.$store.getters["notification/fetched"]}}};const Bu=(0,d.Z)(Zu,[["render",fu]]);var Qu=Bu,Gu={components:{StockAlertView:Qu,ReportedDelivery:gu,ReportedConfirmation:cu},data(){return{tab:1,fullTabs:[{id:1,name:"Stock Alert",component:"StockAlertView",permissions:["admin"]},{id:2,name:"Deliveries",component:"ReportedDelivery",permissions:["admin..","delivery"]},{id:3,name:"Confirmations",component:"ReportedConfirmation",permissions:["admin..","agente"]}]}},computed:{tabs(){return this.fullTabs.filter((t=>t.permissions.includes(this.user.role)))},tabName(){return this.$route.params.tab},user(){return this.$store.getters["user/user"]}},watch:{tabName(){this.handleChange()}},methods:{handleChange(){switch(this.tabName){case"stock":this.tab=1;break;case"delivery":this.tab=2;break;case"confirmation":this.tab=3;break;default:this.tab=this.tabs[0].id||1;break}}},mounted(){this.handleChange()}};const Ju=(0,d.Z)(Gu,[["render",El]]);var Xu=Ju,tp={path:"/",name:"home",component:ns,meta:{module:"dashboard"},children:[{path:"",name:"dashboard",component:il,meta:{module:"dashboard",title:"Dashboard",gate:"all"}},{path:"/notifications/:tab",name:"notifications",component:Xu,meta:{module:"notification",title:"Notifications",gate:"all"}},{path:"/settings",name:"settings",component:Pl,meta:{module:"settings",title:"Settings",gate:"all"}}]};const ep={class:"mb-5 tw-flex tw-justify-between tw-items-center"},ap=(0,r._)("div",null,[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Product List"),(0,r._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your products")],-1),sp={key:0},rp=(0,r._)("span",{class:"text-white"}," Add Product ",-1),ip={key:0},op={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},lp={class:"mb-5 tw-flex"},np={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},dp={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},wp={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},cp=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),up={class:"tw-relative"},pp={class:""};function mp(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation"),d=(0,r.up)("ProductsTable");return(0,r.wg)(),(0,r.iD)("div",{key:l.products.length},[(0,r._)("div",ep,[ap,t.$can("create_product")?((0,r.wg)(),(0,r.iD)("div",sp,[(0,r.Wm)(X.T,{color:"primary-color",link:"",to:{name:"product/add"},variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{icon:"mdi-plus",class:"mr-2 text-white"}),rp])),_:1})])):(0,r.kq)("",!0)]),l.fetched?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",ip,[(0,r.Wm)(n)])),l.fetched?((0,r.wg)(),(0,r.iD)("div",op,[(0,r._)("div",lp,[(0,r.Wm)(X.T,{onClick:e[0]||(e[0]=t=>o.showFilters=!o.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white",size:"xx-large"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,r._)("div",np,[(0,r.Wm)(Qt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[s.nr,o.search]])])]),(0,r._)("div",{class:(0,J.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":o.showFilters}])},[(0,r._)("div",dp,[(0,r._)("div",wp,[cp,(0,r._)("div",up,[(0,r.wy)((0,r._)("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=t=>o.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[s.nr,o.date]])])])])],2),(0,r._)("div",pp,[(0,r.Wm)(d,{columns:o.columns,products:l.filteredProducts},null,8,["columns","products"])])])):(0,r.kq)("",!0)])}var hp={components:{ProductsTable:Ku},data(){return{localUrl:F,confirmations:On,showFilters:!1,date:null,search:"",columns:[{prop:"id",name:"#"},{prop:"ref",name:"Ref"},{prop:"name",name:"Name"},{prop:"buying_price",name:"Buying Price"},{prop:"selling_price",name:"Selling Price"},{prop:"quantity",name:"Qty"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{products(){return this.$store.getters["product/products"]},fetched(){return this.$store.getters["product/fetched"]},filteredProducts(){const t=this.date;return this.products.filter((e=>(!t||e?.created_at.split("T")[0]===t)&&!!(e.ref.toLowerCase().includes(this.search.toLowerCase())||e.name.toLowerCase().includes(this.search.toLowerCase())||e.description.toLowerCase().includes(this.search.toLowerCase()))))}},methods:{getProducts(){ss.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.fetched||this.getProducts()}};const gp=(0,d.Z)(hp,[["render",mp]]);var fp=gp,vp=a(240),yp=a(4842);const _p=(0,r._)("div",{class:"mb-5"},[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Add Product "),(0,r._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create new product")],-1),xp={key:0},bp={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},kp={class:"tw-w-full"},Cp=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Product Name ",-1),Dp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Sp={class:"tw-w-full"},zp=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reference",-1),Up={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Lp={class:"tw-w-full"},Pp={class:"mb-1 text-body-2 tw-text-zinc-700"},Ap={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Wp={class:"mb-1 text-body-2 tw-text-zinc-700"},$p={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Ep=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Description ",-1),Op={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Tp={class:"tw-w-full tw-flex tw-gap-10 tw-items-center"},Vp=(0,r._)("span",null,"Add Variants: ",-1),qp={class:"tw-h-fit tw-mb-"},Rp=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Warehouse",-1),Ip={class:"tw-relative"},Fp=(0,r._)("option",{value:0},"Select",-1),jp=["value"],Np={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Mp={key:0},Hp={class:"md:tw-col-span-3 tw-col-span-12"},Yp=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),Kp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Zp={class:"md:tw-col-span-3 tw-col-span-12"},Bp=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Stock Alert",-1),Qp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Gp={key:1},Jp={class:"tw-grid tw-grid-cols-12 md:tw-gap-3"},Xp={class:"md:tw-col-span-3 tw-col-span-12"},tm=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Size",-1),em={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},am={class:"md:tw-col-span-3 tw-col-span-12"},sm=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Color",-1),rm={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},im={class:"md:tw-col-span-3 tw-col-span-12"},om=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),lm=(0,r._)("div",{class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},null,-1),nm={class:"md:tw-col-span-3 tw-col-span-12"},dm=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Stock Alert",-1),wm={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},cm={class:"tw-col-span-12 tw-flex tw-justify-end"},um=["disabled"],pm=(0,r._)("span",{class:"tw-text-white"},"Add",-1),mm={class:""},hm={class:"tw-flex tw-justify-between tw-items-center tw-mt-5"},gm=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variants",-1),fm={class:"mb-1 text-body-2 tw-text-zinc-700"},vm={key:1,class:"tw-max-w-full tw-overflow-x-auto"},ym={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},_m={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},xm={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},bm={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},km={class:"tw-px-6 tw-py-2"},Cm={class:"tw-px-6 tw-py-2"},Dm={class:"tw-px-6 tw-py-2"},Sm={class:"tw-flex tw-items-center tw-px-6 tw-py-2 tw-space-x-3"},zm=(0,r._)("h1",{class:"tw-font-medium"},"Deliveries",-1),Um={class:"tw-mt-2"},Lm=(0,r._)("h1",{class:"tw-font-medium"},"Image",-1),Pm={class:"tw-grid tw-grid-cols-12 tw-gap-5 tw-mt-2"},Am={class:"md:tw-col-span-6 tw-col-span-12 tw-relative tw-h-fit"},Wm={title:"Click to upload",for:"button2",class:"tw-cursor-pointer tw-flex tw-items-center tw-gap-4 tw-px-6 tw-py-4 before:border-gray-400/60 hover:before:tw-border-gray-300 group dark:before:bg-darker dark:hover:before:tw-border-gray-500 before:tw-bg-gray-100 dark:before:tw-border-gray-600 before:tw-absolute before:tw-inset-0 before:tw-rounded-lg before:tw-border before:tw-border-dashed before:tw-transition-transform before:tw-duration-300 hover:before:tw-scale-100 active:tw-duration-75 active:before:tw-scale-95"},$m={class:"tw-w-max tw-relative"},Em=(0,r._)("div",{class:"tw-relative"},[(0,r._)("span",{class:"tw-block tw-text-base tw-font-semibold tw-relative tw-text-orange-600"}," Upload a file "),(0,r._)("span",{class:"tw-mt-0.5 tw-block tw-text-sm tw-text-gray-500 dark:tw-text-gray-400"},"Max 2 MB")],-1),Om={class:"md:tw-col-span-6 tw-col-span-12"},Tm={class:"image-preview tw-w-full tw-flex tw-items-center tw-justify-center tw-h-full border rounded p-4"},Vm=(0,r._)("span",null,"No image available",-1),qm=[Vm],Rm={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Im=(0,r._)("span",{class:"text-white text-capitalize"},"Cancel",-1),Fm=(0,r._)("span",{class:"text-white text-capitalize"},"Create",-1);function jm(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation"),d=(0,r.up)("VariantActions"),w=(0,r.up)("ProductOffers");return(0,r.wg)(),(0,r.iD)("div",null,[_p,o.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",xp,[(0,r.Wm)(n)])),o.isLoaded?((0,r.wg)(),(0,r.iD)("div",bp,[(0,r._)("div",null,[(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",kp,[Cp,(0,r.Wm)(at.hw,{error:!o.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("name")),"hide-details":!0,modelValue:o.product.name,"onUpdate:modelValue":e[1]||(e[1]=t=>o.product.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",Dp,(0,J.zw)(o.formStatus.name.message),1)])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",Sp,[zp,(0,r.Wm)(at.hw,{error:!o.formStatus.reference.valid,onKeyup:e[2]||(e[2]=t=>l.resetError("reference")),"hide-details":!0,modelValue:o.product.reference,"onUpdate:modelValue":e[3]||(e[3]=t=>o.product.reference=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",Up,(0,J.zw)(o.formStatus.reference.message),1)])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",Lp,[(0,r._)("div",Pp," Buying Price ("+(0,J.zw)(o.currency)+") ",1),(0,r.Wm)(at.hw,{type:"number",onChange:l.handleBuyingPriceChange,error:!o.formStatus.buyingPrice.valid,onKeyup:e[4]||(e[4]=t=>l.resetError("buyingPrice")),"hide-details":!0,modelValue:o.product.buyingPrice,"onUpdate:modelValue":e[5]||(e[5]=t=>o.product.buyingPrice=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,r._)("div",Ap,(0,J.zw)(o.formStatus.buyingPrice.message),1)])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r._)("div",Wp," Selling Price ("+(0,J.zw)(o.currency)+") ",1),(0,r.Wm)(at.hw,{type:"number",onChange:l.handleSellingPriceChange,error:!o.formStatus.sellingPrice.valid,onKeyup:e[6]||(e[6]=t=>l.resetError("sellingPrice")),"hide-details":!0,modelValue:o.product.sellingPrice,"onUpdate:modelValue":e[7]||(e[7]=t=>o.product.sellingPrice=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,r._)("div",$p,(0,J.zw)(o.formStatus.sellingPrice.message),1)])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[Ep,(0,r.Wm)(yp.z,{error:!o.formStatus.description.valid,onKeyup:e[8]||(e[8]=t=>l.resetError("description")),"hide-details":!0,modelValue:o.product.description,"onUpdate:modelValue":e[9]||(e[9]=t=>o.product.description=t),variant:"outlined",density:"compact",color:"primary-color"},null,8,["error","modelValue"]),(0,r._)("div",Op,(0,J.zw)(o.formStatus.description.message),1)])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-0",cols:"12"},{default:(0,r.w5)((()=>[(0,r._)("div",Tp,[Vp,(0,r.Wm)(ol.G,{modelValue:o.addVariants,"onUpdate:modelValue":e[10]||(e[10]=t=>o.addVariants=t),color:"primary-color","hide-details":!0},null,8,["modelValue"])])])),_:1})])),_:1})])),_:1}),(0,r.Wm)(cs.D,{cols:"12",md:"6",class:"tw-border-l tw-border-r-neutral-700 tw-py-2"},{default:(0,r.w5)((()=>[(0,r._)("div",qp,[Rp,(0,r._)("div",Ip,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[11]||(e[11]=t=>o.warehouse=t),onChange:e[12]||(e[12]=t=>l.resetError("warehouse")),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-400 tw-outline-0 tw-text-sm"},[Fp,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.warehouses,(t=>((0,r.wg)(),(0,r.iD)("option",{key:t.id,value:t.id},(0,J.zw)(t.name),9,jp)))),128))],544),[[s.bM,o.warehouse]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})]),(0,r._)("div",Np,(0,J.zw)(o.formStatus.warehouse.message),1)]),o.addVariants?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",Mp,[(0,r._)("div",Hp,[Yp,(0,r.Wm)(at.hw,{onChange:l.handleQuantityChange,type:"number",error:!o.formStatus.quantity.valid,onKeyup:e[13]||(e[13]=t=>l.resetError("quantity")),"hide-details":!0,modelValue:o.quantity,"onUpdate:modelValue":e[14]||(e[14]=t=>o.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,r._)("div",Kp,(0,J.zw)(o.formStatus.quantity.message),1)]),(0,r._)("div",Zp,[Bp,(0,r.Wm)(at.hw,{onChange:l.handleStockAlertChange,type:"number",error:!o.formStatus.stockAlert.valid,onKeyup:e[15]||(e[15]=t=>l.resetError("stockAlert")),"hide-details":!0,modelValue:o.stockAlert,"onUpdate:modelValue":e[16]||(e[16]=t=>o.stockAlert=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,r._)("div",Qp,(0,J.zw)(o.formStatus.stockAlert.message),1)])])),o.addVariants?((0,r.wg)(),(0,r.iD)("div",Gp,[(0,r._)("div",Jp,[(0,r._)("div",Xp,[tm,(0,r.Wm)(at.hw,{error:!o.formStatus.size.valid,onKeyup:e[17]||(e[17]=t=>l.resetError("size")),"hide-details":!0,modelValue:o.size,"onUpdate:modelValue":e[18]||(e[18]=t=>o.size=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",em,(0,J.zw)(o.formStatus.size.message),1)]),(0,r._)("div",am,[sm,(0,r.Wm)(at.hw,{error:!o.formStatus.color.valid,onKeyup:e[19]||(e[19]=t=>l.resetError("color")),"hide-details":!0,modelValue:o.color,"onUpdate:modelValue":e[20]||(e[20]=t=>o.color=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",rm,(0,J.zw)(o.formStatus.color.message),1)]),(0,r._)("div",im,[om,(0,r.Wm)(at.hw,{onChange:l.handleQuantityChange,type:"number",error:!o.formStatus.quantity.valid&&!1,onKeyup:e[21]||(e[21]=t=>l.resetError("quantity")),"hide-details":!0,modelValue:o.quantity,"onUpdate:modelValue":e[22]||(e[22]=t=>o.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),lm]),(0,r._)("div",nm,[dm,(0,r.Wm)(at.hw,{onChange:l.handleStockAlertChange,type:"number",error:!o.formStatus.stockAlert.valid,onKeyup:e[23]||(e[23]=t=>l.resetError("stockAlert")),"hide-details":!0,modelValue:o.stockAlert,"onUpdate:modelValue":e[24]||(e[24]=t=>o.stockAlert=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,r._)("div",wm,(0,J.zw)(o.formStatus.stockAlert.message),1)])]),(0,r._)("div",null,[(0,r._)("div",cm,[(0,r._)("button",{disabled:!o.quantity,class:(0,J.C_)([{"bg-primary-color":o.quantity},"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"]),onClick:e[25]||(e[25]=(...t)=>l.addVariant&&l.addVariant(...t))},[(0,r.Wm)(et.t,{size:"small",color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-plus")])),_:1}),pm],10,um)])]),(0,r._)("div",mm,[(0,r._)("div",hm,[gm,(0,r._)("div",fm," Quantity Total: "+(0,J.zw)(l.qtyTotal),1)]),0==o.variants.length?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,J.C_)([{"tw-bg-neutral-100 tw-text-neutral-500":o.formStatus.variants.valid,"tw-bg-red-100 tw-text-red-500":!o.formStatus.variants.valid},"tw-text-center tw-mb-6 tw-w-full tw-py-3 tw-rounded-lg"])},(0,J.zw)(o.formStatus.variants.valid?"No Variants yet":o.formStatus.variants.message),3)):((0,r.wg)(),(0,r.iD)("div",vm,[(0,r._)("table",ym,[(0,r._)("thead",_m,[(0,r._)("tr",null,[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(["size","color","qty","stockAlert","actions"],(t=>(0,r._)("th",{class:(0,J.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,r._)("div",xm,(0,J.zw)(t),1)],2))),64))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.variants,(t=>((0,r.wg)(),(0,r.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,r._)("th",bm,(0,J.zw)(t.size),1),(0,r._)("td",km,(0,J.zw)(t.color),1),(0,r._)("td",Cm,(0,J.zw)(t.quantity),1),(0,r._)("td",Dm,(0,J.zw)(t.stockAlert),1),(0,r._)("td",Sm,[(0,r._)("div",null,[(0,r.Wm)(d,{onDelete:l.deleteVariant,variant:t},null,8,["onDelete","variant"])])])])))),128))])])]))])])):(0,r.kq)("",!0)])),_:1})])),_:1}),(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{cols:"12"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[zm,(0,r._)("div",Um,[(0,r.Wm)(vp.r,{modelValue:o.selectedDeliveries,"onUpdate:modelValue":e[26]||(e[26]=t=>o.selectedDeliveries=t),items:l.deliveries,"item-title":"fullname","item-value":"id","hide-details":!0,chips:"",multiple:"",variant:"outlined"},null,8,["modelValue","items"])])])])),_:1}),(0,r.Wm)(cs.D,{cols:"12"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r.Wm)(w,{offers:o.offers,"onUpdate:offers":e[27]||(e[27]=t=>o.offers=t)},null,8,["offers"])])])),_:1}),(0,r.Wm)(cs.D,{cols:"12"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[Lm,(0,r._)("div",Pm,[(0,r._)("div",Am,[(0,r._)("label",Wm,[(0,r._)("div",$m,[(0,r.Wm)(et.t,{class:"tw-text-6xl tw-text-orange-500"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-progress-upload")])),_:1})]),Em]),(0,r._)("input",{onChange:e[28]||(e[28]=(...t)=>l.handleImageChange&&l.handleImageChange(...t)),class:"tw-hidden",type:"file",name:"button2",id:"button2"},null,32)]),(0,r._)("div",Om,[(0,r._)("div",Tm,[(0,r._)("img",{class:(0,J.C_)([{"tw-hidden":!o.image},"w-full h-full tw-object-contain"]),ref:"image",id:"image-preview",alt:"Image Preview"},null,2),(0,r._)("div",{class:(0,J.C_)([{"tw-hidden":!!o.image},"bg-gray-300 h-48 flex items-center justify-center"])},qm,2)])])])])])),_:1})])),_:1})]),(0,r._)("div",Rm,[(0,r.Wm)(X.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,r.w5)((()=>[Im])),_:1}),(0,r.Wm)(X.T,{onClick:l.create,loading:o.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,r.w5)((()=>[Fm])),_:1},8,["onClick","loading"])])])):(0,r.kq)("",!0)])}function Nm(t,e,a,s,i,o){const l=(0,r.up)("popup"),n=(0,r.up)("UpdateProductVariant"),d=(0,r.up)("popup-full");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(X.T,{onClick:e[0]||(e[0]=t=>i.visible=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-pencil-outline")])),_:1})])),_:1}),(0,r.Wm)(X.T,{onClick:e[1]||(e[1]=t=>i.deletePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-delete-outline")])),_:1})])),_:1}),(0,r.Wm)(l,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this product?</p> You won't be able to revert this!",visible:i.deletePopup,onResolved:o.handleDelete},null,8,["visible","onResolved"]),(0,r.Wm)(d,{visible:i.visible,onCancel:o.cancel},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{onUpdate:o.update,variant:a.variant,onCancel:o.cancel},null,8,["onUpdate","variant","onCancel"])])),_:1},8,["visible","onCancel"])])}const Mm={class:"md:tw-w-[400px] tw-w-[95%] tw-bg-white tw-rounded-lg tw-p-5 tw-mx-auto"},Hm={class:"tw-grid tw-grid-cols-12 md:tw-gap-3"},Ym={class:"tw-col-span-12"},Km=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Size",-1),Zm={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Bm={class:"tw-col-span-12"},Qm=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Color",-1),Gm={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Jm={class:"tw-col-span-12"},Xm=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),th={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},eh={class:"tw-col-span-12"},ah=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Stock Alert",-1),sh={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},rh={class:"tw-col-span-12 tw-flex tw-gap-2 tw-justify-end"},ih=(0,r._)("span",{class:"tw-text-white"},"Cancel",-1),oh=[ih],lh=["disabled"],nh=(0,r._)("span",{class:"tw-text-white"},"Save",-1),dh=[nh];function wh(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("div",Mm,[(0,r._)("div",Hm,[(0,r._)("div",Ym,[Km,(0,r.Wm)(at.hw,{error:!i.formStatus.size.valid,onKeyup:e[0]||(e[0]=t=>o.resetError("size")),"hide-details":!0,modelValue:i.size,"onUpdate:modelValue":e[1]||(e[1]=t=>i.size=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",Zm,(0,J.zw)(i.formStatus.size.message),1)]),(0,r._)("div",Bm,[Qm,(0,r.Wm)(at.hw,{error:!i.formStatus.color.valid,onKeyup:e[2]||(e[2]=t=>o.resetError("color")),"hide-details":!0,modelValue:i.color,"onUpdate:modelValue":e[3]||(e[3]=t=>i.color=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",Gm,(0,J.zw)(i.formStatus.color.message),1)]),(0,r._)("div",Jm,[Xm,(0,r.Wm)(at.hw,{onChange:o.handleQuantityChange,type:"number",error:!i.formStatus.quantity.valid,onKeyup:e[4]||(e[4]=t=>o.resetError("quantity")),"hide-details":!0,modelValue:i.quantity,"onUpdate:modelValue":e[5]||(e[5]=t=>i.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,r._)("div",th,(0,J.zw)(i.formStatus.quantity.message),1)]),(0,r._)("div",eh,[ah,(0,r.Wm)(at.hw,{onChange:o.handleStockAlertChange,type:"number",error:!i.formStatus.stockAlert.valid,onKeyup:e[6]||(e[6]=t=>o.resetError("stockAlert")),"hide-details":!0,modelValue:i.stockAlert,"onUpdate:modelValue":e[7]||(e[7]=t=>i.stockAlert=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,r._)("div",sh,(0,J.zw)(i.formStatus.stockAlert.message),1)])]),(0,r._)("div",null,[(0,r._)("div",rh,[(0,r._)("button",{onClick:e[8]||(e[8]=(...t)=>o.cancel&&o.cancel(...t)),class:"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"},oh),(0,r._)("button",{disabled:!i.quantity,class:(0,J.C_)([{"tw-bg-orange-500":i.quantity},"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"]),onClick:e[9]||(e[9]=(...t)=>o.updateVariant&&o.updateVariant(...t))},dh,10,lh)])])])}var ch={props:["variant"],data(){return{size:"",color:"",quantity:0,stockAlert:0,newVariant:null,formStatus:{quantity:{valid:!0,message:""},size:{valid:!0,message:""},color:{valid:!0,message:""},stockAlert:{valid:!0,message:""}}}},methods:{updateVariant(){console.log("updated");const t=this.quantity-this.newVariant.quantity;this.newVariant.size=this.size?this.size.toLocaleUpperCase():"",this.newVariant.color=this.color?this.color.toLocaleUpperCase():"",this.newVariant.quantity=this.quantity,this.newVariant.stockAlert=this.stockAlert,this.newVariant.available_quantity=parseInt(this.newVariant.available_quantity)+parseInt(t),this.cancel()},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},handleStockAlertChange(){this.stockAlert<=0&&(this.stockAlert=0)},cancel(){this.$emit("cancel")},resetError(t){this.formStatus[t]={valid:!0,message:""}}},mounted(){this.size=this.variant.size,this.color=this.variant.color,this.quantity=this.variant.quantity,this.stockAlert=this.variant.stockAlert,this.newVariant=this.variant}};const uh=(0,d.Z)(ch,[["render",wh]]);var ph=uh,mh={components:{UpdateProductVariant:ph},props:["variant"],data(){return{visible:!1,deletePopup:!1}},methods:{cancel(){this.visible=!1},update(t){console.log("from actions: ",t)},handleDelete(t){t&&this.$emit("delete",this.variant.id),this.deletePopup=!1}}};const hh=(0,d.Z)(mh,[["render",Nm]]);var gh=hh;class fh{async create(t){return await Z.getCookie(),Y.post("api/warehouses/new",{name:t.name})}async update(t,e){return await Z.getCookie(),Y.post("api/warehouses/update/"+t,{name:e.name})}async all(){return await Z.getCookie(),Y.get("api/warehouses")}async getWarehouse(t){return await Z.getCookie(),Y.get("api/warehouses/"+t)}async delete(t){return await Z.getCookie(),Y["delete"]("api/warehouses/delete/"+t)}}var vh=new fh;const yh=(0,r._)("h1",{class:"tw-font-medium"},"Offers",-1),_h={class:"tw-grid tw-grid-cols-12 tw-mb-5 tw-mt-3 tw-gap-3"},xh={class:"md:tw-col-span-3 tw-col-span-12"},bh=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),kh={class:"md:tw-col-span-3 tw-col-span-12"},Ch=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Price",-1),Dh={class:"md:tw-col-span-5 tw-col-span-12"},Sh=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note",-1),zh={class:"md:tw-col-span-1 tw-col-span-12"},Uh=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-transparent"},"Note",-1),Lh={class:"tw-mt-2"},Ph={class:"tw-relative tw-overflow-x-auto tw-shadow sm:tw-rounded"},Ah={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Wh=(0,r._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,r._)("tr",null,[(0,r._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Quantity"),(0,r._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Price"),(0,r._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Note"),(0,r._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-24"},"Action")])],-1),$h={class:"tw-px-6 tw-py-4"},Eh={class:"tw-px-6 tw-py-4"},Oh={class:"tw-px-6 tw-py-4"},Th={class:"tw-max-w-[250px] tw-text-sm"},Vh={class:"tw-px-6 tw-py-4"},qh={key:0},Rh=(0,r._)("td",{colspan:"5"},[(0,r._)("p",{class:"tw-text-center tw-p-5"}," No Offers ")],-1),Ih=[Rh];function Fh(t,e,a,s,i,o){const l=(0,r.up)("popup");return(0,r.wg)(),(0,r.iD)("div",null,[yh,(0,r._)("div",_h,[(0,r._)("div",xh,[bh,(0,r.Wm)(at.hw,{type:"number","hide-details":!0,modelValue:i.quantity,"onUpdate:modelValue":e[0]||(e[0]=t=>i.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"])]),(0,r._)("div",kh,[Ch,(0,r.Wm)(at.hw,{type:"number","hide-details":!0,modelValue:i.price,"onUpdate:modelValue":e[1]||(e[1]=t=>i.price=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"])]),(0,r._)("div",Dh,[Sh,(0,r.Wm)(at.hw,{type:"text","hide-details":!0,modelValue:i.note,"onUpdate:modelValue":e[2]||(e[2]=t=>i.note=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"])]),(0,r._)("div",zh,[Uh,(0,r.Wm)(X.T,{onClick:o.handleAdd,class:"mx-auto !tw-px-0 !tw-py-0","min-height":"40px","min-width":"40",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-plus")])),_:1})])),_:1},8,["onClick"])])]),(0,r._)("div",Lh,[(0,r._)("div",Ph,[(0,r._)("table",Ah,[Wh,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.offers,(t=>((0,r.wg)(),(0,r.iD)("tr",{key:t.key,class:"odd:tw-bg-white even:tw-bg-gray-50 tw-border-b"},[(0,r._)("td",$h,(0,J.zw)(t.quantity),1),(0,r._)("td",Eh,(0,J.zw)(t.price)+" "+(0,J.zw)(i.currency),1),(0,r._)("td",Oh,[(0,r._)("p",Th,(0,J.zw)(t.note),1)]),(0,r._)("td",Vh,[(0,r.Wm)(X.T,{onClick:e=>o.handleDeleteClicked(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])))),128)),0==a.offers.length?((0,r.wg)(),(0,r.iD)("tr",qh,Ih)):(0,r.kq)("",!0)])])])]),(0,r.Wm)(l,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this offer?</p> You won't be able to revert this!",visible:i.deletePopup,onResolved:o.handleDelete},null,8,["visible","onResolved"])])}var jh={props:["offers"],data(){return{currency:N,deletePopup:!1,toDeleteID:null,quantity:1,price:0,note:""}},methods:{handleDeleteClicked(t){this.toDeleteID=t,this.deletePopup=!0},handleDelete(t){if(this.deletePopup=!1,!t)return!1;this.$emit("update:offers",this.offers.filter((t=>t.id!=this.toDeleteID)))},handleAdd(){const t=this.offers.length>0?this.offers[this.offers.length-1].id:0,e=t+1,a={id:e,quantity:this.quantity,price:this.price,note:this.note};this.$emit("update:offers",[...this.offers,a]),this.quantity=1,this.price=0,this.note=""}}};const Nh=(0,d.Z)(jh,[["render",Fh]]);var Mh=Nh,Hh={components:{VariantActions:gh,ProductOffers:Mh},data(){return{currency:N,isLoading:!1,isLoaded:!1,addVariants:!1,variantId:1,variants:[],image:"",imageFile:null,color:"",size:"",quantity:0,warehouse:0,stockAlert:0,offers:[],product:{name:"",reference:"",buyingPrice:0,sellingPrice:0,description:""},selectedDeliveries:[],formStatus:{name:{valid:!0,message:""},reference:{valid:!0,message:""},buyingPrice:{valid:!0,message:""},sellingPrice:{valid:!0,message:""},quantity:{valid:!0,message:""},size:{valid:!0,message:""},color:{valid:!0,message:""},stockAlert:{valid:!0,message:""},description:{valid:!0,message:""},warehouse:{valid:!0,message:""},variants:{valid:!0,message:""}}}},computed:{qtyTotal(){let t=0;return this.variants.forEach((e=>t+=parseInt(e.quantity))),t},warehouses(){return this.$store.getters["warehouse/warehouses"]},users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>"delivery"==t.role?.name)).map((t=>({...t,fullname:t.firstname+" "+t.lastname})))}},methods:{create(){if(!this.validate())return!1;this.isLoading=!0;let t=this.product;if(t.addVariants=this.addVariants,t.image=this.image,t.offers=this.offers,t.selectedDeliveries=this.selectedDeliveries.map((t=>({delivery_id:t}))),this.addVariants)t.variants=this.variants;else{const e=[{id:this.variantId,color:null,size:null,quantity:this.quantity,warehouse_id:this.warehouse,stockAlert:this.stockAlert}];t.variants=e}ss.create(t).then((t=>{"PRODUCT_CREATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.product={name:"",reference:"",buyingPrice:0,sellingPrice:0,description:""},this.offers=[],this.selectedDeliveries=[],this.variants=[],this.$store.dispatch("product/addProduct",t.data.data.product)),"VALIDATION_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.errors.ref})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},handleImageChange(t){const e=t.target.files[0];this.image=e;const a=this.$refs.image;if(e){const t=new FileReader;t.addEventListener("load",(function(){a.src=this.result})),t.readAsDataURL(e)}},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=Ct(this.product.name,"Product name"),this.formStatus.reference=Ct(this.product.reference,"Reference"),this.formStatus.buyingPrice=Ct(this.product.buyingPrice,"Buying price"),this.formStatus.quantity=Ct(this.quantity,"Quantity"),this.formStatus.sellingPrice=Ct(this.product.sellingPrice,"Selling price"),this.formStatus.description=Ct(this.product.description,"Description"),this.formStatus.variants=zt(this.variants),this.addVariants||(this.formStatus.warehouse={valid:0!=this.warehouse,message:0!=this.warehouse?"":"Please select a warehouse"}),this.formStatus.name.valid&&this.formStatus.buyingPrice.valid&&this.formStatus.reference.valid&&this.formStatus.sellingPrice&&this.formStatus.description.valid&&(!this.addVariants||this.formStatus.variants.valid)&&(!!this.addVariants||this.formStatus.quantity.valid)&&(!!this.addVariants||this.formStatus.warehouse.valid)},addVariant(){if(this.formStatus.warehouse={valid:0!=this.warehouse,message:0!=this.warehouse?"":"Please select a warehouse"},!this.formStatus.warehouse.valid)return!1;const t={id:this.variantId,color:this.color.toUpperCase(),size:this.size.toUpperCase(),quantity:this.quantity,warehouse_id:this.warehouse,stockAlert:this.stockAlert};this.variants.push(t),this.variantId++,this.stockAlert=0,this.color="",this.size="",this.quantity=0},deleteVariant(t){this.variants=this.variants.filter((e=>e.id!==t))},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},handleStockAlertChange(){this.stockAlert<=0&&(this.stockAlert=0)},handleSellingPriceChange(){this.product.sellingPrice<=0&&(this.product.sellingPrice=0)},handleBuyingPriceChange(){this.product.buyingPrice<=0&&(this.product.buyingPrice=0)},getWarhouses(){return this.isLoaded=!1,vh.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("warehouse/setWarehouses",t.data.data.warehouses),this.isLoaded=!0)}),this.$handleApiError)}},mounted(){this.getWarhouses()}};const Yh=(0,d.Z)(Hh,[["render",jm]]);var Kh=Yh;const Zh=(0,r._)("div",{class:"mb-5"},[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Update Product "),(0,r._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Update product informations")],-1),Bh={key:0},Qh={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Gh={class:"tw-flex tw-gap-2 tw-text-neutral-800 tw-items-center tw-mb-5"},Jh={class:"tw-block tw-py-1 tw-px-2 tw-rounded-md text-primary-color"},Xh={class:"tw-w-full"},tg=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Product Name ",-1),eg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},ag={class:"tw-w-full"},sg=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reference",-1),rg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},ig={class:"tw-w-full"},og={class:"mb-1 text-body-2 tw-text-zinc-700"},lg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},ng={class:"mb-1 text-body-2 tw-text-zinc-700"},dg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},wg=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Description ",-1),cg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},ug={class:"tw-h-fit tw-mb-"},pg=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Warehouse",-1),mg={class:"tw-relative"},hg=(0,r._)("option",{value:0},"Select",-1),gg=["value"],fg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},vg={class:"tw-grid tw-grid-cols-12 md:tw-gap-3"},yg={class:"md:tw-col-span-3 tw-col-span-12"},_g=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Size",-1),xg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},bg={class:"md:tw-col-span-3 tw-col-span-12"},kg=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Color",-1),Cg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Dg={class:"md:tw-col-span-3 tw-col-span-12"},Sg=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),zg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Ug={class:"md:tw-col-span-3 tw-col-span-12"},Lg=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Stock Alert ",-1),Pg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Ag={class:"tw-col-span-12 tw-flex tw-justify-end"},Wg=["disabled"],$g=(0,r._)("span",{class:"tw-text-white"},"Add",-1),Eg={class:""},Og={class:"tw-flex tw-justify-between tw-items-center tw-mt-5"},Tg=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variants",-1),Vg={class:"mb-1 text-body-2 tw-text-zinc-700"},qg={key:1,class:"tw-max-w-full tw-overflow-x-auto"},Rg={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Ig={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},Fg={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},jg={class:"tw-px-6 tw-py-2 tw-capitalize"},Ng={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Mg={class:"tw-px-6 tw-py-2"},Hg={class:"tw-px-6 tw-py-2"},Yg={class:"tw-flex tw-flex-col"},Kg={key:0,class:"tw-text-xs tw-text-green-500"},Zg={class:"tw-px-6 tw-py-2"},Bg={class:"tw-flex tw-items-center tw-px-6 tw-py-2 tw-space-x-3"},Qg=(0,r._)("h1",null,"Deliveries",-1),Gg={class:"tw-mt-2"},Jg=(0,r._)("h1",null,"Image",-1),Xg={class:"tw-grid tw-grid-cols-12 tw-gap-5 tw-mt-2"},tf={class:"md:tw-col-span-6 tw-col-span-12 tw-relative tw-h-fit"},ef={title:"Click to upload",for:"button2",class:"tw-cursor-pointer tw-flex tw-items-center tw-gap-4 tw-px-6 tw-py-4 before:border-gray-400/60 hover:before:tw-border-gray-300 group dark:before:bg-darker dark:hover:before:tw-border-gray-500 before:tw-bg-gray-100 dark:before:tw-border-gray-600 before:tw-absolute before:tw-inset-0 before:tw-rounded-lg before:tw-border before:tw-border-dashed before:tw-transition-transform before:tw-duration-300 hover:before:tw-scale-100 active:tw-duration-75 active:before:tw-scale-95"},af={class:"tw-w-max tw-relative"},sf=(0,r._)("div",{class:"tw-relative"},[(0,r._)("span",{class:"tw-block tw-text-base tw-font-semibold tw-relative tw-text-orange-600"}," Upload a file "),(0,r._)("span",{class:"tw-mt-0.5 tw-block tw-text-sm tw-text-gray-500 dark:tw-text-gray-400"},"Max 2 MB")],-1),rf={class:"md:tw-col-span-6 tw-col-span-12"},of={class:"image-preview tw-w-full tw-flex tw-items-center tw-justify-center tw-h-full border rounded p-4"},lf=["src"],nf=(0,r._)("span",null,"No image available",-1),df=[nf],wf={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},cf=(0,r._)("span",{class:"text-white text-capitalize"},"Cancel",-1),uf=(0,r._)("span",{class:"text-white text-capitalize"},"Update",-1);function pf(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation"),d=(0,r.up)("UpdateVariantActions"),w=(0,r.up)("ProductOffers");return(0,r.wg)(),(0,r.iD)("div",null,[Zh,o.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",Bh,[(0,r.Wm)(n)])),o.isLoaded?((0,r.wg)(),(0,r.iD)("div",Qh,[(0,r._)("div",Gh,[(0,r.Uk)(" Product ID: "),(0,r._)("span",Jh,(0,J.zw)(l.id),1)]),(0,r._)("div",null,[(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{cols:"12",md:"12"},{default:(0,r.w5)((()=>[(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",Xh,[tg,(0,r.Wm)(at.hw,{error:!o.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("name")),"hide-details":!0,modelValue:o.product.name,"onUpdate:modelValue":e[1]||(e[1]=t=>o.product.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",eg,(0,J.zw)(o.formStatus.name.message),1)])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",ag,[sg,(0,r.Wm)(at.hw,{error:!o.formStatus.quantity.valid,onKeyup:e[2]||(e[2]=t=>l.resetError("quantity")),"hide-details":!0,modelValue:o.product.reference,"onUpdate:modelValue":e[3]||(e[3]=t=>o.product.reference=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",rg,(0,J.zw)(o.formStatus.quantity.message),1)])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",ig,[(0,r._)("div",og," Buying Price ("+(0,J.zw)(o.currency)+") ",1),(0,r.Wm)(at.hw,{type:"number",onChange:l.handleBuyingPriceChange,error:!o.formStatus.buyingPrice.valid,onKeyup:e[4]||(e[4]=t=>l.resetError("buyingPrice")),"hide-details":!0,modelValue:o.product.buyingPrice,"onUpdate:modelValue":e[5]||(e[5]=t=>o.product.buyingPrice=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,r._)("div",lg,(0,J.zw)(o.formStatus.buyingPrice.message),1)])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r._)("div",ng," Selling Price ("+(0,J.zw)(o.currency)+") ",1),(0,r.Wm)(at.hw,{type:"number",onChange:l.handleSellingPriceChange,error:!o.formStatus.sellingPrice.valid,onKeyup:e[6]||(e[6]=t=>l.resetError("sellingPrice")),"hide-details":!0,modelValue:o.product.sellingPrice,"onUpdate:modelValue":e[7]||(e[7]=t=>o.product.sellingPrice=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,r._)("div",dg,(0,J.zw)(o.formStatus.sellingPrice.message),1)])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[wg,(0,r.Wm)(yp.z,{error:!o.formStatus.description.valid,onKeyup:e[8]||(e[8]=t=>l.resetError("description")),"hide-details":!0,modelValue:o.product.description,"onUpdate:modelValue":e[9]||(e[9]=t=>o.product.description=t),variant:"outlined",density:"compact",color:"primary-color"},null,8,["error","modelValue"]),(0,r._)("div",cg,(0,J.zw)(o.formStatus.description.message),1)])])),_:1})])),_:1})])),_:1}),(0,r.Wm)(cs.D,{cols:"12",md:"12",class:"tw-border-t tw-border-t-neutral-300 tw-py-2"},{default:(0,r.w5)((()=>[(0,r._)("div",ug,[pg,(0,r._)("div",mg,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>o.warehouse=t),onChange:e[11]||(e[11]=t=>l.resetError("warehouse")),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-400 tw-outline-0 tw-text-sm"},[hg,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.warehouses,(t=>((0,r.wg)(),(0,r.iD)("option",{key:t.id,value:t.id},(0,J.zw)(t.name),9,gg)))),128))],544),[[s.bM,o.warehouse]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})]),(0,r._)("div",fg,(0,J.zw)(o.formStatus.warehouse.message),1)]),(0,r._)("div",null,[(0,r._)("div",vg,[(0,r._)("div",yg,[_g,(0,r.Wm)(at.hw,{error:!o.formStatus.size.valid,onKeyup:e[12]||(e[12]=t=>l.resetError("size")),"hide-details":!0,modelValue:o.size,"onUpdate:modelValue":e[13]||(e[13]=t=>o.size=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",xg,(0,J.zw)(o.formStatus.size.message),1)]),(0,r._)("div",bg,[kg,(0,r.Wm)(at.hw,{error:!o.formStatus.color.valid,onKeyup:e[14]||(e[14]=t=>l.resetError("color")),"hide-details":!0,modelValue:o.color,"onUpdate:modelValue":e[15]||(e[15]=t=>o.color=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",Cg,(0,J.zw)(o.formStatus.color.message),1)]),(0,r._)("div",Dg,[Sg,(0,r.Wm)(at.hw,{onChange:l.handleQuantityChange,type:"number",error:!o.formStatus.quantity.valid,onKeyup:e[16]||(e[16]=t=>l.resetError("quantity")),"hide-details":!0,modelValue:o.quantity,"onUpdate:modelValue":e[17]||(e[17]=t=>o.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,r._)("div",zg,(0,J.zw)(o.formStatus.quantity.message),1)]),(0,r._)("div",Ug,[Lg,(0,r.Wm)(at.hw,{onChange:l.handleStockAlertChange,type:"number",error:!o.formStatus.stockAlert.valid,onKeyup:e[18]||(e[18]=t=>l.resetError("stockAlert")),"hide-details":!0,modelValue:o.stockAlert,"onUpdate:modelValue":e[19]||(e[19]=t=>o.stockAlert=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,r._)("div",Pg,(0,J.zw)(o.formStatus.stockAlert.message),1)])]),(0,r._)("div",null,[(0,r._)("div",Ag,[(0,r._)("button",{disabled:!o.quantity,class:(0,J.C_)([{"bg-primary-color":o.quantity},"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"]),onClick:e[20]||(e[20]=(...t)=>l.addVariant&&l.addVariant(...t))},[(0,r.Wm)(et.t,{size:"small",color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-plus")])),_:1}),$g],10,Wg)])]),(0,r._)("div",Eg,[(0,r._)("div",Og,[Tg,(0,r._)("div",Vg," Quantity Total: "+(0,J.zw)(l.qtyTotal),1)]),0==o.variants.length?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,J.C_)([{"tw-bg-neutral-100 tw-text-neutral-500":o.formStatus.variants.valid,"tw-bg-red-100 tw-text-red-500":!o.formStatus.variants.valid},"tw-text-center tw-mb-6 tw-w-full tw-py-3 tw-rounded-lg"])},(0,J.zw)(o.formStatus.variants.valid?"No Variants yet":o.formStatus.variants.message),3)):((0,r.wg)(),(0,r.iD)("div",qg,[(0,r._)("table",Rg,[(0,r._)("thead",Ig,[(0,r._)("tr",null,[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(["warehouse","size","color","qty","Stock Alert","actions"],(t=>(0,r._)("th",{class:(0,J.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,r._)("div",Fg,(0,J.zw)(t),1)],2))),64))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.variants,(t=>((0,r.wg)(),(0,r.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,r._)("td",jg,(0,J.zw)(t.warehouse.name),1),(0,r._)("td",Ng,(0,J.zw)(t.size),1),(0,r._)("td",Mg,(0,J.zw)(t.color),1),(0,r._)("td",Hg,[(0,r._)("div",Yg,[(0,r._)("span",null,(0,J.zw)(t.quantity),1),t.created_at?((0,r.wg)(),(0,r.iD)("span",Kg,(0,J.zw)(t.available_quantity),1)):(0,r.kq)("",!0)])]),(0,r._)("td",Zg,(0,J.zw)(t.stockAlert),1),(0,r._)("td",Bg,[(0,r._)("div",null,[(0,r.Wm)(d,{onDelete:l.deleteVariant,variant:t},null,8,["onDelete","variant"])])])])))),128))])])]))])])])),_:1})])),_:1}),(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{cols:"12"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[Qg,(0,r._)("div",Gg,[(0,r.Wm)(vp.r,{modelValue:o.selectedDeliveries,"onUpdate:modelValue":e[21]||(e[21]=t=>o.selectedDeliveries=t),items:l.deliveries,"item-title":"fullname","item-value":"id","hide-details":!0,chips:"",multiple:"",variant:"outlined"},null,8,["modelValue","items"])])])])),_:1}),(0,r.Wm)(cs.D,{cols:"12"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r.Wm)(w,{offers:o.offers,"onUpdate:offers":e[22]||(e[22]=t=>o.offers=t)},null,8,["offers"])])])),_:1}),(0,r.Wm)(cs.D,{cols:"12"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[Jg,(0,r._)("div",Xg,[(0,r._)("div",tf,[(0,r._)("label",ef,[(0,r._)("div",af,[(0,r.Wm)(et.t,{class:"tw-text-6xl tw-text-orange-500"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-progress-upload")])),_:1})]),sf]),(0,r._)("input",{onChange:e[23]||(e[23]=(...t)=>l.handleImageChange&&l.handleImageChange(...t)),class:"tw-hidden",type:"file",name:"button2",id:"button2"},null,32)]),(0,r._)("div",rf,[(0,r._)("div",of,[(0,r._)("img",{class:(0,J.C_)([{"tw-hidden":!o.image},"w-full h-full tw-object-contain"]),ref:"image",src:o.serverUrl+"storage/"+o.image,id:"image-preview",alt:"Image Preview"},null,10,lf),(0,r._)("div",{class:(0,J.C_)([{"tw-hidden":!!o.image},"bg-gray-300 h-48 flex items-center justify-center"])},df,2)])])])])])),_:1})])),_:1})]),(0,r._)("div",wf,[(0,r.Wm)(X.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,r.w5)((()=>[cf])),_:1}),(0,r.Wm)(X.T,{onClick:l.update,loading:o.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,r.w5)((()=>[uf])),_:1},8,["onClick","loading"])])])):(0,r.kq)("",!0)])}const mf={class:"md:tw-w-[400px] tw-w-[95%] tw-bg-white tw-rounded-lg tw-p-5 tw-mx-auto"},hf={class:"tw-w-full"},gf=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Add quantity",-1),ff={class:"tw-col-span-12 tw-flex tw-gap-2 tw-justify-end tw-mt-3"},vf=(0,r._)("span",{class:"tw-text-white"},"Cancel",-1),yf=[vf],_f=["disabled"],xf=(0,r._)("span",{class:"tw-text-white"},"Add",-1),bf=[xf];function kf(t,e,a,s,i,o){const l=(0,r.up)("popup"),n=(0,r.up)("UpdateProductVariant"),d=(0,r.up)("popup-full");return(0,r.wg)(),(0,r.iD)("div",null,[a.variant.created_at?((0,r.wg)(),(0,r.j4)(X.T,{key:0,onClick:e[0]||(e[0]=t=>i.visibleAdd=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-plus")])),_:1})])),_:1})):(0,r.kq)("",!0),void 0===a.variant.on_hold||a.variant.available_quantity==a.variant.quantity?((0,r.wg)(),(0,r.j4)(X.T,{key:1,onClick:e[1]||(e[1]=t=>i.deletePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(X.T,{onClick:e[2]||(e[2]=t=>i.visible=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-pencil-outline")])),_:1})])),_:1}),(0,r.Wm)(l,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this product?</p> You won't be able to revert this!",visible:i.deletePopup,onResolved:o.handleDelete},null,8,["visible","onResolved"]),(0,r.Wm)(d,{visible:i.visible,onCancel:o.cancel},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{onUpdate:o.update,variant:a.variant,onCancel:o.cancel},null,8,["onUpdate","variant","onCancel"])])),_:1},8,["visible","onCancel"]),(0,r.Wm)(d,{visible:i.visibleAdd,onCancel:o.cancelAdd},{default:(0,r.w5)((()=>[(0,r._)("div",mf,[(0,r._)("div",hf,[gf,(0,r.Wm)(at.hw,{"hide-details":!0,modelValue:i.quantity,"onUpdate:modelValue":e[3]||(e[3]=t=>i.quantity=t),clearable:"",type:"number","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"])]),(0,r._)("div",ff,[(0,r._)("button",{onClick:e[4]||(e[4]=(...t)=>o.cancelAdd&&o.cancelAdd(...t)),class:"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"},yf),(0,r._)("button",{disabled:!i.quantity||0==i.quantity,class:(0,J.C_)([{"!tw-bg-green-500":0!=i.quantity},"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"]),onClick:e[5]||(e[5]=(...t)=>o.addQuantity&&o.addQuantity(...t))},bf,10,_f)])])])),_:1},8,["visible","onCancel"])])}var Cf={components:{UpdateProductVariant:ph},props:["variant"],data(){return{visible:!1,visibleAdd:!1,deletePopup:!1,quantity:1,newVariant:null}},methods:{cancel(){this.visible=!1},cancelAdd(){this.visibleAdd=!1},update(t){console.log("from actions: ",t)},addQuantity(){this.newVariant.quantity=parseInt(this.newVariant.quantity)+parseInt(this.quantity),this.newVariant.available_quantity=parseInt(this.newVariant.available_quantity)+parseInt(this.quantity),this.quantity=1,this.cancelAdd()},handleDelete(t){t&&this.$emit("delete",this.variant.id),this.deletePopup=!1}},mounted(){this.newVariant=this.variant}};const Df=(0,d.Z)(Cf,[["render",kf]]);var Sf=Df,zf={components:{UpdateVariantActions:Sf,ProductOffers:Mh},data(){return{currency:N,serverUrl:j,isLoading:!1,isLoaded:!1,variantId:1,variants:[],color:"",size:"",quantity:0,stockAlert:0,image:"",imageFile:null,offers:[],warehouse:0,product:{name:"",reference:"",buyingPrice:0,sellingPrice:0,description:""},selectedDeliveries:[],formStatus:{name:{valid:!0,message:""},buyingPrice:{valid:!0,message:""},sellingPrice:{valid:!0,message:""},quantity:{valid:!0,message:""},size:{valid:!0,message:""},color:{valid:!0,message:""},stockAlert:{valid:!0,message:""},description:{valid:!0,message:""},variants:{valid:!0,message:""},warehouse:{valid:!0,message:""}}}},computed:{qtyTotal(){let t=0;return this.variants.forEach((e=>t+=parseInt(e.quantity))),t},id(){return this.$route.params.id},warehouses(){return this.$store.getters["warehouse/warehouses"]},users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>"delivery"==t.role?.name)).map((t=>({...t,fullname:t.firstname+" "+t.lastname})))}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0;let t=this.product;t.variants=this.variants,t.image=this.image,t.offers=this.offers,t.selectedDeliveries=this.selectedDeliveries.map((t=>({delivery_id:t,product_id:this.id}))),ss.update(this.$route.params.id,t).then((t=>{"PRODUCT_UPDATED"==t.data.code&&this.$alert({type:"success",title:t.data.message}),"PRODUCT_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message}),"QUANTITY_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},handleImageChange(t){const e=t.target.files[0];this.image=e;const a=this.$refs.image;if(e){const t=new FileReader;t.addEventListener("load",(function(){a.src=this.result})),t.readAsDataURL(e)}},resetError(t){this.formStatus[t]={valid:!0,message:""}},getLastVariantId(t){return Math.max(...t.map((t=>t.id)))+1},validate(){return this.formStatus.name=Ct(this.product.name,"Product name"),this.formStatus.buyingPrice=Ct(this.product.buyingPrice,"Buying price"),this.formStatus.sellingPrice=Ct(this.product.sellingPrice,"Selling price"),this.formStatus.description=Ct(this.product.description,"Description"),this.formStatus.variants=zt(this.variants),this.formStatus.name.valid&&this.formStatus.buyingPrice.valid&&this.formStatus.sellingPrice&&this.formStatus.description.valid&&this.formStatus.variants.valid},addVariant(){if(0==this.warehouse)return this.$alert({type:"warning",title:"Select warehouse"}),!1;const t={id:this.variantId,color:this.color.toUpperCase(),size:this.size.toUpperCase(),quantity:this.quantity,warehouse_id:this.warehouse,warehouse:this.warehouses.find((t=>t.id==this.warehouse)),stockAlert:this.stockAlert};this.variants.push(t),this.variantId++,this.color="",this.size="",this.quantity=0,this.stockAlert=0},deleteVariant(t){this.variants=this.variants.filter((e=>e.id!==t))},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},handleStockAlertChange(){this.quantity<=0&&(this.quantity=0)},handleSellingPriceChange(){this.product.sellingPrice<=0&&(this.product.sellingPrice=0)},handleBuyingPriceChange(){this.product.buyingPrice<=0&&(this.product.buyingPrice=0)},getWarhouses(){return vh.all().then((t=>("SUCCESS"==t.data.code&&this.$store.dispatch("warehouse/setWarehouses",t.data.data.warehouses),t)),this.$handleApiError)},getProduct(){return ss.getProduct(this.$route.params.id).then((t=>{if("SUCCESS"==t.data.code){const{variations:e,buying_price:a,selling_price:s,ref:r,name:i,description:o,deliveries:l,image:n,offers:d}=t.data.data.products;return this.variants=e,this.product.buyingPrice=a,this.product.sellingPrice=s,this.product.name=i,this.product.reference=r,this.product.description=o,this.image=n,this.offers=d,this.variantId=this.getLastVariantId(e),this.selectedDeliveries=l.map((t=>t.delivery_id)),this.isLoaded=!0,t}}),this.$handleApiError)},getData(){this.isLoaded=!1,Promise.allSettled([this.getWarhouses(),this.getProduct()]).then((t=>{t.every((t=>"fulfilled"==t.status))&&(this.isLoaded=!0)}),this.$handleApiError)}},mounted(){this.getData()}};const Uf=(0,d.Z)(zf,[["render",pf]]);var Lf=Uf;const Pf={class:"tw-pb-14"},Af=(0,r._)("div",{class:"mb-5"},[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Product"),(0,r._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Show product informations")],-1),Wf={key:0},$f={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Ef={class:"tw-grid tw-grid-cols-12 tw-gap-2"},Of={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},Tf=(0,r._)("p",{class:"tw-font-light tw-text-neutral-500"},"Name:",-1),Vf={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},qf={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},Rf=(0,r._)("p",{class:"tw-font-light tw-text-neutral-500"},"Reference:",-1),If={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},Ff={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},jf=(0,r._)("p",{class:"tw-font-light tw-text-neutral-500"},"Buying Price:",-1),Nf={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},Mf={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},Hf=(0,r._)("p",{class:"tw-font-light tw-text-neutral-500"},"Selling Price:",-1),Yf={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},Kf={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},Zf=(0,r._)("p",{class:"tw-font-light tw-text-neutral-500"},"Total Delivered:",-1),Bf={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},Qf={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},Gf=(0,r._)("p",{class:"tw-font-light tw-text-neutral-500"},"Total Sent:",-1),Jf={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},Xf={class:"tw-col-span-12 md:tw-col-span-12 tw-flex tw-gap-2 tw-flex-col tw-flex-wrap"},tv=(0,r._)("p",{class:"tw-font-light tw-text-neutral-500"},"Description:",-1),ev={class:"tw-text-neutral-800 tw-font-medium"},av={key:2,class:"tw-text-neutral-700 tw-font-bold tw-mb-1 tw-mt-5"},sv={key:3,class:"tw-border bg-white tw-w-full tw-rounded-md"},rv={key:4,class:"tw-text-neutral-700 tw-font-bold tw-mt-5 tw-mb-1"},iv={key:5,class:"tw-overflow-hidden tw-border bg-white tw-w-full tw-rounded-md"},ov={class:"tw-max-w-full tw-overflow-auto"},lv={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},nv={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},dv={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},wv={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},cv={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},uv={class:"tw-px-6 tw-py-2"},pv={class:"tw-px-6 tw-py-2"},mv={class:"tw-flex tw-flex-col"},hv={class:"tw-px-6 tw-py-2"},gv={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},fv=(0,r._)("th",{scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},null,-1),vv=(0,r._)("th",{scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},null,-1),yv=(0,r._)("td",{class:"tw-px-6 tw-py-2"},null,-1),_v={class:"tw-px-6 tw-py-2"},xv={class:"tw-flex tw-flex-col tw-font-medium"},bv=(0,r._)("td",{class:"tw-px-6 tw-py-2"},null,-1);function kv(t,e,a,s,i,o){const l=(0,r.up)("LoadingAnimation"),n=(0,r.up)("ProductTracking");return(0,r.wg)(),(0,r.iD)("div",Pf,[Af,i.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",Wf,[(0,r.Wm)(l)])),i.isLoaded?((0,r.wg)(),(0,r.iD)("div",$f,[(0,r._)("div",null,[(0,r._)("div",null,[(0,r._)("div",Ef,[(0,r._)("div",Of,[Tf,(0,r._)("p",Vf,(0,J.zw)(i.product.name),1)]),(0,r._)("div",qf,[Rf,(0,r._)("p",If,(0,J.zw)(i.product.ref),1)]),(0,r._)("div",Ff,[jf,(0,r._)("p",Nf,(0,J.zw)(i.product.buying_price)+" "+(0,J.zw)(i.currency),1)]),(0,r._)("div",Mf,[Hf,(0,r._)("p",Yf,(0,J.zw)(i.product.selling_price)+" "+(0,J.zw)(i.currency),1)]),(0,r._)("div",Kf,[Zf,(0,r._)("p",Bf,(0,J.zw)(o.qtyTotalDelivered),1)]),(0,r._)("div",Qf,[Gf,(0,r._)("p",Jf,(0,J.zw)(o.qtyTotalSent),1)]),(0,r._)("div",Xf,[tv,(0,r._)("p",ev,(0,J.zw)(i.product.description),1)])])])])])):(0,r.kq)("",!0),i.isLoaded?((0,r.wg)(),(0,r.iD)("h1",av,"Tracking")):(0,r.kq)("",!0),i.isLoaded?((0,r.wg)(),(0,r.iD)("div",sv,[(0,r.Wm)(n,{product:i.product},null,8,["product"])])):(0,r.kq)("",!0),i.isLoaded?((0,r.wg)(),(0,r.iD)("h1",rv,"Variations")):(0,r.kq)("",!0),i.isLoaded?((0,r.wg)(),(0,r.iD)("div",iv,[(0,r._)("div",null,[(0,r._)("div",null,[(0,r._)("div",ov,[(0,r._)("table",lv,[(0,r._)("thead",nv,[(0,r._)("tr",null,[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(["id","size","color","qty","Stock Alert"],(t=>(0,r._)("th",{class:(0,J.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,r._)("div",dv,(0,J.zw)(t),1)],2))),64))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.product.variations,(t=>((0,r.wg)(),(0,r.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,r._)("th",wv,(0,J.zw)(t.id),1),(0,r._)("th",cv,(0,J.zw)(t.size),1),(0,r._)("td",uv,(0,J.zw)(t.color),1),(0,r._)("td",pv,[(0,r._)("div",mv,[(0,r._)("span",null,"Initial: "+(0,J.zw)(t.quantity),1)])]),(0,r._)("td",hv,(0,J.zw)(t.stockAlert),1)])))),128)),(0,r._)("tr",gv,[fv,vv,yv,(0,r._)("td",_v,[(0,r._)("div",xv,[(0,r._)("span",null,"Total: "+(0,J.zw)(o.qtyTotal),1)])]),bv])])])])])])])):(0,r.kq)("",!0)])}const Cv={class:"tw-flex tw-items-ce tw-gap-1 tw-border-b tw-border-solid tw-border-neutral-200"},Dv=["onClick"];function Sv(t,e,a,s,i,o){const l=(0,r.up)("ProductTrackingTable");return(0,r.wg)(),(0,r.j4)(er._,{flat:"",class:"tw-p-1"},{default:(0,r.w5)((()=>[(0,r._)("div",Cv,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.tabs,(t=>((0,r.wg)(),(0,r.iD)("button",{key:t.id,onClick:e=>i.tab=t.id,class:(0,J.C_)(["tw-px-4 tw-py-2 tw-rounded-t hover:tw-border-orange-500/50 tw-duration-300 tw-border tw-border-solid tw-border-neutral-200 tw-text-neutral-500 tw-border-b-0",{"tw-bg-orange-500 !tw-text-white tw-border-transparent":t.id==i.tab}])},(0,J.zw)(t.name),11,Dv)))),128))]),(0,r.kq)("",!0),(0,r.Wm)(rr.Oo,{class:"tw-mt-0",modelValue:i.tab,"onUpdate:modelValue":e[1]||(e[1]=t=>i.tab=t)},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.tabs,(t=>((0,r.wg)(),(0,r.j4)(ir.H,{key:t.id,value:t.id},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{product:a.product,source:t.source},null,8,["product","source"])])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})}const zv={class:"tw-mt-5"},Uv={class:"tw-max-w-full tw-overflow-auto"},Lv={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Pv={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},Av={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"};function Wv(t,e,a,s,i,o){const l=(0,r.up)("ProductTrackingRow");return(0,r.wg)(),(0,r.iD)("div",zv,[(0,r._)("div",Uv,[(0,r._)("table",Lv,[(0,r._)("thead",Pv,[(0,r._)("tr",null,[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(["id","name","quantity","actions"],(t=>(0,r._)("th",{class:(0,J.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,r._)("div",Av,(0,J.zw)(t),1)],2))),64))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.items,(t=>((0,r.wg)(),(0,r.j4)(l,{item:t,key:t.id,source:a.source},null,8,["item","source"])))),128))])])])])}const $v={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},Ev={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Ov={class:"tw-flex tw-items-start tw-h-full"},Tv={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Vv={class:"tw-px-6 tw-py-2"},qv={key:0},Rv={class:"tw-w-fit tw-min-w-[200px] tw-flex tw-items-center"},Iv={key:0,class:"tw-h-fit tw-py-2"},Fv=(0,r._)("td",{class:"tw-px-3 tw-py-1 tw-bg-emerald-100 tw-border tw-text-emerald-500"}," Received: ",-1),jv={class:"tw-px-3 tw-py-1 tw-border tw-text-emerald-500"},Nv=(0,r._)("td",{class:"tw-px-3 tw-py-1 tw-bg-red-100 tw-text-red-500 tw-border"}," Not Received: ",-1),Mv={class:"tw-px-3 tw-py-1 tw-border tw-text-red-500"},Hv=(0,r._)("td",{class:"tw-px-3 tw-py-1 tw-bg-purple-100 tw-border tw-text-purple-500"}," Shipped: ",-1),Yv={class:"tw-px-3 tw-py-1 tw-border tw-text-purple-500"},Kv=(0,r._)("td",{class:"tw-px-3 tw-py-1 tw-bg-blue-100 tw-border tw-text-blue-500"}," Delivered: ",-1),Zv={class:"tw-px-3 tw-py-1 tw-border tw-text-blue-500"},Bv={key:1},Qv={class:"tw-w-fit tw-min-w-[200px] tw-flex tw-items-center"},Gv={key:0,class:"tw-h-fit tw-py-2"},Jv=(0,r._)("td",{class:"tw-px-3 tw-py-1 tw-bg-emerald-100 tw-border tw-text-emerald-500"}," Received: ",-1),Xv={class:"tw-px-3 tw-py-1 tw-border tw-text-emerald-500"},ty=(0,r._)("td",{class:"tw-px-3 tw-py-1 tw-bg-red-100 tw-text-red-500 tw-border"}," Not Received: ",-1),ey={class:"tw-px-3 tw-py-1 tw-border tw-text-red-500"},ay=(0,r._)("td",{class:"tw-px-3 tw-py-1 tw-bg-purple-100 tw-border tw-text-purple-500"}," Shipped: ",-1),sy={class:"tw-px-3 tw-py-1 tw-border tw-text-purple-500"},ry=(0,r._)("td",{class:"tw-px-3 tw-py-1 tw-bg-blue-100 tw-border tw-text-blue-500"}," Delivered: ",-1),iy={class:"tw-px-3 tw-py-1 tw-border tw-text-blue-500"},oy={class:"tw-px-6 tw-py-2 tw-space-x-3"};function ly(t,e,a,s,i,o){const l=(0,r.up)("ShowProductVariantActions");return(0,r.wg)(),(0,r.iD)("tr",$v,[(0,r._)("th",Ev,[(0,r._)("div",Ov,(0,J.zw)(a.item.id),1)]),(0,r._)("th",Tv,(0,J.zw)(a.item.name),1),(0,r._)("td",Vv,["warehouses"==a.source?((0,r.wg)(),(0,r.iD)("div",qv,[(0,r._)("div",Rv,[(0,r._)("button",{onClick:e[0]||(e[0]=t=>i.showDetails=!i.showDetails),class:"tw-bg-blue-400/10 tw-py-1 tw-px-4 tw-rounded tw-text-blue-400 tw-flex tw-gap-2 tw-items-center tw-justify-between"},[(0,r._)("p",null,"Total: "+(0,J.zw)(o.get_total_quantity(a.item.product_variations)),1),(0,r.Wm)(et.t,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(i.showDetails?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})])]),(0,r.Wm)(Pt.Fx,null,{default:(0,r.w5)((()=>[i.showDetails?((0,r.wg)(),(0,r.iD)("div",Iv,[(0,r._)("table",null,[(0,r._)("tbody",null,[(0,r._)("tr",null,[Fv,(0,r._)("td",jv,(0,J.zw)(o.get_total_quantity(a.item.product_variations,"movements_total_confirmed_quantity")),1)]),(0,r._)("tr",null,[Nv,(0,r._)("td",Mv,(0,J.zw)(o.get_total_quantity(a.item.product_variations,"movements_total_not_confirmed_quantity")),1)]),(0,r._)("tr",null,[Hv,(0,r._)("td",Yv,(0,J.zw)(o.get_total_quantity(a.item.product_variations,"total_shipped_quantity")),1)]),(0,r._)("tr",null,[Kv,(0,r._)("td",Zv,(0,J.zw)(o.get_total_quantity(a.item.product_variations,"total_delivered_quantity")),1)])])])])):(0,r.kq)("",!0)])),_:1})])):(0,r.kq)("",!0),"deliveries"==a.source?((0,r.wg)(),(0,r.iD)("div",Bv,[(0,r._)("div",Qv,[(0,r._)("button",{onClick:e[1]||(e[1]=t=>i.showDetails=!i.showDetails),class:"tw-bg-blue-400/10 tw-py-1 tw-px-4 tw-rounded tw-text-blue-400 tw-flex tw-gap-2 tw-items-center tw-justify-between"},[(0,r._)("p",null,"Total: "+(0,J.zw)(o.get_total_quantity(a.item.product_variations)),1),(0,r.Wm)(et.t,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(i.showDetails?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})])]),(0,r.Wm)(Pt.Fx,null,{default:(0,r.w5)((()=>[i.showDetails?((0,r.wg)(),(0,r.iD)("div",Gv,[(0,r._)("table",null,[(0,r._)("tbody",null,[(0,r._)("tr",null,[Jv,(0,r._)("td",Xv,(0,J.zw)(o.get_total_quantity(a.item.product_variations,"movements_total_confirmed_quantity")),1)]),(0,r._)("tr",null,[ty,(0,r._)("td",ey,(0,J.zw)(o.get_total_quantity(a.item.product_variations,"movements_total_not_confirmed_quantity")),1)]),(0,r._)("tr",null,[ay,(0,r._)("td",sy,(0,J.zw)(o.get_total_quantity(a.item.product_variations,"total_shipped_quantity")),1)]),(0,r._)("tr",null,[ry,(0,r._)("td",iy,(0,J.zw)(o.get_total_quantity(a.item.product_variations,"total_delivered_quantity")),1)])])])])):(0,r.kq)("",!0)])),_:1})])):(0,r.kq)("",!0)]),(0,r._)("td",oy,[(0,r._)("div",null,[(0,r.Wm)(l,{type:a.source,source:a.item},null,8,["type","source"])])])])}function ny(t,e,a,s,i,o){const l=(0,r.up)("ProductVariantDetails");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(X.T,{onClick:e[0]||(e[0]=t=>i.visible=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue-lighten-2",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-eye")])),_:1})])),_:1}),(0,r.Wm)(l,{visible:i.visible,onCancel:o.cancel,type:a.type,source:a.source},null,8,["visible","onCancel","type","source"])])}const dy={class:"md:tw-w-[50%] tw-relative tw-max-h-full tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},wy={class:"tw-p-5"},cy={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500 tw-rounded-md tw-overflow-hidden"},uy=(0,r._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,r._)("tr",null,[(0,r._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,r._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},"SIZE"),(0,r._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"},"COLOR"),(0,r._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY ")])],-1);function py(t,e,a,s,i,o){const l=(0,r.up)("ProductVariantDetailsRow"),n=(0,r.up)("popup-full");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(n,{visible:a.visible,onCancel:o.cancel},{default:(0,r.w5)((()=>[(0,r._)("div",dy,[(0,r.Wm)(X.T,{onClick:o.cancel,icon:"mdi-close",variant:"flat",size:"w-small",color:"red",class:"tw-absolute tw-top-3 tw-z-10 tw-right-3"},null,8,["onClick"]),(0,r._)("div",wy,[(0,r._)("table",cy,[uy,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.source.product_variations,(t=>((0,r.wg)(),(0,r.j4)(l,{key:t.id,item:t,type:a.type},null,8,["item","type"])))),128))])]),(0,r.kq)("",!0)])])])),_:1},8,["visible","onCancel"])])}const my={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},hy={class:"tw-w-4 tw-px-2 tw-py-1"},gy={class:"tw-w-4 tw-px-2 tw-py-1"},fy={class:"tw-w-4 tw-px-2 tw-py-1"},vy={class:"tw-w-4 tw-px-2 tw-py-1"},yy={class:"tw-w-fit tw-min-w-[200px] tw-flex tw-items-center"},_y={key:0,class:"tw-h-fit tw-py-2"},xy=(0,r._)("td",{class:"tw-px-3 tw-py-1 tw-bg-emerald-100 tw-border tw-text-emerald-500"}," Received: ",-1),by={class:"tw-px-3 tw-py-1 tw-border tw-text-emerald-500"},ky=(0,r._)("td",{class:"tw-px-3 tw-py-1 tw-bg-red-100 tw-text-red-500 tw-border"}," Not Received: ",-1),Cy={class:"tw-px-3 tw-py-1 tw-border tw-text-red-500"},Dy=(0,r._)("td",{class:"tw-px-3 tw-py-1 tw-bg-purple-100 tw-border tw-text-purple-500"}," Shipped: ",-1),Sy={class:"tw-px-3 tw-py-1 tw-border tw-text-purple-500"},zy=(0,r._)("td",{class:"tw-px-3 tw-py-1 tw-bg-blue-100 tw-border tw-text-blue-500"}," Delivered: ",-1),Uy={class:"tw-px-3 tw-py-1 tw-border tw-text-blue-500"};function Ly(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("tr",my,[(0,r._)("td",hy,(0,J.zw)(a.item.id),1),(0,r._)("td",gy,(0,J.zw)(a.item.size),1),(0,r._)("td",fy,(0,J.zw)(a.item.color),1),(0,r._)("td",vy,[(0,r._)("div",null,[(0,r._)("div",yy,[(0,r._)("button",{onClick:e[0]||(e[0]=t=>i.showDetails=!i.showDetails),class:"tw-bg-blue-400/10 tw-py-1 tw-px-4 tw-rounded tw-text-blue-400 tw-flex tw-gap-2 tw-items-center tw-justify-between"},[(0,r._)("p",null," Total: "+(0,J.zw)(a.item.on_hand_quantity),1),(0,r.Wm)(et.t,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(i.showDetails?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})])]),(0,r.Wm)(Pt.Fx,null,{default:(0,r.w5)((()=>[i.showDetails?((0,r.wg)(),(0,r.iD)("div",_y,[(0,r._)("table",null,[(0,r._)("tbody",null,[(0,r._)("tr",null,[xy,(0,r._)("td",by,(0,J.zw)(a.item.movements_total_confirmed_quantity),1)]),(0,r._)("tr",null,[ky,(0,r._)("td",Cy,(0,J.zw)(a.item.movements_total_not_confirmed_quantity),1)]),(0,r._)("tr",null,[Dy,(0,r._)("td",Sy,(0,J.zw)(a.item.total_shipped_quantity),1)]),(0,r._)("tr",null,[zy,(0,r._)("td",Uy,(0,J.zw)(a.item.total_delivered_quantity),1)])])])])):(0,r.kq)("",!0)])),_:1})])])])}var Py={props:["type","item"],data(){return{showDetails:!1}}};const Ay=(0,d.Z)(Py,[["render",Ly]]);var Wy=Ay,$y={props:["visible","source","type"],components:{ProductVariantDetailsRow:Wy},methods:{cancel(){this.$emit("cancel")}},mounted(){}};const Ey=(0,d.Z)($y,[["render",py]]);var Oy=Ey,Ty={props:["product","source","type"],components:{ProductVariantDetails:Oy},data(){return{visible:!1,quantity:1,newVariant:null}},methods:{cancel(){this.visible=!1}},mounted(){console.log(this.source)}};const Vy=(0,d.Z)(Ty,[["render",ny]]);var qy=Vy,Ry={components:{ShowProductVariantActions:qy},props:["source","item"],data(){return{showDetails:!1}},methods:{get_total_quantity(t,e="on_hand_quantity"){let a=0;return t.forEach((t=>{a+=t[e]})),a}}};const Iy=(0,d.Z)(Ry,[["render",ly]]);var Fy=Iy,jy={props:["product","source"],components:{ProductTrackingRow:Fy},computed:{items(){return this.product.tracking[this.source]}},methods:{},mounted(){}};const Ny=(0,d.Z)(jy,[["render",Wv]]);var My=Ny,Hy={components:{ProductTrackingTable:My},props:["product"],data(){return{tab:1,tabs:[{id:1,name:"Deliveries",source:"deliveries"},{id:2,name:"Warehouses",source:"warehouses"}]}}};const Yy=(0,d.Z)(Hy,[["render",Sv]]);var Ky=Yy,Zy={components:{ProductTracking:Ky},data(){return{currency:N,isLoading:!1,isLoaded:!1,variantId:1,variants:[],product:{name:"",reference:"",buyingPrice:0,sellingPrice:0,description:""}}},computed:{qtyTotalDelivered(){let t=0;return this.product.tracking.deliveries.forEach((e=>{e.product_variations.forEach((e=>{t+=e.total_delivered_quantity}))})),this.product.tracking.warehouses.forEach((e=>{e.product_variations.forEach((e=>{t+=e.total_delivered_quantity}))})),t},qtyTotalSent(){let t=0;return this.product.tracking.warehouses.forEach((e=>{e.product_variations.forEach((e=>{t+=e.movements_total_confirmed_quantity,t+=e.movements_total_not_confirmed_quantity}))})),t},qtyTotal(){if(this.isLoaded){let t=0;return this.product.variations.forEach((e=>{t+=e.quantity})),t}return 0}},methods:{getProduct(){const t=this.$route.params.id;ss.getProduct(t).then((t=>{"SUCCESS"==t.data.code&&(this.product=t.data.data.products,this.isLoaded=!0)}),this.$handleApiError)}},mounted(){this.getProduct()}};const By=(0,d.Z)(Zy,[["render",kv]]);var Qy=By,Gy={name:"products",path:"/products",component:ns,meta:{module:"product"},children:[{name:"product/list",path:"",component:fp,meta:{module:"product",subModule:"product/list",title:"Products List",gate:"show_all_products"}},{name:"product/add",path:"add",component:Kh,meta:{module:"product",subModule:"product/add",title:"Add Product",gate:"create_product"}},{name:"product/update",path:"update/:id",component:Lf,meta:{module:"product",subModule:"product/update",title:"Update Product",gate:"update_product"}},{name:"product/show",path:":id",component:Qy,meta:{module:"product",subModule:"product/show",title:"Product Informations",gate:"view_product"}}]};const Jy={class:"mb-5 tw-flex tw-justify-between tw-items-center"},Xy=(0,r._)("div",null,[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Users List"),(0,r._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage all users")],-1),t_={key:0},e_=(0,r._)("span",{class:"text-white"}," Add User ",-1),a_={key:0},s_={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},r_={class:"mb-5 tw-flex"},i_={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},o_={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},l_={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},n_=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Role",-1),d_={class:"tw-relative"},w_=["value"],c_={class:""};function u_(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation"),d=(0,r.up)("UsersTable");return(0,r.wg)(),(0,r.iD)("div",{key:l.users.length},[(0,r._)("div",Jy,[Xy,t.$can("create_user")?((0,r.wg)(),(0,r.iD)("div",t_,[(0,r.Wm)(X.T,{color:"primary-color",link:"",to:{name:"user/add"},variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{icon:"mdi-plus",class:"mr-2 text-white"}),e_])),_:1})])):(0,r.kq)("",!0)]),l.fetched?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",a_,[(0,r.Wm)(n)])),l.fetched?((0,r.wg)(),(0,r.iD)("div",s_,[(0,r._)("div",r_,[(0,r.Wm)(X.T,{onClick:e[0]||(e[0]=t=>o.showFilters=!o.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white",size:"xx-large"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,r._)("div",i_,[(0,r.Wm)(Qt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[s.nr,o.search]])])]),(0,r._)("div",{class:(0,J.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":o.showFilters}])},[(0,r._)("div",o_,[(0,r._)("div",l_,[n_,(0,r._)("div",d_,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.role=t),class:"tw-w-full focus:tw-border-orange-400 tw-capitalize tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.roles,(t=>((0,r.wg)(),(0,r.iD)("option",{key:t,value:t},(0,J.zw)(t),9,w_)))),128))],512),[[s.bM,o.role]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])])])],2),(0,r._)("div",c_,[(0,r.Wm)(d,{users:l.filteredUsers,columns:o.columns},null,8,["users","columns"])])])):(0,r.kq)("",!0)])}const p_={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},m_={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},h_={class:"tw-text-xs tw-text-gray-700 tw- tw-bg-gray-50"},g_=(0,r._)("th",{scope:"col",class:"tw-p-4"},[(0,r._)("div",{class:"tw-flex tw-items-center"},[(0,r._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,r._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),f_={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},v_=(0,r._)("td",{class:"tw-w-4 tw-p-4"},[(0,r._)("div",{class:"tw-flex tw-items-center"},[(0,r._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,r._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),y_={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},__={class:"tw-px-6 tw-py-4"},x_={class:"tw-px-6 tw-py-4"},b_={class:"tw-px-6 tw-py-4"},k_={class:"tw-px-6 tw-py-4"},C_={class:"tw-px-6 tw-py-4"},D_={key:0,class:"tw-text-red-500"},S_={key:1},z_={key:0,class:"tw-text-green-500 tw-flex tw-items-center tw-gap-2"},U_=(0,r._)("div",{class:"tw-p-1 tw-rounded-full tw-bg-green-500"},null,-1),L_={key:1,class:"tw-text-neutral-700"},P_={class:"tw-px-6 tw-py-4"},A_={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},W_={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},$_={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},E_=(0,r._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),O_=["value"],T_={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},V_={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},q_={class:"tw-text-white"};function R_(t,e,a,i,o,l){const n=(0,r.up)("RoleName"),d=(0,r.up)("UserStatus"),w=(0,r.up)("UserActions");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",p_,[(0,r._)("table",m_,[(0,r._)("thead",h_,[(0,r._)("tr",null,[g_,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.columns,(t=>((0,r.wg)(),(0,r.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,r._)("div",f_,(0,J.zw)(t.name),1)])))),128))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.items,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[v_,(0,r._)("th",y_,(0,J.zw)(e.id),1),(0,r._)("td",__,(0,J.zw)(e.firstname)+" "+(0,J.zw)(e.lastname),1),(0,r._)("td",x_,[(0,r.Wm)(n,{role:e.role_name},null,8,["role"])]),(0,r._)("td",b_,(0,J.zw)(e.email),1),(0,r._)("td",k_,(0,J.zw)(e.phone),1),(0,r._)("td",C_,[e.last_action?((0,r.wg)(),(0,r.iD)("div",S_,[1==l.isOnline(l.lastSeen(e.last_action))?((0,r.wg)(),(0,r.iD)("div",z_,[U_,(0,r.Uk)(" Online ")])):((0,r.wg)(),(0,r.iD)("div",L_,(0,J.zw)(l.lastSeen(e.last_action)),1))])):((0,r.wg)(),(0,r.iD)("div",D_," Never Connected "))]),(0,r._)("td",P_,[t.$can("update_user_status")?((0,r.wg)(),(0,r.j4)(d,{key:0,user:e},null,8,["user"])):(0,r.kq)("",!0)]),(0,r._)("td",A_,[(0,r.Wm)(w,{user:e},null,8,["user"])])])))),128))])])]),(0,r._)("div",W_,[(0,r._)("div",$_,[E_,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.allowedLimit,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t,key:t},(0,J.zw)(t),9,O_)))),128))],512),[[s.bM,o.paginationLimit]])]),(0,r._)("div",T_,[(0,r._)("div",V_,(0,J.zw)(l.prevRange+1)+" - "+(0,J.zw)(o.currentPage==l.pageCount?a.users.length:l.nextRange)+" of "+(0,J.zw)(a.users.length)+" items ",1),(0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.pageCount,(t=>((0,r.wg)(),(0,r.j4)(X.T,{onClick:e=>o.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==o.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,r.w5)((()=>[(0,r._)("span",q_,(0,J.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}function I_(t,e,a,s,i,o){const l=(0,r.up)("popup");return(0,r.wg)(),(0,r.iD)("div",null,[t.$can("update_user")?((0,r.wg)(),(0,r.j4)(X.T,{key:0,to:"/users/update/"+a.user.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-pencil-outline")])),_:1})])),_:1},8,["to"])):(0,r.kq)("",!0),t.$can("view_user")?((0,r.wg)(),(0,r.j4)(X.T,{key:1,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-eye-outline")])),_:1})])),_:1})):(0,r.kq)("",!0),t.$can("delete_user")&&"admin"!==a.user.role_name?((0,r.wg)(),(0,r.j4)(X.T,{key:2,onClick:e[0]||(e[0]=t=>i.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(l,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this user?</p> You won't be able to revert this!",loading:i.isLoading,visible:i.showPopup,onResolved:o.handleResolved},null,8,["loading","visible","onResolved"])])}var F_={props:["rowIndex","user"],name:"userActions",data(){return{showPopup:!1,isLoading:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,Q["delete"](this.user.id).then((t=>{"USER_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"User Deleted Successfully"})),Q.all().then((t=>{"SHOW_ALL_USERS"==t.data.code&&this.$store.dispatch("user/setUsers",t.data.data.users)})).catch(this.$handleApiError)})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const j_=(0,d.Z)(F_,[["render",I_]]);var N_=j_;const M_={key:0,class:"tw-flex tw-items-center"};function H_(t,e,a,s,i,o){return"admin"!==a.user.role_name?((0,r.wg)(),(0,r.iD)("div",M_,[(0,r.Wm)(ol.G,{disabled:i.isLoading,loading:i.isLoading,onChange:o.handleChange,color:"primary-color",flat:!0,modelValue:i.checked,"onUpdate:modelValue":e[0]||(e[0]=t=>i.checked=t),density:"compact","hide-details":!0},null,8,["disabled","loading","onChange","modelValue"])])):(0,r.kq)("",!0)}var Y_={props:["rowIndex","prop","user"],data(){return{isLoading:!1,checked:!1}},watch:{},methods:{handleChange(){const t={id:this.user.id,status:this.checked?"true":"false"};this.isLoading=!0,Q.updateStatus(t).then((t=>{"STATUS_USER_UPDATED"==t.data.code&&(this.$alert({type:"success",title:"Status updated"}),this.setUpdatedUser(this.user.id,this.checked))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},setUpdatedUser(t,e){let a=localStorage.getItem("updatedUsers"),s={};a?(s=JSON.parse(a),s[t]=e):s[t]=e,localStorage.setItem("updatedUsers",JSON.stringify(s))},getUpdatedUsers(){let t=localStorage.getItem("updatedUsers");if(!t)return{};let e=JSON.parse(t);return e}},mounted(){const t=this.getUpdatedUsers();Object.keys(t).includes(`${this.user.id}`)?this.checked=1==t[this.model.id]:this.checked=1==this.user.status}};const K_=(0,d.Z)(Y_,[["render",H_]]);var Z_=K_;const B_={class:"tw-flex tw-items-center tw-h-full"};function Q_(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("div",B_,[(0,r._)("div",{class:(0,J.C_)([o.current.bg,"tw-px-2 tw-py-1 tw-rounded-lg"])},[(0,r._)("div",{class:(0,J.C_)([o.current.text,"tw-text-sm tw-uppercase"])},(0,J.zw)(a.role),3)],2)])}var G_={props:["role"],data(){return{variants:{default:{bg:"tw-bg-neutral-500/10",text:"tw-text-neutral-500"},admin:{bg:"tw-bg-pink-500/10",text:"tw-text-pink-500"},agente:{bg:"tw-bg-green-500/10",text:"tw-text-green-500"},delivery:{bg:"tw-bg-blue-500/10",text:"tw-text-blue-500"}}}},computed:{current(){return["admin","delivery","agente"].includes(this.role)?this.variants[this.role]:this.variants["default"]}}};const J_=(0,d.Z)(G_,[["render",Q_]]);var X_=J_,tx={props:["columns","users"],components:{UserActions:N_,UserStatus:Z_,RoleName:X_},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.users.length/this.paginationLimit)},items(){return this.users.slice(this.prevRange,this.nextRange)}},methods:{lastSeen(t){let e=Date.parse(t.replace("-","/"))/1e3;return(0,Gs.x)(e)},isOnline(t){let e=["Just Now","one minute ago","2 minutes ago","3 minutes ago"];return e.includes(t)}}};const ex=(0,d.Z)(tx,[["render",R_]]);var ax=ex,sx={components:{UsersTable:ax},data(){return{localUrl:F,isLoaded:!1,showFilters:!1,role:"All",search:"",columns:[{prop:"id",name:"#"},{prop:"fullname",name:"Name"},{prop:"role_name",name:"Role"},{prop:"email",name:"Email"},{prop:"phone",name:"Phone Number"},{prop:"last_seen",name:"Last Seen"},{prop:"status",name:"Active"},{name:"Acions",prop:"users"}]}},computed:{fetched(){return this.$store.getters["user/fetched"]},users(){return this.$store.getters["user/users"]},roles(){let t=new Set(["All",...this.users.map((t=>t.role_name))]);return t},filteredUsers(){const t=this.role,e=this.search;return this.users.filter((a=>("all"===t.toLocaleLowerCase()||t.toLocaleLowerCase()===a.role_name)&&!!(a.firstname.toLowerCase().includes(e.toLowerCase())||a.lastname.toLowerCase().includes(e.toLowerCase())||a.role_name.toLowerCase().includes(e.toLowerCase())||a.email.toLowerCase().includes(e.toLowerCase())||a.phone.toLowerCase().includes(e.toLowerCase()))))}},methods:{getRoles(){Q.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.isFormReady=!0}})).catch(this.$handleApiError)},getUsers(){Q.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),this.$store.dispatch("user/setFetched",!0)}})).catch(this.$handleApiError)}},mounted(){localStorage.removeItem("updatedUsers"),this.fetched||this.getUsers()}};const rx=(0,d.Z)(sx,[["render",u_]]);var ix=rx,ox=a(988);const lx=(0,r._)("div",{class:"mb-5"},[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Add User "),(0,r._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create new user")],-1),nx={key:0},dx={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},wx={class:"tw-w-full"},cx=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," First Name ",-1),ux={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},px={class:"tw-w-full"},mx=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Last Name",-1),hx={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},gx={class:"tw-w-full"},fx=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Email",-1),vx={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},yx={class:"tw-w-full"},_x=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Phone Number ",-1),xx={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},bx=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Product",-1),kx=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),Cx=["value"],Dx=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery cities",-1),Sx=["value"],zx=(0,r._)("div",{class:"mb-1 my-2 text-body-2 tw-text-zinc-700"},"Fee",-1),Ux=(0,r._)("span",{class:"text-white"},"Add",-1),Lx=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Role",-1),Px={class:"tw-flex tw-gap-10 tw-h-full tw-items-center"},Ax=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Status:",-1),Wx={class:"tw-w-full"},$x=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Password",-1),Ex={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Ox={class:"tw-w-full"},Tx=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Confirm Password ",-1),Vx={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},qx=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery cities",-1),Rx={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Ix=(0,r._)("span",{class:"text-white text-capitalize"},"Cancel",-1),Fx=(0,r._)("span",{class:"text-white text-capitalize"},"Create",-1);function jx(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation");return(0,r.wg)(),(0,r.iD)("div",null,[lx,o.isFormReady?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",nx,[(0,r.Wm)(n)])),o.isFormReady?((0,r.wg)(),(0,r.iD)("div",dx,[(0,r._)("div",null,[(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",wx,[cx,(0,r.Wm)(at.hw,{error:!o.formStatus.firstname.valid,"hide-details":!0,onKeyup:e[0]||(e[0]=t=>l.resetError("firstname")),modelValue:o.user.firstname,"onUpdate:modelValue":e[1]||(e[1]=t=>o.user.firstname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",ux,(0,J.zw)(o.formStatus.firstname.message),1)])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",px,[mx,(0,r.Wm)(at.hw,{error:!o.formStatus.lastname.valid,"hide-details":!0,onKeyup:e[2]||(e[2]=t=>l.resetError("lastname")),modelValue:o.user.lastname,"onUpdate:modelValue":e[3]||(e[3]=t=>o.user.lastname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",hx,(0,J.zw)(o.formStatus.lastname.message),1)])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",gx,[fx,(0,r.Wm)(at.hw,{error:!o.formStatus.email.valid,"hide-details":!0,onKeyup:e[4]||(e[4]=t=>l.resetError("email")),modelValue:o.user.email,"onUpdate:modelValue":e[5]||(e[5]=t=>o.user.email=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",vx,(0,J.zw)(o.formStatus.email.message),1)])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",yx,[_x,(0,r.Wm)(at.hw,{error:!o.formStatus.phone.valid,"hide-details":!0,onKeyup:e[6]||(e[6]=t=>l.resetError("phone")),modelValue:o.user.phone,"onUpdate:modelValue":e[7]||(e[7]=t=>o.user.phone=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",xx,(0,J.zw)(o.formStatus.phone.message),1)])])),_:1}),l.isAgente?((0,r.wg)(),(0,r.j4)(cs.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r._)("div",null,[(0,r.Wm)(ol.G,{modelValue:o.isHavingAllProducts,"onUpdate:modelValue":e[8]||(e[8]=t=>o.isHavingAllProducts=t),color:"primary-color",label:"All Products"},null,8,["modelValue"])]),bx,(0,r._)("div",null,[(0,r.Wm)(ox.f,{disabled:o.isHavingAllProducts,modelValue:o.selectedProducts,"onUpdate:modelValue":e[9]||(e[9]=t=>o.selectedProducts=t),"filter-keys":"name",density:"compact","item-value":"id","item-title":"name",variant:"outlined",color:"primary-color",chips:"",items:l.selectProducts,multiple:""},null,8,["disabled","modelValue","items"])])])])),_:1})):(0,r.kq)("",!0),l.isDelivery?((0,r.wg)(),(0,r.j4)(cs.D,{key:1,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[kx,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>o.city=t),class:"tw-w-full tw-py-[7px] focus:tw-border-orange-500 tw-px-4 tw-border tw-outline-orange-500 tw-border-neutral-400 tw-border-solid tw-rounded-md"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.cities,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.name),9,Cx)))),128))],512),[[s.bM,o.city]])])])),_:1})):(0,r.kq)("",!0),l.isDelivery?((0,r.wg)(),(0,r.j4)(cs.D,{key:2,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[Dx,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[11]||(e[11]=t=>o.deliveryCity=t),class:"tw-w-full tw-py-[7px] focus:tw-border-orange-500 tw-px-4 tw-border tw-outline-orange-500 tw-border-neutral-400 tw-border-solid tw-rounded-md"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.cities,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.name),9,Sx)))),128))],512),[[s.bM,o.deliveryCity]]),zx,(0,r.Wm)(at.hw,{"hide-details":!0,modelValue:o.deliveryCityFee,"onUpdate:modelValue":e[12]||(e[12]=t=>o.deliveryCityFee=t),clearable:"",type:"number","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"]),(0,r.Wm)(X.T,{onClick:l.handleAddCity,class:"tw-text-white tw-my-3",variant:"flat",color:"primary-color",block:""},{default:(0,r.w5)((()=>[Ux])),_:1},8,["onClick"])])])),_:1})):(0,r.kq)("",!0)])),_:1})])),_:1}),(0,r.Wm)(cs.D,{cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[Lx,(0,r.Wm)(vp.r,{class:"text-capitalize",items:l.roles,"item-title":"name","item-value":"id",modelValue:o.role,"onUpdate:modelValue":e[13]||(e[13]=t=>o.role=t),variant:"outlined",color:"primary-color",density:"compact"},null,8,["items","modelValue"])])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",Px,[Ax,(0,r.Wm)(ol.G,{modelValue:o.user.status,"onUpdate:modelValue":e[14]||(e[14]=t=>o.user.status=t),color:"primary-color","hide-details":!0,flat:""},null,8,["modelValue"])])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",Wx,[$x,(0,r.Wm)(at.hw,{error:!o.formStatus.password.valid,"hide-details":!0,onKeyup:e[15]||(e[15]=t=>l.resetError("password")),modelValue:o.user.password,"onUpdate:modelValue":e[16]||(e[16]=t=>o.user.password=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",Ex,(0,J.zw)(o.formStatus.password.message),1)])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",Ox,[Tx,(0,r.Wm)(at.hw,{error:!o.formStatus.confirmPassword.valid,"hide-details":!0,onKeyup:e[17]||(e[17]=t=>l.resetError("confirmPassword")),modelValue:o.user.confirmPassword,"onUpdate:modelValue":e[18]||(e[18]=t=>o.user.confirmPassword=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",Vx,(0,J.zw)(o.formStatus.confirmPassword.message),1)])])),_:1}),l.isDelivery?((0,r.wg)(),(0,r.j4)(cs.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[qx,(0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.deliveryCities,(t=>((0,r.wg)(),(0,r.iD)("div",{class:"tw-flex tw-items-center tw-gap-2",key:t},[(0,r._)("div",null,(0,J.zw)(l.cities.filter((e=>e.id==t.city_id))[0]?.name),1),(0,r._)("div",null,(0,J.zw)(t.fee)+" "+(0,J.zw)(o.currency),1),(0,r._)("div",null,[(0,r.Wm)(et.t,{color:"red",onClick:e=>l.removeCity(t.id),size:"x-small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-delete")])),_:2},1032,["onClick"])])])))),128))])])])),_:1})):(0,r.kq)("",!0)])),_:1})])),_:1})])),_:1})]),(0,r._)("div",Rx,[(0,r.Wm)(X.T,{link:"",to:"/",color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,r.w5)((()=>[Ix])),_:1}),(0,r.Wm)(X.T,{onClick:l.create,loading:o.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,r.w5)((()=>[Fx])),_:1},8,["onClick","loading"])])])):(0,r.kq)("",!0)])}var Nx={data(){return{localUrl:F,currency:N,isFormReady:!1,isLoading:!1,city:1,isMultipleProducts:!1,isHavingAllProducts:!1,id:1,deliveryCity:1,deliveryCityFee:0,deliveryCities:[],product:0,selectedProducts:[],formStatus:{firstname:{valid:!0,message:""},lastname:{valid:!0,message:""},phone:{valid:!0,message:""},email:{valid:!0,message:""},password:{valid:!0,message:""},confirmPassword:{valid:!0,message:""}},user:{firstname:"",lastname:"",phone:"",email:"",password:"",confirmPassword:"",status:!0},role:3}},computed:{roles(){return this.$store.getters["user/roles"]},rolesFetched(){return this.$store.getters["user/fetchedRoles"]},cities(){return this.$store.getters["city/cities"]},citiesFetched(){return this.$store.getters["city/fetched"]},products(){return this.$store.getters["product/products"]},productsFethched(){return this.$store.getters["product/fetched"]},isAgente(){return 2===this.role},isDelivery(){return 3===this.role},selectProducts(){return this.isMultipleProducts,[...this.products]},userProducts(){return this.selectedProducts}},watch:{},methods:{removeCity(t){this.deliveryCities=this.deliveryCities.filter((e=>e.id!==t))},handleAddCity(){if(this.deliveryCityFee<=0)return!1;this.deliveryCities.push({id:this.id,city_id:this.deliveryCity,fee:this.deliveryCityFee}),this.id+=1,this.deliveryCity=1,this.deliveryCityFee=0},create(){if(!this.validate())return!1;this.isLoading=!0;const t={...this.user,role:this.role,product_id:this.userProducts,city:this.city,deliveryCities:this.deliveryCities,having_all:this.isHavingAllProducts};Q.register(t).then((t=>{"USER_CREATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.user={firstname:"",lastname:"",phone:"",email:"",password:"",confirmPassword:"",status:!0},this.role=3,this.product_id=null,this.deliveryCities=[],this.id=1)})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;if("VALIDATION_ERROR"==e?.code)for(let a in e.error)this.formStatus[a]={valid:!1,message:e.error[a][0]}})).finally((()=>{this.isLoading=!1}))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){this.formStatus.email=bt(this.user.email),this.formStatus.firstname=Ct(this.user.firstname),this.formStatus.lastname=Ct(this.user.lastname),this.formStatus.phone=Ct(this.user.phone),this.formStatus.password=kt(this.user.password),this.formStatus.confirmPassword=St(this.user.password,this.user.confirmPassword);const t=this.formStatus.email.valid,e=this.formStatus.firstname.valid,a=this.formStatus.lastname.valid,s=this.formStatus.phone.valid,r=this.formStatus.password.valid,i=this.formStatus.confirmPassword.valid;return t&&e&&a&&r&&i&&s},getRoles(){return this.rolesFetched?new Promise((t=>t())):Q.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.$store.dispatch("user/setFetchedRoles",!0)}})).catch(this.$handleApiError)},async getCities(){return this.citiesFetched?new Promise((t=>t())):Q.cities().then((t=>{this.$store.dispatch("city/cities",t.data.data),this.$store.dispatch("city/setFetched",!0)}))},async getProducts(){return this.productsFethched?new Promise((t=>t())):ss.all().then((t=>{this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0)}),(t=>this.$handleApiError(t)))}},mounted(){Promise.allSettled([this.getRoles(),this.getCities(),this.getProducts()]).then((t=>{console.log(t),this.isFormReady=!0}),(t=>this.$handleApiError(t)))}};const Mx=(0,d.Z)(Nx,[["render",jx]]);var Hx=Mx;const Yx=(0,r._)("div",{class:"mb-5"},[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Update User "),(0,r._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Update user informations")],-1),Kx={key:0},Zx={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Bx={class:"tw-flex tw-gap-2 tw-text-neutral-800 tw-items-center tw-mb-5"},Qx={class:"tw-block tw-py-1 tw-px-2 tw-rounded-md text-primary-color"},Gx={class:"tw-w-full"},Jx=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," First Name ",-1),Xx={class:"tw-w-full"},tb=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Last Name",-1),eb={class:"tw-w-full"},ab=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Email",-1),sb={class:"tw-w-full"},rb=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Phone Number ",-1),ib={class:"tw-w-full tw-flex tw-gap-10 tw-items-center"},ob=(0,r._)("span",null,"Update Password: ",-1),lb={class:"tw-w-full"},nb=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Password",-1),db={class:"tw-w-full"},wb=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Confirm Password ",-1),cb=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Role",-1),ub={class:"tw-flex tw-gap-10 tw-h-full tw-items-center"},pb=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Status:",-1),mb=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Product",-1),hb=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),gb=["value"],fb=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery cities",-1),vb=["value"],yb=(0,r._)("div",{class:"mb-1 my-2 text-body-2 tw-text-zinc-700"},"Fee",-1),_b=(0,r._)("span",{class:"text-white"},"Add",-1),xb=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery cities",-1),bb={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},kb=(0,r._)("span",{class:"text-white text-capitalize"},"Cancel",-1),Cb=(0,r._)("span",{class:"text-white text-capitalize"},"Update",-1);function Db(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation");return(0,r.wg)(),(0,r.iD)("div",null,[Yx,l.isFormReady?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",Kx,[(0,r.Wm)(n)])),l.isFormReady?((0,r.wg)(),(0,r.iD)("div",Zx,[(0,r._)("div",Bx,[(0,r.Uk)(" User ID: "),(0,r._)("span",Qx,(0,J.zw)(o.id),1)]),(0,r._)("div",null,[(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",Gx,[Jx,(0,r.Wm)(at.hw,{"error-messages":o.formStatus.firstname.message,modelValue:o.firstname,"onUpdate:modelValue":e[0]||(e[0]=t=>o.firstname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",Xx,[tb,(0,r.Wm)(at.hw,{"error-messages":o.formStatus.lastname.message,modelValue:o.lastname,"onUpdate:modelValue":e[1]||(e[1]=t=>o.lastname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",eb,[ab,(0,r.Wm)(at.hw,{"error-messages":o.formStatus.email.message,modelValue:o.email,"onUpdate:modelValue":e[2]||(e[2]=t=>o.email=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",sb,[rb,(0,r.Wm)(at.hw,{"error-messages":o.formStatus.phone.message,modelValue:o.phone,"onUpdate:modelValue":e[3]||(e[3]=t=>o.phone=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-0",cols:"12"},{default:(0,r.w5)((()=>[(0,r._)("div",ib,[ob,(0,r.Wm)(ol.G,{modelValue:o.updatePassword,"onUpdate:modelValue":e[4]||(e[4]=t=>o.updatePassword=t),color:"primary-color","hide-details":!0},null,8,["modelValue"])])])),_:1}),o.updatePassword?((0,r.wg)(),(0,r.j4)(cs.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",lb,[nb,(0,r.Wm)(at.hw,{"error-messages":o.formStatus.password.message,modelValue:o.password,"onUpdate:modelValue":e[5]||(e[5]=t=>o.password=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1})):(0,r.kq)("",!0),o.updatePassword?((0,r.wg)(),(0,r.j4)(cs.D,{key:1,class:"!tw-py-2 tw-pt-0",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",db,[wb,(0,r.Wm)(at.hw,{"error-messages":o.formStatus.confirmPassword.message,modelValue:o.confirmPassword,"onUpdate:modelValue":e[6]||(e[6]=t=>o.confirmPassword=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1})):(0,r.kq)("",!0)])),_:1})])),_:1}),(0,r.Wm)(cs.D,{cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[cb,(0,r.Wm)(vp.r,{class:"text-capitalize","error-messages":o.formStatus.role,items:l.roles,"item-title":"name","item-value":"id",modelValue:o.role,"onUpdate:modelValue":e[7]||(e[7]=t=>o.role=t),variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","items","modelValue"])])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",ub,[pb,(0,r.Wm)(ol.G,{modelValue:o.status,"onUpdate:modelValue":e[8]||(e[8]=t=>o.status=t),color:"primary-color","hide-details":!0,flat:""},null,8,["modelValue"])])])),_:1}),l.isAgente?((0,r.wg)(),(0,r.j4)(cs.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r._)("div",null,[(0,r.Wm)(ol.G,{modelValue:o.isHavingAllProducts,"onUpdate:modelValue":e[9]||(e[9]=t=>o.isHavingAllProducts=t),color:"primary-color",label:"All Products"},null,8,["modelValue"])]),mb,(0,r._)("div",null,[(0,r.Wm)(ox.f,{disabled:o.isHavingAllProducts,modelValue:o.selectedProducts,"onUpdate:modelValue":e[10]||(e[10]=t=>o.selectedProducts=t),"filter-keys":"name",density:"compact","item-value":"id","item-title":"name",variant:"outlined",color:"primary-color",chips:"",items:l.selectProducts,multiple:""},null,8,["disabled","modelValue","items"])])])])),_:1})):(0,r.kq)("",!0),l.isDelivery?((0,r.wg)(),(0,r.j4)(cs.D,{key:1,class:"!tw-py-2",cols:"12",md:"12"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[hb,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[11]||(e[11]=t=>o.city=t),class:"tw-w-full tw-py-[7px] focus:tw-border-orange-500 tw-px-4 tw-border tw-outline-orange-500 tw-border-neutral-400 tw-border-solid tw-rounded-md"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.cities,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.name),9,gb)))),128))],512),[[s.bM,o.city]])])])),_:1})):(0,r.kq)("",!0)])),_:1})])),_:1}),l.isDelivery?((0,r.wg)(),(0,r.j4)(cs.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[fb,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[12]||(e[12]=t=>o.deliveryCity=t),class:"tw-w-full tw-py-[7px] focus:tw-border-orange-500 tw-px-4 tw-border tw-outline-orange-500 tw-border-neutral-400 tw-border-solid tw-rounded-md"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.cities,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.name),9,vb)))),128))],512),[[s.bM,o.deliveryCity]]),yb,(0,r.Wm)(at.hw,{"hide-details":!0,modelValue:o.deliveryCityFee,"onUpdate:modelValue":e[13]||(e[13]=t=>o.deliveryCityFee=t),clearable:"",type:"number","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"]),(0,r.Wm)(X.T,{onClick:l.handleAddCity,class:"tw-text-white tw-my-3",variant:"flat",color:"primary-color",block:""},{default:(0,r.w5)((()=>[_b])),_:1},8,["onClick"])])])),_:1})):(0,r.kq)("",!0),l.isDelivery?((0,r.wg)(),(0,r.j4)(cs.D,{key:1,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[xb,(0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.deliveryCities,(t=>((0,r.wg)(),(0,r.iD)("div",{class:"tw-flex tw-items-center tw-gap-2",key:t},[(0,r._)("div",null,(0,J.zw)(o.cities.filter((e=>e.id==t.city_id))[0]?.name),1),(0,r._)("div",null,(0,J.zw)(t.fee)+" DH ",1),(0,r._)("div",null,[(0,r.Wm)(et.t,{color:"red",onClick:e=>l.removeCity(t.id),size:"x-small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-delete")])),_:2},1032,["onClick"])])])))),128))])])])),_:1})):(0,r.kq)("",!0)])),_:1})]),(0,r._)("div",bb,[(0,r.Wm)(X.T,{link:"",to:{name:"user/list"},color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,r.w5)((()=>[kb])),_:1}),(0,r.Wm)(X.T,{onClick:l.update,loading:o.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,r.w5)((()=>[Cb])),_:1},8,["onClick","loading"])])])):(0,r.kq)("",!0)])}var Sb={data(){return{serverUrl:j,isFetched:!1,isRolesFetched:!1,isUserFetched:!1,isProductsFetched:!1,isLoading:!1,updatePassword:!1,autoId:1,cities:[],deliveryCity:1,deliveryCityFee:0,city:1,deliveryCities:[],formStatus:{firstname:{valid:!0,message:""},lastname:{valid:!0,message:""},phone:{valid:!0,message:""},email:{valid:!0,message:""},password:{valid:!0,message:""},confirmPassword:{valid:!0,message:""}},id:null,firstname:"",lastname:"",phone:"",email:"",password:"",confirmPassword:"",role:"",user_image:null,status:!1,product:null,products:[],selectedProducts:[],isMultipleProducts:!1,isHavingAllProducts:!1}},computed:{roles(){return this.$store.getters["user/roles"]},isFormReady(){return this.isFetched},isAgente(){return 2===this.role},isDelivery(){return 3===this.role},user(){return{id:this.id,firstname:this.firstname,lastname:this.lastname,phone:this.phone,email:this.email,password:this.password,product_id:this.product,deliveryCities:this.deliveryCities,city:this.city,role:this.role,status:this.status?1:0}},selectProducts(){return this.isMultipleProducts,[...this.products]},userProducts(){return this.selectedProducts}},watch:{role(t){console.log("changed"),2===t&&0===this.products.length&&(this.isProductsFetched=!1)}},methods:{update(){if(!this.validate())return!1;const t={...this.user,role:this.role,product_id:this.userProducts,city:this.city,deliveryCities:this.deliveryCities,having_all:this.isHavingAllProducts};this.isLoading=!0,Q.update(t,this.updatePassword).then((t=>{"USER_UPDATED"==t.data.code&&this.$alert({type:"success",title:t.data.message})})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;switch(console.log(t),e?.code){case"VALIDATION_ERROR":for(let t in e.error)this.formStatus[t]={valid:!1,message:e.error[t][0]};break}return t})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1}))},validate(){this.formStatus["email"]=bt(this.email),this.formStatus["firstname"]=Ct(this.firstname),this.formStatus["lastname"]=Ct(this.lastname),this.formStatus["phone"]=Ct(this.phone),this.formStatus["password"]=kt(this.password),this.formStatus["confirmPassword"]=St(this.password,this.confirmPassword);const t=this.formStatus["email"].valid,e=this.formStatus["firstname"].valid,a=this.formStatus["lastname"].valid,s=this.formStatus["phone"].valid;if(this.updatePassword){const r=this.formStatus["password"].valid,i=this.formStatus["confirmPassword"].valid;return t&&e&&a&&r&&i&&s}return t&&e&&a&&s},removeCity(t){this.deliveryCities=this.deliveryCities.filter((e=>e.id!==t))},handleAddCity(){if(this.deliveryCityFee<=0)return!1;this.deliveryCities.push({id:this.autoId,city_id:this.deliveryCity,fee:this.deliveryCityFee}),this.autoId+=1,this.deliveryCity=1,this.deliveryCityFee=0},async getRoles(){await Q.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.isRolesFetched=!0}})).catch(this.$handleApiError)},async getUser(){return Q.getUser(this.$route.params.id).then((t=>{if("USER_SUCCESS"==t?.data.code){const e=t.data.data.user;if(this.id=e.id,this.firstname=e.firstname,this.lastname=e.lastname,this.email=e.email,this.phone=e.phone,this.role=e.role,2==e.role&&(this.isHavingAllProducts=1==e.having_all,this.selectedProducts=e?.product),this.user_image=e.photo,this.status=1==e.status,this.isUserFetched=!0,3==e.role){console.log("this is delivery"),this.city=e?.city?.id;let t=0;this.deliveryCities=e.deliveryPlaces.map((e=>(parseInt(e.id)>=t&&(t=parseInt(e.id)+1),{id:e.id,city_id:e.city_id,fee:parseInt(e.fee)}))),this.autoId=t}}})).catch(this.$handleApiError)},async getProducts(){return ss.all().then((t=>{this.products=t.data.data.products,this.products.length>0?this.product=this.user.product_id:this.product=null,this.isProductsFetched=!0}),(t=>this.$handleApiError(t)))},async getCities(){return Q.cities().then((t=>{console.log(t.data),this.cities=t.data.data}))}},async mounted(){0==this.roles.length?await this.getRoles():this.isRolesFetched=!0,Promise.allSettled([this.getRoles(),this.getProducts(),this.getCities(),this.getUser()]).then((()=>{this.selectedProducts.length==this.products.length&&(this.product=0,this.isMultipleProducts=!1),this.isFetched=!0}),(t=>this.$handleApiError(t)))}};const zb=(0,d.Z)(Sb,[["render",Db]]);var Ub=zb;const Lb=(0,r._)("div",{class:"mb-5"},[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Add New Role "),(0,r._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create new Role")],-1),Pb={key:0},Ab={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Wb={class:"md:tw-w-1/2 tw-w-full"},$b=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Role Name",-1),Eb={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Ob={class:"mb-3 text-body-2 tw-text-zinc-700"},Tb={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-text-xs"},Vb={class:"tw-flex tw-flex-wrap tw-gap-2 tw-mt-5"},qb=["onClick"],Rb={key:0},Ib={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Fb=(0,r._)("span",{class:"text-white text-capitalize"},"Cancel",-1),jb=(0,r._)("span",{class:"text-white text-capitalize"},"Create",-1);function Nb(t,e,a,s,i,o){const l=(0,r.up)("LoadingAnimation");return(0,r.wg)(),(0,r.iD)("div",null,[Lb,i.isFormReady?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",Pb,[(0,r.Wm)(l)])),i.isFormReady?((0,r.wg)(),(0,r.iD)("div",Ab,[(0,r._)("div",null,[(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{cols:"12",md:"12"},{default:(0,r.w5)((()=>[(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",md:"12"},{default:(0,r.w5)((()=>[(0,r._)("div",Wb,[$b,(0,r.Wm)(at.hw,{error:!i.formStatus.name.valid,"hide-details":!0,onKeyup:e[0]||(e[0]=t=>o.resetError("firstname")),modelValue:i.name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",Eb,(0,J.zw)(i.formStatus.name.message),1)])])),_:1}),(0,r.Wm)(cs.D,{cols:"12"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r._)("div",Ob,[(0,r.Uk)(" Select Permissions: "),(0,r._)("div",Tb,(0,J.zw)(i.formStatus.permissions.message),1)]),(0,r._)("div",Vb,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.permissions,(t=>((0,r.wg)(),(0,r.iD)("div",{onClick:e=>o.handleClick(t),class:(0,J.C_)([{"!tw-bg-orange-500 !tw-text-white":i.selectedPermissions.includes(t)},"tw-py-1 tw-px-2 tw-bg-gray-900/10 tw-text-gray-900 tw-rounded-lg tw-cursor-pointer"]),key:t},[(0,r._)("span",null,(0,J.zw)(t),1)],10,qb)))),128))])])])),_:1})])),_:1})])),_:1}),(0,r.Wm)(cs.D,{cols:"12",md:"6"},{default:(0,r.w5)((()=>[i.show?((0,r.wg)(),(0,r.iD)("div",Rb,(0,J.zw)(i.selectedPermissions),1)):(0,r.kq)("",!0)])),_:1})])),_:1})]),(0,r._)("div",Ib,[(0,r.Wm)(X.T,{link:"",to:"/",color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,r.w5)((()=>[Fb])),_:1}),(0,r.Wm)(X.T,{onClick:o.create,loading:i.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,r.w5)((()=>[jb])),_:1},8,["onClick","loading"])])])):(0,r.kq)("",!0)])}var Mb={data(){return{localUrl:F,isFormReady:!1,isLoading:!1,show:!1,formStatus:{name:{valid:!0,message:""},permissions:{valid:!0,message:""}},name:"",permissions:[],selectedPermissions:[]}},computed:{roles(){return this.$store.getters["user/roles"]}},methods:{create(){if(!this.validate())return!1;this.isLoading=!0,Q.createRole({name:this.name,permissions:this.selectedPermissions}).then((t=>{"ROLE_ADDED"===t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.getRoles(),this.name="",this.selectedPermissions=[])})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;if("VALIDATION_ERROR"==e?.code)for(let a in e.error)this.formStatus[a]={valid:!1,message:e.error[a][0]}})).finally((()=>{this.isLoading=!1}))},handleClick(t){this.selectedPermissions.includes(t)?this.selectedPermissions=this.selectedPermissions.filter((e=>e!==t)):this.selectedPermissions.push(t)},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=Ct(this.name,"Name"),this.formStatus.permissions=Ut(this.selectedPermissions),this.formStatus.name.valid&&this.formStatus.permissions.valid},getRoles(){Q.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.isFormReady=!0}})).catch(this.$handleApiError)}},async mounted(){0==this.roles.length?await this.getRoles():this.isFormReady=!0,this.permissions=this.$store.getters["user/permissions"]}};const Hb=(0,d.Z)(Mb,[["render",Nb]]);var Yb=Hb;const Kb={class:"mb-5 tw-flex tw-justify-between tw-items-center"},Zb=(0,r._)("div",null,[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Roles List"),(0,r._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage all Roles")],-1),Bb={key:0},Qb=(0,r._)("span",{class:"text-white"}," Add Role ",-1),Gb={key:0},Jb={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Xb={class:"mb-5 tw-flex"},tk={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},ek={class:""};function ak(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation"),d=(0,r.up)("RolesTable");return(0,r.wg)(),(0,r.iD)("div",{key:l.roles.length},[(0,r._)("div",Kb,[Zb,t.$can("create_role")?((0,r.wg)(),(0,r.iD)("div",Bb,[(0,r.Wm)(X.T,{color:"primary-color",link:"",to:{name:"user/addRole"},variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{icon:"mdi-plus",class:"mr-2 text-white"}),Qb])),_:1})])):(0,r.kq)("",!0)]),l.fetched?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",Gb,[(0,r.Wm)(n)])),l.fetched?((0,r.wg)(),(0,r.iD)("div",Jb,[(0,r._)("div",Xb,[(0,r.Wm)(X.T,{icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white !tw-w-0 !tw-overflow-hidden"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white",size:"xx-large"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,r._)("div",tk,[(0,r.Wm)(Qt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[s.nr,o.search]])])]),(0,r._)("div",ek,[(0,r.Wm)(d,{roles:l.filteredRoles,columns:o.columns},null,8,["roles","columns"])])])):(0,r.kq)("",!0)])}const sk={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},rk={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},ik={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},ok=(0,r._)("th",{scope:"col",class:"tw-p-4"},[(0,r._)("div",{class:"tw-flex tw-items-center"},[(0,r._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,r._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),lk={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},nk=(0,r._)("td",{class:"tw-w-4 tw-p-4"},[(0,r._)("div",{class:"tw-flex tw-items-center"},[(0,r._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,r._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),dk={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},wk={class:"tw-px-6 tw-py-4 tw-uppercase"},ck={class:"tw-px-6 tw-py-4"},uk={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},pk={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},mk={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},hk=(0,r._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),gk=["value"],fk={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},vk={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},yk={class:"tw-text-white"};function _k(t,e,a,i,o,l){const n=(0,r.up)("RolePermissions"),d=(0,r.up)("RoleActions");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",sk,[(0,r._)("table",rk,[(0,r._)("thead",ik,[(0,r._)("tr",null,[ok,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.columns,(t=>((0,r.wg)(),(0,r.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,r._)("div",lk,(0,J.zw)(t.name),1)])))),128))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.items,(t=>((0,r.wg)(),(0,r.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[nk,(0,r._)("th",dk,(0,J.zw)(t.id),1),(0,r._)("td",wk,(0,J.zw)(t.name),1),(0,r._)("td",ck,[(0,r.Wm)(n,{role:t},null,8,["role"])]),(0,r._)("td",uk,[(0,r.Wm)(d,{role:t},null,8,["role"])])])))),128))])])]),(0,r._)("div",pk,[(0,r._)("div",mk,[hk,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.allowedLimit,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t,key:t},(0,J.zw)(t),9,gk)))),128))],512),[[s.bM,o.paginationLimit]])]),(0,r._)("div",fk,[(0,r._)("div",vk,(0,J.zw)(l.prevRange+1)+" - "+(0,J.zw)(o.currentPage==l.pageCount?a.roles.length:l.nextRange)+" of "+(0,J.zw)(a.roles.length)+" items ",1),(0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.pageCount,(t=>((0,r.wg)(),(0,r.j4)(X.T,{onClick:e=>o.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==o.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,r.w5)((()=>[(0,r._)("span",yk,(0,J.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const xk={key:0},bk={class:"tw-flex tw-flex-wrap tw-gap-2"};function kk(t,e,a,s,i,o){const l=(0,r.up)("popup");return["admin","agente","delivery"].includes(a.role.name)?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",xk,[t.$can("update_role")?((0,r.wg)(),(0,r.j4)(X.T,{key:0,to:"/users/roles/update/"+a.role.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-pencil-outline")])),_:1})])),_:1},8,["to"])):(0,r.kq)("",!0),t.$can("delete_role")&&"admin"!==a.role.name?((0,r.wg)(),(0,r.j4)(X.T,{key:1,onClick:e[0]||(e[0]=t=>i.showPopupDelete=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(l,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this Role?</p> You won't be able to revert this!",loading:i.isLoadingDelete,visible:i.showPopupDelete,onResolved:o.handleResolvedDelete},null,8,["loading","visible","onResolved"]),(0,r.Wm)(l,{noConfirm:!0,type:"info",title:"Permissions",loading:i.isLoadingShow,visible:i.showPopupShow,onResolved:o.handleResolvedShow},{default:(0,r.w5)((()=>[(0,r._)("div",bk,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.permissions,(t=>((0,r.wg)(),(0,r.iD)("div",{class:"tw-py-1 tw-px-2 tw-bg-gray-900/10 tw-text-gray-900 tw-rounded-lg tw-cursor-pointer",key:t},(0,J.zw)(t),1)))),128))])])),_:1},8,["loading","visible","onResolved"])]))}var Ck={props:["rowIndex","prop","role"],name:"roleActions",data(){return{showPopupDelete:!1,showPopupShow:!1,isLoadingDelete:!1,isLoadingShow:!1,permissions:["create_user","delete_user","update_user","show_user"]}},methods:{handleResolvedDelete(t){t?(this.isLoadingDelete=!0,Q.deleteRole(this.role.id).then((t=>{"ROLE_DELETED"==t.data.code&&(this.isLoadingDelete=!1,this.$alert({type:"success",title:"Role Deleted Successfully"})),Q.roles().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("user/setRoles",t.data.data.roles)})).catch(this.$handleApiError)})).catch(this.$handleApiError).finally((()=>{this.isLoadingDelete=!1,this.showPopupDelete=!1}))):this.showPopupDelete=!1},handleResolvedShow(t){t?console.log(t):this.showPopupShow=!1}}};const Dk=(0,d.Z)(Ck,[["render",kk]]);var Sk=Dk;const zk={class:"tw-h-100 tw-flex tw-items-center tw-max-w-[750px] tw-flex-wrap tw-gap-2"},Uk=["title"];function Lk(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("div",zk,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.permissions,(t=>((0,r.wg)(),(0,r.iD)("div",{class:"tw-py-0 tw-px-2 tw-text-xs tw-h-5 tw-bg-gray-900/10 tw-text-gray-900 tw-rounded-lg",title:t.description,key:t.name},(0,J.zw)(t.name),9,Uk)))),128))])}var Pk={props:["role"],name:"rolePermissions",data(){return{}},computed:{permissions(){return this.role.permissions.map((t=>t))}}};const Ak=(0,d.Z)(Pk,[["render",Lk]]);var Wk=Ak,$k={props:["columns","roles"],components:{RoleActions:Sk,RolePermissions:Wk},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.roles.length/this.paginationLimit)},items(){return this.roles.slice(this.prevRange,this.nextRange)}},methods:{}};const Ek=(0,d.Z)($k,[["render",_k]]);var Ok=Ek,Tk={components:{RolesTable:Ok},data(){return{localUrl:F,search:"",columns:[{prop:"id",name:"#"},{prop:"name",name:"Role Name"},{prop:"permissions",name:"Permissions"},{name:"Acions",prop:"roles"}]}},computed:{roles(){return this.$store.getters["user/roles"]},fetched(){return this.$store.getters["user/fetchedRoles"]},filteredRoles(){return this.roles.filter((t=>{const e=t.permissions.map((t=>t.name));return!!(""===this.search||t.name.toLocaleLowerCase().includes(this.search.toLocaleLowerCase())||e.includes(this.search.toLocaleLowerCase())||e.some((t=>t.toLowerCase().includes(this.search.toLocaleLowerCase()))))}))}},methods:{getRoles(){return Q.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.$store.dispatch("user/setFetchedRoles",!0)}})).catch(this.$handleApiError)}},mounted(){this.rolesFetched||this.getRoles()}};const Vk=(0,d.Z)(Tk,[["render",ak]]);var qk=Vk;const Rk=(0,r._)("div",{class:"mb-5"},[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Update Role "),(0,r._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Update existing role")],-1),Ik={key:0},Fk={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},jk={class:"md:tw-w-1/2 tw-w-full"},Nk=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Role Name ",-1),Mk={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Hk={class:"mb-3 text-body-2 tw-text-zinc-700"},Yk={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-text-xs"},Kk={class:"tw-flex tw-flex-wrap tw-gap-2 tw-mt-5"},Zk=["onClick"],Bk={key:0},Qk={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Gk=(0,r._)("span",{class:"text-white text-capitalize"},"Cancel",-1),Jk=(0,r._)("span",{class:"text-white text-capitalize"},"Update",-1);function Xk(t,e,a,s,i,o){const l=(0,r.up)("LoadingAnimation");return(0,r.wg)(),(0,r.iD)("div",null,[Rk,i.isFormReady?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",Ik,[(0,r.Wm)(l)])),i.isFormReady?((0,r.wg)(),(0,r.iD)("div",Fk,[(0,r._)("div",null,[(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{cols:"12",md:"12"},{default:(0,r.w5)((()=>[(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",md:"12"},{default:(0,r.w5)((()=>[(0,r._)("div",jk,[Nk,(0,r.Wm)(at.hw,{error:!i.formStatus.name.valid,"hide-details":!0,onKeyup:e[0]||(e[0]=t=>o.resetError("firstname")),modelValue:i.name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",Mk,(0,J.zw)(i.formStatus.name.message),1)])])),_:1}),(0,r.Wm)(cs.D,{cols:"12"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r._)("div",Hk,[(0,r.Uk)(" Select Permissions: "),(0,r._)("div",Yk,(0,J.zw)(i.formStatus.permissions.message),1)]),(0,r._)("div",Kk,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.permissions,(t=>((0,r.wg)(),(0,r.iD)("div",{onClick:e=>o.handleClick(t),class:(0,J.C_)([{"!tw-bg-orange-500 !tw-text-white":i.selectedPermissions.includes(t)},"tw-py-1 tw-px-2 tw-bg-gray-900/10 tw-text-gray-900 tw-rounded-lg tw-cursor-pointer"]),key:t},(0,J.zw)(t),11,Zk)))),128))])])])),_:1})])),_:1})])),_:1}),(0,r.Wm)(cs.D,{cols:"12",md:"6"},{default:(0,r.w5)((()=>[i.show?((0,r.wg)(),(0,r.iD)("div",Bk,(0,J.zw)(i.selectedPermissions),1)):(0,r.kq)("",!0)])),_:1})])),_:1})]),(0,r._)("div",Qk,[(0,r.Wm)(X.T,{link:"",to:"/users/roles",color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,r.w5)((()=>[Gk])),_:1}),(0,r.Wm)(X.T,{onClick:o.update,loading:i.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,r.w5)((()=>[Jk])),_:1},8,["onClick","loading"])])])):(0,r.kq)("",!0)])}var tC={data(){return{localUrl:F,isFormReady:!1,isLoading:!1,show:!1,formStatus:{name:{valid:!0,message:""},permissions:{valid:!0,message:""}},name:"",permissions:[],selectedPermissions:[]}},computed:{roles(){return this.$store.getters["user/roles"]}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,Q.updateRole(this.$route.params.id,{name:this.name,permissions:this.selectedPermissions}).then((t=>{"ROLE_UPDATED"===t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.getRoles())})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;if("VALIDATION_ERROR"==e?.code)for(let a in e.error)this.formStatus[a]={valid:!1,message:e.error[a][0]}})).finally((()=>{this.isLoading=!1}))},handleClick(t){this.selectedPermissions.includes(t)?this.selectedPermissions=this.selectedPermissions.filter((e=>e!==t)):this.selectedPermissions.push(t)},addPermissions(t){return t},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=Ct(this.name,"Name"),this.formStatus.permissions=Ut(this.selectedPermissions),this.formStatus.name.valid&&this.formStatus.permissions.valid},getRole(){Q.getRole(this.$route.params.id).then((t=>{this.name=t.data.data.role,this.selectedPermissions=[...t.data.data.permission],this.isFormReady=!0}))},getRoles(){Q.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.isFormReady=!0}})).catch(this.$handleApiError)}},async mounted(){await this.getRole(),this.permissions=this.$store.getters["user/permissions"]}};const eC=(0,d.Z)(tC,[["render",Xk]]);var aC=eC,sC={name:"users",path:"/users",component:ns,meta:{module:"user"},children:[{name:"user/list",path:"",component:ix,meta:{module:"user",subModule:"user/list",title:"Users List",gate:"show_all_users"}},{name:"user/add",path:"add",component:Hx,meta:{module:"user",subModule:"user/add",title:"Add User",gate:"create_user"}},{name:"user/update",path:"update/:id",component:Ub,meta:{module:"user",subModule:"user/update",title:"Update User",gate:"update_user"}},{name:"user/addRole",path:"addRole",component:Yb,meta:{module:"user",subModule:"user/addRole",title:"Add Role",gate:"create_role"}},{name:"user/roles",path:"roles",component:qk,meta:{module:"user",subModule:"user/roles",title:"Roles List",gate:"show_all_roles"}},{name:"user/updateRole",path:"roles/update/:id",component:aC,meta:{module:"user",subModule:"user/updateRole",title:"Update Role",gate:"view_role"}}]};const rC={class:"mb-5 tw-flex tw-justify-between tw-items-center"},iC=(0,r._)("div",null,[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Sales List "),(0,r._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your sales")],-1),oC={key:0},lC=(0,r._)("span",{class:"text-white"}," Add Sale ",-1),nC={key:0},dC={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},wC={class:"mb-5 tw-flex"},cC={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},uC={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},pC={class:""};function mC(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation"),d=(0,r.up)("SalesAnalytics"),w=(0,r.up)("IndexFilter"),c=(0,r.up)("SalesTable"),u=(0,r.up)("AddSale"),p=(0,r.up)("NewAddSale");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",rC,[iC,t.$can("create_sale")&&l.fetched?((0,r.wg)(),(0,r.iD)("div",oC,[(0,r.Wm)(X.T,{color:"primary-color",onClick:e[0]||(e[0]=t=>o.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{icon:"mdi-plus",class:"mr-2 text-white"}),lC])),_:1})])):(0,r.kq)("",!0)]),l.fetched?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",nC,[(0,r.Wm)(n)])),l.fetched?((0,r.wg)(),(0,r.iD)("div",dC,[(0,r.Wm)(d,{sales:l.sales},null,8,["sales"]),(0,r._)("div",wC,[(0,r.Wm)(X.T,{onClick:e[1]||(e[1]=t=>o.showFilters=!o.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white",size:"xx-large"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,r._)("div",cC,[(0,r.Wm)(Qt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by client, phone..."},null,512),[[s.nr,o.search]])]),(0,r._)("div",uC,[(0,r.Wm)(et.t,{class:"tw-text-gray-500",size:"small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-pound")])),_:1}),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.searchId=t),type:"number",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search By ID"},null,512),[[s.nr,o.searchId]])]),(0,r.Wm)(sa.C),(0,r.Wm)(X.T,{onClick:l.handleReset,icon:"",rounded:"lg",variant:"flat",size:"small",disabled:o.isButtonDisabled,loading:o.isLoadingReset,color:"red",class:"text-white tw-mr-2"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white",icon:"mdi-restart-alert",size:"xx-large"})])),_:1},8,["onClick","disabled","loading"]),(0,r.Wm)(X.T,{onClick:l.getSales,icon:"",rounded:"lg",variant:"flat",size:"small",color:"blue",class:"text-white tw-mr-2"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white",icon:"mdi-autorenew",size:"xx-large"})])),_:1},8,["onClick"])]),(0,r._)("div",{class:(0,J.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[1000px] !tw-overflow-visible":o.showFilters}])},[(0,r.Wm)(w,{sales:l.sales,search:o.search,"search-id":o.searchId,filtered:o.filteredSales,"onUpdate:filtered":e[4]||(e[4]=t=>o.filteredSales=t),selected:l.selectedSales},null,8,["sales","search","search-id","filtered","selected"])],2),(0,r._)("div",pC,[((0,r.wg)(),(0,r.j4)(c,{onSelected:l.handleSelected,"selected-reset":o.selected,key:o.filteredSales.length,sales:o.filteredSales},null,8,["onSelected","selected-reset","sales"]))]),(0,r.Wm)(u,{onCancel:e[5]||(e[5]=t=>o.showPopup=!1),visible:!1}),(0,r.Wm)(p,{onCancel:e[6]||(e[6]=t=>o.showPopup=!1),visible:o.showPopup,"onUpdate:visible":e[7]||(e[7]=t=>o.showPopup=t)},null,8,["visible"])])):(0,r.kq)("",!0)])}const hC={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},gC={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},fC=(0,r._)("h1",{class:"tw-text-lg"},"Create Order",-1),vC={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},yC={class:"md:tw-col-span-6 tw-col-span-12"},_C=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),xC={class:"md:tw-col-span-6 tw-col-span-12"},bC=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),kC={class:"md:tw-col-span-6 tw-col-span-12"},CC=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),DC=["value"],SC={class:"md:tw-col-span-6 tw-col-span-12"},zC=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),UC={class:"md:tw-col-span-12 tw-col-span-12"},LC=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Price",-1),PC={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},AC=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Warehouse",-1),WC=(0,r._)("option",{value:0}," Select ",-1),$C=["value"],EC={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},OC=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Product",-1),TC=(0,r._)("option",{value:0}," Select ",-1),VC=["value"],qC={class:"md:tw-col-span-6 tw-col-span-12"},RC=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variations",-1),IC=(0,r._)("option",{value:0}," Select ",-1),FC=["value"],jC={class:"md:tw-col-span-6 tw-col-span-12"},NC=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),MC={class:"md:tw-col-span-6 tw-col-span-12"},HC={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},YC={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit -tw-rotate-90 tw-scale-75"},KC=(0,r._)("div",{class:"tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),ZC={class:"tw-flex tw-flex-col tw-justify-center"},BC={class:"md:tw-col-span-6 tw-col-span-12"},QC={key:0,class:"md:tw-col-span-12 tw-col-span-12"},GC={class:"tw-max-w-full tw-overflow-auto"},JC={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},XC={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},tD={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},eD={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},aD={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},sD={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},rD={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},iD={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},oD={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},lD=(0,r._)("span",{class:"text-white"}," Cancel ",-1),nD=(0,r._)("span",{class:"text-white"}," Save ",-1);function dD(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation"),d=(0,r.up)("popup-full");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(d,{onCancel:e[12]||(e[12]=e=>t.$emit("cancel")),visible:a.visible},{default:(0,r.w5)((()=>[o.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",hC,[(0,r.Wm)(n)])),o.isLoaded?((0,r.wg)(),(0,r.iD)("div",gC,[fC,(0,r._)("div",vC,[(0,r._)("div",yC,[_C,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sale.fullname]])]),(0,r._)("div",xC,[bC,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>o.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sale.phone]])]),(0,r._)("div",kC,[CC,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.cities,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.name,key:t.id},(0,J.zw)(t.name),9,DC)))),128))],512),[[s.bM,o.sale.city]])]),(0,r._)("div",SC,[zC,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>o.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sale.adresse]])]),(0,r._)("div",UC,[LC,(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=t=>o.sale.price=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sale.price]])]),(0,r._)("div",PC,[AC,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>o.warehouse_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[WC,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.warehouses,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.name),9,$C)))),128))],512),[[s.bM,o.warehouse_id]])]),(0,r._)("div",EC,[OC,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>o.product_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[TC,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.filtredProducts,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.name),9,VC)))),128))],512),[[s.bM,o.product_id]])]),(0,r._)("div",qC,[RC,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>o.product_variation_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[IC,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.variations,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.size)+" / "+(0,J.zw)(t.color),9,FC)))),128))],512),[[s.bM,o.product_variation_id]])]),(0,r._)("div",jC,[NC,(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":e[8]||(e[8]=t=>o.quantity=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.quantity]])]),(0,r._)("div",MC,[(0,r._)("div",HC,[(0,r._)("label",YC,[(0,r.wy)((0,r._)("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=t=>o.sale.counts_from_warehouse=t),class:"tw-sr-only tw-peer"},null,512),[[s.e8,o.sale.counts_from_warehouse]]),KC]),(0,r._)("label",ZC,[(0,r._)("span",{class:(0,J.C_)([[o.sale.counts_from_warehouse?"tw-text-orange-500":"tw-text-neutral-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Warehouse",2),(0,r._)("span",{class:(0,J.C_)([[o.sale.counts_from_warehouse?"tw-text-neutral-500":"tw-text-orange-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Delivery",2)])])]),(0,r._)("div",BC,[(0,r._)("button",{onClick:e[10]||(e[10]=(...t)=>l.addItem&&l.addItem(...t)),class:"tw-block tw-ml-auto tw-py-1 tw-px-4 tw-rounded tw-bg-emerald-500 tw-text-white"}," Add ")]),o.items.length?((0,r.wg)(),(0,r.iD)("div",QC,[(0,r._)("div",GC,[(0,r._)("table",JC,[(0,r._)("thead",XC,[(0,r._)("tr",null,[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(["product","variation","quantity","warehouse","actions"],(t=>(0,r._)("th",{class:(0,J.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,r._)("div",tD,(0,J.zw)(t),1)],2))),64))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.items,(t=>((0,r.wg)(),(0,r.iD)("tr",{key:t,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,r._)("th",eD,(0,J.zw)(t.product.name),1),(0,r._)("th",aD,(0,J.zw)(t.product_variation.size)+" / "+(0,J.zw)(t.product_variation.color),1),(0,r._)("th",sD,(0,J.zw)(t.quantity),1),(0,r._)("th",rD,(0,J.zw)(t.product_variation.warehouse.name),1),(0,r._)("th",iD,[(0,r._)("div",null,[(0,r.Wm)(X.T,{onClick:e=>l.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])])])])):(0,r.kq)("",!0)]),(0,r._)("div",oD,[(0,r.Wm)(X.T,{onClick:e[11]||(e[11]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[lD])),_:1}),(0,r.Wm)(X.T,{loading:o.isLoading,onClick:l.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[nD])),_:1},8,["loading","onClick"])])])):(0,r.kq)("",!0)])),_:1},8,["visible"])])}var wD={props:["visible"],data(){return{isLoading:!1,isLoaded:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],sale:{fullname:"",phone:"",city:"",adresse:"",price:0,counts_from_warehouse:!0}}},watch:{product_id(){this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0}},computed:{products(){return this.$store.getters["product/products"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,a)=>e.indexOf(t.id)===a))},filtredProducts(){return 0==this.warehouse_id?[]:this.products.filter((t=>t.variations.some((t=>t.warehouse_id==this.warehouse_id))))},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city}},methods:{create(){if(!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;this.isLoading=!0;const t={fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,orderItems:this.items,counts_from_warehouse:!0};xa.create(t).then((t=>{"SALE_ADDED"==t.data.code&&(this.$emit("cancel"),this.$alert({type:"success",title:"Sale created successfully"}),this.$store.dispatch("sale/add",t.data.data.sale))}),this.$handleApiError).finally((()=>this.isLoading=!1))},deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},addItem(){if([this.warehouse_id,this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),a={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:0};this.items.push(a),this.product_id=0,this.product_variation_id=0,this.item_id+=1},getProducts(){ss.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("product/setProducts",t.data.data.products)}),(t=>{this.$handleApiError(t)})).finally((()=>this.isLoaded=!0))}},mounted(){this.getProducts(),this.sale.city=this.cities[0].name||1}};const cD=(0,d.Z)(wD,[["render",dD]]);var uD=cD;const pD={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},mD={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[950px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},hD=(0,r._)("h1",{class:"tw-text-lg"},"Update Order",-1),gD={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},fD={class:"md:tw-col-span-6 tw-col-span-12"},vD=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),yD={class:"md:tw-col-span-6 tw-col-span-12"},_D=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),xD={class:"md:tw-col-span-6 tw-col-span-12"},bD=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),kD=["value"],CD=["value"],DD={class:"md:tw-col-span-6 tw-col-span-12"},SD=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),zD={class:"md:tw-col-span-12 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},UD=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Confirmation",-1),LD={class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},PD={class:"tw-col-span-12"},AD=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note:",-1),WD={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},$D={class:"tw-col-span-12 md:tw-col-span-4"},ED=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Date:",-1),OD={class:"tw-col-span-12 md:tw-col-span-8"},TD=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Note:",-1),VD={class:"md:tw-col-span-6 tw-col-span-12"},qD=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Affectation",-1),RD={class:"md:tw-col-span-6 tw-col-span-12"},ID=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Upsell",-1),FD=["value"],jD={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-4"},ND={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},MD={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit -tw-rotate-90 tw-scale-75"},HD=(0,r._)("div",{class:"tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),YD={class:"tw-flex tw-flex-col tw-justify-center"},KD=(0,r._)("p",{class:"tw-col-span-12 tw-mt-5 tw-mb-2"},"Order Items",-1),ZD={key:1,class:"tw-col-span-12 tw-rounded tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},BD={key:2,class:"md:tw-col-span-12 tw-col-span-12"},QD={class:"tw-max-w-full tw-overflow-auto"},GD={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},JD={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},XD={class:"tw-mx-auto tw-w-[50px] tw-h-[35px] tw-shadow tw-shadow-gray-200 tw-rounded tw-overflow-hidden tw-cursor-pointer"},tS=["src"],eS={scope:"row",class:"tw-pr-6 tw-py-2 tw-font-medium tw-text-gray-900"},aS=["onUpdate:modelValue"],sS=(0,r._)("option",{value:0},"Select",-1),rS=["value"],iS={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},oS=["disabled","onUpdate:modelValue"],lS=(0,r._)("option",{value:0},"Select",-1),nS=["value"],dS={key:0},wS={key:1},cS={key:2},uS={key:3},pS=["value"],mS={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},hS={class:"md:tw-col-span-6 tw-col-span-12"},gS=["onUpdate:modelValue"],fS={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},vS={key:0},yS={key:1,class:"md:tw-col-span-6 tw-col-span-12"},_S=["onUpdate:modelValue"],xS={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},bS={class:"tw-w-full tw-col-span-12 tw-flex tw-justify-end tw-mt-3"},kS=(0,r._)("span",{class:"!tw-text-sm !tw-capitalize"},"Add",-1),CS={class:"md:tw-col-span-12 tw-col-span-12"},DS={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},SS=(0,r._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),zS={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},US=(0,r._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-mb-2 tw-whitespace-nowrap"},"Price: ",-1),LS={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},PS=(0,r._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),AS={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},WS=(0,r._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-whitespace-nowrap"},"Total Price: ",-1),$S={class:"tw-text-xl tw-text-green-500 tw-font-bold tw-px-2 tw-py-1 tw-rounded tw-bg-green-100"},ES={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},OS=(0,r._)("span",{class:"text-white"}," Cancel ",-1),TS=(0,r._)("span",{class:"text-white"}," Create ",-1);function VS(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation"),d=(0,r.up)("AddOrderConfirmation"),w=(0,r.up)("AddOrderAffectation"),c=(0,r.up)("ProductOffers"),u=(0,r.up)("popup-full");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(u,{onCancel:e[14]||(e[14]=e=>t.$emit("update:visible",!1)),visible:a.visible},{default:(0,r.w5)((()=>[l.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",pD,[(0,r.Wm)(n)])),l.isLoaded?((0,r.wg)(),(0,r.iD)("div",mD,[hD,(0,r._)("div",gD,[(0,r._)("div",fD,[vD,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sale.fullname]])]),(0,r._)("div",yD,[_D,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>o.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sale.phone]])]),(0,r._)("div",xD,[bD,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[(0,r._)("option",{disabled:"",value:o.sale.city},(0,J.zw)(o.sale.city),9,kD),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.cities,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.name,key:t.id},(0,J.zw)(t.name),9,CD)))),128))],512),[[s.bM,o.sale.city]])]),(0,r._)("div",DD,[SD,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>o.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sale.adresse]])]),(0,r._)("div",zD,[UD,(0,r.Wm)(d,{order:o.sale,id:o.sale.id,confirmation:o.sale.confirmation,"onUpdate:confirmation":e[4]||(e[4]=t=>o.sale.confirmation=t),onConfirmed:e[5]||(e[5]=t=>o.sale.note=t),onReported:l.handleReported,onChange:l.handleConfirmationChange},null,8,["order","id","confirmation","onReported","onChange"]),(0,r._)("div",LD,[(0,r._)("div",PD,[AD,(0,r.wy)((0,r._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[6]||(e[6]=t=>o.sale.note=t)},null,512),[[s.nr,o.sale.note]])])]),"reporter"==o.sale.confirmation&&o.sale.reported_agente_date?((0,r.wg)(),(0,r.iD)("div",WD,[(0,r._)("div",$D,[ED,(0,r._)("div",null,(0,J.zw)(o.sale.reported_agente_date.split("T")[0]),1)]),(0,r._)("div",OD,[TD,(0,r.wy)((0,r._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[7]||(e[7]=t=>o.sale.reported_agente_note=t)},null,512),[[s.nr,o.sale.reported_agente_note]])])])):(0,r.kq)("",!0)]),(0,r._)("div",VD,[qD,(0,r.Wm)(w,{"product-ids":l.product_ids,items:o.items,"onUpdate:items":e[8]||(e[8]=t=>o.items=t),order:o.sale,confirmation:o.sale.confirmation,affectation:o.sale.affectation,"onUpdate:affectation":e[9]||(e[9]=t=>o.sale.affectation=t),id:o.sale.id},null,8,["product-ids","items","order","confirmation","affectation","id"])]),(0,r._)("div",RD,[ID,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>o.sale.upsell=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.upsells,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.value,key:t.id},(0,J.zw)(t.name),9,FD)))),128))],512),[[s.bM,o.sale.upsell]])]),(0,r.kq)("",!0),(0,r._)("div",jD,[(0,r._)("div",ND,[(0,r._)("label",MD,[(0,r.wy)((0,r._)("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=t=>o.sale.counts_from_warehouse=t),class:"tw-sr-only tw-peer"},null,512),[[s.e8,o.sale.counts_from_warehouse]]),HD]),(0,r._)("label",YD,[(0,r._)("span",{class:(0,J.C_)([[o.sale.counts_from_warehouse?"tw-text-orange-500":"tw-text-neutral-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Warehouse",2),(0,r._)("span",{class:(0,J.C_)([[o.sale.counts_from_warehouse?"tw-text-neutral-500":"tw-text-orange-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Delivery",2)])])]),KD,o.items.length?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",ZD," No Order items ")),o.items.length?((0,r.wg)(),(0,r.iD)("div",BD,[(0,r._)("div",QD,[((0,r.wg)(),(0,r.iD)("table",{key:o.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,r._)("thead",GD,[(0,r._)("tr",null,[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,r._)("th",{class:(0,J.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,r._)("div",JD,(0,J.zw)(t),1)],2))),64))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.items,((t,e)=>((0,r.wg)(),(0,r.iD)("tr",{key:t.product.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[((0,r.wg)(),(0,r.iD)("th",{scope:"row",class:"tw-px-2 tw-py-2",key:t.product.id},[(0,r._)("div",XD,[l.product_images[e]?((0,r.wg)(),(0,r.iD)("img",{key:0,class:"tw-w-full tw-h-full tw-object-contain",src:o.serverUrl+"storage/"+l.product_images[e]},null,8,tS)):(0,r.kq)("",!0)])])),(0,r._)("th",eS,[(0,r._)("div",null,[(0,r._)("div",null,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e=>t.product.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[sS,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.filtredProducts,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.name),9,rS)))),128))],8,aS),[[s.bM,t.product.id]])])])]),(0,r._)("th",iS,[(0,r._)("div",null,[0!=t.product.id?(0,r.wy)(((0,r.wg)(),(0,r.iD)("select",{key:0,disabled:1==l.getVariations(t.product)?.variations?.length,"onUpdate:modelValue":e=>t.product_variation.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[lS,l.getVariations(t.product)?.variations?.length>1?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:0},(0,r.Ko)(l.getVariations(t.product)?.variations,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},[t.size||t.color?t.size&&"-"!=t.size&&t.color&&"-"!=t.color?((0,r.wg)(),(0,r.iD)("p",wS,(0,J.zw)(t.size)+" / "+(0,J.zw)(t.color),1)):t.size&&"-"!=t.size?((0,r.wg)(),(0,r.iD)("p",cS,(0,J.zw)(t.size),1)):t.color?((0,r.wg)(),(0,r.iD)("p",uS,(0,J.zw)(t.color),1)):(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",dS,"-"))],8,nS)))),128)):((0,r.wg)(),(0,r.iD)("option",{key:1,value:l.getVariations(t.product)?.variations[0]?.id}," Default ",8,pS))],8,oS)),[[s.bM,t.product_variation.id]]):(0,r.kq)("",!0)])]),(0,r._)("th",mS,[(0,r._)("div",hS,[(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,gS),[[s.nr,t.quantity]])])]),(0,r._)("th",fS,[(0,r._)("div",null,[null==t.price?((0,r.wg)(),(0,r.iD)("div",vS," - ")):((0,r.wg)(),(0,r.iD)("div",yS,[(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":e=>t.price=e,placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,_S),[[s.nr,t.price]])]))])]),(0,r._)("th",xS,[(0,r._)("div",null,[(0,r.Wm)(X.T,{onClick:e=>l.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])]))])])):(0,r.kq)("",!0),(0,r._)("div",bS,[(0,r._)("div",null,[(0,r.Wm)(X.T,{onClick:l.addNewRow,class:"mr-2 !tw-px-1 !tw-py-1 !tw-pr-2 tw-flex tw-items-center tw-gap-2","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-plus")])),_:1}),kS])),_:1},8,["onClick"])])]),(0,r._)("div",CS,[(0,r.Wm)(c,{"product-ids":l.product_ids},null,8,["product-ids"])]),(0,r._)("div",DS,[SS,(0,r._)("div",zS,[US,(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":e[13]||(e[13]=t=>o.sale.price=t),class:"tw-py-1 tw-max-w-[100px] tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sale.price]])])]),(0,r._)("div",LS,[PS,(0,r._)("div",AS,[WS,(0,r._)("div",$S,(0,J.zw)(o.currency)+" "+(0,J.zw)(l.total_price),1)])])]),(0,r._)("div",ES,[(0,r.Wm)(X.T,{onClick:l.handleCancel,color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[OS])),_:1},8,["onClick"]),(0,r.Wm)(X.T,{loading:o.isLoading,onClick:l.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[TS])),_:1},8,["loading","onClick"])])])):(0,r.kq)("",!0)])),_:1},8,["visible"])])}var qS={components:{AddOrderConfirmation:Lc,AddOrderAffectation:Vc,ProductOffers:Xc},props:["visible","order"],data(){return{upsells:Vn,serverUrl:j,currency:N,isLoading:!1,isAddItem:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],reported_date:null,price:0,sale:{fullname:"",phone:"",city:"",adresse:"",price:0,upsell:null,confirmation:null,counts_from_warehouse:!0}}},watch:{product_id(){this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0},"sale.confirmation":{deep:!0,handler(t){"confirmer"!=t&&(this.sale.affectation=null,this.sale.delivery=null)}},product_ids:{deep:!0,handler(t,e){this.items.map(((a,s)=>{if(0==a.product.id)return a;const r=this.getVariations(a.product)?.variations;return e[s]==t[a]||r.some((t=>t.id==a.product_variation.id))||(a.product_variation={id:0},a.product_variation_id=0),1==r?.length&&(a.product_variation=r[0],a.product_variation_id=r[0].id),a}))}}},computed:{products(){return this.$store.getters["product/products"]},product_images(){return this.items.map((t=>0==t.product.id?null:this.products.find((e=>e.id==t.product.id))?.image))},product_ids(){return this.items.map((t=>t.product.id))},isLoaded(){return this.$store.getters["product/fetched"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,a)=>e.indexOf(t.id)===a))},filtredProducts(){return this.products},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},selectedProduct(){return this.products.find((t=>t.id==this.product_id))},total_price:{get(){const t=this.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(this.sale.price?this.sale.price:0)+parseFloat(t)}},isItemsValid(){if(0==this.items.length)return!1;const t=this.items.some((t=>0==t.product.id||0==t.product_variation_id||0==t.quantity));return!t},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city}},methods:{deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},handleConfirmationChange(){"confirmer"!=this.sale.confirmation&&(this.sale.affectation=null)},addNewRow(){const t={id:this.item_id,product_id:0,product_ref:null,product:{id:0},product_variation:{id:0},product_variation_id:0,quantity:0,price:0};this.items.push(t)},getVariations(t){return this.products.find((e=>e.id==t.id))},formatItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const a=e.variations.find((e=>e.id==t.product_variation.id));return a?{...t,product:e,product_id:e.id,product_variation:a,product_variation_id:a.id,product_ref:e.ref}:t}));return this.items=t,t},addItem(){if([this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),a={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:this.price};this.items.push(a),this.product_id=0,this.product_variation_id=0,this.price=0,this.item_id+=1},create(){if(this.formatItems(),!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;if("annuler"==this.sale.confirmation&&!this.sale.note)return this.$alert({type:"warning",title:"Add Cancellation note."}),!1;if(!this.isItemsValid)return this.$alert({type:"warning",title:"Order Items are not valid"}),!1;this.isLoading=!0;const t={fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,upsell:this.sale.upsell,counts_from_warehouse:this.sale.counts_from_warehouse,orderItems:this.items,confirmation:this.sale.confirmation,note:this.sale.note,affectation:this.sale.affectation,reported_agente_note:this.sale.reported_agente_note,reported_agente_date:this.sale.reported_agente_date};this.isLoading=!0,xa.create(t).then((t=>{"SALE_ADDED"==t.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"New Order Added"}),this.$store.dispatch("sale/add",t.data.data.sale),this.$emit("update:visible",!1))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},handleCancel(){this.$emit("update:visible",!1)},handleReported(t){this.sale.reported_agente_note=t.reported_agente_note,this.sale.reported_agente_date=t.reported_agente_date},checkVariant(t,e){const a=this.products.find((e=>e.id==t));if(!a)return{exists:!1};let s=a.variations.find((t=>t.id==e));return s||(s=a.variations.length>0?a.variations[0]:null),{exists:!0,variation:s}},getProducts(){return ss.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){}};const RS=(0,d.Z)(qS,[["render",VS]]);var IS=RS;const FS={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},jS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},NS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},MS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},HS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},YS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},KS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},ZS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},BS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"};function QS(t,e,a,s,i,o){const l=(0,r.up)("DateFilter"),n=(0,r.up)("UpsellFilter"),d=(0,r.up)("ConfirmationFilter"),w=(0,r.up)("AffectationFilter"),c=(0,r.up)("AgenteFilter"),u=(0,r.up)("DeliveryFilter"),p=(0,r.up)("ProductFilter"),m=(0,r.up)("ExcelExport");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",FS,[(0,r._)("div",jS,[(0,r.Wm)(l,{filter:i.config.dateFilter,"onUpdate:filter":e[0]||(e[0]=t=>i.config.dateFilter=t)},null,8,["filter"])]),(0,r._)("div",NS,[(0,r.Wm)(n,{filter:i.config.upsellFilter,"onUpdate:filter":e[1]||(e[1]=t=>i.config.upsellFilter=t)},null,8,["filter"])]),(0,r._)("div",MS,[(0,r.Wm)(d,{filter:i.config.confirmationFilter,"onUpdate:filter":e[2]||(e[2]=t=>i.config.confirmationFilter=t)},null,8,["filter"])]),(0,r._)("div",HS,[(0,r.Wm)(w,{filter:i.config.affectationFilter,"onUpdate:filter":e[3]||(e[3]=t=>i.config.affectationFilter=t)},null,8,["filter"])]),(0,r._)("div",YS,[(0,r.Wm)(c,{filter:i.config.agenteFilter,"onUpdate:filter":e[4]||(e[4]=t=>i.config.agenteFilter=t)},null,8,["filter"])]),(0,r._)("div",KS,[(0,r.Wm)(u,{filter:i.config.deliveryFilter,"onUpdate:filter":e[5]||(e[5]=t=>i.config.deliveryFilter=t)},null,8,["filter"])]),(0,r._)("div",ZS,[(0,r.Wm)(p,{filter:i.config.productFilter,"onUpdate:filter":e[6]||(e[6]=t=>i.config.productFilter=t)},null,8,["filter"])]),(0,r._)("div",BS,[(0,r.Wm)(m,{selected:a.selected,filtered:a.filtered,sales:a.sales},null,8,["selected","filtered","sales"])])])])}const GS=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),JS=["onClick"];function XS(t,e,a,s,i,o){const l=(0,r.up)("VueDatePicker");return(0,r.wg)(),(0,r.iD)("div",null,[GS,(0,r.Wm)(l,{modelValue:i.date,"onUpdate:modelValue":[e[0]||(e[0]=t=>i.date=t),o.onDateRangePicked],onCleared:o.cleared,format:i.dateFilterFormat,range:"","preset-ranges":i.presetRanges},{yearly:(0,r.w5)((({label:t,range:e,presetDateRange:a})=>[(0,r._)("span",{onClick:t=>a(e)},(0,J.zw)(t),9,JS)])),_:1},8,["modelValue","onCleared","onUpdate:modelValue","format","preset-ranges"])])}var tz={data(){return{date:["",""],dateFilterFormat:"yyyy-MM-dd",formattedStartDate:"",formattedEndDate:"",presetRanges:[{label:"Today",range:[new Date,new Date]},{label:"Yesterday",range:[(0,Oi.Z)(new Date,1),(0,Oi.Z)(new Date,1)]},{label:"This month",range:[(0,Ti.Z)(new Date),(0,Vi.Z)(new Date)]},{label:"Last month",range:[(0,Ti.Z)((0,qi.Z)(new Date,1)),(0,Vi.Z)((0,qi.Z)(new Date,1))]},{label:"This year",range:[(0,Ri.Z)(new Date),(0,Ii.Z)(new Date)]}]}},watch:{date(){this.$emit("update:filter",[this.formattedStartDate,this.formattedEndDate])}},methods:{onDateRangePicked(t){t?(this.formattedStartDate=t[0],this.formattedEndDate=t[1]):(this.formattedStartDate=null,this.formattedEndDate=null)},cleared(){this.date=["",""]}}};const ez=(0,d.Z)(tz,[["render",XS]]);var az=ez;const sz=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Upsell",-1),rz={class:"tw-relative"},iz=(0,r._)("option",{value:"all"},"Select",-1),oz=(0,r._)("option",{value:"oui"},"Oui",-1),lz=(0,r._)("option",{value:"non"},"Non",-1),nz=[iz,oz,lz];function dz(t,e,a,i,o,l){return(0,r.wg)(),(0,r.iD)("div",null,[sz,(0,r._)("div",rz,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.value=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},nz,512),[[s.bM,o.value]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])])}var wz={data(){return{value:"all"}},watch:{value(t){this.$emit("update:filter",t)}}};const cz=(0,d.Z)(wz,[["render",dz]]);var uz=cz;const pz=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Delivery",-1),mz={class:"tw-relative"},hz=["value"];function gz(t,e,a,i,o,l){return(0,r.wg)(),(0,r.iD)("div",null,[pz,(0,r._)("div",mz,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.deliveryFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.deliveryStatus,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.value?t.value:"all",key:t.id},(0,J.zw)(t.value?t.name:"Select"),9,hz)))),128))],512),[[s.bM,o.deliveryFilter]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])])}var fz={props:["filter"],data(){return{deliveryFilter:"all",deliveryStatus:qn}},watch:{deliveryFilter(t){this.$emit("update:filter",t)}}};const vz=(0,d.Z)(fz,[["render",gz]]);var yz=vz;const _z=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Confirmation",-1),xz={class:"tw-relative"},bz=(0,r._)("option",{value:"all"}," Select ",-1),kz=["value"];function Cz(t,e,a,i,o,l){return(0,r.wg)(),(0,r.iD)("div",null,[_z,(0,r._)("div",xz,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.confirmationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[bz,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.confirmations,(t=>((0,r.wg)(),(0,r.iD)("option",{key:t.id,value:t.value},(0,J.zw)(t.name),9,kz)))),128))],512),[[s.bM,o.confirmationFilter]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])])}var Dz={props:["filter"],data(){return{confirmationFilter:"all",confirmations:On}},watch:{confirmationFilter(t){this.$emit("update:filter",t)}}};const Sz=(0,d.Z)(Dz,[["render",Cz]]);var zz=Sz;const Uz=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Affect",-1),Lz={class:"tw-relative"},Pz=(0,r._)("option",{value:"all"},"Select",-1),Az=(0,r._)("option",{value:null},"Without delivery",-1),Wz=["value"];function $z(t,e,a,i,o,l){return(0,r.wg)(),(0,r.iD)("div",null,[Uz,(0,r._)("div",Lz,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.affectationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[Pz,Az,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.deliveries,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.firstname)+" "+(0,J.zw)(t.lastname),9,Wz)))),128))],512),[[s.bM,o.affectationFilter]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])])}var Ez={props:["filter"],data(){return{affectationFilter:"all"}},computed:{users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>3==t.role.id))}},watch:{affectationFilter(t){this.$emit("update:filter",t)}}};const Oz=(0,d.Z)(Ez,[["render",$z]]);var Tz=Oz;const Vz=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Agente",-1),qz={class:"tw-relative"},Rz=(0,r._)("option",{value:"all"},"Select",-1),Iz=(0,r._)("option",{value:null},"Without agente",-1),Fz=["value"];function jz(t,e,a,i,o,l){return(0,r.wg)(),(0,r.iD)("div",null,[Vz,(0,r._)("div",qz,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.agenteFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[Rz,Iz,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.agentes,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.firstname)+" "+(0,J.zw)(t.lastname),9,Fz)))),128))],512),[[s.bM,o.agenteFilter]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])])}var Nz={props:["filter"],data(){return{agenteFilter:"all"}},computed:{users(){return this.$store.getters["user/users"]},agentes(){return this.users.filter((t=>2==t.role.id))}},watch:{agenteFilter(t){this.$emit("update:filter",t)}}};const Mz=(0,d.Z)(Nz,[["render",jz]]);var Hz=Mz;const Yz=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Product",-1),Kz={key:0},Zz={key:1,class:"tw-relative"},Bz=(0,r._)("option",{value:"all"},"Select",-1),Qz=["value"];function Gz(t,e,a,i,o,l){return(0,r.wg)(),(0,r.iD)("div",null,[Yz,l.fetched?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",Kz,[(0,r._)("div",null,[(0,r.Wm)(et.t,{class:"tw-text-orange-500 tw-animate-spin tw-text-lg tw-"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-loading")])),_:1})])])),l.fetched?((0,r.wg)(),(0,r.iD)("div",Zz,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.productFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[Bz,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.products,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.name),9,Qz)))),128))],512),[[s.bM,o.productFilter]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])):(0,r.kq)("",!0)])}var Jz={props:["filter"],data(){return{productFilter:"all"}},computed:{products(){return this.$store.getters["product/products"]},fetched(){return this.$store.getters["product/fetched"]}},watch:{productFilter(t){this.$emit("update:filter",t)}},methods:{getProducts(){ss.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.fetched||this.getProducts(),console.log(this.products)}};const Xz=(0,d.Z)(Jz,[["render",Gz]]);var tU=Xz;function eU(t,e,a,{confirmationFilter:s,affectationFilter:r,upsellFilter:i,deliveryFilter:o,agenteFilter:l,dateFilter:n,productFilter:d}){const w=n[0],c=n[1];return t.filter((t=>{const n=new Date(t.created_at);if(""!=a&&a!=t.id)return!1;if("all"!==s&&t.confirmation!==s)return!1;if("all"!==r&&t.affectation!=r)return!1;if("all"!==i&&t.upsell!=i)return!1;if("all"!==o&&t.delivery!=o)return!1;if("all"!==l&&t.agente_id!=l)return!1;const u=((t,e)=>{for(const a in t)if(!["created_at","updated_at","sheets_id","reported_agente_note","reported_agente_note","reported_agente_date","reported_delivery_note","reported_delivery_date"].includes(a)&&String(t[a]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(t,e);if(!u)return!1;if("all"!==d&&!t.items.some((t=>t.product_id==d)))return!1;const p=n.getDate(),m=n.getMonth(),h=n.getFullYear();if(w){const t=w.getDate(),e=w.getMonth(),a=w.getFullYear();if(h<a||h===a&&m<e||h===a&&m===e&&p<t)return!1}if(c){const t=c.getDate(),e=c.getMonth(),a=c.getFullYear();if(h>a||h===a&&m>e||h===a&&m===e&&p>t)return!1}return!0}))}function aU(t){return{id:1,title:"New",value:t.filter((t=>!t.confirmation||"new"==t.confirmation)).length,pourcentage:(100*t.filter((t=>!t.confirmation||"new"==t.confirmation)).length/t.length).toFixed(2),color:"primary-green",icon:"mdi mdi-new-box"}}function sU(t){return{id:3,title:"Confirmed",value:t.filter((t=>"confirmer"==t.confirmation)).length,pourcentage:(100*t.filter((t=>"confirmer"==t.confirmation)).length/t.length).toFixed(2),color:"deep-purple-accent-2",icon:"mdi-phone-check"}}function rU(t){return{id:4,title:"Delivered",value:t.filter((t=>"livrer"==t.delivery)).length,pourcentage:(100*t.filter((t=>"livrer"==t.delivery)).length/t.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"primary-blue",icon:"mdi-account-check-outline"}}function iU(t){return{id:5,title:"Shipped",value:t.filter((t=>"expidier"==t.delivery)).length,pourcentage:(100*t.filter((t=>"expidier"==t.delivery)).length/t.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"red",icon:"mdi-truck"}}const oU=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Export",-1),lU={class:"tw-relative tw-flex tw-items-center tw-gap-2 tw-justify-between"},nU={class:"tw-relative tw-w-full"},dU=(0,r._)("option",{value:"all"},"All Sales",-1),wU=(0,r._)("option",{value:"selected"},"Selected Sales",-1),cU=(0,r._)("option",{value:"filtered"},"Filtered Sales",-1),uU=[dU,wU,cU];function pU(t,e,a,i,o,l){const n=(0,r.up)("download-csv");return(0,r.wg)(),(0,r.iD)("div",null,[oU,(0,r._)("div",lU,[(0,r._)("div",nU,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.selection=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},uU,512),[[s.bM,o.selection]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})]),(0,r.Wm)(n,{delimiter:";",data:l.toImport},{default:(0,r.w5)((()=>[(0,r.Wm)(X.T,{onClick:l.handleImport,icon:"",rounded:"lg",variant:"flat",size:"x-small",color:"green",class:"text-white tw-mr-2"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white",icon:"mdi-download",size:"x-large"})])),_:1},8,["onClick"])])),_:1},8,["data"])])])}var mU={props:["selected","filtered","sales"],data(){return{selection:"all"}},computed:{toImport(){const t=this.data.map((t=>({...t}))),e=t.map((t=>{const e=Object.keys(t);return e.forEach((e=>{t[e]=t[e]?t[e]:"NONE"})),t})),a=",",s=e.map((t=>(delete t["factorisation_id"],delete t["note_d"],delete t["cmd"],delete t["product_name"],delete t["is_done"],delete t["factorisation"],delete t["doubles"],delete t["is_double"],delete t["has_doubles"],delete t["double"],{...t,products:t.items.map((t=>`id=${t.id}${a}price=${t.price?t.price:0}${a}name=${t.product?.name}${a}ref=${t.product?.ref}${a}variation_id=${t.product_variation_id}${a}size=${t.product_variation.size?t.product_variation.size:"DEFAULT"}${a}color=${t.product_variation.color?t.product_variation.color:"DEFAULT"}${a}`))})));return s.map((t=>(delete t["items"],t)))},data(){switch(this.selection){case"selected":return this.selected;case"filtered":return this.filtered;default:return this.sales}}},methods:{handleImport(){0==this.data.length&&this.$alert({title:"No Data To Export",type:"warning"})}}};const hU=(0,d.Z)(mU,[["render",pU]]);var gU=hU,fU={components:{DateFilter:az,UpsellFilter:uz,DeliveryFilter:yz,ConfirmationFilter:zz,AffectationFilter:Tz,AgenteFilter:Hz,ProductFilter:tU,ExcelExport:gU},props:["sales","filtered","search","searchId","selected"],data(){return{config:{confirmationFilter:"all",affectationFilter:"all",upsellFilter:"all",deliveryFilter:"all",agenteFilter:"all",productFilter:"all",dateFilter:[null,null]}}},computed:{results(){return eU(this.sales,this.search,this.searchId,this.config)}},watch:{results(t){this.$emit("update:filtered",t)}},mounted(){this.$emit("update:filtered",this.sales)}};const vU=(0,d.Z)(fU,[["render",QS]]);var yU=vU;const _U={class:"mb-5 tw-border-b tw-border-solid tw-pb-5 tw-border-neutral-200"},xU={class:"tw-grid tw-grid-cols-4 lg:tw-grid-cols-4 tw-gap-2"},bU={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-2"},kU={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-2"},CU={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-2"},DU={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-4"};function SU(t,e,a,s,i,o){const l=(0,r.up)("DashItem");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",_U,[(0,r._)("div",xU,[(0,r._)("div",bU,[(0,r.Wm)(l,{dash:o.newSales},null,8,["dash"])]),(0,r._)("div",kU,[(0,r.Wm)(l,{dash:o.confirmedSales},null,8,["dash"])]),(0,r._)("div",CU,[(0,r.Wm)(l,{dash:o.deliveredSales},null,8,["dash"])]),(0,r._)("div",DU,[(0,r.Wm)(l,{dash:o.shippedSales},null,8,["dash"])])])])])}const zU={class:"tw-flex tw-justify-between tw-items-center tw-w-full tw-h-full pa-3 px-4"},UU={class:"tw-flex tw-flex-col tw-justify-center tw-w-full tw-h-full tw-text-white"},LU={class:"tw-text-xl tw-font-bold"},PU={class:"tw-flex tw-items-center tw-gap-1 tw-w-full tw-h-full tw-text-white"},AU={class:"tw-text-sm"},WU={class:"rounded-circle tw-w-fit tw-mr-3"};function $U(t,e,a,s,i,o){const l=(0,r.up)("number");return(0,r.wg)(),(0,r.j4)(Ds.C,{class:"tw-rounded-lg",color:a.dash.color,height:"70"},{default:(0,r.w5)((()=>[(0,r._)("div",zU,[(0,r._)("div",UU,[(0,r._)("p",LU,(0,J.zw)(isNaN(a.dash.pourcentage)?"0.00":a.dash.pourcentage)+" "+(0,J.zw)(a.symbol),1),(0,r._)("span",PU,[a.numbers?((0,r.wg)(),(0,r.j4)(l,{key:0,class:"tw-font-bold",ref:"number1",from:0,to:a.dash.value,duration:1,delay:0,easing:"Power.easeOut"},null,8,["to"])):(0,r.kq)("",!0),(0,r._)("p",AU,(0,J.zw)(a.dash.title),1)])]),(0,r._)("div",WU,[(0,r.Wm)(et.t,{color:"white",size:"large",class:"md:tw-scale-[1.8] tw-scale-[1.3]",icon:a.dash.icon},null,8,["icon"])])])])),_:1},8,["color"])}var EU={props:{dash:{required:!0},symbol:{required:!1,default:"%"},numbers:{required:!1,default:!0}}};const OU=(0,d.Z)(EU,[["render",$U]]);var TU=OU,VU={components:{DashItem:TU},props:["sales"],computed:{newSales(){return aU(this.sales)},confirmedSales(){return sU(this.sales)},deliveredSales(){return rU(this.sales)},shippedSales(){return iU(this.sales)}}};const qU=(0,d.Z)(VU,[["render",SU]]);var RU=qU,IU={components:{SalesTable:nu,AddSale:uD,SalesAnalytics:RU,IndexFilter:yU,NewAddSale:IS},data(){return{localUrl:F,isLoaded:!1,isLoadingReset:!1,showFilters:!1,isButtonDisabled:!0,filteredSales:[],search:"",searchId:"",selected:[],showPopup:!1}},computed:{fetched(){return this.$store.getters["sale/fetched"]},users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>3==t.role.id))},agentes(){return this.users.filter((t=>2==t.role.id))},sales(){return this.$store.getters["sale/sales"]},cities(){return this.$store.getters["city/cities"]},selectedSales(){return this.sales.filter((t=>this.selected.includes(t.id)))}},methods:{handleSelected(t){this.selected=t,this.selected.length>0?this.isButtonDisabled=!1:this.isButtonDisabled=!0},async getDeliveries(){await Q.deliveries().then((t=>{this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)},async getUsers(){await Q.all().then((t=>{this.$store.dispatch("user/setUsers",t.data.data.users)}),this.$handleApiError)},getSales(){return xa.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0)}})).catch(this.$handleApiError)},getProducts(){return ss.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))},getCities(){if(0==this.cities.length)return Q.cities().then((t=>{const e=t.data.data;this.$store.dispatch("city/setCities",e)}))},handleReset(){this.isLoadingReset=!0,0!=this.selected.length&&xa.resetSale(this.selected).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.$store.dispatch("sale/resetSales",this.selected),this.selected=[])})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoadingReset=!1))}},async mounted(){0==this.deliveries.length&&(await this.getDeliveries(),this.getUsers()),this.fetched&&(this.isLoaded=!0),this.fetched&&(this.getProducts(),this.getCities())}};const FU=(0,d.Z)(IU,[["render",mC]]);var jU=FU;const NU=(0,r._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,r._)("div",null,[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Expidation ")])],-1),MU={key:0},HU={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},YU={class:"mb-5 tw-flex"},KU={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},ZU={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},BU={class:""};function QU(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation"),d=(0,r.up)("IndexFilter"),w=(0,r.up)("SalesTable"),c=(0,r.up)("AddSale"),u=(0,r.up)("AddTicket");return(0,r.wg)(),(0,r.iD)("div",null,[NU,o.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",MU,[(0,r.Wm)(n)])),o.isLoaded?((0,r.wg)(),(0,r.iD)("div",HU,[(0,r._)("div",YU,[(0,r.Wm)(X.T,{onClick:e[0]||(e[0]=t=>o.showFilters=!o.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white",size:"xx-large"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,r._)("div",KU,[(0,r.Wm)(Qt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by client, phone..."},null,512),[[s.nr,o.search]])]),(0,r._)("div",ZU,[(0,r.Wm)(et.t,{class:"tw-text-gray-500",size:"small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-pound")])),_:1}),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.searchId=t),type:"number",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search By ID"},null,512),[[s.nr,o.searchId]])]),(0,r.Wm)(sa.C),t.$can("handle_expidation")?((0,r.wg)(),(0,r.j4)(X.T,{key:0,onClick:e[3]||(e[3]=t=>o.showPopupTicket=!0),disabled:o.isButtonDisabled,icon:"",rounded:"lg",variant:"flat",size:"small",color:"green",class:"text-white tw-mr-2"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white",icon:"mdi-ticket-confirmation-outline",size:"xx-large"})])),_:1},8,["disabled"])):(0,r.kq)("",!0),(0,r.Wm)(X.T,{onClick:l.getSales,icon:"",rounded:"lg",variant:"flat",size:"small",color:"blue",class:"text-white tw-mr-2"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white",icon:"mdi-autorenew",size:"xx-large"})])),_:1},8,["onClick"])]),(0,r._)("div",{class:(0,J.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[1000px] !tw-overflow-visible":o.showFilters}])},[(0,r.Wm)(d,{sales:l.sales,search:o.search,"search-id":o.searchId,filtered:o.filteredSales,"onUpdate:filtered":e[4]||(e[4]=t=>o.filteredSales=t)},null,8,["sales","search","search-id","filtered"])],2),(0,r._)("div",BU,[((0,r.wg)(),(0,r.j4)(w,{onSelected:l.handleSelected,key:o.filteredSales.length,sales:o.filteredSales},null,8,["onSelected","sales"]))]),(0,r.Wm)(c,{onCancel:e[5]||(e[5]=t=>o.showPopup=!1),visible:o.showPopup},null,8,["visible"]),(0,r.Wm)(u,{orders:l.selectedOrders,onCancel:e[6]||(e[6]=t=>o.showPopupTicket=!1),visible:o.showPopupTicket},null,8,["orders","visible"])])):(0,r.kq)("",!0)])}const GU={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},JU={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},XU=(0,r._)("h1",{class:"tw-font-bold"},"Choose Ticket Size",-1),tL={class:"tw-grid mt-5"},eL=(0,r._)("img",{src:"",id:"image"},null,-1),aL=(0,r._)("canvas",{id:"qr-canvas"},null,-1);function sL(t,e,a,s,i,o){const l=(0,r.up)("LoadingAnimation"),n=(0,r.up)("popup-full");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(n,{onCancel:e[0]||(e[0]=e=>t.$emit("cancel")),visible:a.visible},{default:(0,r.w5)((()=>[i.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",GU,[(0,r.Wm)(l)])),i.isLoaded?((0,r.wg)(),(0,r.iD)("div",JU,[XU,(0,r._)("div",tL,[(0,r.Wm)(X.T,{onClick:o.downloadPDF},{default:(0,r.w5)((()=>[(0,r.Uk)("Imprimer")])),_:1},8,["onClick"])])])):(0,r.kq)("",!0)])),_:1},8,["visible"]),eL,aL])}var rL=a(8914),iL=a(3579),oL=a.n(iL),lL=a(8385),nL={props:["visible","orders"],data(){return{localUrl:F,isLoading:!1,isLoaded:!0}},computed:{},methods:{async addOrderPage(t,e){const a=new Date;let s=a.getDate(),r=a.getMonth()+1,i=a.getFullYear();t.rect(1,1,98,148,"S"),t.setFontSize(12),t.setTextColor("orange"),t.text("Vldo",3,7),t.line(1,10,99,10);const o=e.items.map((t=>`${t.product.name}|${t.product_variation.color}|${t.product_variation.size} x ${t.quantity}`));oL()(t,{theme:"grid",startY:12,margin:{horizontal:3,vertical:0},body:[["Nom Complete: ",e.fullname],["Tlephone: ",e.phone],["Adresse: ",e.adresse],["Ville: ",e.city],["Date d'envoi: ",`${s}-${r}-${i}`],["Marchandise: ",o.join("\n")]],styles:{halign:"left",lineColor:"black",textColor:"black"},columnStyles:{0:{fontStyle:"bold",font:"Cairo",valign:"middle",fontSize:8,cellWidth:24},1:{font:"Cairo",valign:"middle",cellPadding:{vertical:1,horizontal:2}}}}),t.line(1,73,99,73),t.setFont("helvetica","bold"),t.setTextColor("black"),t.setFontSize(16),t.text(`CRBT: ${Ki(e)} ${N}`,29,80),t.line(1,83,99,83),t.setFontSize(8),t.setFont("helvetica","normal"),t.text("Vous remercier pour votre confiance, pour plus d'informaion",12,90),t.text("veuillez nous appeler sur :",32,95),t.setFont("helvetica","bold"),t.setFontSize(16),t.text("0612345678",32,105),t.line(1,115,99,115)},async downloadPDF(){var t=new rL["default"]({orientation:"p",unit:"mm",format:[100,150],putOnlyUsedFonts:!0});t.addFont(this.localUrl+"assets/fonts/Cairo-Regular.ttf","Cairo","normal"),t.addFont(this.localUrl+"assets/fonts/Cairo-Bold.ttf","Cairo","bold");for(let e=0;e<this.orders.length;e++){const a=this.orders[e];e>0&&t.addPage(),this.addOrderPage(t,a);const s=await new Promise(((t,e)=>{lL.toDataURL(j+"api/sales/scan/"+a.id,{margin:0},(function(a,s){a&&e(a),t(s)}))})),r=new Image;r.src=s,await new Promise((a=>{r.onload=()=>{t.addImage(r,68,118,28,28,"a"+e,"SLOW"),a()}}))}t.save("order_tickets.pdf")}},mounted(){}};const dL=(0,d.Z)(nL,[["render",sL]]);var wL=dL,cL={components:{SalesTable:nu,AddSale:uD,AddTicket:wL,IndexFilter:yU},data(){return{localUrl:F,confirmations:On,deliveryStatus:qn,isLoaded:!1,showFilters:!1,search:"",searchId:"",isButtonDisabled:!0,filteredSales:[],selected:[],showPopup:!1,showPopupTicket:!1}},computed:{selectedOrders(){return this.sales.filter((t=>this.selected.includes(t.id)))},users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>3==t.role.id))},agentes(){return this.users.filter((t=>2==t.role.id))},sales(){return this.$store.getters["sale/sales"].filter((t=>"dispatch"==t.delivery))},cities(){return this.$store.getters["city/cities"]}},methods:{handleSelected(t){this.selected=t,this.selected.length>0?this.isButtonDisabled=!1:this.isButtonDisabled=!0},async getDeliveries(){await Q.deliveries().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)},async getUsers(){await Q.all().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setUsers",t.data.data.users)}),this.$handleApiError)},getSales(){return this.isLoaded=!1,xa.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;console.log(t.data),this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)},getCities(){if(0==this.cities.length)return Q.cities().then((t=>{const e=t.data.data;this.$store.dispatch("city/setCities",e)}))}},async mounted(){0==this.deliveries.length&&(await this.getDeliveries(),this.getUsers()),this.$store.getters["sale/fetched"]?this.isLoaded=!0:this.getSales(),this.getCities()}};const uL=(0,d.Z)(cL,[["render",QU]]);var pL=uL;const mL=(0,r._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,r._)("div",null,[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Expidation ")])],-1),hL={key:0},gL={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},fL={class:"mb-5 tw-flex"},vL={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},yL={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},_L={class:""};function xL(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation"),d=(0,r.up)("IndexFilter"),w=(0,r.up)("SalesTable"),c=(0,r.up)("AddSale"),u=(0,r.up)("AddTicket");return(0,r.wg)(),(0,r.iD)("div",null,[mL,o.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",hL,[(0,r.Wm)(n)])),o.isLoaded?((0,r.wg)(),(0,r.iD)("div",gL,[(0,r._)("div",fL,[(0,r.Wm)(X.T,{onClick:e[0]||(e[0]=t=>o.showFilters=!o.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white",size:"xx-large"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,r._)("div",vL,[(0,r.Wm)(Qt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by client, phone..."},null,512),[[s.nr,o.search]])]),(0,r._)("div",yL,[(0,r.Wm)(et.t,{class:"tw-text-gray-500",size:"small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-pound")])),_:1}),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.searchId=t),type:"number",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search By ID"},null,512),[[s.nr,o.searchId]])]),(0,r.Wm)(sa.C),(0,r.Wm)(X.T,{onClick:l.getSales,icon:"",rounded:"lg",variant:"flat",size:"small",color:"blue",class:"text-white tw-mr-2"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white",icon:"mdi-autorenew",size:"xx-large"})])),_:1},8,["onClick"])]),(0,r._)("div",{class:(0,J.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[1000px] !tw-overflow-visible":o.showFilters}])},[(0,r.Wm)(d,{sales:l.sales,search:o.search,"search-id":o.searchId,filtered:o.filteredSales,"onUpdate:filtered":e[3]||(e[3]=t=>o.filteredSales=t)},null,8,["sales","search","search-id","filtered"])],2),(0,r._)("div",_L,[((0,r.wg)(),(0,r.j4)(w,{onSelected:l.handleSelected,key:o.filteredSales.length,sales:o.filteredSales},null,8,["onSelected","sales"]))]),(0,r.Wm)(c,{onCancel:e[4]||(e[4]=t=>o.showPopup=!1),visible:o.showPopup},null,8,["visible"]),(0,r.Wm)(u,{orders:l.selectedOrders,onCancel:e[5]||(e[5]=t=>o.showPopupTicket=!1),visible:o.showPopupTicket},null,8,["orders","visible"])])):(0,r.kq)("",!0)])}var bL={components:{SalesTable:nu,AddSale:uD,AddTicket:wL,IndexFilter:yU},data(){return{localUrl:F,confirmations:On,deliveryStatus:qn,isLoaded:!1,showFilters:!1,filteredSales:[],search:"",searchId:"",isButtonDisabled:!0,selected:[],showPopup:!1,showPopupTicket:!1}},computed:{selectedOrders(){return this.sales.filter((t=>this.selected.includes(t.id)))},users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>3==t.role.id))},agentes(){return this.users.filter((t=>2==t.role.id))},sales(){return this.$store.getters["sale/sales"].filter((t=>"expidier"==t.delivery))},cities(){return this.$store.getters["city/cities"]}},methods:{handleSelected(t){this.selected=t,this.selected.length>0?this.isButtonDisabled=!1:this.isButtonDisabled=!0},async getDeliveries(){await Q.deliveries().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)},async getUsers(){await Q.all().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setUsers",t.data.data.users)}),this.$handleApiError)},getSales(){return this.isLoaded=!1,xa.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;console.log(t.data),this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)},getCities(){if(0==this.cities.length)return Q.cities().then((t=>{const e=t.data.data;this.$store.dispatch("city/setCities",e)}))}},async mounted(){0==this.deliveries.length&&(await this.getDeliveries(),this.getUsers()),this.$store.getters["sale/fetched"]?this.isLoaded=!0:this.getSales(),this.getCities()}};const kL=(0,d.Z)(bL,[["render",xL]]);var CL=kL,DL={name:"sales",path:"/sales",component:ns,meta:{module:"sale"},children:[{name:"sale/list",path:"",component:jU,meta:{module:"sale",subModule:"sale/list",title:"Sales List",gate:"show_all_sales"}},{name:"sale/expidation",path:"expidation",component:pL,meta:{module:"sale",subModule:"sale/expidation",title:"Expidation",gate:"show_all_expidations"}},{name:"sale/shipping",path:"shipping",component:CL,meta:{module:"sale",subModule:"sale/shipping",title:"Shipping",gate:"show_all_expidations"}}]};const SL={class:"mb-5 tw-flex tw-justify-between tw-items-center"},zL=(0,r._)("div",null,[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"My Orders"),(0,r._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"See orders affected to you")],-1),UL={key:0},LL=(0,r._)("span",{class:"text-white"}," Add Sale ",-1),PL={key:0},AL={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},WL={class:"mb-5 tw-flex"},$L={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},EL={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},OL={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},TL=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Sort By",-1),VL={class:"tw-relative"},qL=["value"],RL={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},IL=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Order By",-1),FL={class:"tw-relative"},jL=["value"],NL={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},ML=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Upsell",-1),HL={class:"tw-relative"},YL=(0,r._)("option",{value:"all"},"Select",-1),KL=(0,r._)("option",{value:"oui"},"Oui",-1),ZL=(0,r._)("option",{value:"non"},"Non",-1),BL=[YL,KL,ZL],QL={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},GL=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Confirmation",-1),JL={class:"tw-relative"},XL=["value"],tP={key:0},eP={key:1,class:""},aP=(0,r._)("p",{class:"tw-text-neutral-400 tw-py-5"},"Your order liste is empty !",-1),sP=[aP];function rP(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation"),d=(0,r.up)("OrdersTable"),w=(0,r.up)("AddNewOrder");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",SL,[zL,o.isLoaded?((0,r.wg)(),(0,r.iD)("div",UL,[(0,r.Wm)(X.T,{color:"primary-color",onClick:e[0]||(e[0]=t=>o.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{icon:"mdi-plus",class:"mr-2 text-white"}),LL])),_:1})])):(0,r.kq)("",!0)]),o.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",PL,[(0,r.Wm)(n)])),o.isLoaded?((0,r.wg)(),(0,r.iD)("div",AL,[(0,r._)("div",WL,[(0,r.Wm)(X.T,{onClick:e[1]||(e[1]=t=>o.showFilters=!o.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white",size:"xx-large"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,r._)("div",$L,[(0,r.Wm)(Qt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[s.nr,o.search]])])]),(0,r._)("div",{class:(0,J.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":o.showFilters}])},[(0,r._)("div",EL,[(0,r._)("div",OL,[TL,(0,r._)("div",VL,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.sorting.sortBy=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.sorting.fields,(t=>((0,r.wg)(),(0,r.iD)("option",{key:t.value,value:t.value},(0,J.zw)(t.name),9,qL)))),128))],512),[[s.bM,o.sorting.sortBy]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])]),(0,r._)("div",RL,[IL,(0,r._)("div",FL,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.sorting.orderBy=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.sorting.options,(t=>((0,r.wg)(),(0,r.iD)("option",{key:t.value,value:t.value},(0,J.zw)(t.name),9,jL)))),128))],512),[[s.bM,o.sorting.orderBy]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])]),(0,r._)("div",NL,[ML,(0,r._)("div",HL,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>o.upsellFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},BL,512),[[s.bM,o.upsellFilter]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])]),(0,r._)("div",QL,[GL,(0,r._)("div",JL,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>o.confirmationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.confirmations,(t=>((0,r.wg)(),(0,r.iD)("option",{key:t.id,value:t.value?t.value:"all"},(0,J.zw)(t.name),9,XL)))),128))],512),[[s.bM,o.confirmationFilter]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])])])],2),l.orders.length>0?((0,r.wg)(),(0,r.iD)("div",tP,[(0,r.Wm)(d,{orders:l.filteredOrders},null,8,["orders"])])):((0,r.wg)(),(0,r.iD)("div",eP,sP))])):(0,r.kq)("",!0),(0,r.Wm)(w,{onCancel:e[7]||(e[7]=t=>o.showPopup=!1),visible:o.showPopup,"onUpdate:visible":e[8]||(e[8]=t=>o.showPopup=t)},null,8,["visible"])])}const iP={class:"tw-relative tw-min-h-[400px] tw-overflow-x-auto tw-overflow-y-visible sm:tw-rounded-lg"},oP={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},lP={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},nP=(0,r._)("th",{scope:"col",class:"tw-p-4"},[(0,r._)("div",{class:"tw-flex tw-items-center"},[(0,r._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,r._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),dP={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},wP={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},cP={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},uP=(0,r._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),pP=["value"],mP={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},hP={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},gP={class:"tw-flex tw-flex-wrap tw-gap-2"},fP={class:"tw-text-white"};function vP(t,e,a,i,o,l){const n=(0,r.up)("OrderRow");return a.orders.length>0?((0,r.wg)(),(0,r.iD)("div",{key:a.orders.length},[(0,r._)("div",iP,[(0,r._)("table",oP,[(0,r._)("thead",lP,[(0,r._)("tr",null,[nP,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.columns,(t=>((0,r.wg)(),(0,r.iD)("th",{key:t,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,r._)("div",dP,(0,J.zw)(t),1)])))),128))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.items,(t=>((0,r.wg)(),(0,r.j4)(n,{showNote:!!a.note,key:t.id,order:t},null,8,["showNote","order"])))),128))])])]),(0,r._)("div",wP,[(0,r._)("div",cP,[uP,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.allowedLimit,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t,key:t},(0,J.zw)(t),9,pP)))),128))],512),[[s.bM,o.paginationLimit]])]),(0,r._)("div",mP,[(0,r._)("div",hP,(0,J.zw)(l.prevRange+1)+" - "+(0,J.zw)(o.currentPage==l.pageCount?a.orders.length:l.nextRange)+" of "+(0,J.zw)(a.orders.length)+" items ",1),(0,r._)("div",gP,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.pageCount,(t=>((0,r.wg)(),(0,r.j4)(X.T,{onClick:e=>o.currentPage=t,ripple:!1,variant:"flat",icon:"",rounded:"lg",color:t==o.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,r.w5)((()=>[(0,r._)("span",fP,(0,J.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])):(0,r.kq)("",!0)}const yP=(0,r._)("td",{class:"tw-w-4 tw-p-4"},[(0,r._)("div",{class:"tw-flex tw-items-center"},[(0,r._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,r._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),_P={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},xP={class:"tw-px-6 tw-py-4 tw-relative"},bP={key:0},kP={class:"tw-px-6 tw-py-4"},CP={class:"tw-px-6 tw-py-4 tw-relative"},DP={class:"tw-pb-2"},SP={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},zP={key:0},UP={key:1},LP={class:"tw-absolute tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-text-xs"},PP={key:0,class:"tw-bg-emerald-500/10 tw-text-emerald-500 tw-px-2 tw-rounded-t"},AP={key:1,class:"tw-bg-blue-500/10 tw-text-blue-500 tw-px-2 tw-rounded-t"},WP={class:"tw-px-6 tw-py-4 tw-relative"},$P={class:"tw-flex tw-items-center tw-justify-center"},EP={class:"tw-flex tw-gap-1"},OP={key:0},TP={class:"tw-px-6 tw-py-4"},VP={class:"tw-px-6 tw-py-4"},qP={class:"tw-px-6 tw-py-4"},RP={class:"!tw-max-w-[300px] !tw-min-w-[300px] tw-whitespace-normal"},IP={key:1,class:"tw-px-6 tw-py-4"},FP={class:"tw-max-w-[300px] tw-min-w-[150px] tw-whitespace-normal"},jP={class:"tw-px-6 tw-py-4"},NP={class:"tw-min-w-[300px]"},MP=(0,r._)("p",null,"Edit note",-1);function HP(t,e,a,s,i,o){(0,r.up)("OrderUpsell");const l=(0,r.up)("OrderConfirmation"),n=(0,r.up)("OrderAffectation"),d=(0,r.up)("OrderActions"),w=(0,r.up)("popup");return(0,r.wg)(),(0,r.iD)(r.HY,null,[((0,r.wg)(),(0,r.iD)("tr",{key:a.order.id,class:(0,J.C_)([["reporter"==a.order.confirmation&&"tw-relative",o.isReportedToday(a.order)&&"!tw-border tw-border-red-400"],"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"])},[yP,(0,r._)("th",_P,(0,J.zw)(o.id),1),(0,r._)("td",xP,[(0,r.Uk)((0,J.zw)(a.order?.created_at?.split("T")[0])+" ",1),"reporter"==a.order.confirmation?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,J.C_)([o.isReportedToday(a.order)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[o.isReportedToday(a.order)?((0,r.wg)(),(0,r.iD)("span",bP," Reported for today ")):(0,r.kq)("",!0)],2)):(0,r.kq)("",!0)]),(0,r._)("td",kP,(0,J.zw)(o.fullname),1),(0,r._)("td",CP,[(0,r._)("div",DP,[(0,r._)("ul",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.order.items,(t=>((0,r.wg)(),(0,r.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,r.Uk)(" - "),(0,r._)("span",SP,(0,J.zw)(t.quantity)+" X ",1),(0,r.Uk)((0,J.zw)(t.product.name)+" ",1),t.product_variation.size?((0,r.wg)(),(0,r.iD)("span",zP,"| "+(0,J.zw)(t.product_variation.size),1)):(0,r.kq)("",!0),t.product_variation.color?((0,r.wg)(),(0,r.iD)("span",UP,"| "+(0,J.zw)(t.product_variation.color),1)):(0,r.kq)("",!0)])))),128))]),(0,r._)("div",LP,[a.order.counts_from_warehouse?((0,r.wg)(),(0,r.iD)("p",PP," warehouse ")):(0,r.kq)("",!0),a.order.counts_from_warehouse?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",AP," delivery "))])])]),(0,r.kq)("",!0),(0,r._)("td",WP,[(0,r._)("div",$P,[((0,r.wg)(),(0,r.j4)(l,{class:(0,J.C_)("reporter"==a.order.confirmation&&"tw-mb-1"),order:a.order,confirmation:o.confirmation,key:o.confirmation,id:o.id},null,8,["class","order","confirmation","id"])),"reporter"==a.order.confirmation?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,J.C_)([o.isReportedToday(a.order)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[(0,r._)("span",EP,["reporter"==a.order.confirmation?((0,r.wg)(),(0,r.iD)("span",OP,[(0,r.Wm)(et.t,{size:"x-small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-autorenew")])),_:1}),(0,r._)("span",null,(0,J.zw)(a.order?.reported_agente_date?.split("T")[0]),1)])):(0,r.kq)("",!0)])],2)):(0,r.kq)("",!0)])]),(0,r._)("td",TP,["confirmer"===o.confirmation?((0,r.wg)(),(0,r.j4)(n,{order:a.order,id:o.id,affectation:o.affectation,key:o.affectation},null,8,["order","id","affectation"])):(0,r.kq)("",!0)]),(0,r._)("td",VP,(0,J.zw)(o.getPrice(a.order)),1),(0,r._)("td",qP,[(0,r._)("div",RP,(0,J.zw)(a.order.city),1)]),a.showNote?((0,r.wg)(),(0,r.iD)("td",IP,[(0,r._)("div",FP,[(0,r.Uk)((0,J.zw)(a.order.note)+" ",1),(0,r.Wm)(et.t,{onClick:o.handleClick,size:"x-small",class:(0,J.C_)(["tw-ml-2 tw-text-blue-500 tw-cursor-pointer hover:tw-bg-neutral-900/10 tw-rounded-full tw-p-3",{"tw-animate-spin":i.isLoading}])},{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(i.isLoading?"mdi-loading":"mdi-pencil"),1)])),_:1},8,["onClick","class"])])])):(0,r.kq)("",!0),(0,r._)("td",jP,[(0,r.Wm)(d,{order:a.order},null,8,["order"])])],2)),(0,r.Wm)(w,{type:"info",title:"Add Note",onResolved:o.handleResolved,loading:i.isLoading,visible:i.showPopup},{default:(0,r.w5)((()=>[(0,r._)("div",NP,[MP,(0,r.Wm)(yp.z,{modelValue:i.newNote,"onUpdate:modelValue":e[0]||(e[0]=t=>i.newNote=t),variant:"outlined",class:"rounded-md",color:"primary-color"},null,8,["modelValue"])])])),_:1},8,["onResolved","loading","visible"])],64)}const YP={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},KP=["onClick"],ZP={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},BP=(0,r._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter note",-1),QP={class:"tw-flex tw-justify-end tw-mt-2"};function GP(t,e,a,i,o,l){const n=(0,r.up)("popup-full"),d=(0,r.up)("OrderReporting"),w=(0,r.up)("OrderAnnuler");return(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{key:a.confirmation,class:"tw-relative tw-min-w-[100px]"},[(0,r._)("button",{onClick:e[0]||(e[0]=(...t)=>l.toggle&&l.toggle(...t)),class:(0,J.C_)([[l.selected.text,l.selected.bg,l.selected.ring],"focus:tw-ring-4 tw-min-w-[100px] focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between"]),type:"button"},[(0,r.Uk)((0,J.zw)(l.selected.name)+" ",1),o.isLoading?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(et.t,{key:0,class:"tw-ml-1"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(o.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),o.isLoading?((0,r.wg)(),(0,r.j4)(et.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-loading")])),_:1})):(0,r.kq)("",!0)],2),(0,r._)("div",{class:(0,J.C_)([{"tw-hidden":!o.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,r._)("ul",YP,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.options,(t=>((0,r.wg)(),(0,r.iD)("li",{onClick:e=>l.handleChange(t),key:t.id},[(0,r._)("a",{class:(0,J.C_)(["tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100",[t.text,t.bg]])},(0,J.zw)(t.name),3)],8,KP)))),128))])],2),(0,r.Wm)(n,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>o.showPopup=!1),visible:o.showPopup},{default:(0,r.w5)((()=>[(0,r._)("div",ZP,[BP,(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.note=t),cols:"30",rows:"3",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n\r\n        ",512),[[s.nr,o.note]]),(0,r._)("div",QP,[(0,r.Wm)(X.T,{class:"tw-capitalize",loading:o.isLoading,variant:"flat",color:"green",onClick:l.handleClick},{default:(0,r.w5)((()=>[(0,r.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"]),(0,r.Wm)(d,{order:a.order,visible:o.showPopupReporter,onCancel:e[3]||(e[3]=t=>o.showPopupReporter=!1)},null,8,["order","visible"]),(0,r.Wm)(w,{order:a.order,visible:o.showPopupAnnuler,onCancel:e[4]||(e[4]=t=>o.showPopupAnnuler=!1)},null,8,["order","visible"])])),[[Gt.L,l.close]])}const JP={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},XP=(0,r._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),tA=(0,r._)("br",null,null,-1),eA=(0,r._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),aA={class:"tw-flex tw-justify-end tw-mt-2"};function sA(t,e,a,i,o,l){const n=(0,r.up)("VueDatePicker"),d=(0,r.up)("popup-full");return(0,r.wg)(),(0,r.iD)("div",{key:a.order.id},[(0,r.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>l.cancel()),visible:a.visible},{default:(0,r.w5)((()=>[(0,r._)("div",JP,[XP,(0,r.Wm)(n,{modelValue:o.date,"onUpdate:modelValue":e[0]||(e[0]=t=>o.date=t),format:l.format},null,8,["modelValue","format"]),tA,eA,(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[s.nr,o.note]]),(0,r._)("div",aA,[(0,r.Wm)(X.T,{class:"tw-capitalize",loading:o.isLoading,variant:"flat",color:"green",onClick:l.handleConfirm},{default:(0,r.w5)((()=>[(0,r.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var rA={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_agente_date=this.realDate,t.reported_agente_note=this.note,t.confirmation="reporter",this.isLoading=!0,xa.agenteUpdateConfirmation(t.id,"reporter",t).then((e=>{console.log(e.data),this.$alert({type:"success",title:"Order reported successfully"}),this.$store.dispatch("order/update",{id:t.id,order:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},format(t){const e=t.getDate(),a=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),s=t.getMonth()+1,r=s.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();return this.realDate=`${i}-${r}-${a}`,`${a}/${r}/${i}`},cancel(){this.$emit("cancel")}},mounted(){}};const iA=(0,d.Z)(rA,[["render",sA]]);var oA=iA;const lA={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},nA=(0,r._)("br",null,null,-1),dA=(0,r._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),wA={class:"tw-flex tw-justify-end tw-mt-2"};function cA(t,e,a,i,o,l){const n=(0,r.up)("popup-full");return(0,r.wg)(),(0,r.iD)("div",{key:a.order.id},[(0,r.Wm)(n,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[1]||(e[1]=t=>l.cancel()),visible:a.visible},{default:(0,r.w5)((()=>[(0,r._)("div",lA,[nA,dA,(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n          ",512),[[s.nr,o.note]]),(0,r._)("div",wA,[(0,r.Wm)(X.T,{class:"tw-capitalize",loading:o.isLoading,variant:"flat",color:"green",onClick:l.handleConfirm},{default:(0,r.w5)((()=>[(0,r.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var uA={props:["visible","order"],data(){return{isLoading:!1,note:"",newOrder:null}},methods:{handleConfirm(){const t={...this.order};t.reported_agente_note=this.note,t.confirmation="annuler",this.isLoading=!0,xa.agenteUpdateConfirmation(t.id,"annuler",t).then((e=>{console.log(e.data),this.$alert({type:"success",title:"Order annuler successfully"}),this.$store.dispatch("order/update",{id:t.id,order:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},cancel(){this.$emit("cancel")}},mounted(){}};const pA=(0,d.Z)(uA,[["render",cA]]);var mA=pA,hA={props:["confirmation","id","order"],components:{OrderReporting:oA,OrderAnnuler:mA},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",selectedId:0,allOptions:On,showPopupReporter:!1,showPopupAnnuler:!1}},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleResolved(t){t?(this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))):this.showPopup=!1},handleClick(){this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))},async handleChange(t){if(t.id===this.selectedId)return!1;["confirmer","reporter","annuler"].includes(t.value)?"reporter"===t.value?this.showPopupReporter=!0:"annuler"===t.value?this.showPopupAnnuler=!0:(this.nextOption=t.id,this.showPopup=!0):(this.selectedId=t.id,this.updateOrder()),this.close()},async updateOrder(){return this.isLoading=!0,xa.agenteUpdateConfirmation(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmation(this.id,this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t)))},async updateOrderWithNote(){return this.isLoading=!0,xa.agenteUpdateConfirmationWithNote(this.id,this.selected.value,this.note).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmationWithNote(this.id,this.selected.value,this.note),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateConfirmation(t,e){this.$store.dispatch("order/updateConfirmation",{id:t,confirmation:e}),this.$emit("update",e)},updateConfirmationWithNote(t,e,a){this.$store.dispatch("order/updateConfirmationWithNote",{id:t,confirmation:e,note:a}),this.$emit("update",e)}},mounted(){this.availableOptions.includes(this.confirmation)?this.selectedId=this.allOptions.find((t=>t.value==this.confirmation)).id:this.selectedId=0}};const gA=(0,d.Z)(hA,[["render",GP]]);var fA=gA;const vA={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700"},yA=["onClick"];function _A(t,e,a,s,i,o){return(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{key:a.upsell,class:"tw-relative tw-w-[60px]"},[(0,r._)("button",{onClick:e[0]||(e[0]=(...t)=>o.toggle&&o.toggle(...t)),class:(0,J.C_)([[o.selected.text,o.selected.bg,o.selected.ring],"focus:tw-ring-4 focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center"]),type:"button"},[(0,r.Uk)((0,J.zw)(o.selected.name)+" ",1),i.isLoading?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(et.t,{key:0,class:"tw-ml-1"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(i.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),i.isLoading?((0,r.wg)(),(0,r.j4)(et.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-loading")])),_:1})):(0,r.kq)("",!0)],2),(0,r._)("div",{class:(0,J.C_)([{"tw-hidden":!i.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,r._)("ul",vA,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.options,(t=>((0,r.wg)(),(0,r.iD)("li",{onClick:e=>o.handleChange(t),key:t.id},[(0,r._)("a",{class:(0,J.C_)(["tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100",[t.text,t.bg]])},(0,J.zw)(t.name),3)],8,yA)))),128))])],2)])),[[Gt.L,o.close]])}var xA={props:["upsell","id"],data(){return{isLoading:!1,isOpen:!1,selectedId:0,allOptions:Vn}},computed:{options(){return this.allOptions},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(t.id==this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()},updateOrder(){xa.agenteUpdateUpsell(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateUpsell(this.id,this.selected.value),this.$emit("update",this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t)))},updateUpsell(t,e){this.$store.dispatch("order/updateUpsell",{id:t,upsell:e})}},mounted(){switch(console.log(this.upsell),this.upsell){case"oui":console.log("found oui"),this.selectedId=1;break;case"non":console.log("found non"),this.selectedId=2;break;default:console.log("found nothing"),this.selectedId=0;break}}};const bA=(0,d.Z)(xA,[["render",_A]]);var kA=bA;const CA={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},DA=["onClick"],SA={class:"tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100"},zA={key:1,class:"tw-relative tw-min-w-[100px] tw-flex tw-items-center"};function UA(t,e,a,s,i,o){return o.fetched?(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{key:a.affectation,class:"tw-relative tw-min-w-[100px]"},[(0,r._)("button",{onClick:e[0]||(e[0]=(...t)=>o.toggle&&o.toggle(...t)),class:"tw-whitespace-nowrap focus:tw-ring-4 tw-ring-neutral-200 tw-bg-neutral-600/10 tw-text-neutral-800 focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center",type:"button"},[(0,r.Uk)((0,J.zw)(o.selected.firstname)+" "+(0,J.zw)(o.selected.lastname)+" ",1),i.isLoading?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(et.t,{key:0,class:"tw-ml-1"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(i.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),i.isLoading?((0,r.wg)(),(0,r.j4)(et.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-loading")])),_:1})):(0,r.kq)("",!0)]),(0,r._)("div",{class:(0,J.C_)([{"tw-hidden":!i.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,r._)("ul",CA,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.options,(t=>((0,r.wg)(),(0,r.iD)("li",{onClick:e=>o.handleChange(t),key:t.id},[(0,r._)("a",SA,(0,J.zw)(t.firstname)+" "+(0,J.zw)(t.lastname),1)],8,DA)))),128))])],2)])),[[Gt.L,o.close]]):((0,r.wg)(),(0,r.iD)("div",zA,[(0,r.Wm)(et.t,{class:"tw-animate-spin tw-ml-1 tw-text-orange-500"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-loading")])),_:1})]))}var LA={props:["affectation","id","order"],data(){return{isOpen:!1,isLoading:!1,selectedId:null}},computed:{options(){return[{id:null,firstname:"select",lastname:""},...this.deliveries]},selected(){const t=[...this.deliveries.map((t=>parseInt(t.id)))];return null!=this.selectedId&&t.includes(parseInt(this.selectedId))?this.options.filter((t=>t.id==this.selectedId))[0]:{id:null,firstname:"select",lastname:""}},users(){return this.$store.getters["user/users"]},allDeliveries(){return this.users.filter((t=>"delivery"==t.role_name))},fetched(){return this.$store.getters["user/fetched"]},deliveries(){return this.allDeliveries.filter((t=>t.delivery_products.some((t=>this.order.items.some((e=>e.product_id==t.product_id))))))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(this.old=this.affectation,t.id===this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()},updateOrder(){xa.agenteUpdateAffectaion(this.id,this.selectedId).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateAffectation(this.id,this.selected.id),this.isLoading=!1)}),(t=>{this.$handleApiError(t),this.isLoading=!1,this.selectedId=this.old}))},updateAffectation(t,e){this.$store.dispatch("order/updateAffectation",{id:t,affectation:e})}},mounted(){this.selectedId=this.affectation,console.log("id: ",this.id," affecte: ",this.affectation)}};const PA=(0,d.Z)(LA,[["render",UA]]);var AA=PA;const WA={key:0},$A={key:2},EA={key:3};function OA(t,e,a,s,i,o){const l=(0,r.up)("UpdateDoubleOrder"),n=(0,r.up)("UpdateOrder");return a.order?((0,r.wg)(),(0,r.iD)("div",WA,[a.only.includes("whatsapp")?((0,r.wg)(),(0,r.j4)(X.T,{key:0,link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+a.order.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])):(0,r.kq)("",!0),a.only.includes("update")?((0,r.wg)(),(0,r.j4)(X.T,{key:1,onClick:e[0]||(e[0]=t=>i.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,r.kq)("",!0),a.double?((0,r.wg)(),(0,r.iD)("div",$A,[i.showUpdatePopup?((0,r.wg)(),(0,r.j4)(l,{key:0,onUpdateOrder:e[1]||(e[1]=e=>t.$emit("updateOrder",e)),visible:i.showUpdatePopup,"onUpdate:visible":e[2]||(e[2]=t=>i.showUpdatePopup=t),order:a.order},null,8,["visible","order"])):(0,r.kq)("",!0)])):((0,r.wg)(),(0,r.iD)("div",EA,[i.showUpdatePopup?((0,r.wg)(),(0,r.j4)(n,{key:0,visible:i.showUpdatePopup,"onUpdate:visible":e[3]||(e[3]=t=>i.showUpdatePopup=t),order:a.order},null,8,["visible","order"])):(0,r.kq)("",!0)]))])):(0,r.kq)("",!0)}const TA={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},VA={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[950px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},qA=(0,r._)("h1",{class:"tw-text-lg"},"Update Order",-1),RA={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},IA={class:"md:tw-col-span-6 tw-col-span-12"},FA=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),jA={class:"md:tw-col-span-6 tw-col-span-12"},NA=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),MA={class:"md:tw-col-span-6 tw-col-span-12"},HA=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),YA=["value"],KA=["value"],ZA={class:"md:tw-col-span-6 tw-col-span-12"},BA=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),QA={class:"md:tw-col-span-12 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},GA=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Confirmation",-1),JA={class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},XA={class:"tw-col-span-12"},tW=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note:",-1),eW={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},aW={class:"tw-col-span-12 md:tw-col-span-4"},sW=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Date:",-1),rW={class:"tw-col-span-12 md:tw-col-span-8"},iW=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Note:",-1),oW={class:"md:tw-col-span-6 tw-col-span-12"},lW=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Affectation",-1),nW={class:"md:tw-col-span-6 tw-col-span-12"},dW=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Upsell",-1),wW=["value"],cW=(0,r._)("p",{class:"tw-col-span-12 tw-mt-5 tw-mb-2"},"Order Items",-1),uW={key:1,class:"tw-col-span-12 tw-rounded tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},pW={key:2,class:"md:tw-col-span-12 tw-col-span-12"},mW={class:"tw-max-w-full tw-overflow-auto"},hW={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},gW={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},fW={class:"tw-mx-auto tw-w-[50px] tw-h-[35px] tw-shadow tw-shadow-gray-200 tw-rounded tw-overflow-hidden tw-cursor-pointer"},vW=["src"],yW={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},_W=["onUpdate:modelValue"],xW=(0,r._)("option",{value:0},"Select",-1),bW=["value"],kW={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},CW=["disabled","onUpdate:modelValue"],DW=(0,r._)("option",{value:0},"Select",-1),SW=["value"],zW={key:0},UW={key:1},LW={key:2},PW={key:3},AW=["value"],WW={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},$W={class:"md:tw-col-span-6 tw-col-span-12"},EW=["onUpdate:modelValue"],OW={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},TW={key:0},VW={key:1,class:"md:tw-col-span-6 tw-col-span-12"},qW=["onUpdate:modelValue"],RW={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},IW={class:"tw-w-full tw-col-span-12 tw-flex tw-justify-end tw-mt-3"},FW=(0,r._)("span",{class:"!tw-text-sm !tw-capitalize"},"Add",-1),jW={class:"md:tw-col-span-12 tw-col-span-12"},NW={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},MW=(0,r._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),HW={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},YW=(0,r._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-mb-2 tw-whitespace-nowrap"},"Price: ",-1),KW={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},ZW=(0,r._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),BW={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},QW=(0,r._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-whitespace-nowrap"},"Total Price: ",-1),GW={class:"tw-text-xl tw-text-green-500 tw-font-bold tw-px-2 tw-py-1 tw-rounded tw-bg-green-100"},JW={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},XW=(0,r._)("span",{class:"text-white"}," Cancel ",-1),t$=(0,r._)("span",{class:"text-white"}," Update ",-1);function e$(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation"),d=(0,r.up)("AddOrderConfirmation"),w=(0,r.up)("AddOrderAffectation"),c=(0,r.up)("ProductOffers"),u=(0,r.up)("popup-full");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(u,{onCancel:e[12]||(e[12]=e=>t.$emit("update:visible",!1)),visible:a.visible},{default:(0,r.w5)((()=>[l.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",TA,[(0,r.Wm)(n)])),l.isLoaded?((0,r.wg)(),(0,r.iD)("div",VA,[qA,(0,r._)("div",RA,[(0,r._)("div",IA,[FA,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sale.fullname]])]),(0,r._)("div",jA,[NA,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>o.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sale.phone]])]),(0,r._)("div",MA,[HA,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[(0,r._)("option",{disabled:"",value:o.sale.city},(0,J.zw)(o.sale.city),9,YA),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.cities,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.name,key:t.id},(0,J.zw)(t.name),9,KA)))),128))],512),[[s.bM,o.sale.city]])]),(0,r._)("div",ZA,[BA,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>o.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sale.adresse]])]),(0,r._)("div",QA,[GA,(0,r.Wm)(d,{order:o.sale,id:o.sale.id,confirmation:o.sale.confirmation,"onUpdate:confirmation":e[4]||(e[4]=t=>o.sale.confirmation=t),onChange:l.handleConfirmationChange,onConfirmed:e[5]||(e[5]=t=>o.sale.note=t),onReported:l.handleReported},null,8,["order","id","confirmation","onChange","onReported"]),(0,r._)("div",JA,[(0,r._)("div",XA,[tW,(0,r.wy)((0,r._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[6]||(e[6]=t=>o.sale.note=t)},null,512),[[s.nr,o.sale.note]])])]),"reporter"==o.sale.confirmation&&o.sale.reported_agente_date?((0,r.wg)(),(0,r.iD)("div",eW,[(0,r._)("div",aW,[sW,(0,r._)("div",null,(0,J.zw)(o.sale.reported_agente_date.split("T")[0]),1)]),(0,r._)("div",rW,[iW,(0,r.wy)((0,r._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[7]||(e[7]=t=>o.sale.reported_agente_note=t)},null,512),[[s.nr,o.sale.reported_agente_note]])])])):(0,r.kq)("",!0)]),(0,r._)("div",oW,[lW,(0,r.Wm)(w,{"product-ids":l.product_ids,items:l.formatedItems,order:o.sale,confirmation:o.sale.confirmation,affectation:o.sale.affectation,"onUpdate:affectation":e[8]||(e[8]=t=>o.sale.affectation=t),id:o.sale.id},null,8,["product-ids","items","order","confirmation","affectation","id"])]),(0,r._)("div",nW,[dW,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>o.sale.upsell=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.upsells,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.value,key:t.id},(0,J.zw)(t.name),9,wW)))),128))],512),[[s.bM,o.sale.upsell]])]),(0,r.kq)("",!0),cW,o.items.length?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",uW," No Order items ")),o.items.length?((0,r.wg)(),(0,r.iD)("div",pW,[(0,r._)("div",mW,[((0,r.wg)(),(0,r.iD)("table",{key:o.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,r._)("thead",hW,[(0,r._)("tr",null,[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,r._)("th",{class:(0,J.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,r._)("div",gW,(0,J.zw)(t),1)],2))),64))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.items,((t,e)=>((0,r.wg)(),(0,r.iD)("tr",{key:t,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[((0,r.wg)(),(0,r.iD)("th",{scope:"row",class:"tw-px-2 tw-py-2",key:t.product.id},[(0,r._)("div",fW,[l.product_images[e]?((0,r.wg)(),(0,r.iD)("img",{key:0,class:"tw-w-full tw-h-full tw-object-contain",src:o.serverUrl+"storage/"+l.product_images[e]},null,8,vW)):(0,r.kq)("",!0)])])),(0,r._)("th",yW,[(0,r._)("div",null,[(0,r._)("div",null,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e=>t.product.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[xW,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.filtredProducts,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.name),9,bW)))),128))],8,_W),[[s.bM,t.product.id]])])])]),(0,r._)("th",kW,[(0,r._)("div",null,[0!=t.product.id?(0,r.wy)(((0,r.wg)(),(0,r.iD)("select",{key:0,disabled:1==l.getVariations(t.product)?.variations?.length,"onUpdate:modelValue":e=>t.product_variation.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[DW,l.getVariations(t.product)?.variations?.length>1?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:0},(0,r.Ko)(l.getVariations(t.product)?.variations,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},[t.size||t.color?t.size&&"-"!=t.size&&t.color&&"-"!=t.color?((0,r.wg)(),(0,r.iD)("p",UW,(0,J.zw)(t.size)+" / "+(0,J.zw)(t.color),1)):t.size&&"-"!=t.size?((0,r.wg)(),(0,r.iD)("p",LW,(0,J.zw)(t.size),1)):t.color?((0,r.wg)(),(0,r.iD)("p",PW,(0,J.zw)(t.color),1)):(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",zW,"-"))],8,SW)))),128)):((0,r.wg)(),(0,r.iD)("option",{key:1,value:l.getVariations(t.product)?.variations[0]?.id}," Default ",8,AW))],8,CW)),[[s.bM,t.product_variation.id]]):(0,r.kq)("",!0)])]),(0,r._)("th",WW,[(0,r._)("div",$W,[(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,EW),[[s.nr,t.quantity]])])]),(0,r._)("th",OW,[(0,r._)("div",null,[null==t.price?((0,r.wg)(),(0,r.iD)("div",TW," - ")):((0,r.wg)(),(0,r.iD)("div",VW,[(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":e=>t.price=e,placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,qW),[[s.nr,t.price]])]))])]),(0,r._)("th",RW,[(0,r._)("div",null,[(0,r.Wm)(X.T,{onClick:e=>l.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])]))])])):(0,r.kq)("",!0),(0,r._)("div",IW,[(0,r._)("div",null,[(0,r.Wm)(X.T,{onClick:l.addNewRow,class:"mr-2 !tw-px-1 !tw-py-1 !tw-pr-2 tw-flex tw-items-center tw-gap-2","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-plus")])),_:1}),FW])),_:1},8,["onClick"])])]),(0,r._)("div",jW,[(0,r.Wm)(c,{"product-ids":l.product_ids},null,8,["product-ids"])]),(0,r._)("div",NW,[MW,(0,r._)("div",HW,[YW,(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":e[11]||(e[11]=t=>o.sale.price=t),class:"tw-py-1 tw-max-w-[100px] tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sale.price]])])]),(0,r._)("div",KW,[ZW,(0,r._)("div",BW,[QW,(0,r._)("div",GW,(0,J.zw)(o.currency)+" "+(0,J.zw)(l.total_price),1)])])]),(0,r._)("div",JW,[(0,r.Wm)(X.T,{onClick:l.handleCancel,color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[XW])),_:1},8,["onClick"]),(0,r.Wm)(X.T,{loading:o.isLoading,onClick:l.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[t$])),_:1},8,["loading","onClick"])])])):(0,r.kq)("",!0)])),_:1},8,["visible"])])}const a$={class:"tw-relative"},s$=["disabled"],r$=["value"],i$={key:1,class:"tw-relative tw-min-w-[100px] tw-flex tw-items-center"};function o$(t,e,a,i,o,l){return o.fetched?(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{key:a.affectation,class:"tw-relative tw-min-w-[100px]"},[(0,r._)("div",null,[(0,r._)("div",a$,[(0,r.wy)((0,r._)("select",{disabled:"confirmer"!=a.confirmation,"onUpdate:modelValue":e[0]||(e[0]=t=>l.affectationValue=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.options,(t=>((0,r.wg)(),(0,r.iD)("option",{key:t.id,value:t.id},(0,J.zw)(t.firstname+" "+t.lastname),9,r$)))),128))],8,s$),[[s.bM,l.affectationValue]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])])])),[[Gt.L,l.close]]):((0,r.wg)(),(0,r.iD)("div",i$,[(0,r.Wm)(et.t,{class:"tw-animate-spin tw-ml-1 tw-text-orange-500"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-loading")])),_:1})]))}var l$={props:["affectation","id","order","confirmation","items","productIds"],data(){return{fetched:!1,isOpen:!1,isLoading:!1,selectedId:null}},computed:{options(){return[{id:null,firstname:"select",lastname:""},...this.deliveries]},affectationValue:{get(){return this.affectation},set(t){this.$emit("update:affectation",t)}},selected(){const t=[...this.deliveries.map((t=>parseInt(t.id)))];return null!=this.selectedId&&t.includes(parseInt(this.selectedId))?this.options.filter((t=>t.id==this.selectedId))[0]:{id:null,firstname:"select",lastname:""}},users(){return this.$store.getters["user/users"]},allDeliveries(){return this.users.filter((t=>"delivery"==t.role_name))},deliveries(){return this.allDeliveries.filter((t=>t.delivery_products.some((t=>this.productIds.includes(t.product_id)))))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(t.id===this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()},getUsers(){this.fetched=!1,Q.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),this.$store.dispatch("user/setFetched",!0),this.fetched=!0}})).catch(this.$handleApiError)}},mounted(){this.selectedId=this.affectation,this.getUsers()}};const n$=(0,d.Z)(l$,[["render",o$]]);var d$=n$,w$={components:{AddOrderConfirmation:Lc,AddOrderAffectation:d$,ProductOffers:Xc},props:["visible","order"],data(){return{upsells:Vn,serverUrl:j,currency:N,isLoading:!1,isAddItem:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],reported_date:null,price:0,sale:{fullname:"",phone:"",city:"",adresse:"",price:0,upsell:null,confirmation:null,counts_from_warehouse:!1}}},watch:{product_id(){this.selectedProduct&&this.selectedProduct.variations.length>0?this.product_variation_id=this.selectedProduct.variations[0].id:this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0},"sale.confirmation":{deep:!0,handler(t){"confirmer"!=t&&(this.sale.affectation=null,this.sale.delivery=null)}},product_ids:{deep:!0,handler(t,e){this.items.map(((a,s)=>{if(0==a.product.id)return a;const r=this.getVariations(a.product)?.variations;return e[s]==t[a]||r.some((t=>t.id==a.product_variation.id))||(a.product_variation={id:0},a.product_variation_id=0),1==r?.length&&(a.product_variation=r[0],a.product_variation_id=r[0].id),a}))}}},computed:{products(){return this.$store.getters["product/products"]},product_images(){return this.items.map((t=>0==t.product.id?null:this.products.find((e=>e.id==t.product.id))?.image))},product_ids(){return this.items.map((t=>t.product.id))},isLoaded(){return this.$store.getters["product/fetched"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,a)=>e.indexOf(t.id)===a))},filtredProducts(){return this.products},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},selectedProduct(){return this.products.find((t=>t.id==this.product_id))},total_price:{get(){const t=this.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(this.sale.price?this.sale.price:0)+parseFloat(t)}},isItemsValid(){if(0==this.items.length)return!1;const t=this.items.some((t=>0==t.product.id||0==t.product_variation_id||0==t.quantity));return!t},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city},formatedItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const a=e.variations.find((e=>e.id==t.product_variation.id));return a?{...t,product:e,product_id:e.id,product_variation:a,product_variation_id:a.id,product_ref:e.ref}:t}));return t}},methods:{deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},handleConfirmationChange(){"confirmer"!=this.sale.confirmation&&(this.sale.affectation=null)},addNewRow(){const t={id:this.item_id,product_id:0,product_ref:null,product:{id:0},product_variation:{id:0},product_variation_id:0,order_id:this.order.id,quantity:0,price:0};this.items.push(t)},getVariations(t){return this.products.find((e=>e.id==t.id))},formatItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const a=e.variations.find((e=>e.id==t.product_variation.id));return a?{...t,product:e,product_id:e.id,product_variation:a,product_variation_id:a.id,product_ref:e.ref}:t}));return this.items=t,t},addItem(){if([this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),a={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:this.price};this.items.push(a),this.product_id=0,this.product_variation_id=0,this.price=0,this.item_id+=1},update(){if(this.formatItems(),!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;if("annuler"==this.sale.confirmation&&!this.sale.note)return this.$alert({type:"warning",title:"Add Cancellation note."}),!1;if(!this.isItemsValid)return this.$alert({type:"warning",title:"Order Items are not valid"}),!1;this.isLoading=!0;const t={id:this.sale.id,fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,upsell:this.sale.upsell,counts_from_warehouse:this.sale.counts_from_warehouse,orderItems:this.items,confirmation:this.sale.confirmation,note:this.sale.note,affectation:this.sale.affectation,reported_agente_note:this.sale.reported_agente_note,reported_agente_date:this.sale.reported_agente_date};"confirmer"!=t.confirmation&&(t.affectation=null,t.delivery=null),this.isLoading=!0,xa.update(t.id,t).then((e=>{"SUCCESS"==e.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"Order updated"}),this.$store.dispatch("order/update",{id:t.id,order:e.data.data.sale}),this.$emit("update:visible",!1),this.$emit("updateOrder",e.data.data.sale))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},handleCancel(){this.sale={...this.order},this.items=[...this.order.items],this.$emit("update:visible",!1)},handleReported(t){this.sale.reported_agente_note=t.reported_agente_note,this.sale.reported_agente_date=t.reported_agente_date},checkVariant(t,e){const a=this.products.find((e=>e.id==t));if(!a)return{exists:!1};let s=a.variations.find((t=>t.id==e));return s||(s=a.variations.length>0?a.variations[0]:null),{exists:!0,variation:s}},getProducts(){return ss.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.sale={...this.order},this.items=[...this.order.items]}};const c$=(0,d.Z)(w$,[["render",e$]]);var u$=c$;const p$={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},m$={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[880px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},h$=(0,r._)("h1",{class:"tw-text-lg"},"Update Order",-1),g$={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},f$={class:"md:tw-col-span-6 tw-col-span-12"},v$=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),y$={class:"md:tw-col-span-6 tw-col-span-12"},_$=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),x$={class:"md:tw-col-span-6 tw-col-span-12"},b$=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),k$=["value"],C$=["value"],D$={class:"md:tw-col-span-6 tw-col-span-12"},S$=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),z$={class:"md:tw-col-span-12 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},U$=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Confirmation",-1),L$={class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},P$={class:"tw-col-span-12"},A$=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note:",-1),W$={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},$$={class:"tw-col-span-12 md:tw-col-span-4"},E$=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Date:",-1),O$={class:"tw-col-span-12 md:tw-col-span-8"},T$=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Note:",-1),V$={class:"md:tw-col-span-6 tw-col-span-12"},q$=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Affectation",-1),R$={class:"md:tw-col-span-6 tw-col-span-12"},I$=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Upsell",-1),F$=["value"],j$=(0,r._)("p",{class:"tw-col-span-12 tw-mt-5 tw-mb-2"},"Order Items",-1),N$={key:5,class:"tw-col-span-12 tw-rounded tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},M$={key:6,class:"md:tw-col-span-12 tw-col-span-12"},H$={class:"tw-max-w-full tw-overflow-auto"},Y$={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},K$={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},Z$={class:"tw-mx-auto tw-w-[50px] tw-h-[35px] tw-shadow tw-shadow-gray-200 tw-rounded tw-overflow-hidden tw-cursor-pointer"},B$=["src"],Q$={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},G$=["onUpdate:modelValue"],J$=(0,r._)("option",{value:0},"Select",-1),X$=["value"],tE={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},eE=["disabled","onUpdate:modelValue"],aE=(0,r._)("option",{value:0},"Select",-1),sE=["value"],rE={key:0},iE={key:1},oE={key:2},lE={key:3},nE=["value"],dE={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},wE={class:"md:tw-col-span-6 tw-col-span-12"},cE=["onUpdate:modelValue"],uE={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},pE={key:0},mE={key:1,class:"md:tw-col-span-6 tw-col-span-12"},hE=["onUpdate:modelValue"],gE={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},fE={class:"tw-w-full tw-col-span-12 tw-flex tw-justify-end tw-mt-3"},vE=(0,r._)("span",{class:"!tw-text-sm !tw-capitalize"},"Add",-1),yE={class:"md:tw-col-span-12 tw-col-span-12"},_E={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},xE=(0,r._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),bE={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},kE=(0,r._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-mb-2 tw-whitespace-nowrap"},"Price: ",-1),CE={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},DE=(0,r._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),SE={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},zE=(0,r._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-whitespace-nowrap"},"Total Price: ",-1),UE={class:"tw-text-xl tw-text-green-500 tw-font-bold tw-px-2 tw-py-1 tw-rounded tw-bg-green-100"},LE={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},PE=(0,r._)("span",{class:"text-white"}," Cancel ",-1),AE=(0,r._)("span",{class:"text-white"}," Update ",-1);function WE(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation"),d=(0,r.up)("AddOrderConfirmation"),w=(0,r.up)("AddOrderAffectation"),c=(0,r.up)("ProductOffers"),u=(0,r.up)("popup-full");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(u,{onCancel:e[16]||(e[16]=e=>t.$emit("update:visible",!1)),visible:a.visible},{default:(0,r.w5)((()=>[l.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",p$,[(0,r.Wm)(n)])),l.isLoaded?((0,r.wg)(),(0,r.iD)("div",m$,[h$,(0,r._)("div",g$,[(0,r._)("div",f$,[v$,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sale.fullname]])]),(0,r._)("div",y$,[_$,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>o.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sale.phone]])]),(0,r._)("div",x$,[b$,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[(0,r._)("option",{disabled:"",value:o.sale.city},(0,J.zw)(o.sale.city),9,k$),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.cities,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.name,key:t.id},(0,J.zw)(t.name),9,C$)))),128))],512),[[s.bM,o.sale.city]])]),(0,r._)("div",D$,[S$,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>o.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sale.adresse]])]),(0,r._)("div",z$,[U$,(0,r.Wm)(d,{order:o.sale,id:o.sale.id,confirmation:o.sale.confirmation,"onUpdate:confirmation":e[4]||(e[4]=t=>o.sale.confirmation=t),onConfirmed:e[5]||(e[5]=t=>o.sale.note=t),onReported:l.handleReported,onChange:l.handleConfirmationChange},null,8,["order","id","confirmation","onReported","onChange"]),(0,r._)("div",L$,[(0,r._)("div",P$,[A$,(0,r.wy)((0,r._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[6]||(e[6]=t=>o.sale.note=t)},null,512),[[s.nr,o.sale.note]])])]),"reporter"==o.sale.confirmation&&o.sale.reported_agente_date?((0,r.wg)(),(0,r.iD)("div",W$,[(0,r._)("div",$$,[E$,(0,r._)("div",null,(0,J.zw)(o.sale.reported_agente_date.split("T")[0]),1)]),(0,r._)("div",O$,[T$,(0,r.wy)((0,r._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[7]||(e[7]=t=>o.sale.reported_agente_note=t)},null,512),[[s.nr,o.sale.reported_agente_note]])])])):(0,r.kq)("",!0)]),(0,r._)("div",V$,[q$,(0,r.Wm)(w,{"product-ids":l.product_ids,items:o.items,order:o.sale,confirmation:o.sale.confirmation,affectation:o.sale.affectation,"onUpdate:affectation":e[8]||(e[8]=t=>o.sale.affectation=t),id:o.sale.id},null,8,["product-ids","items","order","confirmation","affectation","id"])]),(0,r._)("div",R$,[I$,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>o.sale.upsell=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.upsells,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.value,key:t.id},(0,J.zw)(t.name),9,F$)))),128))],512),[[s.bM,o.sale.upsell]])]),(0,r.kq)("",!0),(0,r.kq)("",!0),(0,r.kq)("",!0),(0,r.kq)("",!0),(0,r.kq)("",!0),j$,o.items.length?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",N$," No Order items ")),o.items.length?((0,r.wg)(),(0,r.iD)("div",M$,[(0,r._)("div",H$,[((0,r.wg)(),(0,r.iD)("table",{key:o.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,r._)("thead",Y$,[(0,r._)("tr",null,[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,r._)("th",{class:(0,J.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,r._)("div",K$,(0,J.zw)(t),1)],2))),64))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.items,((t,e)=>((0,r.wg)(),(0,r.iD)("tr",{key:t,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[((0,r.wg)(),(0,r.iD)("th",{scope:"row",class:"tw-px-2 tw-py-2",key:t.product.id},[(0,r._)("div",Z$,[l.product_images[e]?((0,r.wg)(),(0,r.iD)("img",{key:0,class:"tw-w-full tw-h-full tw-object-contain",src:o.serverUrl+"storage/"+l.product_images[e]},null,8,B$)):(0,r.kq)("",!0)])])),(0,r._)("th",Q$,[(0,r._)("div",null,[(0,r._)("div",null,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e=>t.product.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[J$,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.filtredProducts,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.name),9,X$)))),128))],8,G$),[[s.bM,t.product.id]])])])]),(0,r._)("th",tE,[(0,r._)("div",null,[0!=t.product.id?(0,r.wy)(((0,r.wg)(),(0,r.iD)("select",{key:0,disabled:1==l.getVariations(t.product)?.variations?.length,"onUpdate:modelValue":e=>t.product_variation.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[aE,l.getVariations(t.product)?.variations?.length>1?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:0},(0,r.Ko)(l.getVariations(t.product)?.variations,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},[t.size||t.color?t.size&&"-"!=t.size&&t.color&&"-"!=t.color?((0,r.wg)(),(0,r.iD)("p",iE,(0,J.zw)(t.size)+" / "+(0,J.zw)(t.color),1)):t.size&&"-"!=t.size?((0,r.wg)(),(0,r.iD)("p",oE,(0,J.zw)(t.size),1)):t.color?((0,r.wg)(),(0,r.iD)("p",lE,(0,J.zw)(t.color),1)):(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",rE,"-"))],8,sE)))),128)):((0,r.wg)(),(0,r.iD)("option",{key:1,value:l.getVariations(t.product)?.variations[0]?.id}," Default ",8,nE))],8,eE)),[[s.bM,t.product_variation.id]]):(0,r.kq)("",!0)])]),(0,r._)("th",dE,[(0,r._)("div",wE,[(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,cE),[[s.nr,t.quantity]])])]),(0,r._)("th",uE,[(0,r._)("div",null,[null==t.price?((0,r.wg)(),(0,r.iD)("div",pE," - ")):((0,r.wg)(),(0,r.iD)("div",mE,[(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":e=>t.price=e,placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,hE),[[s.nr,t.price]])]))])]),(0,r._)("th",gE,[(0,r._)("div",null,[(0,r.Wm)(X.T,{onClick:e=>l.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])]))])])):(0,r.kq)("",!0),(0,r._)("div",fE,[(0,r._)("div",null,[(0,r.Wm)(X.T,{onClick:l.addNewRow,class:"mr-2 !tw-px-1 !tw-py-1 !tw-pr-2 tw-flex tw-items-center tw-gap-2","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-plus")])),_:1}),vE])),_:1},8,["onClick"])])]),(0,r._)("div",yE,[(0,r.Wm)(c,{"product-ids":l.product_ids},null,8,["product-ids"])]),(0,r._)("div",_E,[xE,(0,r._)("div",bE,[kE,(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":e[15]||(e[15]=t=>o.sale.price=t),class:"tw-py-1 tw-max-w-[100px] tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sale.price]])])]),(0,r._)("div",CE,[DE,(0,r._)("div",SE,[zE,(0,r._)("div",UE,(0,J.zw)(o.currency)+" "+(0,J.zw)(l.total_price),1)])])]),(0,r._)("div",LE,[(0,r.Wm)(X.T,{onClick:l.handleCancel,color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[PE])),_:1},8,["onClick"]),(0,r.Wm)(X.T,{loading:o.isLoading,onClick:l.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[AE])),_:1},8,["loading","onClick"])])])):(0,r.kq)("",!0)])),_:1},8,["visible"])])}var $E={components:{AddOrderConfirmation:Lc,AddOrderAffectation:d$,ProductOffers:Mh},props:["visible","order"],data(){return{upsells:Vn,serverUrl:j,currency:N,isLoading:!1,isAddItem:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],reported_date:null,price:0,sale:{fullname:"",phone:"",city:"",adresse:"",price:0,upsell:null,confirmation:null,counts_from_warehouse:!1}}},watch:{product_id(){this.selectedProduct&&this.selectedProduct.variations.length>0?this.product_variation_id=this.selectedProduct.variations[0].id:this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0},"sale.confirmation":{deep:!0,handler(t){"confirmer"!=t&&(this.sale.affectation=null,this.sale.delivery=null)}},product_ids:{deep:!0,handler(t,e){this.items.map(((a,s)=>{if(0==a.product.id)return a;const r=this.getVariations(a.product)?.variations;return e[s]==t[a]||r.some((t=>t.id==a.product_variation.id))||(a.product_variation={id:0},a.product_variation_id=0),1==r?.length&&(a.product_variation=r[0],a.product_variation_id=r[0].id),a}))}}},computed:{products(){return this.$store.getters["product/products"]},product_images(){return this.items.map((t=>0==t.product.id?null:this.products.find((e=>e.id==t.product.id))?.image))},product_ids(){return this.items.map((t=>t.product.id))},isLoaded(){return this.$store.getters["product/fetched"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,a)=>e.indexOf(t.id)===a))},filtredProducts(){return this.products},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},selectedProduct(){return this.products.find((t=>t.id==this.product_id))},total_price:{get(){const t=this.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(this.sale.price?this.sale.price:0)+parseFloat(t)}},isItemsValid(){if(0==this.items.length)return!1;const t=this.items.some((t=>0==t.product.id||0==t.product_variation_id||0==t.quantity));return!t},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city},formatedItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const a=e.variations.find((e=>e.id==t.product_variation.id));return a?{...t,product:e,product_id:e.id,product_variation:a,product_variation_id:a.id,product_ref:e.ref}:t}));return t}},methods:{deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},handleConfirmationChange(){"confirmer"!=this.sale.confirmation&&(this.sale.affectation=null)},addNewRow(){const t={id:this.item_id,product_id:0,product_ref:null,product:{id:0},product_variation:{id:0},product_variation_id:0,order_id:this.order.id,quantity:0,price:0};this.items.push(t)},getVariations(t){return this.products.find((e=>e.id==t.id))},formatItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const a=e.variations.find((e=>e.id==t.product_variation.id));return a?{...t,product:e,product_id:e.id,product_variation:a,product_variation_id:a.id,product_ref:e.ref}:t}));return this.items=t,t},addItem(){if([this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),a={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:this.price};this.items.push(a),this.product_id=0,this.product_variation_id=0,this.price=0,this.item_id+=1},update(){if(this.formatItems(),!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;if("annuler"==this.sale.confirmation&&!this.sale.note)return this.$alert({type:"warning",title:"Add Cancellation note."}),!1;if(!this.isItemsValid)return this.$alert({type:"warning",title:"Order Items are not valid"}),!1;const t={id:this.sale.id,fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,upsell:this.sale.upsell,counts_from_warehouse:this.sale.counts_from_warehouse,orderItems:this.items,confirmation:this.sale.confirmation,note:this.sale.note,affectation:this.sale.affectation,reported_agente_note:this.sale.reported_agente_note,reported_agente_date:this.sale.reported_agente_date};"confirmer"!=t.confirmation&&(t.affectation=null,t.delivery=null),this.isLoading=!0,xa.update(t.id,t).then((t=>{"SUCCESS"==t.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"Order updated"}),this.$emit("update:visible",!1),this.$emit("updateOrder",t.data.data.sale))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},handleCancel(){this.sale={...this.order},this.items=[...this.order.items],this.$emit("update:visible",!1)},handleReported(t){this.sale.reported_agente_note=t.reported_agente_note,this.sale.reported_agente_date=t.reported_agente_date},getProducts(){return ss.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.sale={...this.order},this.items=[...this.order.items]}};const EE=(0,d.Z)($E,[["render",WE]]);var OE=EE,TE={emits:["updateOrder"],components:{UpdateOrder:u$,UpdateDoubleOrder:OE},props:{order:{required:!0},only:{required:!1,default:["update","whatsapp"]},double:{required:!1,default:!1}},name:"orderActions",data(){return{showPopup:!1,showUpdatePopup:!1,isLoading:!1,newOrder:null}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{},mounted(){}};const VE=(0,d.Z)(TE,[["render",OA]]);var qE=VE,RE={props:["order","showNote"],components:{OrderConfirmation:fA,OrderUpsell:kA,OrderAffectation:AA,OrderActions:qE},data(){return{showPopup:!1,isLoading:!1,newNote:"",newOrder:null,todayDate:null}},computed:{id(){return this.order.id},fullname(){return this.order.fullname},product_name(){return this.order.product_name},agente_id(){return this.order.agente_id},upsell(){return this.order.upsell},phone(){return this.order.phone},city(){return this.order.city},adresse(){return this.order.adresse},quantity(){return this.order.quantity},price(){return this.order.price},confirmation(){return this.order.confirmation},affectation(){return this.order.affectation},delivery(){return this.order.delivery},note(){return this.order.note},created_at(){return this.order?.created_at}},methods:{getPrice(t){return Ki(t)},handleClick(){this.showPopup=!0,this.newNote=this.note},handleResolved(t){t?(this.showPopup=!1,this.isLoading=!0,xa.agenteUpdateNote(this.id,this.newNote).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.$store.dispatch("order/updateNote",{note:this.newNote,id:this.id}))}),this.$handleApiError).finally((()=>this.isLoading=!1))):this.showPopup=!1},isReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date?.split("T")[0]==this.todayDate}},mounted(){this.newOrder=this.order;const t=new Date,e=t.getDate(),a=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),s=t.getMonth()+1,r=s.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();this.todayDate=`${i}-${r}-${a}`}};const IE=(0,d.Z)(RE,[["render",HP]]);var FE=IE,jE={props:["orders","note"],data(){return{allowedLimit:[5,10,20,50,100,200,500],currentPage:1,paginationLimit:50,todayDate:null,columnsNote:["id","date","client","product","confirmation","affectation","price","city","note","actions"],columnsNormal:["id","date","client","product","confirmation","affectation","price","city","actions"]}},components:{OrderRow:FE},computed:{columns(){return this.note?this.columnsNote:this.columnsNormal},deliveries(){return this.$store.getters["user/deliveries"]},prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.orders.length/this.paginationLimit)},items(){const t=[...this.reportedForToday,...this.orders.filter((t=>!this.isReportedToday(t)))];return t.slice(this.prevRange,this.nextRange)},reportedForToday(){return this.orders.filter(this.isReportedToday)}},methods:{getDeliveries(){Q.deliveries().then((t=>{this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)},isReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date?.split("T")[0]==this.todayDate}},mounted(){0==this.deliveries.length&&this.getDeliveries();const t=new Date,e=t.getDate(),a=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),s=t.getMonth()+1,r=s.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();this.todayDate=`${i}-${r}-${a}`,console.log(this.reportedForToday)}};const NE=(0,d.Z)(jE,[["render",vP]]);var ME=NE;const HE={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},YE={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[950px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},KE=(0,r._)("h1",{class:"tw-text-lg"},"Update Order",-1),ZE={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},BE={class:"md:tw-col-span-6 tw-col-span-12"},QE=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),GE={class:"md:tw-col-span-6 tw-col-span-12"},JE=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),XE={class:"md:tw-col-span-6 tw-col-span-12"},tO=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),eO=["value"],aO=["value"],sO={class:"md:tw-col-span-6 tw-col-span-12"},rO=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),iO={class:"md:tw-col-span-12 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},oO=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Confirmation",-1),lO={class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},nO={class:"tw-col-span-12"},dO=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note:",-1),wO={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},cO={class:"tw-col-span-12 md:tw-col-span-4"},uO=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Date:",-1),pO={class:"tw-col-span-12 md:tw-col-span-8"},mO=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Note:",-1),hO={class:"md:tw-col-span-6 tw-col-span-12"},gO=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Affectation",-1),fO={class:"md:tw-col-span-6 tw-col-span-12"},vO=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Upsell",-1),yO=["value"],_O={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-4"},xO={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},bO={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit -tw-rotate-90 tw-scale-75"},kO=(0,r._)("div",{class:"tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),CO={class:"tw-flex tw-flex-col tw-justify-center"},DO=(0,r._)("p",{class:"tw-col-span-12 tw-mt-5 tw-mb-2"},"Order Items",-1),SO={key:1,class:"tw-col-span-12 tw-rounded tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},zO={key:2,class:"md:tw-col-span-12 tw-col-span-12"},UO={class:"tw-max-w-full tw-overflow-auto"},LO={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},PO={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},AO={class:"tw-mx-auto tw-w-[50px] tw-h-[35px] tw-shadow tw-shadow-gray-200 tw-rounded tw-overflow-hidden tw-cursor-pointer"},WO=["src"],$O={scope:"row",class:"tw-pr-6 tw-py-2 tw-font-medium tw-text-gray-900"},EO=["onUpdate:modelValue"],OO=(0,r._)("option",{value:0},"Select",-1),TO=["value"],VO={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},qO=["disabled","onUpdate:modelValue"],RO=(0,r._)("option",{value:0},"Select",-1),IO=["value"],FO={key:0},jO={key:1},NO={key:2},MO={key:3},HO=["value"],YO={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},KO={class:"md:tw-col-span-6 tw-col-span-12"},ZO=["onUpdate:modelValue"],BO={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},QO={key:0},GO={key:1,class:"md:tw-col-span-6 tw-col-span-12"},JO=["onUpdate:modelValue"],XO={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},tT={class:"tw-w-full tw-col-span-12 tw-flex tw-justify-end tw-mt-3"},eT=(0,r._)("span",{class:"!tw-text-sm !tw-capitalize"},"Add",-1),aT={class:"md:tw-col-span-12 tw-col-span-12"},sT={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},rT=(0,r._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),iT={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},oT=(0,r._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-mb-2 tw-whitespace-nowrap"},"Price: ",-1),lT={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},nT=(0,r._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),dT={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},wT=(0,r._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-whitespace-nowrap"},"Total Price: ",-1),cT={class:"tw-text-xl tw-text-green-500 tw-font-bold tw-px-2 tw-py-1 tw-rounded tw-bg-green-100"},uT={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},pT=(0,r._)("span",{class:"text-white"}," Cancel ",-1),mT=(0,r._)("span",{class:"text-white"}," Create ",-1);function hT(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation"),d=(0,r.up)("AddOrderConfirmation"),w=(0,r.up)("AddOrderAffectation"),c=(0,r.up)("ProductOffers"),u=(0,r.up)("popup-full");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(u,{onCancel:e[14]||(e[14]=e=>t.$emit("update:visible",!1)),visible:a.visible},{default:(0,r.w5)((()=>[l.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",HE,[(0,r.Wm)(n)])),l.isLoaded?((0,r.wg)(),(0,r.iD)("div",YE,[KE,(0,r._)("div",ZE,[(0,r._)("div",BE,[QE,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sale.fullname]])]),(0,r._)("div",GE,[JE,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>o.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sale.phone]])]),(0,r._)("div",XE,[tO,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[(0,r._)("option",{disabled:"",value:o.sale.city},(0,J.zw)(o.sale.city),9,eO),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.cities,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.name,key:t.id},(0,J.zw)(t.name),9,aO)))),128))],512),[[s.bM,o.sale.city]])]),(0,r._)("div",sO,[rO,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>o.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sale.adresse]])]),(0,r._)("div",iO,[oO,(0,r.Wm)(d,{order:o.sale,id:o.sale.id,confirmation:o.sale.confirmation,"onUpdate:confirmation":e[4]||(e[4]=t=>o.sale.confirmation=t),onConfirmed:e[5]||(e[5]=t=>o.sale.note=t),onReported:l.handleReported,onChange:l.handleConfirmationChange},null,8,["order","id","confirmation","onReported","onChange"]),(0,r._)("div",lO,[(0,r._)("div",nO,[dO,(0,r.wy)((0,r._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[6]||(e[6]=t=>o.sale.note=t)},null,512),[[s.nr,o.sale.note]])])]),"reporter"==o.sale.confirmation&&o.sale.reported_agente_date?((0,r.wg)(),(0,r.iD)("div",wO,[(0,r._)("div",cO,[uO,(0,r._)("div",null,(0,J.zw)(o.sale.reported_agente_date.split("T")[0]),1)]),(0,r._)("div",pO,[mO,(0,r.wy)((0,r._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[7]||(e[7]=t=>o.sale.reported_agente_note=t)},null,512),[[s.nr,o.sale.reported_agente_note]])])])):(0,r.kq)("",!0)]),(0,r._)("div",hO,[gO,(0,r.Wm)(w,{"product-ids":l.product_ids,items:o.items,"onUpdate:items":e[8]||(e[8]=t=>o.items=t),order:o.sale,confirmation:o.sale.confirmation,affectation:o.sale.affectation,"onUpdate:affectation":e[9]||(e[9]=t=>o.sale.affectation=t),id:o.sale.id},null,8,["product-ids","items","order","confirmation","affectation","id"])]),(0,r._)("div",fO,[vO,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>o.sale.upsell=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.upsells,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.value,key:t.id},(0,J.zw)(t.name),9,yO)))),128))],512),[[s.bM,o.sale.upsell]])]),(0,r.kq)("",!0),(0,r._)("div",_O,[(0,r._)("div",xO,[(0,r._)("label",bO,[(0,r.wy)((0,r._)("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=t=>o.sale.counts_from_warehouse=t),class:"tw-sr-only tw-peer"},null,512),[[s.e8,o.sale.counts_from_warehouse]]),kO]),(0,r._)("label",CO,[(0,r._)("span",{class:(0,J.C_)([[o.sale.counts_from_warehouse?"tw-text-orange-500":"tw-text-neutral-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Warehouse",2),(0,r._)("span",{class:(0,J.C_)([[o.sale.counts_from_warehouse?"tw-text-neutral-500":"tw-text-orange-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Delivery",2)])])]),DO,o.items.length?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",SO," No Order items ")),o.items.length?((0,r.wg)(),(0,r.iD)("div",zO,[(0,r._)("div",UO,[((0,r.wg)(),(0,r.iD)("table",{key:o.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,r._)("thead",LO,[(0,r._)("tr",null,[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,r._)("th",{class:(0,J.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,r._)("div",PO,(0,J.zw)(t),1)],2))),64))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.items,((t,e)=>((0,r.wg)(),(0,r.iD)("tr",{key:t.product.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[((0,r.wg)(),(0,r.iD)("th",{scope:"row",class:"tw-px-2 tw-py-2",key:t.product.id},[(0,r._)("div",AO,[l.product_images[e]?((0,r.wg)(),(0,r.iD)("img",{key:0,class:"tw-w-full tw-h-full tw-object-contain",src:o.serverUrl+"storage/"+l.product_images[e]},null,8,WO)):(0,r.kq)("",!0)])])),(0,r._)("th",$O,[(0,r._)("div",null,[(0,r._)("div",null,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e=>t.product.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[OO,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.filtredProducts,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.name),9,TO)))),128))],8,EO),[[s.bM,t.product.id]])])])]),(0,r._)("th",VO,[(0,r._)("div",null,[0!=t.product.id?(0,r.wy)(((0,r.wg)(),(0,r.iD)("select",{key:0,disabled:1==l.getVariations(t.product)?.variations?.length,"onUpdate:modelValue":e=>t.product_variation.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[RO,l.getVariations(t.product)?.variations?.length>1?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:0},(0,r.Ko)(l.getVariations(t.product)?.variations,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},[t.size||t.color?t.size&&"-"!=t.size&&t.color&&"-"!=t.color?((0,r.wg)(),(0,r.iD)("p",jO,(0,J.zw)(t.size)+" / "+(0,J.zw)(t.color),1)):t.size&&"-"!=t.size?((0,r.wg)(),(0,r.iD)("p",NO,(0,J.zw)(t.size),1)):t.color?((0,r.wg)(),(0,r.iD)("p",MO,(0,J.zw)(t.color),1)):(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",FO,"-"))],8,IO)))),128)):((0,r.wg)(),(0,r.iD)("option",{key:1,value:l.getVariations(t.product)?.variations[0]?.id}," Default ",8,HO))],8,qO)),[[s.bM,t.product_variation.id]]):(0,r.kq)("",!0)])]),(0,r._)("th",YO,[(0,r._)("div",KO,[(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,ZO),[[s.nr,t.quantity]])])]),(0,r._)("th",BO,[(0,r._)("div",null,[null==t.price?((0,r.wg)(),(0,r.iD)("div",QO," - ")):((0,r.wg)(),(0,r.iD)("div",GO,[(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":e=>t.price=e,placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,JO),[[s.nr,t.price]])]))])]),(0,r._)("th",XO,[(0,r._)("div",null,[(0,r.Wm)(X.T,{onClick:e=>l.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])]))])])):(0,r.kq)("",!0),(0,r._)("div",tT,[(0,r._)("div",null,[(0,r.Wm)(X.T,{onClick:l.addNewRow,class:"mr-2 !tw-px-1 !tw-py-1 !tw-pr-2 tw-flex tw-items-center tw-gap-2","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-plus")])),_:1}),eT])),_:1},8,["onClick"])])]),(0,r._)("div",aT,[(0,r.Wm)(c,{"product-ids":l.product_ids},null,8,["product-ids"])]),(0,r._)("div",sT,[rT,(0,r._)("div",iT,[oT,(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":e[13]||(e[13]=t=>o.sale.price=t),class:"tw-py-1 tw-max-w-[100px] tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sale.price]])])]),(0,r._)("div",lT,[nT,(0,r._)("div",dT,[wT,(0,r._)("div",cT,(0,J.zw)(o.currency)+" "+(0,J.zw)(l.total_price),1)])])]),(0,r._)("div",uT,[(0,r.Wm)(X.T,{onClick:l.handleCancel,color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[pT])),_:1},8,["onClick"]),(0,r.Wm)(X.T,{loading:o.isLoading,onClick:l.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[mT])),_:1},8,["loading","onClick"])])])):(0,r.kq)("",!0)])),_:1},8,["visible"])])}var gT={components:{AddOrderConfirmation:Lc,AddOrderAffectation:Vc,ProductOffers:Xc},props:["visible","order"],data(){return{upsells:Vn,serverUrl:j,currency:N,isLoading:!1,isAddItem:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],reported_date:null,price:0,sale:{fullname:"",phone:"",city:"",adresse:"",price:0,upsell:null,confirmation:null,counts_from_warehouse:!0}}},watch:{product_id(){this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0},"sale.confirmation":{deep:!0,handler(t){"confirmer"!=t&&(this.sale.affectation=null,this.sale.delivery=null)}},product_ids:{deep:!0,handler(t,e){this.items.map(((a,s)=>{if(0==a.product.id)return a;const r=this.getVariations(a.product)?.variations;return e[s]==t[a]||r.some((t=>t.id==a.product_variation.id))||(a.product_variation={id:0},a.product_variation_id=0),1==r?.length&&(a.product_variation=r[0],a.product_variation_id=r[0].id),a}))}}},computed:{products(){return this.$store.getters["product/products"]},product_images(){return this.items.map((t=>0==t.product.id?null:this.products.find((e=>e.id==t.product.id))?.image))},product_ids(){return this.items.map((t=>t.product.id))},isLoaded(){return this.$store.getters["product/fetched"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,a)=>e.indexOf(t.id)===a))},filtredProducts(){return this.products},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},selectedProduct(){return this.products.find((t=>t.id==this.product_id))},total_price:{get(){const t=this.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(this.sale.price?this.sale.price:0)+parseFloat(t)}},isItemsValid(){if(0==this.items.length)return!1;const t=this.items.some((t=>0==t.product.id||0==t.product_variation_id||0==t.quantity));return!t},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city}},methods:{deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},handleConfirmationChange(){"confirmer"!=this.sale.confirmation&&(this.sale.affectation=null)},addNewRow(){const t={id:this.item_id,product_id:0,product_ref:null,product:{id:0},product_variation:{id:0},product_variation_id:0,quantity:0,price:0};this.items.push(t)},getVariations(t){return this.products.find((e=>e.id==t.id))},formatItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const a=e.variations.find((e=>e.id==t.product_variation.id));return a?{...t,product:e,product_id:e.id,product_variation:a,product_variation_id:a.id,product_ref:e.ref}:t}));return this.items=t,t},addItem(){if([this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),a={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:this.price};this.items.push(a),this.product_id=0,this.product_variation_id=0,this.price=0,this.item_id+=1},create(){if(this.formatItems(),!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;if("annuler"==this.sale.confirmation&&!this.sale.note)return this.$alert({type:"warning",title:"Add Cancellation note."}),!1;if(!this.isItemsValid)return this.$alert({type:"warning",title:"Order Items are not valid"}),!1;this.isLoading=!0;const t={fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,upsell:this.sale.upsell,counts_from_warehouse:this.sale.counts_from_warehouse,orderItems:this.items,confirmation:this.sale.confirmation,note:this.sale.note,affectation:this.sale.affectation,reported_agente_note:this.sale.reported_agente_note,reported_agente_date:this.sale.reported_agente_date};this.isLoading=!0,xa.create(t).then((t=>{"SALE_ADDED"==t.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"New Order Added"}),this.$store.dispatch("order/addOrder",t.data.data.sale),this.$emit("update:visible",!1))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},handleCancel(){this.$emit("update:visible",!1)},handleReported(t){this.sale.reported_agente_note=t.reported_agente_note,this.sale.reported_agente_date=t.reported_agente_date},checkVariant(t,e){const a=this.products.find((e=>e.id==t));if(!a)return{exists:!1};let s=a.variations.find((t=>t.id==e));return s||(s=a.variations.length>0?a.variations[0]:null),{exists:!0,variation:s}},getProducts(){return ss.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){}};const fT=(0,d.Z)(gT,[["render",hT]]);var vT=fT,yT={components:{OrdersTable:ME,AddNewOrder:vT},data(){return{localUrl:F,confirmations:On,isLoaded:!1,showFilters:!1,confirmationFilter:"all",affectationFilter:"all",upsellFilter:"all",search:"",showPopup:!1,sorting:{sortBy:null,orderBy:"asc",fields:[{name:"Select",value:null},{name:"ID",value:"id"},{name:"Created At",value:"created_at"}],options:[{name:"Ascending",value:"asc"},{name:"Descending",value:"desc"}]}}},computed:{orders(){return this.$store.getters["order/orders"]},sortedOrders(){const t=this.orders;return t.sort(((t,e)=>{switch(this.sorting.sortBy){case"created_at":return"asc"==this.sorting.orderBy?new Date(t.created_at)-new Date(e.created_at):new Date(e.created_at)-new Date(t.created_at);case"id":return"asc"==this.sorting.orderBy?t.id-e.id:e.id-t.id;default:return!0}}))},deliveries(){return this.$store.getters["user/deliveries"]},filteredOrders(){const t=this.confirmationFilter,e=this.affectationFilter,a=this.upsellFilter;return this.sortedOrders.filter((s=>{if("all"!==t&&s.confirmation!==t)return!1;if("all"!==e&&parseInt(s.affectation)!==parseInt(e))return!1;if("all"!==a&&s.upsell!==a)return!1;const r=((t,e)=>{for(const a in t)if(!["created_at","updated_at","sheets_id","reported_agente_note","reported_agente_note","reported_agente_date","reported_delivery_note","reported_delivery_date"].includes(a)&&String(t[a]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(s,this.search);return!!r}))}},methods:{async getDeliveries(){await Q.deliveries().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)},getOrders(){xa.agenteOrders().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("order/setOrders",e),console.log(t.data),this.isLoaded=!0}})).catch(this.$handleApiError)}},mounted(){this.$store.dispatch("order/setOrders",[]),this.getOrders()}};const _T=(0,d.Z)(yT,[["render",rP]]);var xT=_T;const bT=(0,r._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,r._)("div",null,[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Order"),(0,r._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Order Details")])],-1),kT={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},CT={class:""},DT={class:"text-white"},ST={key:0},zT={class:"mt-5"},UT={key:0,class:"tw-py-5"},LT=(0,r._)("p",{class:"tw-text-neutral-400 tw-text-md"},"Original Order: ",-1),PT={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},AT={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},WT=(0,r._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,r._)("tr",null,[(0,r._)("th",{scope:"col",class:"px-6 py-3"}," # "),(0,r._)("th",{scope:"col",class:"px-6 py-3"}," Client "),(0,r._)("th",{scope:"col",class:"px-6 py-3"}," Phone "),(0,r._)("th",{scope:"col",class:"px-6 py-3"}," Product "),(0,r._)("th",{scope:"col",class:"px-6 py-3"}," Price "),(0,r._)("th",{scope:"col",class:"px-6 py-3"}," City "),(0,r._)("th",{scope:"col",class:"px-6 py-3"}," Adresse "),(0,r._)("th",{scope:"col",class:"px-6 py-3"},[(0,r._)("span",{class:"sr-only"},"Edit")])])],-1),$T={class:"tw-bg-white tw-border-b"},ET={scope:"row",class:"px-6 py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},OT={scope:"row",class:"px-6 py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},TT={class:"px-6 py-4 tw-flex tw-items-center"},VT={class:"px-6 py-4"},qT={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},RT={key:0},IT={key:1},FT={class:"px-6 py-4"},jT={class:"px-6 py-4"},NT={class:"px-6 py-4"},MT={class:"px-6 py-4"},HT={class:"tw-flex tw-gap-2 tw-justify-end tw-mt-5"},YT=(0,r._)("span",{class:"text-white"}," Save ",-1),KT={key:1},ZT=(0,r._)("p",{class:"tw-text-neutral-400 tw-py-5"},"No Order was found !",-1),BT=[ZT];function QT(t,e,a,s,i,o){const l=(0,r.up)("NewOrder"),n=(0,r.up)("UpdateOrder");return(0,r.wg)(),(0,r.iD)("div",null,[bT,(0,r._)("div",kT,[(0,r._)("div",CT,[(0,r._)("div",null,[(0,r.Wm)(X.T,{onClick:o.addOrder,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[(0,r._)("span",DT,(0,J.zw)(i.isLoaded?"Add Order":"Loading..."),1),i.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(et.t,{key:0,icon:"mdi-autorenew",class:"ml-2 text-white tw-animate-spin"}))])),_:1},8,["onClick"])]),i.isLoaded&&i.isOrderExists?((0,r.wg)(),(0,r.iD)("div",ST,[(0,r._)("div",zT,[i.newOrder.product_name?((0,r.wg)(),(0,r.iD)("div",UT,[LT,(0,r._)("p",null,[(0,r._)("ul",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.newOrder.product_name.split("\n"),(t=>((0,r.wg)(),(0,r.iD)("li",{key:t,class:"tw-font-bold"}," - "+(0,J.zw)(t),1)))),128))])])])):(0,r.kq)("",!0),(0,r._)("div",PT,[(0,r._)("table",AT,[WT,(0,r._)("tbody",null,[(0,r._)("tr",$T,[(0,r._)("th",ET,(0,J.zw)(i.newOrder.id),1),(0,r._)("th",OT,(0,J.zw)(i.newOrder.fullname),1),(0,r._)("td",TT,[(0,r.Uk)((0,J.zw)(i.newOrder.phone)+" ",1),(0,r.Wm)(X.T,{link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+i.newOrder.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"text",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"green"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])]),(0,r._)("td",VT,[(0,r._)("p",null,[(0,r._)("ul",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.newOrder.items,(t=>((0,r.wg)(),(0,r.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,r.Uk)(" - "),(0,r._)("span",qT,(0,J.zw)(t.quantity)+" X ",1),(0,r.Uk)((0,J.zw)(t.product.name)+" ",1),t.product_variation.size?((0,r.wg)(),(0,r.iD)("span",RT,"| "+(0,J.zw)(t.product_variation.size),1)):(0,r.kq)("",!0),t.product_variation.color?((0,r.wg)(),(0,r.iD)("span",IT,"| "+(0,J.zw)(t.product_variation.color),1)):(0,r.kq)("",!0)])))),128))])])]),(0,r._)("td",FT,(0,J.zw)(o.getPrice(i.newOrder)),1),(0,r._)("td",jT,(0,J.zw)(i.newOrder.city),1),(0,r._)("td",NT,(0,J.zw)(i.newOrder.adresse),1),(0,r._)("td",MT,[(i.newOrder.upsell,(0,r.wg)(),(0,r.j4)(X.T,{key:0,onClick:e[0]||(e[0]=t=>i.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-pencil-outline")])),_:1})])),_:1}))])]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.doubles.filter((t=>t.id!=i.newOrder.id)),(t=>((0,r.wg)(),(0,r.j4)(l,{onUpdate:o.handleDoubleUpdate,order:t,key:t.id},null,8,["onUpdate","order"])))),128))])])])]),(0,r._)("div",HT,[(0,r.Wm)(X.T,{onClick:o.clearOrder,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[YT])),_:1},8,["onClick"])])])):(0,r.kq)("",!0),i.isLoaded&&!i.isOrderExists?((0,r.wg)(),(0,r.iD)("div",KT,BT)):(0,r.kq)("",!0)])]),i.showUpdatePopup?((0,r.wg)(),(0,r.j4)(n,{key:0,onUpdateOrder:o.handleUpdateOrder,visible:i.showUpdatePopup,"onUpdate:visible":e[1]||(e[1]=t=>i.showUpdatePopup=t),order:i.newOrder},null,8,["onUpdateOrder","visible","order"])):(0,r.kq)("",!0)])}const GT={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},JT={class:"tw-px-6 tw-py-4 tw-relative"},XT={class:"tw-absolute tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-text-xs"},tV={class:"tw-bg-purple-500/10 tw-text-purple-500 tw-px-2 tw-rounded-t"},eV={class:"px-6 py-4 tw-flex tw-items-center"},aV={class:"tw-px-6 tw-py-4 tw-relative"},sV={class:"tw-pb-2"},rV={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},iV={key:0},oV={key:1},lV={class:"tw-px-6 tw-py-4"},nV={class:"tw-px-6 tw-py-4"},dV={class:"tw-px-6 tw-py-4"},wV={key:3,class:"tw-px-6 tw-py-4"},cV={class:"tw-max-w-[300px] tw-min-w-[150px] tw-whitespace-normal"},uV={class:"tw-px-6 tw-py-4"},pV={class:"tw-min-w-[300px]"},mV=(0,r._)("p",null,"Edit note",-1);function hV(t,e,a,s,i,o){(0,r.up)("OrderUpsell"),(0,r.up)("OrderConfirmation"),(0,r.up)("OrderAffectation");const l=(0,r.up)("OrderActions"),n=(0,r.up)("popup");return(0,r.wg)(),(0,r.iD)(r.HY,null,[((0,r.wg)(),(0,r.iD)("tr",{key:a.order.id,class:(0,J.C_)([["reporter"==a.order.confirmation&&"tw-relative",o.isReportedToday(a.order)&&"!tw-border tw-border-red-400"],"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"])},[(0,r._)("th",GT,(0,J.zw)(o.id),1),(0,r._)("td",JT,[(0,r._)("p",null,(0,J.zw)(o.fullname),1),(0,r._)("div",XT,[(0,r._)("p",tV," Maybe Double: "+(0,J.zw)(a.order.double),1)])]),(0,r._)("td",eV,[(0,r.Uk)((0,J.zw)(a.order.phone)+" ",1),(0,r.Wm)(X.T,{link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+a.order.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"text",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"green"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])]),(0,r._)("td",aV,[(0,r._)("div",sV,[(0,r._)("ul",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.order.items,(t=>((0,r.wg)(),(0,r.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,r.Uk)(" - "),(0,r._)("span",rV,(0,J.zw)(t.quantity)+" X ",1),(0,r.Uk)((0,J.zw)(t.product.name)+" ",1),t.product_variation.size?((0,r.wg)(),(0,r.iD)("span",iV,"| "+(0,J.zw)(t.product_variation.size),1)):(0,r.kq)("",!0),t.product_variation.color?((0,r.wg)(),(0,r.iD)("span",oV,"| "+(0,J.zw)(t.product_variation.color),1)):(0,r.kq)("",!0)])))),128))])])]),(0,r.kq)("",!0),(0,r.kq)("",!0),(0,r.kq)("",!0),(0,r._)("td",lV,(0,J.zw)(o.getPrice(a.order)),1),(0,r._)("td",nV,(0,J.zw)(a.order.city),1),(0,r._)("td",dV,(0,J.zw)(a.order.adresse),1),a.showNote?((0,r.wg)(),(0,r.iD)("td",wV,[(0,r._)("div",cV,[(0,r.Uk)((0,J.zw)(a.order.note)+" ",1),(0,r.Wm)(et.t,{onClick:o.handleClick,size:"x-small",class:(0,J.C_)(["tw-ml-2 tw-text-blue-500 tw-cursor-pointer hover:tw-bg-neutral-900/10 tw-rounded-full tw-p-3",{"tw-animate-spin":i.isLoading}])},{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(i.isLoading?"mdi-loading":"mdi-pencil"),1)])),_:1},8,["onClick","class"])])])):(0,r.kq)("",!0),(0,r._)("td",uV,[(0,r.Wm)(l,{double:!0,onUpdateOrder:e[0]||(e[0]=e=>t.$emit("update",e)),only:["update"],order:a.order},null,8,["order"])])],2)),(0,r.Wm)(n,{type:"info",title:"Add Note",onResolved:o.handleResolved,loading:i.isLoading,visible:i.showPopup},{default:(0,r.w5)((()=>[(0,r._)("div",pV,[mV,(0,r.Wm)(yp.z,{modelValue:i.newNote,"onUpdate:modelValue":e[1]||(e[1]=t=>i.newNote=t),variant:"outlined",class:"rounded-md",color:"primary-color"},null,8,["modelValue"])])])),_:1},8,["onResolved","loading","visible"])],64)}var gV={props:["order","showNote"],emits:["update"],components:{OrderConfirmation:fA,OrderUpsell:kA,OrderAffectation:AA,OrderActions:qE},data(){return{showPopup:!1,isLoading:!1,newNote:"",newOrder:null,todayDate:null}},computed:{id(){return this.order.id},fullname(){return this.order.fullname},product_name(){return this.order.product_name},agente_id(){return this.order.agente_id},upsell(){return this.order.upsell},phone(){return this.order.phone},city(){return this.order.city},adresse(){return this.order.adresse},quantity(){return this.order.quantity},price(){return this.order.price},confirmation(){return this.order.confirmation},affectation(){return this.order.affectation},delivery(){return this.order.delivery},note(){return this.order.note},created_at(){return this.order?.created_at}},methods:{getPrice(t){return Ki(t)},handleClick(){this.showPopup=!0,this.newNote=this.note},handleResolved(t){t?(this.showPopup=!1,this.isLoading=!0,xa.agenteUpdateNote(this.id,this.newNote).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.$store.dispatch("order/updateNote",{note:this.newNote,id:this.id}))}),this.$handleApiError).finally((()=>this.isLoading=!1))):this.showPopup=!1},isReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date==this.todayDate}},mounted(){this.newOrder=this.order;const t=new Date,e=t.getDate(),a=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),s=t.getMonth()+1,r=s.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();this.todayDate=`${i}-${r}-${a}`}};const fV=(0,d.Z)(gV,[["render",hV]]);var vV=fV,yV={components:{UpdateOrder:u$,NewOrder:vV},data(){return{isOrderExists:!1,isLoaded:!1,isLoading:!1,showUpdatePopup:!1,doubles:[],double:!1,form:{fullname:{valid:!0,message:""},phone:{valid:!0,message:""},city:{valid:!0,message:""},adresse:{valid:!0,message:""},quantity:{valid:!0,message:""},price:{valid:!0,message:""}},newOrder:null,popupOrder:null}},computed:{deliveries(){return this.$store.getters["user/deliveries"]},isFormValid(){return this.form.fullname.valid&&this.form.phone.valid&&this.form.city.valid&&this.form.adresse.valid&&this.form.quantity.valid&&this.form.price.valid},cities(){return this.$store.getters["city/cities"]}},methods:{updateConfirmation(t){this.newOrder.confirmation=t},getPrice(t){return Ki(t)},updateUpsell(t){this.newOrder.upsell=t,this.popupOrder.upsell=t},handleCancel(){this.showUpdatePopup=!1,this.popupOrder={...this.newOrder}},handleUpdateOrder(t){this.newOrder={...t}},validateForm(){this.form.fullname=Ct(this.popupOrder.fullname,"Client"),this.form.phone=Ct(this.popupOrder.phone,"Phone"),this.form.city=Ct(this.popupOrder.city,"City"),this.form.adresse=Ct(this.popupOrder.adresse,"Address"),this.form.quantity=Ct(this.popupOrder.quantity,"Quantity"),this.form.price=Ct(this.popupOrder.price,"Price")},handleDoubleUpdate(t){console.log("order updated: ",t),this.doubles=this.doubles.map((e=>e.id==t.id?t:e))},clearOrder(){return this.newOrder.confirmation?this.double&&this.doubles.some((t=>t.id!=this.newOrder.id&&!t.confirmation))?(this.$alert({type:"warning",title:"Double order confirmation not changed"}),!1):(this.isOrderExists=!1,this.$alert({type:"success",title:"Order Saved Successfully !"}),void this.$store.dispatch("order/addOrder",this.newOrder)):(this.$alert({type:"warning",title:"Order confirmation not changed"}),!1)},updateOrder(){if(this.validateForm(),!this.isFormValid)return!1;this.isLoading=!0,this.newOrder={...this.popupOrder},xa.update(this.newOrder.id,this.newOrder).then((t=>{"SUCCESS"==t.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"Order updated"}),this.$store.dispatch("order/setOrder",this.newOrder))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},addOrder(){this.isLoaded=!1,xa.agenteAddOrder().then((t=>{if("ORDER_NOT_CONFIRMED"===t.data.code&&this.$alert({type:"warning",title:"Order was not confirmed"}),"SUCCESS"===t.data.code&&(console.log("order exists..."),t.data.data?.orders)){const e=t.data.data.orders;this.newOrder=e,this.popupOrder={...e},this.$store.dispatch("order/setOrder",this.order),this.isLoaded=!0,1==t.data.data.double?(this.doubles=t.data.data.double_orders,this.double=!0):(this.doubles=[],this.double=!1),this.isOrderExists=!0}"NO_ORDERS"==t.data.code&&(this.isOrderExists=!1)})).catch(this.$handleApiError).finally((()=>{this.isLoaded=!0}))},getOrder(){xa.agenteGetOrder().then((t=>{if("SUCCESS"===t.data.code){const e=t.data.data.orders[0];this.newOrder=e,this.popupOrder={...e},this.$store.dispatch("order/setOrder",this.order),1==t.data.data.double?(this.doubles=t.data.data.double_orders,this.double=!0):(this.doubles=[],this.double=!1),this.isLoaded=!0,this.isOrderExists=!0}"NO_ORDER"===t.data.code&&(this.isLoaded=!0)}),(t=>{this.$handleApiError(t),this.isLoaded=!0}))},getDeliveries(){Q.deliveries().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)}},async mounted(){this.getOrder(),0==this.deliveries.length&&this.getDeliveries()}};const _V=(0,d.Z)(yV,[["render",QT]]);var xV=_V;const bV={class:"mb-5 tw-flex tw-justify-between tw-items-center"},kV=(0,r._)("div",null,[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Confirmed Orders"),(0,r._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"See your confirmed orders")],-1),CV={key:0},DV=(0,r._)("span",{class:"text-white"}," Add Sale ",-1),SV={key:0},zV={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},UV={class:"mb-5 tw-flex"},LV={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},PV={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},AV={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},WV=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Sort By",-1),$V={class:"tw-relative"},EV=["value"],OV={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},TV=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Order By",-1),VV={class:"tw-relative"},qV=["value"],RV={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},IV=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Upsell",-1),FV={class:"tw-relative"},jV=(0,r._)("option",{value:"all"},"Select",-1),NV=(0,r._)("option",{value:"oui"},"Oui",-1),MV=(0,r._)("option",{value:"non"},"Non",-1),HV=[jV,NV,MV],YV={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},KV=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Confirmation",-1),ZV={class:"tw-relative"},BV=["value"],QV={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},GV=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Affect",-1),JV={class:"tw-relative"},XV=(0,r._)("option",{value:"all"},"Select",-1),tq=["value"],eq={key:0},aq={key:1,class:""},sq=(0,r._)("p",{class:"tw-text-neutral-400 tw-py-5"},"Your order's list is empty !",-1),rq=[sq];function iq(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation"),d=(0,r.up)("OrdersTable"),w=(0,r.up)("AddNewOrder");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",bV,[kV,o.isLoaded?((0,r.wg)(),(0,r.iD)("div",CV,[(0,r.Wm)(X.T,{color:"primary-color",onClick:e[0]||(e[0]=t=>o.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{icon:"mdi-plus",class:"mr-2 text-white"}),DV])),_:1})])):(0,r.kq)("",!0)]),o.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",SV,[(0,r.Wm)(n)])),o.isLoaded?((0,r.wg)(),(0,r.iD)("div",zV,[(0,r._)("div",UV,[(0,r.Wm)(X.T,{onClick:e[1]||(e[1]=t=>o.showFilters=!o.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white",size:"xx-large"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,r._)("div",LV,[(0,r.Wm)(Qt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[s.nr,o.search]])])]),(0,r._)("div",{class:(0,J.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":o.showFilters}])},[(0,r._)("div",PV,[(0,r._)("div",AV,[WV,(0,r._)("div",$V,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.sorting.sortBy=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.sorting.fields,(t=>((0,r.wg)(),(0,r.iD)("option",{key:t.value,value:t.value},(0,J.zw)(t.name),9,EV)))),128))],512),[[s.bM,o.sorting.sortBy]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])]),(0,r._)("div",OV,[TV,(0,r._)("div",VV,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.sorting.orderBy=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.sorting.options,(t=>((0,r.wg)(),(0,r.iD)("option",{key:t.value,value:t.value},(0,J.zw)(t.name),9,qV)))),128))],512),[[s.bM,o.sorting.orderBy]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])]),(0,r._)("div",RV,[IV,(0,r._)("div",FV,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>o.upsellFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},HV,512),[[s.bM,o.upsellFilter]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])]),(0,r._)("div",YV,[KV,(0,r._)("div",ZV,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>o.confirmationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.confirmations,(t=>((0,r.wg)(),(0,r.iD)("option",{key:t.id,value:t.value?t.value:"all"},(0,J.zw)(t.name),9,BV)))),128))],512),[[s.bM,o.confirmationFilter]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])]),(0,r._)("div",QV,[GV,(0,r._)("div",JV,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>o.affectationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[XV,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.deliveries,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.firstname)+" "+(0,J.zw)(t.lastname),9,tq)))),128))],512),[[s.bM,o.affectationFilter]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])])])],2),l.confirmedOrders.length>0?((0,r.wg)(),(0,r.iD)("div",eq,[(0,r.Wm)(d,{note:!0,orders:l.filteredOrders},null,8,["orders"])])):((0,r.wg)(),(0,r.iD)("div",aq,rq))])):(0,r.kq)("",!0),(0,r.Wm)(w,{onCancel:e[8]||(e[8]=t=>o.showPopup=!1),visible:o.showPopup,"onUpdate:visible":e[9]||(e[9]=t=>o.showPopup=t)},null,8,["visible"])])}var oq={components:{OrdersTable:ME,AddNewOrder:vT},data(){return{localUrl:F,confirmations:On,isLoaded:!1,showFilters:!1,confirmationFilter:"all",affectationFilter:"all",upsellFilter:"all",search:"",showPopup:!1,sorting:{sortBy:null,orderBy:"asc",fields:[{name:"Select",value:null},{name:"ID",value:"id"},{name:"Created At",value:"created_at"}],options:[{name:"Ascending",value:"asc"},{name:"Descending",value:"desc"}]}}},computed:{confirmedOrders(){return this.$store.getters["order/orders"]},sortedOrders(){const t=this.confirmedOrders;return t.sort(((t,e)=>{switch(this.sorting.sortBy){case"created_at":return"asc"==this.sorting.orderBy?new Date(t.created_at)-new Date(e.created_at):new Date(e.created_at)-new Date(t.created_at);case"id":return"asc"==this.sorting.orderBy?t.id-e.id:e.id-t.id;default:return!0}}))},deliveries(){return this.$store.getters["user/deliveries"]},filteredOrders(){const t=this.confirmationFilter,e=this.affectationFilter,a=this.upsellFilter;return this.sortedOrders.filter((s=>{if("all"!==t&&s.confirmation!==t)return!1;if("all"!==e&&parseInt(s.affectation)!==parseInt(e))return!1;if("all"!==a&&s.upsell!==a)return!1;const r=((t,e)=>{for(const a in t)if(!["created_at","updated_at","sheets_id","reported_agente_note","reported_agente_note","reported_agente_date","reported_delivery_note","reported_delivery_date"].includes(a)&&String(t[a]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(s,this.search);return!!r}))}},methods:{getOrders(){xa.agenteConfirmedOrders().then((t=>{if("SUCCESS"==t?.data.code)if("No Order Confirmed Yet !"==t?.data.data)this.orders=[],this.isLoaded=!0;else{const e=t.data.data.orders;this.$store.dispatch("order/setOrders",e),this.isLoaded=!0}})).catch(this.$handleApiError)},async getDeliveries(){await Q.deliveries().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)}},mounted(){this.$store.dispatch("order/setOrders",[]),this.getDeliveries(),this.getOrders()}};const lq=(0,d.Z)(oq,[["render",iq]]);var nq=lq;const dq={class:"py-5 px-2 tw-border tw-bg-white tw-w-full tw-rounded-md tw-mb-5"},wq={class:"tw-px-3"},cq={class:"tw-flex tw-items-center tw-justify-between tw-flex-wrap"},uq={class:"tw-flex tw-items-center tw-gap-x-3"},pq=(0,r._)("h2",{class:"tw-text-lg tw-font-medium tw-text-gray-800 darkx:tw-text-white"},"Orders",-1),mq={class:"tw-px-3 tw-py-1 tw-text-xs tw-text-emerald-600 tw-bg-emerald-100 tw-rounded-full darkx:tw-bg-gray-800 darkx:tw-text-orange-400"},hq=(0,r._)("p",{class:"tw-mt-1 tw-text-sm tw-text-gray-500 darkx:tw-text-gray-300"},"Show all orders.",-1);function gq(t,e,a,s,i,o){const l=(0,r.up)("IndexFilters"),n=(0,r.up)("IndexTable");return(0,r.wg)(),(0,r.iD)("div",dq,[(0,r._)("section",wq,[(0,r._)("div",cq,[(0,r._)("div",null,[(0,r._)("div",uq,[pq,(0,r._)("span",mq,(0,J.zw)(i.totalOrders)+" order",1)]),hq]),(0,r.kq)("",!0)]),(0,r.Wm)(l,{search:i.search,"onUpdate:search":e[0]||(e[0]=t=>i.search=t),filters:i.filters,"onUpdate:filters":e[1]||(e[1]=t=>i.filters=t),onFilter:e[2]||(e[2]=t=>o.handlePerPageChange(i.per_page)),onPerPageChange:o.handlePerPageChange,onFresh:o.paginateOrders,loading:i.fetching,statistics:i.statistics,"active-statistics":""},null,8,["search","filters","onPerPageChange","onFresh","loading","statistics"]),(0,r._)("div",null,[(0,r.Wm)(n,{onUpdate:o.handleItemUpdate,onPageChange:o.handlePageChange,onSortOrder:o.handleSortOrderChange,loading:i.fetching,from:i.from,to:i.to,"last-page":i.last_page,"per-page":i.per_page,total:i.total,"current-page":i.current_page,items:i.items},null,8,["onUpdate","onPageChange","onSortOrder","loading","from","to","last-page","per-page","total","current-page","items"])])])])}const fq={class:"tw-flex tw-flex-col"},vq={class:"tw-overflow-x-auto"},yq={class:"tw-inline-block tw-min-w-full tw-align-middle"},_q={class:"tw-overflow-hidden tw-border tw-border-gray-200 darkx:tw-border-gray-700 md:tw-rounded-lg"},xq={class:"tw-min-w-full tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700"},bq={class:"tw-bg-gray-50 darkx:tw-bg-gray-800"},kq=(0,r._)("th",{scope:"col",class:"tw-py-3.5 tw-px-4 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"},[(0,r._)("span",null,"ID")],-1),Cq={scope:"col",class:"tw-py-3.5 tw-px-4 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"},Dq=(0,r._)("span",null,"Created",-1),Sq=(0,r._)("svg",{class:"tw-h-3",viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,r._)("path",{d:"M2.13347 0.0999756H2.98516L5.01902 4.79058H3.86226L3.45549 3.79907H1.63772L1.24366 4.79058H0.0996094L2.13347 0.0999756ZM2.54025 1.46012L1.96822 2.92196H3.11227L2.54025 1.46012Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,r._)("path",{d:"M0.722656 9.60832L3.09974 6.78633H0.811638V5.87109H4.35819V6.78633L2.01925 9.60832H4.43446V10.5617H0.722656V9.60832Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,r._)("path",{d:"M8.45558 7.25664V7.40664H8.60558H9.66065C9.72481 7.40664 9.74667 7.42274 9.75141 7.42691C9.75148 7.42808 9.75146 7.42993 9.75116 7.43262C9.75001 7.44265 9.74458 7.46304 9.72525 7.49314C9.72522 7.4932 9.72518 7.49326 9.72514 7.49332L7.86959 10.3529L7.86924 10.3534C7.83227 10.4109 7.79863 10.418 7.78568 10.418C7.77272 10.418 7.73908 10.4109 7.70211 10.3534L7.70177 10.3529L5.84621 7.49332C5.84617 7.49325 5.84612 7.49318 5.84608 7.49311C5.82677 7.46302 5.82135 7.44264 5.8202 7.43262C5.81989 7.42993 5.81987 7.42808 5.81994 7.42691C5.82469 7.42274 5.84655 7.40664 5.91071 7.40664H6.96578H7.11578V7.25664V0.633865C7.11578 0.42434 7.29014 0.249976 7.49967 0.249976H8.07169C8.28121 0.249976 8.45558 0.42434 8.45558 0.633865V7.25664Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.3"})],-1),zq=[Dq,Sq],Uq=(0,r._)("th",{scope:"col",class:"tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Client ",-1),Lq=(0,r._)("th",{scope:"col",class:"tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Phone ",-1),Pq=(0,r._)("th",{scope:"col",class:"tw-w-10 tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Confirmation ",-1),Aq=(0,r._)("th",{scope:"col",class:"tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Affected ",-1),Wq=(0,r._)("th",{scope:"col",class:"tw-w-10 tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Delivery ",-1),$q=(0,r._)("th",{scope:"col",class:"tw-relative tw-py-3.5 tw-px-4"},[(0,r._)("span",{class:"tw-sr-only"},"Actions")],-1),Eq={key:0,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},Oq={key:1,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},Tq=(0,r._)("tr",null,[(0,r._)("td",{colspan:"8"},[(0,r._)("div",{class:"tw-p-5 tw-text-center tw-text-gray-600 tw-font-medium"}," No Order was found ! ")])],-1),Vq=[Tq],qq={key:2,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},Rq={colspan:"8"},Iq={role:"status",class:"tw-w-full tw-p-4 tw-space-y-4 tw-border-gray-200 tw-divide-y tw-divide-gray-200 tw-rounded tw-shadow tw-animate-pulse dark:tw-divide-gray-700 md:tw-p-6 dark:tw-border-gray-700"},Fq=(0,r._)("div",{class:"tw-flex tw-items-center tw-justify-between"},[(0,r._)("div",null,[(0,r._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-600 tw-w-24 tw-mb-2.5"}),(0,r._)("div",{class:"tw-w-32 tw-h-2 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-700"})]),(0,r._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-700 tw-w-12"})],-1),jq=(0,r._)("div",null,[(0,r._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-600 tw-w-24 tw-mb-2.5"}),(0,r._)("div",{class:"tw-w-32 tw-h-2 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-700"})],-1),Nq=(0,r._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-700 tw-w-12"},null,-1),Mq=[jq,Nq],Hq={class:"tw-mt-6"};function Yq(t,e,a,s,i,o){const l=(0,r.up)("TableRow"),n=((0,r.up)("loading"),(0,r.up)("TablePaginationNoNums"));return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",fq,[(0,r._)("div",vq,[(0,r._)("div",yq,[(0,r._)("div",_q,[(0,r._)("table",xq,[(0,r._)("thead",bq,[(0,r._)("tr",null,[kq,(0,r._)("th",Cq,[(0,r._)("button",{onClick:e[0]||(e[0]=e=>t.$emit("sortOrder",{name:"created_at"})),class:"tw-flex tw-items-center tw-gap-x-3 focus:tw-outline-none"},zq)]),Uq,Lq,Pq,Aq,Wq,$q])]),!a.loading&&a.items.length>0?((0,r.wg)(),(0,r.iD)("tbody",Eq,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.items,(a=>((0,r.wg)(),(0,r.j4)(l,{onUpdate:e[1]||(e[1]=e=>t.$emit("update",e)),key:a.id,item:a},null,8,["item"])))),128))])):(0,r.kq)("",!0),a.loading||0!=a.items.length?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("tbody",Oq,Vq)),a.loading?((0,r.wg)(),(0,r.iD)("tbody",qq,[(0,r._)("tr",null,[(0,r.kq)("",!0),(0,r._)("td",Rq,[(0,r._)("div",Iq,[Fq,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.perPage-1,(t=>((0,r.wg)(),(0,r.iD)("div",{key:t,class:"tw-flex tw-items-center tw-justify-between tw-pt-4"},Mq)))),128))])])])])):(0,r.kq)("",!0)])])])])]),(0,r._)("div",Hq,[(0,r.Wm)(n,{from:a.from,to:a.to,"last-page":a.lastPage,"per-page":a.perPage,total:a.total,"current-page":a.currentPage,onPageChange:e[2]||(e[2]=e=>t.$emit("pageChange",e))},null,8,["from","to","last-page","per-page","total","current-page"])])])}const Kq={class:"sm:tw-flex sm:tw-items-center sm:tw-justify-between"},Zq={class:"tw-text-sm tw-text-gray-500 darkx:tw-text-gray-400"},Bq={class:"tw-font-medium tw-text-gray-700 darkx:tw-text-gray-100"},Qq={class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-4 sm:tw-mt-0"},Gq=["disabled"],Jq=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5 rtl:tw--scale-x-100"},[(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18"})],-1),Xq=(0,r._)("span",null," previous ",-1),tR=[Jq,Xq],eR=["disabled"],aR=(0,r._)("span",null," Next ",-1),sR=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5 rtl:tw--scale-x-100"},[(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"})],-1),rR=[aR,sR];function iR(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",Kq,[(0,r._)("div",Zq,[(0,r.Uk)(" Page "),(0,r._)("span",Bq,(0,J.zw)(a.currentPage)+" of "+(0,J.zw)(a.lastPage),1)]),(0,r._)("div",Qq,[(0,r._)("button",{disabled:a.currentPage<=1,onClick:e[0]||(e[0]=t=>o.changePage(a.currentPage-1)),class:(0,J.C_)([[a.currentPage<=1&&"tw-cursor-not-allowed"],"tw-flex tw-items-center tw-justify-center tw-w-1/2 tw-px-5 tw-py-2 tw-text-sm tw-text-gray-700 tw-capitalize tw-transition-colors tw-duration-200 tw-bg-white tw-border tw-border-solid tw-rounded-md sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-100 darkx:tw-bg-gray-900 darkx:tw-text-gray-200 darkx:tw-border-gray-700 darkx:hover:tw-bg-gray-800"])},tR,10,Gq),(0,r._)("button",{disabled:a.currentPage>=o.totalPages,onClick:e[1]||(e[1]=t=>o.changePage(a.currentPage+1)),class:(0,J.C_)([[a.currentPage>=o.totalPages&&"tw-cursor-not-allowed"],"tw-flex tw-items-center tw-justify-center tw-w-1/2 tw-px-5 tw-py-2 tw-text-sm tw-text-gray-700 tw-capitalize tw-transition-colors tw-duration-200 tw-bg-white tw-border tw-border-solid tw-rounded-md sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-100 darkx:tw-bg-gray-900 darkx:tw-text-gray-200 darkx:tw-border-gray-700 darkx:hover:tw-bg-gray-800"])},rR,10,eR)])])])}var oR={props:{from:{type:Number,default:1},to:{type:Number,default:1},perPage:{type:Number,default:1},total:{type:Number,default:1},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1}},data(){return{totalItems:100,itemsPerPage:5}},computed:{totalPages(){return this.lastPage},showEllipsisStart(){return this.currentPage>3},showEllipsisEnd(){return this.currentPage<this.totalPages-2},visiblePages(){let t=Math.max(1,this.currentPage-1),e=Math.min(this.totalPages,this.currentPage+1);const a=[];for(let s=t;s<=e;s++)a.push(s);return a}},methods:{changePage(t){this.$emit("pageChange",t)}}};const lR=(0,d.Z)(oR,[["render",iR]]);var nR=lR;const dR={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},wR={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white"},cR={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},uR={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-flex tw-items-center tw-gap-2"},pR={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},mR={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-font-[cairo]"},hR={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},gR={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-font-[cairo]"},fR={class:"tw-px-12 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},vR={class:"tw-px-12 tw-py-2 tw-text-sm tw-whitespace-nowrap"},yR=(0,r._)("div",{class:"tw-w-1.5 tw-h-1.5 tw-rounded-full tw-bg-emerald-500"},null,-1),_R={key:1},xR={class:"tw-px-12 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},bR={class:"tw-px-4 tw-py-2 tw-text-sm tw-whitespace-nowrap"};function kR(t,e,a,s,i,o){const l=(0,r.up)("TableActions");return(0,r.wg)(),(0,r.iD)("tr",null,[(0,r._)("td",dR,[(0,r._)("div",null,[(0,r._)("h2",wR,(0,J.zw)(a.item.id),1)])]),(0,r._)("td",cR,[(0,r._)("div",null,[(0,r._)("h2",uR,[(0,r._)("p",null,(0,J.zw)(i.moment(a.item.created_at).format("DD[/]MM[/]YY")),1),(0,r.kq)("",!0)])])]),(0,r._)("td",pR,[(0,r._)("div",null,[(0,r._)("h2",mR,(0,J.zw)(a.item.fullname),1)])]),(0,r._)("td",hR,[(0,r._)("div",null,[(0,r._)("h2",gR,(0,J.zw)(a.item.phone),1)])]),(0,r._)("td",fR,[(0,r._)("span",{class:(0,J.C_)([[o.confirmation.bgLight,o.confirmation.textLight],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},(0,J.zw)(o.confirmation.name),3)]),(0,r._)("td",vR,[a.item.delivery_fullname?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,J.C_)([["tw-text-emerald-800","tw-bg-emerald-100"],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-pl-1.5 tw-py-0.5 tw-rounded tw-w-fit tw-flex tw-items-center tw-gap-2"])},[yR,(0,r._)("span",null,(0,J.zw)(a.item.delivery_fullname),1)])):((0,r.wg)(),(0,r.iD)("div",_R,[(0,r._)("span",{class:(0,J.C_)([["tw-text-gray-800","tw-bg-gray-100"],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},"No Delivery")]))]),(0,r._)("td",xR,[(0,r._)("span",{class:(0,J.C_)([[o.deliveryState.bgLight,o.deliveryState.textLight],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},(0,J.zw)(o.deliveryState.value?o.deliveryState.name:"Not Selected"),3)]),(0,r._)("td",bR,[(0,r._)("div",null,[(0,r.Wm)(l,{onUpdate:e[0]||(e[0]=e=>t.$emit("update",e)),item:a.item},null,8,["item"])])])])}var CR=a(6797),DR=a.n(CR);const SR={class:"tw-h-full"},zR={class:"tw-flex tw-items-center tw-gap-2"},UR={class:"tw-px-2 tw-py-1 tw-w-[25px] tw-h-[25px] tw-border tw-border-solid tw-border-green-500/20 hover:tw-bg-green-500/10 hover:tw-border-green-500/70 tw-duration-300 tw-text-green-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},LR={key:0};function PR(t,e,a,s,i,o){const l=(0,r.up)("UpdatePopup");return(0,r.wg)(),(0,r.iD)("div",SR,[(0,r._)("div",zR,[(0,r._)("button",UR,[(0,r.Wm)(et.t,{size:"x-small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-whatsapp")])),_:1})]),(0,r._)("button",{onClick:e[0]||(e[0]=t=>i.popup=!0),class:"tw-px-2 tw-py-1 tw-w-[25px] tw-h-[25px] tw-border tw-border-solid tw-border-orange-500/20 hover:tw-bg-orange-500/10 hover:tw-border-orange-500/70 tw-duration-300 tw-text-orange-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,r.Wm)(et.t,{size:"x-small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-pencil-outline")])),_:1})])]),i.popup?((0,r.wg)(),(0,r.iD)("div",LR,[(0,r.Wm)(l,{onUpdate:e[1]||(e[1]=e=>t.$emit("update",e)),visible:i.popup,"onUpdate:visible":e[2]||(e[2]=t=>i.popup=t),item:a.item},null,8,["visible","item"])])):(0,r.kq)("",!0)])}const AR={class:"tw-mx-auto tw-w-[95%] md:tw-max-w-[800px] tw-overflow-hidden tw-h-fit dark:tw-bg-neutral-900 tw-bg-white tw-border tw-border-solid dark:tw-border-neutral-700 tw-border-neutral-300 tw-shadow-md tw-my-5 tw-rounded-lg"},WR=(0,r._)("div",{class:"tw-p-4 tw-text-lg tw-border-b tw-border-solid tw-font-medium tw-flex dark:tw-text-neutral-400 tw-text-neutral-500 tw-items-center tw-gap-4 dark:tw-bg-neutral-800 tw-bg-gray-50"}," Order Informations ",-1),$R={class:"tw-bg-white tw-p-4"},ER={class:"tw-grid tw-gap-6 tw-gap-y-5 tw-grid-cols-1 md:tw-grid-cols-2"},OR={class:"tw-col-span-2 md:tw-col-span-1"},TR=(0,r._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Client Name",-1),VR={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},qR={class:"tw-col-span-2 md:tw-col-span-1"},RR=(0,r._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Phone Number",-1),IR={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},FR={class:"tw-col-span-2 md:tw-col-span-1"},jR=(0,r._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"City",-1),NR={class:"tw-relative"},MR=(0,r._)("option",{value:null,disabled:""},"Choose a City",-1),HR=["value"],YR=["value"],KR=(0,r._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,r._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,r._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),ZR={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},BR={class:"tw-col-span-2 md:tw-col-span-1"},QR=(0,r._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Address",-1),GR={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},JR={class:"tw-col-span-2"},XR=(0,r._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),tI={class:"tw-relative"},eI=["value"],aI=(0,r._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,r._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,r._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),sI={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},rI={key:0,class:"md:tw-col-span-1 tw-col-span-2"},iI=(0,r._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Date",-1),oI={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},lI={key:1,class:"md:tw-col-span-1 tw-col-span-2"},nI=(0,r._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Note",-1),dI={class:"tw-col-span-2"},wI=(0,r._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Note",-1),cI={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},uI={class:"md:tw-col-span-1 tw-col-span-2"},pI={class:"md:tw-col-span-1 tw-col-span-2"},mI=(0,r._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Upsell",-1),hI={class:"tw-relative"},gI=["value"],fI=(0,r._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,r._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,r._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),vI={class:"tw-col-span-2"},yI={class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},_I={key:0,class:"tw-text-red-400 tw-text-xs"},xI={class:"tw-flex tw-justify-end tw-items-center tw-p-4 tw-gap-3 dark:tw-bg-neutral-900 tw-bg-gray-50 tw-border-t tw-border-solid"},bI=["disabled"],kI=(0,r._)("span",null,"Update",-1);function CI(t,e,a,i,o,l){const n=(0,r.up)("OrderAffectation"),d=(0,r.up)("OrderItems"),w=(0,r.up)("popup-new");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(w,{visible:a.visible,closeable:!1,onCancel:l.cancel},{default:(0,r.w5)((()=>[(0,r._)("div",AR,[WR,(0,r._)("div",$R,[(0,r._)("div",ER,[(0,r._)("div",OR,[TR,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.itemCopy.fullname=t),onInput:e[1]||(e[1]=t=>o.errors.fullname=null),type:"text",class:(0,J.C_)([[o.errors.fullname&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),placeholder:"John",required:""},null,34),[[s.nr,o.itemCopy.fullname]]),o.errors.fullname?((0,r.wg)(),(0,r.iD)("label",VR,(0,J.zw)(o.errors.fullname),1)):(0,r.kq)("",!0)]),(0,r._)("div",qR,[RR,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.itemCopy.phone=t),onInput:e[3]||(e[3]=t=>o.errors.phone=null),class:(0,J.C_)([[o.errors.phone&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"123-45-678",required:""},null,34),[[s.nr,o.itemCopy.phone]]),o.errors.phone?((0,r.wg)(),(0,r.iD)("label",IR,(0,J.zw)(o.errors.phone),1)):(0,r.kq)("",!0)]),(0,r._)("div",FR,[jR,(0,r._)("div",NR,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.itemCopy.city=t),onChange:e[5]||(e[5]=t=>o.errors.city=null),class:(0,J.C_)([[o.errors.city&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 tw-pr-7"])},[MR,(0,r._)("option",{value:o.itemCopy.city,disabled:""},(0,J.zw)(o.itemCopy.city),9,HR),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.cities,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.name,key:t.id},(0,J.zw)(t.name),9,YR)))),128))],34),[[s.bM,o.itemCopy.city]]),KR]),o.errors.city?((0,r.wg)(),(0,r.iD)("label",ZR,(0,J.zw)(o.errors.city),1)):(0,r.kq)("",!0)]),(0,r._)("div",BR,[QR,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>o.itemCopy.adresse=t),onInput:e[7]||(e[7]=t=>o.errors.adresse=null),class:(0,J.C_)([[o.errors.adresse&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"Address",required:""},null,34),[[s.nr,o.itemCopy.adresse]]),o.errors.adresse?((0,r.wg)(),(0,r.iD)("label",GR,(0,J.zw)(o.errors.adresse),1)):(0,r.kq)("",!0)]),(0,r._)("div",JR,[XR,(0,r._)("div",tI,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>o.itemCopy.confirmation=t),onChange:e[9]||(e[9]=t=>o.errors.confirmation=null),class:(0,J.C_)([[o.errors.confirmation&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.confirmations,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.value,class:(0,J.C_)([t.text,!t.value&&"!tw-text-green-500"]),key:t.id},(0,J.zw)(t.name),11,eI)))),128))],34),[[s.bM,o.itemCopy.confirmation]]),aI]),o.errors.confirmation?((0,r.wg)(),(0,r.iD)("label",sI,(0,J.zw)(o.errors.confirmation),1)):(0,r.kq)("",!0)]),"reporter"==o.itemCopy.confirmation?((0,r.wg)(),(0,r.iD)("div",rI,[iI,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>o.itemCopy.reported_agente_date=t),onInput:e[11]||(e[11]=t=>o.errors.reported_agente_date=null),class:(0,J.C_)([[o.errors.reported_agente_date&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"date",required:""},null,34),[[s.nr,o.itemCopy.reported_agente_date]]),o.errors.reported_agente_date?((0,r.wg)(),(0,r.iD)("label",oI,(0,J.zw)(o.errors.reported_agente_date),1)):(0,r.kq)("",!0)])):(0,r.kq)("",!0),"reporter"==o.itemCopy.confirmation?((0,r.wg)(),(0,r.iD)("div",lI,[nI,(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":e[12]||(e[12]=t=>o.itemCopy.reported_agente_note=t),rows:"1",class:"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500",placeholder:"Enter a note"},null,512),[[s.nr,o.itemCopy.reported_agente_note]])])):(0,r.kq)("",!0),(0,r._)("div",dI,[wI,(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":e[13]||(e[13]=t=>o.itemCopy.note=t),onInput:e[14]||(e[14]=t=>o.errors.note=null),class:(0,J.C_)([[o.errors.note&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),rows:"3",placeholder:"Enter a note"},null,34),[[s.nr,o.itemCopy.note]]),o.errors.note?((0,r.wg)(),(0,r.iD)("label",cI,(0,J.zw)(o.errors.note),1)):(0,r.kq)("",!0)]),(0,r._)("div",uI,[(0,r.Wm)(n,{item:o.itemCopy,error:o.errors.affectation,"onUpdate:error":e[15]||(e[15]=t=>o.errors.affectation=t),affectation:o.itemCopy.affectation,"onUpdate:affectation":e[16]||(e[16]=t=>o.itemCopy.affectation=t)},null,8,["item","error","affectation"])]),(0,r._)("div",pI,[mI,(0,r._)("div",hI,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[17]||(e[17]=t=>o.itemCopy.upsell=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.upsells,(t=>((0,r.wg)(),(0,r.iD)("option",{class:(0,J.C_)([t.text]),value:t.value,key:t.id},(0,J.zw)(t.name),11,gI)))),128))],512),[[s.bM,o.itemCopy.upsell]]),fI])]),(0,r._)("div",vI,[(0,r._)("label",yI,[(0,r.Uk)("Order Items "),o.errors.items?((0,r.wg)(),(0,r.iD)("span",_I," # "+(0,J.zw)(o.errors.items),1)):(0,r.kq)("",!0)]),(0,r._)("div",null,[(0,r.Wm)(d,{order:o.itemCopy,error:o.errors.items,products:o.products,"products-fetched":o.products_fetched,items:o.itemCopy.items,"onUpdate:items":e[18]||(e[18]=t=>o.itemCopy.items=t)},null,8,["order","error","products","products-fetched","items"])])])])]),(0,r._)("div",xI,[(0,r._)("button",{onClick:e[19]||(e[19]=(...t)=>l.cancel&&l.cancel(...t)),class:"tw-py-2 tw-px-7 tw-rounded tw-text-sm tw-border tw-border-solid tw-border-tansparent dark:tw-border-neutral-900 hover:tw-border-neutral-400 dark:hover:tw-border-neutral-500 hover:tw-bg-gray-300 tw-bg-gray-200 dark:tw-bg-neutral-600 tw-duration-300 tw-text-neutral-900 dark:tw-text-neutral-300"}," Cancel "),(0,r._)("button",{onClick:e[20]||(e[20]=(...t)=>l.handleUpdate&&l.handleUpdate(...t)),disabled:o.isLoading,class:"tw-py-2 tw-px-7 tw-flex tw-items-center tw-rounded tw-text-sm tw-bg-orange-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-orange-600 dark:tw-border-neutral-900 dark:hover:tw-border-orange-500 hover:tw-bg-orange-500/80 dark:hover:tw-bg-orange-400 tw-duration-300 tw-text-white"},[(0,r.Wm)(et.t,{size:"small",class:(0,J.C_)(["tw-duration-300 tw-animate-spin tw-overflow-hidden tw-max-w-0 tw-mr-0",[o.isLoading&&"!tw-max-w-[50px] !tw-mr-3"]])},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-loading")])),_:1},8,["class"]),kI],8,bI)])])])),_:1},8,["visible","onCancel"])])}const DI=(t,e)=>e.fullname?e.phone?e.adresse?e.note||"annuler"!=e.confirmation?e.affectation&&"confirmer"!=e.confirmation?(t.errors.affectation="Cannot update affectation: Order not confirmed.",!1):!!SI(t,e.items):(t.errors.note="Add Cancelation note !",!1):(t.errors.adresse="Address is required",!1):(t.errors.phone="Phone Number is required",!1):(t.errors.fullname="Client Name is required",!1),SI=(t,e)=>{if(!e.length)return t.errors.items="You should add one order item at least.",!1;let a=!0;return e.forEach((e=>0==e.product_id?(t.errors.items="Product is required for order item",a=!1,!1):0==e.product_variation_id?(t.errors.items="Select a product variation",a=!1,!1):0==e.quantity?(t.errors.items="Items quantity cannot be 0",a=!1,!1):void 0)),a},zI=(t,e)=>{t.$alert({title:"Updated Successfully",type:"success"});const a=e.data.order;t.$emit("update",a),t.isLoading=!1,t.cancel(),t.errors={}},UI=(t,e)=>{t.$alert({title:e.message,type:"error"}),"VALIDATION_ERROR"==e.code&&(t.errors=e.errors),t.isLoading=!1},LI=(t,e)=>{t.isLoading=!0,t.errors={},Oo.update(e.id,e).then((e=>zI(t,e.data))).catch((e=>UI(t,e.response.data))).finally((()=>t.isLoading=!1))},PI={key:0,class:"tw-col-span-12 tw-rounded-lg tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},AI={key:1,class:"md:tw-col-span-12 tw-col-span-12"},WI={class:"tw-max-w-full tw-overflow-auto"},$I={class:"tw-text-xs tw-text-gray-700 tw-uppercase !tw-rounded-t-lg tw-border tw-border-solid"},EI={class:"tw-bg-gray-50"},OI={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},TI={key:0},VI=(0,r._)("td",{colspan:"3"},null,-1),qI=(0,r._)("td",null,[(0,r._)("div",{class:"tw-p-2"},[(0,r._)("p",null,"Total: ")])],-1),RI={colspan:"2",class:"tw-p-2"},II={class:"tw-p-2 tw-py-1 tw-text-sm tw-text-green-500 tw-w-24 tw-font-medium tw-block focus:tw-outline-none tw-shadow-sm tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},FI={colspan:"6"},jI={class:"tw-flex tw-justify-end tw-items-center tw-py-3"},NI=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),MI=(0,r._)("span",null,"Add Item",-1),HI=[NI,MI],YI={key:1},KI={colspan:"6"},ZI={class:"tw-scale-75 tw-p-5"};function BI(t,e,a,s,i,o){const l=(0,r.up)("ItemRow"),n=(0,r.up)("loading");return(0,r.wg)(),(0,r.iD)("div",null,[a.items.length?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",PI," No Order items ")),a.items.length?((0,r.wg)(),(0,r.iD)("div",AI,[(0,r._)("div",WI,[((0,r.wg)(),(0,r.iD)("table",{key:a.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,r._)("thead",$I,[(0,r._)("tr",EI,[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,r._)("th",{class:(0,J.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,r._)("div",OI,(0,J.zw)(t),1)],2))),64))])]),a.productsFetched?((0,r.wg)(),(0,r.iD)("tbody",TI,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.items,(t=>((0,r.wg)(),(0,r.j4)(l,{key:t.id,item:t,products:a.products,onDelete:o.deleteItem,onUpdate:o.updateItem},null,8,["item","products","onDelete","onUpdate"])))),128)),(0,r._)("tr",null,[VI,qI,(0,r._)("td",RI,[(0,r._)("div",II,[(0,r._)("p",null,(0,J.zw)(i.currency)+" "+(0,J.zw)(o.price),1)])])]),(0,r._)("tr",null,[(0,r._)("td",FI,[(0,r._)("div",jI,[(0,r._)("button",{onClick:e[0]||(e[0]=(...t)=>o.addItem&&o.addItem(...t)),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-400 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},HI)])])])])):((0,r.wg)(),(0,r.iD)("tbody",YI,[(0,r._)("tr",null,[(0,r._)("td",KI,[(0,r._)("div",ZI,[(0,r.Wm)(n)])])])]))]))])])):(0,r.kq)("",!0)])}const QI=(0,r._)("td",null,null,-1),GI={class:"tw-p-2"},JI={class:"tw-relative"},XI=["value"],tF=(0,r._)("option",{value:0,selected:""},"Choose Product",-1),eF=["value"],aF=(0,r._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,r._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,r._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),sF={class:"tw-p-2"},rF={key:0,class:"tw-relative"},iF=["value"],oF=(0,r._)("option",{value:"",disabled:""},"Choose Variation",-1),lF=["value"],nF={key:1,class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},dF=(0,r._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,r._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})],-1),wF=[dF],cF={class:"tw-p-2"},uF=["value"],pF={class:"tw-p-2"},mF=["value"],hF={class:"tw-flex tw-justify-center"};function gF(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("tr",null,[QI,(0,r._)("td",null,[(0,r._)("div",GI,[(0,r._)("div",JI,[(0,r._)("select",{onChange:e[0]||(e[0]=(...t)=>o.handleProductChange&&o.handleProductChange(...t)),value:a.item.product_id,class:"tw-block tw-border-solid focus:tw-outline-none tw-w-full tw-p-2 tw-pr-6 tw-text-xs tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},[tF,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.products,(t=>((0,r.wg)(),(0,r.iD)("option",{key:t.id,value:t.id},(0,J.zw)(t.name),9,eF)))),128))],40,XI),aF])])]),(0,r._)("td",null,[(0,r._)("div",sF,[a.item.product_id?((0,r.wg)(),(0,r.iD)("div",rF,[o.product.variations.length>1?((0,r.wg)(),(0,r.iD)("select",{key:0,onChange:e[1]||(e[1]=(...t)=>o.handleVariationChange&&o.handleVariationChange(...t)),value:a.item.product_variation_id,class:"tw-block tw-border-solid focus:tw-outline-none tw-w-full tw-p-2 tw-pr-6 tw-text-xs tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},[oF,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.product.variations,(t=>((0,r.wg)(),(0,r.iD)("option",{key:t.id,value:t.id},(0,J.zw)(t.color)+" "+(0,J.zw)(t.size),9,lF)))),128))],40,iF)):(0,r.kq)("",!0),o.product.variations.length>1?((0,r.wg)(),(0,r.iD)("div",nF,wF)):(0,r.kq)("",!0)])):(0,r.kq)("",!0)])]),(0,r._)("td",null,[(0,r._)("div",cF,[(0,r._)("input",{onInput:e[2]||(e[2]=e=>t.$emit("update",{...a.item,quantity:parseInt(e.target.value)>=0?parseInt(e.target.value):0})),value:a.item.quantity,min:"0",type:"number",class:"focus:tw-outline-none tw-border-solid tw-block tw-w-24 tw-p-2 tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded-lg tw-bg-gray-50 sm:tw-text-xs focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},null,40,uF)])]),(0,r._)("td",null,[(0,r._)("div",pF,[(0,r._)("input",{onInput:e[3]||(e[3]=e=>t.$emit("update",{...a.item,price:parseFloat(e.target.value)})),value:a.item.price,min:"0",type:"number",class:"focus:tw-outline-none tw-border-solid tw-block tw-w-24 tw-p-2 tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded-lg tw-bg-gray-50 sm:tw-text-xs focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},null,40,mF)])]),(0,r._)("td",null,[(0,r._)("div",hF,[(0,r._)("button",{onClick:e[4]||(e[4]=(...t)=>o.handleDelete&&o.handleDelete(...t)),class:"tw-px-2 tw-py-1 tw-w-[25px] tw-h-[25px] tw-border tw-border-solid tw-border-red-500/20 hover:tw-bg-red-500/10 hover:tw-border-red-500/70 tw-duration-300 tw-text-red-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,r.Wm)(et.t,{size:"x-small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-delete-outline")])),_:1})])])])])}var fF={props:{item:{required:!0},products:{required:!0}},computed:{product(){return 0==this.item.product_id?null:this.products.find((t=>t.id==this.item.product_id))}},methods:{handleProductChange(t){const e=parseInt(t.target.value);if(!e)return!1;const a=this.products.find((t=>t.id==e));console.log(a.variations.length>0?a.variations[0].id:null);const s={...this.item,product_id:e,product:a,product_ref:a.ref,product_variation_id:a.variations.length>0?a.variations[0].id:null,product_variation:a.variations.length>0?a.variations[0]:null};this.$emit("update",s)},handleVariationChange(t){this.$emit("update",{...this.item,product_variation:this.product.variations.find((e=>e.id==parseInt(t.target.value))),product_variation_id:parseInt(t.target.value)})},handleDelete(){this.$emit("delete",this.item.id)}},mounted(){}};const vF=(0,d.Z)(fF,[["render",gF]]);var yF=vF,_F={components:{ItemRow:yF},props:{items:{required:!0,default:[]},error:{required:!1,default:null},products:{required:!0},productsFetched:{required:!0,default:!1},order:{required:!0}},data(){return{currency:N}},computed:{price(){return Ki(this.order)}},methods:{updateItem(t){const e=this.items.map((e=>e.id==t.id?t:e));this.$emit("update:items",e)},deleteItem(t){const e=this.items.filter((e=>e.id!=t));this.$emit("update:items",e)},addItem(){const t=this.items.length>0?this.items[this.items.length-1]:1,e=t?t.id+1:1,a={id:e,quantity:0,price:0,product_variation_id:0,product_id:0},s=[...this.items,a];this.$emit("update:items",s)}},mounted(){}};const xF=(0,d.Z)(_F,[["render",BI]]);var bF=xF;const kF=(0,r._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Affectation",-1),CF={key:0,class:"tw-relative"},DF=["value","disabled"],SF=(0,r._)("option",{value:""},"Choose a Delivery",-1),zF=["value"],UF=(0,r._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,r._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,r._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),LF={key:1,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},PF={key:2,class:"tw-relative"},AF={class:"tw-absolute tw-scale-75 tw-left-1/2 tw-top-1/2 -tw-translate-x-1/2 -tw-translate-y-1/2 tw-z-10"},WF=(0,r._)("select",{disabled:"",class:"tw-opacity-30 tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[(0,r._)("option",{value:null,selected:""},"Loading...")],-1),$F=(0,r._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},null,-1);function EF(t,e,a,s,i,o){const l=(0,r.up)("loading");return(0,r.wg)(),(0,r.iD)("div",null,[kF,i.fetched?((0,r.wg)(),(0,r.iD)("div",CF,[(0,r._)("select",{value:a.affectation,onChange:e[0]||(e[0]=(...t)=>o.handleChange&&o.handleChange(...t)),disabled:"confirmer"!=a.item.confirmation,class:(0,J.C_)([[a.error&&"!tw-border-red-400","confirmer"!=a.item.confirmation&&"tw-cursor-not-allowed"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[SF,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.availableDeliveries,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.name),9,zF)))),128))],42,DF),UF])):(0,r.kq)("",!0),i.fetched&&a.error?((0,r.wg)(),(0,r.iD)("label",LF,(0,J.zw)(a.error),1)):(0,r.kq)("",!0),i.fetched?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",PF,[(0,r._)("div",AF,[(0,r.Wm)(l)]),WF,$F]))])}var OF={props:{affectation:{required:!0},error:{required:!1,default:null},item:{required:!0}},data(){return{deliveries:[],fetched:!1}},computed:{availableDeliveries(){return this.deliveries.filter((t=>t.has.some((t=>this.item.items.some((e=>e.product_id==t))))))},delivery(){return this.deliveries.find((t=>t.id==this.affectation))}},watch:{"item.confirmation":{deep:!0,handler(){this.$emit("update:affectation",null)}},"item.items":{deep:!0,handler(){if(!this.affectation)return!1;this.delivery.has.some((t=>this.item.items.some((e=>e.product_id==t))))||this.$emit("update:affectation",null)}}},methods:{getDeliveries(){this.fetched=!1,Q.allDeliveries().then((t=>{"SUCCESS"==t?.data.code&&(this.deliveries=t.data.data.deliveries,this.fetched=!0)})).catch(this.$handleApiError)},handleChange(t){this.$emit("update:affectation",t.target.value),this.$emit("update:error",null)}},mounted(){this.getDeliveries()}};const TF=(0,d.Z)(OF,[["render",EF]]);var VF=TF,qF={components:{OrderItems:bF,OrderAffectation:VF},props:{visible:{required:!0},item:{required:!0}},data(){return{confirmations:On,upsells:Vn,isLoading:!1,products_fetched:null,products:null,itemCopy:null,errors:{fullname:null,phone:null,city:null,adresse:null,note:null,reported_agente_date:null,affectation:null,items:null}}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{handleUpdate(){const t=DI(this,this.itemCopy);if(!t)return!1;LI(this,this.itemCopy)},cancel(){if(this.isLoading)return!1;this.$emit("update:visible",!1)},getProducts(){this.products_fetched=!1,ss.allForOrder().then((t=>{"SUCCESS"==t.data.code?this.products=t.data.data.products:this.products=[],this.products_fetched=!0})).catch(this.$handleApiError)}},mounted(){this.itemCopy=JSON.parse(JSON.stringify(this.item)),this.getProducts()}};const RF=(0,d.Z)(qF,[["render",CI]]);var IF=RF,FF={components:{UpdatePopup:IF},props:{item:{required:!0}},data(){return{popup:!1,isLoading:!1}},methods:{handle(){}}};const jF=(0,d.Z)(FF,[["render",PR]]);var NF=jF,MF={components:{TableActions:NF},props:{item:{required:!0}},data(){return{moment:DR()}},computed:{confirmation(){return On.find((t=>t.value==this.item.confirmation))},deliveryState(){return qn.find((t=>t.value==this.item.delivery))}},methods:{}};const HF=(0,d.Z)(MF,[["render",kR]]);var YF=HF,KF={components:{TablePaginationNoNums:nR,TableRow:YF},props:{items:{default:[]},loading:{type:Boolean,default:!0},from:{type:Number,default:1},to:{type:Number,default:1},perPage:{type:Number,default:10},total:{type:Number,default:0},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1}}};const ZF=(0,d.Z)(KF,[["render",Yq]]);var BF=ZF;const QF={class:"tw-mt-6 tw-mb-4 md:tw-flex md:tw-items-center md:tw-justify-between"},GF={class:"tw-inline-flex tw-overflow-hidden tw-bg-white tw-border tw-divide-x tw-rounded-lg darkx:tw-bg-gray-900 rtl:tw-flex-row-reverse darkx:tw-border-gray-700 darkx:tw-divide-gray-700"},JF=(0,r._)("button",{class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 tw-bg-gray-100 sm:tw-text-sm darkx:tw-bg-gray-800 darkx:tw-text-gray-300"}," View all ",-1),XF=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,r._)("path",{fill:"currentColor",d:"M9 5a1 1 0 1 0 0 2a1 1 0 0 0 0-2zM6.17 5a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 0 1 0-2h1.17zM15 11a1 1 0 1 0 0 2a1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-1.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h7.17zM9 17a1 1 0 1 0 0 2a1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h1.17z"})],-1),tj=[XF],ej=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,r._)("path",{fill:"currentColor",d:"M10 2c-.6 0-1 .4-1 1v18c0 .6.4 1 1 1s1-.4 1-1V3c0-.6-.4-1-1-1zM5 12c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1s1-.4 1-1v-8c0-.6-.4-1-1-1zm10-4c-.6 0-1 .4-1 1v12c0 .6.4 1 1 1s1-.4 1-1V9c0-.6-.4-1-1-1zm5 8c-.6 0-1 .4-1 1v4c0 .6.4 1 1 1s1-.4 1-1v-4c0-.6-.4-1-1-1z"})],-1),aj=[ej],sj=["disabled"],rj=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[(0,r._)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4.75 10.75h-3m12.5-2c0 3-2.798 5.5-6.25 5.5c-3.75 0-6.25-3.5-6.25-3.5v3.5m9.5-9h3m-12.5 2c0-3 2.798-5.5 6.25-5.5c3.75 0 6.25 3.5 6.25 3.5v-3.5"})],-1),ij=[rj],oj={class:"tw-relative"},lj=["value"],nj=(0,r.uE)('<option value="5">5</option><option value="10">10</option><option value="20">20</option><option value="50">50</option><option value="100">100</option><option value="200">200</option>',6),dj=[nj],wj=(0,r._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,r._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,r._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),cj={class:"tw-relative tw-flex tw-items-center tw-mt-4 md:tw-mt-0"},uj=["value"],pj={class:"tw-overflow-hidden tw-col-span-1"},mj={class:"tw-overflow-hidden tw-col-span-1"};function hj(t,e,a,i,o,l){const n=(0,r.up)("FiltersWrapper"),d=(0,r.up)("IndexStatistics");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",QF,[(0,r._)("div",GF,[JF,(0,r._)("button",{onClick:e[0]||(e[0]=t=>o.showFilters=!o.showFilters),class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},tj),a.activeStatistics&&a.statistics?((0,r.wg)(),(0,r.iD)("button",{key:0,onClick:e[1]||(e[1]=t=>o.showStatistics=!o.showStatistics),class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},aj)):(0,r.kq)("",!0),(0,r._)("button",{onClick:e[2]||(e[2]=e=>t.$emit("fresh")),disabled:a.loading,class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},ij,8,sj),(0,r._)("div",oj,[(0,r._)("select",{onChange:e[3]||(e[3]=e=>t.$emit("perPageChange",e.target.value)),value:a.perPage,class:"tw-h-full tw-px-5 tw-py-2 tw-w-20 focus:tw-outline-none tw-text-xs tw-font-medium tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},dj,40,lj),wj])]),(0,r._)("div",cj,[(0,r._)("input",{type:"text",placeholder:"Search",value:a.search,onInput:e[4]||(e[4]=e=>t.$emit("update:search",e.target.value)),onKeyup:e[5]||(e[5]=(0,s.D2)((e=>t.$emit("filter")),["enter"])),class:"tw-block tw-w-full tw-py-1.5 tw-pl-5 tw-text-gray-700 tw-bg-white tw-border tw-border-solid tw-border-gray-200 tw-rounded-lg md:tw-w-80 placeholder-gray-400/70 tw-pr-11 rtl:tw-pr-11 rtl:tw-pl-5 darkx:tw-bg-gray-900 darkx:tw-text-gray-300 darkx:tw-border-gray-600 focus:tw-border-orange-400 darkx:focus:tw-border-orange-300 focus:tw-ring-orange-300 focus:tw-outline-none focus:tw-ring focus:tw-ring-opacity-40"},null,40,uj),(0,r._)("button",{onClick:e[6]||(e[6]=e=>t.$emit("filter")),class:"tw-absolute tw-right-0 tw-px-2 tw-py-1 tw-w-[38px] tw-h-[36px] tw-border-solid tw-rounded-r-lg tw-border-l tw-text-orange-500/80 tw-border-orange-500/20 hover:tw-bg-orange-500/10 hover:tw-border-orange-500/70 tw-duration-300 tw-flex tw-items-center tw-justify-center"},[(0,r.Wm)(et.t,{size:"small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-magnify")])),_:1})])])]),(0,r._)("div",{class:(0,J.C_)([[o.showFilters?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,r._)("div",pj,[(0,r.Wm)(n,{onFilter:e[7]||(e[7]=e=>t.$emit("filter")),filters:a.filters,onUpdate:e[8]||(e[8]=e=>t.$emit("update:filters",e))},null,8,["filters"])])],2),a.statistics?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,J.C_)([[o.showStatistics?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,r._)("div",mj,[(0,r.Wm)(d,{statistics:a.statistics},null,8,["statistics"])])],2)):(0,r.kq)("",!0)])}const gj={class:"tw-mb-4"},fj={class:"tw-grid tw-grid-cols-12 tw-gap-4"},vj={class:"tw-h-full tw-w-full tw-p-3 tw-rounded tw-space-y-2 tw-border tw-border-solid"},yj={class:"tw-flex tw-items-center tw-justify-between"},_j={class:"tw-text-xl tw-font-bold tw-text-gray-900"},xj={class:"tw-px-2 tw-py-1 tw-font-medium tw-text-sm tw-rounded tw-bg-white tw-text-gray-900"};function bj(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("div",gj,[(0,r._)("div",fj,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.visible,((t,e)=>((0,r.wg)(),(0,r.iD)("div",{key:e,class:"md:tw-col-span-3 tw-col-span-12"},[(0,r._)("div",vj,[(0,r._)("p",{class:(0,J.C_)(["tw-text-sm tw-font-bold tw-w-fit tw-h-fit tw-px-2 tw-rounded",[o.getConfirmation(t.confirmation).textLight,o.getConfirmation(t.confirmation).bgLight]])},(0,J.zw)(t.name),3),(0,r._)("div",yj,[(0,r._)("span",_j,(0,J.zw)(t.total),1),(0,r._)("span",xj,(0,J.zw)(t.percent)+"%",1)])])])))),128))])])}var kj={props:{statistics:{required:!0}},computed:{visible(){return this.statistics.show.includes("*")?this.statistics.data:this.statistics.data.filter((t=>this.statistics.show.includes(t.confirmation)))}},methods:{getConfirmation(t){return On.find((e=>e.value==t))}}};const Cj=(0,d.Z)(kj,[["render",bj]]);var Dj=Cj;const Sj={class:"tw-mb-4"},zj={class:"tw-grid tw-grid-cols-12 tw-gap-4 tw-p-1"},Uj={class:"md:tw-col-span-4 tw-col-span-12 tw-rounded"},Lj=(0,r._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Created",-1),Pj=["value"],Aj={class:"md:tw-col-span-4 tw-col-span-12 tw-rounded"},Wj=(0,r._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),$j=["value"],Ej=(0,r._)("option",{value:"all",selected:""},"All",-1),Oj=["value"],Tj=(0,r._)("button",{class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},[(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[(0,r._)("path",{fill:"#fff",d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})]),(0,r._)("span",null,"Filter")],-1),Vj=[Tj];function qj(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("div",Sj,[(0,r._)("div",zj,[(0,r._)("div",Uj,[Lj,(0,r._)("input",{value:a.filters.created_at,type:"date",onChange:e[0]||(e[0]=e=>t.$emit("update",{...a.filters,created_at:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,Pj)]),(0,r._)("div",Aj,[Wj,(0,r._)("select",{value:a.filters.confirmation,onChange:e[1]||(e[1]=e=>t.$emit("update",{...a.filters,confirmation:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[Ej,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.confirmations,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.value,class:"tw-capitalize",key:t.id},(0,J.zw)(t.name),9,Oj)))),128))],40,$j)]),(0,r.kq)("",!0),(0,r.kq)("",!0),(0,r._)("div",{onClick:e[3]||(e[3]=e=>t.$emit("filter")),class:"tw-col-span-12 tw-flex tw-justify-end"},Vj)])])}var Rj={props:{filters:{required:!0,default:{}}},data(){return{confirmations:On,deliveryStatus:qn,deliveries:[{id:1,value:"annuler",name:"Cancelled"},{id:2,value:"pas-de-reponse",name:"No Answer"}]}}};const Ij=(0,d.Z)(Rj,[["render",qj]]);var Fj=Ij,jj={components:{IndexStatistics:Dj,FiltersWrapper:Fj},props:{perPage:{type:Number,default:10},statistics:{default:null},activeStatistics:{type:Boolean,default:!1},loading:{default:!0},search:{default:""},filters:{required:!0}},data(){return{showFilters:!1,showStatistics:!1}}};const Nj=(0,d.Z)(jj,[["render",hj]]);var Mj=Nj,Hj={components:{IndexTable:BF,IndexFilters:Mj},data(){return{fetching:!0,items:[],statistics:null,first_page_url:null,lase_page_url:null,next_page_url:null,prev_page_url:null,last_page:1,from:1,to:1,total:0,totalOrders:0,links:null,search:"",sort_by:"created_at",sort_order:"desc",per_page:10,current_page:1,filters:{confirmation:"all",delivery:"all",created_at:"all"}}},methods:{paginateOrders(){const t="?page="+this.current_page,e={sort_by:this.sort_by,sort_order:this.sort_order,per_page:this.per_page,current_page:this.current_page,search:this.search,filters:this.filters};return this.fetching=!0,is.paginate(t,e).then((({data:t})=>{const e=t.data.orders;this.setOptions(e),this.statistics=this.search?this.statistics:t.data.statistics})).then((()=>{this.fetching=!1}))},setOptions(t){this.items=t.data,this.first_page_url=Zi(t.first_page_url),this.lase_page_url=Zi(t.last_page_url),this.next_page_url=Zi(t.next_page_url),this.prev_page_url=Zi(t.prev_page_url),this.last_page=parseInt(t.last_page),this.from=parseInt(t.from),this.to=parseInt(t.to),this.per_page=parseInt(t.per_page),this.total=parseInt(t.total),this.totalOrders=this.search?this.totalOrders:parseInt(t.total),this.links=t.links},handleNext(){},handlePrev(){},handleItemUpdate(t){this.items=this.items.map((e=>e.id==t.id?t:e))},handlePageChange(t){this.current_page=t,this.paginateOrders()},handlePerPageChange(t){this.per_page=parseInt(t),this.handlePageChange(1)},handleSortOrderChange(){this.sort_order="asc"==this.sort_order?"desc":"asc",this.paginateOrders()}},mounted(){this.paginateOrders()}};const Yj=(0,d.Z)(Hj,[["render",gq]]);var Kj=Yj;const Zj={class:"py-5 px-2 tw-border tw-bg-white tw-w-full tw-rounded-md tw-mb-5"},Bj={class:"tw-px-3 tw-h-fit"},Qj={class:"tw-flex tw-items-center tw-justify-between tw-flex-wrap"},Gj=(0,r._)("div",null,[(0,r._)("div",{class:"tw-flex tw-items-center tw-gap-x-3"},[(0,r._)("h2",{class:"tw-text-lg tw-font-medium tw-text-gray-800 darkx:tw-text-white"},"New Orders")]),(0,r._)("p",{class:"tw-mt-1 tw-text-sm tw-text-gray-500 darkx:tw-text-gray-300"},"take responsibility for new orders.")],-1),Jj={class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-3"},Xj=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),tN=(0,r._)("span",null,"Get Order",-1),eN=[Xj,tN],aN={key:0,class:"tw-p-5"},sN={key:1,class:"tw-mt-5 tw-space-y-5"},rN={class:"tw-flex tw-items-center tw-justify-end"},iN={key:2},oN=(0,r._)("div",{class:"tw-p-5 tw-border tw-border-solid tw-shadow-sm tw-mt-5 tw-text-center tw-font-medium tw-text-xl tw-text-gray-600 tw-bg-gray-100 tw-w-full tw-rounded-lg"}," No Orders ",-1),lN=[oN];function nN(t,e,a,s,i,o){const l=(0,r.up)("loading"),n=(0,r.up)("OrderCard");return(0,r.wg)(),(0,r.iD)("div",Zj,[(0,r._)("section",Bj,[(0,r._)("div",Qj,[Gj,(0,r._)("div",Jj,[(0,r._)("button",{onClick:e[0]||(e[0]=(...t)=>o.getOrder&&o.getOrder(...t)),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},eN)])]),i.fetching?((0,r.wg)(),(0,r.iD)("div",aN,[(0,r.Wm)(l)])):(0,r.kq)("",!0),!i.fetching&&i.order_exists?((0,r.wg)(),(0,r.iD)("div",sN,[(0,r.Wm)(n,{order:i.order,onUpdate:e[1]||(e[1]=t=>i.order=t)},null,8,["order"]),i.doubles.length?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:0},(0,r.Ko)(i.doubles,(t=>((0,r.wg)(),(0,r.j4)(n,{key:t.id,order:t,onUpdate:e[2]||(e[2]=t=>i.doubles=i.doubles.map((e=>e.id==t.id?t:e)))},null,8,["order"])))),128)):(0,r.kq)("",!0),(0,r._)("div",rN,[(0,r._)("button",{onClick:e[3]||(e[3]=(...t)=>o.save&&o.save(...t)),type:"button",class:"tw-px-5 tw-py-2 tw-text-sm tw-gap-2 tw-font-medium tw-text-white tw-inline-flex tw-items-center tw-bg-orange-500 hover:tw-bg-orange-600 focus:tw-ring-4 focus:tw-outline-none focus:tw-ring-orange-100 tw-rounded-lg tw-text-center dark:tw-bg-orange-600 dark:hover:tw-bg-orange-700 dark:focus:tw-ring-orange-800"}," Save ")])])):(0,r.kq)("",!0),i.fetching||i.order_exists?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",iN,lN))])])}const dN=t=>{t.fetching=!0,is.toConfirm().then((e=>{const a=e.data;if("NO_ORDER"===a.code)return t.order_exists=!1,!1;"SUCCESS"==a.code&&a.data.orders.length>0&&(t.order=a.data.orders[0],t.order_exists=!0),t.doubles=1==a.data.double?a.data.double_orders.filter((e=>e.id!=t.order?.id)):[]})).catch(t.$handleApiError).finally((()=>{t.fetching=!1}))},wN=t=>null==t.order.confirmation?(t.$alert({title:"Confirmation Not Changed",type:"warning"}),!1):t.doubles.some((t=>null==t.confirmation))?(t.$alert({title:"Double Order Confirmation Not Changed",type:"warning"}),!1):(t.order_exists=!1,t.order=null,t.doubles=[],void t.$alert({title:"Your changes has been saved !",type:"success"})),cN=t=>{let e=t.order;if(null!=e&&null==e.confirmation)return t.$alert({type:"warning",title:"Order Not Confirmed"}),!1;t.fetching=!0,is.getOrder().then((e=>{let a=e.data;if("ORDER_NOT_CONFIRMED"==a.code){t.$alert({type:"warning",title:"Order Not Confirmed"});let a=e.data.orders[0];return t.order=JSON.parse(JSON.stringify(a)),t.order_exists=!0,!1}if("SUCCESS"==a.code&&!e.data.orders?.id){let e=a.data.orders;t.order=JSON.parse(JSON.stringify(e)),t.order_exists=!0}if("NO_ORDERS"===a.code)return t.order_exists=!1,!1;t.doubles=1==a.data.double?a.data.double_orders?.filter((e=>e.id!=t.order?.id)):[]})).catch(t.$handleApiError).finally((()=>{t.fetching=!1}))},uN={class:"tw-bg-gray-50 tw-border tw-shadow-sm tw-rounded-lg tw-relative"},pN=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[(0,r._)("path",{fill:"white","fill-rule":"evenodd",d:"M21.455 5.416a.75.75 0 0 1-.096.943l-9.193 9.192a.75.75 0 0 1-.34.195l-3.829 1a.75.75 0 0 1-.915-.915l1-3.828a.778.778 0 0 1 .161-.312L17.47 2.47a.75.75 0 0 1 1.06 0l2.829 2.828a.756.756 0 0 1 .096.118Zm-1.687.412L18 4.061l-8.518 8.518l-.625 2.393l2.393-.625l8.518-8.519Z","clip-rule":"evenodd"}),(0,r._)("path",{fill:"white",d:"M19.641 17.16a44.4 44.4 0 0 0 .261-7.04a.403.403 0 0 1 .117-.3l.984-.984a.198.198 0 0 1 .338.127a45.91 45.91 0 0 1-.21 8.372c-.236 2.022-1.86 3.607-3.873 3.832a47.77 47.77 0 0 1-10.516 0c-2.012-.225-3.637-1.81-3.873-3.832a45.922 45.922 0 0 1 0-10.67c.236-2.022 1.86-3.607 3.873-3.832a47.75 47.75 0 0 1 7.989-.213a.2.2 0 0 1 .128.34l-.993.992a.402.402 0 0 1-.297.117a46.164 46.164 0 0 0-6.66.255a2.89 2.89 0 0 0-2.55 2.516a44.421 44.421 0 0 0 0 10.32a2.89 2.89 0 0 0 2.55 2.516c3.355.375 6.827.375 10.183 0a2.89 2.89 0 0 0 2.55-2.516Z"})],-1),mN={class:"tw-p-5 tw-flex tw-items-center tw-gap-2"},hN={class:"tw-text-xl tw-font-bold tw-text-gray-600"},gN=(0,r._)("span",{class:"tw-text-sm tw-text-gray-500"},null,-1),fN={class:"tw-grid lg:tw-grid-cols-4 md:tw-grid-cols-2 tw-grid-cols-1 tw-gap-5 tw-divide-x-2"},vN={class:"tw-space-y-2 tw-px-5"},yN=(0,r.uE)('<div class="tw-flex tw-items-center tw-gap-2"><svg class="tw-stroke-orange-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none" stroke-linecap="round" stroke-width="1.5"><path d="M7 18v-1a5 5 0 0 1 5-5v0a5 5 0 0 1 5 5v1"></path><path stroke-linejoin="round" d="M12 12a3 3 0 1 0 0-6a3 3 0 0 0 0 6Z"></path><path stroke-linejoin="round" d="M21 3.6v16.8a.6.6 0 0 1-.6.6H3.6a.6.6 0 0 1-.6-.6V3.6a.6.6 0 0 1 .6-.6h16.8a.6.6 0 0 1 .6.6Z"></path></g></svg><span class="tw-font-[cairo] tw-text-sm tw-font-medium tw-text-gray-600">Client Name</span></div>',1),_N={class:"tw-font-[cairo] tw-text-lg tw-font-bold tw-pl-8 tw-text-gray-700"},xN={class:"tw-space-y-2 tw-px-5"},bN=(0,r._)("div",{class:"tw-flex tw-items-center tw-gap-2"},[(0,r._)("svg",{class:"tw-stroke-orange-500",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,r._)("path",{fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M18.118 14.702L14 15.5c-2.782-1.396-4.5-3-5.5-5.5l.77-4.13L7.815 2H4.064c-1.128 0-2.016.932-1.847 2.047c.42 2.783 1.66 7.83 5.283 11.453c3.805 3.805 9.286 5.456 12.302 6.113c1.165.253 2.198-.655 2.198-1.848v-3.584l-3.882-1.479Z"})]),(0,r._)("span",{class:"tw-font-[cairo] tw-text-sm tw-font-medium tw-text-gray-600"},"Phone Number")],-1),kN={class:"tw-flex tw-items-center tw-gap-2"},CN={class:"tw-font-[cairo] tw-text-lg tw-font-bold tw-pl-8 tw-text-gray-700"},DN={class:"tw-space-y-2 tw-px-5"},SN=(0,r.uE)('<div class="tw-flex tw-items-center tw-gap-2"><svg class="tw-stroke-orange-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none"><path d="M3.75 18a.75.75 0 0 0-1.5 0h1.5Zm-1.5-4a.75.75 0 0 0 1.5 0h-1.5ZM7 8.75c.964 0 1.612.002 2.095.067c.461.062.659.169.789.3l1.06-1.062c-.455-.455-1.022-.64-1.65-.725c-.606-.082-1.372-.08-2.294-.08v1.5ZM11.75 12c0-.922.002-1.688-.08-2.294c-.084-.628-.27-1.195-.726-1.65l-1.06 1.06c.13.13.237.328.3.79c.064.482.066 1.13.066 2.094h1.5ZM7 7.25c-.922 0-1.688-.002-2.294.08c-.628.084-1.195.27-1.65.725l1.06 1.061c.13-.13.328-.237.79-.3c.482-.064 1.13-.066 2.094-.066v-1.5ZM3.75 12c0-.964.002-1.612.067-2.095c.062-.461.169-.659.3-.789l-1.062-1.06c-.455.455-.64 1.022-.725 1.65c-.082.606-.08 1.372-.08 2.294h1.5Zm0 10v-4h-1.5v4h1.5Zm0-8v-2h-1.5v2h1.5Z"></path><path stroke="currentColor" stroke-linecap="round" stroke-width="1.5" d="M7 22v-6c0-1.886 0-2.828.586-3.414C8.172 12 9.114 12 11 12h2c1.886 0 2.828 0 3.414.586c.472.471.564 1.174.582 2.414M17 22v-2.75m4-11.478c0-1.34 0-2.011-.356-2.525c-.356-.514-.984-.75-2.24-1.22c-2.455-.921-3.682-1.381-4.543-.785C13 3.84 13 5.15 13 7.772V12m8 10V12M4 8V6.5c0-.943 0-1.414.293-1.707C4.586 4.5 5.057 4.5 6 4.5h2c.943 0 1.414 0 1.707.293C10 5.086 10 5.557 10 6.5V8M7 4V2m15 20H2m8-7h.5m3.5 0h-1.5M10 18h4"></path></g></svg><span class="tw-font-[cairo] tw-text-sm tw-font-medium tw-text-gray-600">City</span></div>',1),zN={class:"tw-font-[cairo] tw-text-lg tw-font-bold tw-pl-8 tw-text-gray-700"},UN={class:"tw-space-y-2 tw-px-5"},LN=(0,r._)("div",{class:"tw-flex tw-items-center tw-gap-2"},[(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 20 20"},[(0,r._)("path",{fill:"#f97316",d:"m19.799 5.165l-2.375-1.83a1.997 1.997 0 0 0-.521-.237A2.035 2.035 0 0 0 16.336 3H9.5l.801 5h6.035c.164 0 .369-.037.566-.098s.387-.145.521-.236l2.375-1.832c.135-.091.202-.212.202-.334s-.067-.243-.201-.335zM8.5 1h-1a.5.5 0 0 0-.5.5V5H3.664c-.166 0-.37.037-.567.099c-.198.06-.387.143-.521.236L.201 7.165C.066 7.256 0 7.378 0 7.5c0 .121.066.242.201.335l2.375 1.832c.134.091.323.175.521.235c.197.061.401.098.567.098H7v8.5a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-17a.5.5 0 0 0-.5-.5z"})]),(0,r._)("span",{class:"tw-font-[cairo] tw-text-sm tw-font-medium tw-text-gray-600"},"Address")],-1),PN={class:"tw-font-[cairo] tw-text-lg tw-font-bold tw-pl-8 tw-text-gray-700"},AN={class:"tw-p-5 tw-py-3 tw-w-full tw-border-t tw-border-solid tw-mt-3"},WN={class:""},$N=(0,r._)("div",{class:"tw-flex tw-items-center tw-gap-2"},[(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 2048 2048"},[(0,r._)("path",{fill:"#f97316",d:"M1024 1000v959l-64 32l-832-415V536l832-416l832 416v744h-128V680l-640 320zm-64-736L719 384l621 314l245-122l-625-312zm-64 1552v-816L256 680v816l640 320zM335 576l625 312l238-118l-622-314l-241 120zm1073 1216v-128h640v128h-640zm0-384h640v128h-640v-128zm-256 640v-128h128v128h-128zm0-512v-128h128v128h-128zm0 256v-128h128v128h-128zm-128 24h1h-1zm384 232v-128h640v128h-640z"})]),(0,r._)("span",{class:"tw-font-[cairo] tw-text-sm tw-font-medium tw-text-gray-600"},"Product")],-1),EN={class:"tw-p-3 tw-pl-10 tw-space-y-2"},ON={class:"tw-font-bold"},TN={key:0,class:"tw-font-bold tw-text-orange-500 tw-bg-orange-100 tw-rounded-lg tw-px-2 tw-text-sm"},VN={key:1,class:"tw-font-bold tw-text-orange-500 tw-bg-orange-100 tw-rounded-lg tw-px-2 tw-text-sm"},qN={class:"tw-font-[cairo] tw-mt-2 tw-flex tw-items-center tw-justify-end tw-gap-1 tw-text-2xl tw-text-green-400 tw-font-bold"},RN={key:0};function IN(t,e,a,s,i,o){const l=(0,r.up)("UpdatePopup");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",uN,[(0,r._)("button",{onClick:e[0]||(e[0]=t=>i.popup=!0),type:"button",class:"tw-px-5 tw-absolute tw-right-3 tw-top-3 tw-z-10 tw-py-2 tw-text-sm tw-gap-2 tw-font-medium tw-text-white tw-inline-flex tw-items-center tw-bg-green-400 hover:tw-bg-green-500 focus:tw-ring-4 focus:tw-outline-none focus:tw-ring-green-100 tw-rounded-lg tw-text-center dark:tw-bg-green-600 dark:hover:tw-bg-green-700 dark:focus:tw-ring-green-800"},[pN,(0,r.Uk)(" Edit ")]),(0,r._)("div",mN,[(0,r._)("span",hN,[gN,(0,r.Uk)(" ID: "+(0,J.zw)(a.order.id),1)]),(0,r._)("span",{class:(0,J.C_)([[o.confirmation.bgLight,o.confirmation.textLight],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},(0,J.zw)(o.confirmation.name),3)]),(0,r._)("div",fN,[(0,r._)("div",vN,[yN,(0,r._)("span",_N,(0,J.zw)(a.order.fullname),1)]),(0,r._)("div",xN,[bN,(0,r._)("div",kN,[(0,r._)("span",CN,(0,J.zw)(a.order.phone),1),(0,r.Wm)(X.T,{link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+a.order.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"text",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"green"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])])]),(0,r._)("div",DN,[SN,(0,r._)("span",zN,(0,J.zw)(a.order.city),1)]),(0,r._)("div",UN,[LN,(0,r._)("span",PN,(0,J.zw)(a.order.adresse),1)])]),(0,r._)("div",AN,[(0,r._)("div",WN,[$N,(0,r._)("ul",EN,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.order.items,(t=>((0,r.wg)(),(0,r.iD)("li",{class:"tw-font-[cairo]",key:t.id},[(0,r._)("span",ON,(0,J.zw)(t.quantity)+" x ",1),(0,r.Uk)(" "+(0,J.zw)(t.product.name)+" ",1),t.product_variation.color&&!["/","-"].includes(t.product_variation.color)?((0,r.wg)(),(0,r.iD)("span",TN,(0,J.zw)(t.product_variation.color),1)):(0,r.kq)("",!0),(0,r.Uk)(),t.product_variation.size&&!["/","-"].includes(t.product_variation.size)?((0,r.wg)(),(0,r.iD)("span",VN,(0,J.zw)(t.product_variation.size),1)):(0,r.kq)("",!0)])))),128)),(0,r._)("li",qN,[(0,r._)("span",null,(0,J.zw)(i.currency),1),(0,r._)("span",null,(0,J.zw)(o.price),1)])])])])]),i.popup?((0,r.wg)(),(0,r.iD)("div",RN,[(0,r.Wm)(l,{onUpdate:e[1]||(e[1]=e=>t.$emit("update",e)),visible:i.popup,"onUpdate:visible":e[2]||(e[2]=t=>i.popup=t),item:a.order},null,8,["visible","item"])])):(0,r.kq)("",!0)])}var FN={components:{UpdatePopup:IF},props:{order:{required:!0}},data(){return{currency:N,popup:!1}},computed:{price(){return Ki(this.order)},confirmation(){return On.find((t=>t.value==this.order.confirmation))}}};const jN=(0,d.Z)(FN,[["render",IN]]);var NN=jN,MN={components:{OrderCard:NN},data(){return{fetching:!0,order_exists:!1,doubles:[],order:null}},methods:{toConfirm(){dN(this)},getOrder(){cN(this)},save(){wN(this)}},mounted(){this.toConfirm()}};const HN=(0,d.Z)(MN,[["render",nN]]);var YN=HN;const KN={class:"py-5 px-2 tw-border tw-bg-white tw-w-full tw-rounded-md tw-mb-5"},ZN={class:"tw-px-3"},BN={class:"tw-flex tw-items-center tw-justify-between tw-flex-wrap"},QN={class:"tw-flex tw-items-center tw-gap-x-3"},GN=(0,r._)("h2",{class:"tw-text-lg tw-font-medium tw-text-gray-800 darkx:tw-text-white"},"Orders",-1),JN={class:"tw-px-3 tw-py-1 tw-text-xs tw-text-emerald-600 tw-bg-emerald-100 tw-rounded-full darkx:tw-bg-gray-800 darkx:tw-text-orange-400"},XN=(0,r._)("p",{class:"tw-mt-1 tw-text-sm tw-text-gray-500 darkx:tw-text-gray-300"},"Show all confirmed orders.",-1);function tM(t,e,a,s,i,o){const l=(0,r.up)("IndexFilters"),n=(0,r.up)("IndexTable");return(0,r.wg)(),(0,r.iD)("div",KN,[(0,r._)("section",ZN,[(0,r._)("div",BN,[(0,r._)("div",null,[(0,r._)("div",QN,[GN,(0,r._)("span",JN,(0,J.zw)(i.totalOrders)+" order",1)]),XN]),(0,r.kq)("",!0)]),(0,r.Wm)(l,{search:i.search,"onUpdate:search":e[0]||(e[0]=t=>i.search=t),filters:i.filters,"onUpdate:filters":e[1]||(e[1]=t=>i.filters=t),onFilter:e[2]||(e[2]=t=>o.handlePerPageChange(i.per_page)),onPerPageChange:o.handlePerPageChange,onFresh:o.paginateOrders,loading:i.fetching,statistics:i.statistics,"active-statistics":""},null,8,["search","filters","onPerPageChange","onFresh","loading","statistics"]),(0,r._)("div",null,[(0,r.Wm)(n,{onUpdate:o.handleItemUpdate,onPageChange:o.handlePageChange,onSortOrder:o.handleSortOrderChange,loading:i.fetching,from:i.from,to:i.to,"last-page":i.last_page,"per-page":i.per_page,total:i.total,"current-page":i.current_page,items:i.items},null,8,["onUpdate","onPageChange","onSortOrder","loading","from","to","last-page","per-page","total","current-page","items"])])])])}var eM={components:{IndexTable:BF,IndexFilters:Mj},data(){return{fetching:!0,items:[],statistics:null,first_page_url:null,lase_page_url:null,next_page_url:null,prev_page_url:null,last_page:1,from:1,to:1,total:0,totalOrders:0,links:null,search:"",sort_by:"created_at",sort_order:"desc",per_page:10,current_page:1,filters:{confirmation:"all",created_at:"all"}}},methods:{paginateOrders(){const t="?page="+this.current_page,e={sort_by:this.sort_by,sort_order:this.sort_order,per_page:this.per_page,current_page:this.current_page,search:this.search,filters:this.filters,confirmation:"confirmer"};return this.fetching=!0,is.paginate(t,e).then((({data:t})=>{const e=t.data.orders;this.setOptions(e),this.statistics=this.search?this.statistics:t.data.statistics})).then((()=>{this.fetching=!1}))},setOptions(t){this.items=t.data,this.first_page_url=Zi(t.first_page_url),this.lase_page_url=Zi(t.last_page_url),this.next_page_url=Zi(t.next_page_url),this.prev_page_url=Zi(t.prev_page_url),this.last_page=parseInt(t.last_page),this.from=parseInt(t.from),this.to=parseInt(t.to),this.per_page=parseInt(t.per_page),this.total=parseInt(t.total),this.totalOrders=this.search?this.totalOrders:parseInt(t.total),this.links=t.links},handleNext(){},handlePrev(){},handleItemUpdate(t){this.items=this.items.map((e=>e.id==t.id?t:e))},handlePageChange(t){this.current_page=t,this.paginateOrders()},handlePerPageChange(t){this.per_page=parseInt(t),this.handlePageChange(1)},handleSortOrderChange(){this.sort_order="asc"==this.sort_order?"desc":"asc",this.paginateOrders()}},mounted(){this.paginateOrders()}};const aM=(0,d.Z)(eM,[["render",tM]]);var sM=aM,rM={name:"orders",path:"/orders",component:ns,meta:{module:"order"},children:[{name:"order/list",path:"",component:xT,meta:{module:"order",subModule:"order/list",title:"Orders List",gate:"show_all_orders"}},{name:"order/show",path:"/order",component:xV,meta:{module:"order",subModule:"order/show",title:"Current Order",gate:"show_all_orders"}},{name:"order/confirmed",path:"/orders/confirmed",component:nq,meta:{module:"order",subModule:"order/confirmed",title:"Confirmed Orders",gate:"show_all_orders"}},{name:"agent/orders/add",path:"/agent/orders/add",component:YN,meta:{module:"order",subModule:"agent/orders/add",title:"Add Order",gate:"show_all_orders"}},{name:"agent/orders",path:"/agent/orders",component:Kj,meta:{module:"order",subModule:"agent/orders",title:"Orders",gate:"show_all_orders"}},{name:"agent/orders/confirmed",path:"/agent/orders/confirmed",component:sM,meta:{module:"order",subModule:"agent/orders/confirmed",title:"Confirmed Orders",gate:"show_all_orders"}}]};const iM=(0,r._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,r._)("div",null,[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Orders")])],-1),oM={key:0},lM={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},nM={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-5"},dM={key:1},wM={class:"tw-min-h-[400px] tw-flex tw-flex-col tw-justify-center tw-items-center"},cM=(0,r._)("p",{class:"tw-font-medium tw-text-neutral-400 tw-text-lg tw-mb-n3"},"No Confirmed orders for now.",-1),uM=["src"];function pM(t,e,a,s,i,o){const l=(0,r.up)("LoadingAnimation"),n=(0,r.up)("OrderCard");return(0,r.wg)(),(0,r.iD)("div",null,[iM,i.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",oM,[(0,r.Wm)(l)])),i.isLoaded?((0,r.wg)(),(0,r.iD)("div",lM,[o.orders.length>0?((0,r.wg)(),(0,r.iD)("div",nM,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.filteredOrders,(t=>((0,r.wg)(),(0,r.iD)("div",{key:t.id,class:"tw-col-span-12 md:tw-col-span-4"},[((0,r.wg)(),(0,r.j4)(n,{order:t,key:t.id},null,8,["order"]))])))),128))])):((0,r.wg)(),(0,r.iD)("div",dM,[(0,r._)("div",wM,[cM,(0,r._)("img",{src:i.localUrl+"images/delivery.jpg",class:"tw-mt-0 tw-mx-auto tw-max-w-[600px] tw-w-full",alt:""},null,8,uM)])]))])):(0,r.kq)("",!0)])}var mM=a(9875),hM=a(1888),gM=a(1334);const fM={class:"tw-text-sm tw-text-orange-500x tw-bg-orange-500x/10 tw-underline tw-underline-offset-2 tw-px-1 tw-w-fit tw-rounded"},vM={class:"tw-w-full tw-whitespace-normal"},yM=(0,r._)("div",{class:"tw-border-b tw-mb-1 tw-border-dashed"},null,-1),_M={class:"tw-flex tw-items-center"},xM={key:0},bM={key:1},kM={class:"tw-min-w-fit tw-w-[25px] tw-h-[25px] tw-flex tw-items-center tw-justify-center tw-text-md tw-font-bold tw-p-1 tw-rounded tw-text-orange-400 tw-bg-orange-400/10"},CM=(0,r._)("span",{class:"tw-text-sm"},"x",-1),DM={key:0},SM={key:0,class:"tw-px-5 tw-py-2 tw-mt-2 tw-border-neutral-200 tw-border-t tw-border-dashed"},zM=(0,r._)("p",{class:"tw-text-md tw-font-bold tw-text-pink-500"},"NOTE",-1),UM={class:"tw-flex tw-items-center tw-text-gray-500"},LM={class:"tw-flex tw-items-center tw-text-gray-500"};function PM(t,e,a,s,i,o){const l=(0,r.up)("OrderCardDelivery");return(0,r.wg)(),(0,r.j4)(er._,{class:(0,J.C_)(["tw-mx-auto tw-relative tw-border-dashed !tw-shadow-lg !tw-shadow-gray-100/70",[!!a.order.note&&"tw-border-pink-00","livrer"==a.order.delivery&&"tw-border-emerald-400"]]),flat:"",border:""},{default:(0,r.w5)((()=>[(0,r._)("div",{class:(0,J.C_)(["tw-absolute tw-top-0 tw-right-0 tw-py-1 tw-px-2 tw-rounded-bl tw-text-xs",[o.delivery?.bg,o.delivery?.text]])},(0,J.zw)(a.order.delivery),3),(0,r.Wm)(mM._,null,{title:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r._)("p",fM,(0,J.zw)(a.order.city),1),(0,r._)("p",vM,(0,J.zw)(a.order.adresse),1)]),yM])),_:1}),(0,r.Wm)(hM.Z,{class:"py-0"},{default:(0,r.w5)((()=>[(0,r.Wm)(ws.o,{align:"center","no-gutters":""},{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{cols:"12",class:"tw-flex tw-items-center tw-flex-wrap tw-text-gray-500"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{icon:"mdi-account",size:"small",class:"tw-mr-2 tw-text-sm"}),(0,r.Uk)(" "+(0,J.zw)(a.order.fullname)+" ",1),a.order.note?((0,r.wg)(),(0,r.j4)(et.t,{key:0,icon:"mdi-note-outline",size:"small",class:"tw-ml-2 tw-text-sm !tw-text-pink-500"})):(0,r.kq)("",!0)])),_:1}),(0,r.Wm)(cs.D,{cols:"12",class:"tw-text-gray-500 tw-space-y-1 tw-mt-2"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.order.items,(t=>((0,r.wg)(),(0,r.iD)("div",{class:"tw-flex tw-items-center tw-gap-3",key:t.id},[(0,r._)("div",_M,[(0,r._)("span",null,[(0,r.Uk)((0,J.zw)(t.product.name)+" ",1),t.product_variation.size?((0,r.wg)(),(0,r.iD)("span",xM,"| "+(0,J.zw)(t.product_variation.size),1)):(0,r.kq)("",!0),(0,r.Uk)(),t.product_variation.size?((0,r.wg)(),(0,r.iD)("span",bM,"| "+(0,J.zw)(t.product_variation.size),1)):(0,r.kq)("",!0)])]),(0,r._)("div",null,[(0,r._)("p",kM,[CM,(0,r.Uk)(" "+(0,J.zw)(t.quantity),1)])])])))),128))])),_:1}),(0,r.Wm)(cs.D,{class:"text-h4 tw-my-3",cols:"12"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(o.getPrice(a.order)),1)])),_:1})])),_:1})])),_:1}),(0,r.kq)("",!0),(0,r.Wm)(Pt.Fx,null,{default:(0,r.w5)((()=>[t.expand?((0,r.wg)(),(0,r.iD)("div",DM,[a.order.note?((0,r.wg)(),(0,r.iD)("div",SM,[zM,(0,r._)("p",null,(0,J.zw)(a.order.note),1)])):(0,r.kq)("",!0),(0,r.Wm)(Je.i,{class:"bg-transparent tw-space-y-2 !tw-px-5 tw-py-3 tw-border-neutral-200 tw-border-dashed tw-border-t tw-mt-5"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r._)("div",UM,[(0,r.Wm)(et.t,{icon:"mdi-phone",class:"mr-2 tw-text-sm"}),(0,r.Uk)(" "+(0,J.zw)(a.order.phone),1)])]),(0,r._)("div",null,[(0,r._)("div",LM,[(0,r.Wm)(et.t,{icon:"mdi-calendar",class:"mr-2 tw-text-sm"}),(0,r.Uk)(" "+(0,J.zw)(a.order.created_at?.split("T")[0].split("-").reverse().join(".")),1)])])])),_:1})])):(0,r.kq)("",!0)])),_:1}),(0,r.Wm)(Bt.J),(0,r.Wm)(gM.h,{class:"tw-flex tw-justify-end tw-gap-2 tw-flex-wrap"},{default:(0,r.w5)((()=>[(0,r.Wm)(X.T,{class:"tw-capitalize tw-mx-auto tw-bg-orange-500/5 tw-text-orange-500",rounded:"lg",density:"comfortable",icon:"",variant:"flat",onClick:e[0]||(e[0]=e=>t.expand=!t.expand)},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(t.expand?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})])),_:1}),(0,r.Wm)(sa.C),a.order.phone?((0,r.wg)(),(0,r.j4)(X.T,{key:0,link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+a.order.phone.replace("+","").replace("-","").replace(" ",""),class:"tw-capitalize tw-bg-green-500/5 tw-text-green-500 tw-border tw-border-green-500/30",icon:"",rounded:"lg",variant:"flat",density:"comfortable"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,null,{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])):(0,r.kq)("",!0),a.order.phone?((0,r.wg)(),(0,r.j4)(X.T,{key:1,link:"",target:"_blank",href:"tel:"+a.order.phone,class:"tw-capitalize tw-bg-blue-500/5 tw-text-blue-500 tw-border tw-border-blue-500/30",icon:"",rounded:"lg",variant:"flat",density:"comfortable"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,null,{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-phone")])),_:1})])),_:1},8,["href"])):(0,r.kq)("",!0),(0,r.Wm)(X.T,{onClick:e[1]||(e[1]=e=>t.confirmPopup=!0),class:"tw-capitalize tw-bg-emerald-500 tw-text-white tw-border tw-border-emerald-500/30",icon:"",rounded:"lg",variant:"flat",density:"comfortable"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,null,{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-check")])),_:1})])),_:1})])),_:1}),((0,r.wg)(),(0,r.j4)(l,{delivery:a.order.delivery,order:a.order,key:a.order,visible:t.confirmPopup,onCancel:e[2]||(e[2]=e=>t.confirmPopup=!1)},null,8,["delivery","order","visible"]))])),_:1},8,["class"])}const AM={class:"md:tw-w-[80%] tw-overflow-hidden tw-w-[95%] tw-max-w-[550px] tw-mx-auto tw-my-3 tw-min-h-[200px] tw-bg-white tw-rounded-lg tw-shadow-lg"},WM={class:"tw-px-5 tw-pt-5"},$M=(0,r._)("h1",{class:"tw-font-bold tw-text-gray-600"},"Select Status",-1),EM={class:"tw-mt-3 tw-flex tw-gap-3 tw-flex-wrap"},OM=["disabled","onClick"],TM={class:"tw-mt-5 tw-px-5 tw-py-3 tw-bg-gray-50 tw-border-t tw-flex tw-gap-2 tw-justify-end"},VM=(0,r._)("span",{class:"!tw-text-gray-500"},"Cancel",-1),qM=(0,r._)("span",{class:"!tw-text-white"},"Confirm",-1);function RM(t,e,a,s,i,o){const l=(0,r.up)("popup-full"),n=(0,r.up)("OrderReporting");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(l,{onCancel:o.cancel,visible:a.visible},{default:(0,r.w5)((()=>[(0,r._)("div",AM,[(0,r._)("div",WM,[$M,(0,r._)("div",EM,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.deliveryStatus,(e=>((0,r.wg)(),(0,r.iD)("button",{disabled:o.isDisabled(e),onClick:t=>o.handleChange(e),key:e.value,class:(0,J.C_)([[o.isDisabled(e)&&"tw-saturate-0",e.text,e.bg,e.id==t.delivery&&[e.ring,"tw-ring"]],"tw-px-4 tw-py-2 tw-rounded"])},(0,J.zw)(e.name),11,OM)))),128))])]),(0,r._)("div",TM,[(0,r.Wm)(X.T,{onClick:o.cancel,class:"!tw-capitalize",color:"grey-lighten-3",flat:""},{default:(0,r.w5)((()=>[VM])),_:1},8,["onClick"]),(0,r.Wm)(X.T,{onClick:o.handleConfirm,loading:t.isLoading,class:"!tw-capitalize",color:"primary-color",flat:""},{default:(0,r.w5)((()=>[qM])),_:1},8,["onClick","loading"])])])])),_:1},8,["onCancel","visible"]),(0,r.Wm)(n,{onOrderReported:o.cancel,order:a.order,visible:t.showPopupReporter,onCancel:e[0]||(e[0]=e=>t.showPopupReporter=!1)},null,8,["onOrderReported","order","visible"])])}const IM={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},FM=(0,r._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),jM=(0,r._)("br",null,null,-1),NM=(0,r._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),MM={class:"tw-flex tw-justify-end tw-mt-2"};function HM(t,e,a,i,o,l){const n=(0,r.up)("VueDatePicker"),d=(0,r.up)("popup-full");return(0,r.wg)(),(0,r.iD)("div",{key:a.order.id},[(0,r.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>l.cancel()),visible:a.visible},{default:(0,r.w5)((()=>[(0,r._)("div",IM,[FM,(0,r.Wm)(n,{modelValue:o.date,"onUpdate:modelValue":e[0]||(e[0]=t=>o.date=t),format:l.format},null,8,["modelValue","format"]),jM,NM,(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[s.nr,o.note]]),(0,r._)("div",MM,[(0,r.Wm)(X.T,{class:"tw-capitalize",loading:o.isLoading,variant:"flat",color:"green",onClick:l.handleConfirm},{default:(0,r.w5)((()=>[(0,r.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var YM={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_delivery_date=this.realDate,t.reported_delivery_note=this.note,t.delivery="reporter",this.isLoading=!0,xa.deliveryUpdateDelivery(t.id,"reporter",t).then((e=>{console.log(e.data),this.$alert({type:"success",title:"Order reported successfully"}),this.$emit("orderReported"),this.$store.dispatch("order/update",{id:t.id,order:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},format(t){const e=t.getDate(),a=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),s=t.getMonth()+1,r=s.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();return this.realDate=`${i}-${r}-${a}`,`${a}/${r}/${i}`},cancel(){this.$emit("cancel")}},mounted(){console.log(this.order)}};const KM=(0,d.Z)(YM,[["render",HM]]);var ZM=KM,BM={props:["visible","order"],components:{OrderReporting:ZM},data:()=>({status:qn,disabled:Rn,delivery:2,isLoading:!1,note:"",showPopupReporter:!1}),computed:{deliveryStatus(){return this.status.filter((t=>!!t.value))},selected(){return this.status.find((t=>t.id==this.delivery))}},watch:{order:{handler(t){this.delivery=this.getDeliveryId(t.delivery)},deep:!0,immediate:!0}},methods:{cancel(){this.getCurrentStatus(),this.$emit("cancel")},isDisabled(t){return this.disabled.includes(t.value)},handleChange(t){if(this.isDisabled(t))return!1;this.delivery=t.id},handleConfirm(){const t=this.selected;if(t.value===this.order.delivery)return this.cancel(),!1;"reporter"!=t.value&&this.updateOrder().then((()=>{this.cancel()})),"reporter"==t.value&&(this.showPopupReporter=!0)},async updateOrder(){return this.isLoading=!0,xa.deliveryUpdateDelivery(this.order.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateDelivery(this.order.id,this.selected.value),this.isLoading=!1,this.cancel())}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateDelivery(t,e){this.$store.dispatch("order/updateDelivery",{id:t,delivery:e})},getDeliveryId(t){return this.status.find((e=>e.value==t)).id||0},getCurrentStatus(){this.delivery=this.getDeliveryId(this.order.delivery)}},mounted(){this.getCurrentStatus()}};const QM=(0,d.Z)(BM,[["render",RM]]);var GM=QM,JM={components:{OrderCardDelivery:GM},props:["order"],data:()=>({deliveryStatus:qn,expand:!1,confirmPopup:!1,labels:[{name:"Telephone",field:"phone",icon:"mdi-phone"},{name:"Date",field:"created_at",icon:"mdi-calendar"}]}),computed:{delivery(){return this.getDeliveryStatus(this.order.delivery)}},methods:{getDeliveryStatus(t){return this.deliveryStatus.find((e=>e.value==t))||this.deliveryStatus[0]},getPrice(t){return Ki(t)}}};const XM=(0,d.Z)(JM,[["render",PM]]);var tH=XM,eH={components:{OrderCard:tH},data(){return{localUrl:F,deliveryStatus:qn,isLoaded:!1,showFilters:!1,deliveryFilter:"all",affectationFilter:"all",upsellFilter:"all",search:""}},computed:{orders(){return this.$store.getters["order/orders"].filter((t=>"livrer"!=t.delivery))},filteredOrders(){const t=this.deliveryFilter;return this.orders.filter((e=>{if("all"!==t&&e.delivery!==t)return!1;const a=((t,e)=>{for(const a in t)if(!["created_at","updated_at"].includes(a)&&String(t[a]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(e,this.search);return!!a}))}},methods:{getOrders(){xa.deliveryOrders().then((t=>{const e=t.data.data.orders;this.$store.dispatch("order/setOrders",e),this.isLoaded=!0}),this.$handleApiError)}},mounted(){this.$store.dispatch("order/setOrders",[]),this.getOrders()}};const aH=(0,d.Z)(eH,[["render",pM]]);var sH=aH;const rH=(0,r._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,r._)("div",null,[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Delivered Orders"),(0,r._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Delivered orders list")])],-1),iH={key:0},oH={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},lH={class:"mb-5 tw-flex"},nH={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},dH={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},wH={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},cH=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Delivery",-1),uH={class:"tw-relative"},pH=["value"],mH={key:0,class:""},hH={key:1},gH=(0,r._)("p",null,"No orders for now",-1),fH=[gH];function vH(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation"),d=(0,r.up)("OrdersTable");return(0,r.wg)(),(0,r.iD)("div",null,[rH,o.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",iH,[(0,r.Wm)(n)])),o.isLoaded?((0,r.wg)(),(0,r.iD)("div",oH,[(0,r._)("div",lH,[(0,r.Wm)(X.T,{onClick:e[0]||(e[0]=t=>o.showFilters=!o.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white",size:"xx-large"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,r._)("div",nH,[(0,r.Wm)(Qt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[s.nr,o.search]])])]),(0,r._)("div",{class:(0,J.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":o.showFilters}])},[(0,r._)("div",dH,[(0,r._)("div",wH,[cH,(0,r._)("div",uH,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.deliveryFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.deliveryStatus,(t=>((0,r.wg)(),(0,r.iD)("option",{key:t.id,value:t.value?t.value:"all"},(0,J.zw)(t.name),9,pH)))),128))],512),[[s.bM,o.deliveryFilter]]),(0,r.Wm)(et.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])])])],2),l.orders.length>0?((0,r.wg)(),(0,r.iD)("div",mH,[(0,r.Wm)(d,{orders:l.filteredOrders},null,8,["orders"])])):((0,r.wg)(),(0,r.iD)("div",hH,fH))])):(0,r.kq)("",!0)])}const yH={class:"tw-relative tw-min-h-[400px] tw-overflow-x-auto tw-overflow-y-visible sm:tw-rounded-lg"},_H={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},xH={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},bH=(0,r._)("th",{scope:"col",class:"tw-p-4"},[(0,r._)("div",{class:"tw-flex tw-items-center"},[(0,r._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,r._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),kH={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},CH={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},DH={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},SH=(0,r._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),zH=["value"],UH={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},LH={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},PH={class:"tw-text-white"};function AH(t,e,a,i,o,l){const n=(0,r.up)("OrderRow");return(0,r.wg)(),(0,r.iD)("div",{key:a.orders.length},[(0,r._)("div",yH,[(0,r._)("table",_H,[(0,r._)("thead",xH,[(0,r._)("tr",null,[bH,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.columns,(t=>((0,r.wg)(),(0,r.iD)("th",{key:t,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,r._)("div",kH,(0,J.zw)(t),1)])))),128))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.orders,(t=>((0,r.wg)(),(0,r.j4)(n,{key:t.id,order:t},null,8,["order"])))),128))])])]),(0,r._)("div",CH,[(0,r._)("div",DH,[SH,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.allowedLimit,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t,key:t},(0,J.zw)(t),9,zH)))),128))],512),[[s.bM,o.paginationLimit]])]),(0,r._)("div",UH,[(0,r._)("div",LH,(0,J.zw)(l.prevRange+1)+" - "+(0,J.zw)(o.currentPage==l.pageCount?a.orders.length:l.nextRange)+" of "+(0,J.zw)(a.orders.length)+" items ",1),(0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.pageCount,(t=>((0,r.wg)(),(0,r.j4)(X.T,{onClick:e=>o.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==o.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,r.w5)((()=>[(0,r._)("span",PH,(0,J.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const WH=(0,r._)("td",{class:"tw-w-4 tw-p-4"},[(0,r._)("div",{class:"tw-flex tw-items-center"},[(0,r._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,r._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),$H={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},EH={class:"tw-px-6 tw-py-4 tw-relative"},OH={key:0},TH={class:"tw-px-6 tw-py-4"},VH={class:"tw-px-6 tw-py-4"},qH={class:"tw-px-6 tw-py-4"},RH={class:"tw-px-6 tw-py-4"},IH={class:"tw-pb-2"},FH={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},jH={key:0},NH={key:1},MH={class:"tw-px-6 tw-py-4 tw-relative"},HH={class:"tw-flex tw-items-center tw-justify-center"},YH={class:"tw-flex tw-gap-1"},KH={key:0},ZH={class:"tw-px-6 tw-py-4"},BH={class:"tw-px-6 tw-py-4"},QH={class:"tw-px-6 tw-py-4"},GH={class:"tw-max-w-[300px] tw-min-w-[150px] tw-whitespace-normal"},JH={class:"tw-px-6 tw-py-4"};function XH(t,e,a,s,i,o){const l=(0,r.up)("OrderDelivery"),n=(0,r.up)("OrderActions");return(0,r.wg)(),(0,r.iD)("tr",{key:a.order.id,class:(0,J.C_)([["reporter"==a.order.delivery&&"tw-relative",o.isReportedToday(a.order)&&"!tw-border tw-border-red-400"],"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"])},[WH,(0,r._)("th",$H,(0,J.zw)(a.order.id),1),(0,r._)("td",EH,[(0,r.Uk)((0,J.zw)(a.order?.created_at?.split("T")[0])+" ",1),"reporter"==a.order.delivery?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,J.C_)([o.isReportedToday(a.order)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[o.isReportedToday(a.order)?((0,r.wg)(),(0,r.iD)("span",OH," Reported for today ")):(0,r.kq)("",!0)],2)):(0,r.kq)("",!0)]),(0,r._)("td",TH,(0,J.zw)(a.order.fullname),1),(0,r._)("td",VH,(0,J.zw)(a.order.adresse),1),(0,r._)("td",qH,(0,J.zw)(a.order.phone),1),(0,r._)("td",RH,[(0,r._)("div",IH,[(0,r._)("ul",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.order.items,(t=>((0,r.wg)(),(0,r.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,r.Uk)(" - "),(0,r._)("span",FH,(0,J.zw)(t.quantity)+" X ",1),(0,r.Uk)((0,J.zw)(t.product.name)+" ",1),t.product_variation.size?((0,r.wg)(),(0,r.iD)("span",jH,"| "+(0,J.zw)(t.product_variation.size),1)):(0,r.kq)("",!0),t.product_variation.color?((0,r.wg)(),(0,r.iD)("span",NH,"| "+(0,J.zw)(t.product_variation.color),1)):(0,r.kq)("",!0)])))),128))])])]),(0,r._)("td",MH,[(0,r._)("div",HH,[((0,r.wg)(),(0,r.j4)(l,{class:(0,J.C_)("reporter"==a.order.delivery&&"tw-mb-1"),order:a.order,id:a.order.id,key:a.order.delivery,delivery:a.order.delivery},null,8,["class","order","id","delivery"])),"reporter"==a.order.delivery?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,J.C_)([o.isReportedToday(a.order)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[(0,r._)("span",YH,["reporter"==a.order.delivery?((0,r.wg)(),(0,r.iD)("span",KH,[(0,r.Wm)(et.t,{size:"x-small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-autorenew")])),_:1}),(0,r._)("span",null,(0,J.zw)(a.order?.reported_delivery_date?.split("T")[0]),1)])):(0,r.kq)("",!0)])],2)):(0,r.kq)("",!0)])]),(0,r._)("td",ZH,(0,J.zw)(o.getPrice(a.order)),1),(0,r._)("td",BH,(0,J.zw)(a.order.city),1),(0,r._)("td",QH,[(0,r._)("div",GH,(0,J.zw)(a.order.note),1)]),(0,r._)("td",JH,[((0,r.wg)(),(0,r.j4)(n,{key:a.order.id,order:a.order},null,8,["order"]))])],2)}const tY={key:0,class:"focus:tw-ring-4 tw-min-w-fit focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between tw-bg-green-500/10 tw-text-green-500"},eY={key:1},aY={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},sY=["onClick"];function rY(t,e,a,s,i,o){const l=(0,r.up)("OrderReporting");return(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{key:a.delivery,class:"tw-relative tw-min-w-[100px]"},["livrer"==a.delivery?((0,r.wg)(),(0,r.iD)("div",tY,(0,J.zw)(o.selected.name),1)):(0,r.kq)("",!0),"livrer"!=a.delivery?((0,r.wg)(),(0,r.iD)("div",eY,[(0,r._)("button",{onClick:e[0]||(e[0]=(...t)=>o.toggle&&o.toggle(...t)),class:(0,J.C_)([[o.selected.text,o.selected.bg,o.selected.ring],"focus:tw-ring-4 tw-min-w-[100px] focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between"]),type:"button"},[(0,r.Uk)((0,J.zw)(o.selected.name)+" ",1),i.isLoading?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(et.t,{key:0,class:"tw-ml-1"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(i.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),i.isLoading?((0,r.wg)(),(0,r.j4)(et.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-loading")])),_:1})):(0,r.kq)("",!0)],2),(0,r._)("div",{class:(0,J.C_)([{"tw-hidden":!i.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,r._)("ul",aY,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.options,(t=>((0,r.wg)(),(0,r.iD)("li",{onClick:e=>!i.disabled.includes(t.value)&&o.handleChange(t),key:t.id},[(0,r._)("a",{class:(0,J.C_)(["tw-block tw-px-4 tw-py-2",[i.disabled.includes(t.value)?"tw-text-neutral-400/80 tw-bg-neutral-400/10":[t.text,t.bg]]])},(0,J.zw)(t.name),3)],8,sY)))),128))])],2),(0,r.Wm)(l,{order:a.order,visible:i.showPopupReporter,onCancel:e[1]||(e[1]=t=>i.showPopupReporter=!1)},null,8,["order","visible"])])):(0,r.kq)("",!0)])),[[Gt.L,o.close]])}var iY={props:["delivery","id","order"],components:{OrderReporting:ZM},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",selectedId:0,allOptions:qn,disabled:Rn,showPopupReporter:!1}},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(t.id===this.selectedId)return!1;"reporter"!=t.value&&(this.selectedId=t.id,this.updateOrder(),this.close()),"reporter"==t.value&&(this.showPopupReporter=!0)},async updateOrder(){return this.isLoading=!0,xa.deliveryUpdateDelivery(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateDelivery(this.id,this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateDelivery(t,e){this.$store.dispatch("order/updateDelivery",{id:t,delivery:e})}},mounted(){this.availableOptions.includes(this.delivery)?this.selectedId=this.allOptions.find((t=>t.value==this.delivery)).id:this.selectedId=0}};const oY=(0,d.Z)(iY,[["render",rY]]);var lY=oY;const nY={key:0};function dY(t,e,a,s,i,o){return i.newOrder?((0,r.wg)(),(0,r.iD)("div",nY,[(0,r.Wm)(X.T,{link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+a.order.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])])):(0,r.kq)("",!0)}var wY={props:["order"],name:"orderActions",data(){return{newOrder:null}},computed:{},methods:{},mounted(){this.newOrder={...this.order}}};const cY=(0,d.Z)(wY,[["render",dY]]);var uY=cY,pY={props:["order","showNote"],components:{OrderDelivery:lY,OrderActions:uY},data(){return{showPopup:!1,isLoading:!1,todayDate:null}},methods:{handleClick(){this.showPopup=!0},isReportedToday(t){return"reporter"==t.delivery&&t.reported_delivery_date==this.todayDate},getPrice(t){return Ki(t)}},mounted(){const t=new Date,e=t.getDate(),a=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),s=t.getMonth()+1,r=s.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();this.todayDate=`${i}-${r}-${a}`}};const mY=(0,d.Z)(pY,[["render",XH]]);var hY=mY,gY={props:["orders"],components:{OrderRow:hY},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10,todayDate:null,columns:["#","Date","Client","Address","Phone","Product","Delivery","Price","City","Note","Actions"]}},computed:{deliveries(){return this.$store.getters["user/deliveries"]},prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.orders.length/this.paginationLimit)},items(){const t=[...this.reportedForToday,...this.orders.filter((t=>!this.isReportedToday(t)))];return t.slice(this.prevRange,this.nextRange)},reportedForToday(){return this.orders.filter(this.isReportedToday)}},methods:{isReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date==this.todayDate}},mounted(){const t=new Date,e=t.getDate(),a=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),s=t.getMonth()+1,r=s.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();this.todayDate=`${i}-${r}-${a}`}};const fY=(0,d.Z)(gY,[["render",AH]]);var vY=fY,yY={components:{OrdersTable:vY},data(){return{localUrl:F,deliveryStatus:qn,isLoaded:!1,showFilters:!1,deliveryFilter:"all",affectationFilter:"all",upsellFilter:"all",search:""}},computed:{orders(){return this.$store.getters["order/orders"]},filteredOrders(){const t=this.deliveryFilter;return this.orders.filter((e=>{if("all"!==t&&e.delivery!==t)return!1;const a=((t,e)=>{for(const a in t)if(!["created_at","updated_at"].includes(a)&&String(t[a]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(e,this.search);return!!a}))}},methods:{getOrders(){xa.deliveryDeliveredOrders().then((t=>{const e=t.data.data.orders;this.$store.dispatch("order/setOrders",e),this.isLoaded=!0}),this.$handleApiError)}},mounted(){this.$store.dispatch("order/setOrders",[]),this.getOrders()}};const _Y=(0,d.Z)(yY,[["render",vH]]);var xY=_Y,bY={name:"deliveries",path:"/deliveries",component:ns,meta:{module:"delivery"},children:[{name:"delivery/list",path:"",component:sH,meta:{module:"delivery",subModule:"delivery/list",title:"Orders List",gate:"all"}},{name:"delivery/delivered",path:"/delivered",component:xY,meta:{module:"delivery",subModule:"delivery/delivered",title:"Delivered Orders List",gate:"all"}}]};const kY=(0,r._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,r._)("div",null,[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Inventory State List "),(0,r._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"See your inventory state")])],-1),CY={key:0},DY={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},SY={class:"mb-5 tw-flex"},zY={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},UY={key:0,class:""};function LY(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation"),d=(0,r.up)("InventoryStateTable");return(0,r.wg)(),(0,r.iD)("div",null,[kY,o.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",CY,[(0,r.Wm)(n)])),o.isLoaded?((0,r.wg)(),(0,r.iD)("div",DY,[(0,r._)("div",SY,[(0,r.Wm)(X.T,{icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white !tw-w-0 !tw-overflow-hidden"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white",size:"xx-large"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,r._)("div",zY,[(0,r.Wm)(Qt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[s.nr,o.search]])])]),l.inventoryState.length>0?((0,r.wg)(),(0,r.iD)("div",UY,[(0,r.Wm)(d,{columns:o.columns,states:l.filteredInventoryState},null,8,["columns","states"])])):(0,r.kq)("",!0)])):(0,r.kq)("",!0)])}class PY{async inventoryStates(){return await Z.getCookie(),Y.get("api/inventorystates")}async inventoryMovements(){return await Z.getCookie(),Y.get("api/inventorymovements")}async getMovement(t){return await Z.getCookie(),Y.get("api/inventorymovements/"+t)}async inventoryMovementCreate({product_id:t,delivery_id:e,variants:a}){return await Z.getCookie(),Y.post("api/inventorymovements/new",{product_id:t,delivery_id:e,variations:a})}async inventoryMovementUpdate(t,{product_id:e,delivery_id:a,variants:s,quantity:r}){return await Z.getCookie(),Y.post("api/inventorymovements/update/"+t,{product_id:e,delivery_id:a,variants:s,quantity:r})}async deliveryUpdateMovement(t,e,a){return await Z.getCookie(),Y.post("api/delivery/inventorymovements/update/"+t,{is_received:e,note:a})}async delete(t){return await Z.getCookie(),Y["delete"]("api/inventorymovements/delete/"+t)}}var AY=new PY;const WY={class:"tw-relative tw-min-h-[400px] tw-overflow-x-auto tw-overflow-y-visible sm:tw-rounded-lg"},$Y={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},EY={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},OY=(0,r._)("th",{scope:"col",class:"tw-p-4"},[(0,r._)("div",{class:"tw-flex tw-items-center"},[(0,r._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,r._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),TY={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},VY=(0,r._)("td",{class:"tw-w-4 tw-p-4"},[(0,r._)("div",{class:"tw-flex tw-items-center"},[(0,r._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,r._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),qY={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},RY={class:"tw-px-6 tw-py-4 tw-underline tw-underline-offset-1 tw-font-medium"},IY={class:"tw-px-6 tw-py-4"},FY={class:"tw-px-6 tw-py-4"},jY={class:"tw-px-6 tw-py-4 tw-font-bold tw-text-green-500"},NY={class:"tw-px-6 tw-py-4"},MY={class:"tw-px-6 tw-py-4"},HY=(0,r._)("br",null,null,-1),YY={class:"tw-px-6 tw-py-4"},KY={class:"mt-5 tw-flex tw-justify-between"},ZY={class:"d-flex align-center"},BY=(0,r._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700"},"Show per page: ",-1),QY={class:"d-flex align-center"},GY={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},JY={class:"tw-text-white"};function XY(t,e,a,s,i,o){const l=(0,r.up)("router-link"),n=(0,r.up)("InventoryStateActions");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",WY,[(0,r._)("table",$Y,[(0,r._)("thead",EY,[(0,r._)("tr",null,[OY,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.columns,(t=>((0,r.wg)(),(0,r.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,r._)("div",TY,(0,J.zw)(t.name),1)])))),128))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.items,((t,e)=>((0,r.wg)(),(0,r.iD)("tr",{key:e,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[VY,(0,r._)("th",qY,(0,J.zw)(t.id),1),(0,r._)("td",RY,[(0,r.Wm)(l,{to:"products/"+t.id},{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(t.name),1)])),_:2},1032,["to"])]),(0,r._)("td",IY,(0,J.zw)(t.buying_price)+" DH ",1),(0,r._)("td",FY,(0,J.zw)(t.selling_price)+" DH ",1),(0,r._)("td",jY,(0,J.zw)(o.availableQuantity(t)),1),(0,r._)("td",NY,(0,J.zw)(t.total_quantity),1),(0,r._)("td",MY,[(0,r.Uk)((0,J.zw)(t.updated_at?.split("T")[0])+" ",1),HY,(0,r.Uk)(" "+(0,J.zw)(t.updated_at?.split("T")[1].split(".")[0]),1)]),(0,r._)("td",YY,[(0,r.Wm)(n,{state:t},null,8,["state"])])])))),128))])])]),(0,r._)("div",KY,[(0,r._)("div",ZY,[BY,(0,r.Wm)(vp.r,{"hide-details":!0,modelValue:i.paginationLimit,"onUpdate:modelValue":e[0]||(e[0]=t=>i.paginationLimit=t),items:i.allowedLimit,variant:"outlined",density:"compact",color:"primary-color"},null,8,["modelValue","items"])]),(0,r._)("div",QY,[(0,r._)("div",GY,(0,J.zw)(o.prevRange+1)+" - "+(0,J.zw)(i.currentPage==o.pageCount?a.states.length:o.nextRange)+" of "+(0,J.zw)(a.states.length)+" items ",1),(0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.pageCount,(t=>((0,r.wg)(),(0,r.j4)(X.T,{onClick:e=>i.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==i.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,r.w5)((()=>[(0,r._)("span",JY,(0,J.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}function tK(t,e,a,s,i,o){const l=(0,r.up)("InventoryStateDetails"),n=(0,r.up)("popup-full");return(0,r.wg)(),(0,r.iD)("div",{key:a.state.id,class:"tw-flex tw-items-center"},[(0,r.Wm)(X.T,{onClick:e[0]||(e[0]=t=>i.detailsPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-eye-outline")])),_:1})])),_:1}),(0,r.Wm)(n,{visible:i.detailsPopup,onCancel:e[2]||(e[2]=t=>i.detailsPopup=!1)},{default:(0,r.w5)((()=>[i.detailsPopup?((0,r.wg)(),(0,r.j4)(l,{key:0,onCancel:e[1]||(e[1]=t=>i.detailsPopup=!1),state:a.state},null,8,["state"])):(0,r.kq)("",!0)])),_:1},8,["visible"])])}const eK={class:"md:tw-w-[50%] tw-relative tw-max-h-full tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},aK={class:"tw-p-5"},sK={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500 tw-rounded-md tw-overflow-hidden"},rK=(0,r._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,r._)("tr",null,[(0,r._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,r._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"}," SIZE "),(0,r._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," COLOR "),(0,r._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY ")])],-1),iK={class:"tw-w-4 tw-p-4"},oK={class:"tw-w-4 tw-p-4"},lK={class:"tw-w-4 tw-p-4"},nK={class:"tw-w-4 tw-p-4"},dK={class:"tw-flex tw-items-center tw-gap-1"},wK={class:"tw-text-green-500"},cK={key:0},uK={class:"tw-text-red-400"},pK=(0,r.uE)('<div class="tw-flex tw-gap-3 mt-5"><div class="tw-flex tw-items-center tw-gap-1 tw-text-xs"><div class="tw-w-[10px] tw-h-[10px] tw-rounded-full tw-bg-green-500"></div><span>Available</span></div><div class="tw-flex tw-items-center tw-gap-1 tw-text-xs"><div class="tw-w-[10px] tw-h-[10px] tw-rounded-full tw-bg-neutral-700"></div><span>Initial</span></div><div class="tw-flex tw-items-center tw-gap-1 tw-text-xs"><div class="tw-w-[10px] tw-h-[10px] tw-rounded-full tw-bg-red-400"></div><span>Not Received</span></div></div>',1);function mK(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("div",eK,[(0,r.Wm)(X.T,{onClick:o.cancel,icon:"mdi-close",variant:"flat",size:"w-small",color:"red",class:"tw-absolute tw-top-3 tw-z-10 tw-right-3"},null,8,["onClick"]),(0,r._)("div",aK,[(0,r._)("table",sK,[rK,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.state.variations,(t=>((0,r.wg)(),(0,r.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,r._)("td",iK,(0,J.zw)(t.id),1),(0,r._)("td",oK,(0,J.zw)(t.size),1),(0,r._)("td",lK,(0,J.zw)(t.color),1),(0,r._)("td",nK,[(0,r._)("div",dK,[(0,r._)("span",wK,(0,J.zw)(t.available_quantity),1),(0,r._)("span",null,"/ "+(0,J.zw)(t.quantity),1),t.on_hold>0?((0,r.wg)(),(0,r.iD)("span",cK,[(0,r.Uk)(" / "),(0,r._)("span",uK,(0,J.zw)(t.on_hold),1)])):(0,r.kq)("",!0)])])])))),128))])]),pK])])}var hK={props:["state"],data(){return{}},computed:{},methods:{cancel(){this.$emit("cancel")}},mounted(){console.log(this.state)}};const gK=(0,d.Z)(hK,[["render",mK]]);var fK=gK,vK={props:["rowIndex","state"],components:{InventoryStateDetails:fK},name:"inventoryStateActions",data(){return{showPopup:!1,confirmPopup:!1,detailsPopup:!1,isConfirmed:!1,note:"",isLoading:!1}},computed:{user(){return this.$store.getters["user/user"]}},methods:{},mounted(){}};const yK=(0,d.Z)(vK,[["render",tK]]);var _K=yK,xK={props:["columns","states"],components:{InventoryStateActions:_K},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.states.length/this.paginationLimit)},items(){return this.states.slice(this.prevRange,this.nextRange)}},methods:{availableQuantity(t){let e=0;return t.variations.forEach((t=>{e+=t.available_quantity})),e}}};const bK=(0,d.Z)(xK,[["render",XY]]);var kK=bK,CK={components:{InventoryStateTable:kK},data(){return{localUrl:F,isLoaded:!1,showFilters:!1,search:"",columns:[{prop:"id",name:"#"},{prop:"product_name",name:"Product Name"},{prop:"buying_price",name:"Buying Price"},{prop:"selling_price",name:"Selling Price"},{prop:"available",name:"Available"},{prop:"quantity",name:"Quantity"},{prop:"updated_at",name:"Updated At"},{prop:"actions",name:"Actions"}]}},computed:{inventoryState(){return this.$store.getters["inventory/inventoryState"]},filteredInventoryState(){return this.inventoryState.filter((t=>!!(t.ref.toLowerCase().includes(this.search.toLowerCase())||t.name.toLowerCase().includes(this.search.toLowerCase())||t.description.toLowerCase().includes(this.search.toLowerCase()))))}},methods:{async getInventoryStates(){await AY.inventoryStates().then((t=>{if(console.log(t.data.data),"SHOW_ALL_INVENTORY_STATES"==t.data.code){const e=t.data.data;this.$store.dispatch("inventory/setInventoryState",e)}}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))}},async mounted(){this.getInventoryStates()}};const DK=(0,d.Z)(CK,[["render",LY]]);var SK=DK;const zK=(0,r._)("div",{class:"mb-5"},[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Add Inventory Movement"),(0,r._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create New Movement")],-1),UK={key:0},LK={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},PK={class:"tw-w-full"},AK=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery",-1),WK={class:"tw-relative"},$K=["disabled"],EK=["value"],OK={class:"tw-w-full"},TK=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Product Name",-1),VK={class:"tw-relative"},qK=["disabled"],RK=["value"],IK={class:"tw-w-full"},FK=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variation",-1),jK={class:"tw-relative"},NK=["value"],MK={class:"tw-w-full"},HK=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),YK={class:"tw-w-full tw-h-full tw-flex tw-items-end"},KK=(0,r._)("span",{class:"text-white text-capitalize"},"Add",-1),ZK={class:"tw-max-w-full"},BK={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},QK=(0,r._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,r._)("tr",null,[(0,r._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,r._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"}," SIZE "),(0,r._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," COLOR "),(0,r._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY "),(0,r._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate tw-max-w-[50px]"}," ACTIONS ")])],-1),GK={class:"tw-w-4 tw-p-4"},JK={class:"tw-w-4 tw-p-4"},XK={class:"tw-w-4 tw-p-4"},tZ={class:"tw-w-4 tw-p-4"},eZ={class:"tw-w-4 tw-p-4"},aZ={class:"tw-w-fit tw-h-full tw-flex tw-items-end"},sZ={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},rZ=(0,r._)("span",{class:"text-white text-capitalize"},"Cancel",-1),iZ=(0,r._)("span",{class:"text-white text-capitalize"},"Create",-1);function oZ(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation");return(0,r.wg)(),(0,r.iD)("div",null,[zK,o.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",UK,[(0,r.Wm)(n)])),o.isLoaded?((0,r.wg)(),(0,r.iD)("div",LK,[(0,r._)("div",null,[(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",PK,[AK,(0,r._)("div",WK,[(0,r.wy)((0,r._)("select",{disabled:o.selectedVariations.length,"onUpdate:modelValue":e[0]||(e[0]=t=>o.delivery=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-capitalize tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.deliveries,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.firstname+" "+t.lastname),9,EK)))),128))],8,$K),[[s.bM,o.delivery]]),(0,r.Wm)(et.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",OK,[TK,(0,r._)("div",VK,[(0,r.wy)((0,r._)("select",{disabled:o.selectedVariations.length>0,"onUpdate:modelValue":e[1]||(e[1]=t=>o.product=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.products,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.name),9,RK)))),128))],8,qK),[[s.bM,o.product]]),(0,r.Wm)(et.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",IK,[FK,(0,r._)("div",jK,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.variation=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.variations,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.color+" - "+t.size+"  ("+t.available_quantity+" items)"),9,NK)))),128))],512),[[s.bM,o.variation]]),(0,r.Wm)(et.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",sm:"4",md:"4"},{default:(0,r.w5)((()=>[(0,r._)("div",MK,[HK,(0,r._)("div",null,[(0,r.Wm)(at.hw,{type:"number",onChange:l.handleQuantityChange,"hide-details":!0,modelValue:o.quantity,"onUpdate:modelValue":e[3]||(e[3]=t=>o.quantity=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","modelValue"])])])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",sm:"2",md:"2"},{default:(0,r.w5)((()=>[(0,r._)("div",YK,[(0,r.Wm)(X.T,{onClick:l.addVariation,color:"primary-color",variant:"flat",size:"large"},{default:(0,r.w5)((()=>[KK])),_:1},8,["onClick"])])])),_:1}),(0,r.Wm)(cs.D,{cols:"12"},{default:(0,r.w5)((()=>[(0,r._)("div",ZK,[(0,r._)("table",BK,[QK,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.selectedVariations,(t=>((0,r.wg)(),(0,r.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,r._)("td",GK,(0,J.zw)(t.id),1),(0,r._)("td",JK,(0,J.zw)(t.size),1),(0,r._)("td",XK,(0,J.zw)(t.color),1),(0,r._)("td",tZ,(0,J.zw)(t.quantity),1),(0,r._)("td",eZ,[(0,r._)("div",aZ,[(0,r.Wm)(X.T,{onClick:e=>l.deleteVariation(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])])])])),_:1})])),_:1})]),(0,r._)("div",sZ,[(0,r.Wm)(X.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,r.w5)((()=>[rZ])),_:1}),(0,r.Wm)(X.T,{onClick:l.create,loading:o.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,r.w5)((()=>[iZ])),_:1},8,["onClick","loading"])])])):(0,r.kq)("",!0)])}var lZ={data(){return{isLoading:!1,isLoaded:!1,variationId:0,product:1,delivery:1,quantity:0,variation:0,selectedVariations:[]}},computed:{products(){return this.$store.getters["product/products"]},deliveries(){return this.$store.getters["user/deliveries"]},variations(){return this.products.find((t=>t.id==this.product))?.variations.filter((t=>{let e=!0;return this.selectedVariations.forEach((a=>{t.id==a.id&&(e=!1)})),e}))}},watch:{product(){this.variations.length>0?this.variation=this.variations[0].id:this.variation=null}},methods:{addVariation(){if(0==this.variations.length)return!1;const t=this.variations.find((t=>t.id==this.variation));if(!t)return!1;if(this.quantity>t.available_quantity||0==this.quantity)return this.$alert({type:"warning",title:"Quantity should be between 1 and "+t.available_quantity}),!1;const e={id:t.id,size:t.size,color:t.color,quantity:this.quantity};this.quantity=0,this.selectedVariations.push(e),this.variations.length>0?this.variation=this.variations[0].id:this.variation=null},deleteVariation(t){this.selectedVariations=this.selectedVariations.filter((e=>e.id!==t)),1==this.variations.length&&(this.variation=this.variations[0].id)},create(){if(0==this.selectedVariations.length)return this.$alert({type:"warning",title:"You need to add some variations"}),!1;let t=0;this.selectedVariations.forEach((e=>t+=e.quantity)),this.isLoading=!0,AY.inventoryMovementCreate({product_id:this.product,delivery_id:this.delivery,variants:this.selectedVariations,quantity:this.qty}).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.selectedVariations=[],this.getData()),"ERROR_QUANTITY"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).finally((()=>this.isLoading=!1))},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},async getDeliveries(){await Q.deliveries().then((t=>{const e=t.data.data;this.$store.dispatch("user/setDeliveries",e),e.length>0?this.delivery=e[0].id:this.delivery=null}),this.$handleApiError)},getProducts(){return AY.inventoryStates().then((t=>{if("SHOW_ALL_INVENTORY_STATES"==t.data.code){const e=t.data.data;if(this.$store.dispatch("product/setProducts",e),e.length>0){const t=e[0];this.product=t.id,this.variations.length>0&&(this.variation=this.variations[0].id)}else this.product=null}}),(t=>{this.$handleApiError(t)}))},getData(){this.isLoaded=!1,Promise.allSettled([this.getProducts(),this.getDeliveries()]).then((()=>{this.isLoaded=!0}))}},mounted(){this.getData()}};const nZ=(0,d.Z)(lZ,[["render",oZ]]);var dZ=nZ;const wZ=(0,r._)("div",{class:"mb-5"},[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Update Inventory Movement"),(0,r._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Edit an existing Movement")],-1),cZ={key:0},uZ={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},pZ={class:"tw-w-full"},mZ=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery",-1),hZ={class:"tw-relative"},gZ=["value"],fZ={class:"tw-w-full"},vZ=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variation",-1),yZ={class:"tw-relative"},_Z=["value"],xZ={class:"tw-w-full"},bZ=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),kZ={class:"tw-w-full tw-h-full tw-flex tw-items-end"},CZ=(0,r._)("span",{class:"text-white text-capitalize"},"Add",-1),DZ={class:"tw-max-w-full"},SZ={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},zZ=(0,r._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,r._)("tr",null,[(0,r._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,r._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"}," SIZE "),(0,r._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," COLOR "),(0,r._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY "),(0,r._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate tw-max-w-[50px]"}," ACTIONS ")])],-1),UZ={class:"tw-w-4 tw-p-4"},LZ={class:"tw-w-4 tw-p-4"},PZ={class:"tw-w-4 tw-p-4"},AZ={class:"tw-w-4 tw-p-4"},WZ={class:"tw-w-4 tw-p-4"},$Z={class:"tw-w-fit tw-h-full tw-flex tw-items-end"},EZ={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},OZ=(0,r._)("span",{class:"text-white text-capitalize"},"Cancel",-1),TZ=(0,r._)("span",{class:"text-white text-capitalize"},"Update",-1);function VZ(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation");return(0,r.wg)(),(0,r.iD)("div",null,[wZ,o.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",cZ,[(0,r.Wm)(n)])),o.isLoaded?((0,r.wg)(),(0,r.iD)("div",uZ,[(0,r._)("div",null,[(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12"},{default:(0,r.w5)((()=>[(0,r._)("div",pZ,[mZ,(0,r._)("div",hZ,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.delivery=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-capitalize tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.deliveries,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.firstname+" "+t.lastname),9,gZ)))),128))],512),[[s.bM,o.delivery]]),(0,r.Wm)(et.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",fZ,[vZ,(0,r._)("div",yZ,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.variation=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.variations,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.color+" / "+t.size+" / "+t.quantity),9,_Z)))),128))],512),[[s.bM,o.variation]]),(0,r.Wm)(et.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",sm:"4",md:"4"},{default:(0,r.w5)((()=>[(0,r._)("div",xZ,[bZ,(0,r._)("div",null,[(0,r.Wm)(at.hw,{type:"number",onChange:l.handleQuantityChange,"hide-details":!0,modelValue:o.quantity,"onUpdate:modelValue":e[2]||(e[2]=t=>o.quantity=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","modelValue"])])])])),_:1}),(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",sm:"2",md:"2"},{default:(0,r.w5)((()=>[(0,r._)("div",kZ,[(0,r.Wm)(X.T,{onClick:l.addVariation,color:"primary-color",variant:"flat",size:"large"},{default:(0,r.w5)((()=>[CZ])),_:1},8,["onClick"])])])),_:1}),(0,r.Wm)(cs.D,{cols:"12"},{default:(0,r.w5)((()=>[(0,r._)("div",DZ,[(0,r._)("table",SZ,[zZ,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.selectedVariations,(t=>((0,r.wg)(),(0,r.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,r._)("td",UZ,(0,J.zw)(t.id),1),(0,r._)("td",LZ,(0,J.zw)(t.size),1),(0,r._)("td",PZ,(0,J.zw)(t.color),1),(0,r._)("td",AZ,(0,J.zw)(t.quantity),1),(0,r._)("td",WZ,[(0,r._)("div",$Z,[(0,r.Wm)(X.T,{onClick:e=>l.deleteVariation(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])])])])),_:1})])),_:1})]),(0,r._)("div",EZ,[(0,r.Wm)(X.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,r.w5)((()=>[OZ])),_:1}),(0,r.Wm)(X.T,{onClick:l.update,loading:o.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,r.w5)((()=>[TZ])),_:1},8,["onClick","loading"])])])):(0,r.kq)("",!0)])}var qZ={data(){return{isLoading:!1,isLoaded:!1,movement:null,variationId:0,product:1,delivery:1,quantity:0,variation:0,selectedVariations:[]}},computed:{products(){return this.$store.getters["product/products"]},deliveries(){return this.$store.getters["user/deliveries"]},id(){return this.$route.params.id},variations(){return this.products.find((t=>t.id==this.product))?.variations.filter((t=>{let e=!0;return this.selectedVariations.forEach((a=>{t.id==a.id&&(e=!1)})),e}))}},watch:{product(){this.variations.length>0?this.variation=this.variations[0].id:this.variation=null}},methods:{addVariation(){if(0==this.variations.length)return!1;const t=this.variations.find((t=>t.id==this.variation));if(!t)return!1;if(this.quantity>t.quantity||0==this.quantity)return this.$alert({type:"warning",title:"Quantity should be between 1 and "+t.quantity}),!1;const e={id:t.id,size:t.size,color:t.color,quantity:this.quantity};this.quantity=0,this.selectedVariations.push(e),this.variations.length>0?this.variation=this.variations[0].id:this.variation=null},deleteVariation(t){this.selectedVariations=this.selectedVariations.filter((e=>e.id!==t)),1==this.variations.length&&(this.variation=this.variations[0].id)},update(){if(0==this.selectedVariations.length)return this.$alert({type:"warning",title:"You need to add some variations"}),!1;let t=0;this.selectedVariations.forEach((e=>t+=e.quantity)),this.isLoading=!0,AY.inventoryMovementUpdate(this.id,{product_id:this.product,delivery_id:this.delivery,variants:this.selectedVariations,quantity:this.qty}).then((t=>{"SUCCESS"==t.data.code&&this.$alert({type:"success",title:t.data.message}),"ERROR_QUANTITY"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).finally((()=>this.isLoading=!1))},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},async getDeliveries(){await Q.deliveries().then((t=>{const e=t.data.data;this.$store.dispatch("user/setDeliveries",e),e.length>0?this.delivery=e[0].id:this.delivery=null}),this.$handleApiError)},getProducts(){return ss.all().then((t=>{if("SUCCESS"==t.data.code){const e=t.data.data.products;this.$store.dispatch("product/setProducts",e),e.length>0?this.product=e[0].id:this.product=null}}),(t=>{this.$handleApiError(t)}))},getMovement(){return AY.getMovement(this.id).then((t=>{if("SUCCESS"==t.data.code){const e=t.data.data.movement;this.product=e.product.id,this.delivery=e.delivery.id,this.selectedVariations=e.inventory_movement_variations;let a=0;this.selectedVariations.forEach((t=>{a+=t.quantity})),this.quantity_total=a}}),(t=>{this.$handleApiError(t)}))}},mounted(){Promise.allSettled([this.getProducts(),this.getDeliveries(),this.getMovement()]).then((()=>{this.isLoaded=!0}))}};const RZ=(0,d.Z)(qZ,[["render",VZ]]);var IZ=RZ;const FZ=(0,r._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,r._)("div",null,[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Inventory State List"),(0,r._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"See your inventory state")])],-1),jZ={key:0},NZ={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},MZ={class:"mb-5 tw-flex"},HZ={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},YZ={key:0,class:""};function KZ(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation"),d=(0,r.up)("InventoryMovementsTable");return(0,r.wg)(),(0,r.iD)("div",null,[FZ,o.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",jZ,[(0,r.Wm)(n)])),o.isLoaded?((0,r.wg)(),(0,r.iD)("div",NZ,[(0,r._)("div",MZ,[(0,r.Wm)(X.T,{icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white !tw-w-0 !tw-overflow-hidden"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white",size:"xx-large"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,r._)("div",HZ,[(0,r.Wm)(Qt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[s.nr,o.search]])])]),l.inventoryMovements.length>0?((0,r.wg)(),(0,r.iD)("div",YZ,[(0,r.Wm)(d,{columns:o.columns,movements:l.inventoryMovements},null,8,["columns","movements"])])):(0,r.kq)("",!0)])):(0,r.kq)("",!0)])}const ZZ={class:"tw-relative tw-min-h-[400px] tw-overflow-x-auto tw-overflow-y-visible sm:tw-rounded-lg"},BZ={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},QZ={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},GZ=(0,r._)("th",{scope:"col",class:"tw-p-4"},[(0,r._)("div",{class:"tw-flex tw-items-center"},[(0,r._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,r._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),JZ={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},XZ=(0,r._)("td",{class:"tw-w-4 tw-p-4"},[(0,r._)("div",{class:"tw-flex tw-items-center"},[(0,r._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,r._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),tB={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},eB={class:"tw-px-6 tw-py-4"},aB=(0,r._)("br",null,null,-1),sB={class:"tw-px-6 tw-py-4"},rB={class:"tw-px-6 tw-py-4"},iB={class:"tw-px-6 tw-py-4"},oB={class:"tw-px-6 tw-py-4"},lB={class:"tw-px-6 tw-py-4"},nB={class:"tw-w-[200px] !tw-whitespace-normal"},dB={class:"tw-px-6 tw-py-4"},wB={class:"tw-px-6 tw-py-4"},cB={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},uB={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},pB=(0,r._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),mB=["value"],hB={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},gB={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},fB={class:"tw-text-white"};function vB(t,e,a,i,o,l){const n=(0,r.up)("router-link"),d=(0,r.up)("InventoryMovementsActions");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",ZZ,[(0,r._)("table",BZ,[(0,r._)("thead",QZ,[(0,r._)("tr",null,[GZ,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.columns,(t=>((0,r.wg)(),(0,r.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,r._)("div",JZ,(0,J.zw)(t.name),1)])))),128))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.movements,((t,e)=>((0,r.wg)(),(0,r.iD)("tr",{key:e,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[XZ,(0,r._)("th",tB,(0,J.zw)(t.id),1),(0,r._)("td",eB,[(0,r.Uk)((0,J.zw)(t.created_at?.split("T")[0])+" ",1),aB,(0,r.Uk)(" "+(0,J.zw)(t.created_at?.split("T")[1].split(".")[0]),1)]),(0,r._)("td",sB,(0,J.zw)(t.delivery.firstname+" "+t.delivery.lastname),1),(0,r._)("td",rB,[(0,r.Wm)(n,{to:"products/"+t.product.id},{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(t.product.name),1)])),_:2},1032,["to"])]),(0,r._)("td",iB,(0,J.zw)(l.quantityTotal(t.inventory_movement_variations)),1),(0,r._)("td",oB,[(0,r._)("div",{class:(0,J.C_)([[t.is_received?"tw-text-green-500 tw-bg-green-500/10":"tw-text-red-500 tw-bg-red-500/10"],"tw-flex tw-justify-center tw-py-1 tw-rounded-lg tw-items-center"])},[(0,r._)("span",null,(0,J.zw)(t.is_received?"Yes":"No"),1)],2)]),(0,r._)("td",lB,[(0,r._)("div",nB,(0,J.zw)(t.note?t.note:"-"),1)]),(0,r._)("td",dB,(0,J.zw)(t.delivery.city?.name),1),(0,r._)("td",wB,[(0,r.Wm)(d,{movement:t},null,8,["movement"])])])))),128))])])]),(0,r._)("div",cB,[(0,r._)("div",uB,[pB,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.allowedLimit,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t,key:t},(0,J.zw)(t),9,mB)))),128))],512),[[s.bM,o.paginationLimit]])]),(0,r._)("div",hB,[(0,r._)("div",gB,(0,J.zw)(l.prevRange+1)+" - "+(0,J.zw)(o.currentPage==l.pageCount?a.movements.length:l.nextRange)+" of "+(0,J.zw)(a.movements.length)+" items ",1),(0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.pageCount,(t=>((0,r.wg)(),(0,r.j4)(X.T,{onClick:e=>o.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==o.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,r.w5)((()=>[(0,r._)("span",fB,(0,J.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const yB={class:"md:tw-w-[50%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},_B=(0,r._)("h1",{class:"tw-text-lg tw-font-medium tw-text-blue-500"},"Confirmation",-1),xB={class:"mt-3"},bB=(0,r._)("h2",{class:"mb-2"},"Received",-1),kB={class:"tw-mt-3"},CB=(0,r._)("h2",{class:"tw-text-md mb-1"},"Add note",-1),DB={class:"tw-flex tw-gap-2 mt-3 tw-justify-end"},SB=(0,r._)("span",{class:"text-white"}," Cancel ",-1),zB=(0,r._)("span",{class:"text-white"}," Update ",-1);function UB(t,e,a,i,o,l){const n=(0,r.up)("popup-full"),d=(0,r.up)("MovementDetails"),w=(0,r.up)("popup");return(0,r.wg)(),(0,r.iD)("div",{key:a.movement.id,class:"tw-flex tw-items-center"},[["delivery","admin"].includes(l.user.role)?((0,r.wg)(),(0,r.j4)(X.T,{key:0,onClick:e[0]||(e[0]=t=>o.confirmPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-checkbox-marked-outline")])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.kq)("",!0),(t.$can("view_inventory_movement"),(0,r.wg)(),(0,r.j4)(X.T,{key:2,onClick:e[1]||(e[1]=t=>o.detailsPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-eye-outline")])),_:1})])),_:1})),t.$can("delete_inventory_movement")?((0,r.wg)(),(0,r.j4)(X.T,{key:3,onClick:e[2]||(e[2]=t=>o.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,r.kq)("",!0),t.$can("confirmation_inventory_movement")?((0,r.wg)(),(0,r.j4)(n,{key:4,visible:o.confirmPopup,onCancel:e[6]||(e[6]=t=>o.confirmPopup=!1)},{default:(0,r.w5)((()=>[(0,r._)("div",yB,[_B,(0,r._)("div",xB,[bB,(0,r.Wm)(ol.G,{density:"compact","hide-details":!0,modelValue:o.isConfirmed,"onUpdate:modelValue":e[3]||(e[3]=t=>o.isConfirmed=t),color:"blue"},null,8,["modelValue"])]),(0,r._)("div",kB,[CB,(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.note=t),cols:"30",rows:"3",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n\r\n              ",512),[[s.nr,o.note]])]),(0,r._)("div",DB,[(0,r.Wm)(X.T,{onClick:e[5]||(e[5]=t=>o.confirmPopup=!1),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[SB])),_:1}),(0,r.Wm)(X.T,{loading:o.isLoading,onClick:l.updateMovement,color:"blue",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[zB])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])):(0,r.kq)("",!0),(0,r.Wm)(n,{visible:o.detailsPopup,onCancel:e[8]||(e[8]=t=>o.detailsPopup=!1)},{default:(0,r.w5)((()=>[o.detailsPopup?((0,r.wg)(),(0,r.j4)(d,{key:0,onCancel:e[7]||(e[7]=t=>o.detailsPopup=!1),movement:a.movement},null,8,["movement"])):(0,r.kq)("",!0)])),_:1},8,["visible"]),(0,r.Wm)(w,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this movement?</p> You won't be able to revert this!",loading:o.isLoading,visible:o.showPopup,onResolved:l.handleResolved},null,8,["loading","visible","onResolved"])])}const LB={class:"md:tw-w-[50%] tw-relative tw-max-h-full tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},PB={class:"tw-p-5"},AB={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500 tw-rounded-md tw-overflow-hidden"},WB=(0,r._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,r._)("tr",null,[(0,r._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,r._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"}," SIZE "),(0,r._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," COLOR "),(0,r._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY ")])],-1),$B={class:"tw-w-4 tw-p-4"},EB={class:"tw-w-4 tw-p-4"},OB={class:"tw-w-4 tw-p-4"},TB={class:"tw-w-4 tw-p-4"};function VB(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("div",LB,[(0,r.Wm)(X.T,{onClick:o.cancel,icon:"mdi-close",variant:"flat",size:"w-small",color:"red",class:"tw-absolute tw-top-3 tw-z-10 tw-right-3"},null,8,["onClick"]),(0,r._)("div",PB,[(0,r._)("table",AB,[WB,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.movement.inventory_movement_variations,(t=>((0,r.wg)(),(0,r.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,r._)("td",$B,(0,J.zw)(t.id),1),(0,r._)("td",EB,(0,J.zw)(t.product_variation.size),1),(0,r._)("td",OB,(0,J.zw)(t.product_variation.color),1),(0,r._)("td",TB,(0,J.zw)(t.quantity),1)])))),128))])])])])}var qB={props:["movement"],data(){return{}},computed:{},methods:{cancel(){this.$emit("cancel")}},mounted(){}};const RB=(0,d.Z)(qB,[["render",VB]]);var IB=RB,FB={props:["rowIndex","movement"],components:{MovementDetails:IB},name:"inventoryActions",data(){return{showPopup:!1,confirmPopup:!1,detailsPopup:!1,isConfirmed:!1,note:"",isLoading:!1}},computed:{user(){return this.$store.getters["user/user"]}},methods:{handleResolved(t){t?(this.isLoading=!0,AY["delete"](this.movement.id).then((t=>{"SUCCESS"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Inventory Movement Deleted Successfully"})),this.getMovements()})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1},updateMovement(){this.isLoading=!0,AY.deliveryUpdateMovement(this.movement.id,this.isConfirmed?1:0,this.note).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:"Inventory Movement Updated Successfully"}),this.getMovements())}),this.$handleApiError).finally((()=>{this.isLoading=!1,this.confirmPopup=!1}))},getMovements(){AY.inventoryMovements().then((t=>{if("SHOW_ALL_INVENTORY_MOVEMENTS"==t.data.code){const e=t.data.data;this.$store.dispatch("inventory/setInventoryMovements",e)}})).catch(this.$handleApiError)}},mounted(){this.note=this.movement.note,this.isConfirmed=1==this.movement.is_received}};const jB=(0,d.Z)(FB,[["render",UB]]);var NB=jB,MB={props:["columns","movements"],components:{InventoryMovementsActions:NB},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.movements.length/this.paginationLimit)},items(){return this.movements.slice(this.prevRange,this.nextRange)}},methods:{quantityTotal(t){let e=0;return t.forEach((t=>{e+=t.quantity})),e}}};const HB=(0,d.Z)(MB,[["render",vB]]);var YB=HB,KB={components:{InventoryMovementsTable:YB},data(){return{localUrl:F,isLoaded:!1,showFilters:!1,search:"",columns:[{prop:"id",name:"#"},{prop:"created_at",name:"Date"},{prop:"delivery",name:"Delivery"},{prop:"product",name:"Product"},{prop:"quantity",name:"Quantity"},{prop:"received",name:"Received"},{prop:"note",name:"Note"},{prop:"city",name:"City"},{prop:"actions",name:"Actions"}]}},computed:{inventoryMovements(){return this.$store.getters["inventory/inventoryMovements"]},filteredInventoryState(){return this.inventoryMovements.filter((()=>!0))}},methods:{async getInventoryMovements(){await AY.inventoryMovements().then((t=>{if(console.log(t.data.data),"SHOW_ALL_INVENTORY_MOVEMENTS"==t.data.code){const e=t.data.data;this.$store.dispatch("inventory/setInventoryMovements",e),console.log(e)}}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))}},async mounted(){this.getInventoryMovements()}};const ZB=(0,d.Z)(KB,[["render",KZ]]);var BB=ZB,QB={name:"inventory/list",path:"/inventories",component:ns,meta:{module:"inventory"},children:[{name:"inventory/state",path:"",component:SK,meta:{module:"inventory",subModule:"inventory/list",title:"Inventory State",gate:"show_all_inventory_states"}},{name:"inventory/movememnts",path:"movements",component:BB,meta:{module:"inventory",subModule:"inventory/movements",title:"Inventory Movements",gate:"show_all_inventory_movements"}},{name:"inventory/add",path:"add",component:dZ,meta:{module:"inventory",subModule:"inventory/add",title:"Add Inventory Movement",gate:"create_inventory_movement"}},{name:"inventory/update",path:"update/:id",component:IZ,meta:{module:"inventory",subModule:"inventory/update",title:"Update Inventory Movement",gate:"update_inventory_movement"}}]};const GB={class:"mb-5 tw-flex tw-justify-between tw-items-center"},JB=(0,r._)("div",null,[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Shop List"),(0,r._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your shops")],-1),XB={key:0},tQ=(0,r._)("span",{class:"text-white"}," Add Shop ",-1),eQ={key:0},aQ={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},sQ={class:"mb-5 tw-flex"},rQ={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},iQ={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},oQ={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},lQ=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),nQ={class:"tw-relative"},dQ={class:""};function wQ(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation"),d=(0,r.up)("ShopsTable");return(0,r.wg)(),(0,r.iD)("div",{key:l.shops.length},[(0,r._)("div",GB,[JB,t.$can("create_shop")?((0,r.wg)(),(0,r.iD)("div",XB,[(0,r.Wm)(X.T,{color:"primary-color",link:"",to:{name:"shop/add"},variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{icon:"mdi-plus",class:"mr-2 text-white"}),tQ])),_:1})])):(0,r.kq)("",!0)]),o.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",eQ,[(0,r.Wm)(n)])),o.isLoaded?((0,r.wg)(),(0,r.iD)("div",aQ,[(0,r._)("div",sQ,[(0,r.Wm)(X.T,{onClick:e[0]||(e[0]=t=>o.showFilters=!o.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white",size:"xx-large"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,r._)("div",rQ,[(0,r.Wm)(Qt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[s.nr,o.search]])])]),(0,r._)("div",{class:(0,J.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":o.showFilters}])},[(0,r._)("div",iQ,[(0,r._)("div",oQ,[lQ,(0,r._)("div",nQ,[(0,r.wy)((0,r._)("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=t=>o.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[s.nr,o.date]])])])])],2),(0,r._)("div",dQ,[(0,r.Wm)(d,{columns:o.columns,shops:l.filteredShops},null,8,["columns","shops"])])])):(0,r.kq)("",!0)])}class cQ{async create(t){return await Z.getCookie(),Y.post("api/shops/new",{name:t.name})}async update(t,e){return await Z.getCookie(),Y.post("api/shops/update/"+t,{name:e.name})}async all(){return await Z.getCookie(),Y.get("api/shops")}async getShop(t){return await Z.getCookie(),Y.get("api/shops/"+t)}async delete(t){return await Z.getCookie(),Y["delete"]("api/shops/delete/"+t)}}var uQ=new cQ;const pQ={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},mQ={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},hQ={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},gQ=(0,r._)("th",{scope:"col",class:"tw-p-4"},[(0,r._)("div",{class:"tw-flex tw-items-center"},[(0,r._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,r._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),fQ={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},vQ=(0,r._)("td",{class:"tw-w-4 tw-p-4"},[(0,r._)("div",{class:"tw-flex tw-items-center"},[(0,r._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,r._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),yQ={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},_Q={class:"tw-px-6 tw-py-4"},xQ={class:"tw-px-6 tw-py-4"},bQ={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},kQ={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},CQ={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},DQ=(0,r._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),SQ=["value"],zQ={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},UQ={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},LQ={class:"tw-text-white"};function PQ(t,e,a,i,o,l){const n=(0,r.up)("ShopActions");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",pQ,[(0,r._)("table",mQ,[(0,r._)("thead",hQ,[(0,r._)("tr",null,[gQ,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.columns,(t=>((0,r.wg)(),(0,r.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,r._)("div",fQ,(0,J.zw)(t.name),1)])))),128))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.shops,(t=>((0,r.wg)(),(0,r.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[vQ,(0,r._)("th",yQ,(0,J.zw)(t.id),1),(0,r._)("td",_Q,(0,J.zw)(t.name),1),(0,r._)("td",xQ,(0,J.zw)(t.created_at.split("T")[0]),1),(0,r._)("td",bQ,[(0,r.Wm)(n,{shop:t},null,8,["shop"])])])))),128))])])]),(0,r._)("div",kQ,[(0,r._)("div",CQ,[DQ,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.allowedLimit,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t,key:t},(0,J.zw)(t),9,SQ)))),128))],512),[[s.bM,o.paginationLimit]])]),(0,r._)("div",zQ,[(0,r._)("div",UQ,(0,J.zw)(l.prevRange+1)+" - "+(0,J.zw)(o.currentPage==l.pageCount?a.shops.length:l.nextRange)+" of "+(0,J.zw)(a.shops.length)+" items ",1),(0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.pageCount,(t=>((0,r.wg)(),(0,r.j4)(X.T,{onClick:e=>o.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==o.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,r.w5)((()=>[(0,r._)("span",LQ,(0,J.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const AQ={class:"tw-flex tw-items-center tw-gap-1"};function WQ(t,e,a,s,i,o){const l=(0,r.up)("popup");return(0,r.wg)(),(0,r.iD)("div",AQ,[t.$can("update_shop")?((0,r.wg)(),(0,r.j4)(X.T,{key:0,to:"/shops/update/"+a.shop.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-pencil-outline")])),_:1})])),_:1},8,["to"])):(0,r.kq)("",!0),t.$can("delete_shop")?((0,r.wg)(),(0,r.j4)(X.T,{key:1,onClick:e[0]||(e[0]=t=>i.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(l,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this shop?</p> You won't be able to revert this!",loading:i.isLoading,visible:i.showPopup,onResolved:o.handleResolved},null,8,["loading","visible","onResolved"])])}var $Q={props:["rowIndex","shop"],name:"shopActions",data(){return{showPopup:!1,isLoading:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,uQ["delete"](this.shop.id).then((t=>{"SHOP_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Shop Deleted Successfully"})),uQ.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("shop/setShops",t.data.data.shops)})).catch(this.$handleApiError)})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const EQ=(0,d.Z)($Q,[["render",WQ]]);var OQ=EQ,TQ={props:["columns","shops"],components:{ShopActions:OQ},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.shops.length/this.paginationLimit)},items(){return this.shops.slice(this.prevRange,this.nextRange)}},methods:{}};const VQ=(0,d.Z)(TQ,[["render",PQ]]);var qQ=VQ,RQ={components:{ShopsTable:qQ},data(){return{localUrl:F,isLoaded:!1,showFilters:!1,date:null,search:"",columns:[{prop:"id",name:"#"},{prop:"name",name:"Name"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{shops(){return this.$store.getters["shop/shops"]},filteredShops(){const t=this.date;return this.shops.filter((e=>(!t||e?.created_at.split("T")[0]===t)&&!!e.name.toLowerCase().includes(this.search.toLowerCase())))}},mounted(){uQ.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("shop/setShops",t.data.data.shops)}),(t=>{this.$handleApiError(t)})).finally((()=>this.isLoaded=!0))}};const IQ=(0,d.Z)(RQ,[["render",wQ]]);var FQ=IQ;const jQ=(0,r._)("div",{class:"mb-5"},[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Add Shop "),(0,r._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create new shop")],-1),NQ={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},MQ={class:"tw-w-full"},HQ=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Shop Name ",-1),YQ={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},KQ={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},ZQ=(0,r._)("span",{class:"text-white text-capitalize"},"Cancel",-1),BQ=(0,r._)("span",{class:"text-white text-capitalize"},"Create",-1);function QQ(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("div",null,[jQ,(0,r._)("div",NQ,[(0,r._)("div",null,[(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",MQ,[HQ,(0,r.Wm)(at.hw,{error:!i.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>o.resetError("name")),"hide-details":!0,modelValue:i.shop.name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.shop.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",YQ,(0,J.zw)(i.formStatus.name.message),1)])])),_:1})])),_:1})])),_:1})])),_:1})]),(0,r._)("div",KQ,[(0,r.Wm)(X.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,r.w5)((()=>[ZQ])),_:1}),(0,r.Wm)(X.T,{onClick:o.create,loading:i.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,r.w5)((()=>[BQ])),_:1},8,["onClick","loading"])])])])}var GQ={components:{},data(){return{isLoading:!1,shop:{name:""},formStatus:{name:{valid:!0,message:""}}}},methods:{create(){if(!this.validate())return!1;this.isLoading=!0;let t=this.shop;uQ.create(t).then((t=>{"SHOP_CREATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.shop={name:""}),"VALIDATION_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.errors.ref})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=Ct(this.shop.name,"Shop name"),this.formStatus.name.valid}}};const JQ=(0,d.Z)(GQ,[["render",QQ]]);var XQ=JQ;const tG=(0,r._)("div",{class:"mb-5"},[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Update Shop"),(0,r._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Update shop informations")],-1),eG={key:0},aG={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},sG={class:"tw-flex tw-gap-2 tw-text-neutral-800 tw-items-center tw-mb-5"},rG={class:"tw-block tw-py-1 tw-px-2 tw-rounded-md text-primary-color"},iG={class:"tw-w-full"},oG=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Shop Name",-1),lG={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},nG={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},dG=(0,r._)("span",{class:"text-white text-capitalize"},"Cancel",-1),wG=(0,r._)("span",{class:"text-white text-capitalize"},"Update",-1);function cG(t,e,a,s,i,o){const l=(0,r.up)("LoadingAnimation");return(0,r.wg)(),(0,r.iD)("div",null,[tG,i.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",eG,[(0,r.Wm)(l)])),i.isLoaded?((0,r.wg)(),(0,r.iD)("div",aG,[(0,r._)("div",sG,[(0,r.Uk)(" Shop ID: "),(0,r._)("span",rG,(0,J.zw)(o.id),1)]),(0,r._)("div",null,[(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{cols:"12",md:"6"},{default:(0,r.w5)((()=>[(0,r.Wm)(ws.o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(cs.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,r.w5)((()=>[(0,r._)("div",iG,[oG,(0,r.Wm)(at.hw,{error:!i.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>o.resetError("name")),"hide-details":!0,modelValue:i.shop.name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.shop.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",lG,(0,J.zw)(i.formStatus.name.message),1)])])),_:1})])),_:1})])),_:1})])),_:1})]),(0,r._)("div",nG,[(0,r.Wm)(X.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,r.w5)((()=>[dG])),_:1}),(0,r.Wm)(X.T,{onClick:o.update,loading:i.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,r.w5)((()=>[wG])),_:1},8,["onClick","loading"])])])):(0,r.kq)("",!0)])}var uG={components:{},data(){return{isLoading:!1,isLoaded:!1,shop:{name:""},formStatus:{name:{valid:!0,message:""}}}},computed:{id(){return this.$route.params.id}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0;let t=this.shop;uQ.update(this.$route.params.id,t).then((t=>{"SHOP_UPDATED"==t.data.code&&this.$alert({type:"success",title:t.data.message}),"SHOP_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=Ct(this.shop.name,"Shop name"),this.formStatus.name.valid}},mounted(){uQ.getShop(this.$route.params.id).then((t=>{if("SUCCESS"==t.data.code){const{name:e}=t.data.data.shops;this.shop.name=e,this.isLoaded=!0}}),this.$handleApiError)}};const pG=(0,d.Z)(uG,[["render",cG]]);var mG=pG,hG={name:"shops",path:"/shops",component:ns,meta:{module:"shop"},children:[{name:"shop/list",path:"",component:FQ,meta:{module:"shop",subModule:"shop/list",title:"Shop List",gate:"show_all_sales"}},{name:"shop/add",path:"add",component:XQ,meta:{module:"shop",subModule:"shop/add",title:"Shop Add",gate:"create_shop"}},{name:"shop/update",path:"update/:id",component:mG,meta:{module:"shop",subModule:"shop/update",title:"Update Shop",gate:"update_shop"}}]};const gG={class:"mb-5 tw-flex tw-justify-between tw-items-center"},fG=(0,r._)("div",null,[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Warehouse List"),(0,r._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your warehouses")],-1),vG={key:0},yG=(0,r._)("span",{class:"text-white"}," Add Warehouse ",-1),_G={key:0},xG={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},bG={class:"mb-5 tw-flex"},kG={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},CG={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},DG={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},SG=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),zG={class:"tw-relative"},UG={class:""};function LG(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation"),d=(0,r.up)("WarehousesTable"),w=(0,r.up)("AddWarehouse");return(0,r.wg)(),(0,r.iD)("div",{key:l.warehouses.length},[(0,r._)("div",gG,[fG,t.$can("create_warehouse")?((0,r.wg)(),(0,r.iD)("div",vG,[(0,r.Wm)(X.T,{color:"primary-color",onClick:e[0]||(e[0]=t=>o.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{icon:"mdi-plus",class:"mr-2 text-white"}),yG])),_:1})])):(0,r.kq)("",!0)]),o.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",_G,[(0,r.Wm)(n)])),o.isLoaded?((0,r.wg)(),(0,r.iD)("div",xG,[(0,r._)("div",bG,[(0,r.Wm)(X.T,{onClick:e[1]||(e[1]=t=>o.showFilters=!o.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white",size:"xx-large"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,r._)("div",kG,[(0,r.Wm)(Qt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[s.nr,o.search]])])]),(0,r._)("div",{class:(0,J.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":o.showFilters}])},[(0,r._)("div",CG,[(0,r._)("div",DG,[SG,(0,r._)("div",zG,[(0,r.wy)((0,r._)("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=t=>o.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[s.nr,o.date]])])])])],2),(0,r._)("div",UG,[(0,r.Wm)(d,{columns:o.columns,warehouses:l.filteredWarehouses},null,8,["columns","warehouses"])]),(0,r.Wm)(w,{onCancel:e[4]||(e[4]=t=>o.showPopup=!1),visible:o.showPopup},null,8,["visible"])])):(0,r.kq)("",!0)])}const PG={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},AG={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},WG={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},$G=(0,r._)("th",{scope:"col",class:"tw-p-4"},[(0,r._)("div",{class:"tw-flex tw-items-center"},[(0,r._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,r._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),EG={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},OG=(0,r._)("td",{class:"tw-w-4 tw-p-4"},[(0,r._)("div",{class:"tw-flex tw-items-center"},[(0,r._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,r._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),TG={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},VG={class:"tw-px-6 tw-py-4"},qG={class:"tw-px-6 tw-py-4"},RG={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},IG={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},FG={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},jG=(0,r._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),NG=["value"],MG={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},HG={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},YG={class:"tw-text-white"};function KG(t,e,a,i,o,l){const n=(0,r.up)("WarehouseActions");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",PG,[(0,r._)("table",AG,[(0,r._)("thead",WG,[(0,r._)("tr",null,[$G,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.columns,(t=>((0,r.wg)(),(0,r.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,r._)("div",EG,(0,J.zw)(t.name),1)])))),128))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.warehouses,(t=>((0,r.wg)(),(0,r.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[OG,(0,r._)("th",TG,(0,J.zw)(t.id),1),(0,r._)("td",VG,(0,J.zw)(t.name),1),(0,r._)("td",qG,(0,J.zw)(t.created_at.split("T")[0]),1),(0,r._)("td",RG,[(0,r.Wm)(n,{warehouse:t},null,8,["warehouse"])])])))),128))])])]),(0,r._)("div",IG,[(0,r._)("div",FG,[jG,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.allowedLimit,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t,key:t},(0,J.zw)(t),9,NG)))),128))],512),[[s.bM,o.paginationLimit]])]),(0,r._)("div",MG,[(0,r._)("div",HG,(0,J.zw)(l.prevRange+1)+" - "+(0,J.zw)(o.currentPage==l.pageCount?a.warehouses.length:l.nextRange)+" of "+(0,J.zw)(a.warehouses.length)+" items ",1),(0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.pageCount,(t=>((0,r.wg)(),(0,r.j4)(X.T,{onClick:e=>o.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==o.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,r.w5)((()=>[(0,r._)("span",YG,(0,J.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const ZG={class:"tw-flex tw-items-center tw-gap-1"};function BG(t,e,a,s,i,o){const l=(0,r.up)("UpdateWarehouse"),n=(0,r.up)("popup");return(0,r.wg)(),(0,r.iD)("div",ZG,[t.$can("update_warehouse")?((0,r.wg)(),(0,r.j4)(X.T,{key:0,onClick:e[0]||(e[0]=t=>i.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,r.kq)("",!0),t.$can("delete_warehouse")?((0,r.wg)(),(0,r.j4)(X.T,{key:1,onClick:e[1]||(e[1]=t=>i.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,r.kq)("",!0),((0,r.wg)(),(0,r.j4)(l,{visible:i.showUpdatePopup,onCancel:e[2]||(e[2]=t=>i.showUpdatePopup=!1),key:a.warehouse.id,warehouse:a.warehouse},null,8,["visible","warehouse"])),(0,r.Wm)(n,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this warehouse?</p> You won't be able to revert this!",loading:i.isLoading,visible:i.showPopup,onResolved:o.handleResolved},null,8,["loading","visible","onResolved"])])}const QG={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[500px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},GG=(0,r._)("h1",{class:"tw-text-lg"},"Update Warehouse",-1),JG={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},XG={class:"tw-w-full tw-col-span-12"},tJ=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Warehouse Name",-1),eJ={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},aJ={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},sJ=(0,r._)("span",{class:"text-white"}," Cancel ",-1),rJ=(0,r._)("span",{class:"text-white"}," Update ",-1);function iJ(t,e,a,s,i,o){const l=(0,r.up)("popup-full");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(l,{onCancel:e[3]||(e[3]=e=>t.$emit("cancel")),visible:a.visible},{default:(0,r.w5)((()=>[(0,r._)("div",QG,[GG,(0,r._)("div",JG,[(0,r._)("div",XG,[tJ,(0,r.Wm)(at.hw,{error:!i.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>o.resetError("name")),"hide-details":!0,modelValue:i.Warehouse.name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.Warehouse.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",eJ,(0,J.zw)(i.formStatus.name.message),1)])]),(0,r._)("div",aJ,[(0,r.Wm)(X.T,{onClick:e[2]||(e[2]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[sJ])),_:1}),(0,r.Wm)(X.T,{loading:i.isLoading,onClick:o.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[rJ])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var oJ={components:{},props:["warehouse","visible"],data(){return{isLoading:!1,isLoaded:!1,Warehouse:{name:""},formStatus:{name:{valid:!0,message:""}}}},computed:{},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,vh.update(this.warehouse.id,this.Warehouse).then((t=>{"WAREHOUSE_UPDATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.$store.dispatch("warehouse/update",this.Warehouse),this.$emit("cancel")),"WAREHOUSE_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=Ct(this.Warehouse.name,"Warehouse name"),this.formStatus.name.valid}},mounted(){this.Warehouse={...this.warehouse}}};const lJ=(0,d.Z)(oJ,[["render",iJ]]);var nJ=lJ,dJ={components:{UpdateWarehouse:nJ},props:["rowIndex","warehouse"],name:"warehouseActions",data(){return{showPopup:!1,isLoading:!1,showUpdatePopup:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,vh["delete"](this.warehouse.id).then((t=>{"WAREHOUSE_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Warehouse Deleted Successfully"}),this.$store.dispatch("warehouse/delete",this.warehouse.id))})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const wJ=(0,d.Z)(dJ,[["render",BG]]);var cJ=wJ,uJ={props:["columns","warehouses"],components:{WarehouseActions:cJ},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.warehouses.length/this.paginationLimit)},items(){return this.warehouses.slice(this.prevRange,this.nextRange)}},methods:{}};const pJ=(0,d.Z)(uJ,[["render",KG]]);var mJ=pJ;const hJ={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[500px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},gJ=(0,r._)("h1",{class:"tw-text-lg"},"Create Warehouse",-1),fJ={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},vJ={class:"tw-w-full tw-col-span-12"},yJ=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Warehouse Name",-1),_J={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},xJ={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},bJ=(0,r._)("span",{class:"text-white"}," Cancel ",-1),kJ=(0,r._)("span",{class:"text-white"}," Create ",-1);function CJ(t,e,a,s,i,o){const l=(0,r.up)("popup-full");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(l,{onCancel:e[3]||(e[3]=e=>t.$emit("cancel")),visible:a.visible},{default:(0,r.w5)((()=>[(0,r._)("div",hJ,[gJ,(0,r._)("div",fJ,[(0,r._)("div",vJ,[yJ,(0,r.Wm)(at.hw,{error:!i.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>o.resetError("name")),"hide-details":!0,modelValue:i.warehouse.name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.warehouse.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",_J,(0,J.zw)(i.formStatus.name.message),1)])]),(0,r._)("div",xJ,[(0,r.Wm)(X.T,{onClick:e[2]||(e[2]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[bJ])),_:1}),(0,r.Wm)(X.T,{loading:i.isLoading,onClick:o.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[kJ])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var DJ={props:["visible"],components:{},data(){return{isLoading:!1,warehouse:{name:""},formStatus:{name:{valid:!0,message:""}}}},methods:{create(){if(!this.validate())return!1;this.isLoading=!0;let t=this.warehouse;vh.create(t).then((t=>{if("WAREHOUSE_CREATED"==t.data.code){this.$alert({type:"success",title:t.data.message});const e=t.data.data.warehouse;this.$store.dispatch("warehouse/addWarehouse",e),this.$emit("cancel"),this.warehouse={name:""}}"VALIDATION_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.errors.ref})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=Ct(this.warehouse.name,"Warehouse name"),this.formStatus.name.valid}}};const SJ=(0,d.Z)(DJ,[["render",CJ]]);var zJ=SJ,UJ={components:{WarehousesTable:mJ,AddWarehouse:zJ},data(){return{localUrl:F,isLoaded:!1,showFilters:!1,date:null,search:"",showPopup:!1,columns:[{prop:"id",name:"#"},{prop:"name",name:"Name"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{warehouses(){return this.$store.getters["warehouse/warehouses"]},filteredWarehouses(){const t=this.date;return this.warehouses.filter((e=>(!t||e?.created_at.split("T")[0]===t)&&!!e.name.toLowerCase().includes(this.search.toLowerCase())))}},mounted(){vh.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("warehouse/setWarehouses",t.data.data.warehouses)}),(t=>{this.$handleApiError(t)})).finally((()=>this.isLoaded=!0))}};const LJ=(0,d.Z)(UJ,[["render",LG]]);var PJ=LJ,AJ={name:"warehouses",path:"/warehouses",component:ns,meta:{module:"warehouse"},children:[{name:"warehouse/list",path:"",component:PJ,meta:{module:"warehouse",subModule:"warehouse/list",title:"Warehouse List",gate:"show_all_warehouses"}}]};const WJ=(0,r._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,r._)("div",null,[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Factorisation List"),(0,r._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your factorisations")])],-1),$J={key:0},EJ={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},OJ={class:"mb-5 tw-flex"},TJ={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},VJ={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},qJ={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},RJ=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),IJ={class:"tw-relative"},FJ={class:""};function jJ(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation"),d=(0,r.up)("FactorisationsTable");return(0,r.wg)(),(0,r.iD)("div",{key:l.factorisations.length},[WJ,o.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",$J,[(0,r.Wm)(n)])),o.isLoaded?((0,r.wg)(),(0,r.iD)("div",EJ,[(0,r._)("div",OJ,[(0,r.Wm)(X.T,{onClick:e[0]||(e[0]=t=>o.showFilters=!o.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white",size:"xx-large"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,r._)("div",TJ,[(0,r.Wm)(Qt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[s.nr,o.search]])])]),(0,r._)("div",{class:(0,J.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":o.showFilters}])},[(0,r._)("div",VJ,[(0,r._)("div",qJ,[RJ,(0,r._)("div",IJ,[(0,r.wy)((0,r._)("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=t=>o.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[s.nr,o.date]])])])])],2),(0,r._)("div",FJ,[(0,r.Wm)(d,{columns:o.columns,factorisations:l.filteredFactorisations},null,8,["columns","factorisations"])])])):(0,r.kq)("",!0)])}class NJ{async update(t,e){return await Z.getCookie(),Y.post("api/factorisations/update/"+t,{factorisation_id:e.factorisation_id,delivery_id:e.delivery_id,price:e.price,commands_number:e.commands_number})}async updateComment(t,e){return await Z.getCookie(),Y.post("api/factorisations/update/comment/"+t,{comment:e.comment})}async updatePaid(t,e){return await Z.getCookie(),Y.post("api/factorisations/update/payment/"+t,{paid:e})}async updateClose(t,e){return await Z.getCookie(),Y.post("api/factorisations/update/closing/"+t,{close:e})}async all(){return await Z.getCookie(),Y.get("api/factorisations")}async getFactorisation(t){return await Z.getCookie(),Y.get("api/factorisations/"+t)}async delete(t){return await Z.getCookie(),Y["delete"]("api/factorisations/delete/"+t)}}var MJ=new NJ;const HJ={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},YJ={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},KJ={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},ZJ=(0,r._)("th",{scope:"col",class:"tw-p-4"},[(0,r._)("div",{class:"tw-flex tw-items-center"},[(0,r._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,r._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),BJ={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},QJ={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},GJ={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},JJ=(0,r._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"}," Show per page: ",-1),XJ=["value"],tX={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},eX={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},aX={class:"tw-text-white"};function sX(t,e,a,i,o,l){const n=(0,r.up)("FactorisationRow");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",HJ,[(0,r._)("table",YJ,[(0,r._)("thead",KJ,[(0,r._)("tr",null,[ZJ,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.columns,(t=>((0,r.wg)(),(0,r.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,r._)("div",BJ,(0,J.zw)(t.name),1)])))),128))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.factorisations,(t=>((0,r.wg)(),(0,r.j4)(n,{factorisation:t,key:t.id},null,8,["factorisation"])))),128))])])]),(0,r._)("div",QJ,[(0,r._)("div",GJ,[JJ,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.allowedLimit,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t,key:t},(0,J.zw)(t),9,XJ)))),128))],512),[[s.bM,o.paginationLimit]])]),(0,r._)("div",tX,[(0,r._)("div",eX,(0,J.zw)(l.prevRange+1)+" - "+(0,J.zw)(o.currentPage==l.pageCount?a.factorisations.length:l.nextRange)+" of "+(0,J.zw)(a.factorisations.length)+" items ",1),(0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.pageCount,(t=>((0,r.wg)(),(0,r.j4)(X.T,{onClick:e=>o.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==o.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,r.w5)((()=>[(0,r._)("span",aX,(0,J.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const rX={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},iX=(0,r._)("td",{class:"tw-w-4 tw-p-4"},[(0,r._)("div",{class:"tw-flex tw-items-center"},[(0,r._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,r._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),oX={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},lX={class:"tw-px-6 tw-py-4"},nX={class:"tw-px-6 tw-py-4"},dX={class:"tw-px-6 tw-py-4"},wX={class:"tw-px-6 tw-py-4"},cX={class:"tw-px-6 tw-py-4"},uX={class:"tw-px-6 tw-py-4"},pX={class:"tw-px-6 tw-py-4"},mX={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},hX={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},gX=["disabled"],fX=(0,r._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),vX={class:"tw-px-6 tw-py-4"},yX={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},_X={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},xX=["disabled"],bX=(0,r._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),kX={class:"tw-px-6 tw-py-4"},CX={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"};function DX(t,e,a,i,o,l){const n=(0,r.up)("FactorisationActions");return(0,r.wg)(),(0,r.iD)("tr",rX,[iX,(0,r._)("th",oX,(0,J.zw)(a.factorisation.id),1),(0,r._)("td",lX,[(0,r._)("button",{class:"tw-underline",onClick:e[0]||(e[0]=t=>l.download(a.factorisation.id))},(0,J.zw)(a.factorisation.factorisation_id),1)]),(0,r._)("td",nX,(0,J.zw)(l.deliveryName),1),(0,r._)("td",dX,(0,J.zw)(a.factorisation.commands_number),1),(0,r._)("td",wX,(0,J.zw)(a.factorisation.price),1),(0,r._)("td",cX,(0,J.zw)(a.factorisation.close_at?.split("T")[0]),1),(0,r._)("td",uX,(0,J.zw)(a.factorisation.paid_at?.split("T")[0]),1),(0,r._)("td",pX,[(0,r._)("div",mX,[(0,r._)("label",hX,[(0,r.wy)((0,r._)("input",{disabled:o.isLoadingClose,"onUpdate:modelValue":e[1]||(e[1]=t=>l.close=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,8,gX),[[s.e8,l.close]]),fX]),o.isLoadingClose?((0,r.wg)(),(0,r.j4)(et.t,{key:0,color:"green",size:"small",class:"tw-animate-spin"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-loading")])),_:1})):(0,r.kq)("",!0)])]),(0,r._)("td",vX,[(0,r._)("div",yX,[(0,r._)("label",_X,[(0,r.wy)((0,r._)("input",{disabled:o.isLoadingPaid,"onUpdate:modelValue":e[2]||(e[2]=t=>l.paid=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,8,xX),[[s.e8,l.paid]]),bX]),o.isLoadingPaid?((0,r.wg)(),(0,r.j4)(et.t,{key:0,color:"green",size:"small",class:"tw-animate-spin"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-loading")])),_:1})):(0,r.kq)("",!0)])]),(0,r._)("td",kX,(0,J.zw)(a.factorisation.created_at.split("T")[0]),1),(0,r._)("td",CX,[(0,r.Wm)(n,{factorisation:a.factorisation},null,8,["factorisation"])])])}const SX={class:"tw-flex tw-items-center tw-gap-1"};function zX(t,e,a,s,i,o){const l=(0,r.up)("UpdateFactorisation"),n=(0,r.up)("UpdateComment"),d=(0,r.up)("popup");return(0,r.wg)(),(0,r.iD)("div",SX,[t.$can("update_factorisation")?((0,r.wg)(),(0,r.j4)(X.T,{key:0,onClick:e[0]||(e[0]=t=>i.showUpdateCommentPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-comment-text")])),_:1})])),_:1})):(0,r.kq)("",!0),t.$can("update_factorisation")?((0,r.wg)(),(0,r.j4)(X.T,{key:1,onClick:e[1]||(e[1]=t=>i.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,r.kq)("",!0),t.$can("delete_factorisation")?((0,r.wg)(),(0,r.j4)(X.T,{key:2,onClick:e[2]||(e[2]=t=>i.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,r.kq)("",!0),((0,r.wg)(),(0,r.j4)(l,{visible:i.showUpdatePopup,onCancel:e[3]||(e[3]=t=>i.showUpdatePopup=!1),key:a.factorisation.id,factorisation:a.factorisation},null,8,["visible","factorisation"])),((0,r.wg)(),(0,r.j4)(n,{visible:i.showUpdateCommentPopup,onCancel:e[4]||(e[4]=t=>i.showUpdateCommentPopup=!1),key:a.factorisation.id,factorisation:a.factorisation},null,8,["visible","factorisation"])),(0,r.Wm)(d,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this factorisation?</p> You won't be able to revert this!",loading:i.isLoading,visible:i.showPopup,onResolved:o.handleResolved},null,8,["loading","visible","onResolved"])])}const UX={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},LX=(0,r._)("h1",{class:"tw-text-lg"},"Update Factorisation",-1),PX={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},AX={class:"tw-w-full tw-col-span-6"},WX=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Factorisation Code ",-1),$X={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},EX={class:"tw-w-full tw-col-span-6"},OX=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery",-1),TX={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},VX={class:"tw-w-full tw-col-span-6"},qX=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Total Price",-1),RX={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},IX={class:"tw-w-full tw-col-span-6"},FX=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Nb Commands",-1),jX={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},NX={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},MX=(0,r._)("span",{class:"text-white"}," Cancel ",-1),HX=(0,r._)("span",{class:"text-white"}," Update ",-1);function YX(t,e,a,s,i,o){const l=(0,r.up)("popup-full");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(l,{onCancel:e[9]||(e[9]=e=>t.$emit("cancel")),visible:a.visible},{default:(0,r.w5)((()=>[(0,r._)("div",UX,[LX,(0,r._)("div",PX,[(0,r._)("div",AX,[WX,(0,r.Wm)(at.hw,{error:!i.formStatus.factorisation_id.valid,onKeyup:e[0]||(e[0]=t=>o.resetError("factorisation_id")),"hide-details":!0,modelValue:i.Factorisation.factorisation_id,"onUpdate:modelValue":e[1]||(e[1]=t=>i.Factorisation.factorisation_id=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",$X,(0,J.zw)(i.formStatus.factorisation_id.message),1)]),(0,r._)("div",EX,[OX,(0,r.Wm)(at.hw,{error:!i.formStatus.delivery_id.valid,onKeyup:e[2]||(e[2]=t=>o.resetError("delivery_id")),"hide-details":!0,disabled:!0,modelValue:o.deliveryName,"onUpdate:modelValue":e[3]||(e[3]=t=>o.deliveryName=t),clearable:"",disable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",TX,(0,J.zw)(i.formStatus.delivery_id.message),1)]),(0,r._)("div",VX,[qX,(0,r.Wm)(at.hw,{error:!i.formStatus.price.valid,onKeyup:e[4]||(e[4]=t=>o.resetError("price")),"hide-details":!0,modelValue:i.Factorisation.price,"onUpdate:modelValue":e[5]||(e[5]=t=>i.Factorisation.price=t),disabled:!0,clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",RX,(0,J.zw)(i.formStatus.price.message),1)]),(0,r._)("div",IX,[FX,(0,r.Wm)(at.hw,{error:!i.formStatus.commands_number.valid,disabled:!0,onKeyup:e[6]||(e[6]=t=>o.resetError("commands_number")),"hide-details":!0,modelValue:i.Factorisation.commands_number,"onUpdate:modelValue":e[7]||(e[7]=t=>i.Factorisation.commands_number=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",jX,(0,J.zw)(i.formStatus.commands_number.message),1)])]),(0,r._)("div",NX,[(0,r.Wm)(X.T,{onClick:e[8]||(e[8]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[MX])),_:1}),(0,r.Wm)(X.T,{loading:i.isLoading,onClick:o.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[HX])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var KX={components:{},props:["factorisation","visible"],data(){return{isLoading:!1,isLoaded:!1,Factorisation:{factorisation_id:"",delivery_id:0,price:0,commands_number:0,note:""},formStatus:{factorisation_id:{valid:!0,message:""},delivery_id:{valid:!0,message:""},price:{valid:!0,message:""},commands_number:{valid:!0,message:""}}}},computed:{deliveryName:{get(){return this.Factorisation.delivery.firstname+" "+this.Factorisation.delivery.lastname},set(t){console.log(t)}}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,MJ.update(this.factorisation.id,this.Factorisation).then((t=>{"FACTORISATION_UPDATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.$store.dispatch("factorisation/update",this.Factorisation),this.$emit("cancel")),"FACTORISATION_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.factorisation_id=Ct(this.Factorisation.factorisation_id,"Factorisation Code"),this.formStatus.price=Dt(this.Factorisation.price,"Factorisation Price"),this.formStatus.commands_number=Dt(this.Factorisation.commands_number,"Factorisation Nb Commands"),this.formStatus.factorisation_id.valid&&this.formStatus.price.valid&&this.formStatus.commands_number.valid}},mounted(){this.Factorisation={...this.factorisation}}};const ZX=(0,d.Z)(KX,[["render",YX]]);var BX=ZX;const QX={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},GX=(0,r._)("h1",{class:"tw-text-lg"},"Update Factorisation Comment",-1),JX={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},XX={class:"tw-w-full tw-col-span-6"},t0=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Total Price",-1),e0={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},a0={class:"tw-w-full tw-col-span-6"},s0=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Nb Commands",-1),r0={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},i0={class:"tw-w-full tw-col-span-12"},o0=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Comment",-1),l0=["error"],n0={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},d0={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},w0=(0,r._)("span",{class:"text-white"}," Cancel ",-1),c0=(0,r._)("span",{class:"text-white"}," Update ",-1);function u0(t,e,a,i,o,l){const n=(0,r.up)("popup-full");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(n,{onCancel:e[7]||(e[7]=e=>t.$emit("cancel")),visible:a.visible},{default:(0,r.w5)((()=>[(0,r._)("div",QX,[GX,(0,r._)("div",JX,[(0,r._)("div",XX,[t0,(0,r.Wm)(at.hw,{error:!o.formStatus.price.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("price")),"hide-details":!0,modelValue:o.Factorisation.price,"onUpdate:modelValue":e[1]||(e[1]=t=>o.Factorisation.price=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",disabled:"",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",e0,(0,J.zw)(o.formStatus.price.message),1)]),(0,r._)("div",a0,[s0,(0,r.Wm)(at.hw,{error:!o.formStatus.commands_number.valid,onKeyup:e[2]||(e[2]=t=>l.resetError("commands_number")),"hide-details":!0,modelValue:o.Factorisation.commands_number,"onUpdate:modelValue":e[3]||(e[3]=t=>o.Factorisation.commands_number=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",disabled:"",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,r._)("div",r0,(0,J.zw)(o.formStatus.commands_number.message),1)]),(0,r._)("div",i0,[o0,(0,r.wy)((0,r._)("textarea",{error:!o.formStatus.commands_number.valid,onKeyup:e[4]||(e[4]=t=>l.resetError("commands_number")),"hide-details":!0,clearable:"","clear-icon":"mdi-close","onUpdate:modelValue":e[5]||(e[5]=t=>o.Factorisation.comment=t),variant:"outlined",density:"compact",cols:"30",rows:"5",color:"primary-color",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-400 focus:tw-border-orange-500"},"\r\n            ",40,l0),[[s.nr,o.Factorisation.comment]]),(0,r._)("div",n0,(0,J.zw)(o.formStatus.commands_number.message),1)])]),(0,r._)("div",d0,[(0,r.Wm)(X.T,{onClick:e[6]||(e[6]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[w0])),_:1}),(0,r.Wm)(X.T,{loading:o.isLoading,onClick:l.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[c0])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var p0={components:{},props:["factorisation","visible"],data(){return{isLoading:!1,isLoaded:!1,Factorisation:{price:0,commands_number:0,comment:""},formStatus:{price:{valid:!0,message:""},commands_number:{valid:!0,message:""},comment:{valid:!0,message:""}}}},computed:{},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,MJ.updateComment(this.factorisation.id,this.Factorisation).then((t=>{"FACTORISATION_UPDATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.$store.dispatch("factorisation/update",this.Factorisation),this.$emit("cancel")),"FACTORISATION_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.comment=Ct(this.Factorisation.comment,"Factorisation Comment"),this.formStatus.comment.valid}},mounted(){this.Factorisation={...this.factorisation}}};const m0=(0,d.Z)(p0,[["render",u0]]);var h0=m0,g0={components:{UpdateFactorisation:BX,UpdateComment:h0},props:["rowIndex","factorisation"],name:"factorisationActions",data(){return{showPopup:!1,isLoading:!1,showUpdatePopup:!1,showUpdateCommentPopup:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,MJ["delete"](this.factorisation.id).then((t=>{"FACTORISATION_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Factorisation Deleted Successfully"}),this.$store.dispatch("factorisation/delete",this.factorisation.id)),"DELETE_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const f0=(0,d.Z)(g0,[["render",zX]]);var v0=f0,y0={props:["factorisation"],components:{FactorisationActions:v0},data(){return{isLoadingPaid:!1,isLoadingClose:!1}},computed:{deliveryName:{get(){return this.factorisation.delivery.firstname+" "+this.factorisation.delivery.lastname},set(t){console.log(t)}},paid:{get(){return 1==this.factorisation.paid},set(t){this.updatePaid(t)}},close:{get(){return 1==this.factorisation.close},set(t){this.updateClose(t)}}},methods:{updatePaid(t){this.isLoadingPaid=!0,MJ.updatePaid(this.factorisation.id,t).then((t=>{"FACTORISATION_UPDATED"==t.data.code&&this.$store.dispatch("factorisation/update",t.data.data.factorisation)}),this.$handleApiError).finally((()=>{this.isLoadingPaid=!1}))},updateClose(t){this.isLoadingClose=!0,MJ.updateClose(this.factorisation.id,t).then((t=>{"FACTORISATION_UPDATED"==t.data.code&&this.$store.dispatch("factorisation/update",t.data.data.factorisation)}),this.$handleApiError).finally((()=>{this.isLoadingClose=!1}))},download(t){const e=j+"api/factorisations/generate-pdf/"+t,a=document.createElement("a");a.href=e,a.target="_blank",a.setAttribute("download","dd.pdf"),document.body.appendChild(a),a.click(),document.body.removeChild(a)}}};const _0=(0,d.Z)(y0,[["render",DX]]);var x0=_0,b0={props:["columns","factorisations"],components:{FactorisationRow:x0},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.factorisations.length/this.paginationLimit)},items(){return this.factorisations.slice(this.prevRange,this.nextRange)}},methods:{}};const k0=(0,d.Z)(b0,[["render",sX]]);var C0=k0,D0={components:{FactorisationsTable:C0},data(){return{localUrl:F,isLoaded:!1,showFilters:!1,date:null,search:"",showPopup:!1,columns:[{prop:"id",name:"#"},{prop:"factorisation_id",name:"Code"},{prop:"delivery_id",name:"Delivery"},{prop:"commands_number",name:"Nb Commands"},{prop:"price",name:"Total Price"},{prop:"close_at",name:"Closed at"},{prop:"paid_at",name:"Paid at"},{prop:"close",name:"Close"},{prop:"paid",name:"Paid"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{factorisations(){return this.$store.getters["factorisation/factorisations"]},filteredFactorisations(){const t=this.date;return this.factorisations.filter((e=>!t||e?.created_at.split("T")[0]===t))}},mounted(){MJ.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("factorisation/setFactorisations",t.data.data.factorisations)}),(t=>{this.$handleApiError(t)})).finally((()=>this.isLoaded=!0))}};const S0=(0,d.Z)(D0,[["render",jJ]]);var z0=S0,U0={name:"factorisations",path:"/factorisations",component:ns,meta:{module:"factorisation"},children:[{name:"factorisation/list",path:"",component:z0,meta:{module:"factorisation",subModule:"factorisation/list",title:"Factorisations List",gate:"show_all_factorisations"}}]};const L0={class:"mb-5 tw-flex tw-justify-between tw-items-center"},P0=(0,r._)("div",null,[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Google Sheets"),(0,r._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your google sheets")],-1),A0=(0,r._)("span",{class:"text-white"}," Add Sheet ",-1),W0={key:0},$0={key:1,class:"py-5 px-5 tw-mb-5 tw-border bg-white tw-w-full tw-rounded-md"},E0={class:"tw-flex tw-items-center tw-gap-2"},O0=(0,r._)("h1",null,"Application's email",-1),T0={class:"tw-bg-gray-100 tw-border tw-border-gray-300 tw-rounded tw-py-2 tw-px-2 tw-text-sm tw-mt-2 tw-text-gray-700"},V0=(0,r._)("p",{class:"tw-mt-1 tw-text-xs tw-text-gray-400"}," Use this email to give access to Google Sheets ",-1),q0={key:2,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},R0={class:"mb-5 tw-flex"},I0={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},F0={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},j0={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},N0=(0,r._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),M0={class:"tw-relative"},H0={class:""};function Y0(t,e,a,i,o,l){const n=(0,r.up)("LoadingAnimation"),d=(0,r.up)("SheetsTable"),w=(0,r.up)("AddSheet");return(0,r.wg)(),(0,r.iD)("div",{key:l.sheets.length},[(0,r._)("div",L0,[P0,(0,r._)("div",null,[t.$can("create_sheet")?((0,r.wg)(),(0,r.j4)(X.T,{key:0,color:"primary-color",onClick:e[0]||(e[0]=t=>o.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{icon:"mdi-plus",class:"mr-2 text-white"}),A0])),_:1})):(0,r.kq)("",!0)])]),o.isLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",W0,[(0,r.Wm)(n)])),o.isLoaded?((0,r.wg)(),(0,r.iD)("div",$0,[(0,r._)("div",E0,[O0,(0,r._)("button",{onClick:e[1]||(e[1]=(...t)=>l.copy&&l.copy(...t)),class:"tw-bg-gray-100 tw-border tw-border-gray-300 tw-rounded tw-w-[30px] tw-h-[30px] tw-text-gray-500 hover:tw-text-gray-700 tw-duration-300 tw-border-solid hover:tw-border-gray-400"},[(0,r.Wm)(et.t,{class:"tw-text-xs"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-content-copy")])),_:1})])]),(0,r._)("div",T0,(0,J.zw)(o.email),1),V0])):(0,r.kq)("",!0),o.isLoaded?((0,r.wg)(),(0,r.iD)("div",q0,[(0,r._)("div",R0,[(0,r.Wm)(X.T,{onClick:e[2]||(e[2]=t=>o.showFilters=!o.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white",size:"xx-large"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,r._)("div",I0,[(0,r.Wm)(Qt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:o.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[s.nr,o.search]])])]),(0,r._)("div",{class:(0,J.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":o.showFilters}])},[(0,r._)("div",F0,[(0,r._)("div",j0,[N0,(0,r._)("div",M0,[(0,r.wy)((0,r._)("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=t=>o.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[s.nr,o.date]])])])])],2),(0,r._)("div",H0,[(0,r.Wm)(d,{sheets:l.sheets},null,8,["sheets"])]),(0,r.Wm)(w,{onCancel:e[5]||(e[5]=t=>o.showPopup=!1),visible:o.showPopup},null,8,["visible"])])):(0,r.kq)("",!0)])}const K0={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},Z0={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},B0={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},Q0=(0,r._)("th",{scope:"col",class:"tw-p-4"},[(0,r._)("div",{class:"tw-flex tw-items-center"},[(0,r._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,r._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),G0={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},J0={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},X0={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},t1=(0,r._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"}," Show per page: ",-1),e1=["value"],a1={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},s1={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},r1={class:"tw-text-white"};function i1(t,e,a,i,o,l){const n=(0,r.up)("SheetRow");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",K0,[(0,r._)("table",Z0,[(0,r._)("thead",B0,[(0,r._)("tr",null,[Q0,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.columns,(t=>((0,r.wg)(),(0,r.iD)("th",{key:t,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,r._)("div",G0,(0,J.zw)(t),1)])))),128))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.sheets,(t=>((0,r.wg)(),(0,r.j4)(n,{sheet:t,key:t.id},null,8,["sheet"])))),128))])])]),(0,r._)("div",J0,[(0,r._)("div",X0,[t1,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.allowedLimit,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t,key:t},(0,J.zw)(t),9,e1)))),128))],512),[[s.bM,o.paginationLimit]])]),(0,r._)("div",a1,[(0,r._)("div",s1,(0,J.zw)(l.prevRange+1)+" - "+(0,J.zw)(o.currentPage==l.pageCount?a.sheets.length:l.nextRange)+" of "+(0,J.zw)(a.sheets.length)+" items ",1),(0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.pageCount,(t=>((0,r.wg)(),(0,r.j4)(X.T,{onClick:e=>o.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==o.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,r.w5)((()=>[(0,r._)("span",r1,(0,J.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const o1={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},l1=(0,r._)("td",{class:"tw-w-4 tw-p-4"},[(0,r._)("div",{class:"tw-flex tw-items-center"},[(0,r._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,r._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),n1={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},d1={class:"tw-px-6 tw-py-4"},w1={class:"tw-px-6 tw-py-4"},c1={class:"tw-px-6 tw-py-4"},u1={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},p1={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},m1=["disabled"],h1=(0,r._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),g1={class:"tw-px-6 tw-py-4"},f1={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"};function v1(t,e,a,i,o,l){const n=(0,r.up)("SheetActions");return(0,r.wg)(),(0,r.iD)("tr",o1,[l1,(0,r._)("th",n1,(0,J.zw)(a.sheet.id),1),(0,r._)("td",d1,[(0,r._)("div",null,[(0,r._)("span",{class:(0,J.C_)(["tw-inline-block tw-w-[8px] tw-h-[8px] tw-rounded-full tw-mr-1",[1==a.sheet.active&&1==a.sheet.auto_fetch?"tw-bg-emerald-500":"tw-bg-red-500"]])},null,2),(0,r.Uk)(" "+(0,J.zw)(a.sheet.name),1)])]),(0,r._)("td",w1,[(0,r._)("div",null,(0,J.zw)(a.sheet.sheet_name),1)]),(0,r._)("td",c1,[(0,r._)("div",u1,[(0,r._)("label",p1,[(0,r.wy)((0,r._)("input",{disabled:o.isLoadingAuto,"onUpdate:modelValue":e[0]||(e[0]=t=>l.autoFetch=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,8,m1),[[s.e8,l.autoFetch]]),h1]),o.isLoadingAuto?((0,r.wg)(),(0,r.j4)(et.t,{key:0,color:"green",size:"small",class:"tw-animate-spin"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-loading")])),_:1})):(0,r.kq)("",!0)])]),(0,r._)("td",g1,(0,J.zw)(a.sheet.created_at.split("T")[0]),1),(0,r._)("td",f1,[(0,r.Wm)(n,{sheet:a.sheet},null,8,["sheet"])])])}const y1={key:0};function _1(t,e,a,s,i,o){const l=(0,r.up)("UpdateSheet"),n=(0,r.up)("SheetOrders"),d=(0,r.up)("popup");return a.sheet?((0,r.wg)(),(0,r.iD)("div",y1,[t.$can("update_sheet")?((0,r.wg)(),(0,r.j4)(X.T,{key:0,onClick:o.sync,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{class:(0,J.C_)([i.isLoadingSheet&&"tw-animate-spin"]),color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-autorenew")])),_:1},8,["class"])])),_:1},8,["onClick"])):(0,r.kq)("",!0),t.$can("update_sheet")?((0,r.wg)(),(0,r.j4)(X.T,{key:1,onClick:e[0]||(e[0]=t=>i.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,r.kq)("",!0),t.$can("delete_sheet")?((0,r.wg)(),(0,r.j4)(X.T,{key:2,onClick:e[1]||(e[1]=t=>i.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(et.t,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(l,{visible:i.showUpdatePopup,"onUpdate:visible":e[2]||(e[2]=t=>i.showUpdatePopup=t),sheet:a.sheet,onCancel:e[3]||(e[3]=t=>i.showUpdatePopup=!1)},null,8,["visible","sheet"]),(0,r.Wm)(n,{visible:i.showSheetPopup,"onUpdate:visible":e[4]||(e[4]=t=>i.showSheetPopup=t),sheet:a.sheet,orders:i.orders,onCancel:e[5]||(e[5]=t=>i.showSheetPopup=!1)},null,8,["visible","sheet","orders"]),(0,r.Wm)(d,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this sale?</p> You won't be able to revert this!",loading:i.isLoading,visible:i.showPopup,onResolved:o.handleDelete},null,8,["loading","visible","onResolved"])])):(0,r.kq)("",!0)}const x1={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},b1=(0,r._)("h1",{class:"tw-text-lg"},"Create Sheet",-1),k1={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},C1={class:"md:tw-col-span-6 tw-col-span-12"},D1=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Name",-1),S1={class:"md:tw-col-span-6 tw-col-span-12"},z1=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Sheet Name",-1),U1={class:"md:tw-col-span-12 tw-col-span-12"},L1=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Sheet ID",-1),P1={class:"md:tw-col-span-6 tw-col-span-12"},A1=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Auto Fetch",-1),W1={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},$1=(0,r._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),E1={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},O1=(0,r._)("span",{class:"text-white"}," Cancel ",-1),T1=(0,r._)("span",{class:"text-white"}," Save ",-1);function V1(t,e,a,i,o,l){const n=(0,r.up)("popup-full");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(n,{onCancel:e[5]||(e[5]=e=>t.$emit("cancel")),visible:a.visible},{default:(0,r.w5)((()=>[(0,r._)("div",x1,[b1,(0,r._)("div",k1,[(0,r._)("div",C1,[D1,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.newSheet.name=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.newSheet.name]])]),(0,r._)("div",S1,[z1,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>o.newSheet.sheet_name=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.newSheet.sheet_name]])]),(0,r._)("div",U1,[L1,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>o.newSheet.sheet_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.newSheet.sheet_id]])]),(0,r._)("div",P1,[A1,(0,r._)("label",W1,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.newSheet.auto_fetch=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,512),[[s.e8,o.newSheet.auto_fetch]]),$1])])]),(0,r._)("div",E1,[(0,r.Wm)(X.T,{onClick:e[4]||(e[4]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[O1])),_:1}),(0,r.Wm)(X.T,{loading:o.isLoading,onClick:l.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[T1])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var q1={props:["visible","sheet"],data(){return{isLoading:!1,newSheet:{name:"",sheet_id:"",sheet_name:"",auto_fetch:!0}}},watch:{visible(t){t&&(this.newSheet={...this.sheet,auto_fetch:1==this.sheet.auto_fetch})}},computed:{isFormValid(){return!!this.newSheet.name&&!!this.newSheet.sheet_id&&!!this.newSheet.sheet_name}},methods:{update(){if(!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;this.isLoading=!0;const t=this.newSheet;es.update(this.sheet.id,t).then((t=>{"SUCCESS"==t.data.code&&(this.$emit("cancel"),this.$alert({type:"success",title:"Sheet updated successfully"}),this.$store.dispatch("sheet/update",t.data.data.sheet))}),this.$handleApiError).finally((()=>this.isLoading=!1))}}};const R1=(0,d.Z)(q1,[["render",V1]]);var I1=R1;const F1={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},j1={key:0},N1={class:"tw-flex tw-items-center tw-gap-2 tw-mb-2"},M1=(0,r._)("h1",{class:"tw-text-sm tw-font-medium tw-text-neutral-700"},"Sheet's New Orders",-1),H1={class:"tw-bg-emerald-500 tw-text-white tw-px-1 tw-text-sm tw-rounded"},Y1={class:"tw-relative tw-overflow-x-auto"},K1={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500 tw-border tw-rounded"},Z1=(0,r._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50 tw-rounded-t tw-overflow-hidden"},[(0,r._)("tr",null,[(0,r._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Fullname"),(0,r._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Product"),(0,r._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"SKU"),(0,r._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Qty"),(0,r._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Price")])],-1),B1={class:"tw-px-6 tw-py-2"},Q1={class:"tw-px-6 tw-py-2"},G1={class:"tw-px-6 tw-py-2"},J1={class:"tw-px-6 tw-py-2"},X1={class:"tw-px-6 tw-py-2"},t2={class:"tw-flex tw-gap-2 mt-3 tw-justify-end"},e2=(0,r._)("span",{class:"text-white"}," Cancel ",-1),a2=(0,r._)("span",{class:"text-white"}," Save Orders",-1);function s2(t,e,a,s,i,o){const l=(0,r.up)("popup-full");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(l,{onCancel:e[1]||(e[1]=e=>t.$emit("cancel")),visible:a.visible},{default:(0,r.w5)((()=>[(0,r._)("div",F1,[a.orders.length>0?((0,r.wg)(),(0,r.iD)("div",j1,[(0,r._)("div",N1,[M1,(0,r._)("div",H1,(0,J.zw)(a.orders.length),1)]),(0,r._)("div",null,[(0,r._)("div",Y1,[(0,r._)("table",K1,[Z1,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.orders,(t=>((0,r.wg)(),(0,r.iD)("tr",{key:t,class:"tw-bg-white tw-border-b"},[(0,r._)("td",B1,(0,J.zw)(t["Full name"]),1),(0,r._)("td",Q1,[(0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t["Product name"].split("\n"),(t=>((0,r.wg)(),(0,r.iD)("p",{key:t},"- "+(0,J.zw)(t),1)))),128))])]),(0,r._)("td",G1,[(0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t["SKU"].split("\n"),(t=>((0,r.wg)(),(0,r.iD)("p",{key:t},(0,J.zw)(t),1)))),128))])]),(0,r._)("td",J1,[(0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t["Total quantity"].split("\n"),(t=>((0,r.wg)(),(0,r.iD)("p",{key:t},(0,J.zw)(t),1)))),128))])]),(0,r._)("td",X1,(0,J.zw)(t["Total charge"]),1)])))),128))])])])]),(0,r._)("div",t2,[(0,r.Wm)(X.T,{onClick:e[0]||(e[0]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[e2])),_:1}),(0,r.Wm)(X.T,{loading:i.isLoading,onClick:o.save,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[a2])),_:1},8,["loading","onClick"])])])):(0,r.kq)("",!0)])])),_:1},8,["visible"])])}var r2={props:["visible","sheet","orders"],data(){return{isLoading:!1}},computed:{sales(){return this.$store.getters["sale/sales"]}},methods:{save(){this.isLoading=!0,es.saveOrders(this.sheet.id).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({title:t.data.data.orders.length+" Order has been added",type:"success"}),this.$store.dispatch("sale/setSales",[...t.data.data.orders,...this.sales]),this.$emit("cancel"))}),(t=>{this.$handleApiError(t),"PERMISSION_DENIED"==t?.response?.data?.code&&this.$alert({title:"Access denied to this sheet",type:"warning"})})).finally((()=>{this.isLoading=!1}))}}};const i2=(0,d.Z)(r2,[["render",s2]]);var o2=i2,l2={props:["sheet"],name:"sheetActions",components:{UpdateSheet:I1,SheetOrders:o2},data(){return{showPopup:!1,showUpdatePopup:!1,showSheetPopup:!1,isLoading:!1,isLoadingSheet:!1,orders:[]}},computed:{},methods:{handleDelete(t){if(console.log(t),!t)return this.showPopup=!1,!1;this.delete()},delete(){this.isLoading=!0,es["delete"](this.sheet.id).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({title:"Deleted successfully",type:"success"}),this.$store.dispatch("sheet/delete",this.sheet.id),this.showPopup=!1)}),this.$handleApiError).finally((()=>{this.isLoading=!1}))},sync(){this.isLoadingSheet=!0,es.sync(this.sheet.id).then((t=>{"SUCCESS"==t.data.code&&(0==t.data.data.orders.length?this.$alert({title:"0 Orders found",type:"info"}):(this.orders=t.data.data.orders,this.showSheetPopup=!0),console.log(t.data.data.sheet),this.$store.dispatch("sheet/update",t.data.data.sheet)),console.log(t.data)}),(t=>{this.$handleApiError(t),console.log(t),this.$store.dispatch("sheet/update",t.response.data.data.sheet),"PERMISSION_DENIED"==t?.response?.data?.code&&this.$alert({title:"Access denied to this Google Sheet",type:"error"})})).finally((()=>{this.isLoadingSheet=!1}))}},mounted(){}};const n2=(0,d.Z)(l2,[["render",_1]]);var d2=n2,w2={props:["sheet"],components:{SheetActions:d2},data(){return{isLoadingAuto:!1}},computed:{autoFetch:{get(){return 1==this.sheet.auto_fetch},set(t){this.updateAutoFetch(t)}}},methods:{updateAutoFetch(t){this.isLoadingAuto=!0,es.updateAutoFetch(this.sheet.id,t).then((e=>{"SUCCESS"==e.data.code&&(this.$alert({title:t?"Activated":"Disabled",type:"success"}),this.$store.dispatch("sheet/update",e.data.data.sheet))}),this.$handleApiError).finally((()=>{this.isLoadingAuto=!1}))}}};const c2=(0,d.Z)(w2,[["render",v1]]);var u2=c2,p2={props:["sheets"],components:{SheetRow:u2},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10,columns:["id","name","sheet name","auto fetch","created","actions"]}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.sheets.length/this.paginationLimit)},items(){return this.sheets.slice(this.prevRange,this.nextRange)}},methods:{}};const m2=(0,d.Z)(p2,[["render",i1]]);var h2=m2;const g2={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},f2=(0,r._)("h1",{class:"tw-text-lg"},"Create Sheet",-1),v2={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},y2={class:"md:tw-col-span-6 tw-col-span-12"},_2=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Name",-1),x2={class:"md:tw-col-span-6 tw-col-span-12"},b2=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Sheet Name",-1),k2={class:"md:tw-col-span-12 tw-col-span-12"},C2=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Sheet ID",-1),D2={class:"md:tw-col-span-6 tw-col-span-12"},S2=(0,r._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Auto Fetch",-1),z2={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},U2=(0,r._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),L2={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},P2=(0,r._)("span",{class:"text-white"}," Cancel ",-1),A2=(0,r._)("span",{class:"text-white"}," Save ",-1);function W2(t,e,a,i,o,l){const n=(0,r.up)("popup-full");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(n,{onCancel:e[5]||(e[5]=e=>t.$emit("cancel")),visible:a.visible},{default:(0,r.w5)((()=>[(0,r._)("div",g2,[f2,(0,r._)("div",v2,[(0,r._)("div",y2,[_2,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.sheet.name=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sheet.name]])]),(0,r._)("div",x2,[b2,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>o.sheet.sheet_name=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sheet.sheet_name]])]),(0,r._)("div",k2,[C2,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>o.sheet.sheet_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[s.nr,o.sheet.sheet_id]])]),(0,r._)("div",D2,[S2,(0,r._)("label",z2,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.sheet.auto_fetch=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,512),[[s.e8,o.sheet.auto_fetch]]),U2])])]),(0,r._)("div",L2,[(0,r.Wm)(X.T,{onClick:e[4]||(e[4]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[P2])),_:1}),(0,r.Wm)(X.T,{loading:o.isLoading,onClick:l.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,r.w5)((()=>[A2])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var $2={props:["visible"],data(){return{isLoading:!1,sheet:{name:"",sheet_id:"",sheet_name:"",auto_fetch:!0}}},computed:{isFormValid(){return!!this.sheet.name&&!!this.sheet.sheet_id&&!!this.sheet.sheet_name}},methods:{create(){if(!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;this.isLoading=!0;const t=this.sheet;es.create(t).then((t=>{"SUCCESS"==t.data.code&&(this.$emit("cancel"),this.$alert({type:"success",title:"Sheet created successfully"}),this.$store.dispatch("sheet/addSheet",t.data.data.sheet))}),this.$handleApiError).finally((()=>this.isLoading=!1))}}};const E2=(0,d.Z)($2,[["render",W2]]);var O2=E2,T2={components:{SheetsTable:h2,AddSheet:O2},data(){return{localUrl:F,isLoaded:!1,showFilters:!1,date:null,search:"",showPopup:!1,email:"new-service-account@testing-379416.iam.gserviceaccount.com"}},computed:{sheets(){return this.$store.getters["sheet/sheets"]}},methods:{getSheets(){return this.isLoaded=!1,es.all().then((t=>("SUCCESS"==t.data.code&&this.$store.dispatch("sheet/setSheets",t.data.data.sheets),t)),this.$handleApiError).finally((()=>{this.isLoaded=!0}))},copy(){navigator.clipboard.writeText(this.email),this.$alert({title:"Email Copied !",type:"success"})}},mounted(){this.getSheets()}};const V2=(0,d.Z)(T2,[["render",Y0]]);var q2=V2,R2={name:"sheets",path:"/sheets",component:ns,meta:{module:"sheet"},children:[{name:"sheet/list",path:"",component:q2,meta:{module:"sheet",subModule:"sheet/list",title:"Google Sheets List",gate:"show_all_sheets"}}]};const I2={class:"py-5 px-2 tw-border tw-bg-white tw-w-full tw-rounded-md tw-mb-5"},F2={class:"tw-px-3"},j2={class:"tw-flex tw-items-center tw-justify-between tw-flex-wrap"},N2={class:"tw-flex tw-items-center tw-gap-x-3"},M2=(0,r._)("h2",{class:"tw-text-lg tw-font-medium tw-text-gray-800 darkx:tw-text-white"},"Orders",-1),H2={class:"tw-px-3 tw-py-1 tw-text-xs tw-text-emerald-600 tw-bg-emerald-100 tw-rounded-full darkx:tw-bg-gray-800 darkx:tw-text-orange-400"},Y2=(0,r._)("p",{class:"tw-mt-1 tw-text-sm tw-text-gray-500 darkx:tw-text-gray-300"},"These orders have needs to reconfirmed.",-1);function K2(t,e,a,s,i,o){const l=(0,r.up)("IndexFilters"),n=(0,r.up)("IndexTable");return(0,r.wg)(),(0,r.iD)("div",I2,[(0,r._)("section",F2,[(0,r._)("div",j2,[(0,r._)("div",null,[(0,r._)("div",N2,[M2,(0,r._)("span",H2,(0,J.zw)(i.totalOrders)+" order",1)]),Y2]),(0,r.kq)("",!0)]),(0,r.Wm)(l,{search:i.search,"onUpdate:search":e[0]||(e[0]=t=>i.search=t),filters:i.filters,"onUpdate:filters":e[1]||(e[1]=t=>i.filters=t),onFilter:e[2]||(e[2]=t=>o.handlePerPageChange(i.per_page)),onPerPageChange:o.handlePerPageChange,onFresh:o.paginateOrders,loading:i.fetching,statistics:i.statistics,"active-statistics":""},null,8,["search","filters","onPerPageChange","onFresh","loading","statistics"]),(0,r._)("div",null,[(0,r.Wm)(n,{onUpdate:o.handleItemUpdate,onPageChange:o.handlePageChange,onSortOrder:o.handleSortOrderChange,loading:i.fetching,from:i.from,to:i.to,"last-page":i.last_page,"per-page":i.per_page,total:i.total,"current-page":i.current_page,items:i.items},null,8,["onUpdate","onPageChange","onSortOrder","loading","from","to","last-page","per-page","total","current-page","items"])])])])}const Z2={class:"tw-flex tw-flex-col"},B2={class:"tw-overflow-x-auto"},Q2={class:"tw-inline-block tw-min-w-full tw-align-middle"},G2={class:"tw-overflow-hidden tw-border tw-border-gray-200 darkx:tw-border-gray-700 md:tw-rounded-lg"},J2={class:"tw-min-w-full tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700"},X2={class:"tw-bg-gray-50 darkx:tw-bg-gray-800"},t5=(0,r._)("th",{scope:"col",class:"tw-py-3.5 tw-px-4 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"},[(0,r._)("span",null,"ID")],-1),e5={scope:"col",class:"tw-py-3.5 tw-px-4 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"},a5=(0,r._)("span",null,"Created",-1),s5=(0,r._)("svg",{class:"tw-h-3",viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,r._)("path",{d:"M2.13347 0.0999756H2.98516L5.01902 4.79058H3.86226L3.45549 3.79907H1.63772L1.24366 4.79058H0.0996094L2.13347 0.0999756ZM2.54025 1.46012L1.96822 2.92196H3.11227L2.54025 1.46012Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,r._)("path",{d:"M0.722656 9.60832L3.09974 6.78633H0.811638V5.87109H4.35819V6.78633L2.01925 9.60832H4.43446V10.5617H0.722656V9.60832Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,r._)("path",{d:"M8.45558 7.25664V7.40664H8.60558H9.66065C9.72481 7.40664 9.74667 7.42274 9.75141 7.42691C9.75148 7.42808 9.75146 7.42993 9.75116 7.43262C9.75001 7.44265 9.74458 7.46304 9.72525 7.49314C9.72522 7.4932 9.72518 7.49326 9.72514 7.49332L7.86959 10.3529L7.86924 10.3534C7.83227 10.4109 7.79863 10.418 7.78568 10.418C7.77272 10.418 7.73908 10.4109 7.70211 10.3534L7.70177 10.3529L5.84621 7.49332C5.84617 7.49325 5.84612 7.49318 5.84608 7.49311C5.82677 7.46302 5.82135 7.44264 5.8202 7.43262C5.81989 7.42993 5.81987 7.42808 5.81994 7.42691C5.82469 7.42274 5.84655 7.40664 5.91071 7.40664H6.96578H7.11578V7.25664V0.633865C7.11578 0.42434 7.29014 0.249976 7.49967 0.249976H8.07169C8.28121 0.249976 8.45558 0.42434 8.45558 0.633865V7.25664Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.3"})],-1),r5=[a5,s5],i5=(0,r._)("th",{scope:"col",class:"tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Client ",-1),o5=(0,r._)("th",{scope:"col",class:"tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Phone ",-1),l5=(0,r._)("th",{scope:"col",class:"tw-w-10 tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Confirmation ",-1),n5=(0,r._)("th",{scope:"col",class:"tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Affected ",-1),d5=(0,r._)("th",{scope:"col",class:"tw-w-10 tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Delivery ",-1),w5=(0,r._)("th",{scope:"col",class:"tw-relative tw-py-3.5 tw-px-4"},[(0,r._)("span",{class:"tw-sr-only"},"Actions")],-1),c5={key:0,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},u5={key:1,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},p5=(0,r._)("tr",null,[(0,r._)("td",{colspan:"8"},[(0,r._)("div",{class:"tw-p-5 tw-text-center tw-text-gray-600 tw-font-medium"}," No Order was found ! ")])],-1),m5=[p5],h5={key:2,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},g5={colspan:"8"},f5={role:"status",class:"tw-w-full tw-p-4 tw-space-y-4 tw-border-gray-200 tw-divide-y tw-divide-gray-200 tw-rounded tw-shadow tw-animate-pulse dark:tw-divide-gray-700 md:tw-p-6 dark:tw-border-gray-700"},v5=(0,r._)("div",{class:"tw-flex tw-items-center tw-justify-between"},[(0,r._)("div",null,[(0,r._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-600 tw-w-24 tw-mb-2.5"}),(0,r._)("div",{class:"tw-w-32 tw-h-2 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-700"})]),(0,r._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-700 tw-w-12"})],-1),y5=(0,r._)("div",null,[(0,r._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-600 tw-w-24 tw-mb-2.5"}),(0,r._)("div",{class:"tw-w-32 tw-h-2 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-700"})],-1),_5=(0,r._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-700 tw-w-12"},null,-1),x5=[y5,_5],b5={class:"tw-mt-6"};function k5(t,e,a,s,i,o){const l=(0,r.up)("TableRow"),n=((0,r.up)("loading"),(0,r.up)("TablePaginationNoNums"));return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",Z2,[(0,r._)("div",B2,[(0,r._)("div",Q2,[(0,r._)("div",G2,[(0,r._)("table",J2,[(0,r._)("thead",X2,[(0,r._)("tr",null,[t5,(0,r._)("th",e5,[(0,r._)("button",{onClick:e[0]||(e[0]=e=>t.$emit("sortOrder",{name:"created_at"})),class:"tw-flex tw-items-center tw-gap-x-3 focus:tw-outline-none"},r5)]),i5,o5,l5,n5,d5,w5])]),!a.loading&&a.items.length>0?((0,r.wg)(),(0,r.iD)("tbody",c5,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.items,(a=>((0,r.wg)(),(0,r.j4)(l,{onUpdate:e[1]||(e[1]=e=>t.$emit("update",e)),key:a.id,item:a},null,8,["item"])))),128))])):(0,r.kq)("",!0),a.loading||0!=a.items.length?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("tbody",u5,m5)),a.loading?((0,r.wg)(),(0,r.iD)("tbody",h5,[(0,r._)("tr",null,[(0,r.kq)("",!0),(0,r._)("td",g5,[(0,r._)("div",f5,[v5,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.perPage-1,(t=>((0,r.wg)(),(0,r.iD)("div",{key:t,class:"tw-flex tw-items-center tw-justify-between tw-pt-4"},x5)))),128))])])])])):(0,r.kq)("",!0)])])])])]),(0,r._)("div",b5,[(0,r.Wm)(n,{from:a.from,to:a.to,"last-page":a.lastPage,"per-page":a.perPage,total:a.total,"current-page":a.currentPage,onPageChange:e[2]||(e[2]=e=>t.$emit("pageChange",e))},null,8,["from","to","last-page","per-page","total","current-page"])])])}const C5={class:"sm:tw-flex sm:tw-items-center sm:tw-justify-between"},D5={class:"tw-text-sm tw-text-gray-500 darkx:tw-text-gray-400"},S5={class:"tw-font-medium tw-text-gray-700 darkx:tw-text-gray-100"},z5={class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-4 sm:tw-mt-0"},U5=["disabled"],L5=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5 rtl:tw--scale-x-100"},[(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18"})],-1),P5=(0,r._)("span",null," previous ",-1),A5=[L5,P5],W5=["disabled"],$5=(0,r._)("span",null," Next ",-1),E5=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5 rtl:tw--scale-x-100"},[(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"})],-1),O5=[$5,E5];function T5(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",C5,[(0,r._)("div",D5,[(0,r.Uk)(" Page "),(0,r._)("span",S5,(0,J.zw)(a.currentPage)+" of "+(0,J.zw)(a.lastPage),1)]),(0,r._)("div",z5,[(0,r._)("button",{disabled:a.currentPage<=1,onClick:e[0]||(e[0]=t=>o.changePage(a.currentPage-1)),class:(0,J.C_)([[a.currentPage<=1&&"tw-cursor-not-allowed"],"tw-flex tw-items-center tw-justify-center tw-w-1/2 tw-px-5 tw-py-2 tw-text-sm tw-text-gray-700 tw-capitalize tw-transition-colors tw-duration-200 tw-bg-white tw-border tw-border-solid tw-rounded-md sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-100 darkx:tw-bg-gray-900 darkx:tw-text-gray-200 darkx:tw-border-gray-700 darkx:hover:tw-bg-gray-800"])},A5,10,U5),(0,r._)("button",{disabled:a.currentPage>=o.totalPages,onClick:e[1]||(e[1]=t=>o.changePage(a.currentPage+1)),class:(0,J.C_)([[a.currentPage>=o.totalPages&&"tw-cursor-not-allowed"],"tw-flex tw-items-center tw-justify-center tw-w-1/2 tw-px-5 tw-py-2 tw-text-sm tw-text-gray-700 tw-capitalize tw-transition-colors tw-duration-200 tw-bg-white tw-border tw-border-solid tw-rounded-md sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-100 darkx:tw-bg-gray-900 darkx:tw-text-gray-200 darkx:tw-border-gray-700 darkx:hover:tw-bg-gray-800"])},O5,10,W5)])])])}var V5={props:{from:{type:Number,default:1},to:{type:Number,default:1},perPage:{type:Number,default:1},total:{type:Number,default:1},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1}},data(){return{totalItems:100,itemsPerPage:5}},computed:{totalPages(){return this.lastPage},showEllipsisStart(){return this.currentPage>3},showEllipsisEnd(){return this.currentPage<this.totalPages-2},visiblePages(){let t=Math.max(1,this.currentPage-1),e=Math.min(this.totalPages,this.currentPage+1);const a=[];for(let s=t;s<=e;s++)a.push(s);return a}},methods:{changePage(t){this.$emit("pageChange",t)}}};const q5=(0,d.Z)(V5,[["render",T5]]);var R5=q5;const I5={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},F5={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white"},j5={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},N5={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-flex tw-items-center tw-gap-2"},M5={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},H5={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-font-[cairo]"},Y5={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},K5={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-font-[cairo]"},Z5={class:"tw-px-12 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},B5={class:"tw-px-12 tw-py-2 tw-text-sm tw-whitespace-nowrap"},Q5=(0,r._)("div",{class:"tw-w-1.5 tw-h-1.5 tw-rounded-full tw-bg-emerald-500"},null,-1),G5={key:1},J5={class:"tw-px-12 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},X5={class:"tw-px-4 tw-py-2 tw-text-sm tw-whitespace-nowrap"};function t4(t,e,a,s,i,o){const l=(0,r.up)("TableActions");return(0,r.wg)(),(0,r.iD)("tr",null,[(0,r._)("td",I5,[(0,r._)("div",null,[(0,r._)("h2",F5,(0,J.zw)(a.item.id),1)])]),(0,r._)("td",j5,[(0,r._)("div",null,[(0,r._)("h2",N5,[(0,r._)("p",null,(0,J.zw)(i.moment(a.item.created_at).format("DD[/]MM[/]YY")),1),(0,r.kq)("",!0)])])]),(0,r._)("td",M5,[(0,r._)("div",null,[(0,r._)("h2",H5,(0,J.zw)(a.item.fullname),1)])]),(0,r._)("td",Y5,[(0,r._)("div",null,[(0,r._)("h2",K5,(0,J.zw)(a.item.phone),1)])]),(0,r._)("td",Z5,[(0,r._)("span",{class:(0,J.C_)([[o.confirmation.bgLight,o.confirmation.textLight],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},(0,J.zw)(o.confirmation.name),3)]),(0,r._)("td",B5,[a.item.delivery_fullname?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,J.C_)([["tw-text-emerald-800","tw-bg-emerald-100"],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-pl-1.5 tw-py-0.5 tw-rounded tw-w-fit tw-flex tw-items-center tw-gap-2"])},[Q5,(0,r._)("span",null,(0,J.zw)(a.item.delivery_fullname),1)])):((0,r.wg)(),(0,r.iD)("div",G5,[(0,r._)("span",{class:(0,J.C_)([["tw-text-gray-800","tw-bg-gray-100"],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},"No Delivery")]))]),(0,r._)("td",J5,[(0,r._)("span",{class:(0,J.C_)([[o.deliveryState.bgLight,o.deliveryState.textLight],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},(0,J.zw)(o.deliveryState.value?o.deliveryState.name:"Not Selected"),3)]),(0,r._)("td",X5,[(0,r._)("div",null,[(0,r.Wm)(l,{onUpdate:e[0]||(e[0]=e=>t.$emit("update",e)),item:a.item},null,8,["item"])])])])}const e4={class:"tw-h-full"},a4={class:"tw-flex tw-items-center tw-gap-2"},s4={class:"tw-px-2 tw-py-1 tw-w-[25px] tw-h-[25px] tw-border tw-border-solid tw-border-green-500/20 hover:tw-bg-green-500/10 hover:tw-border-green-500/70 tw-duration-300 tw-text-green-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},r4={key:0};function i4(t,e,a,s,i,o){const l=(0,r.up)("UpdatePopup");return(0,r.wg)(),(0,r.iD)("div",e4,[(0,r._)("div",a4,[(0,r._)("button",s4,[(0,r.Wm)(et.t,{size:"x-small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-whatsapp")])),_:1})]),(0,r._)("button",{onClick:e[0]||(e[0]=t=>i.popup=!0),class:"tw-px-2 tw-py-1 tw-w-[25px] tw-h-[25px] tw-border tw-border-solid tw-border-orange-500/20 hover:tw-bg-orange-500/10 hover:tw-border-orange-500/70 tw-duration-300 tw-text-orange-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,r.Wm)(et.t,{size:"x-small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-pencil-outline")])),_:1})])]),i.popup?((0,r.wg)(),(0,r.iD)("div",r4,[(0,r.Wm)(l,{onUpdate:e[1]||(e[1]=e=>t.$emit("update",e)),visible:i.popup,"onUpdate:visible":e[2]||(e[2]=t=>i.popup=t),item:a.item},null,8,["visible","item"])])):(0,r.kq)("",!0)])}const o4={class:"tw-mx-auto tw-w-[95%] md:tw-max-w-[800px] tw-overflow-hidden tw-h-fit dark:tw-bg-neutral-900 tw-bg-white tw-border tw-border-solid dark:tw-border-neutral-700 tw-border-neutral-300 tw-shadow-md tw-my-5 tw-rounded-lg"},l4=(0,r._)("div",{class:"tw-p-4 tw-text-lg tw-border-b tw-border-solid tw-font-medium tw-flex dark:tw-text-neutral-400 tw-text-neutral-500 tw-items-center tw-gap-4 dark:tw-bg-neutral-800 tw-bg-gray-50"}," Order Informations ",-1),n4={class:"tw-bg-white tw-p-4"},d4={class:"tw-grid tw-gap-6 tw-gap-y-5 tw-grid-cols-1 md:tw-grid-cols-2"},w4={class:"tw-col-span-2 md:tw-col-span-1"},c4=(0,r._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Client Name",-1),u4={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},p4={class:"tw-col-span-2 md:tw-col-span-1"},m4=(0,r._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Phone Number",-1),h4={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},g4={class:"tw-col-span-2 md:tw-col-span-1"},f4=(0,r._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"City",-1),v4={class:"tw-relative"},y4=(0,r._)("option",{value:null,disabled:""},"Choose a City",-1),_4=["value"],x4=["value"],b4=(0,r._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,r._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,r._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),k4={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},C4={class:"tw-col-span-2 md:tw-col-span-1"},D4=(0,r._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Address",-1),S4={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},z4={class:"tw-col-span-2"},U4=(0,r._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),L4={class:"tw-relative"},P4=["value"],A4=(0,r._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,r._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,r._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),W4={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},$4={key:0,class:"md:tw-col-span-1 tw-col-span-2"},E4=(0,r._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Date",-1),O4={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},T4={key:1,class:"md:tw-col-span-1 tw-col-span-2"},V4=(0,r._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Note",-1),q4={class:"tw-col-span-2"},R4=(0,r._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Note",-1),I4={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},F4={class:"md:tw-col-span-1 tw-col-span-2"},j4={class:"md:tw-col-span-1 tw-col-span-2"},N4=(0,r._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Upsell",-1),M4={class:"tw-relative"},H4=["value"],Y4=(0,r._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,r._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,r._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),K4={class:"tw-col-span-2"},Z4={class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},B4={key:0,class:"tw-text-red-400 tw-text-xs"},Q4={class:"tw-flex tw-justify-end tw-items-center tw-p-4 tw-gap-3 dark:tw-bg-neutral-900 tw-bg-gray-50 tw-border-t tw-border-solid"},G4=["disabled"],J4=(0,r._)("span",null,"Update",-1);function X4(t,e,a,i,o,l){const n=(0,r.up)("OrderAffectation"),d=(0,r.up)("OrderItems"),w=(0,r.up)("popup-new");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(w,{visible:a.visible,closeable:!1,onCancel:l.cancel},{default:(0,r.w5)((()=>[(0,r._)("div",o4,[l4,(0,r._)("div",n4,[(0,r._)("div",d4,[(0,r._)("div",w4,[c4,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.itemCopy.fullname=t),onInput:e[1]||(e[1]=t=>o.errors.fullname=null),type:"text",class:(0,J.C_)([[o.errors.fullname&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),placeholder:"John",required:""},null,34),[[s.nr,o.itemCopy.fullname]]),o.errors.fullname?((0,r.wg)(),(0,r.iD)("label",u4,(0,J.zw)(o.errors.fullname),1)):(0,r.kq)("",!0)]),(0,r._)("div",p4,[m4,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.itemCopy.phone=t),onInput:e[3]||(e[3]=t=>o.errors.phone=null),class:(0,J.C_)([[o.errors.phone&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"123-45-678",required:""},null,34),[[s.nr,o.itemCopy.phone]]),o.errors.phone?((0,r.wg)(),(0,r.iD)("label",h4,(0,J.zw)(o.errors.phone),1)):(0,r.kq)("",!0)]),(0,r._)("div",g4,[f4,(0,r._)("div",v4,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.itemCopy.city=t),onChange:e[5]||(e[5]=t=>o.errors.city=null),class:(0,J.C_)([[o.errors.city&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 tw-pr-7"])},[y4,(0,r._)("option",{value:o.itemCopy.city,disabled:""},(0,J.zw)(o.itemCopy.city),9,_4),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.cities,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.name,key:t.id},(0,J.zw)(t.name),9,x4)))),128))],34),[[s.bM,o.itemCopy.city]]),b4]),o.errors.city?((0,r.wg)(),(0,r.iD)("label",k4,(0,J.zw)(o.errors.city),1)):(0,r.kq)("",!0)]),(0,r._)("div",C4,[D4,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>o.itemCopy.adresse=t),onInput:e[7]||(e[7]=t=>o.errors.adresse=null),class:(0,J.C_)([[o.errors.adresse&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"Address",required:""},null,34),[[s.nr,o.itemCopy.adresse]]),o.errors.adresse?((0,r.wg)(),(0,r.iD)("label",S4,(0,J.zw)(o.errors.adresse),1)):(0,r.kq)("",!0)]),(0,r._)("div",z4,[U4,(0,r._)("div",L4,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>o.itemCopy.followup_confirmation=t),onChange:e[9]||(e[9]=t=>o.errors.followup_confirmation=null),class:(0,J.C_)([[o.errors.followup_confirmation&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.confirmationsFollowup,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.value,class:(0,J.C_)([t.text,!t.value&&"!tw-text-green-500"]),key:t.id},(0,J.zw)(t.name),11,P4)))),128))],34),[[s.bM,o.itemCopy.followup_confirmation]]),A4]),o.errors.followup_confirmation?((0,r.wg)(),(0,r.iD)("label",W4,(0,J.zw)(o.errors.followup_confirmation),1)):(0,r.kq)("",!0)]),"reporter"==o.itemCopy.followup_confirmation?((0,r.wg)(),(0,r.iD)("div",$4,[E4,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>o.itemCopy.reported_agente_date=t),onInput:e[11]||(e[11]=t=>o.errors.reported_agente_date=null),class:(0,J.C_)([[o.errors.reported_agente_date&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"date",required:""},null,34),[[s.nr,o.itemCopy.reported_agente_date]]),o.errors.reported_agente_date?((0,r.wg)(),(0,r.iD)("label",O4,(0,J.zw)(o.errors.reported_agente_date),1)):(0,r.kq)("",!0)])):(0,r.kq)("",!0),"reporter"==o.itemCopy.followup_confirmation?((0,r.wg)(),(0,r.iD)("div",T4,[V4,(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":e[12]||(e[12]=t=>o.itemCopy.reported_agente_note=t),rows:"1",class:"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500",placeholder:"Enter a note"},null,512),[[s.nr,o.itemCopy.reported_agente_note]])])):(0,r.kq)("",!0),(0,r._)("div",q4,[R4,(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":e[13]||(e[13]=t=>o.itemCopy.note=t),onInput:e[14]||(e[14]=t=>o.errors.note=null),class:(0,J.C_)([[o.errors.note&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),rows:"3",placeholder:"Enter a note"},null,34),[[s.nr,o.itemCopy.note]]),o.errors.note?((0,r.wg)(),(0,r.iD)("label",I4,(0,J.zw)(o.errors.note),1)):(0,r.kq)("",!0)]),(0,r._)("div",F4,[(0,r.Wm)(n,{item:o.itemCopy,error:o.errors.affectation,"onUpdate:error":e[15]||(e[15]=t=>o.errors.affectation=t),affectation:o.itemCopy.affectation,"onUpdate:affectation":e[16]||(e[16]=t=>o.itemCopy.affectation=t)},null,8,["item","error","affectation"])]),(0,r._)("div",j4,[N4,(0,r._)("div",M4,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e[17]||(e[17]=t=>o.itemCopy.upsell=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.upsells,(t=>((0,r.wg)(),(0,r.iD)("option",{class:(0,J.C_)([t.text]),value:t.value,key:t.id},(0,J.zw)(t.name),11,H4)))),128))],512),[[s.bM,o.itemCopy.upsell]]),Y4])]),(0,r._)("div",K4,[(0,r._)("label",Z4,[(0,r.Uk)("Order Items "),o.errors.items?((0,r.wg)(),(0,r.iD)("span",B4," # "+(0,J.zw)(o.errors.items),1)):(0,r.kq)("",!0)]),(0,r._)("div",null,[(0,r.Wm)(d,{order:o.itemCopy,error:o.errors.items,products:o.products,"products-fetched":o.products_fetched,items:o.itemCopy.items,"onUpdate:items":e[18]||(e[18]=t=>o.itemCopy.items=t)},null,8,["order","error","products","products-fetched","items"])])])])]),(0,r._)("div",Q4,[(0,r._)("button",{onClick:e[19]||(e[19]=(...t)=>l.cancel&&l.cancel(...t)),class:"tw-py-2 tw-px-7 tw-rounded tw-text-sm tw-border tw-border-solid tw-border-tansparent dark:tw-border-neutral-900 hover:tw-border-neutral-400 dark:hover:tw-border-neutral-500 hover:tw-bg-gray-300 tw-bg-gray-200 dark:tw-bg-neutral-600 tw-duration-300 tw-text-neutral-900 dark:tw-text-neutral-300"}," Cancel "),(0,r._)("button",{onClick:e[20]||(e[20]=(...t)=>l.handleUpdate&&l.handleUpdate(...t)),disabled:o.isLoading,class:"tw-py-2 tw-px-7 tw-flex tw-items-center tw-rounded tw-text-sm tw-bg-orange-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-orange-600 dark:tw-border-neutral-900 dark:hover:tw-border-orange-500 hover:tw-bg-orange-500/80 dark:hover:tw-bg-orange-400 tw-duration-300 tw-text-white"},[(0,r.Wm)(et.t,{size:"small",class:(0,J.C_)(["tw-duration-300 tw-animate-spin tw-overflow-hidden tw-max-w-0 tw-mr-0",[o.isLoading&&"!tw-max-w-[50px] !tw-mr-3"]])},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-loading")])),_:1},8,["class"]),J4],8,G4)])])])),_:1},8,["visible","onCancel"])])}const t3=(t,e)=>e.fullname?e.phone?e.adresse?e.note||"annuler"!=e.followup_confirmation?!!e3(t,e.items):(t.errors.note="Add Cancelation note !",!1):(t.errors.adresse="Address is required",!1):(t.errors.phone="Phone Number is required",!1):(t.errors.fullname="Client Name is required",!1),e3=(t,e)=>{if(!e.length)return t.errors.items="You should add one order item at least.",!1;let a=!0;return e.forEach((e=>0==e.product_id?(t.errors.items="Product is required for order item",a=!1,!1):0==e.product_variation_id?(t.errors.items="Select a product variation",a=!1,!1):0==e.quantity?(t.errors.items="Items quantity cannot be 0",a=!1,!1):void 0)),a},a3=(t,e)=>{t.$alert({title:"Updated Successfully",type:"success"});const a=e.data.order;t.$emit("update",a),t.isLoading=!1,t.cancel(),t.errors={}},s3=(t,e)=>{t.$alert({title:e.message,type:"error"}),"VALIDATION_ERROR"==e.code&&(t.errors=e.errors),t.isLoading=!1},r3=(t,e)=>{t.isLoading=!0,t.errors={},Oo.update(e.id,e).then((e=>a3(t,e.data))).catch((e=>s3(t,e.response.data))).finally((()=>t.isLoading=!1))},i3={key:0,class:"tw-col-span-12 tw-rounded-lg tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},o3={key:1,class:"md:tw-col-span-12 tw-col-span-12"},l3={class:"tw-max-w-full tw-overflow-auto"},n3={class:"tw-text-xs tw-text-gray-700 tw-uppercase !tw-rounded-t-lg tw-border tw-border-solid"},d3={class:"tw-bg-gray-50"},w3={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},c3={key:0},u3=(0,r._)("td",{colspan:"3"},null,-1),p3=(0,r._)("td",null,[(0,r._)("div",{class:"tw-p-2"},[(0,r._)("p",null,"Total: ")])],-1),m3={colspan:"2",class:"tw-p-2"},h3={class:"tw-p-2 tw-py-1 tw-text-sm tw-text-green-500 tw-w-24 tw-font-medium tw-block focus:tw-outline-none tw-shadow-sm tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},g3={colspan:"6"},f3={class:"tw-flex tw-justify-end tw-items-center tw-py-3"},v3=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),y3=(0,r._)("span",null,"Add Item",-1),_3=[v3,y3],x3={key:1},b3={colspan:"6"},k3={class:"tw-scale-75 tw-p-5"};function C3(t,e,a,s,i,o){const l=(0,r.up)("ItemRow"),n=(0,r.up)("loading");return(0,r.wg)(),(0,r.iD)("div",null,[a.items.length?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",i3," No Order items ")),a.items.length?((0,r.wg)(),(0,r.iD)("div",o3,[(0,r._)("div",l3,[((0,r.wg)(),(0,r.iD)("table",{key:a.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,r._)("thead",n3,[(0,r._)("tr",d3,[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,r._)("th",{class:(0,J.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,r._)("div",w3,(0,J.zw)(t),1)],2))),64))])]),a.productsFetched?((0,r.wg)(),(0,r.iD)("tbody",c3,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.items,(t=>((0,r.wg)(),(0,r.j4)(l,{key:t.id,item:t,products:a.products,onDelete:o.deleteItem,onUpdate:o.updateItem},null,8,["item","products","onDelete","onUpdate"])))),128)),(0,r._)("tr",null,[u3,p3,(0,r._)("td",m3,[(0,r._)("div",h3,[(0,r._)("p",null,(0,J.zw)(i.currency)+" "+(0,J.zw)(o.price),1)])])]),(0,r._)("tr",null,[(0,r._)("td",g3,[(0,r._)("div",f3,[(0,r._)("button",{onClick:e[0]||(e[0]=(...t)=>o.addItem&&o.addItem(...t)),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-400 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},_3)])])])])):((0,r.wg)(),(0,r.iD)("tbody",x3,[(0,r._)("tr",null,[(0,r._)("td",b3,[(0,r._)("div",k3,[(0,r.Wm)(n)])])])]))]))])])):(0,r.kq)("",!0)])}const D3=(0,r._)("td",null,null,-1),S3={class:"tw-p-2"},z3={class:"tw-relative"},U3=["value"],L3=(0,r._)("option",{value:0,selected:""},"Choose Product",-1),P3=["value"],A3=(0,r._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,r._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,r._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),W3={class:"tw-p-2"},$3={key:0,class:"tw-relative"},E3=["value"],O3=(0,r._)("option",{value:"",disabled:""},"Choose Variation",-1),T3=["value"],V3={key:1,class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},q3=(0,r._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,r._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})],-1),R3=[q3],I3={class:"tw-p-2"},F3=["value"],j3={class:"tw-p-2"},N3=["value"],M3={class:"tw-flex tw-justify-center"};function H3(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("tr",null,[D3,(0,r._)("td",null,[(0,r._)("div",S3,[(0,r._)("div",z3,[(0,r._)("select",{onChange:e[0]||(e[0]=(...t)=>o.handleProductChange&&o.handleProductChange(...t)),value:a.item.product_id,class:"tw-block tw-border-solid focus:tw-outline-none tw-w-full tw-p-2 tw-pr-6 tw-text-xs tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},[L3,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.products,(t=>((0,r.wg)(),(0,r.iD)("option",{key:t.id,value:t.id},(0,J.zw)(t.name),9,P3)))),128))],40,U3),A3])])]),(0,r._)("td",null,[(0,r._)("div",W3,[a.item.product_id?((0,r.wg)(),(0,r.iD)("div",$3,[o.product.variations.length>1?((0,r.wg)(),(0,r.iD)("select",{key:0,onChange:e[1]||(e[1]=(...t)=>o.handleVariationChange&&o.handleVariationChange(...t)),value:a.item.product_variation_id,class:"tw-block tw-border-solid focus:tw-outline-none tw-w-full tw-p-2 tw-pr-6 tw-text-xs tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},[O3,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.product.variations,(t=>((0,r.wg)(),(0,r.iD)("option",{key:t.id,value:t.id},(0,J.zw)(t.color)+" "+(0,J.zw)(t.size),9,T3)))),128))],40,E3)):(0,r.kq)("",!0),o.product.variations.length>1?((0,r.wg)(),(0,r.iD)("div",V3,R3)):(0,r.kq)("",!0)])):(0,r.kq)("",!0)])]),(0,r._)("td",null,[(0,r._)("div",I3,[(0,r._)("input",{onInput:e[2]||(e[2]=e=>t.$emit("update",{...a.item,quantity:parseInt(e.target.value)>=0?parseInt(e.target.value):0})),value:a.item.quantity,min:"0",type:"number",class:"focus:tw-outline-none tw-border-solid tw-block tw-w-24 tw-p-2 tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded-lg tw-bg-gray-50 sm:tw-text-xs focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},null,40,F3)])]),(0,r._)("td",null,[(0,r._)("div",j3,[(0,r._)("input",{onInput:e[3]||(e[3]=e=>t.$emit("update",{...a.item,price:parseFloat(e.target.value)})),value:a.item.price,min:"0",type:"number",class:"focus:tw-outline-none tw-border-solid tw-block tw-w-24 tw-p-2 tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded-lg tw-bg-gray-50 sm:tw-text-xs focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},null,40,N3)])]),(0,r._)("td",null,[(0,r._)("div",M3,[(0,r._)("button",{onClick:e[4]||(e[4]=(...t)=>o.handleDelete&&o.handleDelete(...t)),class:"tw-px-2 tw-py-1 tw-w-[25px] tw-h-[25px] tw-border tw-border-solid tw-border-red-500/20 hover:tw-bg-red-500/10 hover:tw-border-red-500/70 tw-duration-300 tw-text-red-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,r.Wm)(et.t,{size:"x-small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-delete-outline")])),_:1})])])])])}var Y3={props:{item:{required:!0},products:{required:!0}},computed:{product(){return 0==this.item.product_id?null:this.products.find((t=>t.id==this.item.product_id))}},methods:{handleProductChange(t){const e=parseInt(t.target.value);if(!e)return!1;const a=this.products.find((t=>t.id==e));console.log(a.variations.length>0?a.variations[0].id:null);const s={...this.item,product_id:e,product:a,product_ref:a.ref,product_variation_id:a.variations.length>0?a.variations[0].id:null,product_variation:a.variations.length>0?a.variations[0]:null};this.$emit("update",s)},handleVariationChange(t){this.$emit("update",{...this.item,product_variation:this.product.variations.find((e=>e.id==parseInt(t.target.value))),product_variation_id:parseInt(t.target.value)})},handleDelete(){this.$emit("delete",this.item.id)}},mounted(){}};const K3=(0,d.Z)(Y3,[["render",H3]]);var Z3=K3,B3={components:{ItemRow:Z3},props:{items:{required:!0,default:[]},error:{required:!1,default:null},products:{required:!0},productsFetched:{required:!0,default:!1},order:{required:!0}},data(){return{currency:N}},computed:{price(){return Ki(this.order)}},methods:{updateItem(t){const e=this.items.map((e=>e.id==t.id?t:e));this.$emit("update:items",e)},deleteItem(t){const e=this.items.filter((e=>e.id!=t));this.$emit("update:items",e)},addItem(){const t=this.items.length>0?this.items[this.items.length-1]:1,e=t?t.id+1:1,a={id:e,quantity:0,price:0,product_variation_id:0,product_id:0},s=[...this.items,a];this.$emit("update:items",s)}},mounted(){}};const Q3=(0,d.Z)(B3,[["render",C3]]);var G3=Q3;const J3=(0,r._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Affectation",-1),X3={key:0,class:"tw-relative"},t8=["value","disabled"],e8=(0,r._)("option",{value:""},"Choose a Delivery",-1),a8=["value"],s8=(0,r._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,r._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,r._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),r8={key:1,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},i8={key:2,class:"tw-relative"},o8={class:"tw-absolute tw-scale-75 tw-left-1/2 tw-top-1/2 -tw-translate-x-1/2 -tw-translate-y-1/2 tw-z-10"},l8=(0,r._)("select",{disabled:"",class:"tw-opacity-30 tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[(0,r._)("option",{value:null,selected:""},"Loading...")],-1),n8=(0,r._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},null,-1);function d8(t,e,a,s,i,o){const l=(0,r.up)("loading");return(0,r.wg)(),(0,r.iD)("div",null,[J3,i.fetched?((0,r.wg)(),(0,r.iD)("div",X3,[(0,r._)("select",{value:a.affectation,onChange:e[0]||(e[0]=(...t)=>o.handleChange&&o.handleChange(...t)),disabled:"reconfirmer"!=a.item.followup_confirmation,class:(0,J.C_)([[a.error&&"!tw-border-red-400","reconfirmer"!=a.item.followup_confirmation&&"tw-cursor-not-allowed"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[e8,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.availableDeliveries,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.id,key:t.id},(0,J.zw)(t.name),9,a8)))),128))],42,t8),s8])):(0,r.kq)("",!0),i.fetched&&a.error?((0,r.wg)(),(0,r.iD)("label",r8,(0,J.zw)(a.error),1)):(0,r.kq)("",!0),i.fetched?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",i8,[(0,r._)("div",o8,[(0,r.Wm)(l)]),l8,n8]))])}var w8={props:{affectation:{required:!0},error:{required:!1,default:null},item:{required:!0}},data(){return{deliveries:[],fetched:!1}},computed:{availableDeliveries(){return this.deliveries.filter((t=>t.has.some((t=>this.item.items.some((e=>e.product_id==t))))))},delivery(){return this.deliveries.find((t=>t.id==this.affectation))}},watch:{"item.confirmation":{deep:!0,handler(){}},"item.items":{deep:!0,handler(){if(!this.affectation)return!1;this.delivery.has.some((t=>this.item.items.some((e=>e.product_id==t))))||this.$emit("update:affectation",null)}}},methods:{getDeliveries(){this.fetched=!1,Q.allDeliveries().then((t=>{"SUCCESS"==t?.data.code&&(this.deliveries=t.data.data.deliveries,this.fetched=!0)})).catch(this.$handleApiError)},handleChange(t){this.$emit("update:affectation",t.target.value),this.$emit("update:error",null)}},mounted(){this.getDeliveries()}};const c8=(0,d.Z)(w8,[["render",d8]]);var u8=c8,p8={components:{OrderItems:G3,OrderAffectation:u8},props:{visible:{required:!0},item:{required:!0}},data(){return{confirmationsFollowup:Tn,upsells:Vn,isLoading:!1,products_fetched:null,products:null,itemCopy:null,errors:{fullname:null,phone:null,city:null,adresse:null,note:null,reported_agente_date:null,affectation:null,items:null}}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{handleUpdate(){const t=t3(this,this.itemCopy);if(!t)return!1;r3(this,this.itemCopy)},cancel(){if(this.isLoading)return!1;this.$emit("update:visible",!1)},getProducts(){this.products_fetched=!1,ss.allForOrder().then((t=>{"SUCCESS"==t.data.code?this.products=t.data.data.products:this.products=[],this.products_fetched=!0})).catch(this.$handleApiError)}},mounted(){this.itemCopy=JSON.parse(JSON.stringify(this.item)),this.getProducts()}};const m8=(0,d.Z)(p8,[["render",X4]]);var h8=m8,g8={components:{UpdatePopup:h8},props:{item:{required:!0}},data(){return{popup:!1,isLoading:!1}},methods:{handle(){}}};const f8=(0,d.Z)(g8,[["render",i4]]);var v8=f8,y8={components:{TableActions:v8},props:{item:{required:!0}},data(){return{moment:DR()}},computed:{confirmation(){return Tn.find((t=>t.value==this.item.followup_confirmation))},deliveryState(){return qn.find((t=>t.value==this.item.delivery))}},methods:{}};const _8=(0,d.Z)(y8,[["render",t4]]);var x8=_8,b8={components:{TablePaginationNoNums:R5,TableRow:x8},props:{items:{default:[]},loading:{type:Boolean,default:!0},from:{type:Number,default:1},to:{type:Number,default:1},perPage:{type:Number,default:10},total:{type:Number,default:0},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1}}};const k8=(0,d.Z)(b8,[["render",k5]]);var C8=k8;const D8={class:"tw-mt-6 tw-mb-4 md:tw-flex md:tw-items-center md:tw-justify-between"},S8={class:"tw-inline-flex tw-overflow-hidden tw-bg-white tw-border tw-divide-x tw-rounded-lg darkx:tw-bg-gray-900 rtl:tw-flex-row-reverse darkx:tw-border-gray-700 darkx:tw-divide-gray-700"},z8=(0,r._)("button",{class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 tw-bg-gray-100 sm:tw-text-sm darkx:tw-bg-gray-800 darkx:tw-text-gray-300"}," View all ",-1),U8=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,r._)("path",{fill:"currentColor",d:"M9 5a1 1 0 1 0 0 2a1 1 0 0 0 0-2zM6.17 5a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 0 1 0-2h1.17zM15 11a1 1 0 1 0 0 2a1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-1.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h7.17zM9 17a1 1 0 1 0 0 2a1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h1.17z"})],-1),L8=[U8],P8=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,r._)("path",{fill:"currentColor",d:"M10 2c-.6 0-1 .4-1 1v18c0 .6.4 1 1 1s1-.4 1-1V3c0-.6-.4-1-1-1zM5 12c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1s1-.4 1-1v-8c0-.6-.4-1-1-1zm10-4c-.6 0-1 .4-1 1v12c0 .6.4 1 1 1s1-.4 1-1V9c0-.6-.4-1-1-1zm5 8c-.6 0-1 .4-1 1v4c0 .6.4 1 1 1s1-.4 1-1v-4c0-.6-.4-1-1-1z"})],-1),A8=[P8],W8=["disabled"],$8=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[(0,r._)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4.75 10.75h-3m12.5-2c0 3-2.798 5.5-6.25 5.5c-3.75 0-6.25-3.5-6.25-3.5v3.5m9.5-9h3m-12.5 2c0-3 2.798-5.5 6.25-5.5c3.75 0 6.25 3.5 6.25 3.5v-3.5"})],-1),E8=[$8],O8={class:"tw-relative"},T8=["value"],V8=(0,r.uE)('<option value="5">5</option><option value="10">10</option><option value="20">20</option><option value="50">50</option><option value="100">100</option><option value="200">200</option>',6),q8=[V8],R8=(0,r._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,r._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,r._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),I8={class:"tw-relative tw-flex tw-items-center tw-mt-4 md:tw-mt-0"},F8=["value"],j8={class:"tw-overflow-hidden tw-col-span-1"},N8={class:"tw-overflow-hidden tw-col-span-1"};function M8(t,e,a,i,o,l){const n=(0,r.up)("FiltersWrapper"),d=(0,r.up)("IndexStatistics");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",D8,[(0,r._)("div",S8,[z8,(0,r._)("button",{onClick:e[0]||(e[0]=t=>o.showFilters=!o.showFilters),class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},L8),a.activeStatistics&&a.statistics?((0,r.wg)(),(0,r.iD)("button",{key:0,onClick:e[1]||(e[1]=t=>o.showStatistics=!o.showStatistics),class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},A8)):(0,r.kq)("",!0),(0,r._)("button",{onClick:e[2]||(e[2]=e=>t.$emit("fresh")),disabled:a.loading,class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},E8,8,W8),(0,r._)("div",O8,[(0,r._)("select",{onChange:e[3]||(e[3]=e=>t.$emit("perPageChange",e.target.value)),value:a.perPage,class:"tw-h-full tw-px-5 tw-py-2 tw-w-20 focus:tw-outline-none tw-text-xs tw-font-medium tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},q8,40,T8),R8])]),(0,r._)("div",I8,[(0,r._)("input",{type:"text",placeholder:"Search",value:a.search,onInput:e[4]||(e[4]=e=>t.$emit("update:search",e.target.value)),onKeyup:e[5]||(e[5]=(0,s.D2)((e=>t.$emit("filter")),["enter"])),class:"tw-block tw-w-full tw-py-1.5 tw-pl-5 tw-text-gray-700 tw-bg-white tw-border tw-border-solid tw-border-gray-200 tw-rounded-lg md:tw-w-80 placeholder-gray-400/70 tw-pr-11 rtl:tw-pr-11 rtl:tw-pl-5 darkx:tw-bg-gray-900 darkx:tw-text-gray-300 darkx:tw-border-gray-600 focus:tw-border-orange-400 darkx:focus:tw-border-orange-300 focus:tw-ring-orange-300 focus:tw-outline-none focus:tw-ring focus:tw-ring-opacity-40"},null,40,F8),(0,r._)("button",{onClick:e[6]||(e[6]=e=>t.$emit("filter")),class:"tw-absolute tw-right-0 tw-px-2 tw-py-1 tw-w-[38px] tw-h-[36px] tw-border-solid tw-rounded-r-lg tw-border-l tw-text-orange-500/80 tw-border-orange-500/20 hover:tw-bg-orange-500/10 hover:tw-border-orange-500/70 tw-duration-300 tw-flex tw-items-center tw-justify-center"},[(0,r.Wm)(et.t,{size:"small"},{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-magnify")])),_:1})])])]),(0,r._)("div",{class:(0,J.C_)([[o.showFilters?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,r._)("div",j8,[(0,r.Wm)(n,{onFilter:e[7]||(e[7]=e=>t.$emit("filter")),filters:a.filters,onUpdate:e[8]||(e[8]=e=>t.$emit("update:filters",e))},null,8,["filters"])])],2),a.statistics?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,J.C_)([[o.showStatistics?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,r._)("div",N8,[(0,r.Wm)(d,{statistics:a.statistics},null,8,["statistics"])])],2)):(0,r.kq)("",!0)])}const H8={class:"tw-mb-4"},Y8={class:"tw-grid tw-grid-cols-12 tw-gap-4"},K8={class:"tw-h-full tw-w-full tw-p-3 tw-rounded tw-space-y-2 tw-border tw-border-solid"},Z8={class:"tw-flex tw-items-center tw-justify-between"},B8={class:"tw-text-xl tw-font-bold tw-text-gray-900"},Q8={class:"tw-px-2 tw-py-1 tw-font-medium tw-text-sm tw-rounded tw-bg-white tw-text-gray-900"};function G8(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("div",H8,[(0,r._)("div",Y8,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.visible,((t,e)=>((0,r.wg)(),(0,r.iD)("div",{key:e,class:"md:tw-col-span-3 tw-col-span-12"},[(0,r._)("div",K8,[(0,r._)("p",{class:(0,J.C_)(["tw-text-sm tw-font-bold tw-w-fit tw-h-fit tw-px-2 tw-rounded",[o.getConfirmation(t.confirmation).textLight,o.getConfirmation(t.confirmation).bgLight]])},(0,J.zw)(t.name),3),(0,r._)("div",Z8,[(0,r._)("span",B8,(0,J.zw)(t.total),1),(0,r._)("span",Q8,(0,J.zw)(t.percent)+"%",1)])])])))),128))])])}var J8={props:{statistics:{required:!0}},computed:{visible(){return this.statistics.show.includes("*")?this.statistics.data:this.statistics.data.filter((t=>this.statistics.show.includes(t.followup_confirmation)))}},methods:{getConfirmation(t){return Tn.find((e=>e.value==t))}}};const X8=(0,d.Z)(J8,[["render",G8]]);var t6=X8;const e6={class:"tw-mb-4"},a6={class:"tw-grid tw-grid-cols-12 tw-gap-4 tw-p-1"},s6={class:"md:tw-col-span-4 tw-col-span-12 tw-rounded"},r6=(0,r._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Created",-1),i6=["value"],o6={class:"md:tw-col-span-4 tw-col-span-12 tw-rounded"},l6=(0,r._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),n6=["value"],d6=(0,r._)("option",{value:"all",selected:""},"All",-1),w6=["value"],c6={class:"md:tw-col-span-4 tw-col-span-12 tw-rounded"},u6=(0,r._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Delivery Status",-1),p6=["value"],m6=(0,r._)("option",{value:"all",selected:""},"All",-1),h6=["value"],g6=(0,r._)("button",{class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},[(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[(0,r._)("path",{fill:"#fff",d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})]),(0,r._)("span",null,"Filter")],-1),f6=[g6];function v6(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("div",e6,[(0,r._)("div",a6,[(0,r._)("div",s6,[r6,(0,r._)("input",{value:a.filters.created_at,type:"date",onChange:e[0]||(e[0]=e=>t.$emit("update",{...a.filters,created_at:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,i6)]),(0,r._)("div",o6,[l6,(0,r._)("select",{value:a.filters.followup_confirmation,onChange:e[1]||(e[1]=e=>t.$emit("update",{...a.filters,followup_confirmation:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[d6,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.confirmationsFollowup,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.value,class:"tw-capitalize",key:t.id},(0,J.zw)(t.name),9,w6)))),128))],40,n6)]),(0,r._)("div",c6,[u6,(0,r._)("select",{onChange:e[2]||(e[2]=e=>t.$emit("update",{...a.filters,delivery:e.target.value})),value:a.filters.delivery,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[m6,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.deliveries,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.value,class:"tw-capitalize",key:t.id},(0,J.zw)(t.name),9,h6)))),128))],40,p6)]),(0,r.kq)("",!0),(0,r._)("div",{onClick:e[3]||(e[3]=e=>t.$emit("filter")),class:"tw-col-span-12 tw-flex tw-justify-end"},f6)])])}var y6={props:{filters:{required:!0,default:{}}},data(){return{confirmationsFollowup:Tn,deliveryStatus:qn,deliveries:[{id:1,value:"annuler",name:"Cancelled"},{id:2,value:"pas-de-reponse",name:"No Answer"}]}}};const _6=(0,d.Z)(y6,[["render",v6]]);var x6=_6,b6={components:{IndexStatistics:t6,FiltersWrapper:x6},props:{perPage:{type:Number,default:10},statistics:{default:null},activeStatistics:{type:Boolean,default:!1},loading:{default:!0},search:{default:""},filters:{required:!0}},data(){return{showFilters:!1,showStatistics:!1}}};const k6=(0,d.Z)(b6,[["render",M8]]);var C6=k6,D6={components:{IndexTable:C8,IndexFilters:C6},data(){return{fetching:!0,items:[],statistics:null,first_page_url:null,lase_page_url:null,next_page_url:null,prev_page_url:null,last_page:1,from:1,to:1,total:0,totalOrders:0,links:null,search:"",sort_by:"created_at",sort_order:"desc",per_page:10,current_page:1,filters:{followup_confirmation:"all",delivery:"all",created_at:"all"}}},methods:{paginateOrders(){const t="?page="+this.current_page,e={sort_by:this.sort_by,sort_order:this.sort_order,per_page:this.per_page,current_page:this.current_page,search:this.search,filters:this.filters};return this.fetching=!0,Oo.paginate(t,e).then((({data:t})=>{const e=t.data.orders;this.setOptions(e),this.statistics=this.search?this.statistics:t.data.statistics})).then((()=>{this.fetching=!1}))},setOptions(t){this.items=t.data,this.first_page_url=Zi(t.first_page_url),this.lase_page_url=Zi(t.last_page_url),this.next_page_url=Zi(t.next_page_url),this.prev_page_url=Zi(t.prev_page_url),this.last_page=parseInt(t.last_page),this.from=parseInt(t.from),this.to=parseInt(t.to),this.per_page=parseInt(t.per_page),this.total=parseInt(t.total),this.totalOrders=this.search?this.totalOrders:parseInt(t.total),this.links=t.links},handleNext(){},handlePrev(){},handleItemUpdate(t){this.items=this.items.map((e=>e.id==t.id?t:e))},handlePageChange(t){this.current_page=t,this.paginateOrders()},handlePerPageChange(t){this.per_page=parseInt(t),this.handlePageChange(1)},handleSortOrderChange(){this.sort_order="asc"==this.sort_order?"desc":"asc",this.paginateOrders()}},mounted(){this.paginateOrders()}};const S6=(0,d.Z)(D6,[["render",K2]]);var z6=S6,U6={path:"/followup",name:"followup",component:ns,meta:{module:"dashboard"},children:[{name:"followup/index",path:"",component:z6,meta:{module:"followup",title:"Follow Up Orders",gate:"follow_up_orders"}}]};const L6=(0,r._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,r._)("div",null,[(0,r._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Page not found")])],-1),P6={class:"py-5 px-5 tw-border bg-white tw-w-full tw-flex tw-items-center tw-justify-center tw-rounded-md tw-min-h-[500px]"},A6={class:"tw-flex tw-items-center tw-flex-col"},W6=(0,r._)("div",{class:"md:tw-text-6xl tw-text-4xl tw-font-black text-primary-color"},"404",-1),$6={class:"tw-w-fit tw-flex tw-items-center md:tw-text-2xl tw-text-xl mt-md-5 mt-3 tw-gap-2"},E6=(0,r._)("div",{class:"tw-max-w-[400px] tw-text-center md:tw-text-lg tw-text-sm mt-5"}," The page you requested was not found or you don't have the permission to access it. ",-1);function O6(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("div",null,[L6,(0,r._)("div",P6,[(0,r._)("div",A6,[W6,(0,r._)("div",$6,[(0,r.Wm)(et.t,null,{default:(0,r.w5)((()=>[(0,r.Uk)("mdi-alert-circle")])),_:1}),(0,r.Uk)(" Oops! Page not found! ")]),E6])])])}var T6={};const V6=(0,d.Z)(T6,[["render",O6]]);var q6=V6;const R6={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"};function I6(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",R6,[(0,r._)("div",null,[(0,r.Wm)(X.T,{onClick:o.sendRequest,loading:i.isLoading,variant:"flat",color:"primary-color"},{default:(0,r.w5)((()=>[(0,r.Uk)("Send Request")])),_:1},8,["onClick","loading"])])])])}const F6="api/orders/count",j6="get";var N6={name:"Orders from Youcan",sheet_id:"QSDfFsqdDSQDfrsqFDSRHTRzer",sheet_name:"Youcan-Orders",auto_fetch:!0},M6={data(){return{isLoading:!1,test:N6}},methods:{async sendRequest(){switch(this.isLoading=!0,await Z.getCookie(),j6){case"get":Y.get(F6).then((t=>{console.log("---- Success Response ----"),console.log(`---- Code ${t.status} ----`),console.log(t.data)}),(t=>{this.$handleApiError(t),console.log("---- Failed Response ----"),console.log(`---- Code ${t?.response.status} ----`),console.log(t?.response?.data)})).finally((()=>this.isLoading=!1));break;case"post":Y.post(F6,N6).then((t=>{console.log("---- Success Response ----"),console.log(`---- Code ${t.status} ----`),console.log(t.data)}),(t=>{this.$handleApiError(t),console.log("---- Failed Response ----"),console.log(`---- Code ${t?.response.status} ----`),console.log(t?.response?.data)})).finally((()=>this.isLoading=!1));break;case"delete":Y["delete"](F6).then((t=>{console.log("---- Success Response ----"),console.log(`---- Code ${t.status} ----`),console.log(t.data)}),(t=>{this.$handleApiError(t),console.log("---- Failed Response ----"),console.log(`---- Code ${t?.response.status} ----`),console.log(t?.response?.data)})).finally((()=>this.isLoading=!1));break;default:break}}}};const H6=(0,d.Z)(M6,[["render",I6]]);var Y6=H6;const K6=[It,tp,Gy,sC,DL,rM,bY,QB,hG,AJ,U0,R2,U6,{name:"default",path:"/test",component:ns,children:[{name:"test",path:"",component:Y6,meta:{title:"Test abro m3a rasek",module:"test",gate:"all"}}]},{name:"not-found",path:"/404",component:ns,meta:{title:"Not Found"},children:[{name:"404",path:"",component:q6}]},{name:"catch-all",path:"/:pathMatch(.*)",beforeEnter:(t,e,a)=>a({name:"404"}),meta:{title:"Not Found"}}],Z6=(0,u.p7)({history:(0,u.PO)("/"),routes:K6});Z6.beforeEach(G);var B6=Z6,Q6=(a(9773),a(8957));const G6={colors:{"primary-color":"#FF9F43","secondary-color":"#1B2850","primary-indigo":"#1B2850","primary-orange":"#FF9F43","primary-blue":"#00CFE8","primary-green":"#28C76F"}};var J6=(0,Q6.Rd)({theme:{defaultTheme:"customTheme",themes:{customTheme:G6}}});const X6={install(t){t.config.globalProperties.$can=function(t){const e=this.$store.getters["user/permissions"];return e.includes(t)}}};var t7=X6;const e7={install(t){t.config.globalProperties.$alert=function(t){this.$store.dispatch("alert/toggleAlert",t)}}};var a7=e7;const s7={install(t){t.config.globalProperties.$handleApiError=function(e){const a=e?.response?.data?.code;let s="error",r="Something wrong happened. Try again",i=!0;const o=["VALIDATION_ERROR","NOT_ACTIVE_ERROR","INVALID_CREDENTIALS","PERMISSION_DENIED"];switch(o.includes(a)&&(i=!1),console.log(e),"ERR_NETWORK"==e.code&&(r="Network error. Check your connection"),a){case"NOT_ALLOWED":r="Your are not allowed to this resources";break;case"ERROR":r=e?.response?.data.message;break;case"NOT_AUTHENTICATED":r="Your session expired",setTimeout((()=>{t.config.globalProperties.$store.dispatch("user/logout"),t.config.globalProperties.$router.push("/login")}),2e3);break;case"NOT_FOUND":i=!1,t.config.globalProperties.$router.push({name:"404"});break;default:break}return i&&t.config.globalProperties.$alert({type:s,title:r}),e}}};var r7=s7,i7=a(7025);const o7=t=>((0,r.dD)("data-v-ff4afcd0"),t=t(),(0,r.Cn)(),t),l7={class:"tw-min-h-[500px] tw-flex tw-items-center tw-justify-center tw-bg-white tw-rounded-md tw-border"},n7=o7((()=>(0,r._)("div",{class:"tw-w-[40px] tw-h-[40px] tw-animate-spin loading tw-border-4 tw-border-x-transparent tw-border-t-transparent tw-rounded-full"},null,-1))),d7=[n7];function w7(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("div",l7,d7)}var c7={};const u7=(0,d.Z)(c7,[["render",w7],["__scopeId","data-v-ff4afcd0"]]);var p7=u7;const m7={class:"tw-flex tw-justify-center tw-items-center"},h7=(0,r._)("div",{class:"tw-relative tw-w-8 tw-h-8 tw-animate-spin tw-rounded-full tw-bg-gradient-to-r tw-from-purple-400 tw-via-blue-500 tw-to-red-400"},[(0,r._)("div",{class:"tw-absolute tw-top-1/2 tw-left-1/2 tw-transform tw--translate-x-1/2 tw--translate-y-1/2 tw-w-7 tw-h-7 tw-bg-white tw-rounded-full tw-border-2 tw-border-white"})],-1),g7=[h7];function f7(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("div",m7,g7)}var v7={};const y7=(0,d.Z)(v7,[["render",f7]]);var _7=y7;const x7={key:0},b7={ref:"popup",class:"tw-fixed tw-top-0 tw-left-0 tw-z-[50999] tw-right-0 tw-bottom-0 tw-flex tw-items-center tw-justify-center"},k7={name:"body",class:"tw-z-[50999] tw-bg-white md:tw-min-w-[300px] md:tw-max-w-[800px] tw-flex tw-flex-col md:tw-min-h-[170px] tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5"},C7=["innerHTML"],D7={key:1,class:"tw-text-lg tw-text-gray-700"},S7={class:"tw-flex tw-gap-3 tw-justify-end mt-5"};function z7(t,e,a,s,i,o){return a.visible?((0,r.wg)(),(0,r.iD)("div",x7,[((0,r.wg)(),(0,r.j4)(r.lR,{to:"body"},[(0,r._)("div",null,[(0,r._)("div",b7,[(0,r._)("div",k7,[(0,r._)("div",{class:(0,J.C_)(["tw-font-medium tw-text-lg mb-5 tw-text-start",o.currentType.class])},[(0,r.Wm)(et.t,{size:"small",class:"mr-1"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(o.currentType.icon),1)])),_:1}),(0,r._)("span",null,(0,J.zw)(a.title),1)],2),a.body?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"tw-text-center tw-text-lg tw-text-gray-700",innerHTML:a.body},null,8,C7)):((0,r.wg)(),(0,r.iD)("div",D7,[(0,r.WI)(t.$slots,"default")])),(0,r.Wm)(sa.C),(0,r._)("div",S7,[(0,r.Wm)(X.T,{variant:"flat",color:"grey",onClick:e[0]||(e[0]=t=>o.resolve(!1))},{default:(0,r.w5)((()=>[(0,r.Uk)("Cancel")])),_:1}),a.noConfirm?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(X.T,{key:0,loading:a.loading,variant:"flat",color:a.btnColor?a.btnColor:"red",onClick:e[1]||(e[1]=t=>o.resolve(!0))},{default:(0,r.w5)((()=>[(0,r.Uk)("Confirm")])),_:1},8,["loading","color"]))])]),(0,r._)("div",{onClick:e[2]||(e[2]=t=>o.resolve(!1)),class:(0,J.C_)(["tw-duration-300 tw-absolute tw-top-0 tw-left-0 tw-w-full tw-h-full tw-bg-neutral-900/50 tw-opacity-0",{"!tw-opacity-100":a.visible}])},null,2)],512)])]))])):(0,r.kq)("",!0)}var U7={props:["visible","loading","title","body","type","noConfirm","btnColor"],data(){return{show:!0,types:{warning:{class:"tw-text-orange-400",icon:"mdi-alert-circle-outline"},info:{class:"tw-text-blue-400",icon:"mdi-information-outline"}}}},watch:{visible(t){this.show=t}},methods:{resolve(t){this.$emit("resolved",t)}},computed:{currentType(){return this.types[this.type]}}};const L7=(0,d.Z)(U7,[["render",z7]]);var P7=L7;const A7={key:0},W7={ref:"popup",class:"tw-fixed tw-top-0 tw-left-0 tw-z-[50999] tw-right-0 tw-bottom-0 tw-flex tw-items-center tw-justify-center"};function $7(t,e,a,i,o,l){return a.visible?((0,r.wg)(),(0,r.iD)("div",A7,[((0,r.wg)(),(0,r.j4)(r.lR,{to:".my-application"},[(0,r._)("div",null,[(0,r._)("div",W7,[(0,r._)("div",{name:"body",onClick:e[0]||(e[0]=(0,s.iM)((t=>l.resolve(!1)),["self"])),class:"tw-z-[50999] tw-w-full md:tw-min-w-[300px] tw-overflow-y-auto tw-max-h-screen tw-flex tw-flex-col md:tw-min-h-[170px]"},[(0,r.WI)(t.$slots,"default")]),(0,r._)("div",{onClick:e[1]||(e[1]=t=>l.resolve(!1)),class:(0,J.C_)(["tw-duration-300 tw-absolute tw-top-0 tw-left-0 tw-w-full tw-h-full tw-bg-neutral-900/50 tw-opacity-0",{"!tw-opacity-100":a.visible}])},null,2)],512)])]))])):(0,r.kq)("",!0)}var E7={props:["visible","loading","title","body","type","noConfirm","btnColor"],data(){return{show:!0,types:{warning:{class:"tw-text-orange-400",icon:"mdi-alert-circle-outline"},info:{class:"tw-text-blue-400",icon:"mdi-information-outline"}}}},watch:{visible(t){this.show=t}},methods:{resolve(t){this.$emit("cancel",t)}},computed:{currentType(){return this.types[this.type]}}};const O7=(0,d.Z)(E7,[["render",$7]]);var T7=O7,V7=a(4679),q7=a(5781),R7=a.n(q7),I7=a(2583);const F7={key:0},j7={ref:"popup",class:"tw-fixed tw-top-0 tw-left-0 tw-z-[50999] tw-right-0 tw-bottom-0 tw-flex tw-items-center tw-justify-center"};function N7(t,e,a,i,o,l){return a.visible?((0,r.wg)(),(0,r.iD)("div",F7,[((0,r.wg)(),(0,r.j4)(r.lR,{to:"body"},[(0,r._)("div",null,[(0,r._)("div",j7,[(0,r.Wm)(I7.v,null,{default:(0,r.w5)((()=>[o.showContent?((0,r.wg)(),(0,r.iD)("div",{key:0,onClick:e[0]||(e[0]=(0,s.iM)((t=>l.resolve(!1)),["self"])),class:"tw-z-[50999] tw-w-full md:tw-min-w-[300px] !tw-overflow-auto !tw-max-h-screen"},[(0,r.WI)(t.$slots,"default")])):(0,r.kq)("",!0)])),_:3}),(0,r._)("div",{onClick:e[1]||(e[1]=t=>l.resolve(!1)),class:(0,J.C_)(["tw-duration-300 tw-absolute tw-top-0 tw-left-0 tw-w-full tw-h-full tw-backdrop-blur-sm tw-opacity-0",{"!tw-opacity-100":a.visible}])},null,2)],512)])]))])):(0,r.kq)("",!0)}var M7={props:{visible:{required:!0,default:!1},closeable:{required:!1,default:!0}},data(){return{showContent:!1}},watch:{visible(t){t?setTimeout((()=>{this.showContent=t}),0):this.showContent=t}},methods:{resolve(t){this.closeable&&this.$emit("cancel",t)}},computed:{},mounted(){document.body.style.overflow="hidden",document.body.style.height="100vh",this.showContent=this.visible},unmounted(){document.body.style.height="none",document.body.style.overflow="visible"}};const H7=(0,d.Z)(M7,[["render",N7]]);var Y7=H7;(0,s.ri)(c).use(B6).use(R).use(J6).use(t7).use(a7).use(r7).use(i7.Z).component("LoadingAnimation",p7).component("Loading",_7).component("Popup",P7).component("PopupFull",T7).component("VueDatePicker",V7.Z).component("downloadCsv",R7()).component("popupNew",Y7).mount("#app")}},e={};function a(s){var r=e[s];if(void 0!==r)return r.exports;var i=e[s]={id:s,loaded:!1,exports:{}};return t[s].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=t,function(){var t=[];a.O=function(e,s,r,i){if(!s){var o=1/0;for(w=0;w<t.length;w++){s=t[w][0],r=t[w][1],i=t[w][2];for(var l=!0,n=0;n<s.length;n++)(!1&i||o>=i)&&Object.keys(a.O).every((function(t){return a.O[t](s[n])}))?s.splice(n--,1):(l=!1,i<o&&(o=i));if(l){t.splice(w--,1);var d=r();void 0!==d&&(e=d)}}return e}i=i||0;for(var w=t.length;w>0&&t[w-1][2]>i;w--)t[w]=t[w-1];t[w]=[s,r,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){var t,e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__};a.t=function(s,r){if(1&r&&(s=this(s)),8&r)return s;if("object"===typeof s&&s){if(4&r&&s.__esModule)return s;if(16&r&&"function"===typeof s.then)return s}var i=Object.create(null);a.r(i);var o={};t=t||[null,e({}),e([]),e(e)];for(var l=2&r&&s;"object"==typeof l&&!~t.indexOf(l);l=e(l))Object.getOwnPropertyNames(l).forEach((function(t){o[t]=function(){return s[t]}}));return o["default"]=function(){return s},a.d(i,o),i}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,s){return a.f[s](t,e),e}),[]))}}(),function(){a.u=function(t){return"js/"+t+"."+{128:"65a19ac7",269:"6bcf28cc",617:"ac7ccd9f"}[t]+".js"}}(),function(){a.miniCssF=function(t){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="production:";a.l=function(s,r,i,o){if(t[s])t[s].push(r);else{var l,n;if(void 0!==i)for(var d=document.getElementsByTagName("script"),w=0;w<d.length;w++){var c=d[w];if(c.getAttribute("src")==s||c.getAttribute("data-webpack")==e+i){l=c;break}}l||(n=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.setAttribute("data-webpack",e+i),l.src=s),t[s]=[r];var u=function(e,a){l.onerror=l.onload=null,clearTimeout(p);var r=t[s];if(delete t[s],l.parentNode&&l.parentNode.removeChild(l),r&&r.forEach((function(t){return t(a)})),e)return e(a)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=u.bind(null,l.onerror),l.onload=u.bind(null,l.onload),n&&document.head.appendChild(l)}}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){a.p="/"}(),function(){var t={143:0};a.f.j=function(e,s){var r=a.o(t,e)?t[e]:void 0;if(0!==r)if(r)s.push(r[2]);else{var i=new Promise((function(a,s){r=t[e]=[a,s]}));s.push(r[2]=i);var o=a.p+a.u(e),l=new Error,n=function(s){if(a.o(t,e)&&(r=t[e],0!==r&&(t[e]=void 0),r)){var i=s&&("load"===s.type?"missing":s.type),o=s&&s.target&&s.target.src;l.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",l.name="ChunkLoadError",l.type=i,l.request=o,r[1](l)}};a.l(o,n,"chunk-"+e,e)}},a.O.j=function(e){return 0===t[e]};var e=function(e,s){var r,i,o=s[0],l=s[1],n=s[2],d=0;if(o.some((function(e){return 0!==t[e]}))){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(n)var w=n(a)}for(e&&e(s);d<o.length;d++)i=o[d],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(w)},s=self["webpackChunkproduction"]=self["webpackChunkproduction"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(3116)}));s=a.O(s)})();
//# sourceMappingURL=app.0b53d40d.js.map